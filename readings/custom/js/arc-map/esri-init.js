// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.19/esri/copyright.txt for details.
/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/

//>>built
(function (b, k) {
    var f, r = function () {},
        m = function (a) {
            for (var c in a) return 0;
            return 1
        },
        n = {}.toString,
        l = function (a) {
            return "[object Function]" == n.call(a)
        },
        h = function (a) {
            return "[object String]" == n.call(a)
        },
        e = function (a) {
            return "[object Array]" == n.call(a)
        },
        a = function (a, c) {
            if (a)
                for (var b = 0; b < a.length;) c(a[b++])
        },
        g = function (a, c) {
            for (var b in c) a[b] = c[b];
            return a
        },
        d = function (a, c) {
            return g(Error(a), {
                src: "dojoLoader",
                info: c
            })
        },
        c = 1,
        s = function () {
            return "_" + c++
        },
        p = function (a, c, b) {
            return La(a, c, b, 0, p)
        },
        u = this,
        w = u.document,
        t = w && w.createElement("DiV"),
        q = p.has = function (a) {
            return l(v[a]) ? v[a] = v[a](u, w, t) : v[a]
        },
        v = q.cache = k.hasCache;
    q.add = function (a, c, b, d) {
        (void 0 === v[a] || d) && (v[a] = c);
        return b && q(a)
    };
    q.add("host-webworker", "undefined" !== typeof WorkerGlobalScope && self instanceof WorkerGlobalScope);
    q("host-webworker") && (g(k.hasCache, {
        "host-browser": 0,
        dom: 0,
        "dojo-dom-ready-api": 0,
        "dojo-sniff": 0,
        "dojo-inject-api": 1,
        "host-webworker": 1,
        "dojo-guarantee-console": 0
    }), k.loaderPatch = {
        injectUrl: function (a, c) {
            try {
                importScripts(a), c()
            } catch (b) {
                console.info("failed to load resource (" +
                    a + ")"), console.error(b)
            }
        }
    });
    for (var z in b.has) q.add(z, b.has[z], 0, 1);
    var y = 0,
        x = [],
        A = 0,
        C = r,
        H = r,
        P;
    p.isXdUrl = r;
    p.initSyncLoader = function (a, c, b) {
        A || (A = a, C = c, H = b);
        return {
            sync: "sync",
            requested: 1,
            arrived: 2,
            nonmodule: 3,
            executing: 4,
            executed: 5,
            syncExecStack: x,
            modules: I,
            execQ: M,
            getModule: S,
            injectModule: pa,
            setArrived: Z,
            signal: B,
            finishExec: ea,
            execModule: fa,
            dojoRequirePlugin: A,
            getLegacyMode: function () {
                return y
            },
            guardCheckComplete: ga
        }
    };
    var L = location.protocol,
        E = location.host;
    p.isXdUrl = function (a) {
        return /^\./.test(a) ?
            !1 : /^\/\//.test(a) ? !0 : (a = a.match(/^([^\/\:]+\:)\/+([^\/]+)/)) && (a[1] != L || E && a[2] != E)
    };
    q.add("dojo-force-activex-xhr", !w.addEventListener && "file:" == window.location.protocol);
    q.add("native-xhr", "undefined" != typeof XMLHttpRequest);
    if (q("native-xhr") && !q("dojo-force-activex-xhr")) P = function () {
        return new XMLHttpRequest
    };
    else {
        var O = ["Msxml2.XMLHTTP", "Microsoft.XMLHTTP", "Msxml2.XMLHTTP.4.0"],
            Q;
        for (f = 0; 3 > f;) try {
            if (Q = O[f++], new ActiveXObject(Q)) break
        } catch (D) {}
        P = function () {
            return new ActiveXObject(Q)
        }
    }
    p.getXhr =
        P;
    q.add("dojo-gettext-api", 1);
    p.getText = function (a, c, b) {
        var g = P();
        g.open("GET", qa(a), !1);
        g.send(null);
        if (200 == g.status || !location.host && !g.status) b && b(g.responseText, c);
        else throw d("xhrFailed", g.status);
        return g.responseText
    };
    var F = q("csp-restrictions") ? function () {} : new Function("return eval(arguments[0]);");
    p.eval = function (a, c) {
        return F(a + "\r\n//# sourceURL\x3d" + c)
    };
    var J = {},
        B = p.signal = function (c, b) {
            var g = J[c];
            a(g && g.slice(0), function (a) {
                a.apply(null, e(b) ? b : [b])
            })
        },
        G = p.on = function (a, c) {
            var b = J[a] ||
                (J[a] = []);
            b.push(c);
            return {
                remove: function () {
                    for (var a = 0; a < b.length; a++)
                        if (b[a] === c) {
                            b.splice(a, 1);
                            break
                        }
                }
            }
        },
        T = [],
        ha = {},
        ia = [],
        U = {},
        ra = p.map = {},
        aa = [],
        I = {},
        ba = "",
        K = {},
        ca = {},
        R = {},
        W = 0,
        X = function (a) {
            var c, b, g, d;
            for (c in ca) b = ca[c], (g = c.match(/^url\:(.+)/)) ? K["url:" + Ma(g[1], a)] = b : "*now" == c ? d = b : "*noref" != c && (g = ja(c, a, !0), K[g.mid] = K["url:" + g.url] = b);
            d && d(Ba(a));
            ca = {}
        },
        Na = function (a) {
            return a.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g, function (a) {
                return "\\" + a
            })
        },
        Ca = function (a, c) {
            c.splice(0, c.length);
            for (var b in a) c.push([b,
a[b], RegExp("^" + Na(b) + "(/|$)"), b.length]);
            c.sort(function (a, c) {
                return c[3] - a[3]
            });
            return c
        },
        $a = function (c, b) {
            a(c, function (a) {
                b.push([h(a[0]) ? RegExp("^" + Na(a[0]) + "$") : a[0], a[1]])
            })
        },
        Oa = function (a) {
            var c = a.name;
            c || (c = a, a = {
                name: c
            });
            a = g({
                main: "main"
            }, a);
            a.location = a.location ? a.location : c;
            a.packageMap && (ra[c] = a.packageMap);
            a.main.indexOf("./") || (a.main = a.main.substring(2));
            U[c] = a
        },
        Pa = [],
        ka = function (c, b, d) {
            for (var e in c) {
                "waitSeconds" == e && (p.waitms = 1E3 * (c[e] || 0));
                "cacheBust" == e && (ba = c[e] ? h(c[e]) ? c[e] :
                    (new Date).getTime() + "" : "");
                if ("baseUrl" == e || "combo" == e) p[e] = c[e];
                if ("async" == e) {
                    var s = c[e];
                    p.legacyMode = y = h(s) && /sync|legacyAsync/.test(s) ? s : !s ? "sync" : !1;
                    p.async = !y
                }
                c[e] !== v && (p.rawConfig[e] = c[e], "has" != e && q.add("config-" + e, c[e], 0, b))
            }
            p.baseUrl || (p.baseUrl = "./");
            /\/$/.test(p.baseUrl) || (p.baseUrl += "/");
            for (e in c.has) q.add(e, c.has[e], 0, b);
            a(c.packages, Oa);
            for (var f in c.packagePaths) a(c.packagePaths[f], function (a) {
                var c = f + "/" + a;
                h(a) && (a = {
                    name: a
                });
                a.location = c;
                Oa(a)
            });
            Ca(g(ra, c.map), aa);
            a(aa, function (a) {
                a[1] =
                    Ca(a[1], []);
                "*" == a[0] && (aa.star = a)
            });
            Ca(g(ha, c.paths), ia);
            $a(c.aliases, T);
            if (b) Pa.push({
                config: c.config
            });
            else
                for (e in c.config) b = S(e, d), b.config = g(b.config || {}, c.config[e]);
            c.cache && (X(), ca = c.cache, c.cache["*noref"] && X());
            B("config", [c, p.rawConfig])
        };
    q("dojo-cdn");
    var sa = w.getElementsByTagName("script");
    f = 0;
    for (var V, $, ta, la; f < sa.length;) {
        V = sa[f++];
        if ((ta = V.getAttribute("src")) && (la = ta.match(/(((.*)\/)|^)dojo\.js(\W|$)/i))) $ = la[3] || "", k.baseUrl = k.baseUrl || $, W = V;
        if (ta = V.getAttribute("data-dojo-config") ||
            V.getAttribute("djConfig")) R = p.eval("({ " + ta + " })", "data-dojo-config"), W = V
    }
    p.rawConfig = {};
    ka(k, 1);
    q("dojo-cdn") && ((U.dojo.location = $) && ($ += "/"), U.dijit.location = $ + "../dijit/", U.dojox.location = $ + "../dojox/");
    ka(b, 1);
    ka(R, 1);
    var ma = function (c) {
            ga(function () {
                a(c.deps, pa)
            })
        },
        La = function (a, c, b, q, f) {
            var l;
            if (h(a)) {
                if ((l = S(a, q, !0)) && l.executed) return l.result;
                throw d("undefinedModule", a);
            }
            e(a) || (ka(a, 0, q), a = c, c = b);
            if (e(a))
                if (a.length) {
                    b = "require*" + s();
                    for (var n, m = [], u = 0; u < a.length;) n = a[u++], m.push(S(n, q));
                    l = g(ua("", b, 0, ""), {
                        injected: 2,
                        deps: m,
                        def: c || r,
                        require: q ? q.require : p,
                        gc: 1
                    });
                    I[l.mid] = l;
                    ma(l);
                    var k = na && "sync" != y;
                    ga(function () {
                        fa(l, k)
                    });
                    l.executed || M.push(l);
                    da()
                } else c && c();
            return f
        },
        Ba = function (a) {
            if (!a) return p;
            var c = a.require;
            c || (c = function (b, g, d) {
                return La(b, g, d, a, c)
            }, a.require = g(c, p), c.module = a, c.toUrl = function (c) {
                return Ma(c, a)
            }, c.toAbsMid = function (c) {
                return Da(c, a)
            }, q("dojo-undef-api") && (c.undef = function (c) {
                p.undef(c, a)
            }), c.syncLoadNls = function (c) {
                c = ja(c, a);
                var b = I[c.mid];
                if (!b || !b.executed)
                    if (Y =
                        K[c.mid] || K["url:" + c.url]) va(Y), b = I[c.mid];
                return b && b.executed && b.result
            });
            return c
        },
        M = [],
        wa = [],
        N = {},
        ab = function (a) {
            a.injected = 1;
            N[a.mid] = 1;
            a.url && (N[a.url] = a.pack || 1);
            Qa()
        },
        Z = function (a) {
            a.injected = 2;
            delete N[a.mid];
            a.url && delete N[a.url];
            m(N) && (xa(), "xd" == y && (y = "sync"))
        },
        bb = p.idle = function () {
            return !wa.length && m(N) && !M.length && !na
        },
        Ea = function (a, c) {
            if (c)
                for (var b = 0; b < c.length; b++)
                    if (c[b][2].test(a)) return c[b];
            return 0
        },
        Ra = function (a) {
            var c = [],
                b, g;
            for (a = a.replace(/\\/g, "/").split("/"); a.length;) b =
                a.shift(), ".." == b && c.length && ".." != g ? (c.pop(), g = c[c.length - 1]) : "." != b && c.push(g = b);
            return c.join("/")
        },
        ua = function (a, c, b, g) {
            var d = p.isXdUrl(g);
            return {
                pid: a,
                mid: c,
                pack: b,
                url: g,
                executed: 0,
                def: 0,
                isXd: d,
                isAmd: !!(d || U[a] && U[a].isAmd)
            }
        },
        Sa = function (c, b, g, e, p, s, f, h, n) {
            var m, u, k, t;
            t = /^\./.test(c);
            if (/(^\/)|(\:)|(\.js$)/.test(c) || t && !b) return ua(0, c, 0, c);
            c = Ra(t ? b.mid + "/../" + c : c);
            if (/^\./.test(c)) throw d("irrationalPath", c);
            b && (k = Ea(b.mid, s));
            (k = (k = k || s.star) && Ea(c, k[1])) && (c = k[1] + c.substring(k[3]));
            b = (la =
                c.match(/^([^\/]+)(\/(.+))?$/)) ? la[1] : "";
            (m = g[b]) ? c = b + "/" + (u = la[3] || m.main): b = "";
            var v = 0;
            a(h, function (a) {
                var b = c.match(a[0]);
                b && 0 < b.length && (v = l(a[1]) ? c.replace(a[0], a[1]) : a[1])
            });
            if (v) return Sa(v, 0, g, e, p, s, f, h, n);
            if (g = e[c]) return n ? ua(g.pid, g.mid, g.pack, g.url) : e[c];
            e = (k = Ea(c, f)) ? k[1] + c.substring(k[3]) : b ? m.location + "/" + u : q("config-tlmSiblingOfDojo") ? "../" + c : c;
            /(^\/)|(\:)/.test(e) || (e = p + e);
            return ua(b, c, m, Ra(e + ".js"))
        },
        ja = function (a, c, b) {
            return Sa(a, c, U, I, p.baseUrl, b ? [] : aa, b ? [] : ia, b ? [] : T)
        },
        Ta = function (a,
            c, b) {
            return a.normalize ? a.normalize(c, function (a) {
                return Da(a, b)
            }) : Da(c, b)
        },
        Ua = 0,
        S = function (a, c, b) {
            var g, d;
            (g = a.match(/^(.+?)\!(.*)$/)) ? (d = S(g[1], c, b), "sync" == y && !d.executed && (pa(d), 2 === d.injected && !d.executed && ga(function () {
                fa(d)
            }), d.executed ? ya(d) : M.unshift(d)), 5 === d.executed && !d.load && ya(d), d.load ? (g = Ta(d, g[2], c), a = d.mid + "!" + (d.dynamic ? ++Ua + "!" : "") + g) : (g = g[2], a = d.mid + "!" + ++Ua + "!waitingForPlugin"), a = {
                plugin: d,
                mid: a,
                req: Ba(c),
                prid: g
            }) : a = ja(a, c);
            return I[a.mid] || !b && (I[a.mid] = a)
        },
        Da = p.toAbsMid = function (a,
            c) {
            return ja(a, c).mid
        },
        Ma = p.toUrl = function (a, c) {
            var b = ja(a + "/x", c),
                g = b.url;
            return qa(0 === b.pid ? a : g.substring(0, g.length - 5))
        },
        Va = {
            injected: 2,
            executed: 5,
            def: 3,
            result: 3
        },
        Fa = function (a) {
            return I[a] = g({
                mid: a
            }, Va)
        },
        cb = Fa("require"),
        db = Fa("exports"),
        eb = Fa("module"),
        za = {},
        Ga = 0,
        ya = function (a) {
            var c = a.result;
            a.dynamic = c.dynamic;
            a.normalize = c.normalize;
            a.load = c.load;
            return a
        },
        fb = function (c) {
            var b = {};
            a(c.loadQ, function (a) {
                var d = Ta(c, a.prid, a.req.module),
                    e = c.dynamic ? a.mid.replace(/waitingForPlugin$/, d) : c.mid +
                    "!" + d,
                    d = g(g({}, a), {
                        mid: e,
                        prid: d,
                        injected: 0
                    });
                if (!I[e] || !I[e].injected) Wa(I[e] = d);
                b[a.mid] = I[e];
                Z(a);
                delete I[a.mid]
            });
            c.loadQ = 0;
            var d = function (a) {
                    for (var c = a.deps || [], d = 0; d < c.length; d++)(a = b[c[d].mid]) && (c[d] = a)
                },
                e;
            for (e in I) d(I[e]);
            a(M, d)
        },
        ea = function (c) {
            p.trace("loader-finish-exec", [c.mid]);
            c.executed = 5;
            c.defOrder = Ga++;
            a(c.provides, function (a) {
                a()
            });
            c.loadQ && (ya(c), fb(c));
            for (f = 0; f < M.length;) M[f] === c ? M.splice(f, 1) : f++;
            /^require\*/.test(c.mid) && delete I[c.mid]
        },
        gb = [],
        fa = function (a, c) {
            if (4 === a.executed) return p.trace("loader-circular-dependency", [gb.concat(a.mid).join("-\x3e")]), !a.def || c ? za : a.cjs && a.cjs.exports;
            if (!a.executed) {
                if (!a.def) return za;
                var b = a.mid,
                    g = a.deps || [],
                    e, s = [],
                    f = 0;
                for (a.executed = 4; e = g[f++];) {
                    e = e === cb ? Ba(a) : e === db ? a.cjs.exports : e === eb ? a.cjs : fa(e, c);
                    if (e === za) return a.executed = 0, p.trace("loader-exec-module", ["abort", b]), za;
                    s.push(e)
                }
                p.trace("loader-run-factory", [a.mid]);
                var b = a.def,
                    h;
                x.unshift(a);
                if (q("config-dojo-loader-catches")) try {
                    h = l(b) ? b.apply(null, s) : b
                } catch (n) {
                    B("error", a.result = d("factoryThrew", [a, n]))
                } else h = l(b) ?
                    b.apply(null, s) : b;
                a.result = void 0 === h && a.cjs ? a.cjs.exports : h;
                x.shift(a);
                ea(a)
            }
            return a.result
        },
        na = 0,
        ga = function (a) {
            try {
                na++, a()
            } catch (c) {
                throw c;
            } finally {
                na--
            }
            bb() && B("idle", [])
        },
        da = function () {
            na || ga(function () {
                C();
                for (var a, c, b = 0; b < M.length;) a = Ga, c = M[b], fa(c), a != Ga ? (C(), b = 0) : b++
            })
        };
    q("dojo-undef-api") && (p.undef = function (a, c) {
        var b = S(a, c);
        Z(b);
        g(b, {
            def: 0,
            executed: 0,
            injected: 0,
            node: 0,
            load: 0
        })
    });
    void 0 === q("dojo-loader-eval-hint-url") && q.add("dojo-loader-eval-hint-url", 1);
    var qa = "function" == typeof b.fixupUrl ?
        b.fixupUrl : function (a) {
            a += "";
            return a + (ba ? (/\?/.test(a) ? "\x26" : "?") + ba : "")
        },
        Wa = function (a) {
            var c = a.plugin;
            5 === c.executed && !c.load && ya(c);
            var b = function (c) {
                a.result = c;
                Z(a);
                ea(a);
                da()
            };
            c.load ? c.load(a.prid, a.req, b) : c.loadQ ? c.loadQ.push(a) : (c.loadQ = [a], M.unshift(c), pa(c))
        },
        Y = 0,
        oa = 0,
        Ha = 0,
        va = function (a, c) {
            q("config-stripStrict") && (a = a.replace(/(["'])use strict\1/g, ""));
            Ha = 1;
            if (q("config-dojo-loader-catches")) try {
                a === Y ? Y.call(null) : p.eval(a, q("dojo-loader-eval-hint-url") ? c.url : c.mid)
            } catch (b) {
                B("error",
                    d("evalModuleThrew", c))
            } else a === Y ? Y.call(null) : p.eval(a, q("dojo-loader-eval-hint-url") ? c.url : c.mid);
            Ha = 0
        },
        pa = function (c) {
            var b = c.mid,
                e = c.url;
            if (!c.executed && !c.injected && !(N[b] || c.url && (c.pack && N[c.url] === c.pack || 1 == N[c.url])))
                if (ab(c), c.plugin) Wa(c);
                else {
                    var s = function () {
                        Xa(c);
                        if (2 !== c.injected) {
                            if (q("dojo-enforceDefine")) {
                                B("error", d("noDefine", c));
                                return
                            }
                            Z(c);
                            g(c, Va);
                            p.trace("loader-define-nonmodule", [c.url])
                        }
                        y ? !x.length && da() : da()
                    };
                    if (Y = K[b] || K["url:" + c.url]) p.trace("loader-inject", ["cache",
c.mid, e]), va(Y, c), s();
                    else {
                        if (y)
                            if (c.isXd) "sync" == y && (y = "xd");
                            else if (!(c.isAmd && "sync" != y)) {
                            var f = function (d) {
                                if ("sync" == y) {
                                    x.unshift(c);
                                    va(d, c);
                                    x.shift();
                                    Xa(c);
                                    c.cjs || (Z(c), ea(c));
                                    if (c.finish) {
                                        d = b + "*finish";
                                        var g = c.finish;
                                        delete c.finish;
                                        Ia(d, ["dojo", ("dojo/require!" + g.join(",")).replace(/\./g, "/")], function (c) {
                                            a(g, function (a) {
                                                c.require(a)
                                            })
                                        });
                                        M.unshift(S(d))
                                    }
                                    s()
                                } else(d = H(c, d)) ? (va(d, c), s()) : (oa = c, p.injectUrl(qa(e), s, c), oa = 0)
                            };
                            p.trace("loader-inject", ["xhr", c.mid, e, "sync" != y]);
                            if (q("config-dojo-loader-catches")) try {
                                p.getText(e,
                                    "sync" != y, f)
                            } catch (h) {
                                B("error", d("xhrInjectFailed", [c, h]))
                            } else p.getText(e, "sync" != y, f);
                            return
                        }
                        p.trace("loader-inject", ["script", c.mid, e]);
                        oa = c;
                        p.injectUrl(qa(e), s, c);
                        oa = 0
                    }
                }
        },
        Ja = function (a, c, b) {
            p.trace("loader-define-module", [a.mid, c]);
            var e = a.mid;
            if (2 === a.injected) return B("error", d("multipleDefine", a)), a;
            g(a, {
                deps: c,
                def: b,
                cjs: {
                    id: a.mid,
                    uri: a.url,
                    exports: a.result = {},
                    setExports: function (c) {
                        a.cjs.exports = c
                    },
                    config: function () {
                        return a.config
                    }
                }
            });
            for (var q = 0; c[q]; q++) c[q] = S(c[q], a);
            y && !N[e] && (ma(a),
                M.push(a), da());
            Z(a);
            !l(b) && !c.length && (a.result = b, ea(a));
            return a
        },
        Xa = function (c, b) {
            for (var d = [], g, e; wa.length;) e = wa.shift(), b && (e[0] = b.shift()), g = e[0] && S(e[0]) || c, d.push([g, e[1], e[2]]);
            X(c);
            a(d, function (a) {
                ma(Ja.apply(null, a))
            })
        },
        Aa = 0,
        xa = r,
        Qa = r,
        xa = function () {
            Aa && clearTimeout(Aa);
            Aa = 0
        },
        Qa = function () {
            xa();
            p.waitms && (Aa = u.setTimeout(function () {
                xa();
                B("error", d("timeout", N))
            }, p.waitms))
        };
    q.add("ie-event-behavior", w.attachEvent && "undefined" === typeof Windows && ("undefined" === typeof opera || "[object Opera]" !=
        opera.toString()));
    var Ka = function (a, c, b, d) {
            if (q("ie-event-behavior")) return a.attachEvent(b, d),
                function () {
                    a.detachEvent(b, d)
                };
            a.addEventListener(c, d, !1);
            return function () {
                a.removeEventListener(c, d, !1)
            }
        },
        hb = Ka(window, "load", "onload", function () {
            p.pageLoaded = 1;
            try {
                "complete" != w.readyState && (w.readyState = "complete")
            } catch (a) {}
            hb()
        }),
        sa = w.getElementsByTagName("script");
    for (f = 0; !W;)
        if (!/^dojo/.test((V = sa[f++]) && V.type)) W = V;
    p.injectUrl = function (a, c, b) {
        b = b.node = w.createElement("script");
        var g = Ka(b, "load",
                "onreadystatechange",
                function (a) {
                    a = a || window.event;
                    var b = a.target || a.srcElement;
                    if ("load" === a.type || /complete|loaded/.test(b.readyState)) g(), e(), c && c()
                }),
            e = Ka(b, "error", "onerror", function (c) {
                g();
                e();
                B("error", d("scriptError", [a, c]))
            });
        b.type = "text/javascript";
        b.charset = "utf-8";
        b.src = a;
        W.parentNode.insertBefore(b, W);
        return b
    };
    p.log = function () {
        try {
            for (var a = 0; a < arguments.length; a++) console.log(arguments[a])
        } catch (c) {}
    };
    p.trace = r;
    var Ia = function (a, c, b) {
        var g = arguments.length,
            e = ["require", "exports", "module"],
            s = [0, a, c];
        1 == g ? s = [0, l(a) ? e : [], a] : 2 == g && h(a) ? s = [a, l(c) ? e : [], c] : 3 == g && (s = [a, c, b]);
        p.trace("loader-define", s.slice(0, 2));
        if ((g = s[0] && S(s[0])) && !N[g.mid]) ma(Ja(g, s[1], s[2]));
        else if (!q("ie-event-behavior") || Ha) wa.push(s);
        else {
            g = g || oa;
            if (!g)
                for (a in N)
                    if ((e = I[a]) && e.node && "interactive" === e.node.readyState) {
                        g = e;
                        break
                    }
            g ? (X(g), ma(Ja(g, s[1], s[2]))) : B("error", d("ieDefineFailed", s[0]));
            da()
        }
    };
    Ia.amd = {
        vendor: "dojotoolkit.org"
    };
    g(g(p, k.loaderPatch), b.loaderPatch);
    G("error", function (a) {
        try {
            if (console.error(a),
                a instanceof Error) {
                for (var c in a) console.log(c + ":", a[c]);
                console.log(".")
            }
        } catch (b) {}
    });
    g(p, {
        uid: s,
        cache: K,
        packs: U
    });
    if (u.define) B("error", d("defineAlreadyDefined", 0));
    else {
        u.define = Ia;
        u.require = p;
        a(Pa, function (a) {
            ka(a)
        });
        var Ya = R.deps || b.deps || k.deps,
            Za = R.callback || b.callback || k.callback;
        p.boot = Ya || Za ? [Ya || [], Za] : 0
    }
})(this.dojoConfig || this.djConfig || this.require || {}, {
    async: 0,
    baseUrl: ((location.protocol === 'http:' || location.protocol === 'https:') ? location.protocol : 'http:') + '//' + "js.arcgis.com/3.19/dojo",
    hasCache: {
        "config-selectorEngine": "acme",
        "config-tlmSiblingOfDojo": 1,
        "dojo-built": 1,
        "dojo-has-api": 1,
        "dojo-loader": 1,
        "dojo-undef-api": 0,
        dom: 1,
        "extend-esri": 1,
        "host-browser": 1
    },
    packages: [{
        location: "../dijit",
        name: "dijit"
    }, {
        location: "../dojox",
        name: "dojox"
    }, {
        location: "../put-selector",
        main: "put",
        name: "put-selector"
    }, {
        location: "../xstyle",
        name: "xstyle"
    }, {
        location: "../dgrid",
        main: "OnDemandGrid",
        name: "dgrid"
    }, {
        location: "../dgrid1",
        main: "OnDemandGrid",
        name: "dgrid1"
    }, {
        location: "../dstore",
        main: "Store",
        name: "dstore"
    }, {
        location: "../moment",
        main: "moment.js",
        name: "moment"
    }, {
        location: "../esri",
        name: "esri"
    }, {
        location: ".",
        name: "dojo"
    }]
});
require({
    cache: {
        "dojo/loadInit": function () {
            define(["./_base/loader"], function (b) {
                return {
                    dynamic: 0,
                    normalize: function (b) {
                        return b
                    },
                    load: b.loadInit
                }
            })
        },
        "dojo/_base/loader": function () {
            define("./kernel ../has require module ../json ./lang ./array".split(" "), function (b, k, f, r, m, n, l) {
                var h = function (a) {
                        return a.replace(/\./g, "/")
                    },
                    e = /\/\/>>built/,
                    a = [],
                    g = [],
                    d = function (b, d, e) {
                        a.push(e);
                        l.forEach(b.split(","), function (a) {
                            a = E(a, d.module);
                            g.push(a);
                            O(a)
                        });
                        c()
                    },
                    c = function () {
                        var c, b;
                        for (b in P)
                            if (c = P[b], void 0 ===
                                c.noReqPluginCheck && (c.noReqPluginCheck = /loadInit\!/.test(b) || /require\!/.test(b) ? 1 : 0), !c.executed && !c.noReqPluginCheck && c.injected == z) return;
                        G(function () {
                            var c = a;
                            a = [];
                            l.forEach(c, function (a) {
                                a(1)
                            })
                        })
                    },
                    s = function (a, c, g) {
                        var d = /\(|\)/g,
                            e = 1;
                        for (d.lastIndex = c;
                            (c = d.exec(a)) && !(e = ")" == c[0] ? e - 1 : e + 1, 0 == e););
                        if (0 != e) throw "unmatched paren around character " + d.lastIndex + " in: " + a;
                        return [b.trim(a.substring(g, d.lastIndex)) + ";\n", d.lastIndex]
                    },
                    p = /(\/\*([\s\S]*?)\*\/|\/\/(.*)$)/mg,
                    u = /(^|\s)dojo\.(loadInit|require|provide|requireLocalization|requireIf|requireAfterIf|platformRequire)\s*\(/mg,
                    w = /(^|\s)(require|define)\s*\(/m,
                    t = function (a, c) {
                        var b, d, g, e = [],
                            q = [];
                        b = [];
                        for (c = c || a.replace(p, function (a) {
                                u.lastIndex = w.lastIndex = 0;
                                return u.test(a) || w.test(a) ? "" : a
                            }); b = u.exec(c);) d = u.lastIndex, g = d - b[0].length, d = s(c, d, g), "loadInit" == b[2] ? e.push(d[0]) : q.push(d[0]), u.lastIndex = d[1];
                        b = e.concat(q);
                        return b.length || !w.test(c) ? [a.replace(/(^|\s)dojo\.loadInit\s*\(/g, "\n0 \x26\x26 dojo.loadInit("), b.join(""), b] : 0
                    },
                    q = f.initSyncLoader(d, c, function (a, c) {
                        var b, d, g = [],
                            s = [];
                        if (e.test(c) || !(b = t(c))) return 0;
                        d =
                            a.mid + "-*loadInit";
                        for (var q in E("dojo", a).result.scopeMap) g.push(q), s.push('"' + q + '"');
                        return "// xdomain rewrite of " + a.mid + "\ndefine('" + d + "',{\n\tnames:" + m.stringify(g) + ",\n\tdef:function(" + g.join(",") + "){" + b[1] + "}});\n\ndefine(" + m.stringify(g.concat(["dojo/loadInit!" + d])) + ", function(" + g.join(",") + "){\n" + b[0] + "});"
                    }),
                    v = q.sync,
                    z = q.requested,
                    y = q.arrived,
                    x = q.nonmodule,
                    A = q.executing,
                    C = q.executed,
                    H = q.syncExecStack,
                    P = q.modules,
                    L = q.execQ,
                    E = q.getModule,
                    O = q.injectModule,
                    Q = q.setArrived,
                    D = q.signal,
                    F = q.finishExec,
                    J = q.execModule,
                    B = q.getLegacyMode,
                    G = q.guardCheckComplete,
                    d = q.dojoRequirePlugin;
                b.provide = function (a) {
                    var c = H[0],
                        b = n.mixin(E(h(a), f.module), {
                            executed: A,
                            result: n.getObject(a, !0)
                        });
                    Q(b);
                    c && (c.provides || (c.provides = [])).push(function () {
                        b.result = n.getObject(a);
                        delete b.provides;
                        b.executed !== C && F(b)
                    });
                    return b.result
                };
                k.add("config-publishRequireResult", 1, 0, 0);
                b.require = function (a, c) {
                    var b = function (a, c) {
                        var b = E(h(a), f.module);
                        if (H.length && H[0].finish) H[0].finish.push(a);
                        else {
                            if (b.executed) return b.result;
                            c && (b.result = x);
                            var d = B();
                            O(b);
                            d = B();
                            b.executed !== C && b.injected === y && q.guardCheckComplete(function () {
                                J(b)
                            });
                            if (b.executed) return b.result;
                            d == v ? b.cjs ? L.unshift(b) : H.length && (H[0].finish = [a]) : L.push(b)
                        }
                    }(a, c);
                    k("config-publishRequireResult") && (!n.exists(a) && void 0 !== b) && n.setObject(a, b);
                    return b
                };
                b.loadInit = function (a) {
                    a()
                };
                b.registerModulePath = function (a, c) {
                    var b = {};
                    b[a.replace(/\./g, "/")] = c;
                    f({
                        paths: b
                    })
                };
                b.platformRequire = function (a) {
                    a = (a.common || []).concat(a[b._name] || a["default"] || []);
                    for (var c; a.length;) n.isArray(c =
                        a.shift()) ? b.require.apply(b, c) : b.require(c)
                };
                b.requireIf = b.requireAfterIf = function (a, c, d) {
                    a && b.require(c, d)
                };
                b.requireLocalization = function (a, c, b) {
                    f(["../i18n"], function (d) {
                        d.getLocalization(a, c, b)
                    })
                };
                return {
                    extractLegacyApiApplications: t,
                    require: d,
                    loadInit: function (a, c, g) {
                        c([a], function (a) {
                            c(a.names, function () {
                                for (var e = "", s = [], q = 0; q < arguments.length; q++) e += "var " + a.names[q] + "\x3d arguments[" + q + "]; ", s.push(arguments[q]);
                                eval(e);
                                var p = c.module,
                                    f = [],
                                    l, e = {
                                        provide: function (a) {
                                            a = h(a);
                                            a = E(a, p);
                                            a !== p &&
                                                Q(a)
                                        },
                                        require: function (a, c) {
                                            a = h(a);
                                            c && (E(a, p).result = x);
                                            f.push(a)
                                        },
                                        requireLocalization: function (a, c, d) {
                                            l || (l = ["dojo/i18n"]);
                                            d = (d || b.locale).toLowerCase();
                                            a = h(a) + "/nls/" + (/root/i.test(d) ? "" : d + "/") + h(c);
                                            E(a, p).isXd && l.push("dojo/i18n!" + a)
                                        },
                                        loadInit: function (a) {
                                            a()
                                        }
                                    },
                                    q = {},
                                    n;
                                try {
                                    for (n in e) q[n] = b[n], b[n] = e[n];
                                    a.def.apply(null, s)
                                } catch (m) {
                                    D("error", [{
                                        src: r.id,
                                        id: "failedDojoLoadInit"
                                    }, m])
                                } finally {
                                    for (n in e) b[n] = q[n]
                                }
                                l && (f = f.concat(l));
                                f.length ? d(f.join(","), c, g) : g()
                            })
                        })
                    }
                }
            })
        },
        "dojo/_base/kernel": function () {
            define(["../has",
"./config", "require", "module"], function (b, k, f, r) {
                var m, n;
                m = function () {
                    return this
                }();
                var l = {},
                    h = {},
                    e = {
                        config: k,
                        global: m,
                        dijit: l,
                        dojox: h
                    },
                    l = {
                        dojo: ["dojo", e],
                        dijit: ["dijit", l],
                        dojox: ["dojox", h]
                    };
                r = f.map && f.map[r.id.match(/[^\/]+/)[0]];
                for (n in r) l[n] ? l[n][0] = r[n] : l[n] = [r[n], {}];
                for (n in l) r = l[n], r[1]._scopeName = r[0], k.noGlobals || (m[r[0]] = r[1]);
                e.scopeMap = l;
                e.baseUrl = e.config.baseUrl = f.baseUrl;
                e.isAsync = f.async;
                e.locale = k.locale;
                m = "$Rev: 91fa0cb $".match(/[0-9a-f]{7,}/);
                e.version = {
                    major: 1,
                    minor: 11,
                    patch: 2,
                    flag: "",
                    revision: m ? m[0] : NaN,
                    toString: function () {
                        var a = e.version;
                        return a.major + "." + a.minor + "." + a.patch + a.flag + " (" + a.revision + ")"
                    }
                };
                b("csp-restrictions") || Function("d", "d.eval \x3d function(){return d.global.eval ? d.global.eval(arguments[0]) : eval(arguments[0]);}")(e);
                e.exit = function () {};
                b("host-webworker");
                b.add("console-as-object", function () {
                    return Function.prototype.bind && console && "object" === typeof console.log
                });
                "undefined" != typeof console || (console = {});
                r = "assert count debug dir dirxml error group groupEnd info profile profileEnd time timeEnd trace warn log".split(" ");
                var a;
                for (m = 0; a = r[m++];) console[a] ? b("console-as-object") && (console[a] = Function.prototype.bind.call(console[a], console)) : function () {
                    var b = a + "";
                    console[b] = "log" in console ? function () {
                        var a = Array.prototype.slice.call(arguments);
                        a.unshift(b + ":");
                        console.log(a.join(" "))
                    } : function () {};
                    console[b]._fake = !0
                }();
                b.add("dojo-debug-messages", !!k.isDebug);
                e.deprecated = e.experimental = function () {};
                b("dojo-debug-messages") && (e.deprecated = function (a, b, c) {
                    a = "DEPRECATED: " + a;
                    b && (a += " " + b);
                    c && (a += " -- will be removed in version: " +
                        c);
                    console.warn(a)
                }, e.experimental = function (a, b) {
                    var c = "EXPERIMENTAL: " + a + " -- APIs subject to change without notice.";
                    b && (c += " " + b);
                    console.warn(c)
                });
                if (k.modulePaths) {
                    e.deprecated("dojo.modulePaths", "use paths configuration");
                    b = {};
                    for (n in k.modulePaths) b[n.replace(/\./g, "/")] = k.modulePaths[n];
                    f({
                        paths: b
                    })
                }
                e.moduleUrl = function (a, b) {
                    e.deprecated("dojo.moduleUrl()", "use require.toUrl", "2.0");
                    var c = null;
                    a && (c = f.toUrl(a.replace(/\./g, "/") + (b ? "/" + b : "") + "/*.*").replace(/\/\*\.\*/, "") + (b ? "" : "/"));
                    return c
                };
                e._hasResource = {};
                return e
            })
        },
        "dojo/has": function () {
            define(["require", "module"], function (b, k) {
                var f = b.has || function () {};
                if (!f("dojo-has-api")) {
                    var r = "undefined" != typeof window && "undefined" != typeof location && "undefined" != typeof document && window.location == location && window.document == document,
                        m = function () {
                            return this
                        }(),
                        n = r && document,
                        l = n && n.createElement("DiV"),
                        h = k.config && k.config() || {},
                        f = function (b) {
                            return "function" == typeof h[b] ? h[b] = h[b](m, n, l) : h[b]
                        };
                    f.cache = h;
                    f.add = function (b, a, g, d) {
                        ("undefined" ==
                            typeof h[b] || d) && (h[b] = a);
                        return g && f(b)
                    }
                }
                f.add("dom-addeventlistener", !!document.addEventListener);
                f.add("touch", "ontouchstart" in document || "onpointerdown" in document && 0 < navigator.maxTouchPoints || window.navigator.msMaxTouchPoints);
                f.add("touch-events", "ontouchstart" in document);
                f.add("pointer-events", "pointerEnabled" in window.navigator ? window.navigator.pointerEnabled : "PointerEvent" in window);
                f.add("MSPointer", window.navigator.msPointerEnabled);
                f.add("device-width", screen.availWidth || innerWidth);
                r = document.createElement("form");
                f.add("dom-attributes-explicit", 0 == r.attributes.length);
                f.add("dom-attributes-specified-flag", 0 < r.attributes.length && 40 > r.attributes.length);
                f.clearElement = function (b) {
                    b.innerHTML = "";
                    return b
                };
                f.normalize = function (b, a) {
                    var g = b.match(/[\?:]|[^:\?]*/g),
                        d = 0,
                        c = function (a) {
                            var b = g[d++];
                            if (":" == b) return 0;
                            if ("?" == g[d++]) {
                                if (!a && f(b)) return c();
                                c(!0);
                                return c(a)
                            }
                            return b || 0
                        };
                    return (b = c()) && a(b)
                };
                f.load = function (b, a, g) {
                    b ? a([b], g) : g()
                };
                return f
            })
        },
        "dojo/_base/config": function () {
            define(["../has",
"require"], function (b, k) {
                var f = {},
                    r = k.rawConfig,
                    m;
                for (m in r) f[m] = r[m];
                if (!f.locale && "undefined" != typeof navigator && (r = navigator.languages && navigator.languages.length ? navigator.languages[0] : navigator.language || navigator.userLanguage)) f.locale = r.toLowerCase();
                return f
            })
        },
        "dojo/json": function () {
            define(["./has"], function (b) {
                var k = "undefined" != typeof JSON;
                b.add("json-parse", k);
                b.add("json-stringify", k && '{"a":1}' == JSON.stringify({
                    a: 0
                }, function (b, f) {
                    return f || 1
                }));
                if (b("json-stringify")) return JSON;
                var f =
                    function (b) {
                        return ('"' + b.replace(/(["\\])/g, "\\$1") + '"').replace(/[\f]/g, "\\f").replace(/[\b]/g, "\\b").replace(/[\n]/g, "\\n").replace(/[\t]/g, "\\t").replace(/[\r]/g, "\\r")
                    };
                return {
                    parse: b("json-parse") ? JSON.parse : function (b, f) {
                        if (f && !/^([\s\[\{]*(?:"(?:\\.|[^"])*"|-?\d[\d\.]*(?:[Ee][+-]?\d+)?|null|true|false|)[\s\]\}]*(?:,|:|$))+$/.test(b)) throw new SyntaxError("Invalid characters in JSON");
                        return eval("(" + b + ")")
                    },
                    stringify: function (b, m, n) {
                        function l(b, a, g) {
                            m && (b = m(g, b));
                            var d;
                            d = typeof b;
                            if ("number" ==
                                d) return isFinite(b) ? b + "" : "null";
                            if ("boolean" == d) return b + "";
                            if (null === b) return "null";
                            if ("string" == typeof b) return f(b);
                            if ("function" == d || "undefined" == d) return h;
                            if ("function" == typeof b.toJSON) return l(b.toJSON(g), a, g);
                            if (b instanceof Date) return '"{FullYear}-{Month+}-{Date}T{Hours}:{Minutes}:{Seconds}Z"'.replace(/\{(\w+)(\+)?\}/g, function (a, c, d) {
                                a = b["getUTC" + c]() + (d ? 1 : 0);
                                return 10 > a ? "0" + a : a
                            });
                            if (b.valueOf() !== b) return l(b.valueOf(), a, g);
                            var c = n ? a + n : "",
                                s = n ? " " : "",
                                p = n ? "\n" : "";
                            if (b instanceof Array) {
                                var s =
                                    b.length,
                                    u = [];
                                for (g = 0; g < s; g++) d = l(b[g], c, g), "string" != typeof d && (d = "null"), u.push(p + c + d);
                                return "[" + u.join(",") + p + a + "]"
                            }
                            u = [];
                            for (g in b) {
                                var k;
                                if (b.hasOwnProperty(g)) {
                                    if ("number" == typeof g) k = '"' + g + '"';
                                    else if ("string" == typeof g) k = f(g);
                                    else continue;
                                    d = l(b[g], c, g);
                                    "string" == typeof d && u.push(p + c + k + ":" + s + d)
                                }
                            }
                            return "{" + u.join(",") + p + a + "}"
                        }
                        var h;
                        "string" == typeof m && (n = m, m = null);
                        return l(b, "", "")
                    }
                }
            })
        },
        "dojo/_base/lang": function () {
            define(["./kernel", "../has", "../sniff"], function (b, k) {
                k.add("bug-for-in-skips-shadowed",
                    function () {
                        for (var a in {
                                toString: 1
                            }) return 0;
                        return 1
                    });
                var f = k("bug-for-in-skips-shadowed") ? "hasOwnProperty valueOf isPrototypeOf propertyIsEnumerable toLocaleString toString constructor".split(" ") : [],
                    r = f.length,
                    m = function (a, g, d) {
                        d || (d = a[0] && b.scopeMap[a[0]] ? b.scopeMap[a.shift()][1] : b.global);
                        try {
                            for (var c = 0; c < a.length; c++) {
                                var e = a[c];
                                if (!(e in d))
                                    if (g) d[e] = {};
                                    else return;
                                d = d[e]
                            }
                            return d
                        } catch (p) {}
                    },
                    n = Object.prototype.toString,
                    l = function (a, b, d) {
                        return (d || []).concat(Array.prototype.slice.call(a,
                            b || 0))
                    },
                    h = /\{([^\}]+)\}/g,
                    e = {
                        _extraNames: f,
                        _mixin: function (a, b, d) {
                            var c, e, p, l = {};
                            for (c in b)
                                if (e = b[c], !(c in a) || a[c] !== e && (!(c in l) || l[c] !== e)) a[c] = d ? d(e) : e;
                            if (k("bug-for-in-skips-shadowed") && b)
                                for (p = 0; p < r; ++p)
                                    if (c = f[p], e = b[c], !(c in a) || a[c] !== e && (!(c in l) || l[c] !== e)) a[c] = d ? d(e) : e;
                            return a
                        },
                        mixin: function (a, b) {
                            a || (a = {});
                            for (var d = 1, c = arguments.length; d < c; d++) e._mixin(a, arguments[d]);
                            return a
                        },
                        setObject: function (a, b, d) {
                            var c = a.split(".");
                            a = c.pop();
                            return (d = m(c, !0, d)) && a ? d[a] = b : void 0
                        },
                        getObject: function (a,
                            b, d) {
                            return !a ? d : m(a.split("."), b, d)
                        },
                        exists: function (a, b) {
                            return void 0 !== e.getObject(a, !1, b)
                        },
                        isString: function (a) {
                            return "string" == typeof a || a instanceof String
                        },
                        isArray: Array.isArray || function (a) {
                            return "[object Array]" == n.call(a)
                        },
                        isFunction: function (a) {
                            return "[object Function]" === n.call(a)
                        },
                        isObject: function (a) {
                            return void 0 !== a && (null === a || "object" == typeof a || e.isArray(a) || e.isFunction(a))
                        },
                        isArrayLike: function (a) {
                            return !!a && !e.isString(a) && !e.isFunction(a) && !(a.tagName && "form" == a.tagName.toLowerCase()) &&
                                (e.isArray(a) || isFinite(a.length))
                        },
                        isAlien: function (a) {
                            return a && !e.isFunction(a) && /\{\s*\[native code\]\s*\}/.test(String(a))
                        },
                        extend: function (a, b) {
                            for (var d = 1, c = arguments.length; d < c; d++) e._mixin(a.prototype, arguments[d]);
                            return a
                        },
                        _hitchArgs: function (a, g) {
                            var d = e._toArray(arguments, 2),
                                c = e.isString(g);
                            return function () {
                                var s = e._toArray(arguments),
                                    p = c ? (a || b.global)[g] : g;
                                return p && p.apply(a || this, d.concat(s))
                            }
                        },
                        hitch: function (a, g) {
                            if (2 < arguments.length) return e._hitchArgs.apply(b, arguments);
                            g || (g =
                                a, a = null);
                            if (e.isString(g)) {
                                a = a || b.global;
                                if (!a[g]) throw ['lang.hitch: scope["', g, '"] is null (scope\x3d"', a, '")'].join("");
                                return function () {
                                    return a[g].apply(a, arguments || [])
                                }
                            }
                            return !a ? g : function () {
                                return g.apply(a, arguments || [])
                            }
                        },
                        delegate: function () {
                            function a() {}
                            return function (b, d) {
                                a.prototype = b;
                                var c = new a;
                                a.prototype = null;
                                d && e._mixin(c, d);
                                return c
                            }
                        }(),
                        _toArray: k("ie") ? function () {
                            function a(a, b, c) {
                                c = c || [];
                                for (b = b || 0; b < a.length; b++) c.push(a[b]);
                                return c
                            }
                            return function (b) {
                                return (b.item ? a : l).apply(this,
                                    arguments)
                            }
                        }() : l,
                        partial: function (a) {
                            return e.hitch.apply(b, [null].concat(e._toArray(arguments)))
                        },
                        clone: function (a) {
                            if (!a || "object" != typeof a || e.isFunction(a)) return a;
                            if (a.nodeType && "cloneNode" in a) return a.cloneNode(!0);
                            if (a instanceof Date) return new Date(a.getTime());
                            if (a instanceof RegExp) return RegExp(a);
                            var b, d, c;
                            if (e.isArray(a)) {
                                b = [];
                                d = 0;
                                for (c = a.length; d < c; ++d) d in a && (b[d] = e.clone(a[d]))
                            } else b = a.constructor ? new a.constructor : {};
                            return e._mixin(b, a, e.clone)
                        },
                        trim: String.prototype.trim ? function (a) {
                            return a.trim()
                        } : function (a) {
                            return a.replace(/^\s\s*/, "").replace(/\s\s*$/, "")
                        },
                        replace: function (a, b, d) {
                            return a.replace(d || h, e.isFunction(b) ? b : function (a, d) {
                                return e.getObject(d, !1, b)
                            })
                        }
                    };
                e.mixin(b, e);
                return e
            })
        },
        "dojo/sniff": function () {
            define(["./has"], function (b) {
                var k = navigator,
                    f = k.userAgent,
                    k = k.appVersion,
                    r = parseFloat(k);
                b.add("air", 0 <= f.indexOf("AdobeAIR"));
                b.add("wp", parseFloat(f.split("Windows Phone")[1]) || void 0);
                b.add("msapp", parseFloat(f.split("MSAppHost/")[1]) || void 0);
                b.add("khtml", 0 <= k.indexOf("Konqueror") ?
                    r : void 0);
                b.add("edge", parseFloat(f.split("Edge/")[1]) || void 0);
                b.add("opr", parseFloat(f.split("OPR/")[1]) || void 0);
                b.add("webkit", !b("wp") && !b("edge") && parseFloat(f.split("WebKit/")[1]) || void 0);
                b.add("chrome", !b("edge") && !b("opr") && parseFloat(f.split("Chrome/")[1]) || void 0);
                b.add("android", !b("wp") && parseFloat(f.split("Android ")[1]) || void 0);
                b.add("safari", 0 <= k.indexOf("Safari") && !b("wp") && !b("chrome") && !b("android") && !b("edge") && !b("opr") ? parseFloat(k.split("Version/")[1]) : void 0);
                b.add("mac",
                    0 <= k.indexOf("Macintosh"));
                b.add("quirks", "BackCompat" == document.compatMode);
                if (!b("wp") && f.match(/(iPhone|iPod|iPad)/)) {
                    var m = RegExp.$1.replace(/P/, "p"),
                        n = f.match(/OS ([\d_]+)/) ? RegExp.$1 : "1",
                        n = parseFloat(n.replace(/_/, ".").replace(/_/g, ""));
                    b.add(m, n);
                    b.add("ios", n)
                }
                b.add("bb", (0 <= f.indexOf("BlackBerry") || 0 <= f.indexOf("BB10")) && parseFloat(f.split("Version/")[1]) || void 0);
                b.add("trident", parseFloat(k.split("Trident/")[1]) || void 0);
                b.add("svg", "undefined" !== typeof SVGAngle);
                b("webkit") || (0 <= f.indexOf("Opera") &&
                    b.add("opera", 9.8 <= r ? parseFloat(f.split("Version/")[1]) || r : r), 0 <= f.indexOf("Gecko") && (!b("wp") && !b("khtml") && !b("trident") && !b("edge")) && b.add("mozilla", r), b("mozilla") && b.add("ff", parseFloat(f.split("Firefox/")[1] || f.split("Minefield/")[1]) || void 0), document.all && !b("opera") && (f = parseFloat(k.split("MSIE ")[1]) || void 0, (k = document.documentMode) && (5 != k && Math.floor(f) != k) && (f = k), b.add("ie", f)), b.add("wii", "undefined" != typeof opera && opera.wiiremote));
                return b
            })
        },
        "dojo/_base/array": function () {
            define(["./kernel",
"../has", "./lang"], function (b, k, f) {
                function r(a) {
                    return l[a] = new Function("item", "index", "array", a)
                }

                function m(a) {
                    var b = !a;
                    return function (d, c, e) {
                        var p = 0,
                            f = d && d.length || 0,
                            h;
                        f && "string" == typeof d && (d = d.split(""));
                        "string" == typeof c && (c = l[c] || r(c));
                        if (e)
                            for (; p < f; ++p) {
                                if (h = !c.call(e, d[p], p, d), a ^ h) return !h
                            } else
                                for (; p < f; ++p)
                                    if (h = !c(d[p], p, d), a ^ h) return !h;
                        return b
                    }
                }

                function n(a) {
                    var b = 1,
                        d = 0,
                        c = 0;
                    a || (b = d = c = -1);
                    return function (s, p, f, l) {
                        if (l && 0 < b) return e.lastIndexOf(s, p, f);
                        l = s && s.length || 0;
                        var n = a ? l + c : d;
                        f === h ? f = a ? d : l + c : 0 > f ? (f = l + f, 0 > f && (f = d)) : f = f >= l ? l + c : f;
                        for (l && "string" == typeof s && (s = s.split("")); f != n; f += b)
                            if (s[f] == p) return f;
                        return -1
                    }
                }
                var l = {},
                    h, e = {
                        every: m(!1),
                        some: m(!0),
                        indexOf: n(!0),
                        lastIndexOf: n(!1),
                        forEach: function (a, b, d) {
                            var c = 0,
                                e = a && a.length || 0;
                            e && "string" == typeof a && (a = a.split(""));
                            "string" == typeof b && (b = l[b] || r(b));
                            if (d)
                                for (; c < e; ++c) b.call(d, a[c], c, a);
                            else
                                for (; c < e; ++c) b(a[c], c, a)
                        },
                        map: function (a, b, d, c) {
                            var e = 0,
                                f = a && a.length || 0;
                            c = new(c || Array)(f);
                            f && "string" == typeof a && (a = a.split(""));
                            "string" == typeof b && (b = l[b] || r(b));
                            if (d)
                                for (; e < f; ++e) c[e] = b.call(d, a[e], e, a);
                            else
                                for (; e < f; ++e) c[e] = b(a[e], e, a);
                            return c
                        },
                        filter: function (a, b, d) {
                            var c = 0,
                                e = a && a.length || 0,
                                f = [],
                                h;
                            e && "string" == typeof a && (a = a.split(""));
                            "string" == typeof b && (b = l[b] || r(b));
                            if (d)
                                for (; c < e; ++c) h = a[c], b.call(d, h, c, a) && f.push(h);
                            else
                                for (; c < e; ++c) h = a[c], b(h, c, a) && f.push(h);
                            return f
                        },
                        clearCache: function () {
                            l = {}
                        }
                    };
                f.mixin(b, e);
                return e
            })
        },
        "dojo/require": function () {
            define(["./_base/loader"], function (b) {
                return {
                    dynamic: 0,
                    normalize: function (b) {
                        return b
                    },
                    load: b.require
                }
            })
        },
        "dojo/text": function () {
            define(["./_base/kernel", "require", "./has", "./request"], function (b, k, f, r) {
                var m;
                m = function (a, b, d) {
                    r(a, {
                        sync: !!b,
                        headers: {
                            "X-Requested-With": null
                        }
                    }).then(d)
                };
                var n = {},
                    l = function (a) {
                        if (a) {
                            a = a.replace(/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im, "");
                            var b = a.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);
                            b && (a = b[1])
                        } else a = "";
                        return a
                    },
                    h = {},
                    e = {};
                b.cache = function (a, b, d) {
                    var c;
                    "string" == typeof a ? /\//.test(a) ? (c = a, d = b) : c = k.toUrl(a.replace(/\./g, "/") +
                        (b ? "/" + b : "")) : (c = a + "", d = b);
                    a = void 0 != d && "string" != typeof d ? d.value : d;
                    d = d && d.sanitize;
                    if ("string" == typeof a) return n[c] = a, d ? l(a) : a;
                    if (null === a) return delete n[c], null;
                    c in n || m(c, !0, function (a) {
                        n[c] = a
                    });
                    return d ? l(n[c]) : n[c]
                };
                return {
                    dynamic: !0,
                    normalize: function (a, b) {
                        var d = a.split("!"),
                            c = d[0];
                        return (/^\./.test(c) ? b(c) : c) + (d[1] ? "!" + d[1] : "")
                    },
                    load: function (a, b, d) {
                        a = a.split("!");
                        var c = 1 < a.length,
                            f = a[0],
                            p = b.toUrl(a[0]);
                        a = "url:" + p;
                        var k = h,
                            r = function (a) {
                                d(c ? l(a) : a)
                            };
                        f in n ? k = n[f] : b.cache && a in b.cache ? k =
                            b.cache[a] : p in n && (k = n[p]);
                        if (k === h)
                            if (e[p]) e[p].push(r);
                            else {
                                var t = e[p] = [r];
                                m(p, !b.async, function (a) {
                                    n[f] = n[p] = a;
                                    for (var c = 0; c < t.length;) t[c++](a);
                                    delete e[p]
                                })
                            } else r(k)
                    }
                }
            })
        },
        "dojo/request": function () {
            define(["./request/default!"], function (b) {
                return b
            })
        },
        "dojo/request/default": function () {
            define(["exports", "require", "../has"], function (b, k, f) {
                var r = f("config-requestProvider");
                r || (r = "./xhr");
                b.getPlatformDefaultId = function () {
                    return "./xhr"
                };
                b.load = function (b, f, l, h) {
                    k(["platform" == b ? "./xhr" : r], function (b) {
                        l(b)
                    })
                }
            })
        },
        "dojo/i18n": function () {
            define("./_base/kernel require ./has ./_base/array ./_base/config ./_base/lang ./_base/xhr ./json module".split(" "), function (b, k, f, r, m, n, l, h, e) {
                f.add("dojo-preload-i18n-Api", 1);
                var a = b.i18n = {},
                    g = /(^.*(^|\/)nls)(\/|$)([^\/]*)\/?([^\/]*)/,
                    d = function (a, c, b, d) {
                        var e = [b + d];
                        c = c.split("-");
                        for (var g = "", f = 0; f < c.length; f++)
                            if (g += (g ? "-" : "") + c[f], !a || a[g]) e.push(b + g + "/" + d), e.specificity = g;
                        return e
                    },
                    c = {},
                    s = function (a, c, d) {
                        d = d ? d.toLowerCase() : b.locale;
                        a = a.replace(/\./g, "/");
                        c = c.replace(/\./g,
                            "/");
                        return /root/i.test(d) ? a + "/nls/" + c : a + "/nls/" + d + "/" + c
                    },
                    p = b.getL10nName = function (a, c, b) {
                        return e.id + "!" + s(a, c, b)
                    },
                    u = function (a, b, e, g, f, q) {
                        a([b], function (p) {
                            var l = n.clone(p.root || p.ROOT),
                                h = d(!p._v1x && p, f, e, g);
                            a(h, function () {
                                for (var a = 1; a < h.length; a++) l = n.mixin(n.clone(l), arguments[a]);
                                c[b + "/" + f] = l;
                                l.$locale = h.specificity;
                                q()
                            })
                        })
                    },
                    w = function (a) {
                        var c = m.extraLocale || [],
                            c = n.isArray(c) ? c : [c];
                        c.push(a);
                        return c
                    },
                    t = function (a, d, e) {
                        var q = a.split("*"),
                            p = "preload" == q[1];
                        if (f("dojo-preload-i18n-Api")) {
                            p &&
                                (c[a] || (c[a] = 1, y(q[2], h.parse(q[3]), 1, d)), e(1));
                            if (!(q = p)) v && z.push([a, d, e]), q = v;
                            if (q) return
                        } else if (p) {
                            e(1);
                            return
                        }
                        a = g.exec(a);
                        var l = a[1] + "/",
                            s = a[5] || a[4],
                            m = l + s,
                            q = (a = a[5] && a[4]) || b.locale || "",
                            k = m + "/" + q;
                        a = a ? [q] : w(q);
                        var t = a.length,
                            A = function () {
                                --t || e(n.delegate(c[k]))
                            };
                        r.forEach(a, function (a) {
                            var b = m + "/" + a;
                            f("dojo-preload-i18n-Api") && x(b);
                            c[b] ? A() : u(d, m, l, s, a, A)
                        })
                    };
                f("dojo-preload-i18n-Api");
                var q = a.normalizeLocale = function (a) {
                        a = a ? a.toLowerCase() : b.locale;
                        return "root" == a ? "ROOT" : a
                    },
                    v = 0,
                    z = [],
                    y = a._preloadLocalizations =
                    function (a, d, e, g) {
                        function f(a, c) {
                            g.isXdUrl(k.toUrl(a + ".js")) || e ? g([a], c) : H([a], c, g)
                        }

                        function p(a, c) {
                            for (var b = a.split("-"); b.length;) {
                                if (c(b.join("-"))) return;
                                b.pop()
                            }
                            c("ROOT")
                        }

                        function l() {
                            for (--v; !v && z.length;) t.apply(null, z.shift())
                        }

                        function h(b) {
                            b = q(b);
                            p(b, function (e) {
                                if (0 <= r.indexOf(d, e)) {
                                    var q = a.replace(/\./g, "/") + "_" + e;
                                    v++;
                                    f(q, function (a) {
                                        for (var d in a) {
                                            var f = a[d],
                                                q = d.match(/(.+)\/([^\/]+)$/),
                                                h;
                                            if (q && (h = q[2], q = q[1] + "/", f._localized)) {
                                                var s;
                                                if ("ROOT" === e) {
                                                    var m = s = f._localized;
                                                    delete f._localized;
                                                    m.root = f;
                                                    c[k.toAbsMid(d)] = m
                                                } else s = f._localized, c[k.toAbsMid(q + h + "/" + e)] = f;
                                                e !== b && function (a, d, e, f) {
                                                    var q = [],
                                                        h = [];
                                                    p(b, function (c) {
                                                        f[c] && (q.push(k.toAbsMid(a + c + "/" + d)), h.push(k.toAbsMid(a + d + "/" + c)))
                                                    });
                                                    q.length ? (v++, g(q, function () {
                                                        for (var g = q.length - 1; 0 <= g; g--) e = n.mixin(n.clone(e), arguments[g]), c[h[g]] = e;
                                                        c[k.toAbsMid(a + d + "/" + b)] = n.clone(e);
                                                        l()
                                                    })) : c[k.toAbsMid(a + d + "/" + b)] = e
                                                }(q, h, f, s)
                                            }
                                        }
                                        l()
                                    });
                                    return !0
                                }
                                return !1
                            })
                        }
                        g = g || k;
                        h();
                        r.forEach(b.config.extraLocale, h)
                    },
                    x = function () {},
                    A = {},
                    C = new Function("__bundle",
                        "__checkForLegacyModules", "__mid", "__amdValue", "var define \x3d function(mid, factory){define.called \x3d 1; __amdValue.result \x3d factory || mid;},\t   require \x3d function(){define.called \x3d 1;};try{define.called \x3d 0;eval(__bundle);if(define.called\x3d\x3d1)return __amdValue;if((__checkForLegacyModules \x3d __checkForLegacyModules(__mid)))return __checkForLegacyModules;}catch(e){}try{return eval('('+__bundle+')');}catch(e){return e;}"),
                    H = function (a, b, d) {
                        var e = [];
                        r.forEach(a, function (a) {
                            function b(d) {
                                d =
                                    C(d, x, a, A);
                                d === A ? e.push(c[g] = A.result) : (d instanceof Error && (console.error("failed to evaluate i18n bundle; url\x3d" + g, d), d = {}), e.push(c[g] = /nls\/[^\/]+\/[^\/]+$/.test(g) ? d : {
                                    root: d,
                                    _v1x: 1
                                }))
                            }
                            var g = d.toUrl(a + ".js");
                            if (c[g]) e.push(c[g]);
                            else {
                                var q = d.syncLoadNls(a);
                                q || (q = x(a.replace(/nls\/([^\/]*)\/([^\/]*)$/, "nls/$2/$1")));
                                if (q) e.push(q);
                                else if (l) l.get({
                                    url: g,
                                    sync: !0,
                                    load: b,
                                    error: function () {
                                        e.push(c[g] = {})
                                    }
                                });
                                else try {
                                    d.getText(g, !0, b)
                                } catch (f) {
                                    e.push(c[g] = {})
                                }
                            }
                        });
                        b && b.apply(null, e)
                    },
                    x = function (a) {
                        for (var d,
                                e = a.split("/"), g = b.global[e[0]], q = 1; g && q < e.length - 1; g = g[e[q++]]);
                        g && ((d = g[e[q]]) || (d = g[e[q].replace(/-/g, "_")]), d && (c[a] = d));
                        return d
                    };
                a.getLocalization = function (a, c, b) {
                    var d;
                    a = s(a, c, b);
                    t(a, !k.isXdUrl(k.toUrl(a + ".js")) ? function (a, c) {
                        H(a, c, k)
                    } : k, function (a) {
                        d = a
                    });
                    return d
                };
                return n.mixin(a, {
                    dynamic: !0,
                    normalize: function (a, c) {
                        return /^\./.test(a) ? c(a) : a
                    },
                    load: t,
                    cache: c,
                    getL10nName: p
                })
            })
        },
        "dojo/_base/xhr": function () {
            define("./kernel ./sniff require ../io-query ../dom ../dom-form ./Deferred ./config ./json ./lang ./array ../on ../aspect ../request/watch ../request/xhr ../request/util".split(" "),
                function (b, k, f, r, m, n, l, h, e, a, g, d, c, s, p, u) {
                    b._xhrObj = p._create;
                    var w = b.config;
                    b.objectToQuery = r.objectToQuery;
                    b.queryToObject = r.queryToObject;
                    b.fieldToObject = n.fieldToObject;
                    b.formToObject = n.toObject;
                    b.formToQuery = n.toQuery;
                    b.formToJson = n.toJson;
                    b._blockAsync = !1;
                    k.add("native-xhr2-blob", function () {
                        if (k("native-xhr2")) {
                            var a = new XMLHttpRequest;
                            a.open("GET", "/", !0);
                            a.responseType = "blob";
                            var c = a.responseType;
                            a.abort();
                            return "blob" === c
                        }
                    });
                    var t = b._contentHandlers = b.contentHandlers = {
                        text: function (a) {
                            return a.responseText
                        },
                        json: function (a) {
                            return e.fromJson(a.responseText || null)
                        },
                        "json-comment-filtered": function (a) {
                            h.useCommentedJson || console.warn("Consider using the standard mimetype:application/json. json-commenting can introduce security issues. To decrease the chances of hijacking, use the standard the 'json' handler and prefix your json with: {}\x26\x26\nUse djConfig.useCommentedJson\x3dtrue to turn off this message.");
                            a = a.responseText;
                            var c = a.indexOf("/*"),
                                b = a.lastIndexOf("*/");
                            if (-1 == c || -1 == b) throw Error("JSON was not comment filtered");
                            return e.fromJson(a.substring(c + 2, b))
                        },
                        javascript: function (a) {
                            return b.eval(a.responseText)
                        },
                        xml: function (a) {
                            var c = a.responseXML;
                            c && (k("dom-qsa2.1") && !c.querySelectorAll && k("dom-parser")) && (c = (new DOMParser).parseFromString(a.responseText, "application/xml"));
                            if (k("ie") && (!c || !c.documentElement)) {
                                var b = function (a) {
                                        return "MSXML" + a + ".DOMDocument"
                                    },
                                    b = ["Microsoft.XMLDOM", b(6), b(4), b(3), b(2)];
                                g.some(b, function (b) {
                                    try {
                                        var d = new ActiveXObject(b);
                                        d.async = !1;
                                        d.loadXML(a.responseText);
                                        c = d
                                    } catch (e) {
                                        return !1
                                    }
                                    return !0
                                })
                            }
                            return c
                        },
                        "json-comment-optional": function (a) {
                            return a.responseText && /^[^{\[]*\/\*/.test(a.responseText) ? t["json-comment-filtered"](a) : t.json(a)
                        }
                    };
                    k("native-xhr2") && (t.arraybuffer = t.blob = t.document = function (a, c) {
                        return "blob" === c.args.handleAs && !k("native-xhr2-blob") ? new Blob([a.response], {
                            type: a.getResponseHeader("Content-Type")
                        }) : a.response
                    });
                    b._ioSetArgs = function (c, d, e, g) {
                        var q = {
                                args: c,
                                url: c.url
                            },
                            f = null;
                        if (c.form) {
                            var f = m.byId(c.form),
                                p = f.getAttributeNode("action");
                            q.url = q.url || (p ? p.value : b.doc ? b.doc.URL :
                                null);
                            f = n.toObject(f)
                        }
                        p = [{}];
                        f && p.push(f);
                        c.content && p.push(c.content);
                        c.preventCache && p.push({
                            "dojo.preventCache": (new Date).valueOf()
                        });
                        q.query = r.objectToQuery(a.mixin.apply(null, p));
                        q.handleAs = c.handleAs || "text";
                        var h = new l(function (a) {
                            a.canceled = !0;
                            d && d(a);
                            var c = a.ioArgs.error;
                            c || (c = Error("request cancelled"), c.dojoType = "cancel", a.ioArgs.error = c);
                            return c
                        });
                        h.addCallback(e);
                        var s = c.load;
                        s && a.isFunction(s) && h.addCallback(function (a) {
                            return s.call(c, a, q)
                        });
                        var k = c.error;
                        k && a.isFunction(k) && h.addErrback(function (a) {
                            return k.call(c,
                                a, q)
                        });
                        var t = c.handle;
                        t && a.isFunction(t) && h.addBoth(function (a) {
                            return t.call(c, a, q)
                        });
                        h.addErrback(function (a) {
                            return g(a, h)
                        });
                        w.ioPublish && (b.publish && !1 !== q.args.ioPublish) && (h.addCallbacks(function (a) {
                            b.publish("/dojo/io/load", [h, a]);
                            return a
                        }, function (a) {
                            b.publish("/dojo/io/error", [h, a]);
                            return a
                        }), h.addBoth(function (a) {
                            b.publish("/dojo/io/done", [h, a]);
                            return a
                        }));
                        h.ioArgs = q;
                        return h
                    };
                    var q = function (a) {
                            a = t[a.ioArgs.handleAs](a.ioArgs.xhr, a.ioArgs);
                            return void 0 === a ? null : a
                        },
                        v = function (a, c) {
                            c.ioArgs.args.failOk ||
                                console.error(a);
                            return a
                        },
                        z = function (a) {
                            0 >= y && (y = 0, w.ioPublish && (b.publish && (!a || a && !1 !== a.ioArgs.args.ioPublish)) && b.publish("/dojo/io/stop"))
                        },
                        y = 0;
                    c.after(s, "_onAction", function () {
                        y -= 1
                    });
                    c.after(s, "_onInFlight", z);
                    b._ioCancelAll = s.cancelAll;
                    b._ioNotifyStart = function (a) {
                        w.ioPublish && (b.publish && !1 !== a.ioArgs.args.ioPublish) && (y || b.publish("/dojo/io/start"), y += 1, b.publish("/dojo/io/send", [a]))
                    };
                    b._ioWatch = function (c, b, d, e) {
                        c.ioArgs.options = c.ioArgs.args;
                        a.mixin(c, {
                            response: c.ioArgs,
                            isValid: function (a) {
                                return b(c)
                            },
                            isReady: function (a) {
                                return d(c)
                            },
                            handleResponse: function (a) {
                                return e(c)
                            }
                        });
                        s(c);
                        z(c)
                    };
                    b._ioAddQueryToUrl = function (a) {
                        a.query.length && (a.url += (-1 == a.url.indexOf("?") ? "?" : "\x26") + a.query, a.query = null)
                    };
                    b.xhr = function (a, c, d) {
                        var e, g = b._ioSetArgs(c, function (a) {
                                e && e.cancel()
                            }, q, v),
                            f = g.ioArgs;
                        "postData" in c ? f.query = c.postData : "putData" in c ? f.query = c.putData : "rawBody" in c ? f.query = c.rawBody : (2 < arguments.length && !d || -1 === "POST|PUT".indexOf(a.toUpperCase())) && b._ioAddQueryToUrl(f);
                        var h;
                        k("native-xhr2") && (h = {
                            arraybuffer: 1,
                            blob: 1,
                            document: 1
                        });
                        h = k("native-xhr2") && h[c.handleAs] ? c.handleAs : "text";
                        "blob" === h && !k("native-xhr2-blob") && (h = "arraybuffer");
                        h = {
                            method: a,
                            handleAs: h,
                            responseType: c.responseType,
                            timeout: c.timeout,
                            withCredentials: c.withCredentials,
                            ioArgs: f
                        };
                        "undefined" !== typeof c.headers && (h.headers = c.headers);
                        "undefined" !== typeof c.contentType && (h.headers || (h.headers = {}), h.headers["Content-Type"] = c.contentType);
                        "undefined" !== typeof f.query && (h.data = f.query);
                        "undefined" !== typeof c.sync && (h.sync = c.sync);
                        b._ioNotifyStart(g);
                        try {
                            e = p(f.url, h, !0)
                        } catch (l) {
                            return g.cancel(), g
                        }
                        g.ioArgs.xhr = e.response.xhr;
                        e.then(function () {
                            g.resolve(g)
                        }).otherwise(function (a) {
                            f.error = a;
                            a.response && (a.status = a.response.status, a.responseText = a.response.text, a.xhr = a.response.xhr);
                            g.reject(a)
                        });
                        return g
                    };
                    b.xhrGet = function (a) {
                        return b.xhr("GET", a)
                    };
                    b.rawXhrPost = b.xhrPost = function (a) {
                        return b.xhr("POST", a, !0)
                    };
                    b.rawXhrPut = b.xhrPut = function (a) {
                        return b.xhr("PUT", a, !0)
                    };
                    b.xhrDelete = function (a) {
                        return b.xhr("DELETE", a)
                    };
                    b._isDocumentOk =
                        function (a) {
                            return u.checkStatus(a.status)
                        };
                    b._getText = function (a) {
                        var c;
                        b.xhrGet({
                            url: a,
                            sync: !0,
                            load: function (a) {
                                c = a
                            }
                        });
                        return c
                    };
                    a.mixin(b.xhr, {
                        _xhrObj: b._xhrObj,
                        fieldToObject: n.fieldToObject,
                        formToObject: n.toObject,
                        objectToQuery: r.objectToQuery,
                        formToQuery: n.toQuery,
                        formToJson: n.toJson,
                        queryToObject: r.queryToObject,
                        contentHandlers: t,
                        _ioSetArgs: b._ioSetArgs,
                        _ioCancelAll: b._ioCancelAll,
                        _ioNotifyStart: b._ioNotifyStart,
                        _ioWatch: b._ioWatch,
                        _ioAddQueryToUrl: b._ioAddQueryToUrl,
                        _isDocumentOk: b._isDocumentOk,
                        _getText: b._getText,
                        get: b.xhrGet,
                        post: b.xhrPost,
                        put: b.xhrPut,
                        del: b.xhrDelete
                    });
                    return b.xhr
                })
        },
        "dojo/_base/sniff": function () {
            define(["./kernel", "./lang", "../sniff"], function (b, k, f) {
                b._name = "browser";
                k.mixin(b, {
                    isBrowser: !0,
                    isFF: f("ff"),
                    isIE: f("ie"),
                    isKhtml: f("khtml"),
                    isWebKit: f("webkit"),
                    isMozilla: f("mozilla"),
                    isMoz: f("mozilla"),
                    isOpera: f("opera"),
                    isSafari: f("safari"),
                    isChrome: f("chrome"),
                    isMac: f("mac"),
                    isIos: f("ios"),
                    isAndroid: f("android"),
                    isWii: f("wii"),
                    isQuirks: f("quirks"),
                    isAir: f("air")
                });
                return f
            })
        },
        "dojo/io-query": function () {
            define(["./_base/lang"], function (b) {
                var k = {};
                return {
                    objectToQuery: function (f) {
                        var r = encodeURIComponent,
                            m = [],
                            n;
                        for (n in f) {
                            var l = f[n];
                            if (l != k[n]) {
                                var h = r(n) + "\x3d";
                                if (b.isArray(l))
                                    for (var e = 0, a = l.length; e < a; ++e) m.push(h + r(l[e]));
                                else m.push(h + r(l))
                            }
                        }
                        return m.join("\x26")
                    },
                    queryToObject: function (f) {
                        var k = decodeURIComponent;
                        f = f.split("\x26");
                        for (var m = {}, n, l, h = 0, e = f.length; h < e; ++h)
                            if (l = f[h], l.length) {
                                var a = l.indexOf("\x3d");
                                0 > a ? (n = k(l), l = "") : (n = k(l.slice(0, a)), l = k(l.slice(a +
                                    1)));
                                "string" == typeof m[n] && (m[n] = [m[n]]);
                                b.isArray(m[n]) ? m[n].push(l) : m[n] = l
                            }
                        return m
                    }
                }
            })
        },
        "dojo/dom": function () {
            define(["./sniff", "./_base/window", "./_base/kernel"], function (b, k, f) {
                if (7 >= b("ie")) try {
                    document.execCommand("BackgroundImageCache", !1, !0)
                } catch (r) {}
                var m = {};
                b("ie") ? m.byId = function (b, f) {
                    if ("string" != typeof b) return b;
                    var e = f || k.doc,
                        a = b && e.getElementById(b);
                    if (a && (a.attributes.id.value == b || a.id == b)) return a;
                    e = e.all[b];
                    if (!e || e.nodeName) e = [e];
                    for (var g = 0; a = e[g++];)
                        if (a.attributes && a.attributes.id &&
                            a.attributes.id.value == b || a.id == b) return a
                } : m.byId = function (b, f) {
                    return ("string" == typeof b ? (f || k.doc).getElementById(b) : b) || null
                };
                f = f.global.document || null;
                b.add("dom-contains", !(!f || !f.contains));
                m.isDescendant = b("dom-contains") ? function (b, f) {
                    return !(!(f = m.byId(f)) || !f.contains(m.byId(b)))
                } : function (b, f) {
                    try {
                        b = m.byId(b);
                        for (f = m.byId(f); b;) {
                            if (b == f) return !0;
                            b = b.parentNode
                        }
                    } catch (e) {}
                    return !1
                };
                b.add("css-user-select", function (b, f, e) {
                    if (!e) return !1;
                    b = e.style;
                    f = ["Khtml", "O", "Moz", "Webkit"];
                    e = f.length;
                    var a = "userSelect";
                    do
                        if ("undefined" !== typeof b[a]) return a;
                    while (e-- && (a = f[e] + "UserSelect"));
                    return !1
                });
                var n = b("css-user-select");
                m.setSelectable = n ? function (b, f) {
                    m.byId(b).style[n] = f ? "" : "none"
                } : function (b, f) {
                    b = m.byId(b);
                    var e = b.getElementsByTagName("*"),
                        a = e.length;
                    if (f)
                        for (b.removeAttribute("unselectable"); a--;) e[a].removeAttribute("unselectable");
                    else
                        for (b.setAttribute("unselectable", "on"); a--;) e[a].setAttribute("unselectable", "on")
                };
                return m
            })
        },
        "dojo/_base/window": function () {
            define(["./kernel",
"./lang", "../sniff"], function (b, k, f) {
                var r = {
                    global: b.global,
                    doc: b.global.document || null,
                    body: function (f) {
                        f = f || b.doc;
                        return f.body || f.getElementsByTagName("body")[0]
                    },
                    setContext: function (f, n) {
                        b.global = r.global = f;
                        b.doc = r.doc = n
                    },
                    withGlobal: function (f, n, l, h) {
                        var e = b.global;
                        try {
                            return b.global = r.global = f, r.withDoc.call(null, f.document, n, l, h)
                        } finally {
                            b.global = r.global = e
                        }
                    },
                    withDoc: function (m, n, l, h) {
                        var e = r.doc,
                            a = f("quirks"),
                            g = f("ie"),
                            d, c, s;
                        try {
                            b.doc = r.doc = m;
                            b.isQuirks = f.add("quirks", "BackCompat" == b.doc.compatMode, !0, !0);
                            if (f("ie") && (s = m.parentWindow) && s.navigator) d = parseFloat(s.navigator.appVersion.split("MSIE ")[1]) || void 0, (c = m.documentMode) && (5 != c && Math.floor(d) != c) && (d = c), b.isIE = f.add("ie", d, !0, !0);
                            l && "string" == typeof n && (n = l[n]);
                            return n.apply(l, h || [])
                        } finally {
                            b.doc = r.doc = e, b.isQuirks = f.add("quirks", a, !0, !0), b.isIE = f.add("ie", g, !0, !0)
                        }
                    }
                };
                k.mixin(b, r);
                return r
            })
        },
        "dojo/dom-form": function () {
            define(["./_base/lang", "./dom", "./io-query", "./json"], function (b, k, f, r) {
                var m = {
                    fieldToObject: function (b) {
                        var f = null;
                        if (b = k.byId(b)) {
                            var h = b.name,
                                e = (b.type || "").toLowerCase();
                            if (h && e && !b.disabled)
                                if ("radio" == e || "checkbox" == e) b.checked && (f = b.value);
                                else if (b.multiple) {
                                f = [];
                                for (b = [b.firstChild]; b.length;)
                                    for (h = b.pop(); h; h = h.nextSibling)
                                        if (1 == h.nodeType && "option" == h.tagName.toLowerCase()) h.selected && f.push(h.value);
                                        else {
                                            h.nextSibling && b.push(h.nextSibling);
                                            h.firstChild && b.push(h.firstChild);
                                            break
                                        }
                            } else f = b.value
                        }
                        return f
                    },
                    toObject: function (f) {
                        var l = {};
                        f = k.byId(f).elements;
                        for (var h = 0, e = f.length; h < e; ++h) {
                            var a = f[h],
                                g = a.name,
                                d = (a.type || "").toLowerCase();
                            if (g && d && 0 > "file|submit|image|reset|button".indexOf(d) && !a.disabled) {
                                var c = l,
                                    s = g,
                                    a = m.fieldToObject(a);
                                if (null !== a) {
                                    var p = c[s];
                                    "string" == typeof p ? c[s] = [p, a] : b.isArray(p) ? p.push(a) : c[s] = a
                                }
                                "image" == d && (l[g + ".x"] = l[g + ".y"] = l[g].x = l[g].y = 0)
                            }
                        }
                        return l
                    },
                    toQuery: function (b) {
                        return f.objectToQuery(m.toObject(b))
                    },
                    toJson: function (b, f) {
                        return r.stringify(m.toObject(b), null, f ? 4 : 0)
                    }
                };
                return m
            })
        },
        "dojo/_base/Deferred": function () {
            define("./kernel ../Deferred ../promise/Promise ../errors/CancelError ../has ./lang ../when".split(" "),
                function (b, k, f, r, m, n, l) {
                    var h = function () {},
                        e = Object.freeze || function () {},
                        a = b.Deferred = function (b) {
                            function d(a) {
                                if (p) throw Error("This deferred has already been resolved");
                                s = a;
                                p = !0;
                                c()
                            }

                            function c() {
                                for (var a; !a && v;) {
                                    var c = v;
                                    v = v.next;
                                    if (a = c.progress == h) p = !1;
                                    var b = t ? c.error : c.resolved;
                                    m("config-useDeferredInstrumentation") && t && k.instrumentRejected && k.instrumentRejected(s, !!b);
                                    if (b) try {
                                        var d = b(s);
                                        d && "function" === typeof d.then ? d.then(n.hitch(c.deferred, "resolve"), n.hitch(c.deferred, "reject"), n.hitch(c.deferred,
                                            "progress")) : (b = a && void 0 === d, a && !b && (t = d instanceof Error), c.deferred[b && t ? "reject" : "resolve"](b ? s : d))
                                    } catch (e) {
                                        c.deferred.reject(e)
                                    } else t ? c.deferred.reject(s) : c.deferred.resolve(s)
                                }
                            }
                            var s, p, l, w, t, q, v, z = this.promise = new f;
                            this.isResolved = z.isResolved = function () {
                                return 0 == w
                            };
                            this.isRejected = z.isRejected = function () {
                                return 1 == w
                            };
                            this.isFulfilled = z.isFulfilled = function () {
                                return 0 <= w
                            };
                            this.isCanceled = z.isCanceled = function () {
                                return l
                            };
                            this.resolve = this.callback = function (a) {
                                this.fired = w = 0;
                                this.results = [a, null];
                                d(a)
                            };
                            this.reject = this.errback = function (a) {
                                t = !0;
                                this.fired = w = 1;
                                m("config-useDeferredInstrumentation") && k.instrumentRejected && k.instrumentRejected(a, !!v);
                                d(a);
                                this.results = [null, a]
                            };
                            this.progress = function (a) {
                                for (var c = v; c;) {
                                    var b = c.progress;
                                    b && b(a);
                                    c = c.next
                                }
                            };
                            this.addCallbacks = function (a, c) {
                                this.then(a, c, h);
                                return this
                            };
                            z.then = this.then = function (b, d, e) {
                                var g = e == h ? this : new a(z.cancel);
                                b = {
                                    resolved: b,
                                    error: d,
                                    progress: e,
                                    deferred: g
                                };
                                v ? q = q.next = b : v = q = b;
                                p && c();
                                return g.promise
                            };
                            var y = this;
                            z.cancel =
                                this.cancel = function () {
                                    if (!p) {
                                        var a = b && b(y);
                                        p || (a instanceof Error || (a = new r(a)), a.log = !1, y.reject(a))
                                    }
                                    l = !0
                                };
                            e(z)
                        };
                    n.extend(a, {
                        addCallback: function (a) {
                            return this.addCallbacks(n.hitch.apply(b, arguments))
                        },
                        addErrback: function (a) {
                            return this.addCallbacks(null, n.hitch.apply(b, arguments))
                        },
                        addBoth: function (a) {
                            var d = n.hitch.apply(b, arguments);
                            return this.addCallbacks(d, d)
                        },
                        fired: -1
                    });
                    a.when = b.when = l;
                    return a
                })
        },
        "dojo/Deferred": function () {
            define(["./has", "./_base/lang", "./errors/CancelError", "./promise/Promise",
"./promise/instrumentation"], function (b, k, f, r, m) {
                var n = Object.freeze || function () {},
                    l = function (a, c, b, e, f) {
                        2 === c && (g.instrumentRejected && 0 === a.length) && g.instrumentRejected(b, !1, e, f);
                        for (f = 0; f < a.length; f++) h(a[f], c, b, e)
                    },
                    h = function (b, c, f, p) {
                        var h = b[c],
                            l = b.deferred;
                        if (h) try {
                            var n = h(f);
                            if (0 === c) "undefined" !== typeof n && a(l, c, n);
                            else {
                                if (n && "function" === typeof n.then) {
                                    b.cancel = n.cancel;
                                    n.then(e(l, 1), e(l, 2), e(l, 0));
                                    return
                                }
                                a(l, 1, n)
                            }
                        } catch (q) {
                            a(l, 2, q)
                        } else a(l, c, f);
                        2 === c && g.instrumentRejected && g.instrumentRejected(f, !!h, p, l.promise)
                    },
                    e = function (b, c) {
                        return function (e) {
                            a(b, c, e)
                        }
                    },
                    a = function (a, c, b) {
                        if (!a.isCanceled()) switch (c) {
                        case 0:
                            a.progress(b);
                            break;
                        case 1:
                            a.resolve(b);
                            break;
                        case 2:
                            a.reject(b)
                        }
                    },
                    g = function (a) {
                        var c = this.promise = new r,
                            b = this,
                            e, m, k, t = !1,
                            q = [];
                        Error.captureStackTrace && (Error.captureStackTrace(b, g), Error.captureStackTrace(c, g));
                        this.isResolved = c.isResolved = function () {
                            return 1 === e
                        };
                        this.isRejected = c.isRejected = function () {
                            return 2 === e
                        };
                        this.isFulfilled = c.isFulfilled = function () {
                            return !!e
                        };
                        this.isCanceled =
                            c.isCanceled = function () {
                                return t
                            };
                        this.progress = function (a, d) {
                            if (e) {
                                if (!0 === d) throw Error("This deferred has already been fulfilled.");
                                return c
                            }
                            l(q, 0, a, null, b);
                            return c
                        };
                        this.resolve = function (a, d) {
                            if (e) {
                                if (!0 === d) throw Error("This deferred has already been fulfilled.");
                                return c
                            }
                            l(q, e = 1, m = a, null, b);
                            q = null;
                            return c
                        };
                        var v = this.reject = function (a, d) {
                            if (e) {
                                if (!0 === d) throw Error("This deferred has already been fulfilled.");
                                return c
                            }
                            Error.captureStackTrace && Error.captureStackTrace(k = {}, v);
                            l(q, e = 2, m = a, k,
                                b);
                            q = null;
                            return c
                        };
                        this.then = c.then = function (a, b, d) {
                            var f = [d, a, b];
                            f.cancel = c.cancel;
                            f.deferred = new g(function (a) {
                                return f.cancel && f.cancel(a)
                            });
                            e && !q ? h(f, e, m, k) : q.push(f);
                            return f.deferred.promise
                        };
                        this.cancel = c.cancel = function (c, b) {
                            if (e) {
                                if (!0 === b) throw Error("This deferred has already been fulfilled.");
                            } else {
                                if (a) {
                                    var g = a(c);
                                    c = "undefined" === typeof g ? c : g
                                }
                                t = !0;
                                if (e) {
                                    if (2 === e && m === c) return c
                                } else return "undefined" === typeof c && (c = new f), v(c), c
                            }
                        };
                        n(c)
                    };
                g.prototype.toString = function () {
                    return "[object Deferred]"
                };
                m && m(g);
                return g
            })
        },
        "dojo/errors/CancelError": function () {
            define(["./create"], function (b) {
                return b("CancelError", null, null, {
                    dojoType: "cancel"
                })
            })
        },
        "dojo/errors/create": function () {
            define(["../_base/lang"], function (b) {
                return function (k, f, r, m) {
                    r = r || Error;
                    var n = function (b) {
                        if (r === Error) {
                            Error.captureStackTrace && Error.captureStackTrace(this, n);
                            var h = Error.call(this, b),
                                e;
                            for (e in h) h.hasOwnProperty(e) && (this[e] = h[e]);
                            this.message = b;
                            this.stack = h.stack
                        } else r.apply(this, arguments);
                        f && f.apply(this, arguments)
                    };
                    n.prototype = b.delegate(r.prototype, m);
                    n.prototype.name = k;
                    return n.prototype.constructor = n
                }
            })
        },
        "dojo/promise/Promise": function () {
            define(["../_base/lang"], function (b) {
                function k() {
                    throw new TypeError("abstract");
                }
                return b.extend(function () {}, {
                    then: function (b, r, m) {
                        k()
                    },
                    cancel: function (b, r) {
                        k()
                    },
                    isResolved: function () {
                        k()
                    },
                    isRejected: function () {
                        k()
                    },
                    isFulfilled: function () {
                        k()
                    },
                    isCanceled: function () {
                        k()
                    },
                    always: function (b) {
                        return this.then(b, b)
                    },
                    otherwise: function (b) {
                        return this.then(null, b)
                    },
                    trace: function () {
                        return this
                    },
                    traceRejected: function () {
                        return this
                    },
                    toString: function () {
                        return "[object Promise]"
                    }
                })
            })
        },
        "dojo/promise/instrumentation": function () {
            define(["./tracer", "../has", "../_base/lang", "../_base/array"], function (b, k, f, r) {
                function m(a, c, b) {
                    var e = "";
                    a && a.stack && (e += a.stack);
                    c && c.stack && (e += "\n    ----------------------------------------\n    rejected" + c.stack.split("\n").slice(1).join("\n").replace(/^\s+/, " "));
                    b && b.stack && (e += "\n    ----------------------------------------\n" + b.stack);
                    console.error(a, e)
                }

                function n(a,
                    c, b, e) {
                    c || m(a, b, e)
                }

                function l(b, c, f, p) {
                    r.some(e, function (a) {
                        if (a.error === b) return c && (a.handled = !0), !0
                    }) || e.push({
                        error: b,
                        rejection: f,
                        handled: c,
                        deferred: p,
                        timestamp: (new Date).getTime()
                    });
                    a || (a = setTimeout(h, g))
                }

                function h() {
                    var b = (new Date).getTime(),
                        c = b - g;
                    e = r.filter(e, function (a) {
                        return a.timestamp < c ? (a.handled || m(a.error, a.rejection, a.deferred), !1) : !0
                    });
                    a = e.length ? setTimeout(h, e[0].timestamp + g - b) : !1
                }
                k.add("config-useDeferredInstrumentation", "report-unhandled-rejections");
                var e = [],
                    a = !1,
                    g = 1E3;
                return function (a) {
                    var c =
                        k("config-useDeferredInstrumentation");
                    if (c) {
                        b.on("resolved", f.hitch(console, "log", "resolved"));
                        b.on("rejected", f.hitch(console, "log", "rejected"));
                        b.on("progress", f.hitch(console, "log", "progress"));
                        var e = [];
                        "string" === typeof c && (e = c.split(","), c = e.shift());
                        if ("report-rejections" === c) a.instrumentRejected = n;
                        else if ("report-unhandled-rejections" === c || !0 === c || 1 === c) a.instrumentRejected = l, g = parseInt(e[0], 10) || g;
                        else throw Error("Unsupported instrumentation usage \x3c" + c + "\x3e");
                    }
                }
            })
        },
        "dojo/promise/tracer": function () {
            define(["../_base/lang",
"./Promise", "../Evented"], function (b, k, f) {
                function r(b) {
                    setTimeout(function () {
                        n.apply(m, b)
                    }, 0)
                }
                var m = new f,
                    n = m.emit;
                m.emit = null;
                k.prototype.trace = function () {
                    var f = b._toArray(arguments);
                    this.then(function (b) {
                        r(["resolved", b].concat(f))
                    }, function (b) {
                        r(["rejected", b].concat(f))
                    }, function (b) {
                        r(["progress", b].concat(f))
                    });
                    return this
                };
                k.prototype.traceRejected = function () {
                    var f = b._toArray(arguments);
                    this.otherwise(function (b) {
                        r(["rejected", b].concat(f))
                    });
                    return this
                };
                return m
            })
        },
        "dojo/Evented": function () {
            define(["./aspect",
"./on"], function (b, k) {
                function f() {}
                var r = b.after;
                f.prototype = {
                    on: function (b, f) {
                        return k.parse(this, b, f, function (b, h) {
                            return r(b, "on" + h, f, !0)
                        })
                    },
                    emit: function (b, f) {
                        var l = [this];
                        l.push.apply(l, arguments);
                        return k.emit.apply(k, l)
                    }
                };
                return f
            })
        },
        "dojo/aspect": function () {
            define([], function () {
                function b(b, f, e, a) {
                    var g = b[f],
                        d = "around" == f,
                        c;
                    if (d) {
                        var s = e(function () {
                            return g.advice(this, arguments)
                        });
                        c = {
                            remove: function () {
                                s && (s = b = e = null)
                            },
                            advice: function (a, b) {
                                return s ? s.apply(a, b) : g.advice(a, b)
                            }
                        }
                    } else c = {
                        remove: function () {
                            if (c.advice) {
                                var a =
                                    c.previous,
                                    d = c.next;
                                !d && !a ? delete b[f] : (a ? a.next = d : b[f] = d, d && (d.previous = a));
                                b = e = c.advice = null
                            }
                        },
                        id: b.nextId++,
                        advice: e,
                        receiveArguments: a
                    };
                    if (g && !d)
                        if ("after" == f) {
                            for (; g.next && (g = g.next););
                            g.next = c;
                            c.previous = g
                        } else "before" == f && (b[f] = c, c.next = g, g.previous = c);
                    else b[f] = c;
                    return c
                }

                function k(l) {
                    return function (h, e, a, g) {
                        var d = h[e],
                            c;
                        if (!d || d.target != h) h[e] = c = function () {
                            for (var a = c.nextId, b = arguments, d = c.before; d;) d.advice && (b = d.advice.apply(this, b) || b), d = d.next;
                            if (c.around) var e = c.around.advice(this,
                                b);
                            for (d = c.after; d && d.id < a;) {
                                if (d.advice)
                                    if (d.receiveArguments) var g = d.advice.apply(this, b),
                                        e = g === f ? e : g;
                                    else e = d.advice.call(this, e, b);
                                d = d.next
                            }
                            return e
                        }, d && (c.around = {
                            advice: function (a, b) {
                                return d.apply(a, b)
                            }
                        }), c.target = h, c.nextId = c.nextId || 0;
                        h = b(c || d, l, a, g);
                        a = null;
                        return h
                    }
                }
                var f, r = k("after"),
                    m = k("before"),
                    n = k("around");
                return {
                    before: m,
                    around: n,
                    after: r
                }
            })
        },
        "dojo/on": function () {
            define(["./has!dom-addeventlistener?:./aspect", "./_base/kernel", "./sniff"], function (b, k, f) {
                function r(a, b, c, g, q) {
                    if (g = b.match(/(.*):(.*)/)) return b =
                        g[2], g = g[1], h.selector(g, b).call(q, a, c);
                    f("touch") && (e.test(b) && (c = x(c)), !f("event-orientationchange") && "orientationchange" == b && (b = "resize", a = window, c = x(c)));
                    s && (c = s(c));
                    if (a.addEventListener) {
                        var p = b in d,
                            l = p ? d[b] : b;
                        a.addEventListener(l, c, p);
                        return {
                            remove: function () {
                                a.removeEventListener(l, c, p)
                            }
                        }
                    }
                    if (t && a.attachEvent) return t(a, "on" + b, c);
                    throw Error("Target must be an event emitter");
                }

                function m() {
                    this.cancelable = !1;
                    this.defaultPrevented = !0
                }

                function n() {
                    this.bubbles = !1
                }
                var l = window.ScriptEngineMajorVersion;
                f.add("jscript", l && l() + ScriptEngineMinorVersion() / 10);
                f.add("event-orientationchange", f("touch") && !f("android"));
                f.add("event-stopimmediatepropagation", window.Event && !!window.Event.prototype && !!window.Event.prototype.stopImmediatePropagation);
                f.add("event-focusin", function (a, b, c) {
                    return "onfocusin" in c
                });
                f("touch") && f.add("touch-can-modify-event-delegate", function () {
                    var a = function () {};
                    a.prototype = document.createEvent("MouseEvents");
                    try {
                        var b = new a;
                        b.target = null;
                        return null === b.target
                    } catch (c) {
                        return !1
                    }
                });
                var h = function (a, b, c, d) {
                    return "function" == typeof a.on && "function" != typeof b && !a.nodeType ? a.on(b, c) : h.parse(a, b, c, r, d, this)
                };
                h.pausable = function (a, b, c, d) {
                    var e;
                    a = h(a, b, function () {
                        if (!e) return c.apply(this, arguments)
                    }, d);
                    a.pause = function () {
                        e = !0
                    };
                    a.resume = function () {
                        e = !1
                    };
                    return a
                };
                h.once = function (a, b, c, d) {
                    var e = h(a, b, function () {
                        e.remove();
                        return c.apply(this, arguments)
                    });
                    return e
                };
                h.parse = function (a, b, c, d, e, f) {
                    var g;
                    if (b.call) return b.call(f, a, c);
                    b instanceof Array ? g = b : -1 < b.indexOf(",") && (g = b.split(/\s*,\s*/));
                    if (g) {
                        var q = [];
                        b = 0;
                        for (var p; p = g[b++];) q.push(h.parse(a, p, c, d, e, f));
                        q.remove = function () {
                            for (var a = 0; a < q.length; a++) q[a].remove()
                        };
                        return q
                    }
                    return d(a, b, c, e, f)
                };
                var e = /^touch/;
                h.matches = function (a, b, c, d, e) {
                    e = e && "function" == typeof e.matches ? e : k.query;
                    d = !1 !== d;
                    1 != a.nodeType && (a = a.parentNode);
                    for (; !e.matches(a, b, c);)
                        if (a == c || !1 === d || !(a = a.parentNode) || 1 != a.nodeType) return !1;
                    return a
                };
                h.selector = function (a, b, c) {
                    return function (d, e) {
                        function f(b) {
                            return h.matches(b, a, d, c, g)
                        }
                        var g = "function" == typeof a ? {
                                matches: a
                            } :
                            this,
                            q = b.bubble;
                        return q ? h(d, q(f), e) : h(d, b, function (a) {
                            var b = f(a.target);
                            if (b) return a.selectorTarget = b, e.call(b, a)
                        })
                    }
                };
                var a = [].slice,
                    g = h.emit = function (b, c, d) {
                        var e = a.call(arguments, 2),
                            f = "on" + c;
                        if ("parentNode" in b) {
                            var g = e[0] = {},
                                q;
                            for (q in d) g[q] = d[q];
                            g.preventDefault = m;
                            g.stopPropagation = n;
                            g.target = b;
                            g.type = c;
                            d = g
                        }
                        do b[f] && b[f].apply(b, e); while (d && d.bubbles && (b = b.parentNode));
                        return d && d.cancelable && d
                    },
                    d = f("event-focusin") ? {} : {
                        focusin: "focus",
                        focusout: "blur"
                    };
                if (!f("event-stopimmediatepropagation")) var c =
                    function () {
                        this.modified = this.immediatelyStopped = !0
                    },
                    s = function (a) {
                        return function (b) {
                            if (!b.immediatelyStopped) return b.stopImmediatePropagation = c, a.apply(this, arguments)
                        }
                    };
                if (f("dom-addeventlistener")) h.emit = function (a, b, c) {
                    if (a.dispatchEvent && document.createEvent) {
                        var d = (a.ownerDocument || document).createEvent("HTMLEvents");
                        d.initEvent(b, !!c.bubbles, !!c.cancelable);
                        for (var e in c) e in d || (d[e] = c[e]);
                        return a.dispatchEvent(d) && d
                    }
                    return g.apply(h, arguments)
                };
                else {
                    h._fixEvent = function (a, b) {
                        a || (a = (b &&
                            (b.ownerDocument || b.document || b).parentWindow || window).event);
                        if (!a) return a;
                        try {
                            p && (a.type == p.type && a.srcElement == p.target) && (a = p)
                        } catch (c) {}
                        if (!a.target) switch (a.target = a.srcElement, a.currentTarget = b || a.srcElement, "mouseover" == a.type && (a.relatedTarget = a.fromElement), "mouseout" == a.type && (a.relatedTarget = a.toElement), a.stopPropagation || (a.stopPropagation = q, a.preventDefault = v), a.type) {
                        case "keypress":
                            var d = "charCode" in a ? a.charCode : a.keyCode;
                            10 == d ? (d = 0, a.keyCode = 13) : 13 == d || 27 == d ? d = 0 : 3 == d && (d = 99);
                            a.charCode =
                                d;
                            d = a;
                            d.keyChar = d.charCode ? String.fromCharCode(d.charCode) : "";
                            d.charOrCode = d.keyChar || d.keyCode
                        }
                        return a
                    };
                    var p, u = function (a) {
                        this.handle = a
                    };
                    u.prototype.remove = function () {
                        delete _dojoIEListeners_[this.handle]
                    };
                    var w = function (a) {
                            return function (b) {
                                b = h._fixEvent(b, this);
                                var c = a.call(this, b);
                                b.modified && (p || setTimeout(function () {
                                    p = null
                                }), p = b);
                                return c
                            }
                        },
                        t = function (a, c, d) {
                            d = w(d);
                            if (((a.ownerDocument ? a.ownerDocument.parentWindow : a.parentWindow || a.window || window) != top || 5.8 > f("jscript")) && !f("config-_allow_leaks")) {
                                "undefined" ==
                                typeof _dojoIEListeners_ && (_dojoIEListeners_ = []);
                                var e = a[c];
                                if (!e || !e.listeners) {
                                    var g = e,
                                        e = Function("event", "var callee \x3d arguments.callee; for(var i \x3d 0; i\x3ccallee.listeners.length; i++){var listener \x3d _dojoIEListeners_[callee.listeners[i]]; if(listener){listener.call(this,event);}}");
                                    e.listeners = [];
                                    a[c] = e;
                                    e.global = this;
                                    g && e.listeners.push(_dojoIEListeners_.push(g) - 1)
                                }
                                e.listeners.push(a = e.global._dojoIEListeners_.push(d) - 1);
                                return new u(a)
                            }
                            return b.after(a, c, d, !0)
                        },
                        q = function () {
                            this.cancelBubble = !0
                        },
                        v = h._preventDefault = function () {
                            this.bubbledKeyCode = this.keyCode;
                            if (this.ctrlKey) try {
                                this.keyCode = 0
                            } catch (a) {}
                            this.defaultPrevented = !0;
                            this.returnValue = !1;
                            this.modified = !0
                        }
                }
                if (f("touch")) var z = function () {},
                    y = window.orientation,
                    x = function (a) {
                        return function (b) {
                            var c = b.corrected;
                            if (!c) {
                                var d = b.type;
                                try {
                                    delete b.type
                                } catch (e) {}
                                if (b.type) {
                                    if (f("touch-can-modify-event-delegate")) z.prototype = b, c = new z;
                                    else {
                                        var c = {},
                                            g;
                                        for (g in b) c[g] = b[g]
                                    }
                                    c.preventDefault = function () {
                                        b.preventDefault()
                                    };
                                    c.stopPropagation =
                                        function () {
                                            b.stopPropagation()
                                        }
                                } else c = b, c.type = d;
                                b.corrected = c;
                                if ("resize" == d) {
                                    if (y == window.orientation) return null;
                                    y = window.orientation;
                                    c.type = "orientationchange";
                                    return a.call(this, c)
                                }
                                "rotation" in c || (c.rotation = 0, c.scale = 1);
                                var d = c.changedTouches[0],
                                    q;
                                for (q in d) delete c[q], c[q] = d[q]
                            }
                            return a.call(this, c)
                        }
                    };
                return h
            })
        },
        "dojo/when": function () {
            define(["./Deferred", "./promise/Promise"], function (b, k) {
                return function (f, r, m, n) {
                    var l = f && "function" === typeof f.then,
                        h = l && f instanceof k;
                    if (l) h || (l = new b(f.cancel),
                        f.then(l.resolve, l.reject, l.progress), f = l.promise);
                    else return 1 < arguments.length ? r ? r(f) : f : (new b).resolve(f);
                    return r || m || n ? f.then(r, m, n) : f
                }
            })
        },
        "dojo/_base/json": function () {
            define(["./kernel", "../json"], function (b, k) {
                b.fromJson = function (b) {
                    return eval("(" + b + ")")
                };
                b._escapeString = k.stringify;
                b.toJsonIndentStr = "\t";
                b.toJson = function (f, r) {
                    return k.stringify(f, function (b, f) {
                        if (f) {
                            var l = f.__json__ || f.json;
                            if ("function" == typeof l) return l.call(f)
                        }
                        return f
                    }, r && b.toJsonIndentStr)
                };
                return b
            })
        },
        "dojo/request/watch": function () {
            define("./util ../errors/RequestTimeoutError ../errors/CancelError ../_base/array ../_base/window ../has!host-browser?dom-addeventlistener?:../on:".split(" "),
                function (b, k, f, r, m, n) {
                    function l() {
                        for (var b = +new Date, d = 0, c; d < a.length && (c = a[d]); d++) {
                            var f = c.response,
                                p = f.options;
                            if (c.isCanceled && c.isCanceled() || c.isValid && !c.isValid(f)) a.splice(d--, 1), h._onAction && h._onAction();
                            else if (c.isReady && c.isReady(f)) a.splice(d--, 1), c.handleResponse(f), h._onAction && h._onAction();
                            else if (c.startTime && c.startTime + (p.timeout || 0) < b) a.splice(d--, 1), c.cancel(new k("Timeout exceeded", f)), h._onAction && h._onAction()
                        }
                        h._onInFlight && h._onInFlight(c);
                        a.length || (clearInterval(e),
                            e = null)
                    }

                    function h(b) {
                        b.response.options.timeout && (b.startTime = +new Date);
                        b.isFulfilled() || (a.push(b), e || (e = setInterval(l, 50)), b.response.options.sync && l())
                    }
                    var e = null,
                        a = [];
                    h.cancelAll = function () {
                        try {
                            r.forEach(a, function (a) {
                                try {
                                    a.cancel(new f("All requests canceled."))
                                } catch (b) {}
                            })
                        } catch (b) {}
                    };
                    m && (n && m.doc.attachEvent) && n(m.global, "unload", function () {
                        h.cancelAll()
                    });
                    return h
                })
        },
        "dojo/request/util": function () {
            define("exports ../errors/RequestError ../errors/CancelError ../Deferred ../io-query ../_base/array ../_base/lang ../promise/Promise".split(" "),
                function (b, k, f, r, m, n, l, h) {
                    function e(a) {
                        return g(a)
                    }

                    function a(a) {
                        return void 0 !== a.data ? a.data : a.text
                    }
                    b.deepCopy = function (a, c) {
                        for (var e in c) {
                            var f = a[e],
                                g = c[e];
                            f !== g && (f && "object" === typeof f && g && "object" === typeof g ? b.deepCopy(f, g) : a[e] = g)
                        }
                        return a
                    };
                    b.deepCreate = function (a, c) {
                        c = c || {};
                        var e = l.delegate(a),
                            f, g;
                        for (f in a)(g = a[f]) && "object" === typeof g && (e[f] = b.deepCreate(g, c[f]));
                        return b.deepCopy(e, c)
                    };
                    var g = Object.freeze || function (a) {
                        return a
                    };
                    b.deferred = function (d, c, n, p, m, w) {
                        var t = new r(function (a) {
                            c &&
                                c(t, d);
                            return !a || !(a instanceof k) && !(a instanceof f) ? new f("Request canceled", d) : a
                        });
                        t.response = d;
                        t.isValid = n;
                        t.isReady = p;
                        t.handleResponse = m;
                        n = t.then(e).otherwise(function (a) {
                            a.response = d;
                            throw a;
                        });
                        b.notify && n.then(l.hitch(b.notify, "emit", "load"), l.hitch(b.notify, "emit", "error"));
                        p = n.then(a);
                        m = new h;
                        for (var q in p) p.hasOwnProperty(q) && (m[q] = p[q]);
                        m.response = n;
                        g(m);
                        w && t.then(function (a) {
                            w.call(t, a)
                        }, function (a) {
                            w.call(t, d, a)
                        });
                        t.promise = m;
                        t.then = m.then;
                        return t
                    };
                    b.addCommonMethods = function (a, b) {
                        n.forEach(b || ["GET", "POST", "PUT", "DELETE"], function (b) {
                            a[("DELETE" === b ? "DEL" : b).toLowerCase()] = function (c, e) {
                                e = l.delegate(e || {});
                                e.method = b;
                                return a(c, e)
                            }
                        })
                    };
                    b.parseArgs = function (a, b, e) {
                        var f = b.data,
                            g = b.query;
                        if (f && !e && "object" === typeof f && !(f instanceof ArrayBuffer || f instanceof Blob)) b.data = m.objectToQuery(f);
                        g ? ("object" === typeof g && (g = m.objectToQuery(g)), b.preventCache && (g += (g ? "\x26" : "") + "request.preventCache\x3d" + +new Date)) : b.preventCache && (g = "request.preventCache\x3d" + +new Date);
                        a && g && (a += (~a.indexOf("?") ?
                            "\x26" : "?") + g);
                        return {
                            url: a,
                            options: b,
                            getHeader: function (a) {
                                return null
                            }
                        }
                    };
                    b.checkStatus = function (a) {
                        a = a || 0;
                        return 200 <= a && 300 > a || 304 === a || 1223 === a || !a
                    }
                })
        },
        "dojo/errors/RequestError": function () {
            define(["./create"], function (b) {
                return b("RequestError", function (b, f) {
                    this.response = f
                })
            })
        },
        "dojo/errors/RequestTimeoutError": function () {
            define(["./create", "./RequestError"], function (b, k) {
                return b("RequestTimeoutError", null, k, {
                    dojoType: "timeout"
                })
            })
        },
        "dojo/request/xhr": function () {
            define(["../errors/RequestError",
"./watch", "./handlers", "./util", "../has"], function (b, k, f, r, m) {
                function n(a, c) {
                    var d = a.xhr;
                    a.status = a.xhr.status;
                    try {
                        a.text = d.responseText
                    } catch (e) {}
                    "xml" === a.options.handleAs && (a.data = d.responseXML);
                    if (!c) try {
                        f(a)
                    } catch (g) {
                        c = g
                    }
                    var h;
                    if (c) this.reject(c);
                    else {
                        try {
                            f(a)
                        } catch (p) {
                            h = p
                        }
                        r.checkStatus(d.status) ? h ? this.reject(h) : this.resolve(a) : (c = h ? new b("Unable to load " + a.url + " status: " + d.status + " and an error in handleAs: transformation of response", a) : new b("Unable to load " + a.url + " status: " + d.status,
                            a), this.reject(c))
                    }
                }

                function l(a) {
                    return this.xhr.getResponseHeader(a)
                }

                function h(f, q, v) {
                    var w = m("native-formdata") && q && q.data && q.data instanceof FormData,
                        u = r.parseArgs(f, r.deepCreate(p, q), w);
                    f = u.url;
                    q = u.options;
                    var x, A = r.deferred(u, c, a, g, n, function () {
                            x && x()
                        }),
                        C = u.xhr = h._create();
                    if (!C) return A.cancel(new b("XHR was not created")), v ? A : A.promise;
                    u.getHeader = l;
                    d && (x = d(C, A, u));
                    var H = q.data,
                        P = !q.sync,
                        L = q.method;
                    try {
                        C.open(L, f, P, q.user || s, q.password || s);
                        q.withCredentials && (C.withCredentials = q.withCredentials);
                        m("native-response-type") && q.handleAs in e && (C.responseType = e[q.handleAs]);
                        var E = q.headers;
                        f = w ? !1 : "application/x-www-form-urlencoded";
                        if (E)
                            for (var O in E) "content-type" === O.toLowerCase() ? f = E[O] : E[O] && C.setRequestHeader(O, E[O]);
                        f && !1 !== f && C.setRequestHeader("Content-Type", f);
                        (!E || !("X-Requested-With" in E)) && C.setRequestHeader("X-Requested-With", "XMLHttpRequest");
                        r.notify && r.notify.emit("send", u, A.promise.cancel);
                        C.send(H)
                    } catch (Q) {
                        A.reject(Q)
                    }
                    k(A);
                    C = null;
                    return v ? A : A.promise
                }
                m.add("native-xhr", function () {
                    return "undefined" !==
                        typeof XMLHttpRequest
                });
                m.add("dojo-force-activex-xhr", function () {
                    return m("activex") && "file:" === window.location.protocol
                });
                m.add("native-xhr2", function () {
                    if (m("native-xhr") && !m("dojo-force-activex-xhr")) {
                        var a = new XMLHttpRequest;
                        return "undefined" !== typeof a.addEventListener && ("undefined" === typeof opera || "undefined" !== typeof a.upload)
                    }
                });
                m.add("native-formdata", function () {
                    return "undefined" !== typeof FormData
                });
                m.add("native-response-type", function () {
                    return m("native-xhr") && "undefined" !== typeof (new XMLHttpRequest).responseType
                });
                m.add("native-xhr2-blob", function () {
                    if (m("native-response-type")) {
                        var a = new XMLHttpRequest;
                        a.open("GET", "/", !0);
                        a.responseType = "blob";
                        var b = a.responseType;
                        a.abort();
                        return "blob" === b
                    }
                });
                var e = {
                        blob: m("native-xhr2-blob") ? "blob" : "arraybuffer",
                        document: "document",
                        arraybuffer: "arraybuffer"
                    },
                    a, g, d, c;
                m("native-xhr2") ? (a = function (a) {
                    return !this.isFulfilled()
                }, c = function (a, b) {
                    b.xhr.abort()
                }, d = function (a, c, d) {
                    function e(a) {
                        c.handleResponse(d)
                    }

                    function f(a) {
                        a = new b("Unable to load " + d.url + " status: " + a.target.status,
                            d);
                        c.handleResponse(d, a)
                    }

                    function g(a) {
                        a.lengthComputable ? (d.loaded = a.loaded, d.total = a.total, c.progress(d)) : 3 === d.xhr.readyState && (d.loaded = "loaded" in a ? a.loaded : a.position, c.progress(d))
                    }
                    a.addEventListener("load", e, !1);
                    a.addEventListener("error", f, !1);
                    a.addEventListener("progress", g, !1);
                    return function () {
                        a.removeEventListener("load", e, !1);
                        a.removeEventListener("error", f, !1);
                        a.removeEventListener("progress", g, !1);
                        a = null
                    }
                }) : (a = function (a) {
                        return a.xhr.readyState
                    }, g = function (a) {
                        return 4 === a.xhr.readyState
                    },
                    c = function (a, b) {
                        var c = b.xhr,
                            d = typeof c.abort;
                        ("function" === d || "object" === d || "unknown" === d) && c.abort()
                    });
                var s, p = {
                    data: null,
                    query: null,
                    sync: !1,
                    method: "GET"
                };
                h._create = function () {
                    throw Error("XMLHTTP not available");
                };
                if (m("native-xhr") && !m("dojo-force-activex-xhr")) h._create = function () {
                    return new XMLHttpRequest
                };
                else if (m("activex")) try {
                    new ActiveXObject("Msxml2.XMLHTTP"), h._create = function () {
                        return new ActiveXObject("Msxml2.XMLHTTP")
                    }
                } catch (u) {
                    try {
                        new ActiveXObject("Microsoft.XMLHTTP"), h._create =
                            function () {
                                return new ActiveXObject("Microsoft.XMLHTTP")
                            }
                    } catch (w) {}
                }
                r.addCommonMethods(h);
                return h
            })
        },
        "dojo/request/handlers": function () {
            define(["../json", "../_base/kernel", "../_base/array", "../has", "../selector/_loader"], function (b, k, f, r) {
                function m(b) {
                    var d = a[b.options.handleAs];
                    b.data = d ? d(b) : b.data || b.text;
                    return b
                }
                r.add("activex", "undefined" !== typeof ActiveXObject);
                r.add("dom-parser", function (a) {
                    return "DOMParser" in a
                });
                var n;
                if (r("activex")) {
                    var l = ["Msxml2.DOMDocument.6.0", "Msxml2.DOMDocument.4.0",
"MSXML2.DOMDocument.3.0", "MSXML.DOMDocument"],
                        h;
                    n = function (a) {
                        function b(a) {
                            try {
                                var d = new ActiveXObject(a);
                                d.async = !1;
                                d.loadXML(e);
                                c = d;
                                h = a
                            } catch (f) {
                                return !1
                            }
                            return !0
                        }
                        var c = a.data,
                            e = a.text;
                        c && (r("dom-qsa2.1") && !c.querySelectorAll && r("dom-parser")) && (c = (new DOMParser).parseFromString(e, "application/xml"));
                        if (!c || !c.documentElement)(!h || !b(h)) && f.some(l, b);
                        return c
                    }
                }
                var e = function (a) {
                        return !r("native-xhr2-blob") && "blob" === a.options.handleAs && "undefined" !== typeof Blob ? new Blob([a.xhr.response], {
                                type: a.xhr.getResponseHeader("Content-Type")
                            }) :
                            a.xhr.response
                    },
                    a = {
                        javascript: function (a) {
                            return k.eval(a.text || "")
                        },
                        json: function (a) {
                            return b.parse(a.text || null)
                        },
                        xml: n,
                        blob: e,
                        arraybuffer: e,
                        document: e
                    };
                m.register = function (b, d) {
                    a[b] = d
                };
                return m
            })
        },
        "dojo/selector/_loader": function () {
            define(["../has", "require"], function (b, k) {
                if ("undefined" !== typeof document) {
                    var f = document.createElement("div");
                    b.add("dom-qsa2.1", !!f.querySelectorAll);
                    b.add("dom-qsa3", function () {
                        try {
                            return f.innerHTML = "\x3cp class\x3d'TEST'\x3e\x3c/p\x3e", 1 == f.querySelectorAll(".TEST:empty").length
                        } catch (b) {}
                    })
                }
                var r;
                return {
                    load: function (f, n, l, h) {
                        if (h && h.isBuild) l();
                        else {
                            h = k;
                            f = "default" == f ? b("config-selectorEngine") || "css3" : f;
                            f = "css2" == f || "lite" == f ? "./lite" : "css2.1" == f ? b("dom-qsa2.1") ? "./lite" : "./acme" : "css3" == f ? b("dom-qsa3") ? "./lite" : "./acme" : "acme" == f ? "./acme" : (h = n) && f;
                            if ("?" == f.charAt(f.length - 1)) {
                                f = f.substring(0, f.length - 1);
                                var e = !0
                            }
                            if (e && (b("dom-compliant-qsa") || r)) return l(r);
                            h([f], function (a) {
                                "./lite" != f && (r = a);
                                l(a)
                            })
                        }
                    }
                }
            })
        },
        "dojo/main": function () {
            define("./_base/kernel ./has require ./sniff ./_base/lang ./_base/array ./_base/config ./ready ./_base/declare ./_base/connect ./_base/Deferred ./_base/json ./_base/Color ./has!dojo-firebug?./_firebug/firebug ./_base/browser ./_base/loader".split(" "),
                function (b, k, f, r, m, n, l, h) {
                    l.isDebug && f(["./_firebug/firebug"]);
                    var e = l.require;
                    e && (e = n.map(m.isArray(e) ? e : [e], function (a) {
                        return a.replace(/\./g, "/")
                    }), b.isAsync ? f(e) : h(1, function () {
                        f(e)
                    }));
                    return b
                })
        },
        "dojo/ready": function () {
            define(["./_base/kernel", "./has", "require", "./domReady", "./_base/lang"], function (b, k, f, r, m) {
                var n = 0,
                    l = [],
                    h = 0;
                k = function () {
                    n = 1;
                    b._postLoad = b.config.afterOnLoad = !0;
                    e()
                };
                var e = function () {
                    if (!h) {
                        for (h = 1; n && (!r || 0 == r._Q.length) && (f.idle ? f.idle() : 1) && l.length;) {
                            var a = l.shift();
                            try {
                                a()
                            } catch (b) {
                                if (b.info =
                                    b.message, f.signal) f.signal("error", b);
                                else throw b;
                            }
                        }
                        h = 0
                    }
                };
                f.on && f.on("idle", e);
                r && (r._onQEmpty = e);
                var a = b.ready = b.addOnLoad = function (a, c, f) {
                        var g = m._toArray(arguments);
                        "number" != typeof a ? (f = c, c = a, a = 1E3) : g.shift();
                        f = f ? m.hitch.apply(b, g) : function () {
                            c()
                        };
                        f.priority = a;
                        for (g = 0; g < l.length && a >= l[g].priority; g++);
                        l.splice(g, 0, f);
                        e()
                    },
                    g = b.config.addOnLoad;
                if (g) a[m.isArray(g) ? "apply" : "call"](b, g);
                b.config.parseOnLoad && !b.isAsync && a(99, function () {
                    b.parser || (b.deprecated("Add explicit require(['dojo/parser']);",
                        "", "2.0"), f(["dojo/parser"]))
                });
                r ? r(k) : k();
                return a
            })
        },
        "dojo/domReady": function () {
            define(["./has"], function (b) {
                function k(a) {
                    e.push(a);
                    h && f()
                }

                function f() {
                    if (!a) {
                        for (a = !0; e.length;) try {
                            e.shift()(m)
                        } catch (b) {
                            console.error(b, "in domReady callback", b.stack)
                        }
                        a = !1;
                        k._onQEmpty()
                    }
                }
                var r = function () {
                        return this
                    }(),
                    m = document,
                    n = {
                        loaded: 1,
                        complete: 1
                    },
                    l = "string" != typeof m.readyState,
                    h = !!n[m.readyState],
                    e = [],
                    a;
                k.load = function (a, b, c) {
                    k(c)
                };
                k._Q = e;
                k._onQEmpty = function () {};
                l && (m.readyState = "loading");
                if (!h) {
                    var g = [],
                        d = function (a) {
                            a = a || r.event;
                            h || "readystatechange" == a.type && !n[m.readyState] || (l && (m.readyState = "complete"), h = 1, f())
                        },
                        c = function (a, b) {
                            a.addEventListener(b, d, !1);
                            e.push(function () {
                                a.removeEventListener(b, d, !1)
                            })
                        };
                    if (!b("dom-addeventlistener")) {
                        var c = function (a, b) {
                                b = "on" + b;
                                a.attachEvent(b, d);
                                e.push(function () {
                                    a.detachEvent(b, d)
                                })
                            },
                            s = m.createElement("div");
                        try {
                            s.doScroll && null === r.frameElement && g.push(function () {
                                try {
                                    return s.doScroll("left"), 1
                                } catch (a) {}
                            })
                        } catch (p) {}
                    }
                    c(m, "DOMContentLoaded");
                    c(r, "load");
                    "onreadystatechange" in m ? c(m, "readystatechange") : l || g.push(function () {
                        return n[m.readyState]
                    });
                    if (g.length) {
                        var u = function () {
                            if (!h) {
                                for (var a = g.length; a--;)
                                    if (g[a]()) {
                                        d("poller");
                                        return
                                    }
                                setTimeout(u, 30)
                            }
                        };
                        u()
                    }
                }
                return k
            })
        },
        "dojo/_base/declare": function () {
            define(["./kernel", "../has", "./lang"], function (b, k, f) {
                function r(a, b) {
                    throw Error("declare" + (b ? " " + b : "") + ": " + a);
                }

                function m(a, b) {
                    for (var c = [], d = [{
                            cls: 0,
                            refs: []
                        }], e = {}, f = 1, g = a.length, q = 0, h, p, l, n, k; q < g; ++q) {
                        (h = a[q]) ? "[object Function]" != y.call(h) &&
                            r("mixin #" + q + " is not a callable constructor.", b): r("mixin #" + q + " is unknown. Did you use dojo.require to pull it in?", b);
                        p = h._meta ? h._meta.bases : [h];
                        l = 0;
                        for (h = p.length - 1; 0 <= h; --h) n = p[h].prototype, n.hasOwnProperty("declaredClass") || (n.declaredClass = "uniqName_" + A++), n = n.declaredClass, e.hasOwnProperty(n) || (e[n] = {
                            count: 0,
                            refs: [],
                            cls: p[h]
                        }, ++f), n = e[n], l && l !== n && (n.refs.push(l), ++l.count), l = n;
                        ++l.count;
                        d[0].refs.push(l)
                    }
                    for (; d.length;) {
                        l = d.pop();
                        c.push(l.cls);
                        for (--f; k = l.refs, 1 == k.length;) {
                            l = k[0];
                            if (!l ||
                                --l.count) {
                                l = 0;
                                break
                            }
                            c.push(l.cls);
                            --f
                        }
                        if (l) {
                            q = 0;
                            for (g = k.length; q < g; ++q) l = k[q], --l.count || d.push(l)
                        }
                    }
                    f && r("can't build consistent linearization", b);
                    h = a[0];
                    c[0] = h ? h._meta && h === c[c.length - h._meta.bases.length] ? h._meta.bases.length : 1 : 0;
                    return c
                }

                function n(a, b, c) {
                    var d, e, f, g, q, h, l, p = this._inherited = this._inherited || {};
                    "string" == typeof a && (d = a, a = b, b = c);
                    c = 0;
                    g = a.callee;
                    (d = d || g.nom) || r("can't deduce a name to call inherited()", this.declaredClass);
                    q = this.constructor._meta;
                    f = q.bases;
                    l = p.p;
                    if (d != C) {
                        if (p.c !==
                            g && (l = 0, h = f[0], q = h._meta, q.hidden[d] !== g)) {
                            (e = q.chains) && "string" == typeof e[d] && r("calling chained method with inherited: " + d, this.declaredClass);
                            do
                                if (q = h._meta, e = h.prototype, q && (e[d] === g && e.hasOwnProperty(d) || q.hidden[d] === g)) break;
                            while (h = f[++l]);
                            l = h ? l : -1
                        }
                        if (h = f[++l])
                            if (e = h.prototype, h._meta && e.hasOwnProperty(d)) c = e[d];
                            else {
                                g = z[d];
                                do
                                    if (e = h.prototype, (c = e[d]) && (h._meta ? e.hasOwnProperty(d) : c !== g)) break;
                                while (h = f[++l])
                            }
                        c = h && c || z[d]
                    } else {
                        if (p.c !== g && (l = 0, (q = f[0]._meta) && q.ctor !== g)) {
                            e = q.chains;
                            for ((!e ||
                                    "manual" !== e.constructor) && r("calling chained constructor with inherited", this.declaredClass);
                                (h = f[++l]) && !((q = h._meta) && q.ctor === g););
                            l = h ? l : -1
                        }
                        for (;
                            (h = f[++l]) && !(c = (q = h._meta) ? q.ctor : h););
                        c = h && c
                    }
                    p.c = c;
                    p.p = l;
                    if (c) return !0 === b ? c : c.apply(this, b || a)
                }

                function l(a, b) {
                    return "string" == typeof a ? this.__inherited(a, b, !0) : this.__inherited(a, !0)
                }

                function h(a, b, c) {
                    var d = this.getInherited(a, b);
                    if (d) return d.apply(this, c || b || a)
                }

                function e(a) {
                    for (var b = this.constructor._meta.bases, c = 0, d = b.length; c < d; ++c)
                        if (b[c] ===
                            a) return !0;
                    return this instanceof a
                }

                function a(a, b) {
                    for (var c in b) c != C && b.hasOwnProperty(c) && (a[c] = b[c]);
                    if (k("bug-for-in-skips-shadowed"))
                        for (var d = f._extraNames, e = d.length; e;) c = d[--e], c != C && b.hasOwnProperty(c) && (a[c] = b[c])
                }

                function g(a) {
                    q.safeMixin(this.prototype, a);
                    return this
                }

                function d(a, b) {
                    a instanceof Array || "function" == typeof a || (b = a, a = void 0);
                    b = b || {};
                    a = a || [];
                    return q([this].concat(a), b)
                }

                function c(a, b) {
                    return function () {
                        var c = arguments,
                            d = c,
                            e = c[0],
                            f, g;
                        g = a.length;
                        var q;
                        if (!(this instanceof c.callee)) return t(c);
                        if (b && (e && e.preamble || this.preamble)) {
                            q = Array(a.length);
                            q[0] = c;
                            for (f = 0;;) {
                                if (e = c[0])(e = e.preamble) && (c = e.apply(this, c) || c);
                                e = a[f].prototype;
                                (e = e.hasOwnProperty("preamble") && e.preamble) && (c = e.apply(this, c) || c);
                                if (++f == g) break;
                                q[f] = c
                            }
                        }
                        for (f = g - 1; 0 <= f; --f) e = a[f], (e = (g = e._meta) ? g.ctor : e) && e.apply(this, q ? q[f] : c);
                        (e = this.postscript) && e.apply(this, d)
                    }
                }

                function s(a, b) {
                    return function () {
                        var c = arguments,
                            d = c,
                            e = c[0];
                        if (!(this instanceof c.callee)) return t(c);
                        b && (e && (e = e.preamble) && (d = e.apply(this,
                            d) || d), (e = this.preamble) && e.apply(this, d));
                        a && a.apply(this, c);
                        (e = this.postscript) && e.apply(this, c)
                    }
                }

                function p(a) {
                    return function () {
                        var b = arguments,
                            c = 0,
                            d, e;
                        if (!(this instanceof b.callee)) return t(b);
                        for (; d = a[c]; ++c)
                            if (d = (e = d._meta) ? e.ctor : d) {
                                d.apply(this, b);
                                break
                            }(d = this.postscript) && d.apply(this, b)
                    }
                }

                function u(a, b, c) {
                    return function () {
                        var d, e, f = 0,
                            g = 1;
                        c && (f = b.length - 1, g = -1);
                        for (; d = b[f]; f += g) e = d._meta, (d = (e ? e.hidden : d.prototype)[a]) && d.apply(this, arguments)
                    }
                }

                function w(a) {
                    x.prototype = a.prototype;
                    a =
                        new x;
                    x.prototype = null;
                    return a
                }

                function t(a) {
                    var b = a.callee,
                        c = w(b);
                    b.apply(c, a);
                    return c
                }

                function q(b, h, t) {
                    "string" != typeof b && (t = h, h = b, b = "");
                    t = t || {};
                    var x, A, D, F, J, B, G, T = 1,
                        ha = h;
                    "[object Array]" == y.call(h) ? (B = m(h, b), D = B[0], T = B.length - D, h = B[T]) : (B = [0], h ? "[object Function]" == y.call(h) ? (D = h._meta, B = B.concat(D ? D.bases : h)) : r("base class is not a callable constructor.", b) : null !== h && r("unknown base class. Did you use dojo.require to pull it in?", b));
                    if (h)
                        for (A = T - 1;; --A) {
                            x = w(h);
                            if (!A) break;
                            D = B[A];
                            (D._meta ?
                                a : v)(x, D.prototype);
                            F = k("csp-restrictions") ? function () {} : new Function;
                            F.superclass = h;
                            F.prototype = x;
                            h = x.constructor = F
                        } else x = {};
                    q.safeMixin(x, t);
                    D = t.constructor;
                    D !== z.constructor && (D.nom = C, x.constructor = D);
                    for (A = T - 1; A; --A)(D = B[A]._meta) && D.chains && (G = v(G || {}, D.chains));
                    x["-chains-"] && (G = v(G || {}, x["-chains-"]));
                    D = !G || !G.hasOwnProperty(C);
                    B[0] = F = G && "manual" === G.constructor ? p(B) : 1 == B.length ? s(t.constructor, D) : c(B, D);
                    F._meta = {
                        bases: B,
                        hidden: t,
                        chains: G,
                        parents: ha,
                        ctor: t.constructor
                    };
                    F.superclass = h && h.prototype;
                    F.extend = g;
                    F.createSubclass = d;
                    F.prototype = x;
                    x.constructor = F;
                    x.getInherited = l;
                    x.isInstanceOf = e;
                    x.inherited = H;
                    x.__inherited = n;
                    b && (x.declaredClass = b, f.setObject(b, F));
                    if (G)
                        for (J in G) x[J] && ("string" == typeof G[J] && J != C) && (D = x[J] = u(J, B, "after" === G[J]), D.nom = J);
                    return F
                }
                var v = f.mixin,
                    z = Object.prototype,
                    y = z.toString,
                    x, A = 0,
                    C = "constructor";
                x = k("csp-restrictions") ? function () {} : new Function;
                var H = b.config.isDebug ? h : n;
                b.safeMixin = q.safeMixin = function (a, b) {
                    var c, d;
                    for (c in b)
                        if (d = b[c], (d !== z[c] || !(c in z)) && c !=
                            C) "[object Function]" == y.call(d) && (d.nom = c), a[c] = d;
                    if (k("bug-for-in-skips-shadowed") && b)
                        for (var e = f._extraNames, g = e.length; g;)
                            if (c = e[--g], d = b[c], (d !== z[c] || !(c in z)) && c != C) "[object Function]" == y.call(d) && (d.nom = c), a[c] = d;
                    return a
                };
                return b.declare = q
            })
        },
        "dojo/_base/connect": function () {
            define("./kernel ../on ../topic ../aspect ./event ../mouse ./sniff ./lang ../keys".split(" "), function (b, k, f, r, m, n, l, h) {
                function e(a, c, d, e, f) {
                    e = h.hitch(d, e);
                    if (!a || !a.addEventListener && !a.attachEvent) return r.after(a ||
                        b.global, c, e, !0);
                    "string" == typeof c && "on" == c.substring(0, 2) && (c = c.substring(2));
                    a || (a = b.global);
                    if (!f) switch (c) {
                    case "keypress":
                        c = s;
                        break;
                    case "mouseenter":
                        c = n.enter;
                        break;
                    case "mouseleave":
                        c = n.leave
                    }
                    return k(a, c, e, f)
                }

                function a(a) {
                    a.keyChar = a.charCode ? String.fromCharCode(a.charCode) : "";
                    a.charOrCode = a.keyChar || a.keyCode
                }
                l.add("events-keypress-typed", function () {
                    var a = {
                        charCode: 0
                    };
                    try {
                        a = document.createEvent("KeyboardEvent"), (a.initKeyboardEvent || a.initKeyEvent).call(a, "keypress", !0, !0, null, !1, !1, !1, !1, 9, 3)
                    } catch (b) {}
                    return 0 == a.charCode && !l("opera")
                });
                var g = {
                        106: 42,
                        111: 47,
                        186: 59,
                        187: 43,
                        188: 44,
                        189: 45,
                        190: 46,
                        191: 47,
                        192: 96,
                        219: 91,
                        220: 92,
                        221: 93,
                        222: 39,
                        229: 113
                    },
                    d = l("mac") ? "metaKey" : "ctrlKey",
                    c = function (b, c) {
                        var d = h.mixin({}, b, c);
                        a(d);
                        d.preventDefault = function () {
                            b.preventDefault()
                        };
                        d.stopPropagation = function () {
                            b.stopPropagation()
                        };
                        return d
                    },
                    s;
                s = l("events-keypress-typed") ? function (a, b) {
                    var d = k(a, "keydown", function (a) {
                            var d = a.keyCode,
                                e = 13 != d && 32 != d && (27 != d || !l("ie")) && (48 > d || 90 < d) && (96 > d || 111 < d) && (186 >
                                    d || 192 < d) && (219 > d || 222 < d) && 229 != d;
                            if (e || a.ctrlKey) {
                                e = e ? 0 : d;
                                if (a.ctrlKey) {
                                    if (3 == d || 13 == d) return b.call(a.currentTarget, a);
                                    e = 95 < e && 106 > e ? e - 48 : !a.shiftKey && 65 <= e && 90 >= e ? e + 32 : g[e] || e
                                }
                                d = c(a, {
                                    type: "keypress",
                                    faux: !0,
                                    charCode: e
                                });
                                b.call(a.currentTarget, d);
                                if (l("ie")) try {
                                    a.keyCode = d.keyCode
                                } catch (f) {}
                            }
                        }),
                        e = k(a, "keypress", function (a) {
                            var d = a.charCode;
                            a = c(a, {
                                charCode: 32 <= d ? d : 0,
                                faux: !0
                            });
                            return b.call(this, a)
                        });
                    return {
                        remove: function () {
                            d.remove();
                            e.remove()
                        }
                    }
                } : l("opera") ? function (a, b) {
                    return k(a, "keypress",
                        function (a) {
                            var d = a.which;
                            3 == d && (d = 99);
                            d = 32 > d && !a.shiftKey ? 0 : d;
                            a.ctrlKey && (!a.shiftKey && 65 <= d && 90 >= d) && (d += 32);
                            return b.call(this, c(a, {
                                charCode: d
                            }))
                        })
                } : function (b, c) {
                    return k(b, "keypress", function (b) {
                        a(b);
                        return c.call(this, b)
                    })
                };
                var p = {
                    _keypress: s,
                    connect: function (a, b, c, d, f) {
                        var g = arguments,
                            h = [],
                            l = 0;
                        h.push("string" == typeof g[0] ? null : g[l++], g[l++]);
                        var p = g[l + 1];
                        h.push("string" == typeof p || "function" == typeof p ? g[l++] : null, g[l++]);
                        for (p = g.length; l < p; l++) h.push(g[l]);
                        return e.apply(this, h)
                    },
                    disconnect: function (a) {
                        a &&
                            a.remove()
                    },
                    subscribe: function (a, b, c) {
                        return f.subscribe(a, h.hitch(b, c))
                    },
                    publish: function (a, b) {
                        return f.publish.apply(f, [a].concat(b))
                    },
                    connectPublisher: function (a, b, c) {
                        var d = function () {
                            p.publish(a, arguments)
                        };
                        return c ? p.connect(b, c, d) : p.connect(b, d)
                    },
                    isCopyKey: function (a) {
                        return a[d]
                    }
                };
                p.unsubscribe = p.disconnect;
                h.mixin(b, p);
                return p
            })
        },
        "dojo/topic": function () {
            define(["./Evented"], function (b) {
                var k = new b;
                return {
                    publish: function (b, r) {
                        return k.emit.apply(k, arguments)
                    },
                    subscribe: function (b, r) {
                        return k.on.apply(k,
                            arguments)
                    }
                }
            })
        },
        "dojo/_base/event": function () {
            define(["./kernel", "../on", "../has", "../dom-geometry"], function (b, k, f, r) {
                if (k._fixEvent) {
                    var m = k._fixEvent;
                    k._fixEvent = function (b, f) {
                        (b = m(b, f)) && r.normalizeEvent(b);
                        return b
                    }
                }
                var n = {
                    fix: function (b, f) {
                        return k._fixEvent ? k._fixEvent(b, f) : b
                    },
                    stop: function (b) {
                        f("dom-addeventlistener") || b && b.preventDefault ? (b.preventDefault(), b.stopPropagation()) : (b = b || window.event, b.cancelBubble = !0, k._preventDefault.call(b))
                    }
                };
                b.fixEvent = n.fix;
                b.stopEvent = n.stop;
                return n
            })
        },
        "dojo/dom-geometry": function () {
            define(["./sniff", "./_base/window", "./dom", "./dom-style"], function (b, k, f, r) {
                function m(a, b, d, c, e, f) {
                    f = f || "px";
                    a = a.style;
                    isNaN(b) || (a.left = b + f);
                    isNaN(d) || (a.top = d + f);
                    0 <= c && (a.width = c + f);
                    0 <= e && (a.height = e + f)
                }

                function n(a) {
                    return "button" == a.tagName.toLowerCase() || "input" == a.tagName.toLowerCase() && "button" == (a.getAttribute("type") || "").toLowerCase()
                }

                function l(a) {
                    return "border-box" == h.boxModel || "table" == a.tagName.toLowerCase() || n(a)
                }
                var h = {
                    boxModel: "content-box"
                };
                b("ie") &&
                    (h.boxModel = "BackCompat" == document.compatMode ? "border-box" : "content-box");
                h.getPadExtents = function (a, b) {
                    a = f.byId(a);
                    var d = b || r.getComputedStyle(a),
                        c = r.toPixelValue,
                        e = c(a, d.paddingLeft),
                        h = c(a, d.paddingTop),
                        l = c(a, d.paddingRight),
                        d = c(a, d.paddingBottom);
                    return {
                        l: e,
                        t: h,
                        r: l,
                        b: d,
                        w: e + l,
                        h: h + d
                    }
                };
                h.getBorderExtents = function (a, b) {
                    a = f.byId(a);
                    var d = r.toPixelValue,
                        c = b || r.getComputedStyle(a),
                        e = "none" != c.borderLeftStyle ? d(a, c.borderLeftWidth) : 0,
                        h = "none" != c.borderTopStyle ? d(a, c.borderTopWidth) : 0,
                        l = "none" != c.borderRightStyle ?
                        d(a, c.borderRightWidth) : 0,
                        d = "none" != c.borderBottomStyle ? d(a, c.borderBottomWidth) : 0;
                    return {
                        l: e,
                        t: h,
                        r: l,
                        b: d,
                        w: e + l,
                        h: h + d
                    }
                };
                h.getPadBorderExtents = function (a, b) {
                    a = f.byId(a);
                    var d = b || r.getComputedStyle(a),
                        c = h.getPadExtents(a, d),
                        d = h.getBorderExtents(a, d);
                    return {
                        l: c.l + d.l,
                        t: c.t + d.t,
                        r: c.r + d.r,
                        b: c.b + d.b,
                        w: c.w + d.w,
                        h: c.h + d.h
                    }
                };
                h.getMarginExtents = function (a, b) {
                    a = f.byId(a);
                    var d = b || r.getComputedStyle(a),
                        c = r.toPixelValue,
                        e = c(a, d.marginLeft),
                        h = c(a, d.marginTop),
                        l = c(a, d.marginRight),
                        d = c(a, d.marginBottom);
                    return {
                        l: e,
                        t: h,
                        r: l,
                        b: d,
                        w: e + l,
                        h: h + d
                    }
                };
                h.getMarginBox = function (a, e) {
                    a = f.byId(a);
                    var d = e || r.getComputedStyle(a),
                        c = h.getMarginExtents(a, d),
                        l = a.offsetLeft - c.l,
                        n = a.offsetTop - c.t,
                        k = a.parentNode,
                        m = r.toPixelValue;
                    if (b("mozilla")) {
                        var t = parseFloat(d.left),
                            d = parseFloat(d.top);
                        !isNaN(t) && !isNaN(d) ? (l = t, n = d) : k && k.style && (k = r.getComputedStyle(k), "visible" != k.overflow && (l += "none" != k.borderLeftStyle ? m(a, k.borderLeftWidth) : 0, n += "none" != k.borderTopStyle ? m(a, k.borderTopWidth) : 0))
                    } else if ((b("opera") || 8 == b("ie") && !b("quirks")) &&
                        k) k = r.getComputedStyle(k), l -= "none" != k.borderLeftStyle ? m(a, k.borderLeftWidth) : 0, n -= "none" != k.borderTopStyle ? m(a, k.borderTopWidth) : 0;
                    return {
                        l: l,
                        t: n,
                        w: a.offsetWidth + c.w,
                        h: a.offsetHeight + c.h
                    }
                };
                h.getContentBox = function (a, e) {
                    a = f.byId(a);
                    var d = e || r.getComputedStyle(a),
                        c = a.clientWidth,
                        l = h.getPadExtents(a, d),
                        n = h.getBorderExtents(a, d);
                    c ? (d = a.clientHeight, n.w = n.h = 0) : (c = a.offsetWidth, d = a.offsetHeight);
                    b("opera") && (l.l += n.l, l.t += n.t);
                    return {
                        l: l.l,
                        t: l.t,
                        w: c - l.w - n.w,
                        h: d - l.h - n.h
                    }
                };
                h.setContentSize = function (a, b,
                    d) {
                    a = f.byId(a);
                    var c = b.w;
                    b = b.h;
                    l(a) && (d = h.getPadBorderExtents(a, d), 0 <= c && (c += d.w), 0 <= b && (b += d.h));
                    m(a, NaN, NaN, c, b)
                };
                var e = {
                    l: 0,
                    t: 0,
                    w: 0,
                    h: 0
                };
                h.setMarginBox = function (a, g, d) {
                    a = f.byId(a);
                    var c = d || r.getComputedStyle(a);
                    d = g.w;
                    var k = g.h,
                        p = l(a) ? e : h.getPadBorderExtents(a, c),
                        c = h.getMarginExtents(a, c);
                    if (b("webkit") && n(a)) {
                        var u = a.style;
                        0 <= d && !u.width && (u.width = "4px");
                        0 <= k && !u.height && (u.height = "4px")
                    }
                    0 <= d && (d = Math.max(d - p.w - c.w, 0));
                    0 <= k && (k = Math.max(k - p.h - c.h, 0));
                    m(a, g.l, g.t, d, k)
                };
                h.isBodyLtr = function (a) {
                    a =
                        a || k.doc;
                    return "ltr" == (k.body(a).dir || a.documentElement.dir || "ltr").toLowerCase()
                };
                h.docScroll = function (a) {
                    a = a || k.doc;
                    var e = k.doc.parentWindow || k.doc.defaultView;
                    return "pageXOffset" in e ? {
                        x: e.pageXOffset,
                        y: e.pageYOffset
                    } : (e = b("quirks") ? k.body(a) : a.documentElement) && {
                        x: h.fixIeBiDiScrollLeft(e.scrollLeft || 0, a),
                        y: e.scrollTop || 0
                    }
                };
                h.getIeDocumentElementOffset = function (a) {
                    return {
                        x: 0,
                        y: 0
                    }
                };
                h.fixIeBiDiScrollLeft = function (a, e) {
                    e = e || k.doc;
                    var d = b("ie");
                    if (d && !h.isBodyLtr(e)) {
                        var c = b("quirks"),
                            f = c ? k.body(e) :
                            e.documentElement,
                            l = k.global;
                        6 == d && (!c && l.frameElement && f.scrollHeight > f.clientHeight) && (a += f.clientLeft);
                        return 8 > d || c ? a + f.clientWidth - f.scrollWidth : -a
                    }
                    return a
                };
                h.position = function (a, e) {
                    a = f.byId(a);
                    var d = k.body(a.ownerDocument),
                        c = a.getBoundingClientRect(),
                        c = {
                            x: c.left,
                            y: c.top,
                            w: c.right - c.left,
                            h: c.bottom - c.top
                        };
                    9 > b("ie") && (c.x -= b("quirks") ? d.clientLeft + d.offsetLeft : 0, c.y -= b("quirks") ? d.clientTop + d.offsetTop : 0);
                    e && (d = h.docScroll(a.ownerDocument), c.x += d.x, c.y += d.y);
                    return c
                };
                h.getMarginSize = function (a,
                    b) {
                    a = f.byId(a);
                    var d = h.getMarginExtents(a, b || r.getComputedStyle(a)),
                        c = a.getBoundingClientRect();
                    return {
                        w: c.right - c.left + d.w,
                        h: c.bottom - c.top + d.h
                    }
                };
                h.normalizeEvent = function (a) {
                    "layerX" in a || (a.layerX = a.offsetX, a.layerY = a.offsetY);
                    if (!("pageX" in a)) {
                        var e = a.target,
                            e = e && e.ownerDocument || document,
                            d = b("quirks") ? e.body : e.documentElement;
                        a.pageX = a.clientX + h.fixIeBiDiScrollLeft(d.scrollLeft || 0, e);
                        a.pageY = a.clientY + (d.scrollTop || 0)
                    }
                };
                return h
            })
        },
        "dojo/dom-style": function () {
            define(["./sniff", "./dom"], function (b,
                k) {
                function f(b, d, e) {
                    d = d.toLowerCase();
                    if ("auto" == e) {
                        if ("height" == d) return b.offsetHeight;
                        if ("width" == d) return b.offsetWidth
                    }
                    if ("fontweight" == d) switch (e) {
                    case 700:
                        return "bold";
                    default:
                        return "normal"
                    }
                    d in a || (a[d] = g.test(d));
                    return a[d] ? n(b, e) : e
                }
                var r, m = {};
                r = b("webkit") ? function (a) {
                    var b;
                    if (1 == a.nodeType) {
                        var d = a.ownerDocument.defaultView;
                        b = d.getComputedStyle(a, null);
                        !b && a.style && (a.style.display = "", b = d.getComputedStyle(a, null))
                    }
                    return b || {}
                } : b("ie") && (9 > b("ie") || b("quirks")) ? function (a) {
                    return 1 ==
                        a.nodeType && a.currentStyle ? a.currentStyle : {}
                } : function (a) {
                    return 1 == a.nodeType ? a.ownerDocument.defaultView.getComputedStyle(a, null) : {}
                };
                m.getComputedStyle = r;
                var n;
                n = b("ie") ? function (a, b) {
                    if (!b) return 0;
                    if ("medium" == b) return 4;
                    if (b.slice && "px" == b.slice(-2)) return parseFloat(b);
                    var d = a.style,
                        e = a.runtimeStyle,
                        f = d.left,
                        g = e.left;
                    e.left = a.currentStyle.left;
                    try {
                        d.left = b, b = d.pixelLeft
                    } catch (q) {
                        b = 0
                    }
                    d.left = f;
                    e.left = g;
                    return b
                } : function (a, b) {
                    return parseFloat(b) || 0
                };
                m.toPixelValue = n;
                var l = function (a, b) {
                        try {
                            return a.filters.item("DXImageTransform.Microsoft.Alpha")
                        } catch (d) {
                            return b ? {} : null
                        }
                    },
                    h = 9 > b("ie") || 10 > b("ie") && b("quirks") ? function (a) {
                        try {
                            return l(a).Opacity / 100
                        } catch (b) {
                            return 1
                        }
                    } : function (a) {
                        return r(a).opacity
                    },
                    e = 9 > b("ie") || 10 > b("ie") && b("quirks") ? function (a, b) {
                        "" === b && (b = 1);
                        var d = 100 * b;
                        1 === b ? (a.style.zoom = "", l(a) && (a.style.filter = a.style.filter.replace(/\s*progid:DXImageTransform.Microsoft.Alpha\([^\)]+?\)/i, ""))) : (a.style.zoom = 1, l(a) ? l(a, 1).Opacity = d : a.style.filter += " progid:DXImageTransform.Microsoft.Alpha(Opacity\x3d" + d + ")", l(a, 1).Enabled = !0);
                        if ("tr" == a.tagName.toLowerCase())
                            for (d =
                                a.firstChild; d; d = d.nextSibling) "td" == d.tagName.toLowerCase() && e(d, b);
                        return b
                    } : function (a, b) {
                        return a.style.opacity = b
                    },
                    a = {
                        left: !0,
                        top: !0
                    },
                    g = /margin|padding|width|height|max|min|offset/,
                    d = {
                        cssFloat: 1,
                        styleFloat: 1,
                        "float": 1
                    };
                m.get = function (a, b) {
                    var e = k.byId(a),
                        g = arguments.length;
                    if (2 == g && "opacity" == b) return h(e);
                    b = d[b] ? "cssFloat" in e.style ? "cssFloat" : "styleFloat" : b;
                    var l = m.getComputedStyle(e);
                    return 1 == g ? l : f(e, b, l[b] || e.style[b])
                };
                m.set = function (a, b, f) {
                    var g = k.byId(a),
                        h = arguments.length,
                        l = "opacity" ==
                        b;
                    b = d[b] ? "cssFloat" in g.style ? "cssFloat" : "styleFloat" : b;
                    if (3 == h) return l ? e(g, f) : g.style[b] = f;
                    for (var q in b) m.set(a, q, b[q]);
                    return m.getComputedStyle(g)
                };
                return m
            })
        },
        "dojo/mouse": function () {
            define(["./_base/kernel", "./on", "./has", "./dom", "./_base/window"], function (b, k, f, r, m) {
                function n(b, f) {
                    var e = function (a, e) {
                        return k(a, b, function (b) {
                            if (f) return f(b, e);
                            if (!r.isDescendant(b.relatedTarget, a)) return e.call(this, b)
                        })
                    };
                    e.bubble = function (a) {
                        return n(b, function (b, d) {
                            var c = a(b.target),
                                e = b.relatedTarget;
                            if (c && c != (e && 1 == e.nodeType && a(e))) return d.call(c, b)
                        })
                    };
                    return e
                }
                f.add("dom-quirks", m.doc && "BackCompat" == m.doc.compatMode);
                f.add("events-mouseenter", m.doc && "onmouseenter" in m.doc.createElement("div"));
                f.add("events-mousewheel", m.doc && "onmousewheel" in m.doc);
                m = f("dom-quirks") && f("ie") || !f("dom-addeventlistener") ? {
                    LEFT: 1,
                    MIDDLE: 4,
                    RIGHT: 2,
                    isButton: function (b, f) {
                        return b.button & f
                    },
                    isLeft: function (b) {
                        return b.button & 1
                    },
                    isMiddle: function (b) {
                        return b.button & 4
                    },
                    isRight: function (b) {
                        return b.button & 2
                    }
                } : {
                    LEFT: 0,
                    MIDDLE: 1,
                    RIGHT: 2,
                    isButton: function (b, f) {
                        return b.button == f
                    },
                    isLeft: function (b) {
                        return 0 == b.button
                    },
                    isMiddle: function (b) {
                        return 1 == b.button
                    },
                    isRight: function (b) {
                        return 2 == b.button
                    }
                };
                b.mouseButtons = m;
                b = f("events-mousewheel") ? "mousewheel" : function (b, f) {
                    return k(b, "DOMMouseScroll", function (b) {
                        b.wheelDelta = -b.detail;
                        f.call(this, b)
                    })
                };
                return {
                    _eventHandler: n,
                    enter: n("mouseover"),
                    leave: n("mouseout"),
                    wheel: b,
                    isLeft: m.isLeft,
                    isMiddle: m.isMiddle,
                    isRight: m.isRight
                }
            })
        },
        "dojo/keys": function () {
            define(["./_base/kernel",
"./sniff"], function (b, k) {
                return b.keys = {
                    BACKSPACE: 8,
                    TAB: 9,
                    CLEAR: 12,
                    ENTER: 13,
                    SHIFT: 16,
                    CTRL: 17,
                    ALT: 18,
                    META: k("webkit") ? 91 : 224,
                    PAUSE: 19,
                    CAPS_LOCK: 20,
                    ESCAPE: 27,
                    SPACE: 32,
                    PAGE_UP: 33,
                    PAGE_DOWN: 34,
                    END: 35,
                    HOME: 36,
                    LEFT_ARROW: 37,
                    UP_ARROW: 38,
                    RIGHT_ARROW: 39,
                    DOWN_ARROW: 40,
                    INSERT: 45,
                    DELETE: 46,
                    HELP: 47,
                    LEFT_WINDOW: 91,
                    RIGHT_WINDOW: 92,
                    SELECT: 93,
                    NUMPAD_0: 96,
                    NUMPAD_1: 97,
                    NUMPAD_2: 98,
                    NUMPAD_3: 99,
                    NUMPAD_4: 100,
                    NUMPAD_5: 101,
                    NUMPAD_6: 102,
                    NUMPAD_7: 103,
                    NUMPAD_8: 104,
                    NUMPAD_9: 105,
                    NUMPAD_MULTIPLY: 106,
                    NUMPAD_PLUS: 107,
                    NUMPAD_ENTER: 108,
                    NUMPAD_MINUS: 109,
                    NUMPAD_PERIOD: 110,
                    NUMPAD_DIVIDE: 111,
                    F1: 112,
                    F2: 113,
                    F3: 114,
                    F4: 115,
                    F5: 116,
                    F6: 117,
                    F7: 118,
                    F8: 119,
                    F9: 120,
                    F10: 121,
                    F11: 122,
                    F12: 123,
                    F13: 124,
                    F14: 125,
                    F15: 126,
                    NUM_LOCK: 144,
                    SCROLL_LOCK: 145,
                    UP_DPAD: 175,
                    DOWN_DPAD: 176,
                    LEFT_DPAD: 177,
                    RIGHT_DPAD: 178,
                    copyKey: k("mac") && !k("air") ? k("safari") ? 91 : 224 : 17
                }
            })
        },
        "dojo/_base/Color": function () {
            define(["./kernel", "./lang", "./array", "./config"], function (b, k, f, r) {
                var m = b.Color = function (b) {
                    b && this.setColor(b)
                };
                m.named = {
                    black: [0, 0, 0],
                    silver: [192, 192, 192],
                    gray: [128,
128, 128],
                    white: [255, 255, 255],
                    maroon: [128, 0, 0],
                    red: [255, 0, 0],
                    purple: [128, 0, 128],
                    fuchsia: [255, 0, 255],
                    green: [0, 128, 0],
                    lime: [0, 255, 0],
                    olive: [128, 128, 0],
                    yellow: [255, 255, 0],
                    navy: [0, 0, 128],
                    blue: [0, 0, 255],
                    teal: [0, 128, 128],
                    aqua: [0, 255, 255],
                    transparent: r.transparentColor || [0, 0, 0, 0]
                };
                k.extend(m, {
                    r: 255,
                    g: 255,
                    b: 255,
                    a: 1,
                    _set: function (b, f, h, e) {
                        this.r = b;
                        this.g = f;
                        this.b = h;
                        this.a = e
                    },
                    setColor: function (b) {
                        k.isString(b) ? m.fromString(b, this) : k.isArray(b) ? m.fromArray(b, this) : (this._set(b.r, b.g, b.b, b.a), b instanceof m ||
                            this.sanitize());
                        return this
                    },
                    sanitize: function () {
                        return this
                    },
                    toRgb: function () {
                        return [this.r, this.g, this.b]
                    },
                    toRgba: function () {
                        return [this.r, this.g, this.b, this.a]
                    },
                    toHex: function () {
                        return "#" + f.map(["r", "g", "b"], function (b) {
                            b = this[b].toString(16);
                            return 2 > b.length ? "0" + b : b
                        }, this).join("")
                    },
                    toCss: function (b) {
                        var f = this.r + ", " + this.g + ", " + this.b;
                        return (b ? "rgba(" + f + ", " + this.a : "rgb(" + f) + ")"
                    },
                    toString: function () {
                        return this.toCss(!0)
                    }
                });
                m.blendColors = b.blendColors = function (b, l, h, e) {
                    var a = e || new m;
                    f.forEach(["r",
"g", "b", "a"], function (e) {
                        a[e] = b[e] + (l[e] - b[e]) * h;
                        "a" != e && (a[e] = Math.round(a[e]))
                    });
                    return a.sanitize()
                };
                m.fromRgb = b.colorFromRgb = function (b, f) {
                    var h = b.toLowerCase().match(/^rgba?\(([\s\.,0-9]+)\)/);
                    return h && m.fromArray(h[1].split(/\s*,\s*/), f)
                };
                m.fromHex = b.colorFromHex = function (b, l) {
                    var h = l || new m,
                        e = 4 == b.length ? 4 : 8,
                        a = (1 << e) - 1;
                    b = Number("0x" + b.substr(1));
                    if (isNaN(b)) return null;
                    f.forEach(["b", "g", "r"], function (f) {
                        var d = b & a;
                        b >>= e;
                        h[f] = 4 == e ? 17 * d : d
                    });
                    h.a = 1;
                    return h
                };
                m.fromArray = b.colorFromArray = function (b,
                    f) {
                    var h = f || new m;
                    h._set(Number(b[0]), Number(b[1]), Number(b[2]), Number(b[3]));
                    isNaN(h.a) && (h.a = 1);
                    return h.sanitize()
                };
                m.fromString = b.colorFromString = function (b, f) {
                    var h = m.named[b];
                    return h && m.fromArray(h, f) || m.fromRgb(b, f) || m.fromHex(b, f)
                };
                return m
            })
        },
        "dojo/_base/browser": function () {
            require.has && require.has.add("config-selectorEngine", "acme");
            define("../ready ./kernel ./connect ./unload ./window ./event ./html ./NodeList ../query ./xhr ./fx".split(" "), function (b) {
                return b
            })
        },
        "dojo/_base/unload": function () {
            define(["./kernel",
"./lang", "../on"], function (b, k, f) {
                var r = window,
                    m = {
                        addOnWindowUnload: function (m, l) {
                            b.windowUnloaded || f(r, "unload", b.windowUnloaded = function () {});
                            f(r, "unload", k.hitch(m, l))
                        },
                        addOnUnload: function (b, l) {
                            f(r, "beforeunload", k.hitch(b, l))
                        }
                    };
                b.addOnWindowUnload = m.addOnWindowUnload;
                b.addOnUnload = m.addOnUnload;
                return m
            })
        },
        "dojo/_base/html": function () {
            define("./kernel ../dom ../dom-style ../dom-attr ../dom-prop ../dom-class ../dom-construct ../dom-geometry".split(" "), function (b, k, f, r, m, n, l, h) {
                b.byId = k.byId;
                b.isDescendant = k.isDescendant;
                b.setSelectable = k.setSelectable;
                b.getAttr = r.get;
                b.setAttr = r.set;
                b.hasAttr = r.has;
                b.removeAttr = r.remove;
                b.getNodeProp = r.getNodeProp;
                b.attr = function (b, a, f) {
                    return 2 == arguments.length ? r["string" == typeof a ? "get" : "set"](b, a) : r.set(b, a, f)
                };
                b.hasClass = n.contains;
                b.addClass = n.add;
                b.removeClass = n.remove;
                b.toggleClass = n.toggle;
                b.replaceClass = n.replace;
                b._toDom = b.toDom = l.toDom;
                b.place = l.place;
                b.create = l.create;
                b.empty = function (b) {
                    l.empty(b)
                };
                b._destroyElement = b.destroy = function (b) {
                    l.destroy(b)
                };
                b._getPadExtents = b.getPadExtents = h.getPadExtents;
                b._getBorderExtents = b.getBorderExtents = h.getBorderExtents;
                b._getPadBorderExtents = b.getPadBorderExtents = h.getPadBorderExtents;
                b._getMarginExtents = b.getMarginExtents = h.getMarginExtents;
                b._getMarginSize = b.getMarginSize = h.getMarginSize;
                b._getMarginBox = b.getMarginBox = h.getMarginBox;
                b.setMarginBox = h.setMarginBox;
                b._getContentBox = b.getContentBox = h.getContentBox;
                b.setContentSize = h.setContentSize;
                b._isBodyLtr = b.isBodyLtr = h.isBodyLtr;
                b._docScroll = b.docScroll =
                    h.docScroll;
                b._getIeDocumentElementOffset = b.getIeDocumentElementOffset = h.getIeDocumentElementOffset;
                b._fixIeBiDiScrollLeft = b.fixIeBiDiScrollLeft = h.fixIeBiDiScrollLeft;
                b.position = h.position;
                b.marginBox = function (b, a) {
                    return a ? h.setMarginBox(b, a) : h.getMarginBox(b)
                };
                b.contentBox = function (b, a) {
                    return a ? h.setContentSize(b, a) : h.getContentBox(b)
                };
                b.coords = function (e, a) {
                    b.deprecated("dojo.coords()", "Use dojo.position() or dojo.marginBox().");
                    e = k.byId(e);
                    var g = f.getComputedStyle(e),
                        g = h.getMarginBox(e, g),
                        d =
                        h.position(e, a);
                    g.x = d.x;
                    g.y = d.y;
                    return g
                };
                b.getProp = m.get;
                b.setProp = m.set;
                b.prop = function (b, a, f) {
                    return 2 == arguments.length ? m["string" == typeof a ? "get" : "set"](b, a) : m.set(b, a, f)
                };
                b.getStyle = f.get;
                b.setStyle = f.set;
                b.getComputedStyle = f.getComputedStyle;
                b.__toPixelValue = b.toPixelValue = f.toPixelValue;
                b.style = function (b, a, g) {
                    switch (arguments.length) {
                    case 1:
                        return f.get(b);
                    case 2:
                        return f["string" == typeof a ? "get" : "set"](b, a)
                    }
                    return f.set(b, a, g)
                };
                return b
            })
        },
        "dojo/dom-attr": function () {
            define("exports ./sniff ./_base/lang ./dom ./dom-style ./dom-prop".split(" "),
                function (b, k, f, r, m, n) {
                    function l(a, b) {
                        var d = a.getAttributeNode && a.getAttributeNode(b);
                        return !!d && d.specified
                    }
                    var h = {
                            innerHTML: 1,
                            textContent: 1,
                            className: 1,
                            htmlFor: k("ie"),
                            value: 1
                        },
                        e = {
                            classname: "class",
                            htmlfor: "for",
                            tabindex: "tabIndex",
                            readonly: "readOnly"
                        };
                    b.has = function (a, b) {
                        var d = b.toLowerCase();
                        return h[n.names[d] || b] || l(r.byId(a), e[d] || b)
                    };
                    b.get = function (a, b) {
                        a = r.byId(a);
                        var d = b.toLowerCase(),
                            c = n.names[d] || b,
                            k = a[c];
                        if (h[c] && "undefined" != typeof k) return k;
                        if ("textContent" == c) return n.get(a, c);
                        if ("href" !=
                            c && ("boolean" == typeof k || f.isFunction(k))) return k;
                        d = e[d] || b;
                        return l(a, d) ? a.getAttribute(d) : null
                    };
                    b.set = function (a, g, d) {
                        a = r.byId(a);
                        if (2 == arguments.length) {
                            for (var c in g) b.set(a, c, g[c]);
                            return a
                        }
                        c = g.toLowerCase();
                        var l = n.names[c] || g,
                            k = h[l];
                        if ("style" == l && "string" != typeof d) return m.set(a, d), a;
                        if (k || "boolean" == typeof d || f.isFunction(d)) return n.set(a, g, d);
                        a.setAttribute(e[c] || g, d);
                        return a
                    };
                    b.remove = function (a, b) {
                        r.byId(a).removeAttribute(e[b.toLowerCase()] || b)
                    };
                    b.getNodeProp = function (a, b) {
                        a = r.byId(a);
                        var d = b.toLowerCase(),
                            c = n.names[d] || b;
                        if (c in a && "href" != c) return a[c];
                        d = e[d] || b;
                        return l(a, d) ? a.getAttribute(d) : null
                    }
                })
        },
        "dojo/dom-prop": function () {
            define("exports ./_base/kernel ./sniff ./_base/lang ./dom ./dom-style ./dom-construct ./_base/connect".split(" "), function (b, k, f, r, m, n, l, h) {
                function e(a) {
                    var b = "";
                    a = a.childNodes;
                    for (var d = 0, f; f = a[d]; d++) 8 != f.nodeType && (b = 1 == f.nodeType ? b + e(f) : b + f.nodeValue);
                    return b
                }
                var a = {},
                    g = 1,
                    d = k._scopeName + "attrid";
                f.add("dom-textContent", function (a, b, d) {
                    return "textContent" in
                        d
                });
                b.names = {
                    "class": "className",
                    "for": "htmlFor",
                    tabindex: "tabIndex",
                    readonly: "readOnly",
                    colspan: "colSpan",
                    frameborder: "frameBorder",
                    rowspan: "rowSpan",
                    textcontent: "textContent",
                    valuetype: "valueType"
                };
                b.get = function (a, d) {
                    a = m.byId(a);
                    var g = d.toLowerCase(),
                        g = b.names[g] || d;
                    return "textContent" == g && !f("dom-textContent") ? e(a) : a[g]
                };
                b.set = function (c, e, k) {
                    c = m.byId(c);
                    if (2 == arguments.length && "string" != typeof e) {
                        for (var u in e) b.set(c, u, e[u]);
                        return c
                    }
                    u = e.toLowerCase();
                    u = b.names[u] || e;
                    if ("style" == u && "string" !=
                        typeof k) return n.set(c, k), c;
                    if ("innerHTML" == u) return f("ie") && c.tagName.toLowerCase() in {
                        col: 1,
                        colgroup: 1,
                        table: 1,
                        tbody: 1,
                        tfoot: 1,
                        thead: 1,
                        tr: 1,
                        title: 1
                    } ? (l.empty(c), c.appendChild(l.toDom(k, c.ownerDocument))) : c[u] = k, c;
                    if ("textContent" == u && !f("dom-textContent")) return l.empty(c), c.appendChild(c.ownerDocument.createTextNode(k)), c;
                    if (r.isFunction(k)) {
                        var w = c[d];
                        w || (w = g++, c[d] = w);
                        a[w] || (a[w] = {});
                        var t = a[w][u];
                        if (t) h.disconnect(t);
                        else try {
                            delete c[u]
                        } catch (q) {}
                        k ? a[w][u] = h.connect(c, u, k) : c[u] = null;
                        return c
                    }
                    c[u] =
                        k;
                    return c
                }
            })
        },
        "dojo/dom-construct": function () {
            define("exports ./_base/kernel ./sniff ./_base/window ./dom ./dom-attr".split(" "), function (b, k, f, r, m, n) {
                function l(a, b) {
                    var c = b.parentNode;
                    c && c.insertBefore(a, b)
                }

                function h(a) {
                    if ("innerHTML" in a) try {
                        a.innerHTML = "";
                        return
                    } catch (b) {}
                    for (var c; c = a.lastChild;) a.removeChild(c)
                }
                var e = {
                        option: ["select"],
                        tbody: ["table"],
                        thead: ["table"],
                        tfoot: ["table"],
                        tr: ["table", "tbody"],
                        td: ["table", "tbody", "tr"],
                        th: ["table", "thead", "tr"],
                        legend: ["fieldset"],
                        caption: ["table"],
                        colgroup: ["table"],
                        col: ["table", "colgroup"],
                        li: ["ul"]
                    },
                    a = /<\s*([\w\:]+)/,
                    g = {},
                    d = 0,
                    c = "__" + k._scopeName + "ToDomId",
                    s;
                for (s in e) e.hasOwnProperty(s) && (k = e[s], k.pre = "option" == s ? '\x3cselect multiple\x3d"multiple"\x3e' : "\x3c" + k.join("\x3e\x3c") + "\x3e", k.post = "\x3c/" + k.reverse().join("\x3e\x3c/") + "\x3e");
                var p;
                8 >= f("ie") && (p = function (a) {
                    a.__dojo_html5_tested = "yes";
                    var b = u("div", {
                        innerHTML: "\x3cnav\x3ea\x3c/nav\x3e",
                        style: {
                            visibility: "hidden"
                        }
                    }, a.body);
                    1 !== b.childNodes.length && "abbr article aside audio canvas details figcaption figure footer header hgroup mark meter nav output progress section summary time video".replace(/\b\w+\b/g,
                        function (b) {
                            a.createElement(b)
                        });
                    w(b)
                });
                b.toDom = function (b, q) {
                    q = q || r.doc;
                    var h = q[c];
                    h || (q[c] = h = ++d + "", g[h] = q.createElement("div"));
                    8 >= f("ie") && !q.__dojo_html5_tested && q.body && p(q);
                    b += "";
                    var k = b.match(a),
                        l = k ? k[1].toLowerCase() : "",
                        h = g[h];
                    if (k && e[l]) {
                        k = e[l];
                        h.innerHTML = k.pre + b + k.post;
                        for (k = k.length; k; --k) h = h.firstChild
                    } else h.innerHTML = b;
                    if (1 == h.childNodes.length) return h.removeChild(h.firstChild);
                    for (l = q.createDocumentFragment(); k = h.firstChild;) l.appendChild(k);
                    return l
                };
                b.place = function (a, c, d) {
                    c = m.byId(c);
                    "string" == typeof a && (a = /^\s*</.test(a) ? b.toDom(a, c.ownerDocument) : m.byId(a));
                    if ("number" == typeof d) {
                        var e = c.childNodes;
                        !e.length || e.length <= d ? c.appendChild(a) : l(a, e[0 > d ? 0 : d])
                    } else switch (d) {
                    case "before":
                        l(a, c);
                        break;
                    case "after":
                        d = a;
                        (e = c.parentNode) && (e.lastChild == c ? e.appendChild(d) : e.insertBefore(d, c.nextSibling));
                        break;
                    case "replace":
                        c.parentNode.replaceChild(a, c);
                        break;
                    case "only":
                        b.empty(c);
                        c.appendChild(a);
                        break;
                    case "first":
                        if (c.firstChild) {
                            l(a, c.firstChild);
                            break
                        }
                    default:
                        c.appendChild(a)
                    }
                    return a
                };
                var u = b.create = function (a, c, d, e) {
                    var f = r.doc;
                    d && (d = m.byId(d), f = d.ownerDocument);
                    "string" == typeof a && (a = f.createElement(a));
                    c && n.set(a, c);
                    d && b.place(a, d, e);
                    return a
                };
                b.empty = function (a) {
                    h(m.byId(a))
                };
                var w = b.destroy = function (a) {
                    if (a = m.byId(a)) {
                        var b = a;
                        a = a.parentNode;
                        b.firstChild && h(b);
                        a && (f("ie") && a.canHaveChildren && "removeNode" in b ? b.removeNode(!1) : a.removeChild(b))
                    }
                }
            })
        },
        "dojo/dom-class": function () {
            define(["./_base/lang", "./_base/array", "./dom"], function (b, k, f) {
                function r(b) {
                    if ("string" == typeof b ||
                        b instanceof String) {
                        if (b && !n.test(b)) return l[0] = b, l;
                        b = b.split(n);
                        b.length && !b[0] && b.shift();
                        b.length && !b[b.length - 1] && b.pop();
                        return b
                    }
                    return !b ? [] : k.filter(b, function (a) {
                        return a
                    })
                }
                var m, n = /\s+/,
                    l = [""],
                    h = {};
                return m = {
                    contains: function (b, a) {
                        return 0 <= (" " + f.byId(b).className + " ").indexOf(" " + a + " ")
                    },
                    add: function (b, a) {
                        b = f.byId(b);
                        a = r(a);
                        var g = b.className,
                            d, g = g ? " " + g + " " : " ";
                        d = g.length;
                        for (var c = 0, h = a.length, k; c < h; ++c)(k = a[c]) && 0 > g.indexOf(" " + k + " ") && (g += k + " ");
                        d < g.length && (b.className = g.substr(1,
                            g.length - 2))
                    },
                    remove: function (e, a) {
                        e = f.byId(e);
                        var g;
                        if (void 0 !== a) {
                            a = r(a);
                            g = " " + e.className + " ";
                            for (var d = 0, c = a.length; d < c; ++d) g = g.replace(" " + a[d] + " ", " ");
                            g = b.trim(g)
                        } else g = "";
                        e.className != g && (e.className = g)
                    },
                    replace: function (b, a, g) {
                        b = f.byId(b);
                        h.className = b.className;
                        m.remove(h, g);
                        m.add(h, a);
                        b.className !== h.className && (b.className = h.className)
                    },
                    toggle: function (b, a, g) {
                        b = f.byId(b);
                        if (void 0 === g) {
                            a = r(a);
                            for (var d = 0, c = a.length, h; d < c; ++d) h = a[d], m[m.contains(b, h) ? "remove" : "add"](b, h)
                        } else m[g ? "add" :
                            "remove"](b, a);
                        return g
                    }
                }
            })
        },
        "dojo/_base/NodeList": function () {
            define(["./kernel", "../query", "./array", "./html", "../NodeList-dom"], function (b, k, f) {
                k = k.NodeList;
                var r = k.prototype;
                r.connect = k._adaptAsForEach(function () {
                    return b.connect.apply(this, arguments)
                });
                r.coords = k._adaptAsMap(b.coords);
                k.events = "blur focus change click error keydown keypress keyup load mousedown mouseenter mouseleave mousemove mouseout mouseover mouseup submit".split(" ");
                f.forEach(k.events, function (b) {
                    var f = "on" + b;
                    r[f] = function (b,
                        h) {
                        return this.connect(f, b, h)
                    }
                });
                return b.NodeList = k
            })
        },
        "dojo/query": function () {
            define("./_base/kernel ./has ./dom ./on ./_base/array ./_base/lang ./selector/_loader ./selector/_loader!default".split(" "), function (b, k, f, r, m, n, l, h) {
                function e(a, b) {
                    var c = function (c, d) {
                        if ("string" == typeof d && (d = f.byId(d), !d)) return new b([]);
                        var e = "string" == typeof c ? a(c, d) : c ? c.end && c.on ? c : [c] : [];
                        return e.end && e.on ? e : new b(e)
                    };
                    c.matches = a.match || function (a, b, d) {
                        return 0 < c.filter([a], b, d).length
                    };
                    c.filter = a.filter || function (a,
                        b, d) {
                        return c(b, d).filter(function (b) {
                            return -1 < m.indexOf(a, b)
                        })
                    };
                    if ("function" != typeof a) {
                        var d = a.search;
                        a = function (a, b) {
                            return d(b || document, a)
                        }
                    }
                    return c
                }
                k.add("array-extensible", function () {
                    return 1 == n.delegate([], {
                        length: 1
                    }).length && !k("bug-for-in-skips-shadowed")
                });
                var a = Array.prototype,
                    g = a.slice,
                    d = a.concat,
                    c = m.forEach,
                    s = function (a, c, d) {
                        c = [0].concat(g.call(c, 0));
                        d = d || b.global;
                        return function (b) {
                            c[0] = b;
                            return a.apply(d, c)
                        }
                    },
                    p = function (a) {
                        var b = this instanceof u && k("array-extensible");
                        "number" ==
                        typeof a && (a = Array(a));
                        var c = a && "length" in a ? a : arguments;
                        if (b || !c.sort) {
                            for (var d = b ? this : [], e = d.length = c.length, f = 0; f < e; f++) d[f] = c[f];
                            if (b) return d;
                            c = d
                        }
                        n._mixin(c, w);
                        c._NodeListCtor = function (a) {
                            return u(a)
                        };
                        return c
                    },
                    u = p,
                    w = u.prototype = k("array-extensible") ? [] : {};
                u._wrap = w._wrap = function (a, b, c) {
                    a = new(c || this._NodeListCtor || u)(a);
                    return b ? a._stash(b) : a
                };
                u._adaptAsMap = function (a, b) {
                    return function () {
                        return this.map(s(a, arguments, b))
                    }
                };
                u._adaptAsForEach = function (a, b) {
                    return function () {
                        this.forEach(s(a,
                            arguments, b));
                        return this
                    }
                };
                u._adaptAsFilter = function (a, b) {
                    return function () {
                        return this.filter(s(a, arguments, b))
                    }
                };
                u._adaptWithCondition = function (a, c, d) {
                    return function () {
                        var e = arguments,
                            f = s(a, e, d);
                        if (c.call(d || b.global, e)) return this.map(f);
                        this.forEach(f);
                        return this
                    }
                };
                c(["slice", "splice"], function (b) {
                    var c = a[b];
                    w[b] = function () {
                        return this._wrap(c.apply(this, arguments), "slice" == b ? this : null)
                    }
                });
                c(["indexOf", "lastIndexOf", "every", "some"], function (a) {
                    var c = m[a];
                    w[a] = function () {
                        return c.apply(b, [this].concat(g.call(arguments,
                            0)))
                    }
                });
                n.extend(p, {
                    constructor: u,
                    _NodeListCtor: u,
                    toString: function () {
                        return this.join(",")
                    },
                    _stash: function (a) {
                        this._parent = a;
                        return this
                    },
                    on: function (a, b) {
                        var c = this.map(function (c) {
                            return r(c, a, b)
                        });
                        c.remove = function () {
                            for (var a = 0; a < c.length; a++) c[a].remove()
                        };
                        return c
                    },
                    end: function () {
                        return this._parent ? this._parent : new this._NodeListCtor(0)
                    },
                    concat: function (a) {
                        var b = g.call(this, 0),
                            c = m.map(arguments, function (a) {
                                return g.call(a, 0)
                            });
                        return this._wrap(d.apply(b, c), this)
                    },
                    map: function (a, b) {
                        return this._wrap(m.map(this,
                            a, b), this)
                    },
                    forEach: function (a, b) {
                        c(this, a, b);
                        return this
                    },
                    filter: function (a) {
                        var b = arguments,
                            c = this,
                            d = 0;
                        if ("string" == typeof a) {
                            c = t._filterResult(this, b[0]);
                            if (1 == b.length) return c._stash(this);
                            d = 1
                        }
                        return this._wrap(m.filter(c, b[d], b[d + 1]), this)
                    },
                    instantiate: function (a, b) {
                        var c = n.isFunction(a) ? a : n.getObject(a);
                        b = b || {};
                        return this.forEach(function (a) {
                            new c(b, a)
                        })
                    },
                    at: function () {
                        var a = new this._NodeListCtor(0);
                        c(arguments, function (b) {
                            0 > b && (b = this.length + b);
                            this[b] && a.push(this[b])
                        }, this);
                        return a._stash(this)
                    }
                });
                var t = e(h, p);
                b.query = e(h, function (a) {
                    return p(a)
                });
                t.load = function (a, b, c) {
                    l.load(a, b, function (a) {
                        c(e(a, p))
                    })
                };
                b._filterQueryResult = t._filterResult = function (a, b, c) {
                    return new p(t.filter(a, b, c))
                };
                b.NodeList = t.NodeList = p;
                return t
            })
        },
        "dojo/selector/acme": function () {
            define(["../dom", "../sniff", "../_base/array", "../_base/lang", "../_base/window"], function (b, k, f, r, m) {
                var n = r.trim,
                    l = f.forEach,
                    h = "BackCompat" == m.doc.compatMode,
                    e = !1,
                    a = function () {
                        return !0
                    },
                    g = function (a) {
                        a = 0 <= "\x3e~+".indexOf(a.slice(-1)) ? a + " * " :
                            a + " ";
                        for (var b = function (b, c) {
                                return n(a.slice(b, c))
                            }, c = [], d = -1, f = -1, g = -1, h = -1, k = -1, l = -1, q = -1, m, r = "", p = "", s, t = 0, w = a.length, v = null, u = null, x = function () {
                                0 <= l && (v.id = b(l, t).replace(/\\/g, ""), l = -1);
                                if (0 <= q) {
                                    var a = q == t ? null : b(q, t);
                                    v[0 > "\x3e~+".indexOf(a) ? "tag" : "oper"] = a;
                                    q = -1
                                }
                                0 <= k && (v.classes.push(b(k + 1, t).replace(/\\/g, "")), k = -1)
                            }; r = p, p = a.charAt(t), t < w; t++)
                            if ("\\" != r)
                                if (v || (s = t, v = {
                                        query: null,
                                        pseudos: [],
                                        attrs: [],
                                        classes: [],
                                        tag: null,
                                        oper: null,
                                        id: null,
                                        getTag: function () {
                                            return e ? this.otag : this.tag
                                        }
                                    }, q = t), m) p ==
                                    m && (m = null);
                                else if ("'" == p || '"' == p) m = p;
                        else if (0 <= d)
                            if ("]" == p) {
                                u.attr ? u.matchFor = b(g || d + 1, t) : u.attr = b(d + 1, t);
                                if ((d = u.matchFor) && ('"' == d.charAt(0) || "'" == d.charAt(0))) u.matchFor = d.slice(1, -1);
                                u.matchFor && (u.matchFor = u.matchFor.replace(/\\/g, ""));
                                v.attrs.push(u);
                                u = null;
                                d = g = -1
                            } else "\x3d" == p && (g = 0 <= "|~^$*".indexOf(r) ? r : "", u.type = g + p, u.attr = b(d + 1, t - g.length), g = t + 1);
                        else 0 <= f ? ")" == p && (0 <= h && (u.value = b(f + 1, t)), h = f = -1) : "#" == p ? (x(), l = t + 1) : "." == p ? (x(), k = t) : ":" == p ? (x(), h = t) : "[" == p ? (x(), d = t, u = {}) : "(" == p ? (0 <= h &&
                            (u = {
                                name: b(h + 1, t),
                                value: null
                            }, v.pseudos.push(u)), f = t) : " " == p && r != p && (x(), 0 <= h && v.pseudos.push({
                            name: b(h + 1, t)
                        }), v.loops = v.pseudos.length || v.attrs.length || v.classes.length, v.oquery = v.query = b(s, t), v.otag = v.tag = v.oper ? null : v.tag || "*", v.tag && (v.tag = v.tag.toUpperCase()), c.length && c[c.length - 1].oper && (v.infixOper = c.pop(), v.query = v.infixOper.query + " " + v.query), c.push(v), v = null);
                        return c
                    },
                    d = function (a, b) {
                        return !a ? b : !b ? a : function () {
                            return a.apply(window, arguments) && b.apply(window, arguments)
                        }
                    },
                    c = function (a,
                        b) {
                        var c = b || [];
                        a && c.push(a);
                        return c
                    },
                    s = function (a) {
                        return 1 == a.nodeType
                    },
                    p = function (a, b) {
                        return !a ? "" : "class" == b ? a.className || "" : "for" == b ? a.htmlFor || "" : "style" == b ? a.style.cssText || "" : (e ? a.getAttribute(b) : a.getAttribute(b, 2)) || ""
                    },
                    u = {
                        "*\x3d": function (a, b) {
                            return function (c) {
                                return 0 <= p(c, a).indexOf(b)
                            }
                        },
                        "^\x3d": function (a, b) {
                            return function (c) {
                                return 0 == p(c, a).indexOf(b)
                            }
                        },
                        "$\x3d": function (a, b) {
                            return function (c) {
                                c = " " + p(c, a);
                                var d = c.lastIndexOf(b);
                                return -1 < d && d == c.length - b.length
                            }
                        },
                        "~\x3d": function (a,
                            b) {
                            var c = " " + b + " ";
                            return function (b) {
                                return 0 <= (" " + p(b, a) + " ").indexOf(c)
                            }
                        },
                        "|\x3d": function (a, b) {
                            var c = b + "-";
                            return function (d) {
                                d = p(d, a);
                                return d == b || 0 == d.indexOf(c)
                            }
                        },
                        "\x3d": function (a, b) {
                            return function (c) {
                                return p(c, a) == b
                            }
                        }
                    };
                r = m.doc.documentElement;
                var w = !(r.nextElementSibling || "nextElementSibling" in r),
                    t = !w ? "nextElementSibling" : "nextSibling",
                    q = !w ? "previousElementSibling" : "previousSibling",
                    v = w ? s : a,
                    z = function (a) {
                        for (; a = a[q];)
                            if (v(a)) return !1;
                        return !0
                    },
                    y = function (a) {
                        for (; a = a[t];)
                            if (v(a)) return !1;
                        return !0
                    },
                    x = function (a) {
                        var b = a.parentNode,
                            b = 7 != b.nodeType ? b : b.nextSibling,
                            c = 0,
                            d = b.children || b.childNodes,
                            e = a._i || a.getAttribute("_i") || -1,
                            f = b._l || ("undefined" !== typeof b.getAttribute ? b.getAttribute("_l") : -1);
                        if (!d) return -1;
                        d = d.length;
                        if (f == d && 0 <= e && 0 <= f) return e;
                        k("ie") && "undefined" !== typeof b.setAttribute ? b.setAttribute("_l", d) : b._l = d;
                        e = -1;
                        for (b = b.firstElementChild || b.firstChild; b; b = b[t]) v(b) && (k("ie") ? b.setAttribute("_i", ++c) : b._i = ++c, a === b && (e = c));
                        return e
                    },
                    A = function (a) {
                        return !(x(a) % 2)
                    },
                    C = function (a) {
                        return x(a) %
                            2
                    },
                    H = {
                        checked: function (a, b) {
                            return function (a) {
                                return !!("checked" in a ? a.checked : a.selected)
                            }
                        },
                        disabled: function (a, b) {
                            return function (a) {
                                return a.disabled
                            }
                        },
                        enabled: function (a, b) {
                            return function (a) {
                                return !a.disabled
                            }
                        },
                        "first-child": function () {
                            return z
                        },
                        "last-child": function () {
                            return y
                        },
                        "only-child": function (a, b) {
                            return function (a) {
                                return z(a) && y(a)
                            }
                        },
                        empty: function (a, b) {
                            return function (a) {
                                var b = a.childNodes;
                                for (a = a.childNodes.length - 1; 0 <= a; a--) {
                                    var c = b[a].nodeType;
                                    if (1 === c || 3 == c) return !1
                                }
                                return !0
                            }
                        },
                        contains: function (a, b) {
                            var c = b.charAt(0);
                            if ('"' == c || "'" == c) b = b.slice(1, -1);
                            return function (a) {
                                return 0 <= a.innerHTML.indexOf(b)
                            }
                        },
                        not: function (a, b) {
                            var c = g(b)[0],
                                d = {
                                    el: 1
                                };
                            "*" != c.tag && (d.tag = 1);
                            c.classes.length || (d.classes = 1);
                            var e = L(c, d);
                            return function (a) {
                                return !e(a)
                            }
                        },
                        "nth-child": function (a, b) {
                            var c = parseInt;
                            if ("odd" == b) return C;
                            if ("even" == b) return A;
                            if (-1 != b.indexOf("n")) {
                                var d = b.split("n", 2),
                                    e = d[0] ? "-" == d[0] ? -1 : c(d[0]) : 1,
                                    f = d[1] ? c(d[1]) : 0,
                                    g = 0,
                                    h = -1;
                                0 < e ? 0 > f ? f = f % e && e + f % e : 0 < f && (f >= e && (g = f - f % e), f %= e) :
                                    0 > e && (e *= -1, 0 < f && (h = f, f %= e));
                                if (0 < e) return function (a) {
                                    a = x(a);
                                    return a >= g && (0 > h || a <= h) && a % e == f
                                };
                                b = f
                            }
                            var k = c(b);
                            return function (a) {
                                return x(a) == k
                            }
                        }
                    },
                    P = 9 > k("ie") || 9 == k("ie") && k("quirks") ? function (a) {
                        var b = a.toLowerCase();
                        "class" == b && (a = "className");
                        return function (c) {
                            return e ? c.getAttribute(a) : c[a] || c[b]
                        }
                    } : function (a) {
                        return function (b) {
                            return b && b.getAttribute && b.hasAttribute(a)
                        }
                    },
                    L = function (b, c) {
                        if (!b) return a;
                        c = c || {};
                        var f = null;
                        "el" in c || (f = d(f, s));
                        "tag" in c || "*" != b.tag && (f = d(f, function (a) {
                            return a &&
                                (e ? a.tagName : a.tagName.toUpperCase()) == b.getTag()
                        }));
                        "classes" in c || l(b.classes, function (a, b, c) {
                            var e = RegExp("(?:^|\\s)" + a + "(?:\\s|$)");
                            f = d(f, function (a) {
                                return e.test(a.className)
                            });
                            f.count = b
                        });
                        "pseudos" in c || l(b.pseudos, function (a) {
                            var b = a.name;
                            H[b] && (f = d(f, H[b](b, a.value)))
                        });
                        "attrs" in c || l(b.attrs, function (a) {
                            var b, c = a.attr;
                            a.type && u[a.type] ? b = u[a.type](c, a.matchFor) : c.length && (b = P(c));
                            b && (f = d(f, b))
                        });
                        "id" in c || b.id && (f = d(f, function (a) {
                            return !!a && a.id == b.id
                        }));
                        f || "default" in c || (f = a);
                        return f
                    },
                    E = function (a) {
                        return function (b, c, d) {
                            for (; b = b[t];)
                                if (!w || s(b)) {
                                    (!d || R(b, d)) && a(b) && c.push(b);
                                    break
                                }
                            return c
                        }
                    },
                    O = function (a) {
                        return function (b, c, d) {
                            for (b = b[t]; b;) {
                                if (v(b)) {
                                    if (d && !R(b, d)) break;
                                    a(b) && c.push(b)
                                }
                                b = b[t]
                            }
                            return c
                        }
                    },
                    Q = function (b, c) {
                        var d = function (a) {
                            var b = [];
                            try {
                                b = Array.prototype.slice.call(a)
                            } catch (c) {
                                for (var d = 0, e = a.length; d < e; d++) b.push(a[d])
                            }
                            return b
                        };
                        b = b || a;
                        return function (a, e, g) {
                            var h = 0,
                                k = [],
                                k = d(a.children || a.childNodes);
                            for (c && f.forEach(k, function (a) {
                                    1 === a.nodeType && (k = k.concat(d(a.getElementsByTagName("*"))))
                                }); a =
                                k[h++];) v(a) && ((!g || R(a, g)) && b(a, h)) && e.push(a);
                            return e
                        }
                    },
                    D = function (a, b) {
                        for (var c = a.parentNode; c && c != b;) c = c.parentNode;
                        return !!c
                    },
                    F = {},
                    J = function (d) {
                        var e = F[d.query];
                        if (e) return e;
                        var g = d.infixOper,
                            g = g ? g.oper : "",
                            k = L(d, {
                                el: 1
                            }),
                            l = "*" == d.tag,
                            q = m.doc.getElementsByClassName;
                        if (g) q = {
                            el: 1
                        }, l && (q.tag = 1), k = L(d, q), "+" == g ? e = E(k) : "~" == g ? e = O(k) : "\x3e" == g && (e = Q(k));
                        else if (d.id) k = !d.loops && l ? a : L(d, {
                            el: 1,
                            id: 1
                        }), e = function (a, e) {
                            var g = b.byId(d.id, a.ownerDocument || a);
                            a.ownerDocument && !D(a, a.ownerDocument) && f.some(11 ===
                                a.nodeType ? a.childNodes : [a],
                                function (a) {
                                    a = Q(function (a) {
                                        return a.id === d.id
                                    }, !0)(a, []);
                                    if (a.length) return g = a[0], !1
                                });
                            if (g && k(g) && (9 == a.nodeType || D(g, a))) return c(g, e)
                        };
                        else if (q && /\{\s*\[native code\]\s*\}/.test(String(q)) && d.classes.length && !h) var k = L(d, {
                                el: 1,
                                classes: 1,
                                id: 1
                            }),
                            n = d.classes.join(" "),
                            e = function (a, b, d) {
                                b = c(0, b);
                                for (var e, f = 0, g = a.getElementsByClassName(n); e = g[f++];) k(e, a) && R(e, d) && b.push(e);
                                return b
                            };
                        else !l && !d.loops ? e = function (a, b, e) {
                            b = c(0, b);
                            for (var f = 0, g = d.getTag(), g = g ? a.getElementsByTagName(g) : []; a = g[f++];) R(a, e) && b.push(a);
                            return b
                        } : (k = L(d, {
                            el: 1,
                            tag: 1,
                            id: 1
                        }), e = function (a, b, e) {
                            b = c(0, b);
                            for (var f, g = 0, h = (f = d.getTag()) ? a.getElementsByTagName(f) : []; f = h[g++];) k(f, a) && R(f, e) && b.push(f);
                            return b
                        });
                        return F[d.query] = e
                    },
                    B = {},
                    G = {},
                    T = function (a) {
                        var b = g(n(a));
                        if (1 == b.length) {
                            var d = J(b[0]);
                            return function (a) {
                                if (a = d(a, [])) a.nozip = !0;
                                return a
                            }
                        }
                        return function (a) {
                            a = c(a);
                            for (var d, e, f = b.length, g, h, k = 0; k < f; k++) {
                                h = [];
                                d = b[k];
                                e = a.length - 1;
                                0 < e && (g = {}, h.nozip = !0);
                                e = J(d);
                                for (var l = 0; d = a[l]; l++) e(d, h, g);
                                if (!h.length) break;
                                a = h
                            }
                            return h
                        }
                    },
                    ha = k("ie") ? "commentStrip" : "nozip",
                    ia = !!m.doc.querySelectorAll,
                    U = /\\[>~+]|n\+\d|([^ \\])?([>~+])([^ =])?/g,
                    ra = function (a, b, c, d) {
                        return c ? (b ? b + " " : "") + c + (d ? " " + d : "") : a
                    },
                    aa = /([^[]*)([^\]]*])?/g,
                    I = function (a, b, c) {
                        return b.replace(U, ra) + (c || "")
                    },
                    ba = function (a, b) {
                        a = a.replace(aa, I);
                        if (ia) {
                            var c = G[a];
                            if (c && !b) return c
                        }
                        if (c = B[a]) return c;
                        var c = a.charAt(0),
                            d = -1 == a.indexOf(" ");
                        0 <= a.indexOf("#") && d && (b = !0);
                        if (ia && !b && -1 == "\x3e~+".indexOf(c) && (!k("ie") || -1 == a.indexOf(":")) && !(h && 0 <= a.indexOf(".")) &&
                            -1 == a.indexOf(":contains") && -1 == a.indexOf(":checked") && -1 == a.indexOf("|\x3d")) {
                            var e = 0 <= "\x3e~+".indexOf(a.charAt(a.length - 1)) ? a + " *" : a;
                            return G[a] = function (b) {
                                if (9 == b.nodeType || d) try {
                                    var c = b.querySelectorAll(e);
                                    c[ha] = !0;
                                    return c
                                } catch (f) {}
                                return ba(a, !0)(b)
                            }
                        }
                        var f = a.match(/([^\s,](?:"(?:\\.|[^"])+"|'(?:\\.|[^'])+'|[^,])*)/g);
                        return B[a] = 2 > f.length ? T(a) : function (a) {
                            for (var b = 0, c = [], d; d = f[b++];) c = c.concat(T(d)(a));
                            return c
                        }
                    },
                    K = 0,
                    ca = k("ie") ? function (a) {
                        return e ? a.getAttribute("_uid") || a.setAttribute("_uid",
                            ++K) || K : a.uniqueID
                    } : function (a) {
                        return a._uid || (a._uid = ++K)
                    },
                    R = function (a, b) {
                        if (!b) return 1;
                        var c = ca(a);
                        return !b[c] ? b[c] = 1 : 0
                    },
                    W = function (a) {
                        if (a && a.nozip) return a;
                        if (!a || !a.length) return [];
                        if (2 > a.length) return [a[0]];
                        var b = [];
                        K++;
                        var c, d;
                        if (k("ie") && e) {
                            var f = K + "";
                            for (c = 0; c < a.length; c++)
                                if ((d = a[c]) && d.getAttribute("_zipIdx") != f) b.push(d), d.setAttribute("_zipIdx", f)
                        } else if (k("ie") && a.commentStrip) try {
                            for (c = 0; c < a.length; c++)(d = a[c]) && s(d) && b.push(d)
                        } catch (g) {} else
                            for (c = 0; c < a.length; c++)
                                if ((d = a[c]) &&
                                    d._zipIdx != K) b.push(d), d._zipIdx = K;
                        return b
                    },
                    X = function (a, b) {
                        b = b || m.doc;
                        e = "div" === (b.ownerDocument || b).createElement("div").tagName;
                        var c = ba(a)(b);
                        return c && c.nozip ? c : W(c)
                    };
                X.filter = function (a, c, d) {
                    for (var e = [], h = g(c), h = 1 == h.length && !/[^\w#\.]/.test(c) ? L(h[0]) : function (a) {
                            return -1 != f.indexOf(X(c, b.byId(d)), a)
                        }, k = 0, l; l = a[k]; k++) h(l) && e.push(l);
                    return e
                };
                return X
            })
        },
        "dojo/NodeList-dom": function () {
            define("./_base/kernel ./query ./_base/array ./_base/lang ./dom-class ./dom-construct ./dom-geometry ./dom-attr ./dom-style".split(" "),
                function (b, k, f, r, m, n, l, h, e) {
                    function a(a) {
                        return function (b, c, d) {
                            return 2 == arguments.length ? a["string" == typeof c ? "get" : "set"](b, c) : a.set(b, c, d)
                        }
                    }
                    var g = function (a) {
                            return 1 == a.length && "string" == typeof a[0]
                        },
                        d = function (a) {
                            var b = a.parentNode;
                            b && b.removeChild(a)
                        },
                        c = k.NodeList,
                        s = c._adaptWithCondition,
                        p = c._adaptAsForEach,
                        u = c._adaptAsMap;
                    r.extend(c, {
                        _normalize: function (a, c) {
                            var d = !0 === a.parse;
                            if ("string" == typeof a.template) {
                                var e = a.templateFunc || b.string && b.string.substitute;
                                a = e ? e(a.template, a) : a
                            }
                            e = typeof a;
                            "string" == e || "number" == e ? (a = n.toDom(a, c && c.ownerDocument), a = 11 == a.nodeType ? r._toArray(a.childNodes) : [a]) : r.isArrayLike(a) ? r.isArray(a) || (a = r._toArray(a)) : a = [a];
                            d && (a._runParse = !0);
                            return a
                        },
                        _cloneNode: function (a) {
                            return a.cloneNode(!0)
                        },
                        _place: function (a, c, d, e) {
                            if (!(1 != c.nodeType && "only" == d))
                                for (var f, g = a.length, h = g - 1; 0 <= h; h--) {
                                    var k = e ? this._cloneNode(a[h]) : a[h];
                                    if (a._runParse && b.parser && b.parser.parse) {
                                        f || (f = c.ownerDocument.createElement("div"));
                                        f.appendChild(k);
                                        b.parser.parse(f);
                                        for (k = f.firstChild; f.firstChild;) f.removeChild(f.firstChild)
                                    }
                                    h ==
                                        g - 1 ? n.place(k, c, d) : c.parentNode.insertBefore(k, c);
                                    c = k
                                }
                        },
                        position: u(l.position),
                        attr: s(a(h), g),
                        style: s(a(e), g),
                        addClass: p(m.add),
                        removeClass: p(m.remove),
                        toggleClass: p(m.toggle),
                        replaceClass: p(m.replace),
                        empty: p(n.empty),
                        removeAttr: p(h.remove),
                        marginBox: u(l.getMarginBox),
                        place: function (a, b) {
                            var c = k(a)[0];
                            return this.forEach(function (a) {
                                n.place(a, c, b)
                            })
                        },
                        orphan: function (a) {
                            return (a ? k._filterResult(this, a) : this).forEach(d)
                        },
                        adopt: function (a, b) {
                            return k(a).place(this[0], b)._stash(this)
                        },
                        query: function (a) {
                            if (!a) return this;
                            var b = new c;
                            this.map(function (c) {
                                k(a, c).forEach(function (a) {
                                    void 0 !== a && b.push(a)
                                })
                            });
                            return b._stash(this)
                        },
                        filter: function (a) {
                            var b = arguments,
                                c = this,
                                d = 0;
                            if ("string" == typeof a) {
                                c = k._filterResult(this, b[0]);
                                if (1 == b.length) return c._stash(this);
                                d = 1
                            }
                            return this._wrap(f.filter(c, b[d], b[d + 1]), this)
                        },
                        addContent: function (a, b) {
                            a = this._normalize(a, this[0]);
                            for (var c = 0, d; d = this[c]; c++) a.length ? this._place(a, d, b, 0 < c) : n.empty(d);
                            return this
                        }
                    });
                    return c
                })
        },
        "dojo/_base/fx": function () {
            define("./kernel ./config ./lang ../Evented ./Color ../aspect ../sniff ../dom ../dom-style".split(" "),
                function (b, k, f, r, m, n, l, h, e) {
                    var a = f.mixin,
                        g = {},
                        d = g._Line = function (a, b) {
                            this.start = a;
                            this.end = b
                        };
                    d.prototype.getValue = function (a) {
                        return (this.end - this.start) * a + this.start
                    };
                    var c = g.Animation = function (b) {
                        a(this, b);
                        f.isArray(this.curve) && (this.curve = new d(this.curve[0], this.curve[1]))
                    };
                    c.prototype = new r;
                    f.extend(c, {
                        duration: 350,
                        repeat: 0,
                        rate: 20,
                        _percent: 0,
                        _startRepeatCount: 0,
                        _getStep: function () {
                            var a = this._percent,
                                b = this.easing;
                            return b ? b(a) : a
                        },
                        _fire: function (a, b) {
                            var c = b || [];
                            if (this[a])
                                if (k.debugAtAllCosts) this[a].apply(this,
                                    c);
                                else try {
                                    this[a].apply(this, c)
                                } catch (d) {
                                    console.error("exception in animation handler for:", a), console.error(d)
                                }
                                return this
                        },
                        play: function (a, b) {
                            this._delayTimer && this._clearTimer();
                            if (b) this._stopTimer(), this._active = this._paused = !1, this._percent = 0;
                            else if (this._active && !this._paused) return this;
                            this._fire("beforeBegin", [this.node]);
                            var c = a || this.delay,
                                d = f.hitch(this, "_play", b);
                            if (0 < c) return this._delayTimer = setTimeout(d, c), this;
                            d();
                            return this
                        },
                        _play: function (a) {
                            this._delayTimer && this._clearTimer();
                            this._startTime = (new Date).valueOf();
                            this._paused && (this._startTime -= this.duration * this._percent);
                            this._active = !0;
                            this._paused = !1;
                            a = this.curve.getValue(this._getStep());
                            this._percent || (this._startRepeatCount || (this._startRepeatCount = this.repeat), this._fire("onBegin", [a]));
                            this._fire("onPlay", [a]);
                            this._cycle();
                            return this
                        },
                        pause: function () {
                            this._delayTimer && this._clearTimer();
                            this._stopTimer();
                            if (!this._active) return this;
                            this._paused = !0;
                            this._fire("onPause", [this.curve.getValue(this._getStep())]);
                            return this
                        },
                        gotoPercent: function (a, b) {
                            this._stopTimer();
                            this._active = this._paused = !0;
                            this._percent = a;
                            b && this.play();
                            return this
                        },
                        stop: function (a) {
                            this._delayTimer && this._clearTimer();
                            if (!this._timer) return this;
                            this._stopTimer();
                            a && (this._percent = 1);
                            this._fire("onStop", [this.curve.getValue(this._getStep())]);
                            this._active = this._paused = !1;
                            return this
                        },
                        destroy: function () {
                            this.stop()
                        },
                        status: function () {
                            return this._active ? this._paused ? "paused" : "playing" : "stopped"
                        },
                        _cycle: function () {
                            if (this._active) {
                                var a =
                                    (new Date).valueOf(),
                                    a = 0 === this.duration ? 1 : (a - this._startTime) / this.duration;
                                1 <= a && (a = 1);
                                this._percent = a;
                                this.easing && (a = this.easing(a));
                                this._fire("onAnimate", [this.curve.getValue(a)]);
                                1 > this._percent ? this._startTimer() : (this._active = !1, 0 < this.repeat ? (this.repeat--, this.play(null, !0)) : -1 == this.repeat ? this.play(null, !0) : this._startRepeatCount && (this.repeat = this._startRepeatCount, this._startRepeatCount = 0), this._percent = 0, this._fire("onEnd", [this.node]), !this.repeat && this._stopTimer())
                            }
                            return this
                        },
                        _clearTimer: function () {
                            clearTimeout(this._delayTimer);
                            delete this._delayTimer
                        }
                    });
                    var s = 0,
                        p = null,
                        u = {
                            run: function () {}
                        };
                    f.extend(c, {
                        _startTimer: function () {
                            this._timer || (this._timer = n.after(u, "run", f.hitch(this, "_cycle"), !0), s++);
                            p || (p = setInterval(f.hitch(u, "run"), this.rate))
                        },
                        _stopTimer: function () {
                            this._timer && (this._timer.remove(), this._timer = null, s--);
                            0 >= s && (clearInterval(p), p = null, s = 0)
                        }
                    });
                    var w = l("ie") ? function (a) {
                        var b = a.style;
                        !b.width.length && "auto" == e.get(a, "width") && (b.width = "auto")
                    } : function () {};
                    g._fade = function (b) {
                        b.node = h.byId(b.node);
                        var c = a({
                            properties: {}
                        }, b);
                        b = c.properties.opacity = {};
                        b.start = !("start" in c) ? function () {
                            return +e.get(c.node, "opacity") || 0
                        } : c.start;
                        b.end = c.end;
                        b = g.animateProperty(c);
                        n.after(b, "beforeBegin", f.partial(w, c.node), !0);
                        return b
                    };
                    g.fadeIn = function (b) {
                        return g._fade(a({
                            end: 1
                        }, b))
                    };
                    g.fadeOut = function (b) {
                        return g._fade(a({
                            end: 0
                        }, b))
                    };
                    g._defaultEasing = function (a) {
                        return 0.5 + Math.sin((a + 1.5) * Math.PI) / 2
                    };
                    var t = function (a) {
                        this._properties = a;
                        for (var b in a) {
                            var c = a[b];
                            c.start instanceof m && (c.tempColor = new m)
                        }
                    };
                    t.prototype.getValue = function (a) {
                        var b = {},
                            c;
                        for (c in this._properties) {
                            var d = this._properties[c],
                                e = d.start;
                            e instanceof m ? b[c] = m.blendColors(e, d.end, a, d.tempColor).toCss() : f.isArray(e) || (b[c] = (d.end - e) * a + e + ("opacity" != c ? d.units || "px" : 0))
                        }
                        return b
                    };
                    g.animateProperty = function (d) {
                        var g = d.node = h.byId(d.node);
                        d.easing || (d.easing = b._defaultEasing);
                        d = new c(d);
                        n.after(d, "beforeBegin", f.hitch(d, function () {
                            var b = {},
                                c;
                            for (c in this.properties) {
                                if ("width" == c || "height" ==
                                    c) this.node.display = "block";
                                var d = this.properties[c];
                                f.isFunction(d) && (d = d(g));
                                d = b[c] = a({}, f.isObject(d) ? d : {
                                    end: d
                                });
                                f.isFunction(d.start) && (d.start = d.start(g));
                                f.isFunction(d.end) && (d.end = d.end(g));
                                var h = 0 <= c.toLowerCase().indexOf("color"),
                                    k = function (a, b) {
                                        var c = {
                                            height: a.offsetHeight,
                                            width: a.offsetWidth
                                        }[b];
                                        if (void 0 !== c) return c;
                                        c = e.get(a, b);
                                        return "opacity" == b ? +c : h ? c : parseFloat(c)
                                    };
                                "end" in d ? "start" in d || (d.start = k(g, c)) : d.end = k(g, c);
                                h ? (d.start = new m(d.start), d.end = new m(d.end)) : d.start = "opacity" ==
                                    c ? +d.start : parseFloat(d.start)
                            }
                            this.curve = new t(b)
                        }), !0);
                        n.after(d, "onAnimate", f.hitch(e, "set", d.node), !0);
                        return d
                    };
                    g.anim = function (a, b, d, e, f, h) {
                        return g.animateProperty({
                            node: a,
                            duration: d || c.prototype.duration,
                            properties: b,
                            easing: e,
                            onEnd: f
                        }).play(h || 0)
                    };
                    a(b, g);
                    b._Animation = c;
                    return g
                })
        },
        "*noref": 1
    }
});
(function () {
    var b = this.require;
    b({
        cache: {}
    });
    !b.async && b(["dojo"]);
    b.boot && b.apply(null, b.boot)
})();
// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.19/esri/copyright.txt for details.
//>>built
require({
    cache: {
        "dojo/fx/Toggler": function () {
            define(["../_base/lang", "../_base/declare", "../_base/fx", "../aspect"], function (r, p, a, g) {
                return p("dojo.fx.Toggler", null, {
                    node: null,
                    showFunc: a.fadeIn,
                    hideFunc: a.fadeOut,
                    showDuration: 200,
                    hideDuration: 200,
                    constructor: function (a) {
                        r.mixin(this, a);
                        this.node = a.node;
                        this._showArgs = r.mixin({}, a);
                        this._showArgs.node = this.node;
                        this._showArgs.duration = this.showDuration;
                        this.showAnim = this.showFunc(this._showArgs);
                        this._hideArgs = r.mixin({}, a);
                        this._hideArgs.node = this.node;
                        this._hideArgs.duration = this.hideDuration;
                        this.hideAnim = this.hideFunc(this._hideArgs);
                        g.after(this.showAnim, "beforeBegin", r.hitch(this.hideAnim, "stop", !0), !0);
                        g.after(this.hideAnim, "beforeBegin", r.hitch(this.showAnim, "stop", !0), !0)
                    },
                    show: function (a) {
                        return this.showAnim.play(a || 0)
                    },
                    hide: function (a) {
                        return this.hideAnim.play(a || 0)
                    }
                })
            })
        },
        "dijit/_base": function () {
            define("./main ./a11y ./WidgetSet ./_base/focus ./_base/manager ./_base/place ./_base/popup ./_base/scroll ./_base/sniff ./_base/typematic ./_base/wai ./_base/window".split(" "),
                function (r) {
                    return r._base
                })
        },
        "dijit/main": function () {
            define(["dojo/_base/kernel"], function (r) {
                return r.dijit
            })
        },
        "dijit/a11y": function () {
            define("dojo/_base/array dojo/dom dojo/dom-attr dojo/dom-style dojo/_base/lang dojo/sniff ./main".split(" "), function (r, p, a, g, q, h, k) {
                var l = {
                    _isElementShown: function (e) {
                        var c = g.get(e);
                        return "hidden" != c.visibility && "collapsed" != c.visibility && "none" != c.display && "hidden" != a.get(e, "type")
                    },
                    hasDefaultTabStop: function (e) {
                        switch (e.nodeName.toLowerCase()) {
                        case "a":
                            return a.has(e,
                                "href");
                        case "area":
                        case "button":
                        case "input":
                        case "object":
                        case "select":
                        case "textarea":
                            return !0;
                        case "iframe":
                            var c;
                            try {
                                var b = e.contentDocument;
                                if ("designMode" in b && "on" == b.designMode) return !0;
                                c = b.body
                            } catch (d) {
                                try {
                                    c = e.contentWindow.document.body
                                } catch (m) {
                                    return !1
                                }
                            }
                            return c && ("true" == c.contentEditable || c.firstChild && "true" == c.firstChild.contentEditable);
                        default:
                            return "true" == e.contentEditable
                        }
                    },
                    effectiveTabIndex: function (e) {
                        return a.get(e, "disabled") ? void 0 : a.has(e, "tabIndex") ? +a.get(e, "tabIndex") :
                            l.hasDefaultTabStop(e) ? 0 : void 0
                    },
                    isTabNavigable: function (a) {
                        return 0 <= l.effectiveTabIndex(a)
                    },
                    isFocusable: function (a) {
                        return -1 <= l.effectiveTabIndex(a)
                    },
                    _getTabNavigable: function (e) {
                        function c(f) {
                            return f && "input" == f.tagName.toLowerCase() && f.type && "radio" == f.type.toLowerCase() && f.name && f.name.toLowerCase()
                        }
                        var b, d, m, t, s, n, f = {},
                            y = l._isElementShown,
                            u = l.effectiveTabIndex,
                            w = function (e) {
                                for (e = e.firstChild; e; e = e.nextSibling)
                                    if (!(1 != e.nodeType || 9 >= h("ie") && "HTML" !== e.scopeName || !y(e))) {
                                        var l = u(e);
                                        if (0 <= l) {
                                            if (0 ==
                                                l) b || (b = e), d = e;
                                            else if (0 < l) {
                                                if (!m || l < t) t = l, m = e;
                                                if (!s || l >= n) n = l, s = e
                                            }
                                            l = c(e);
                                            a.get(e, "checked") && l && (f[l] = e)
                                        }
                                        "SELECT" != e.nodeName.toUpperCase() && w(e)
                                    }
                            };
                        y(e) && w(e);
                        return {
                            first: f[c(b)] || b,
                            last: f[c(d)] || d,
                            lowest: f[c(m)] || m,
                            highest: f[c(s)] || s
                        }
                    },
                    getFirstInTabbingOrder: function (a, c) {
                        var b = l._getTabNavigable(p.byId(a, c));
                        return b.lowest ? b.lowest : b.first
                    },
                    getLastInTabbingOrder: function (a, c) {
                        var b = l._getTabNavigable(p.byId(a, c));
                        return b.last ? b.last : b.highest
                    }
                };
                q.mixin(k, l);
                return l
            })
        },
        "dijit/WidgetSet": function () {
            define(["dojo/_base/array",
"dojo/_base/declare", "dojo/_base/kernel", "./registry"], function (r, p, a, g) {
                var q = p("dijit.WidgetSet", null, {
                    constructor: function () {
                        this._hash = {};
                        this.length = 0
                    },
                    add: function (a) {
                        if (this._hash[a.id]) throw Error("Tried to register widget with id\x3d\x3d" + a.id + " but that id is already registered");
                        this._hash[a.id] = a;
                        this.length++
                    },
                    remove: function (a) {
                        this._hash[a] && (delete this._hash[a], this.length--)
                    },
                    forEach: function (h, k) {
                        k = k || a.global;
                        var l = 0,
                            e;
                        for (e in this._hash) h.call(k, this._hash[e], l++, this._hash);
                        return this
                    },
                    filter: function (h, k) {
                        k = k || a.global;
                        var l = new q,
                            e = 0,
                            c;
                        for (c in this._hash) {
                            var b = this._hash[c];
                            h.call(k, b, e++, this._hash) && l.add(b)
                        }
                        return l
                    },
                    byId: function (a) {
                        return this._hash[a]
                    },
                    byClass: function (a) {
                        var k = new q,
                            l, e;
                        for (l in this._hash) e = this._hash[l], e.declaredClass == a && k.add(e);
                        return k
                    },
                    toArray: function () {
                        var a = [],
                            k;
                        for (k in this._hash) a.push(this._hash[k]);
                        return a
                    },
                    map: function (a, k) {
                        return r.map(this.toArray(), a, k)
                    },
                    every: function (h, k) {
                        k = k || a.global;
                        var l = 0,
                            e;
                        for (e in this._hash)
                            if (!h.call(k,
                                    this._hash[e], l++, this._hash)) return !1;
                        return !0
                    },
                    some: function (h, k) {
                        k = k || a.global;
                        var l = 0,
                            e;
                        for (e in this._hash)
                            if (h.call(k, this._hash[e], l++, this._hash)) return !0;
                        return !1
                    }
                });
                r.forEach("forEach filter byClass map every some".split(" "), function (a) {
                    g[a] = q.prototype[a]
                });
                return q
            })
        },
        "dijit/registry": function () {
            define(["dojo/_base/array", "dojo/_base/window", "./main"], function (r, p, a) {
                var g = {},
                    q = {},
                    h = {
                        length: 0,
                        add: function (a) {
                            if (q[a.id]) throw Error("Tried to register widget with id\x3d\x3d" + a.id + " but that id is already registered");
                            q[a.id] = a;
                            this.length++
                        },
                        remove: function (a) {
                            q[a] && (delete q[a], this.length--)
                        },
                        byId: function (a) {
                            return "string" == typeof a ? q[a] : a
                        },
                        byNode: function (a) {
                            return q[a.getAttribute("widgetId")]
                        },
                        toArray: function () {
                            var a = [],
                                l;
                            for (l in q) a.push(q[l]);
                            return a
                        },
                        getUniqueId: function (k) {
                            var l;
                            do l = k + "_" + (k in g ? ++g[k] : g[k] = 0); while (q[l]);
                            return "dijit" == a._scopeName ? l : a._scopeName + "_" + l
                        },
                        findWidgets: function (a, l) {
                            function e(b) {
                                for (b = b.firstChild; b; b = b.nextSibling)
                                    if (1 == b.nodeType) {
                                        var a = b.getAttribute("widgetId");
                                        a ? (a = q[a]) && c.push(a) : b !== l && e(b)
                                    }
                            }
                            var c = [];
                            e(a);
                            return c
                        },
                        _destroyAll: function () {
                            a._curFocus = null;
                            a._prevFocus = null;
                            a._activeStack = [];
                            r.forEach(h.findWidgets(p.body()), function (a) {
                                a._destroyed || (a.destroyRecursive ? a.destroyRecursive() : a.destroy && a.destroy())
                            })
                        },
                        getEnclosingWidget: function (a) {
                            for (; a;) {
                                var l = 1 == a.nodeType && a.getAttribute("widgetId");
                                if (l) return q[l];
                                a = a.parentNode
                            }
                            return null
                        },
                        _hash: q
                    };
                return a.registry = h
            })
        },
        "dijit/_base/focus": function () {
            define("dojo/_base/array dojo/dom dojo/_base/lang dojo/topic dojo/_base/window ../focus ../selection ../main".split(" "),
                function (r, p, a, g, q, h, k, l) {
                    h.focus = function (a) {
                        if (a) {
                            var c = "node" in a ? a.node : a,
                                b = a.bookmark;
                            a = a.openedForWindow;
                            var d = b ? b.isCollapsed : !1;
                            if (c) {
                                var m = "iframe" == c.tagName.toLowerCase() ? c.contentWindow : c;
                                if (m && m.focus) try {
                                    m.focus()
                                } catch (t) {}
                                h._onFocusNode(c)
                            }
                            if (b && q.withGlobal(a || q.global, l.isCollapsed) && !d) {
                                a && a.focus();
                                try {
                                    q.withGlobal(a || q.global, l.moveToBookmark, null, [b])
                                } catch (s) {}
                            }
                        }
                    };
                    h.watch("curNode", function (a, c, b) {
                        l._curFocus = b;
                        l._prevFocus = c;
                        b && g.publish("focusNode", b)
                    });
                    h.watch("activeStack",
                        function (a, c, b) {
                            l._activeStack = b
                        });
                    h.on("widget-blur", function (a, c) {
                        g.publish("widgetBlur", a, c)
                    });
                    h.on("widget-focus", function (a, c) {
                        g.publish("widgetFocus", a, c)
                    });
                    a.mixin(l, {
                        _curFocus: null,
                        _prevFocus: null,
                        isCollapsed: function () {
                            return l.getBookmark().isCollapsed
                        },
                        getBookmark: function () {
                            return (q.global == window ? k : new k.SelectionManager(q.global)).getBookmark()
                        },
                        moveToBookmark: function (a) {
                            return (q.global == window ? k : new k.SelectionManager(q.global)).moveToBookmark(a)
                        },
                        getFocus: function (a, c) {
                            var b = !h.curNode ||
                                a && p.isDescendant(h.curNode, a.domNode) ? l._prevFocus : h.curNode;
                            return {
                                node: b,
                                bookmark: b && b == h.curNode && q.withGlobal(c || q.global, l.getBookmark),
                                openedForWindow: c
                            }
                        },
                        _activeStack: [],
                        registerIframe: function (a) {
                            return h.registerIframe(a)
                        },
                        unregisterIframe: function (a) {
                            a && a.remove()
                        },
                        registerWin: function (a, c) {
                            return h.registerWin(a, c)
                        },
                        unregisterWin: function (a) {
                            a && a.remove()
                        }
                    });
                    return l
                })
        },
        "dijit/focus": function () {
            define("dojo/aspect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/Evented dojo/_base/lang dojo/on dojo/domReady dojo/sniff dojo/Stateful dojo/_base/window dojo/window ./a11y ./registry ./main".split(" "),
                function (r, p, a, g, q, h, k, l, e, c, b, d, m, t, s, n, f) {
                    var y, u, w = new(p([d, k], {
                        curNode: null,
                        activeStack: [],
                        constructor: function () {
                            var f = l.hitch(this, function (f) {
                                a.isDescendant(this.curNode, f) && this.set("curNode", null);
                                a.isDescendant(this.prevNode, f) && this.set("prevNode", null)
                            });
                            r.before(h, "empty", f);
                            r.before(h, "destroy", f)
                        },
                        registerIframe: function (f) {
                            return this.registerWin(f.contentWindow, f)
                        },
                        registerWin: function (f, a) {
                            var c = this,
                                d = f.document && f.document.body;
                            if (d) {
                                var n = b("pointer-events") ? "pointerdown" : b("MSPointer") ?
                                    "MSPointerDown" : b("touch-events") ? "mousedown, touchstart" : "mousedown",
                                    m = e(f.document, n, function (f) {
                                        if (!f || !(f.target && null == f.target.parentNode)) c._onTouchNode(a || f.target, "mouse")
                                    }),
                                    u = e(d, "focusin", function (f) {
                                        if (f.target.tagName) {
                                            var b = f.target.tagName.toLowerCase();
                                            "#document" == b || "body" == b || (s.isFocusable(f.target) ? c._onFocusNode(a || f.target) : c._onTouchNode(a || f.target))
                                        }
                                    }),
                                    y = e(d, "focusout", function (f) {
                                        c._onBlurNode(a || f.target)
                                    });
                                return {
                                    remove: function () {
                                        m.remove();
                                        u.remove();
                                        y.remove();
                                        d = m =
                                            u = y = null
                                    }
                                }
                            }
                        },
                        _onBlurNode: function (f) {
                            f = (new Date).getTime();
                            f < y + 100 || (this._clearFocusTimer && clearTimeout(this._clearFocusTimer), this._clearFocusTimer = setTimeout(l.hitch(this, function () {
                                this.set("prevNode", this.curNode);
                                this.set("curNode", null)
                            }), 0), this._clearActiveWidgetsTimer && clearTimeout(this._clearActiveWidgetsTimer), f < u + 100 || (this._clearActiveWidgetsTimer = setTimeout(l.hitch(this, function () {
                                delete this._clearActiveWidgetsTimer;
                                this._setStack([])
                            }), 0)))
                        },
                        _onTouchNode: function (f, a) {
                            u = (new Date).getTime();
                            this._clearActiveWidgetsTimer && (clearTimeout(this._clearActiveWidgetsTimer), delete this._clearActiveWidgetsTimer);
                            q.contains(f, "dijitPopup") && (f = f.firstChild);
                            var b = [];
                            try {
                                for (; f;) {
                                    var c = g.get(f, "dijitPopupParent");
                                    if (c) f = n.byId(c).domNode;
                                    else if (f.tagName && "body" == f.tagName.toLowerCase()) {
                                        if (f === m.body()) break;
                                        f = t.get(f.ownerDocument).frameElement
                                    } else {
                                        var d = f.getAttribute && f.getAttribute("widgetId"),
                                            s = d && n.byId(d);
                                        s && !("mouse" == a && s.get("disabled")) && b.unshift(d);
                                        f = f.parentNode
                                    }
                                }
                            } catch (e) {}
                            this._setStack(b,
                                a)
                        },
                        _onFocusNode: function (f) {
                            f && 9 != f.nodeType && (y = (new Date).getTime(), this._clearFocusTimer && (clearTimeout(this._clearFocusTimer), delete this._clearFocusTimer), this._onTouchNode(f), f != this.curNode && (this.set("prevNode", this.curNode), this.set("curNode", f)))
                        },
                        _setStack: function (f, a) {
                            var b = this.activeStack,
                                c = b.length - 1,
                                d = f.length - 1;
                            if (f[d] != b[c]) {
                                this.set("activeStack", f);
                                var s;
                                for (s = c; 0 <= s && b[s] != f[s]; s--)
                                    if (c = n.byId(b[s])) c._hasBeenBlurred = !0, c.set("focused", !1), c._focusManager == this && c._onBlur(a),
                                        this.emit("widget-blur", c, a);
                                for (s++; s <= d; s++)
                                    if (c = n.byId(f[s])) c.set("focused", !0), c._focusManager == this && c._onFocus(a), this.emit("widget-focus", c, a)
                            }
                        },
                        focus: function (f) {
                            if (f) try {
                                f.focus()
                            } catch (a) {}
                        }
                    }));
                    c(function () {
                        var f = w.registerWin(t.get(document));
                        b("ie") && e(window, "unload", function () {
                            f && (f.remove(), f = null)
                        })
                    });
                    f.focus = function (f) {
                        w.focus(f)
                    };
                    for (var C in w) /^_/.test(C) || (f.focus[C] = "function" == typeof w[C] ? l.hitch(w, C) : w[C]);
                    w.watch(function (a, b, c) {
                        f.focus[a] = c
                    });
                    return w
                })
        },
        "dojo/Stateful": function () {
            define(["./_base/declare",
"./_base/lang", "./_base/array", "./when"], function (r, p, a, g) {
                return r("dojo.Stateful", null, {
                    _attrPairNames: {},
                    _getAttrNames: function (a) {
                        var h = this._attrPairNames;
                        return h[a] ? h[a] : h[a] = {
                            s: "_" + a + "Setter",
                            g: "_" + a + "Getter"
                        }
                    },
                    postscript: function (a) {
                        a && this.set(a)
                    },
                    _get: function (a, h) {
                        return "function" === typeof this[h.g] ? this[h.g]() : this[a]
                    },
                    get: function (a) {
                        return this._get(a, this._getAttrNames(a))
                    },
                    set: function (a, h) {
                        if ("object" === typeof a) {
                            for (var k in a) a.hasOwnProperty(k) && "_watchCallbacks" != k && this.set(k,
                                a[k]);
                            return this
                        }
                        k = this._getAttrNames(a);
                        var l = this._get(a, k);
                        k = this[k.s];
                        var e;
                        "function" === typeof k ? e = k.apply(this, Array.prototype.slice.call(arguments, 1)) : this[a] = h;
                        if (this._watchCallbacks) {
                            var c = this;
                            g(e, function () {
                                c._watchCallbacks(a, l, h)
                            })
                        }
                        return this
                    },
                    _changeAttrValue: function (a, h) {
                        var k = this.get(a);
                        this[a] = h;
                        this._watchCallbacks && this._watchCallbacks(a, k, h);
                        return this
                    },
                    watch: function (g, h) {
                        var k = this._watchCallbacks;
                        if (!k) var l = this,
                            k = this._watchCallbacks = function (a, c, e, t) {
                                var s = function (n) {
                                    if (n) {
                                        n =
                                            n.slice();
                                        for (var f = 0, s = n.length; f < s; f++) n[f].call(l, a, c, e)
                                    }
                                };
                                s(k["_" + a]);
                                t || s(k["*"])
                            };
                        !h && "function" === typeof g ? (h = g, g = "*") : g = "_" + g;
                        var e = k[g];
                        "object" !== typeof e && (e = k[g] = []);
                        e.push(h);
                        var c = {};
                        c.unwatch = c.remove = function () {
                            var b = a.indexOf(e, h); - 1 < b && e.splice(b, 1)
                        };
                        return c
                    }
                })
            })
        },
        "dojo/window": function () {
            define("./_base/lang ./sniff ./_base/window ./dom ./dom-geometry ./dom-style ./dom-construct".split(" "), function (r, p, a, g, q, h, k) {
                p.add("rtl-adjust-position-for-verticalScrollBar", function (e, c) {
                    var b =
                        a.body(c),
                        d = k.create("div", {
                            style: {
                                overflow: "scroll",
                                overflowX: "visible",
                                direction: "rtl",
                                visibility: "hidden",
                                position: "absolute",
                                left: "0",
                                top: "0",
                                width: "64px",
                                height: "64px"
                            }
                        }, b, "last"),
                        m = k.create("div", {
                            style: {
                                overflow: "hidden",
                                direction: "ltr"
                            }
                        }, d, "last"),
                        t = 0 != q.position(m).x;
                    d.removeChild(m);
                    b.removeChild(d);
                    return t
                });
                p.add("position-fixed-support", function (e, c) {
                    var b = a.body(c),
                        d = k.create("span", {
                            style: {
                                visibility: "hidden",
                                position: "fixed",
                                left: "1px",
                                top: "1px"
                            }
                        }, b, "last"),
                        m = k.create("span", {
                            style: {
                                position: "fixed",
                                left: "0",
                                top: "0"
                            }
                        }, d, "last"),
                        t = q.position(m).x != q.position(d).x;
                    d.removeChild(m);
                    b.removeChild(d);
                    return t
                });
                var l = {
                    getBox: function (e) {
                        e = e || a.doc;
                        var c = "BackCompat" == e.compatMode ? a.body(e) : e.documentElement,
                            b = q.docScroll(e);
                        if (p("touch")) {
                            var d = l.get(e);
                            e = d.innerWidth || c.clientWidth;
                            c = d.innerHeight || c.clientHeight
                        } else e = c.clientWidth, c = c.clientHeight;
                        return {
                            l: b.x,
                            t: b.y,
                            w: e,
                            h: c
                        }
                    },
                    get: function (a) {
                        if (p("ie") && l !== document.parentWindow) {
                            a.parentWindow.execScript("document._parentWindow \x3d window;",
                                "Javascript");
                            var c = a._parentWindow;
                            a._parentWindow = null;
                            return c
                        }
                        return a.parentWindow || a.defaultView
                    },
                    scrollIntoView: function (e, c) {
                        try {
                            e = g.byId(e);
                            var b = e.ownerDocument || a.doc,
                                d = a.body(b),
                                m = b.documentElement || d.parentNode,
                                t = p("ie") || p("trident"),
                                s = p("webkit");
                            if (!(e == d || e == m))
                                if (!p("mozilla") && (!t && !s && !p("opera") && !p("trident") && !p("edge")) && "scrollIntoView" in e) e.scrollIntoView(!1);
                                else {
                                    var n = "BackCompat" == b.compatMode,
                                        f = Math.min(d.clientWidth || m.clientWidth, m.clientWidth || d.clientWidth),
                                        y = Math.min(d.clientHeight ||
                                            m.clientHeight, m.clientHeight || d.clientHeight),
                                        b = s || n ? d : m,
                                        u = c || q.position(e),
                                        w = e.parentNode,
                                        s = function (f) {
                                            return 6 >= t || 7 == t && n ? !1 : p("position-fixed-support") && "fixed" == h.get(f, "position").toLowerCase()
                                        },
                                        l = this,
                                        k = function (f, a, b) {
                                            "BODY" == f.tagName || "HTML" == f.tagName ? l.get(f.ownerDocument).scrollBy(a, b) : (a && (f.scrollLeft += a), b && (f.scrollTop += b))
                                        };
                                    if (!s(e))
                                        for (; w;) {
                                            w == d && (w = b);
                                            var v = q.position(w),
                                                r = s(w),
                                                z = "rtl" == h.getComputedStyle(w).direction.toLowerCase();
                                            if (w == b) {
                                                v.w = f;
                                                v.h = y;
                                                if (b == m && (t || p("trident")) &&
                                                    z) v.x += b.offsetWidth - v.w;
                                                v.x = 0;
                                                v.y = 0
                                            } else {
                                                var H = q.getPadBorderExtents(w);
                                                v.w -= H.w;
                                                v.h -= H.h;
                                                v.x += H.l;
                                                v.y += H.t;
                                                var D = w.clientWidth,
                                                    F = v.w - D;
                                                0 < D && 0 < F && (z && p("rtl-adjust-position-for-verticalScrollBar") && (v.x += F), v.w = D);
                                                D = w.clientHeight;
                                                F = v.h - D;
                                                0 < D && 0 < F && (v.h = D)
                                            }
                                            r && (0 > v.y && (v.h += v.y, v.y = 0), 0 > v.x && (v.w += v.x, v.x = 0), v.y + v.h > y && (v.h = y - v.y), v.x + v.w > f && (v.w = f - v.x));
                                            var E = u.x - v.x,
                                                Q = u.y - v.y,
                                                R = E + u.w - v.w,
                                                G = Q + u.h - v.h,
                                                I, P;
                                            if (0 < R * E && (w.scrollLeft || w == b || w.scrollWidth > w.offsetHeight)) {
                                                I = Math[0 > E ? "max" : "min"](E, R);
                                                if (z &&
                                                    (8 == t && !n || 5 <= p("trident"))) I = -I;
                                                P = w.scrollLeft;
                                                k(w, I, 0);
                                                I = w.scrollLeft - P;
                                                u.x -= I
                                            }
                                            if (0 < G * Q && (w.scrollTop || w == b || w.scrollHeight > w.offsetHeight)) I = Math.ceil(Math[0 > Q ? "max" : "min"](Q, G)), P = w.scrollTop, k(w, 0, I), I = w.scrollTop - P, u.y -= I;
                                            w = w != b && !r && w.parentNode
                                        }
                                }
                        } catch (K) {
                            console.error("scrollIntoView: " + K), e.scrollIntoView(!1)
                        }
                    }
                };
                r.setObject("dojo.window", l);
                return l
            })
        },
        "dijit/selection": function () {
            define("dojo/_base/array dojo/dom dojo/_base/lang dojo/sniff dojo/_base/window dijit/focus".split(" "), function (r,
                p, a, g, q, h) {
                var k = function (e) {
                        var c = e.document;
                        this.getType = function () {
                            if (c.getSelection) {
                                var a = "text",
                                    d;
                                try {
                                    d = e.getSelection()
                                } catch (m) {}
                                d && 1 == d.rangeCount && (d = d.getRangeAt(0), d.startContainer == d.endContainer && (1 == d.endOffset - d.startOffset && 3 != d.startContainer.nodeType) && (a = "control"));
                                return a
                            }
                            return c.selection.type.toLowerCase()
                        };
                        this.getSelectedText = function () {
                            if (c.getSelection) {
                                var a = e.getSelection();
                                return a ? a.toString() : ""
                            }
                            return "control" == this.getType() ? null : c.selection.createRange().text
                        };
                        this.getSelectedHtml = function () {
                            if (c.getSelection) {
                                var a = e.getSelection();
                                if (a && a.rangeCount) {
                                    var d, m = "";
                                    for (d = 0; d < a.rangeCount; d++) {
                                        var t = a.getRangeAt(d).cloneContents(),
                                            s = c.createElement("div");
                                        s.appendChild(t);
                                        m += s.innerHTML
                                    }
                                    return m
                                }
                                return null
                            }
                            return "control" == this.getType() ? null : c.selection.createRange().htmlText
                        };
                        this.getSelectedElement = function () {
                            if ("control" == this.getType()) {
                                if (c.getSelection) {
                                    var a = e.getSelection();
                                    return a.anchorNode.childNodes[a.anchorOffset]
                                }
                                if ((a = c.selection.createRange()) &&
                                    a.item) return c.selection.createRange().item(0)
                            }
                            return null
                        };
                        this.getParentElement = function () {
                            if ("control" == this.getType()) {
                                var a = this.getSelectedElement();
                                if (a) return a.parentNode
                            } else if (c.getSelection) {
                                if (a = c.getSelection()) {
                                    for (a = a.anchorNode; a && 1 != a.nodeType;) a = a.parentNode;
                                    return a
                                }
                            } else return a = c.selection.createRange(), a.collapse(!0), a.parentElement();
                            return null
                        };
                        this.hasAncestorElement = function (a) {
                            return null != this.getAncestorElement.apply(this, arguments)
                        };
                        this.getAncestorElement = function (a) {
                            var c =
                                this.getSelectedElement() || this.getParentElement();
                            return this.getParentOfType(c, arguments)
                        };
                        this.isTag = function (a, c) {
                            if (a && a.tagName)
                                for (var m = a.tagName.toLowerCase(), e = 0; e < c.length; e++) {
                                    var s = String(c[e]).toLowerCase();
                                    if (m == s) return s
                                }
                            return ""
                        };
                        this.getParentOfType = function (a, c) {
                            for (; a;) {
                                if (this.isTag(a, c).length) return a;
                                a = a.parentNode
                            }
                            return null
                        };
                        this.collapse = function (a) {
                            if (c.getSelection) {
                                var d = e.getSelection();
                                d.removeAllRanges ? a ? d.collapseToStart() : d.collapseToEnd() : d.collapse(a)
                            } else d =
                                c.selection.createRange(), d.collapse(a), d.select()
                        };
                        this.remove = function () {
                            var a = c.selection;
                            c.getSelection ? (a = e.getSelection(), a.deleteFromDocument()) : "none" != a.type.toLowerCase() && a.clear();
                            return a
                        };
                        this.selectElementChildren = function (a, d) {
                            var m;
                            a = p.byId(a);
                            if (c.getSelection) {
                                var t = e.getSelection();
                                g("opera") ? (m = t.rangeCount ? t.getRangeAt(0) : c.createRange(), m.setStart(a, 0), m.setEnd(a, 3 == a.nodeType ? a.length : a.childNodes.length), t.addRange(m)) : t.selectAllChildren(a)
                            } else if (m = a.ownerDocument.body.createTextRange(),
                                m.moveToElementText(a), !d) try {
                                m.select()
                            } catch (s) {}
                        };
                        this.selectElement = function (a, d) {
                            var e;
                            a = p.byId(a);
                            if (c.getSelection) {
                                var t = c.getSelection();
                                e = c.createRange();
                                t.removeAllRanges && (g("opera") && t.getRangeAt(0) && (e = t.getRangeAt(0)), e.selectNode(a), t.removeAllRanges(), t.addRange(e))
                            } else try {
                                t = a.tagName ? a.tagName.toLowerCase() : "", e = "img" === t || "table" === t ? q.body(c).createControlRange() : q.body(c).createRange(), e.addElement(a), d || e.select()
                            } catch (s) {
                                this.selectElementChildren(a, d)
                            }
                        };
                        this.inSelection =
                            function (a) {
                                if (a) {
                                    var d, m;
                                    if (c.getSelection) {
                                        var t = e.getSelection();
                                        t && 0 < t.rangeCount && (m = t.getRangeAt(0));
                                        if (m && m.compareBoundaryPoints && c.createRange) try {
                                            if (d = c.createRange(), d.setStart(a, 0), 1 === m.compareBoundaryPoints(m.START_TO_END, d)) return !0
                                        } catch (s) {}
                                    } else {
                                        m = c.selection.createRange();
                                        try {
                                            d = a.ownerDocument.body.createTextRange(), d.moveToElementText(a)
                                        } catch (n) {}
                                        if (m && d && 1 === m.compareEndPoints("EndToStart", d)) return !0
                                    }
                                }
                                return !1
                            };
                        this.getBookmark = function () {
                            var a, d, m = c.selection,
                                t = h.curNode;
                            if (c.getSelection) {
                                if (m =
                                    e.getSelection())
                                    if (m.isCollapsed) {
                                        if (a = t ? t.tagName : "")
                                            if (a = a.toLowerCase(), "textarea" == a || "input" == a && (!t.type || "text" == t.type.toLowerCase())) return m = {
                                                start: t.selectionStart,
                                                end: t.selectionEnd,
                                                node: t,
                                                pRange: !0
                                            }, {
                                                isCollapsed: m.end <= m.start,
                                                mark: m
                                            };
                                        a = {
                                            isCollapsed: !0
                                        };
                                        m.rangeCount && (a.mark = m.getRangeAt(0).cloneRange())
                                    } else d = m.getRangeAt(0), a = {
                                        isCollapsed: !1,
                                        mark: d.cloneRange()
                                    }
                            } else if (m) {
                                a = t ? t.tagName : "";
                                a = a.toLowerCase();
                                if (t && a && ("button" == a || "textarea" == a || "input" == a)) {
                                    if (m.type && "none" == m.type.toLowerCase()) return {
                                        isCollapsed: !0,
                                        mark: null
                                    };
                                    d = m.createRange();
                                    return {
                                        isCollapsed: d.text && d.text.length ? !1 : !0,
                                        mark: {
                                            range: d,
                                            pRange: !0
                                        }
                                    }
                                }
                                a = {};
                                try {
                                    d = m.createRange(), a.isCollapsed = !("Text" == m.type ? d.htmlText.length : d.length)
                                } catch (s) {
                                    return a.isCollapsed = !0, a
                                }
                                if ("CONTROL" == m.type.toUpperCase())
                                    if (d.length) {
                                        a.mark = [];
                                        m = 0;
                                        for (t = d.length; m < t;) a.mark.push(d.item(m++))
                                    } else a.isCollapsed = !0, a.mark = null;
                                else a.mark = d.getBookmark()
                            } else console.warn("No idea how to store the current selection for this browser!");
                            return a
                        };
                        this.moveToBookmark =
                            function (b) {
                                if (b = b.mark)
                                    if (c.getSelection) {
                                        var d = e.getSelection();
                                        d && d.removeAllRanges ? b.pRange ? (d = b.node, d.selectionStart = b.start, d.selectionEnd = b.end) : (d.removeAllRanges(), d.addRange(b)) : console.warn("No idea how to restore selection for this browser!")
                                    } else if (c.selection && b) {
                                    var m;
                                    b.pRange ? m = b.range : a.isArray(b) ? (m = c.body.createControlRange(), r.forEach(b, function (a) {
                                        m.addElement(a)
                                    })) : (m = c.body.createTextRange(), m.moveToBookmark(b));
                                    m.select()
                                }
                            };
                        this.isCollapsed = function () {
                            return this.getBookmark().isCollapsed
                        }
                    },
                    l = new k(window);
                l.SelectionManager = k;
                return l
            })
        },
        "dijit/_base/manager": function () {
            define(["dojo/_base/array", "dojo/_base/config", "dojo/_base/lang", "../registry", "../main"], function (r, p, a, g, q) {
                var h = {};
                r.forEach("byId getUniqueId findWidgets _destroyAll byNode getEnclosingWidget".split(" "), function (a) {
                    h[a] = g[a]
                });
                a.mixin(h, {
                    defaultDuration: p.defaultDuration || 200
                });
                a.mixin(q, h);
                return q
            })
        },
        "dijit/_base/place": function () {
            define(["dojo/_base/array", "dojo/_base/lang", "dojo/window", "../place", "../main"],
                function (r, p, a, g, q) {
                    var h = {
                        getViewport: function () {
                            return a.getBox()
                        }
                    };
                    h.placeOnScreen = g.at;
                    h.placeOnScreenAroundElement = function (a, l, e, c) {
                        var b;
                        if (p.isArray(e)) b = e;
                        else {
                            b = [];
                            for (var d in e) b.push({
                                aroundCorner: d,
                                corner: e[d]
                            })
                        }
                        return g.around(a, l, b, !0, c)
                    };
                    h.placeOnScreenAroundNode = h.placeOnScreenAroundElement;
                    h.placeOnScreenAroundRectangle = h.placeOnScreenAroundElement;
                    h.getPopupAroundAlignment = function (a, l) {
                        var e = {};
                        r.forEach(a, function (a) {
                            var b = l;
                            switch (a) {
                            case "after":
                                e[l ? "BR" : "BL"] = l ? "BL" : "BR";
                                break;
                            case "before":
                                e[l ? "BL" : "BR"] = l ? "BR" : "BL";
                                break;
                            case "below-alt":
                                b = !b;
                            case "below":
                                e[b ? "BL" : "BR"] = b ? "TL" : "TR";
                                e[b ? "BR" : "BL"] = b ? "TR" : "TL";
                                break;
                            case "above-alt":
                                b = !b;
                            default:
                                e[b ? "TL" : "TR"] = b ? "BL" : "BR", e[b ? "TR" : "TL"] = b ? "BR" : "BL"
                            }
                        });
                        return e
                    };
                    p.mixin(q, h);
                    return q
                })
        },
        "dijit/place": function () {
            define("dojo/_base/array dojo/dom-geometry dojo/dom-style dojo/_base/kernel dojo/_base/window ./Viewport ./main".split(" "), function (r, p, a, g, q, h, k) {
                function l(c, b, d, e) {
                    var t = h.getEffectiveBox(c.ownerDocument);
                    (!c.parentNode || "body" != String(c.parentNode.tagName).toLowerCase()) && q.body(c.ownerDocument).appendChild(c);
                    var s = null;
                    r.some(b, function (a) {
                        var f = a.corner,
                            b = a.pos,
                            n = 0,
                            l = {
                                w: {
                                    L: t.l + t.w - b.x,
                                    R: b.x - t.l,
                                    M: t.w
                                }[f.charAt(1)],
                                h: {
                                    T: t.t + t.h - b.y,
                                    B: b.y - t.t,
                                    M: t.h
                                }[f.charAt(0)]
                            },
                            h = c.style;
                        h.left = h.right = "auto";
                        d && (n = d(c, a.aroundCorner, f, l, e), n = "undefined" == typeof n ? 0 : n);
                        var k = c.style,
                            g = k.display,
                            q = k.visibility;
                        "none" == k.display && (k.visibility = "hidden", k.display = "");
                        h = p.position(c);
                        k.display = g;
                        k.visibility = q;
                        g = {
                            L: b.x,
                            R: b.x - h.w,
                            M: Math.max(t.l, Math.min(t.l + t.w, b.x + (h.w >> 1)) - h.w)
                        }[f.charAt(1)];
                        q = {
                            T: b.y,
                            B: b.y - h.h,
                            M: Math.max(t.t, Math.min(t.t + t.h, b.y + (h.h >> 1)) - h.h)
                        }[f.charAt(0)];
                        b = Math.max(t.l, g);
                        k = Math.max(t.t, q);
                        g = Math.min(t.l + t.w, g + h.w);
                        q = Math.min(t.t + t.h, q + h.h);
                        g -= b;
                        q -= k;
                        n += h.w - g + (h.h - q);
                        if (null == s || n < s.overflow) s = {
                            corner: f,
                            aroundCorner: a.aroundCorner,
                            x: b,
                            y: k,
                            w: g,
                            h: q,
                            overflow: n,
                            spaceAvailable: l
                        };
                        return !n
                    });
                    s.overflow && d && d(c, s.aroundCorner, s.corner, s.spaceAvailable, e);
                    b = s.y;
                    var n = s.x,
                        f = q.body(c.ownerDocument);
                    /relative|absolute/.test(a.get(f,
                        "position")) && (b -= a.get(f, "marginTop"), n -= a.get(f, "marginLeft"));
                    f = c.style;
                    f.top = b + "px";
                    f.left = n + "px";
                    f.right = "auto";
                    return s
                }
                var e = {
                    TL: "BR",
                    TR: "BL",
                    BL: "TR",
                    BR: "TL"
                };
                return k.place = {
                    at: function (a, b, d, m, t) {
                        d = r.map(d, function (a) {
                            var c = {
                                corner: a,
                                aroundCorner: e[a],
                                pos: {
                                    x: b.x,
                                    y: b.y
                                }
                            };
                            m && (c.pos.x += "L" == a.charAt(1) ? m.x : -m.x, c.pos.y += "T" == a.charAt(0) ? m.y : -m.y);
                            return c
                        });
                        return l(a, d, t)
                    },
                    around: function (c, b, d, e, t) {
                        function s(a, f) {
                            H.push({
                                aroundCorner: a,
                                corner: f,
                                pos: {
                                    x: {
                                        L: k,
                                        R: k + A,
                                        M: k + (A >> 1)
                                    }[a.charAt(1)],
                                    y: {
                                        T: q,
                                        B: q + z,
                                        M: q + (z >> 1)
                                    }[a.charAt(0)]
                                }
                            })
                        }
                        var n;
                        if ("string" == typeof b || "offsetWidth" in b || "ownerSVGElement" in b) {
                            if (n = p.position(b, !0), /^(above|below)/.test(d[0])) {
                                var f = p.getBorderExtents(b),
                                    y = b.firstChild ? p.getBorderExtents(b.firstChild) : {
                                        t: 0,
                                        l: 0,
                                        b: 0,
                                        r: 0
                                    },
                                    u = p.getBorderExtents(c),
                                    w = c.firstChild ? p.getBorderExtents(c.firstChild) : {
                                        t: 0,
                                        l: 0,
                                        b: 0,
                                        r: 0
                                    };
                                n.y += Math.min(f.t + y.t, u.t + w.t);
                                n.h -= Math.min(f.t + y.t, u.t + w.t) + Math.min(f.b + y.b, u.b + w.b)
                            }
                        } else n = b;
                        if (b.parentNode) {
                            f = "absolute" == a.getComputedStyle(b).position;
                            for (b = b.parentNode; b && 1 == b.nodeType && "BODY" != b.nodeName;) {
                                y = p.position(b, !0);
                                u = a.getComputedStyle(b);
                                /relative|absolute/.test(u.position) && (f = !1);
                                if (!f && /hidden|auto|scroll/.test(u.overflow)) {
                                    var w = Math.min(n.y + n.h, y.y + y.h),
                                        h = Math.min(n.x + n.w, y.x + y.w);
                                    n.x = Math.max(n.x, y.x);
                                    n.y = Math.max(n.y, y.y);
                                    n.h = w - n.y;
                                    n.w = h - n.x
                                }
                                "absolute" == u.position && (f = !0);
                                b = b.parentNode
                            }
                        }
                        var k = n.x,
                            q = n.y,
                            A = "w" in n ? n.w : n.w = n.width,
                            z = "h" in n ? n.h : (g.deprecated("place.around: dijit/place.__Rectangle: { x:" + k + ", y:" + q + ", height:" +
                                n.height + ", width:" + A + " } has been deprecated.  Please use { x:" + k + ", y:" + q + ", h:" + n.height + ", w:" + A + " }", "", "2.0"), n.h = n.height),
                            H = [];
                        r.forEach(d, function (a) {
                            var f = e;
                            switch (a) {
                            case "above-centered":
                                s("TM", "BM");
                                break;
                            case "below-centered":
                                s("BM", "TM");
                                break;
                            case "after-centered":
                                f = !f;
                            case "before-centered":
                                s(f ? "ML" : "MR", f ? "MR" : "ML");
                                break;
                            case "after":
                                f = !f;
                            case "before":
                                s(f ? "TL" : "TR", f ? "TR" : "TL");
                                s(f ? "BL" : "BR", f ? "BR" : "BL");
                                break;
                            case "below-alt":
                                f = !f;
                            case "below":
                                s(f ? "BL" : "BR", f ? "TL" : "TR");
                                s(f ? "BR" :
                                    "BL", f ? "TR" : "TL");
                                break;
                            case "above-alt":
                                f = !f;
                            case "above":
                                s(f ? "TL" : "TR", f ? "BL" : "BR");
                                s(f ? "TR" : "TL", f ? "BR" : "BL");
                                break;
                            default:
                                s(a.aroundCorner, a.corner)
                            }
                        });
                        c = l(c, H, t, {
                            w: A,
                            h: z
                        });
                        c.aroundNodePos = n;
                        return c
                    }
                }
            })
        },
        "dijit/Viewport": function () {
            define(["dojo/Evented", "dojo/on", "dojo/domReady", "dojo/sniff", "dojo/window"], function (r, p, a, g, q) {
                var h = new r,
                    k;
                a(function () {
                    var a = q.getBox();
                    h._rlh = p(window, "resize", function () {
                        var c = q.getBox();
                        a.h == c.h && a.w == c.w || (a = c, h.emit("resize"))
                    });
                    if (8 == g("ie")) {
                        var e = screen.deviceXDPI;
                        setInterval(function () {
                            screen.deviceXDPI != e && (e = screen.deviceXDPI, h.emit("resize"))
                        }, 500)
                    }
                    g("ios") && (p(document, "focusin", function (a) {
                        k = a.target
                    }), p(document, "focusout", function (a) {
                        k = null
                    }))
                });
                h.getEffectiveBox = function (a) {
                    a = q.getBox(a);
                    var e = k && k.tagName && k.tagName.toLowerCase();
                    if (g("ios") && k && !k.readOnly && ("textarea" == e || "input" == e && /^(color|email|number|password|search|tel|text|url)$/.test(k.type))) a.h *= 0 == orientation || 180 == orientation ? 0.66 : 0.4, e = k.getBoundingClientRect(), a.h = Math.max(a.h, e.top +
                        e.height);
                    return a
                };
                return h
            })
        },
        "dijit/_base/popup": function () {
            define(["dojo/dom-class", "dojo/_base/window", "../popup", "../BackgroundIframe"], function (r, p, a) {
                var g = a._createWrapper;
                a._createWrapper = function (a) {
                    a.declaredClass || (a = {
                        _popupWrapper: a.parentNode && r.contains(a.parentNode, "dijitPopup") ? a.parentNode : null,
                        domNode: a,
                        destroy: function () {},
                        ownerDocument: a.ownerDocument,
                        ownerDocumentBody: p.body(a.ownerDocument)
                    });
                    return g.call(this, a)
                };
                var q = a.open;
                a.open = function (a) {
                    if (a.orient && "string" != typeof a.orient &&
                        !("length" in a.orient)) {
                        var k = [],
                            l;
                        for (l in a.orient) k.push({
                            aroundCorner: l,
                            corner: a.orient[l]
                        });
                        a.orient = k
                    }
                    return q.call(this, a)
                };
                return a
            })
        },
        "dijit/popup": function () {
            define("dojo/_base/array dojo/aspect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/has dojo/keys dojo/_base/lang dojo/on ./place ./BackgroundIframe ./Viewport ./main dojo/touch".split(" "), function (r, p, a, g, q, h, k, l, e, c, b, d, m, t, s, n) {
                function f() {
                    this._popupWrapper && (h.destroy(this._popupWrapper),
                        delete this._popupWrapper)
                }
                a = a(null, {
                    _stack: [],
                    _beginZIndex: 1E3,
                    _idGen: 1,
                    _repositionAll: function () {
                        if (this._firstAroundNode) {
                            var a = this._firstAroundPosition,
                                f = k.position(this._firstAroundNode, !0),
                                c = f.x - a.x,
                                a = f.y - a.y;
                            if (c || a) {
                                this._firstAroundPosition = f;
                                for (f = 0; f < this._stack.length; f++) {
                                    var d = this._stack[f].wrapper.style;
                                    d.top = parseFloat(d.top) + a + "px";
                                    "auto" == d.right ? d.left = parseFloat(d.left) + c + "px" : d.right = parseFloat(d.right) - c + "px"
                                }
                            }
                            this._aroundMoveListener = setTimeout(b.hitch(this, "_repositionAll"),
                                c || a ? 10 : 50)
                        }
                    },
                    _createWrapper: function (a) {
                        var b = a._popupWrapper,
                            c = a.domNode;
                        b || (b = h.create("div", {
                            "class": "dijitPopup",
                            style: {
                                display: "none"
                            },
                            role: "region",
                            "aria-label": a["aria-label"] || a.label || a.name || a.id
                        }, a.ownerDocumentBody), b.appendChild(c), c = c.style, c.display = "", c.visibility = "", c.position = "", c.top = "0px", a._popupWrapper = b, p.after(a, "destroy", f, !0), "ontouchend" in document && d(b, "touchend", function (a) {
                            /^(input|button|textarea)$/i.test(a.target.tagName) || a.preventDefault()
                        }), b.dojoClick = !0);
                        return b
                    },
                    moveOffScreen: function (a) {
                        var f = this._createWrapper(a);
                        a = k.isBodyLtr(a.ownerDocument);
                        var b = {
                            visibility: "hidden",
                            top: "-9999px",
                            display: ""
                        };
                        b[a ? "left" : "right"] = "-9999px";
                        b[a ? "right" : "left"] = "auto";
                        l.set(f, b);
                        return f
                    },
                    hide: function (a) {
                        var f = this._createWrapper(a);
                        l.set(f, {
                            display: "none",
                            height: "auto",
                            overflowY: "visible",
                            border: ""
                        });
                        a = a.domNode;
                        "_originalStyle" in a && (a.style.cssText = a._originalStyle)
                    },
                    getTopPopup: function () {
                        for (var a = this._stack, f = a.length - 1; 0 < f && a[f].parent === a[f - 1].widget; f--);
                        return a[f]
                    },
                    open: function (a) {
                        for (var f = this._stack, n = a.popup, h = n.domNode, x = a.orient || ["below", "below-alt", "above", "above-alt"], p = a.parent ? a.parent.isLeftToRight() : k.isBodyLtr(n.ownerDocument), r = a.around, z = a.around && a.around.id ? a.around.id + "_dropdown" : "popup_" + this._idGen++; f.length && (!a.parent || !g.isDescendant(a.parent.domNode, f[f.length - 1].widget.domNode));) this.close(f[f.length - 1].widget);
                        var H = this.moveOffScreen(n);
                        n.startup && !n._started && n.startup();
                        var D, F = k.position(h);
                        if ("maxHeight" in a && -1 != a.maxHeight) D =
                            a.maxHeight || Infinity;
                        else {
                            D = s.getEffectiveBox(this.ownerDocument);
                            var E = r ? k.position(r, !1) : {
                                y: a.y - (a.padding || 0),
                                h: 2 * (a.padding || 0)
                            };
                            D = Math.floor(Math.max(E.y, D.h - (E.y + E.h)))
                        }
                        F.h > D && (F = l.getComputedStyle(h), l.set(H, {
                            overflowY: "scroll",
                            height: D + "px",
                            border: F.borderLeftWidth + " " + F.borderLeftStyle + " " + F.borderLeftColor
                        }), h._originalStyle = h.style.cssText, h.style.border = "none");
                        q.set(H, {
                            id: z,
                            style: {
                                zIndex: this._beginZIndex + f.length
                            },
                            "class": "dijitPopup " + (n.baseClass || n["class"] || "").split(" ")[0] + "Popup",
                            dijitPopupParent: a.parent ? a.parent.id : ""
                        });
                        0 == f.length && r && (this._firstAroundNode = r, this._firstAroundPosition = k.position(r, !0), this._aroundMoveListener = setTimeout(b.hitch(this, "_repositionAll"), 50));
                        e("config-bgIframe") && !n.bgIframe && (n.bgIframe = new t(H));
                        z = n.orient ? b.hitch(n, "orient") : null;
                        x = r ? m.around(H, r, x, p, z) : m.at(H, a, "R" == x ? ["TR", "BR", "TL", "BL"] : ["TL", "BL", "TR", "BR"], a.padding, z);
                        H.style.visibility = "visible";
                        h.style.visibility = "visible";
                        h = [];
                        h.push(d(H, "keydown", b.hitch(this, function (f) {
                            if (f.keyCode ==
                                c.ESCAPE && a.onCancel) f.stopPropagation(), f.preventDefault(), a.onCancel();
                            else if (f.keyCode == c.TAB && (f.stopPropagation(), f.preventDefault(), (f = this.getTopPopup()) && f.onCancel)) f.onCancel()
                        })));
                        n.onCancel && a.onCancel && h.push(n.on("cancel", a.onCancel));
                        h.push(n.on(n.onExecute ? "execute" : "change", b.hitch(this, function () {
                            var a = this.getTopPopup();
                            if (a && a.onExecute) a.onExecute()
                        })));
                        f.push({
                            widget: n,
                            wrapper: H,
                            parent: a.parent,
                            onExecute: a.onExecute,
                            onCancel: a.onCancel,
                            onClose: a.onClose,
                            handlers: h
                        });
                        if (n.onOpen) n.onOpen(x);
                        return x
                    },
                    close: function (a) {
                        for (var f = this._stack; a && r.some(f, function (f) {
                                return f.widget == a
                            }) || !a && f.length;) {
                            var b = f.pop(),
                                c = b.widget,
                                d = b.onClose;
                            c.bgIframe && (c.bgIframe.destroy(), delete c.bgIframe);
                            if (c.onClose) c.onClose();
                            for (var n; n = b.handlers.pop();) n.remove();
                            c && c.domNode && this.hide(c);
                            d && d()
                        }
                        0 == f.length && this._aroundMoveListener && (clearTimeout(this._aroundMoveListener), this._firstAroundNode = this._firstAroundPosition = this._aroundMoveListener = null)
                    }
                });
                return n.popup = new a
            })
        },
        "dijit/BackgroundIframe": function () {
            define("require ./main dojo/_base/config dojo/dom-construct dojo/dom-style dojo/_base/lang dojo/on dojo/sniff".split(" "),
                function (r, p, a, g, q, h, k, l) {
                    l.add("config-bgIframe", l("ie") && !/IEMobile\/10\.0/.test(navigator.userAgent) || l("trident") && /Windows NT 6.[01]/.test(navigator.userAgent));
                    var e = new function () {
                        var c = [];
                        this.pop = function () {
                            var b;
                            c.length ? (b = c.pop(), b.style.display = "") : (9 > l("ie") ? (b = "\x3ciframe src\x3d'" + (a.dojoBlankHtmlUrl || r.toUrl("dojo/resources/blank.html") || 'javascript:""') + "' role\x3d'presentation' style\x3d'position: absolute; left: 0px; top: 0px;z-index: -1; filter:Alpha(Opacity\x3d\"0\");'\x3e",
                                b = document.createElement(b)) : (b = g.create("iframe"), b.src = 'javascript:""', b.className = "dijitBackgroundIframe", b.setAttribute("role", "presentation"), q.set(b, "opacity", 0.1)), b.tabIndex = -1);
                            return b
                        };
                        this.push = function (a) {
                            a.style.display = "none";
                            c.push(a)
                        }
                    };
                    p.BackgroundIframe = function (a) {
                        if (!a.id) throw Error("no id");
                        if (l("config-bgIframe")) {
                            var b = this.iframe = e.pop();
                            a.appendChild(b);
                            7 > l("ie") || l("quirks") ? (this.resize(a), this._conn = k(a, "resize", h.hitch(this, "resize", a))) : q.set(b, {
                                width: "100%",
                                height: "100%"
                            })
                        }
                    };
                    h.extend(p.BackgroundIframe, {
                        resize: function (a) {
                            this.iframe && q.set(this.iframe, {
                                width: a.offsetWidth + "px",
                                height: a.offsetHeight + "px"
                            })
                        },
                        destroy: function () {
                            this._conn && (this._conn.remove(), this._conn = null);
                            this.iframe && (this.iframe.parentNode.removeChild(this.iframe), e.push(this.iframe), delete this.iframe)
                        }
                    });
                    return p.BackgroundIframe
                })
        },
        "dojo/touch": function () {
            define("./_base/kernel ./aspect ./dom ./dom-class ./_base/lang ./on ./has ./mouse ./domReady ./_base/window".split(" "), function (r, p, a, g, q,
                h, k, l, e, c) {
                function b(a, b, c) {
                    return s && c ? function (a, f) {
                        return h(a, c, f)
                    } : f ? function (f, c) {
                        var d = h(f, b, function (a) {
                                c.call(this, a);
                                D = (new Date).getTime()
                            }),
                            n = h(f, a, function (a) {
                                (!D || (new Date).getTime() > D + 1E3) && c.call(this, a)
                            });
                        return {
                            remove: function () {
                                d.remove();
                                n.remove()
                            }
                        }
                    } : function (f, b) {
                        return h(f, a, b)
                    }
                }

                function d(a) {
                    do
                        if (void 0 !== a.dojoClick) return a;
                    while (a = a.parentNode)
                }

                function m(f, b, n) {
                    if (!l.isRight(f)) {
                        var s = d(f.target);
                        if (u = !f.target.disabled && s && s.dojoClick)
                            if (C = (w = "useTarget" == u) ? s : f.target,
                                w && f.preventDefault(), x = f.changedTouches ? f.changedTouches[0].pageX - c.global.pageXOffset : f.clientX, v = f.changedTouches ? f.changedTouches[0].pageY - c.global.pageYOffset : f.clientY, A = ("object" == typeof u ? u.x : "number" == typeof u ? u : 0) || 4, z = ("object" == typeof u ? u.y : "number" == typeof u ? u : 0) || 4, !y) {
                                y = !0;
                                var e = function (f) {
                                    u = w ? a.isDescendant(c.doc.elementFromPoint(f.changedTouches ? f.changedTouches[0].pageX - c.global.pageXOffset : f.clientX, f.changedTouches ? f.changedTouches[0].pageY - c.global.pageYOffset : f.clientY), C) :
                                        u && (f.changedTouches ? f.changedTouches[0].target : f.target) == C && Math.abs((f.changedTouches ? f.changedTouches[0].pageX - c.global.pageXOffset : f.clientX) - x) <= A && Math.abs((f.changedTouches ? f.changedTouches[0].pageY - c.global.pageYOffset : f.clientY) - v) <= z
                                };
                                c.doc.addEventListener(b, function (a) {
                                    l.isRight(a) || (e(a), w && a.preventDefault())
                                }, !0);
                                c.doc.addEventListener(n, function (f) {
                                    if (!l.isRight(f) && (e(f), u)) {
                                        H = (new Date).getTime();
                                        var b = w ? C : f.target;
                                        "LABEL" === b.tagName && (b = a.byId(b.getAttribute("for")) || b);
                                        var c =
                                            f.changedTouches ? f.changedTouches[0] : f,
                                            d = function (a) {
                                                var b = document.createEvent("MouseEvents");
                                                b._dojo_click = !0;
                                                b.initMouseEvent(a, !0, !0, f.view, f.detail, c.screenX, c.screenY, c.clientX, c.clientY, f.ctrlKey, f.altKey, f.shiftKey, f.metaKey, 0, null);
                                                return b
                                            },
                                            n = d("mousedown"),
                                            s = d("mouseup"),
                                            m = d("click");
                                        setTimeout(function () {
                                            h.emit(b, "mousedown", n);
                                            h.emit(b, "mouseup", s);
                                            h.emit(b, "click", m);
                                            H = (new Date).getTime()
                                        }, 0)
                                    }
                                }, !0);
                                f = function (a) {
                                    c.doc.addEventListener(a, function (f) {
                                        var b = f.target;
                                        u && (!f._dojo_click &&
                                            (new Date).getTime() <= H + 1E3 && !("INPUT" == b.tagName && g.contains(b, "dijitOffScreen"))) && (f.stopPropagation(), f.stopImmediatePropagation && f.stopImmediatePropagation(), "click" == a && (("INPUT" != b.tagName || "radio" == b.type && (g.contains(b, "dijitCheckBoxInput") || g.contains(b, "mblRadioButton")) || "checkbox" == b.type && (g.contains(b, "dijitCheckBoxInput") || g.contains(b, "mblCheckBox"))) && "TEXTAREA" != b.tagName && "AUDIO" != b.tagName && "VIDEO" != b.tagName) && f.preventDefault())
                                    }, !0)
                                };
                                f("click");
                                f("mousedown");
                                f("mouseup")
                            }
                    }
                }
                var t = 5 > k("ios"),
                    s = k("pointer-events") || k("MSPointer"),
                    n = function () {
                        var a = {},
                            f;
                        for (f in {
                                down: 1,
                                move: 1,
                                up: 1,
                                cancel: 1,
                                over: 1,
                                out: 1
                            }) a[f] = k("MSPointer") ? "MSPointer" + f.charAt(0).toUpperCase() + f.slice(1) : "pointer" + f;
                        return a
                    }(),
                    f = k("touch-events"),
                    y, u, w = !1,
                    C, x, v, A, z, H, D, F;
                k("touch") && (s ? e(function () {
                    c.doc.addEventListener(n.down, function (a) {
                        m(a, n.move, n.up)
                    }, !0)
                }) : e(function () {
                    function a(f) {
                        var b = q.delegate(f, {
                            bubbles: !0
                        });
                        6 <= k("ios") && (b.touches = f.touches, b.altKey = f.altKey, b.changedTouches = f.changedTouches,
                            b.ctrlKey = f.ctrlKey, b.metaKey = f.metaKey, b.shiftKey = f.shiftKey, b.targetTouches = f.targetTouches);
                        return b
                    }
                    F = c.body();
                    c.doc.addEventListener("touchstart", function (a) {
                        D = (new Date).getTime();
                        var f = F;
                        F = a.target;
                        h.emit(f, "dojotouchout", {
                            relatedTarget: F,
                            bubbles: !0
                        });
                        h.emit(F, "dojotouchover", {
                            relatedTarget: f,
                            bubbles: !0
                        });
                        m(a, "touchmove", "touchend")
                    }, !0);
                    h(c.doc, "touchmove", function (f) {
                        D = (new Date).getTime();
                        var b = c.doc.elementFromPoint(f.pageX - (t ? 0 : c.global.pageXOffset), f.pageY - (t ? 0 : c.global.pageYOffset));
                        b && (F !== b && (h.emit(F, "dojotouchout", {
                            relatedTarget: b,
                            bubbles: !0
                        }), h.emit(b, "dojotouchover", {
                            relatedTarget: F,
                            bubbles: !0
                        }), F = b), h.emit(b, "dojotouchmove", a(f)) || f.preventDefault())
                    });
                    h(c.doc, "touchend", function (f) {
                        D = (new Date).getTime();
                        var b = c.doc.elementFromPoint(f.pageX - (t ? 0 : c.global.pageXOffset), f.pageY - (t ? 0 : c.global.pageYOffset)) || c.body();
                        h.emit(b, "dojotouchend", a(f))
                    })
                }));
                p = {
                    press: b("mousedown", "touchstart", n.down),
                    move: b("mousemove", "dojotouchmove", n.move),
                    release: b("mouseup", "dojotouchend",
                        n.up),
                    cancel: b(l.leave, "touchcancel", s ? n.cancel : null),
                    over: b("mouseover", "dojotouchover", n.over),
                    out: b("mouseout", "dojotouchout", n.out),
                    enter: l._eventHandler(b("mouseover", "dojotouchover", n.over)),
                    leave: l._eventHandler(b("mouseout", "dojotouchout", n.out))
                };
                return r.touch = p
            })
        },
        "dijit/_base/scroll": function () {
            define(["dojo/window", "../main"], function (r, p) {
                p.scrollIntoView = function (a, g) {
                    r.scrollIntoView(a, g)
                }
            })
        },
        "dijit/_base/sniff": function () {
            define(["dojo/uacss"], function () {})
        },
        "dojo/uacss": function () {
            define(["./dom-geometry",
"./_base/lang", "./domReady", "./sniff", "./_base/window"], function (r, p, a, g, q) {
                var h = q.doc.documentElement;
                q = g("ie");
                var k = g("trident"),
                    l = g("opera"),
                    e = Math.floor,
                    c = g("ff"),
                    b = r.boxModel.replace(/-/, ""),
                    l = {
                        dj_quirks: g("quirks"),
                        dj_opera: l,
                        dj_khtml: g("khtml"),
                        dj_webkit: g("webkit"),
                        dj_safari: g("safari"),
                        dj_chrome: g("chrome"),
                        dj_edge: g("edge"),
                        dj_gecko: g("mozilla"),
                        dj_ios: g("ios"),
                        dj_android: g("android")
                    };
                q && (l.dj_ie = !0, l["dj_ie" + e(q)] = !0, l.dj_iequirks = g("quirks"));
                k && (l.dj_trident = !0, l["dj_trident" + e(k)] = !0);
                c && (l["dj_ff" + e(c)] = !0);
                l["dj_" + b] = !0;
                var d = "",
                    m;
                for (m in l) l[m] && (d += m + " ");
                h.className = p.trim(h.className + " " + d);
                a(function () {
                    if (!r.isBodyLtr()) {
                        var a = "dj_rtl dijitRtl " + d.replace(/ /g, "-rtl ");
                        h.className = p.trim(h.className + " " + a + "dj_rtl dijitRtl " + d.replace(/ /g, "-rtl "))
                    }
                });
                return g
            })
        },
        "dijit/_base/typematic": function () {
            define(["../typematic"], function () {})
        },
        "dijit/typematic": function () {
            define("dojo/_base/array dojo/_base/connect dojo/_base/lang dojo/on dojo/sniff ./main".split(" "), function (r,
                p, a, g, q, h) {
                var k = h.typematic = {
                    _fireEventAndReload: function () {
                        this._timer = null;
                        this._callback(++this._count, this._node, this._evt);
                        this._currentTimeout = Math.max(0 > this._currentTimeout ? this._initialDelay : 1 < this._subsequentDelay ? this._subsequentDelay : Math.round(this._currentTimeout * this._subsequentDelay), this._minDelay);
                        this._timer = setTimeout(a.hitch(this, "_fireEventAndReload"), this._currentTimeout)
                    },
                    trigger: function (l, e, c, b, d, m, t, s) {
                        if (d != this._obj) {
                            this.stop();
                            this._initialDelay = t || 500;
                            this._subsequentDelay =
                                m || 0.9;
                            this._minDelay = s || 10;
                            this._obj = d;
                            this._node = c;
                            this._count = this._currentTimeout = -1;
                            this._callback = a.hitch(e, b);
                            this._evt = {
                                faux: !0
                            };
                            for (var n in l) "layerX" != n && "layerY" != n && (e = l[n], "function" != typeof e && "undefined" != typeof e && (this._evt[n] = e));
                            this._fireEventAndReload()
                        }
                    },
                    stop: function () {
                        this._timer && (clearTimeout(this._timer), this._timer = null);
                        this._obj && (this._callback(-1, this._node, this._evt), this._obj = null)
                    },
                    addKeyListener: function (l, e, c, b, d, m, t) {
                        var s = "keyCode" in e ? "keyCode" : "charCode" in
                            e ? "charCode" : "charOrCode",
                            n = [g(l, "keyCode" in e ? "keydown" : "charCode" in e ? "keypress" : p._keypress, a.hitch(this, function (a) {
                                a[s] == e[s] && (void 0 === e.ctrlKey || e.ctrlKey == a.ctrlKey) && (void 0 === e.altKey || e.altKey == a.altKey) && (void 0 === e.metaKey || e.metaKey == (a.metaKey || !1)) && (void 0 === e.shiftKey || e.shiftKey == a.shiftKey) ? (a.stopPropagation(), a.preventDefault(), k.trigger(a, c, l, b, e, d, m, t)) : k._obj == e && k.stop()
                            })), g(l, "keyup", a.hitch(this, function () {
                                k._obj == e && k.stop()
                            }))];
                        return {
                            remove: function () {
                                r.forEach(n,
                                    function (a) {
                                        a.remove()
                                    })
                            }
                        }
                    },
                    addMouseListener: function (l, e, c, b, d, m) {
                        var t = [g(l, "mousedown", a.hitch(this, function (a) {
                            a.preventDefault();
                            k.trigger(a, e, l, c, l, b, d, m)
                        })), g(l, "mouseup", a.hitch(this, function (a) {
                            this._obj && a.preventDefault();
                            k.stop()
                        })), g(l, "mouseout", a.hitch(this, function (a) {
                            this._obj && a.preventDefault();
                            k.stop()
                        })), g(l, "dblclick", a.hitch(this, function (s) {
                            s.preventDefault();
                            9 > q("ie") && (k.trigger(s, e, l, c, l, b, d, m), setTimeout(a.hitch(this, k.stop), 50))
                        }))];
                        return {
                            remove: function () {
                                r.forEach(t,
                                    function (a) {
                                        a.remove()
                                    })
                            }
                        }
                    },
                    addListener: function (a, e, c, b, d, m, t, s) {
                        var n = [this.addKeyListener(e, c, b, d, m, t, s), this.addMouseListener(a, b, d, m, t, s)];
                        return {
                            remove: function () {
                                r.forEach(n, function (a) {
                                    a.remove()
                                })
                            }
                        }
                    }
                };
                return k
            })
        },
        "dijit/_base/wai": function () {
            define(["dojo/dom-attr", "dojo/_base/lang", "../main", "../hccss"], function (r, p, a) {
                p.mixin(a, {
                    hasWaiRole: function (a, q) {
                        var h = this.getWaiRole(a);
                        return q ? -1 < h.indexOf(q) : 0 < h.length
                    },
                    getWaiRole: function (a) {
                        return p.trim((r.get(a, "role") || "").replace("wairole:",
                            ""))
                    },
                    setWaiRole: function (a, q) {
                        r.set(a, "role", q)
                    },
                    removeWaiRole: function (a, q) {
                        var h = r.get(a, "role");
                        h && (q ? (h = p.trim((" " + h + " ").replace(" " + q + " ", " ")), r.set(a, "role", h)) : a.removeAttribute("role"))
                    },
                    hasWaiState: function (a, q) {
                        return a.hasAttribute ? a.hasAttribute("aria-" + q) : !!a.getAttribute("aria-" + q)
                    },
                    getWaiState: function (a, q) {
                        return a.getAttribute("aria-" + q) || ""
                    },
                    setWaiState: function (a, q, h) {
                        a.setAttribute("aria-" + q, h)
                    },
                    removeWaiState: function (a, q) {
                        a.removeAttribute("aria-" + q)
                    }
                });
                return a
            })
        },
        "dijit/hccss": function () {
            define(["dojo/dom-class",
"dojo/hccss", "dojo/domReady", "dojo/_base/window"], function (r, p, a, g) {
                a(function () {
                    p("highcontrast") && r.add(g.body(), "dijit_a11y")
                });
                return p
            })
        },
        "dojo/hccss": function () {
            define("require ./_base/config ./dom-class ./dom-style ./has ./domReady ./_base/window".split(" "), function (r, p, a, g, q, h, k) {
                q.add("highcontrast", function () {
                    var a = k.doc.createElement("div");
                    try {
                        a.style.cssText = 'border: 1px solid; border-color:red green; position: absolute; height: 5px; top: -999px;background-image: url("' + (p.blankGif ||
                            r.toUrl("./resources/blank.gif")) + '");';
                        k.body().appendChild(a);
                        var e = g.getComputedStyle(a),
                            c = e.backgroundImage;
                        return e.borderTopColor == e.borderRightColor || c && ("none" == c || "url(invalid-url:)" == c)
                    } catch (b) {
                        return console.warn("hccss: exception detecting high-contrast mode, document is likely hidden: " + b.toString()), !1
                    } finally {
                        8 >= q("ie") ? a.outerHTML = "" : k.body().removeChild(a)
                    }
                });
                h(function () {
                    q("highcontrast") && a.add(k.body(), "dj_a11y")
                });
                return q
            })
        },
        "dijit/_base/window": function () {
            define(["dojo/window",
"../main"], function (r, p) {
                p.getDocumentWindow = function (a) {
                    return r.get(a)
                }
            })
        },
        "dijit/form/DropDownButton": function () {
            define("dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/query ../registry ../popup ./Button ../_Container ../_HasDropDown dojo/text!./templates/DropDownButton.html ../a11yclick".split(" "), function (r, p, a, g, q, h, k, l, e, c) {
                return r("dijit.form.DropDownButton", [k, l, e], {
                    baseClass: "dijitDropDownButton",
                    templateString: c,
                    _fillContent: function () {
                        var a = this.srcNodeRef,
                            c = this.containerNode;
                        if (a && c)
                            for (; a.hasChildNodes();) {
                                var e = a.firstChild;
                                e.hasAttribute && (e.hasAttribute("data-dojo-type") || e.hasAttribute("dojoType") || e.hasAttribute("data-" + p._scopeName + "-type") || e.hasAttribute(p._scopeName + "Type")) ? (this.dropDownContainer = this.ownerDocument.createElement("div"), this.dropDownContainer.appendChild(e)) : c.appendChild(e)
                            }
                    },
                    startup: function () {
                        this._started || (!this.dropDown && this.dropDownContainer && (this.dropDown = q.byNode(this.dropDownContainer.firstChild), delete this.dropDownContainer),
                            this.dropDown && h.hide(this.dropDown), this.inherited(arguments))
                    },
                    isLoaded: function () {
                        var a = this.dropDown;
                        return !!a && (!a.href || a.isLoaded)
                    },
                    loadDropDown: function (b) {
                        var c = this.dropDown,
                            e = c.on("load", a.hitch(this, function () {
                                e.remove();
                                b()
                            }));
                        c.refresh()
                    },
                    isFocusable: function () {
                        return this.inherited(arguments) && !this._mouseDown
                    }
                })
            })
        },
        "dijit/form/Button": function () {
            define("require dojo/_base/declare dojo/dom-class dojo/has dojo/_base/kernel dojo/_base/lang dojo/ready ./_FormWidget ./_ButtonMixin dojo/text!./templates/Button.html ../a11yclick".split(" "),
                function (r, p, a, g, q, h, k, l, e, c) {
                    g("dijit-legacy-requires") && k(0, function () {
                        r(["dijit/form/DropDownButton", "dijit/form/ComboButton", "dijit/form/ToggleButton"])
                    });
                    k = p("dijit.form.Button" + (g("dojo-bidi") ? "_NoBidi" : ""), [l, e], {
                        showLabel: !0,
                        iconClass: "dijitNoIcon",
                        _setIconClassAttr: {
                            node: "iconNode",
                            type: "class"
                        },
                        baseClass: "dijitButton",
                        templateString: c,
                        _setValueAttr: "valueNode",
                        _setNameAttr: function (a) {
                            this.valueNode && this.valueNode.setAttribute("name", a)
                        },
                        postCreate: function () {
                            this.inherited(arguments);
                            this._setLabelFromContainer()
                        },
                        _setLabelFromContainer: function () {
                            this.containerNode && !this.label && (this.label = h.trim(this.containerNode.innerHTML), this.onLabelSet())
                        },
                        _setShowLabelAttr: function (b) {
                            this.containerNode && a.toggle(this.containerNode, "dijitDisplayNone", !b);
                            this._set("showLabel", b)
                        },
                        setLabel: function (a) {
                            q.deprecated("dijit.form.Button.setLabel() is deprecated.  Use set('label', ...) instead.", "", "2.0");
                            this.set("label", a)
                        },
                        onLabelSet: function () {
                            this.inherited(arguments);
                            !this.showLabel &&
                                !("title" in this.params) && (this.titleNode.title = h.trim(this.containerNode.innerText || this.containerNode.textContent || ""))
                        }
                    });
                    g("dojo-bidi") && (k = p("dijit.form.Button", k, {
                        onLabelSet: function () {
                            this.inherited(arguments);
                            this.titleNode.title && this.applyTextDir(this.titleNode, this.titleNode.title)
                        },
                        _setTextDirAttr: function (a) {
                            this._created && this.textDir != a && (this._set("textDir", a), this._setLabelAttr(this.label))
                        }
                    }));
                    return k
                })
        },
        "dijit/form/_FormWidget": function () {
            define("dojo/_base/declare dojo/sniff dojo/_base/kernel dojo/ready ../_Widget ../_CssStateMixin ../_TemplatedMixin ./_FormWidgetMixin".split(" "),
                function (r, p, a, g, q, h, k, l) {
                    p("dijit-legacy-requires") && g(0, function () {
                        require(["dijit/form/_FormValueWidget"])
                    });
                    return r("dijit.form._FormWidget", [q, k, h, l], {
                        setDisabled: function (e) {
                            a.deprecated("setDisabled(" + e + ") is deprecated. Use set('disabled'," + e + ") instead.", "", "2.0");
                            this.set("disabled", e)
                        },
                        setValue: function (e) {
                            a.deprecated("dijit.form._FormWidget:setValue(" + e + ") is deprecated.  Use set('value'," + e + ") instead.", "", "2.0");
                            this.set("value", e)
                        },
                        getValue: function () {
                            a.deprecated(this.declaredClass +
                                "::getValue() is deprecated. Use get('value') instead.", "", "2.0");
                            return this.get("value")
                        },
                        postMixInProperties: function () {
                            this.nameAttrSetting = this.name && !p("msapp") ? 'name\x3d"' + this.name.replace(/"/g, "\x26quot;") + '"' : "";
                            this.inherited(arguments)
                        }
                    })
                })
        },
        "dijit/_Widget": function () {
            define("dojo/aspect dojo/_base/config dojo/_base/connect dojo/_base/declare dojo/has dojo/_base/kernel dojo/_base/lang dojo/query dojo/ready ./registry ./_WidgetBase ./_OnDijitClickMixin ./_FocusMixin dojo/uacss ./hccss".split(" "),
                function (r, p, a, g, q, h, k, l, e, c, b, d, m) {
                    function t() {}

                    function s(b) {
                        return function (f, c, d, e) {
                            return f && "string" == typeof c && f[c] == t ? f.on(c.substring(2).toLowerCase(), k.hitch(d, e)) : b.apply(a, arguments)
                        }
                    }
                    r.around(a, "connect", s);
                    h.connect && r.around(h, "connect", s);
                    r = g("dijit._Widget", [b, d, m], {
                        onClick: t,
                        onDblClick: t,
                        onKeyDown: t,
                        onKeyPress: t,
                        onKeyUp: t,
                        onMouseDown: t,
                        onMouseMove: t,
                        onMouseOut: t,
                        onMouseOver: t,
                        onMouseLeave: t,
                        onMouseEnter: t,
                        onMouseUp: t,
                        constructor: function (a) {
                            this._toConnect = {};
                            for (var f in a) this[f] ===
                                t && (this._toConnect[f.replace(/^on/, "").toLowerCase()] = a[f], delete a[f])
                        },
                        postCreate: function () {
                            this.inherited(arguments);
                            for (var a in this._toConnect) this.on(a, this._toConnect[a]);
                            delete this._toConnect
                        },
                        on: function (b, f) {
                            return this[this._onMap(b)] === t ? a.connect(this.domNode, b.toLowerCase(), this, f) : this.inherited(arguments)
                        },
                        _setFocusedAttr: function (a) {
                            this._focused = a;
                            this._set("focused", a)
                        },
                        setAttribute: function (a, f) {
                            h.deprecated(this.declaredClass + "::setAttribute(attr, value) is deprecated. Use set() instead.",
                                "", "2.0");
                            this.set(a, f)
                        },
                        attr: function (a, f) {
                            return 2 <= arguments.length || "object" === typeof a ? this.set.apply(this, arguments) : this.get(a)
                        },
                        getDescendants: function () {
                            h.deprecated(this.declaredClass + "::getDescendants() is deprecated. Use getChildren() instead.", "", "2.0");
                            return this.containerNode ? l("[widgetId]", this.containerNode).map(c.byNode) : []
                        },
                        _onShow: function () {
                            this.onShow()
                        },
                        onShow: function () {},
                        onHide: function () {},
                        onClose: function () {
                            return !0
                        }
                    });
                    q("dijit-legacy-requires") && e(0, function () {
                        require(["dijit/_base"])
                    });
                    return r
                })
        },
        "dijit/_WidgetBase": function () {
            define("require dojo/_base/array dojo/aspect dojo/_base/config dojo/_base/connect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/has dojo/_base/kernel dojo/_base/lang dojo/on dojo/ready dojo/Stateful dojo/topic dojo/_base/window ./Destroyable dojo/has!dojo-bidi?./_BidiMixin ./registry".split(" "), function (r, p, a, g, q, h, k, l, e, c, b, d, m, t, s, n, f, y, u, w, C, x, v) {
                function A(a) {
                    return function (f) {
                        l[f ?
                            "set" : "remove"](this.domNode, a, f);
                        this._set(a, f)
                    }
                }
                m.add("dijit-legacy-requires", !t.isAsync);
                m.add("dojo-bidi", !1);
                m("dijit-legacy-requires") && f(0, function () {
                    r(["dijit/_base/manager"])
                });
                var z = {};
                g = h("dijit._WidgetBase", [y, C], {
                    id: "",
                    _setIdAttr: "domNode",
                    lang: "",
                    _setLangAttr: A("lang"),
                    dir: "",
                    _setDirAttr: A("dir"),
                    "class": "",
                    _setClassAttr: {
                        node: "domNode",
                        type: "class"
                    },
                    _setTypeAttr: null,
                    style: "",
                    title: "",
                    tooltip: "",
                    baseClass: "",
                    srcNodeRef: null,
                    domNode: null,
                    containerNode: null,
                    ownerDocument: null,
                    _setOwnerDocumentAttr: function (a) {
                        this._set("ownerDocument",
                            a)
                    },
                    attributeMap: {},
                    _blankGif: g.blankGif || r.toUrl("dojo/resources/blank.gif"),
                    textDir: "",
                    _introspect: function () {
                        var a = this.constructor;
                        if (!a._setterAttrs) {
                            var f = a.prototype,
                                b = a._setterAttrs = [],
                                a = a._onMap = {},
                                c;
                            for (c in f.attributeMap) b.push(c);
                            for (c in f) /^on/.test(c) && (a[c.substring(2).toLowerCase()] = c), /^_set[A-Z](.*)Attr$/.test(c) && (c = c.charAt(4).toLowerCase() + c.substr(5, c.length - 9), (!f.attributeMap || !(c in f.attributeMap)) && b.push(c))
                        }
                    },
                    postscript: function (a, f) {
                        this.create(a, f)
                    },
                    create: function (a,
                        f) {
                        this._introspect();
                        this.srcNodeRef = k.byId(f);
                        this._connects = [];
                        this._supportingWidgets = [];
                        this.srcNodeRef && (this.srcNodeRef.id && "string" == typeof this.srcNodeRef.id) && (this.id = this.srcNodeRef.id);
                        a && (this.params = a, s.mixin(this, a));
                        this.postMixInProperties();
                        this.id || (this.id = v.getUniqueId(this.declaredClass.replace(/\./g, "_")), this.params && delete this.params.id);
                        this.ownerDocument = this.ownerDocument || (this.srcNodeRef ? this.srcNodeRef.ownerDocument : document);
                        this.ownerDocumentBody = w.body(this.ownerDocument);
                        v.add(this);
                        this.buildRendering();
                        var b;
                        if (this.domNode) {
                            this._applyAttributes();
                            var c = this.srcNodeRef;
                            c && (c.parentNode && this.domNode !== c) && (c.parentNode.replaceChild(this.domNode, c), b = !0);
                            this.domNode.setAttribute("widgetId", this.id)
                        }
                        this.postCreate();
                        b && delete this.srcNodeRef;
                        this._created = !0
                    },
                    _applyAttributes: function () {
                        var a = {},
                            f;
                        for (f in this.params || {}) a[f] = this._get(f);
                        p.forEach(this.constructor._setterAttrs, function (f) {
                            if (!(f in a)) {
                                var b = this._get(f);
                                b && this.set(f, b)
                            }
                        }, this);
                        for (f in a) this.set(f,
                            a[f])
                    },
                    postMixInProperties: function () {},
                    buildRendering: function () {
                        this.domNode || (this.domNode = this.srcNodeRef || this.ownerDocument.createElement("div"));
                        if (this.baseClass) {
                            var a = this.baseClass.split(" ");
                            this.isLeftToRight() || (a = a.concat(p.map(a, function (a) {
                                return a + "Rtl"
                            })));
                            e.add(this.domNode, a)
                        }
                    },
                    postCreate: function () {},
                    startup: function () {
                        this._started || (this._started = !0, p.forEach(this.getChildren(), function (a) {
                            !a._started && (!a._destroyed && s.isFunction(a.startup)) && (a.startup(), a._started = !0)
                        }))
                    },
                    destroyRecursive: function (a) {
                        this._beingDestroyed = !0;
                        this.destroyDescendants(a);
                        this.destroy(a)
                    },
                    destroy: function (a) {
                        function f(b) {
                            b.destroyRecursive ? b.destroyRecursive(a) : b.destroy && b.destroy(a)
                        }
                        this._beingDestroyed = !0;
                        this.uninitialize();
                        p.forEach(this._connects, s.hitch(this, "disconnect"));
                        p.forEach(this._supportingWidgets, f);
                        this.domNode && p.forEach(v.findWidgets(this.domNode, this.containerNode), f);
                        this.destroyRendering(a);
                        v.remove(this.id);
                        this._destroyed = !0
                    },
                    destroyRendering: function (a) {
                        this.bgIframe &&
                            (this.bgIframe.destroy(a), delete this.bgIframe);
                        this.domNode && (a ? l.remove(this.domNode, "widgetId") : c.destroy(this.domNode), delete this.domNode);
                        this.srcNodeRef && (a || c.destroy(this.srcNodeRef), delete this.srcNodeRef)
                    },
                    destroyDescendants: function (a) {
                        p.forEach(this.getChildren(), function (f) {
                            f.destroyRecursive && f.destroyRecursive(a)
                        })
                    },
                    uninitialize: function () {
                        return !1
                    },
                    _setStyleAttr: function (a) {
                        var f = this.domNode;
                        s.isObject(a) ? d.set(f, a) : f.style.cssText = f.style.cssText ? f.style.cssText + ("; " + a) : a;
                        this._set("style",
                            a)
                    },
                    _attrToDom: function (a, f, b) {
                        b = 3 <= arguments.length ? b : this.attributeMap[a];
                        p.forEach(s.isArray(b) ? b : [b], function (b) {
                            var c = this[b.node || b || "domNode"];
                            switch (b.type || "attribute") {
                            case "attribute":
                                s.isFunction(f) && (f = s.hitch(this, f));
                                b = b.attribute ? b.attribute : /^on[A-Z][a-zA-Z]*$/.test(a) ? a.toLowerCase() : a;
                                c.tagName ? l.set(c, b, f) : c.set(b, f);
                                break;
                            case "innerText":
                                c.innerHTML = "";
                                c.appendChild(this.ownerDocument.createTextNode(f));
                                break;
                            case "innerHTML":
                                c.innerHTML = f;
                                break;
                            case "class":
                                e.replace(c, f, this[a]);
                                break;
                            case "toggleClass":
                                e.toggle(c, b.className || a, f)
                            }
                        }, this)
                    },
                    get: function (a) {
                        var f = this._getAttrNames(a);
                        return this[f.g] ? this[f.g]() : this._get(a)
                    },
                    set: function (a, f) {
                        if ("object" === typeof a) {
                            for (var b in a) this.set(b, a[b]);
                            return this
                        }
                        b = this._getAttrNames(a);
                        var c = this[b.s];
                        if (s.isFunction(c)) var d = c.apply(this, Array.prototype.slice.call(arguments, 1));
                        else {
                            var c = this.focusNode && !s.isFunction(this.focusNode) ? "focusNode" : "domNode",
                                n = this[c] && this[c].tagName,
                                e;
                            if (e = n)
                                if (!(e = z[n])) {
                                    e = this[c];
                                    var m = {},
                                        u;
                                    for (u in e) m[u.toLowerCase()] = !0;
                                    e = z[n] = m
                                }
                            u = e;
                            b = a in this.attributeMap ? this.attributeMap[a] : b.s in this ? this[b.s] : u && b.l in u && "function" != typeof f || /^aria-|^data-|^role$/.test(a) ? c : null;
                            null != b && this._attrToDom(a, f, b);
                            this._set(a, f)
                        }
                        return d || this
                    },
                    _attrPairNames: {},
                    _getAttrNames: function (a) {
                        var f = this._attrPairNames;
                        if (f[a]) return f[a];
                        var b = a.replace(/^[a-z]|-[a-zA-Z]/g, function (a) {
                            return a.charAt(a.length - 1).toUpperCase()
                        });
                        return f[a] = {
                            n: a + "Node",
                            s: "_set" + b + "Attr",
                            g: "_get" + b + "Attr",
                            l: b.toLowerCase()
                        }
                    },
                    _set: function (a, f) {
                        var b = this[a];
                        this[a] = f;
                        if (this._created && !(b === f || b !== b && f !== f)) this._watchCallbacks && this._watchCallbacks(a, b, f), this.emit("attrmodified-" + a, {
                            detail: {
                                prevValue: b,
                                newValue: f
                            }
                        })
                    },
                    _get: function (a) {
                        return this[a]
                    },
                    emit: function (a, f, b) {
                        f = f || {};
                        void 0 === f.bubbles && (f.bubbles = !0);
                        void 0 === f.cancelable && (f.cancelable = !0);
                        f.detail || (f.detail = {});
                        f.detail.widget = this;
                        var c, d = this["on" + a];
                        d && (c = d.apply(this, b ? b : [f]));
                        this._started && !this._beingDestroyed && n.emit(this.domNode, a.toLowerCase(),
                            f);
                        return c
                    },
                    on: function (f, b) {
                        var c = this._onMap(f);
                        return c ? a.after(this, c, b, !0) : this.own(n(this.domNode, f, b))[0]
                    },
                    _onMap: function (a) {
                        var f = this.constructor,
                            b = f._onMap;
                        if (!b) {
                            var b = f._onMap = {},
                                c;
                            for (c in f.prototype) /^on/.test(c) && (b[c.replace(/^on/, "").toLowerCase()] = c)
                        }
                        return b["string" == typeof a && a.toLowerCase()]
                    },
                    toString: function () {
                        return "[Widget " + this.declaredClass + ", " + (this.id || "NO ID") + "]"
                    },
                    getChildren: function () {
                        return this.containerNode ? v.findWidgets(this.containerNode) : []
                    },
                    getParent: function () {
                        return v.getEnclosingWidget(this.domNode.parentNode)
                    },
                    connect: function (a, f, b) {
                        return this.own(q.connect(a, f, this, b))[0]
                    },
                    disconnect: function (a) {
                        a.remove()
                    },
                    subscribe: function (a, f) {
                        return this.own(u.subscribe(a, s.hitch(this, f)))[0]
                    },
                    unsubscribe: function (a) {
                        a.remove()
                    },
                    isLeftToRight: function () {
                        return this.dir ? "ltr" == this.dir.toLowerCase() : b.isBodyLtr(this.ownerDocument)
                    },
                    isFocusable: function () {
                        return this.focus && "none" != d.get(this.domNode, "display")
                    },
                    placeAt: function (a, f) {
                        var b = !a.tagName && v.byId(a);
                        b && b.addChild && (!f || "number" === typeof f) ? b.addChild(this,
                            f) : (b = b && "domNode" in b ? b.containerNode && !/after|before|replace/.test(f || "") ? b.containerNode : b.domNode : k.byId(a, this.ownerDocument), c.place(this.domNode, b, f), !this._started && (this.getParent() || {})._started && this.startup());
                        return this
                    },
                    defer: function (a, f) {
                        var b = setTimeout(s.hitch(this, function () {
                            b && (b = null, this._destroyed || s.hitch(this, a)())
                        }), f || 0);
                        return {
                            remove: function () {
                                b && (clearTimeout(b), b = null);
                                return null
                            }
                        }
                    }
                });
                m("dojo-bidi") && g.extend(x);
                return g
            })
        },
        "dijit/Destroyable": function () {
            define(["dojo/_base/array",
"dojo/aspect", "dojo/_base/declare"], function (r, p, a) {
                return a("dijit.Destroyable", null, {
                    destroy: function (a) {
                        this._destroyed = !0
                    },
                    own: function () {
                        var a = ["destroyRecursive", "destroy", "remove"];
                        r.forEach(arguments, function (q) {
                            function h() {
                                l.remove();
                                r.forEach(e, function (a) {
                                    a.remove()
                                })
                            }
                            var k, l = p.before(this, "destroy", function (a) {
                                    q[k](a)
                                }),
                                e = [];
                            q.then ? (k = "cancel", q.then(h, h)) : r.forEach(a, function (a) {
                                "function" === typeof q[a] && (k || (k = a), e.push(p.after(q, a, h, !0)))
                            })
                        }, this);
                        return arguments
                    }
                })
            })
        },
        "dijit/_OnDijitClickMixin": function () {
            define("dojo/on dojo/_base/array dojo/keys dojo/_base/declare dojo/has ./a11yclick".split(" "),
                function (r, p, a, g, q, h) {
                    r = g("dijit._OnDijitClickMixin", null, {
                        connect: function (a, l, e) {
                            return this.inherited(arguments, [a, "ondijitclick" == l ? h : l, e])
                        }
                    });
                    r.a11yclick = h;
                    return r
                })
        },
        "dijit/a11yclick": function () {
            define(["dojo/keys", "dojo/mouse", "dojo/on", "dojo/touch"], function (r, p, a, g) {
                function q(a) {
                    if ((a.keyCode === r.ENTER || a.keyCode === r.SPACE) && !/input|button|textarea/i.test(a.target.nodeName))
                        for (a = a.target; a; a = a.parentNode)
                            if (a.dojoClick) return !0
                }
                var h;
                a(document, "keydown", function (a) {
                    q(a) ? (h = a.target, a.preventDefault()) :
                        h = null
                });
                a(document, "keyup", function (l) {
                    q(l) && l.target == h && (h = null, a.emit(l.target, "click", {
                        cancelable: !0,
                        bubbles: !0,
                        ctrlKey: l.ctrlKey,
                        shiftKey: l.shiftKey,
                        metaKey: l.metaKey,
                        altKey: l.altKey,
                        _origType: l.type
                    }))
                });
                var k = function (l, e) {
                    l.dojoClick = !0;
                    return a(l, "click", e)
                };
                k.click = k;
                k.press = function (l, e) {
                    var c = a(l, g.press, function (a) {
                            ("mousedown" != a.type || p.isLeft(a)) && e(a)
                        }),
                        b = a(l, "keydown", function (a) {
                            (a.keyCode === r.ENTER || a.keyCode === r.SPACE) && e(a)
                        });
                    return {
                        remove: function () {
                            c.remove();
                            b.remove()
                        }
                    }
                };
                k.release = function (l, e) {
                    var c = a(l, g.release, function (a) {
                            ("mouseup" != a.type || p.isLeft(a)) && e(a)
                        }),
                        b = a(l, "keyup", function (a) {
                            (a.keyCode === r.ENTER || a.keyCode === r.SPACE) && e(a)
                        });
                    return {
                        remove: function () {
                            c.remove();
                            b.remove()
                        }
                    }
                };
                k.move = g.move;
                return k
            })
        },
        "dijit/_FocusMixin": function () {
            define(["./focus", "./_WidgetBase", "dojo/_base/declare", "dojo/_base/lang"], function (r, p, a, g) {
                g.extend(p, {
                    focused: !1,
                    onFocus: function () {},
                    onBlur: function () {},
                    _onFocus: function () {
                        this.onFocus()
                    },
                    _onBlur: function () {
                        this.onBlur()
                    }
                });
                return a("dijit._FocusMixin", null, {
                    _focusManager: r
                })
            })
        },
        "dijit/_CssStateMixin": function () {
            define("dojo/_base/array dojo/_base/declare dojo/dom dojo/dom-class dojo/has dojo/_base/lang dojo/on dojo/domReady dojo/touch dojo/_base/window ./a11yclick ./registry".split(" "), function (r, p, a, g, q, h, k, l, e, c, b, d) {
                p = p("dijit._CssStateMixin", [], {
                    hovering: !1,
                    active: !1,
                    _applyAttributes: function () {
                        this.inherited(arguments);
                        r.forEach("disabled readOnly checked selected focused state hovering active _opened".split(" "),
                            function (a) {
                                this.watch(a, h.hitch(this, "_setStateClass"))
                            }, this);
                        for (var a in this.cssStateNodes || {}) this._trackMouseState(this[a], this.cssStateNodes[a]);
                        this._trackMouseState(this.domNode, this.baseClass);
                        this._setStateClass()
                    },
                    _cssMouseEvent: function (a) {
                        if (!this.disabled) switch (a.type) {
                        case "mouseover":
                        case "MSPointerOver":
                        case "pointerover":
                            this._set("hovering", !0);
                            this._set("active", this._mouseDown);
                            break;
                        case "mouseout":
                        case "MSPointerOut":
                        case "pointerout":
                            this._set("hovering", !1);
                            this._set("active", !1);
                            break;
                        case "mousedown":
                        case "touchstart":
                        case "MSPointerDown":
                        case "pointerdown":
                        case "keydown":
                            this._set("active", !0);
                            break;
                        case "mouseup":
                        case "dojotouchend":
                        case "MSPointerUp":
                        case "pointerup":
                        case "keyup":
                            this._set("active", !1)
                        }
                    },
                    _setStateClass: function () {
                        function a(f) {
                            b = b.concat(r.map(b, function (a) {
                                return a + f
                            }), "dijit" + f)
                        }
                        var b = this.baseClass.split(" ");
                        this.isLeftToRight() || a("Rtl");
                        var c = "mixed" == this.checked ? "Mixed" : this.checked ? "Checked" : "";
                        this.checked && a(c);
                        this.state && a(this.state);
                        this.selected && a("Selected");
                        this._opened && a("Opened");
                        this.disabled ? a("Disabled") : this.readOnly ? a("ReadOnly") : this.active ? a("Active") : this.hovering && a("Hover");
                        this.focused && a("Focused");
                        var c = this.stateNode || this.domNode,
                            d = {};
                        r.forEach(c.className.split(" "), function (a) {
                            d[a] = !0
                        });
                        "_stateClasses" in this && r.forEach(this._stateClasses, function (a) {
                            delete d[a]
                        });
                        r.forEach(b, function (a) {
                            d[a] = !0
                        });
                        var f = [],
                            e;
                        for (e in d) f.push(e);
                        c.className = f.join(" ");
                        this._stateClasses = b
                    },
                    _subnodeCssMouseEvent: function (a,
                        b, c) {
                        function d(f) {
                            g.toggle(a, b + "Active", f)
                        }
                        if (!this.disabled && !this.readOnly) switch (c.type) {
                        case "mouseover":
                        case "MSPointerOver":
                        case "pointerover":
                            g.toggle(a, b + "Hover", !0);
                            break;
                        case "mouseout":
                        case "MSPointerOut":
                        case "pointerout":
                            g.toggle(a, b + "Hover", !1);
                            d(!1);
                            break;
                        case "mousedown":
                        case "touchstart":
                        case "MSPointerDown":
                        case "pointerdown":
                        case "keydown":
                            d(!0);
                            break;
                        case "mouseup":
                        case "MSPointerUp":
                        case "pointerup":
                        case "dojotouchend":
                        case "keyup":
                            d(!1);
                            break;
                        case "focus":
                        case "focusin":
                            g.toggle(a,
                                b + "Focused", !0);
                            break;
                        case "blur":
                        case "focusout":
                            g.toggle(a, b + "Focused", !1)
                        }
                    },
                    _trackMouseState: function (a, b) {
                        a._cssState = b
                    }
                });
                l(function () {
                    function m(b, f, c) {
                        if (!c || !a.isDescendant(c, f))
                            for (; f && f != c; f = f.parentNode)
                                if (f._cssState) {
                                    var e = d.getEnclosingWidget(f);
                                    e && (f == e.domNode ? e._cssMouseEvent(b) : e._subnodeCssMouseEvent(f, f._cssState, b))
                                }
                    }
                    var t = c.body(),
                        s;
                    k(t, e.over, function (a) {
                        m(a, a.target, a.relatedTarget)
                    });
                    k(t, e.out, function (a) {
                        m(a, a.target, a.relatedTarget)
                    });
                    k(t, b.press, function (a) {
                        s = a.target;
                        m(a, s)
                    });
                    k(t, b.release, function (a) {
                        m(a, s);
                        s = null
                    });
                    k(t, "focusin, focusout", function (a) {
                        var f = a.target;
                        if (f._cssState && !f.getAttribute("widgetId")) {
                            var b = d.getEnclosingWidget(f);
                            b && b._subnodeCssMouseEvent(f, f._cssState, a)
                        }
                    })
                });
                return p
            })
        },
        "dijit/_TemplatedMixin": function () {
            define("dojo/cache dojo/_base/declare dojo/dom-construct dojo/_base/lang dojo/on dojo/sniff dojo/string ./_AttachMixin".split(" "), function (r, p, a, g, q, h, k, l) {
                var e = p("dijit._TemplatedMixin", l, {
                    templateString: null,
                    templatePath: null,
                    _skipNodeCache: !1,
                    searchContainerNode: !0,
                    _stringRepl: function (a) {
                        var b = this.declaredClass,
                            d = this;
                        return k.substitute(a, this, function (a, c) {
                            "!" == c.charAt(0) && (a = g.getObject(c.substr(1), !1, d));
                            if ("undefined" == typeof a) throw Error(b + " template:" + c);
                            return null == a ? "" : "!" == c.charAt(0) ? a : this._escapeValue("" + a)
                        }, this)
                    },
                    _escapeValue: function (a) {
                        return a.replace(/["'<>&]/g, function (a) {
                            return {
                                "\x26": "\x26amp;",
                                "\x3c": "\x26lt;",
                                "\x3e": "\x26gt;",
                                '"': "\x26quot;",
                                "'": "\x26#x27;"
                            }[a]
                        })
                    },
                    buildRendering: function () {
                        if (!this._rendered) {
                            this.templateString ||
                                (this.templateString = r(this.templatePath, {
                                    sanitize: !0
                                }));
                            var c = e.getCachedTemplate(this.templateString, this._skipNodeCache, this.ownerDocument),
                                b;
                            if (g.isString(c)) {
                                if (b = a.toDom(this._stringRepl(c), this.ownerDocument), 1 != b.nodeType) throw Error("Invalid template: " + c);
                            } else b = c.cloneNode(!0);
                            this.domNode = b
                        }
                        this.inherited(arguments);
                        this._rendered || this._fillContent(this.srcNodeRef);
                        this._rendered = !0
                    },
                    _fillContent: function (a) {
                        var b = this.containerNode;
                        if (a && b)
                            for (; a.hasChildNodes();) b.appendChild(a.firstChild)
                    }
                });
                e._templateCache = {};
                e.getCachedTemplate = function (c, b, d) {
                    var m = e._templateCache,
                        t = c,
                        s = m[t];
                    if (s) {
                        try {
                            if (!s.ownerDocument || s.ownerDocument == (d || document)) return s
                        } catch (n) {}
                        a.destroy(s)
                    }
                    c = k.trim(c);
                    if (b || c.match(/\$\{([^\}]+)\}/g)) return m[t] = c;
                    b = a.toDom(c, d);
                    if (1 != b.nodeType) throw Error("Invalid template: " + c);
                    return m[t] = b
                };
                h("ie") && q(window, "unload", function () {
                    var c = e._templateCache,
                        b;
                    for (b in c) {
                        var d = c[b];
                        "object" == typeof d && a.destroy(d);
                        delete c[b]
                    }
                });
                return e
            })
        },
        "dojo/cache": function () {
            define(["./_base/kernel",
"./text"], function (r) {
                return r.cache
            })
        },
        "dojo/string": function () {
            define(["./_base/kernel", "./_base/lang"], function (r, p) {
                var a = /[&<>'"\/]/g,
                    g = {
                        "\x26": "\x26amp;",
                        "\x3c": "\x26lt;",
                        "\x3e": "\x26gt;",
                        '"': "\x26quot;",
                        "'": "\x26#x27;",
                        "/": "\x26#x2F;"
                    },
                    q = {};
                p.setObject("dojo.string", q);
                q.escape = function (h) {
                    return !h ? "" : h.replace(a, function (a) {
                        return g[a]
                    })
                };
                q.rep = function (a, k) {
                    if (0 >= k || !a) return "";
                    for (var l = [];;) {
                        k & 1 && l.push(a);
                        if (!(k >>= 1)) break;
                        a += a
                    }
                    return l.join("")
                };
                q.pad = function (a, k, l, e) {
                    l || (l = "0");
                    a = String(a);
                    k = q.rep(l, Math.ceil((k - a.length) / l.length));
                    return e ? a + k : k + a
                };
                q.substitute = function (a, k, l, e) {
                    e = e || r.global;
                    l = l ? p.hitch(e, l) : function (a) {
                        return a
                    };
                    return a.replace(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g, function (a, b, d) {
                        if ("" == b) return "$";
                        a = p.getObject(b, !1, k);
                        d && (a = p.getObject(d, !1, e).call(e, a, b));
                        return l(a, b).toString()
                    })
                };
                q.trim = String.prototype.trim ? p.trim : function (a) {
                    a = a.replace(/^\s+/, "");
                    for (var k = a.length - 1; 0 <= k; k--)
                        if (/\S/.test(a.charAt(k))) {
                            a = a.substring(0, k + 1);
                            break
                        }
                    return a
                };
                return q
            })
        },
        "dijit/_AttachMixin": function () {
            define("require dojo/_base/array dojo/_base/connect dojo/_base/declare dojo/_base/lang dojo/mouse dojo/on dojo/touch ./_WidgetBase".split(" "), function (r, p, a, g, q, h, k, l, e) {
                var c = q.delegate(l, {
                        mouseenter: h.enter,
                        mouseleave: h.leave,
                        keypress: a._keypress
                    }),
                    b;
                a = g("dijit._AttachMixin", null, {
                    constructor: function () {
                        this._attachPoints = [];
                        this._attachEvents = []
                    },
                    buildRendering: function () {
                        this.inherited(arguments);
                        this._attachTemplateNodes(this.domNode);
                        this._beforeFillContent()
                    },
                    _beforeFillContent: function () {},
                    _attachTemplateNodes: function (a) {
                        for (var b = a;;)
                            if (1 == b.nodeType && (this._processTemplateNode(b, function (a, b) {
                                    return a.getAttribute(b)
                                }, this._attach) || this.searchContainerNode) && b.firstChild) b = b.firstChild;
                            else {
                                if (b == a) break;
                                for (; !b.nextSibling;)
                                    if (b = b.parentNode, b == a) return;
                                b = b.nextSibling
                            }
                    },
                    _processTemplateNode: function (a, b, c) {
                        var e = !0,
                            n = this.attachScope || this,
                            f = b(a, "dojoAttachPoint") || b(a, "data-dojo-attach-point");
                        if (f)
                            for (var y = f.split(/\s*,\s*/); f = y.shift();) q.isArray(n[f]) ?
                                n[f].push(a) : n[f] = a, e = "containerNode" != f, this._attachPoints.push(f);
                        if (b = b(a, "dojoAttachEvent") || b(a, "data-dojo-attach-event")) {
                            f = b.split(/\s*,\s*/);
                            for (y = q.trim; b = f.shift();)
                                if (b) {
                                    var u = null; - 1 != b.indexOf(":") ? (u = b.split(":"), b = y(u[0]), u = y(u[1])) : b = y(b);
                                    u || (u = b);
                                    this._attachEvents.push(c(a, b, q.hitch(n, u)))
                                }
                        }
                        return e
                    },
                    _attach: function (a, e, t) {
                        e = e.replace(/^on/, "").toLowerCase();
                        e = "dijitclick" == e ? b || (b = r("./a11yclick")) : c[e] || e;
                        return k(a, e, t)
                    },
                    _detachTemplateNodes: function () {
                        var a = this.attachScope ||
                            this;
                        p.forEach(this._attachPoints, function (b) {
                            delete a[b]
                        });
                        this._attachPoints = [];
                        p.forEach(this._attachEvents, function (a) {
                            a.remove()
                        });
                        this._attachEvents = []
                    },
                    destroyRendering: function () {
                        this._detachTemplateNodes();
                        this.inherited(arguments)
                    }
                });
                q.extend(e, {
                    dojoAttachEvent: "",
                    dojoAttachPoint: ""
                });
                return a
            })
        },
        "dijit/form/_FormWidgetMixin": function () {
            define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/dom-style dojo/_base/lang dojo/mouse dojo/on dojo/sniff dojo/window ../a11y".split(" "), function (r,
                p, a, g, q, h, k, l, e, c) {
                return p("dijit.form._FormWidgetMixin", null, {
                    name: "",
                    alt: "",
                    value: "",
                    type: "text",
                    "aria-label": "focusNode",
                    tabIndex: "0",
                    _setTabIndexAttr: "focusNode",
                    disabled: !1,
                    intermediateChanges: !1,
                    scrollOnFocus: !0,
                    _setIdAttr: "focusNode",
                    _setDisabledAttr: function (b) {
                        this._set("disabled", b);
                        /^(button|input|select|textarea|optgroup|option|fieldset)$/i.test(this.focusNode.tagName) ? a.set(this.focusNode, "disabled", b) : this.focusNode.setAttribute("aria-disabled", b ? "true" : "false");
                        this.valueNode && a.set(this.valueNode,
                            "disabled", b);
                        b ? (this._set("hovering", !1), this._set("active", !1), b = "tabIndex" in this.attributeMap ? this.attributeMap.tabIndex : "_setTabIndexAttr" in this ? this._setTabIndexAttr : "focusNode", r.forEach(q.isArray(b) ? b : [b], function (a) {
                            a = this[a];
                            l("webkit") || c.hasDefaultTabStop(a) ? a.setAttribute("tabIndex", "-1") : a.removeAttribute("tabIndex")
                        }, this)) : "" != this.tabIndex && this.set("tabIndex", this.tabIndex)
                    },
                    _onFocus: function (a) {
                        if ("mouse" == a && this.isFocusable()) var c = this.own(k(this.focusNode, "focus", function () {
                                t.remove();
                                c.remove()
                            }))[0],
                            m = l("pointer-events") ? "pointerup" : l("MSPointer") ? "MSPointerUp" : l("touch-events") ? "touchend, mouseup" : "mouseup",
                            t = this.own(k(this.ownerDocumentBody, m, q.hitch(this, function (a) {
                                t.remove();
                                c.remove();
                                this.focused && ("touchend" == a.type ? this.defer("focus") : this.focus())
                            })))[0];
                        this.scrollOnFocus && this.defer(function () {
                            e.scrollIntoView(this.domNode)
                        });
                        this.inherited(arguments)
                    },
                    isFocusable: function () {
                        return !this.disabled && this.focusNode && "none" != g.get(this.domNode, "display")
                    },
                    focus: function () {
                        if (!this.disabled &&
                            this.focusNode.focus) try {
                            this.focusNode.focus()
                        } catch (a) {}
                    },
                    compare: function (a, c) {
                        return "number" == typeof a && "number" == typeof c ? isNaN(a) && isNaN(c) ? 0 : a - c : a > c ? 1 : a < c ? -1 : 0
                    },
                    onChange: function () {},
                    _onChangeActive: !1,
                    _handleOnChange: function (a, c) {
                        if (void 0 == this._lastValueReported && (null === c || !this._onChangeActive)) this._resetValue = this._lastValueReported = a;
                        this._pendingOnChange = this._pendingOnChange || typeof a != typeof this._lastValueReported || 0 != this.compare(a, this._lastValueReported);
                        if ((this.intermediateChanges ||
                                c || void 0 === c) && this._pendingOnChange) this._lastValueReported = a, this._pendingOnChange = !1, this._onChangeActive && (this._onChangeHandle && this._onChangeHandle.remove(), this._onChangeHandle = this.defer(function () {
                            this._onChangeHandle = null;
                            this.onChange(a)
                        }))
                    },
                    create: function () {
                        this.inherited(arguments);
                        this._onChangeActive = !0
                    },
                    destroy: function () {
                        this._onChangeHandle && (this._onChangeHandle.remove(), this.onChange(this._lastValueReported));
                        this.inherited(arguments)
                    }
                })
            })
        },
        "dijit/form/_ButtonMixin": function () {
            define(["dojo/_base/declare",
"dojo/dom", "dojo/has", "../registry"], function (r, p, a, g) {
                var q = r("dijit.form._ButtonMixin" + (a("dojo-bidi") ? "_NoBidi" : ""), null, {
                    label: "",
                    type: "button",
                    __onClick: function (a) {
                        a.stopPropagation();
                        a.preventDefault();
                        this.disabled || this.valueNode.click(a);
                        return !1
                    },
                    _onClick: function (a) {
                        if (this.disabled) return a.stopPropagation(), a.preventDefault(), !1;
                        !1 === this.onClick(a) && a.preventDefault();
                        var k = a.defaultPrevented;
                        if (!k && "submit" == this.type && !(this.valueNode || this.focusNode).form)
                            for (var l = this.domNode; l.parentNode; l =
                                l.parentNode) {
                                var e = g.byNode(l);
                                if (e && "function" == typeof e._onSubmit) {
                                    e._onSubmit(a);
                                    a.preventDefault();
                                    k = !0;
                                    break
                                }
                            }
                        return !k
                    },
                    postCreate: function () {
                        this.inherited(arguments);
                        p.setSelectable(this.focusNode, !1)
                    },
                    onClick: function () {
                        return !0
                    },
                    _setLabelAttr: function (a) {
                        this._set("label", a);
                        (this.containerNode || this.focusNode).innerHTML = a;
                        this.onLabelSet()
                    },
                    onLabelSet: function () {}
                });
                a("dojo-bidi") && (q = r("dijit.form._ButtonMixin", q, {
                    onLabelSet: function () {
                        this.inherited(arguments);
                        this.applyTextDir(this.containerNode ||
                            this.focusNode)
                    }
                }));
                return q
            })
        },
        "dijit/_Container": function () {
            define(["dojo/_base/array", "dojo/_base/declare", "dojo/dom-construct", "dojo/_base/kernel"], function (r, p, a, g) {
                return p("dijit._Container", null, {
                    buildRendering: function () {
                        this.inherited(arguments);
                        this.containerNode || (this.containerNode = this.domNode)
                    },
                    addChild: function (g, h) {
                        var k = this.containerNode;
                        if (0 < h) {
                            for (k = k.firstChild; 0 < h;) 1 == k.nodeType && h--, k = k.nextSibling;
                            k ? h = "before" : (k = this.containerNode, h = "last")
                        }
                        a.place(g.domNode, k, h);
                        this._started &&
                            !g._started && g.startup()
                    },
                    removeChild: function (a) {
                        "number" == typeof a && (a = this.getChildren()[a]);
                        a && (a = a.domNode) && a.parentNode && a.parentNode.removeChild(a)
                    },
                    hasChildren: function () {
                        return 0 < this.getChildren().length
                    },
                    _getSiblingOfChild: function (a, g) {
                        var k = this.getChildren(),
                            l = r.indexOf(k, a);
                        return k[l + g]
                    },
                    getIndexOfChild: function (a) {
                        return r.indexOf(this.getChildren(), a)
                    }
                })
            })
        },
        "dijit/_HasDropDown": function () {
            define("dojo/_base/declare dojo/_base/Deferred dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/has dojo/keys dojo/_base/lang dojo/on dojo/touch ./registry ./focus ./popup ./_FocusMixin".split(" "),
                function (r, p, a, g, q, h, k, l, e, c, b, d, m, t, s, n) {
                    return r("dijit._HasDropDown", n, {
                        _buttonNode: null,
                        _arrowWrapperNode: null,
                        _popupStateNode: null,
                        _aroundNode: null,
                        dropDown: null,
                        autoWidth: !0,
                        forceWidth: !1,
                        maxHeight: -1,
                        dropDownPosition: ["below", "above"],
                        _stopClickEvents: !0,
                        _onDropDownMouseDown: function (a) {
                            !this.disabled && !this.readOnly && ("MSPointerDown" != a.type && "pointerdown" != a.type && a.preventDefault(), this.own(b.once(this.ownerDocument, d.release, c.hitch(this, "_onDropDownMouseUp"))), this.toggleDropDown())
                        },
                        _onDropDownMouseUp: function (a) {
                            var b = this.dropDown,
                                c = !1;
                            if (a && this._opened) {
                                var d = h.position(this._buttonNode, !0);
                                if (!(a.pageX >= d.x && a.pageX <= d.x + d.w) || !(a.pageY >= d.y && a.pageY <= d.y + d.h)) {
                                    for (d = a.target; d && !c;) q.contains(d, "dijitPopup") ? c = !0 : d = d.parentNode;
                                    if (c) {
                                        d = a.target;
                                        if (b.onItemClick) {
                                            for (var n; d && !(n = m.byNode(d));) d = d.parentNode;
                                            if (n && n.onClick && n.getParent) n.getParent().onItemClick(n, a)
                                        }
                                        return
                                    }
                                }
                            }
                            if (this._opened) {
                                if (b.focus && (!1 !== b.autoFocus || "mouseup" == a.type && !this.hovering)) this._focusDropDownTimer =
                                    this.defer(function () {
                                        b.focus();
                                        delete this._focusDropDownTimer
                                    })
                            } else this.focus && this.defer("focus")
                        },
                        _onDropDownClick: function (a) {
                            this._stopClickEvents && (a.stopPropagation(), a.preventDefault())
                        },
                        buildRendering: function () {
                            this.inherited(arguments);
                            this._buttonNode = this._buttonNode || this.focusNode || this.domNode;
                            this._popupStateNode = this._popupStateNode || this.focusNode || this._buttonNode;
                            var a = {
                                after: this.isLeftToRight() ? "Right" : "Left",
                                before: this.isLeftToRight() ? "Left" : "Right",
                                above: "Up",
                                below: "Down",
                                left: "Left",
                                right: "Right"
                            }[this.dropDownPosition[0]] || this.dropDownPosition[0] || "Down";
                            q.add(this._arrowWrapperNode || this._buttonNode, "dijit" + a + "ArrowButton")
                        },
                        postCreate: function () {
                            this.inherited(arguments);
                            var a = this.focusNode || this.domNode;
                            this.own(b(this._buttonNode, d.press, c.hitch(this, "_onDropDownMouseDown")), b(this._buttonNode, "click", c.hitch(this, "_onDropDownClick")), b(a, "keydown", c.hitch(this, "_onKey")), b(a, "keyup", c.hitch(this, "_onKeyUp")))
                        },
                        destroy: function () {
                            this._opened && this.closeDropDown(!0);
                            this.dropDown && (this.dropDown._destroyed || this.dropDown.destroyRecursive(), delete this.dropDown);
                            this.inherited(arguments)
                        },
                        _onKey: function (a) {
                            if (!this.disabled && !this.readOnly) {
                                var b = this.dropDown,
                                    c = a.target;
                                if (b && (this._opened && b.handleKey) && !1 === b.handleKey(a)) a.stopPropagation(), a.preventDefault();
                                else if (b && this._opened && a.keyCode == e.ESCAPE) this.closeDropDown(), a.stopPropagation(), a.preventDefault();
                                else if (!this._opened && (a.keyCode == e.DOWN_ARROW || (a.keyCode == e.ENTER || a.keyCode == e.SPACE && (!this._searchTimer ||
                                        a.ctrlKey || a.altKey || a.metaKey)) && ("input" !== (c.tagName || "").toLowerCase() || c.type && "text" !== c.type.toLowerCase()))) this._toggleOnKeyUp = !0, a.stopPropagation(), a.preventDefault()
                            }
                        },
                        _onKeyUp: function () {
                            if (this._toggleOnKeyUp) {
                                delete this._toggleOnKeyUp;
                                this.toggleDropDown();
                                var a = this.dropDown;
                                a && a.focus && this.defer(c.hitch(a, "focus"), 1)
                            }
                        },
                        _onBlur: function () {
                            this.closeDropDown(!1);
                            this.inherited(arguments)
                        },
                        isLoaded: function () {
                            return !0
                        },
                        loadDropDown: function (a) {
                            a()
                        },
                        loadAndOpenDropDown: function () {
                            var a =
                                new p,
                                b = c.hitch(this, function () {
                                    this.openDropDown();
                                    a.resolve(this.dropDown)
                                });
                            this.isLoaded() ? b() : this.loadDropDown(b);
                            return a
                        },
                        toggleDropDown: function () {
                            !this.disabled && !this.readOnly && (this._opened ? this.closeDropDown(!0) : this.loadAndOpenDropDown())
                        },
                        openDropDown: function () {
                            var a = this.dropDown,
                                b = a.domNode,
                                d = this._aroundNode || this.domNode,
                                n = this,
                                e = s.open({
                                    parent: this,
                                    popup: a,
                                    around: d,
                                    orient: this.dropDownPosition,
                                    maxHeight: this.maxHeight,
                                    onExecute: function () {
                                        n.closeDropDown(!0)
                                    },
                                    onCancel: function () {
                                        n.closeDropDown(!0)
                                    },
                                    onClose: function () {
                                        g.set(n._popupStateNode, "popupActive", !1);
                                        q.remove(n._popupStateNode, "dijitHasDropDownOpen");
                                        n._set("_opened", !1)
                                    }
                                });
                            if (this.forceWidth || this.autoWidth && d.offsetWidth > a._popupWrapper.offsetWidth) {
                                var d = d.offsetWidth - a._popupWrapper.offsetWidth,
                                    m = {
                                        w: a.domNode.offsetWidth + d
                                    };
                                this._origStyle = b.style.cssText;
                                c.isFunction(a.resize) ? a.resize(m) : h.setMarginBox(b, m);
                                "R" == e.corner[1] && (a._popupWrapper.style.left = a._popupWrapper.style.left.replace("px", "") - d + "px")
                            }
                            g.set(this._popupStateNode,
                                "popupActive", "true");
                            q.add(this._popupStateNode, "dijitHasDropDownOpen");
                            this._set("_opened", !0);
                            this._popupStateNode.setAttribute("aria-expanded", "true");
                            this._popupStateNode.setAttribute("aria-owns", a.id);
                            "presentation" !== b.getAttribute("role") && !b.getAttribute("aria-labelledby") && b.setAttribute("aria-labelledby", this.id);
                            return e
                        },
                        closeDropDown: function (a) {
                            this._focusDropDownTimer && (this._focusDropDownTimer.remove(), delete this._focusDropDownTimer);
                            this._opened && (this._popupStateNode.setAttribute("aria-expanded",
                                "false"), a && this.focus && this.focus(), s.close(this.dropDown), this._opened = !1);
                            this._origStyle && (this.dropDown.domNode.style.cssText = this._origStyle, delete this._origStyle)
                        }
                    })
                })
        },
        "dijit/form/ComboButton": function () {
            define("dojo/_base/declare dojo/keys ../focus ./DropDownButton dojo/text!./templates/ComboButton.html ../a11yclick".split(" "), function (r, p, a, g, q) {
                return r("dijit.form.ComboButton", g, {
                    templateString: q,
                    _setIdAttr: "",
                    _setTabIndexAttr: ["focusNode", "titleNode"],
                    _setTitleAttr: "titleNode",
                    optionsTitle: "",
                    baseClass: "dijitComboButton",
                    cssStateNodes: {
                        buttonNode: "dijitButtonNode",
                        titleNode: "dijitButtonContents",
                        _popupStateNode: "dijitDownArrowButton"
                    },
                    _focusedNode: null,
                    _onButtonKeyDown: function (g) {
                        if (g.keyCode == p[this.isLeftToRight() ? "RIGHT_ARROW" : "LEFT_ARROW"]) a.focus(this._popupStateNode), g.stopPropagation(), g.preventDefault()
                    },
                    _onArrowKeyDown: function (g) {
                        if (g.keyCode == p[this.isLeftToRight() ? "LEFT_ARROW" : "RIGHT_ARROW"]) a.focus(this.titleNode), g.stopPropagation(), g.preventDefault()
                    },
                    focus: function (g) {
                        this.disabled ||
                            a.focus("start" == g ? this.titleNode : this._popupStateNode)
                    }
                })
            })
        },
        "dijit/form/ToggleButton": function () {
            define(["dojo/_base/declare", "dojo/_base/kernel", "./Button", "./_ToggleButtonMixin"], function (r, p, a, g) {
                return r("dijit.form.ToggleButton", [a, g], {
                    baseClass: "dijitToggleButton",
                    setChecked: function (a) {
                        p.deprecated("setChecked(" + a + ") is deprecated. Use set('checked'," + a + ") instead.", "", "2.0");
                        this.set("checked", a)
                    }
                })
            })
        },
        "dijit/form/_ToggleButtonMixin": function () {
            define(["dojo/_base/declare", "dojo/dom-attr"],
                function (r, p) {
                    return r("dijit.form._ToggleButtonMixin", null, {
                        checked: !1,
                        _aria_attr: "aria-pressed",
                        _onClick: function (a) {
                            var g = this.checked;
                            this._set("checked", !g);
                            var q = this.inherited(arguments);
                            this.set("checked", q ? this.checked : g);
                            return q
                        },
                        _setCheckedAttr: function (a, g) {
                            this._set("checked", a);
                            var q = this.focusNode || this.domNode;
                            this._created && p.get(q, "checked") != !!a && p.set(q, "checked", !!a);
                            q.setAttribute(this._aria_attr, String(a));
                            this._handleOnChange(a, g)
                        },
                        postCreate: function () {
                            this.inherited(arguments);
                            var a = this.focusNode || this.domNode;
                            this.checked && a.setAttribute("checked", "checked");
                            void 0 === this._resetValue && (this._lastValueReported = this._resetValue = this.checked)
                        },
                        reset: function () {
                            this._hasBeenBlurred = !1;
                            this.set("checked", this.params.checked || !1)
                        }
                    })
                })
        },
        "dijit/TooltipDialog": function () {
            define("dojo/_base/declare dojo/dom-class dojo/has dojo/keys dojo/_base/lang dojo/on ./focus ./layout/ContentPane ./_DialogMixin ./form/_FormMixin ./_TemplatedMixin dojo/text!./templates/TooltipDialog.html ./main".split(" "),
                function (r, p, a, g, q, h, k, l, e, c, b, d, m) {
                    r = r("dijit.TooltipDialog", [l, b, c, e], {
                        title: "",
                        doLayout: !1,
                        autofocus: !0,
                        baseClass: "dijitTooltipDialog",
                        _firstFocusItem: null,
                        _lastFocusItem: null,
                        templateString: d,
                        _setTitleAttr: "containerNode",
                        postCreate: function () {
                            this.inherited(arguments);
                            this.own(h(this.domNode, "keydown", q.hitch(this, "_onKey")))
                        },
                        orient: function (a, b, c) {
                            a = {
                                "MR-ML": "dijitTooltipRight",
                                "ML-MR": "dijitTooltipLeft",
                                "TM-BM": "dijitTooltipAbove",
                                "BM-TM": "dijitTooltipBelow",
                                "BL-TL": "dijitTooltipBelow dijitTooltipABLeft",
                                "TL-BL": "dijitTooltipAbove dijitTooltipABLeft",
                                "BR-TR": "dijitTooltipBelow dijitTooltipABRight",
                                "TR-BR": "dijitTooltipAbove dijitTooltipABRight",
                                "BR-BL": "dijitTooltipRight",
                                "BL-BR": "dijitTooltipLeft",
                                "BR-TL": "dijitTooltipBelow dijitTooltipABLeft",
                                "BL-TR": "dijitTooltipBelow dijitTooltipABRight",
                                "TL-BR": "dijitTooltipAbove dijitTooltipABRight",
                                "TR-BL": "dijitTooltipAbove dijitTooltipABLeft"
                            }[b + "-" + c];
                            p.replace(this.domNode, a, this._currentOrientClass || "");
                            this._currentOrientClass = a
                        },
                        focus: function () {
                            this._getFocusItems();
                            k.focus(this._firstFocusItem)
                        },
                        onOpen: function (a) {
                            this.orient(this.domNode, a.aroundCorner, a.corner);
                            var b = a.aroundNodePos;
                            "M" == a.corner.charAt(0) && "M" == a.aroundCorner.charAt(0) ? (this.connectorNode.style.top = b.y + (b.h - this.connectorNode.offsetHeight >> 1) - a.y + "px", this.connectorNode.style.left = "") : "M" == a.corner.charAt(1) && "M" == a.aroundCorner.charAt(1) && (this.connectorNode.style.left = b.x + (b.w - this.connectorNode.offsetWidth >> 1) - a.x + "px");
                            this._onShow()
                        },
                        onClose: function () {
                            this.onHide()
                        },
                        _onKey: function (a) {
                            if (a.keyCode ==
                                g.ESCAPE) this.defer("onCancel"), a.stopPropagation(), a.preventDefault();
                            else if (a.keyCode == g.TAB) {
                                var b = a.target;
                                this._getFocusItems();
                                this._firstFocusItem == this._lastFocusItem ? (a.stopPropagation(), a.preventDefault()) : b == this._firstFocusItem && a.shiftKey ? (k.focus(this._lastFocusItem), a.stopPropagation(), a.preventDefault()) : b == this._lastFocusItem && !a.shiftKey ? (k.focus(this._firstFocusItem), a.stopPropagation(), a.preventDefault()) : a.stopPropagation()
                            }
                        }
                    });
                    a("dojo-bidi") && r.extend({
                        _setTitleAttr: function (a) {
                            this.containerNode.title =
                                this.textDir && this.enforceTextDirWithUcc ? this.enforceTextDirWithUcc(null, a) : a;
                            this._set("title", a)
                        },
                        _setTextDirAttr: function (a) {
                            if (!this._created || this.textDir != a) this._set("textDir", a), this.textDir && this.title && (this.containerNode.title = this.enforceTextDirWithUcc(null, this.title))
                        }
                    });
                    return r
                })
        },
        "dijit/layout/ContentPane": function () {
            define("dojo/_base/kernel dojo/_base/lang ../_Widget ../_Container ./_ContentPaneResizeMixin dojo/string dojo/html dojo/_base/array dojo/_base/declare dojo/_base/Deferred dojo/dom dojo/dom-attr dojo/dom-construct dojo/_base/xhr dojo/i18n dojo/when dojo/i18n!../nls/loading".split(" "),
                function (r, p, a, g, q, h, k, l, e, c, b, d, m, t, s, n) {
                    return e("dijit.layout.ContentPane", [a, g, q], {
                        href: "",
                        content: "",
                        extractContent: !1,
                        parseOnLoad: !0,
                        parserScope: r._scopeName,
                        preventCache: !1,
                        preload: !1,
                        refreshOnShow: !1,
                        loadingMessage: "\x3cspan class\x3d'dijitContentPaneLoading'\x3e\x3cspan class\x3d'dijitInline dijitIconLoading'\x3e\x3c/span\x3e${loadingState}\x3c/span\x3e",
                        errorMessage: "\x3cspan class\x3d'dijitContentPaneError'\x3e\x3cspan class\x3d'dijitInline dijitIconError'\x3e\x3c/span\x3e${errorState}\x3c/span\x3e",
                        isLoaded: !1,
                        baseClass: "dijitContentPane",
                        ioArgs: {},
                        onLoadDeferred: null,
                        _setTitleAttr: null,
                        stopParser: !0,
                        template: !1,
                        markupFactory: function (a, b, c) {
                            var d = new c(a, b);
                            return !d.href && d._contentSetter && d._contentSetter.parseDeferred && !d._contentSetter.parseDeferred.isFulfilled() ? d._contentSetter.parseDeferred.then(function () {
                                return d
                            }) : d
                        },
                        create: function (a, c) {
                            if ((!a || !a.template) && c && !("href" in a) && !("content" in a)) {
                                c = b.byId(c);
                                for (var d = c.ownerDocument.createDocumentFragment(); c.firstChild;) d.appendChild(c.firstChild);
                                a = p.delegate(a, {
                                    content: d
                                })
                            }
                            this.inherited(arguments, [a, c])
                        },
                        postMixInProperties: function () {
                            this.inherited(arguments);
                            var a = s.getLocalization("dijit", "loading", this.lang);
                            this.loadingMessage = h.substitute(this.loadingMessage, a);
                            this.errorMessage = h.substitute(this.errorMessage, a)
                        },
                        buildRendering: function () {
                            this.inherited(arguments);
                            this.containerNode || (this.containerNode = this.domNode);
                            this.domNode.removeAttribute("title")
                        },
                        startup: function () {
                            this.inherited(arguments);
                            this._contentSetter && l.forEach(this._contentSetter.parseResults,
                                function (a) {
                                    !a._started && (!a._destroyed && p.isFunction(a.startup)) && (a.startup(), a._started = !0)
                                }, this)
                        },
                        _startChildren: function () {
                            l.forEach(this.getChildren(), function (a) {
                                !a._started && (!a._destroyed && p.isFunction(a.startup)) && (a.startup(), a._started = !0)
                            });
                            this._contentSetter && l.forEach(this._contentSetter.parseResults, function (a) {
                                !a._started && (!a._destroyed && p.isFunction(a.startup)) && (a.startup(), a._started = !0)
                            }, this)
                        },
                        setHref: function (a) {
                            r.deprecated("dijit.layout.ContentPane.setHref() is deprecated. Use set('href', ...) instead.",
                                "", "2.0");
                            return this.set("href", a)
                        },
                        _setHrefAttr: function (a) {
                            this.cancel();
                            this.onLoadDeferred = new c(p.hitch(this, "cancel"));
                            this.onLoadDeferred.then(p.hitch(this, "onLoad"));
                            this._set("href", a);
                            this.preload || this._created && this._isShown() ? this._load() : this._hrefChanged = !0;
                            return this.onLoadDeferred
                        },
                        setContent: function (a) {
                            r.deprecated("dijit.layout.ContentPane.setContent() is deprecated.  Use set('content', ...) instead.", "", "2.0");
                            this.set("content", a)
                        },
                        _setContentAttr: function (a) {
                            this._set("href",
                                "");
                            this.cancel();
                            this.onLoadDeferred = new c(p.hitch(this, "cancel"));
                            this._created && this.onLoadDeferred.then(p.hitch(this, "onLoad"));
                            this._setContent(a || "");
                            this._isDownloaded = !1;
                            return this.onLoadDeferred
                        },
                        _getContentAttr: function () {
                            return this.containerNode.innerHTML
                        },
                        cancel: function () {
                            this._xhrDfd && -1 == this._xhrDfd.fired && this._xhrDfd.cancel();
                            delete this._xhrDfd;
                            this.onLoadDeferred = null
                        },
                        destroy: function () {
                            this.cancel();
                            this.inherited(arguments)
                        },
                        destroyRecursive: function (a) {
                            this._beingDestroyed ||
                                this.inherited(arguments)
                        },
                        _onShow: function () {
                            this.inherited(arguments);
                            if (this.href && !this._xhrDfd && (!this.isLoaded || this._hrefChanged || this.refreshOnShow)) return this.refresh()
                        },
                        refresh: function () {
                            this.cancel();
                            this.onLoadDeferred = new c(p.hitch(this, "cancel"));
                            this.onLoadDeferred.then(p.hitch(this, "onLoad"));
                            this._load();
                            return this.onLoadDeferred
                        },
                        _load: function () {
                            this._setContent(this.onDownloadStart(), !0);
                            var a = this,
                                b = {
                                    preventCache: this.preventCache || this.refreshOnShow,
                                    url: this.href,
                                    handleAs: "text"
                                };
                            p.isObject(this.ioArgs) && p.mixin(b, this.ioArgs);
                            var c = this._xhrDfd = (this.ioMethod || t.get)(b),
                                d;
                            c.then(function (b) {
                                d = b;
                                try {
                                    return a._isDownloaded = !0, a._setContent(b, !1)
                                } catch (c) {
                                    a._onError("Content", c)
                                }
                            }, function (b) {
                                c.canceled || a._onError("Download", b);
                                delete a._xhrDfd;
                                return b
                            }).then(function () {
                                a.onDownloadEnd();
                                delete a._xhrDfd;
                                return d
                            });
                            delete this._hrefChanged
                        },
                        _onLoadHandler: function (a) {
                            this._set("isLoaded", !0);
                            try {
                                this.onLoadDeferred.resolve(a)
                            } catch (b) {
                                console.error("Error " + this.widgetId +
                                    " running custom onLoad code: " + b.message)
                            }
                        },
                        _onUnloadHandler: function () {
                            this._set("isLoaded", !1);
                            try {
                                this.onUnload()
                            } catch (a) {
                                console.error("Error " + this.widgetId + " running custom onUnload code: " + a.message)
                            }
                        },
                        destroyDescendants: function (a) {
                            this.isLoaded && this._onUnloadHandler();
                            var b = this._contentSetter;
                            l.forEach(this.getChildren(), function (b) {
                                b.destroyRecursive ? b.destroyRecursive(a) : b.destroy && b.destroy(a);
                                b._destroyed = !0
                            });
                            b && (l.forEach(b.parseResults, function (b) {
                                b._destroyed || (b.destroyRecursive ?
                                    b.destroyRecursive(a) : b.destroy && b.destroy(a), b._destroyed = !0)
                            }), delete b.parseResults);
                            a || m.empty(this.containerNode);
                            delete this._singleChild
                        },
                        _setContent: function (a, b) {
                            a = this.preprocessContent(a);
                            this.destroyDescendants();
                            var c = this._contentSetter;
                            c && c instanceof k._ContentSetter || (c = this._contentSetter = new k._ContentSetter({
                                node: this.containerNode,
                                _onError: p.hitch(this, this._onError),
                                onContentError: p.hitch(this, function (a) {
                                    a = this.onContentError(a);
                                    try {
                                        this.containerNode.innerHTML = a
                                    } catch (f) {
                                        console.error("Fatal " +
                                            this.id + " could not change content due to " + f.message, f)
                                    }
                                })
                            }));
                            var d = p.mixin({
                                    cleanContent: this.cleanContent,
                                    extractContent: this.extractContent,
                                    parseContent: !a.domNode && this.parseOnLoad,
                                    parserScope: this.parserScope,
                                    startup: !1,
                                    dir: this.dir,
                                    lang: this.lang,
                                    textDir: this.textDir
                                }, this._contentSetterParams || {}),
                                d = c.set(p.isObject(a) && a.domNode ? a.domNode : a, d),
                                e = this;
                            return n(d && d.then ? d : c.parseDeferred, function () {
                                delete e._contentSetterParams;
                                b || (e._started && (e._startChildren(), e._scheduleLayout()), e._onLoadHandler(a))
                            })
                        },
                        preprocessContent: function (a) {
                            return a
                        },
                        _onError: function (a, b, c) {
                            this.onLoadDeferred.reject(b);
                            a = this["on" + a + "Error"].call(this, b);
                            c ? console.error(c, b) : a && this._setContent(a, !0)
                        },
                        onLoad: function () {},
                        onUnload: function () {},
                        onDownloadStart: function () {
                            return this.loadingMessage
                        },
                        onContentError: function () {},
                        onDownloadError: function () {
                            return this.errorMessage
                        },
                        onDownloadEnd: function () {}
                    })
                })
        },
        "dijit/layout/_ContentPaneResizeMixin": function () {
            define("dojo/_base/array dojo/_base/declare dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/lang dojo/query ../registry ../Viewport ./utils".split(" "),
                function (r, p, a, g, q, h, k, l, e, c) {
                    return p("dijit.layout._ContentPaneResizeMixin", null, {
                        doLayout: !0,
                        isLayoutContainer: !0,
                        startup: function () {
                            if (!this._started) {
                                var a = this.getParent();
                                this._childOfLayoutWidget = a && a.isLayoutContainer;
                                this._needLayout = !this._childOfLayoutWidget;
                                this.inherited(arguments);
                                this._isShown() && this._onShow();
                                this._childOfLayoutWidget || this.own(e.on("resize", h.hitch(this, "resize")))
                            }
                        },
                        _checkIfSingleChild: function () {
                            if (this.doLayout) {
                                var b = [],
                                    c = !1;
                                k("\x3e *", this.containerNode).some(function (a) {
                                    var e =
                                        l.byNode(a);
                                    e && e.resize ? b.push(e) : !/script|link|style/i.test(a.nodeName) && a.offsetHeight && (c = !0)
                                });
                                this._singleChild = 1 == b.length && !c ? b[0] : null;
                                a.toggle(this.containerNode, this.baseClass + "SingleChild", !!this._singleChild)
                            }
                        },
                        resize: function (a, c) {
                            this._resizeCalled = !0;
                            this._scheduleLayout(a, c)
                        },
                        _scheduleLayout: function (a, c) {
                            this._isShown() ? this._layout(a, c) : (this._needLayout = !0, this._changeSize = a, this._resultSize = c)
                        },
                        _layout: function (a, d) {
                            delete this._needLayout;
                            !this._wasShown && !1 !== this.open && this._onShow();
                            a && g.setMarginBox(this.domNode, a);
                            var e = this.containerNode;
                            if (e === this.domNode) {
                                var t = d || {};
                                h.mixin(t, a || {});
                                if (!("h" in t) || !("w" in t)) t = h.mixin(g.getMarginBox(e), t);
                                this._contentBox = c.marginBox2contentBox(e, t)
                            } else this._contentBox = g.getContentBox(e);
                            this._layoutChildren()
                        },
                        _layoutChildren: function () {
                            this._checkIfSingleChild();
                            if (this._singleChild && this._singleChild.resize) {
                                var a = this._contentBox || g.getContentBox(this.containerNode);
                                this._singleChild.resize({
                                    w: a.w,
                                    h: a.h
                                })
                            } else
                                for (var a = this.getChildren(),
                                        c, e = 0; c = a[e++];) c.resize && c.resize()
                        },
                        _isShown: function () {
                            if (this._childOfLayoutWidget) return this._resizeCalled && "open" in this ? this.open : this._resizeCalled;
                            if ("open" in this) return this.open;
                            var b = this.domNode,
                                c = this.domNode.parentNode;
                            return "none" != b.style.display && "hidden" != b.style.visibility && !a.contains(b, "dijitHidden") && c && c.style && "none" != c.style.display
                        },
                        _onShow: function () {
                            this._wasShown = !0;
                            this._needLayout && this._layout(this._changeSize, this._resultSize);
                            this.inherited(arguments)
                        }
                    })
                })
        },
        "dijit/layout/utils": function () {
            define(["dojo/_base/array",
"dojo/dom-class", "dojo/dom-geometry", "dojo/dom-style", "dojo/_base/lang"], function (r, p, a, g, q) {
                function h(l, e) {
                    var c = l.resize ? l.resize(e) : a.setMarginBox(l.domNode, e);
                    c ? q.mixin(l, c) : (q.mixin(l, a.getMarginBox(l.domNode)), q.mixin(l, e))
                }
                var k = {
                    marginBox2contentBox: function (l, e) {
                        var c = g.getComputedStyle(l),
                            b = a.getMarginExtents(l, c),
                            d = a.getPadBorderExtents(l, c);
                        return {
                            l: g.toPixelValue(l, c.paddingLeft),
                            t: g.toPixelValue(l, c.paddingTop),
                            w: e.w - (b.w + d.w),
                            h: e.h - (b.h + d.h)
                        }
                    },
                    layoutChildren: function (a, e, c, b, d) {
                        e =
                            q.mixin({}, e);
                        p.add(a, "dijitLayoutContainer");
                        c = r.filter(c, function (a) {
                            return "center" != a.region && "client" != a.layoutAlign
                        }).concat(r.filter(c, function (a) {
                            return "center" == a.region || "client" == a.layoutAlign
                        }));
                        r.forEach(c, function (a) {
                            var c = a.domNode,
                                s = a.region || a.layoutAlign;
                            if (!s) throw Error("No region setting for " + a.id);
                            var n = c.style;
                            n.left = e.l + "px";
                            n.top = e.t + "px";
                            n.position = "absolute";
                            p.add(c, "dijitAlign" + (s.substring(0, 1).toUpperCase() + s.substring(1)));
                            c = {};
                            b && b == a.id && (c["top" == a.region || "bottom" ==
                                a.region ? "h" : "w"] = d);
                            "leading" == s && (s = a.isLeftToRight() ? "left" : "right");
                            "trailing" == s && (s = a.isLeftToRight() ? "right" : "left");
                            "top" == s || "bottom" == s ? (c.w = e.w, h(a, c), e.h -= a.h, "top" == s ? e.t += a.h : n.top = e.t + e.h + "px") : "left" == s || "right" == s ? (c.h = e.h, h(a, c), e.w -= a.w, "left" == s ? e.l += a.w : n.left = e.l + e.w + "px") : ("client" == s || "center" == s) && h(a, e)
                        })
                    }
                };
                q.setObject("dijit.layout.utils", k);
                return k
            })
        },
        "dojo/html": function () {
            define("./_base/kernel ./_base/lang ./_base/array ./_base/declare ./dom ./dom-construct ./parser".split(" "),
                function (r, p, a, g, q, h, k) {
                    var l = 0,
                        e = {
                            _secureForInnerHtml: function (a) {
                                return a.replace(/(?:\s*<!DOCTYPE\s[^>]+>|<title[^>]*>[\s\S]*?<\/title>)/ig, "")
                            },
                            _emptyNode: h.empty,
                            _setNodeContent: function (a, b) {
                                h.empty(a);
                                if (b)
                                    if ("number" == typeof b && (b = b.toString()), "string" == typeof b && (b = h.toDom(b, a.ownerDocument)), !b.nodeType && p.isArrayLike(b))
                                        for (var d = b.length, e = 0; e < b.length; e = d == b.length ? e + 1 : 0) h.place(b[e], a, "last");
                                    else h.place(b, a, "last");
                                return a
                            },
                            _ContentSetter: g("dojo.html._ContentSetter", null, {
                                node: "",
                                content: "",
                                id: "",
                                cleanContent: !1,
                                extractContent: !1,
                                parseContent: !1,
                                parserScope: r._scopeName,
                                startup: !0,
                                constructor: function (a, b) {
                                    p.mixin(this, a || {});
                                    b = this.node = q.byId(this.node || b);
                                    this.id || (this.id = ["Setter", b ? b.id || b.tagName : "", l++].join("_"))
                                },
                                set: function (a, b) {
                                    void 0 !== a && (this.content = a);
                                    b && this._mixin(b);
                                    this.onBegin();
                                    this.setContent();
                                    var d = this.onEnd();
                                    return d && d.then ? d : this.node
                                },
                                setContent: function () {
                                    var a = this.node;
                                    if (!a) throw Error(this.declaredClass + ": setContent given no node");
                                    try {
                                        a =
                                            e._setNodeContent(a, this.content)
                                    } catch (b) {
                                        var d = this.onContentError(b);
                                        try {
                                            a.innerHTML = d
                                        } catch (m) {
                                            console.error("Fatal " + this.declaredClass + ".setContent could not change content due to " + m.message, m)
                                        }
                                    }
                                    this.node = a
                                },
                                empty: function () {
                                    this.parseDeferred && (this.parseDeferred.isResolved() || this.parseDeferred.cancel(), delete this.parseDeferred);
                                    this.parseResults && this.parseResults.length && (a.forEach(this.parseResults, function (a) {
                                        a.destroy && a.destroy()
                                    }), delete this.parseResults);
                                    h.empty(this.node)
                                },
                                onBegin: function () {
                                    var a =
                                        this.content;
                                    if (p.isString(a) && (this.cleanContent && (a = e._secureForInnerHtml(a)), this.extractContent)) {
                                        var b = a.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);
                                        b && (a = b[1])
                                    }
                                    this.empty();
                                    this.content = a;
                                    return this.node
                                },
                                onEnd: function () {
                                    this.parseContent && this._parse();
                                    return this.node
                                },
                                tearDown: function () {
                                    delete this.parseResults;
                                    delete this.parseDeferred;
                                    delete this.node;
                                    delete this.content
                                },
                                onContentError: function (a) {
                                    return "Error occurred setting content: " + a
                                },
                                onExecError: function (a) {
                                    return "Error occurred executing scripts: " +
                                        a
                                },
                                _mixin: function (a) {
                                    var b = {},
                                        d;
                                    for (d in a) d in b || (this[d] = a[d])
                                },
                                _parse: function () {
                                    var c = this.node;
                                    try {
                                        var b = {};
                                        a.forEach(["dir", "lang", "textDir"], function (a) {
                                            this[a] && (b[a] = this[a])
                                        }, this);
                                        var d = this;
                                        this.parseDeferred = k.parse({
                                            rootNode: c,
                                            noStart: !this.startup,
                                            inherited: b,
                                            scope: this.parserScope
                                        }).then(function (a) {
                                            return d.parseResults = a
                                        }, function (a) {
                                            d._onError("Content", a, "Error parsing in _ContentSetter#" + this.id)
                                        })
                                    } catch (e) {
                                        this._onError("Content", e, "Error parsing in _ContentSetter#" + this.id)
                                    }
                                },
                                _onError: function (a, b, d) {
                                    a = this["on" + a + "Error"].call(this, b);
                                    d ? console.error(d, b) : a && e._setNodeContent(this.node, a, !0)
                                }
                            }),
                            set: function (a, b, d) {
                                void 0 == b && (console.warn("dojo.html.set: no cont argument provided, using empty string"), b = "");
                                "number" == typeof b && (b = b.toString());
                                return d ? (new e._ContentSetter(p.mixin(d, {
                                    content: b,
                                    node: a
                                }))).set() : e._setNodeContent(a, b, !0)
                            }
                        };
                    p.setObject("dojo.html", e);
                    return e
                })
        },
        "dojo/parser": function () {
            define("require ./_base/kernel ./_base/lang ./_base/array ./_base/config ./dom ./_base/window ./_base/url ./aspect ./promise/all ./date/stamp ./Deferred ./has ./query ./on ./ready".split(" "),
                function (r, p, a, g, q, h, k, l, e, c, b, d, m, t, s, n) {
                    function f(a) {
                        return eval("(" + a + ")")
                    }

                    function y(a) {
                        var f = a._nameCaseMap,
                            b = a.prototype;
                        if (!f || f._extendCnt < w) {
                            var f = a._nameCaseMap = {},
                                c;
                            for (c in b) "_" !== c.charAt(0) && (f[c.toLowerCase()] = c);
                            f._extendCnt = w
                        }
                        return f
                    }

                    function u(f, b) {
                        b || (b = r);
                        var c = b._dojoParserCtorMap || (b._dojoParserCtorMap = {}),
                            d = f.join();
                        if (!c[d]) {
                            for (var e = [], n = 0, s = f.length; n < s; n++) {
                                var m = f[n];
                                e[e.length] = c[m] = c[m] || a.getObject(m) || ~m.indexOf("/") && b(m)
                            }
                            n = e.shift();
                            c[d] = e.length ? n.createSubclass ?
                                n.createSubclass(e) : n.extend.apply(n, e) : n
                        }
                        return c[d]
                    }
                    new Date("X");
                    var w = 0;
                    e.after(a, "extend", function () {
                        w++
                    }, !0);
                    var C = {
                        _clearCache: function () {
                            w++;
                            _ctorMap = {}
                        },
                        _functionFromScript: function (a, f) {
                            var b = "",
                                c = "",
                                d = a.getAttribute(f + "args") || a.getAttribute("args"),
                                n = a.getAttribute("with"),
                                d = (d || "").split(/\s*,\s*/);
                            n && n.length && g.forEach(n.split(/\s*,\s*/), function (a) {
                                b += "with(" + a + "){";
                                c += "}"
                            });
                            return new Function(d, b + a.innerHTML + c)
                        },
                        instantiate: function (a, f, b) {
                            f = f || {};
                            b = b || {};
                            var c = (b.scope || p._scopeName) +
                                "Type",
                                d = "data-" + (b.scope || p._scopeName) + "-",
                                n = d + "type",
                                e = d + "mixins",
                                s = [];
                            g.forEach(a, function (a) {
                                var b = c in f ? f[c] : a.getAttribute(n) || a.getAttribute(c);
                                if (b) {
                                    var d = a.getAttribute(e),
                                        b = d ? [b].concat(d.split(/\s*,\s*/)) : [b];
                                    s.push({
                                        node: a,
                                        types: b
                                    })
                                }
                            });
                            return this._instantiate(s, f, b)
                        },
                        _instantiate: function (a, f, b, d) {
                            function n(a) {
                                !f._started && !b.noStart && g.forEach(a, function (a) {
                                    "function" === typeof a.startup && !a._started && a.startup()
                                });
                                return a
                            }
                            a = g.map(a, function (a) {
                                var c = a.ctor || u(a.types, b.contextRequire);
                                if (!c) throw Error("Unable to resolve constructor for: '" + a.types.join() + "'");
                                return this.construct(c, a.node, f, b, a.scripts, a.inherited)
                            }, this);
                            return d ? c(a).then(n) : n(a)
                        },
                        construct: function (c, d, n, u, w, k) {
                            function h(f) {
                                J && a.setObject(J, f);
                                for (P = 0; P < Y.length; P++) e[Y[P].advice || "after"](f, Y[P].method, a.hitch(f, Y[P].func), !0);
                                for (P = 0; P < Z.length; P++) Z[P].call(f);
                                for (P = 0; P < ga.length; P++) f.watch(ga[P].prop, ga[P].func);
                                for (P = 0; P < aa.length; P++) s(f, aa[P].event, aa[P].func);
                                return f
                            }
                            var q = c && c.prototype;
                            u = u || {};
                            var C = {};
                            u.defaults && a.mixin(C, u.defaults);
                            k && a.mixin(C, k);
                            var r;
                            m("dom-attributes-explicit") ? r = d.attributes : m("dom-attributes-specified-flag") ? r = g.filter(d.attributes, function (a) {
                                return a.specified
                            }) : (k = (/^input$|^img$/i.test(d.nodeName) ? d : d.cloneNode(!1)).outerHTML.replace(/=[^\s"']+|="[^"]*"|='[^']*'/g, "").replace(/^\s*<[a-zA-Z0-9]*\s*/, "").replace(/\s*>.*$/, ""), r = g.map(k.split(/\s+/), function (a) {
                                var f = a.toLowerCase();
                                return {
                                    name: a,
                                    value: "LI" == d.nodeName && "value" == a || "enctype" == f ? d.getAttribute(f) : d.getAttributeNode(f).value
                                }
                            }));
                            var G = u.scope || p._scopeName;
                            k = "data-" + G + "-";
                            var I = {};
                            "dojo" !== G && (I[k + "props"] = "data-dojo-props", I[k + "type"] = "data-dojo-type", I[k + "mixins"] = "data-dojo-mixins", I[G + "type"] = "dojotype", I[k + "id"] = "data-dojo-id");
                            for (var P = 0, K, G = [], J, O; K = r[P++];) {
                                var W = K.name,
                                    T = W.toLowerCase();
                                K = K.value;
                                switch (I[T] || T) {
                                case "data-dojo-type":
                                case "dojotype":
                                case "data-dojo-mixins":
                                    break;
                                case "data-dojo-props":
                                    O = K;
                                    break;
                                case "data-dojo-id":
                                case "jsid":
                                    J = K;
                                    break;
                                case "data-dojo-attach-point":
                                case "dojoattachpoint":
                                    C.dojoAttachPoint =
                                        K;
                                    break;
                                case "data-dojo-attach-event":
                                case "dojoattachevent":
                                    C.dojoAttachEvent = K;
                                    break;
                                case "class":
                                    C["class"] = d.className;
                                    break;
                                case "style":
                                    C.style = d.style && d.style.cssText;
                                    break;
                                default:
                                    if (W in q || (W = y(c)[T] || W), W in q) switch (typeof q[W]) {
                                    case "string":
                                        C[W] = K;
                                        break;
                                    case "number":
                                        C[W] = K.length ? Number(K) : NaN;
                                        break;
                                    case "boolean":
                                        C[W] = "false" != K.toLowerCase();
                                        break;
                                    case "function":
                                        "" === K || -1 != K.search(/[^\w\.]+/i) ? C[W] = new Function(K) : C[W] = a.getObject(K, !1) || new Function(K);
                                        G.push(W);
                                        break;
                                    default:
                                        T =
                                            q[W], C[W] = T && "length" in T ? K ? K.split(/\s*,\s*/) : [] : T instanceof Date ? "" == K ? new Date("") : "now" == K ? new Date : b.fromISOString(K) : T instanceof l ? p.baseUrl + K : f(K)
                                    } else C[W] = K
                                }
                            }
                            for (r = 0; r < G.length; r++) I = G[r].toLowerCase(), d.removeAttribute(I), d[I] = null;
                            if (O) try {
                                O = f.call(u.propsThis, "{" + O + "}"), a.mixin(C, O)
                            } catch (N) {
                                throw Error(N.toString() + " in data-dojo-props\x3d'" + O + "'");
                            }
                            a.mixin(C, n);
                            w || (w = c && (c._noScript || q._noScript) ? [] : t("\x3e script[type^\x3d'dojo/']", d));
                            var Y = [],
                                Z = [],
                                ga = [],
                                aa = [];
                            if (w)
                                for (P = 0; P < w.length; P++) I =
                                    w[P], d.removeChild(I), n = I.getAttribute(k + "event") || I.getAttribute("event"), u = I.getAttribute(k + "prop"), O = I.getAttribute(k + "method"), G = I.getAttribute(k + "advice"), r = I.getAttribute("type"), I = this._functionFromScript(I, k), n ? "dojo/connect" == r ? Y.push({
                                        method: n,
                                        func: I
                                    }) : "dojo/on" == r ? aa.push({
                                        event: n,
                                        func: I
                                    }) : C[n] = I : "dojo/aspect" == r ? Y.push({
                                        method: O,
                                        advice: G,
                                        func: I
                                    }) : "dojo/watch" == r ? ga.push({
                                        prop: u,
                                        func: I
                                    }) : Z.push(I);
                            c = (w = c.markupFactory || q.markupFactory) ? w(C, d, c) : new c(C, d);
                            return c.then ? c.then(h) : h(c)
                        },
                        scan: function (a, f) {
                            function b(a) {
                                if (!a.inherited) {
                                    a.inherited = {};
                                    var f = a.node,
                                        c = b(a.parent),
                                        f = {
                                            dir: f.getAttribute("dir") || c.dir,
                                            lang: f.getAttribute("lang") || c.lang,
                                            textDir: f.getAttribute(l) || c.textDir
                                        },
                                        d;
                                    for (d in f) f[d] && (a.inherited[d] = f[d])
                                }
                                return a.inherited
                            }
                            var c = [],
                                n = [],
                                e = {},
                                s = (f.scope || p._scopeName) + "Type",
                                y = "data-" + (f.scope || p._scopeName) + "-",
                                t = y + "type",
                                l = y + "textdir",
                                y = y + "mixins",
                                w = a.firstChild,
                                k = f.inherited;
                            if (!k) {
                                var h = function (a, f) {
                                        return a.getAttribute && a.getAttribute(f) || a.parentNode &&
                                            h(a.parentNode, f)
                                    },
                                    k = {
                                        dir: h(a, "dir"),
                                        lang: h(a, "lang"),
                                        textDir: h(a, l)
                                    },
                                    q;
                                for (q in k) k[q] || delete k[q]
                            }
                            for (var k = {
                                    inherited: k
                                }, C, O;;)
                                if (w)
                                    if (1 != w.nodeType) w = w.nextSibling;
                                    else if (C && "script" == w.nodeName.toLowerCase())(W = w.getAttribute("type")) && /^dojo\/\w/i.test(W) && C.push(w), w = w.nextSibling;
                            else if (O) w = w.nextSibling;
                            else {
                                var W = w.getAttribute(t) || w.getAttribute(s);
                                q = w.firstChild;
                                if (!W && (!q || 3 == q.nodeType && !q.nextSibling)) w = w.nextSibling;
                                else {
                                    O = null;
                                    if (W) {
                                        var T = w.getAttribute(y);
                                        C = T ? [W].concat(T.split(/\s*,\s*/)) : [W];
                                        try {
                                            O = u(C, f.contextRequire)
                                        } catch (N) {}
                                        O || g.forEach(C, function (a) {
                                            ~a.indexOf("/") && !e[a] && (e[a] = !0, n[n.length] = a)
                                        });
                                        T = O && !O.prototype._noScript ? [] : null;
                                        k = {
                                            types: C,
                                            ctor: O,
                                            parent: k,
                                            node: w,
                                            scripts: T
                                        };
                                        k.inherited = b(k);
                                        c.push(k)
                                    } else k = {
                                        node: w,
                                        scripts: C,
                                        parent: k
                                    };
                                    C = T;
                                    O = w.stopParser || O && O.prototype.stopParser && !f.template;
                                    w = q
                                }
                            } else {
                                if (!k || !k.node) break;
                                w = k.node.nextSibling;
                                O = !1;
                                k = k.parent;
                                C = k.scripts
                            }
                            var Y = new d;
                            n.length ? (m("dojo-debug-messages") && console.warn("WARNING: Modules being Auto-Required: " +
                                n.join(", ")), (f.contextRequire || r)(n, function () {
                                Y.resolve(g.filter(c, function (a) {
                                    if (!a.ctor) try {
                                        a.ctor = u(a.types, f.contextRequire)
                                    } catch (b) {}
                                    for (var c = a.parent; c && !c.types;) c = c.parent;
                                    var d = a.ctor && a.ctor.prototype;
                                    a.instantiateChildren = !(d && d.stopParser && !f.template);
                                    a.instantiate = !c || c.instantiate && c.instantiateChildren;
                                    return a.instantiate
                                }))
                            })) : Y.resolve(c);
                            return Y.promise
                        },
                        _require: function (b, c) {
                            var n = f("{" + b.innerHTML + "}"),
                                e = [],
                                s = [],
                                m = new d,
                                u = c && c.contextRequire || r,
                                y;
                            for (y in n) e.push(y),
                                s.push(n[y]);
                            u(s, function () {
                                for (var f = 0; f < e.length; f++) a.setObject(e[f], arguments[f]);
                                m.resolve(arguments)
                            });
                            return m.promise
                        },
                        _scanAmd: function (a, f) {
                            var b = new d,
                                c = b.promise;
                            b.resolve(!0);
                            var n = this;
                            t("script[type\x3d'dojo/require']", a).forEach(function (a) {
                                c = c.then(function () {
                                    return n._require(a, f)
                                });
                                a.parentNode.removeChild(a)
                            });
                            return c
                        },
                        parse: function (f, b) {
                            f && ("string" != typeof f && !("nodeType" in f)) && (b = f, f = b.rootNode);
                            var c = f ? h.byId(f) : k.body();
                            b = b || {};
                            var d = b.template ? {
                                    template: !0
                                } : {},
                                n = [],
                                e =
                                this,
                                s = this._scanAmd(c, b).then(function () {
                                    return e.scan(c, b)
                                }).then(function (a) {
                                    return e._instantiate(a, d, b, !0)
                                }).then(function (a) {
                                    return n = n.concat(a)
                                }).otherwise(function (a) {
                                    console.error("dojo/parser::parse() error", a);
                                    throw a;
                                });
                            a.mixin(n, s);
                            return n
                        }
                    };
                    p.parser = C;
                    q.parseOnLoad && n(100, C, "parse");
                    return C
                })
        },
        "dojo/_base/url": function () {
            define(["./kernel"], function (r) {
                var p = /^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/,
                    a = /^((([^\[:]+):)?([^@]+)@)?(\[([^\]]+)\]|([^\[:]*))(:([0-9]+))?$/,
                    g = function () {
                        for (var q = arguments, h = [q[0]], k = 1; k < q.length; k++)
                            if (q[k]) {
                                var l = new g(q[k] + ""),
                                    h = new g(h[0] + "");
                                if ("" == l.path && !l.scheme && !l.authority && !l.query) null != l.fragment && (h.fragment = l.fragment), l = h;
                                else if (!l.scheme && (l.scheme = h.scheme, !l.authority && (l.authority = h.authority, "/" != l.path.charAt(0)))) {
                                    for (var h = (h.path.substring(0, h.path.lastIndexOf("/") + 1) + l.path).split("/"), e = 0; e < h.length; e++) "." == h[e] ? e == h.length - 1 ? h[e] = "" : (h.splice(e, 1), e--) : 0 < e && (!(1 == e && "" == h[0]) && ".." == h[e] && ".." != h[e - 1]) &&
                                        (e == h.length - 1 ? (h.splice(e, 1), h[e - 1] = "") : (h.splice(e - 1, 2), e -= 2));
                                    l.path = h.join("/")
                                }
                                h = [];
                                l.scheme && h.push(l.scheme, ":");
                                l.authority && h.push("//", l.authority);
                                h.push(l.path);
                                l.query && h.push("?", l.query);
                                l.fragment && h.push("#", l.fragment)
                            }
                        this.uri = h.join("");
                        q = this.uri.match(p);
                        this.scheme = q[2] || (q[1] ? "" : null);
                        this.authority = q[4] || (q[3] ? "" : null);
                        this.path = q[5];
                        this.query = q[7] || (q[6] ? "" : null);
                        this.fragment = q[9] || (q[8] ? "" : null);
                        null != this.authority && (q = this.authority.match(a), this.user = q[3] || null, this.password =
                            q[4] || null, this.host = q[6] || q[7], this.port = q[9] || null)
                    };
                g.prototype.toString = function () {
                    return this.uri
                };
                return r._Url = g
            })
        },
        "dojo/promise/all": function () {
            define(["../_base/array", "../Deferred", "../when"], function (r, p, a) {
                var g = r.some;
                return function (q) {
                    var h, k;
                    q instanceof Array ? k = q : q && "object" === typeof q && (h = q);
                    var l, e = [];
                    if (h) {
                        k = [];
                        for (var c in h) Object.hasOwnProperty.call(h, c) && (e.push(c), k.push(h[c]));
                        l = {}
                    } else k && (l = []);
                    if (!k || !k.length) return (new p).resolve(l);
                    var b = new p;
                    b.promise.always(function () {
                        l =
                            e = null
                    });
                    var d = k.length;
                    g(k, function (c, t) {
                        h || e.push(t);
                        a(c, function (a) {
                            b.isFulfilled() || (l[e[t]] = a, 0 === --d && b.resolve(l))
                        }, b.reject);
                        return b.isFulfilled()
                    });
                    return b.promise
                }
            })
        },
        "dojo/date/stamp": function () {
            define(["../_base/lang", "../_base/array"], function (r, p) {
                var a = {};
                r.setObject("dojo.date.stamp", a);
                a.fromISOString = function (g, q) {
                    a._isoRegExp || (a._isoRegExp = /^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/);
                    var h = a._isoRegExp.exec(g),
                        k = null;
                    if (h) {
                        h.shift();
                        h[1] && h[1]--;
                        h[6] && (h[6] *= 1E3);
                        q && (q = new Date(q), p.forEach(p.map("FullYear Month Date Hours Minutes Seconds Milliseconds".split(" "), function (a) {
                            return q["get" + a]()
                        }), function (a, b) {
                            h[b] = h[b] || a
                        }));
                        k = new Date(h[0] || 1970, h[1] || 0, h[2] || 1, h[3] || 0, h[4] || 0, h[5] || 0, h[6] || 0);
                        100 > h[0] && k.setFullYear(h[0] || 1970);
                        var l = 0,
                            e = h[7] && h[7].charAt(0);
                        "Z" != e && (l = 60 * (h[8] || 0) + (Number(h[9]) || 0), "-" != e && (l *= -1));
                        e && (l -= k.getTimezoneOffset());
                        l && k.setTime(k.getTime() + 6E4 * l)
                    }
                    return k
                };
                a.toISOString =
                    function (a, q) {
                        var h = function (a) {
                            return 10 > a ? "0" + a : a
                        };
                        q = q || {};
                        var k = [],
                            l = q.zulu ? "getUTC" : "get",
                            e = "";
                        "time" != q.selector && (e = a[l + "FullYear"](), e = ["0000".substr((e + "").length) + e, h(a[l + "Month"]() + 1), h(a[l + "Date"]())].join("-"));
                        k.push(e);
                        if ("date" != q.selector) {
                            e = [h(a[l + "Hours"]()), h(a[l + "Minutes"]()), h(a[l + "Seconds"]())].join(":");
                            l = a[l + "Milliseconds"]();
                            q.milliseconds && (e += "." + (100 > l ? "0" : "") + h(l));
                            if (q.zulu) e += "Z";
                            else if ("time" != q.selector) var l = a.getTimezoneOffset(),
                                c = Math.abs(l),
                                e = e + ((0 < l ? "-" : "+") +
                                    h(Math.floor(c / 60)) + ":" + h(c % 60));
                            k.push(e)
                        }
                        return k.join("T")
                    };
                return a
            })
        },
        "dijit/_DialogMixin": function () {
            define(["dojo/_base/declare", "./a11y"], function (r, p) {
                return r("dijit._DialogMixin", null, {
                    actionBarTemplate: "",
                    execute: function () {},
                    onCancel: function () {},
                    onExecute: function () {},
                    _onSubmit: function () {
                        this.onExecute();
                        this.execute(this.get("value"))
                    },
                    _getFocusItems: function () {
                        var a = p._getTabNavigable(this.domNode);
                        this._firstFocusItem = a.lowest || a.first || this.closeButtonNode || this.domNode;
                        this._lastFocusItem =
                            a.last || a.highest || this._firstFocusItem
                    }
                })
            })
        },
        "dijit/form/_FormMixin": function () {
            define("dojo/_base/array dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/on dojo/window".split(" "), function (r, p, a, g, q, h) {
                return p("dijit.form._FormMixin", null, {
                    state: "",
                    _getDescendantFormWidgets: function (a) {
                        var l = [];
                        r.forEach(a || this.getChildren(), function (a) {
                            "value" in a ? l.push(a) : l = l.concat(this._getDescendantFormWidgets(a.getChildren()))
                        }, this);
                        return l
                    },
                    reset: function () {
                        r.forEach(this._getDescendantFormWidgets(),
                            function (a) {
                                a.reset && a.reset()
                            })
                    },
                    validate: function () {
                        var a = !1;
                        return r.every(r.map(this._getDescendantFormWidgets(), function (l) {
                            l._hasBeenBlurred = !0;
                            var e = l.disabled || !l.validate || l.validate();
                            !e && !a && (h.scrollIntoView(l.containerNode || l.domNode), l.focus(), a = !0);
                            return e
                        }), function (a) {
                            return a
                        })
                    },
                    setValues: function (k) {
                        a.deprecated(this.declaredClass + "::setValues() is deprecated. Use set('value', val) instead.", "", "2.0");
                        return this.set("value", k)
                    },
                    _setValueAttr: function (a) {
                        var l = {};
                        r.forEach(this._getDescendantFormWidgets(),
                            function (a) {
                                a.name && (l[a.name] || (l[a.name] = [])).push(a)
                            });
                        for (var e in l)
                            if (l.hasOwnProperty(e)) {
                                var c = l[e],
                                    b = g.getObject(e, !1, a);
                                void 0 !== b && (b = [].concat(b), "boolean" == typeof c[0].checked ? r.forEach(c, function (a) {
                                    a.set("value", -1 != r.indexOf(b, a._get("value")))
                                }) : c[0].multiple ? c[0].set("value", b) : r.forEach(c, function (a, c) {
                                    a.set("value", b[c])
                                }))
                            }
                    },
                    getValues: function () {
                        a.deprecated(this.declaredClass + "::getValues() is deprecated. Use get('value') instead.", "", "2.0");
                        return this.get("value")
                    },
                    _getValueAttr: function () {
                        var a = {};
                        r.forEach(this._getDescendantFormWidgets(), function (l) {
                            var e = l.name;
                            if (e && !l.disabled) {
                                var c = l.get("value");
                                "boolean" == typeof l.checked ? /Radio/.test(l.declaredClass) ? !1 !== c ? g.setObject(e, c, a) : (c = g.getObject(e, !1, a), void 0 === c && g.setObject(e, null, a)) : (l = g.getObject(e, !1, a), l || (l = [], g.setObject(e, l, a)), !1 !== c && l.push(c)) : (l = g.getObject(e, !1, a), "undefined" != typeof l ? g.isArray(l) ? l.push(c) : g.setObject(e, [l, c], a) : g.setObject(e, c, a))
                            }
                        });
                        return a
                    },
                    isValid: function () {
                        return "" == this.state
                    },
                    onValidStateChange: function () {},
                    _getState: function () {
                        var a = r.map(this._descendants, function (a) {
                            return a.get("state") || ""
                        });
                        return 0 <= r.indexOf(a, "Error") ? "Error" : 0 <= r.indexOf(a, "Incomplete") ? "Incomplete" : ""
                    },
                    disconnectChildren: function () {},
                    connectChildren: function (a) {
                        this._descendants = this._getDescendantFormWidgets();
                        r.forEach(this._descendants, function (a) {
                            a._started || a.startup()
                        });
                        a || this._onChildChange()
                    },
                    _onChildChange: function (a) {
                        (!a || "state" == a || "disabled" == a) && this._set("state", this._getState());
                        if (!a || "value" == a || "disabled" ==
                            a || "checked" == a) this._onChangeDelayTimer && this._onChangeDelayTimer.remove(), this._onChangeDelayTimer = this.defer(function () {
                            delete this._onChangeDelayTimer;
                            this._set("value", this.get("value"))
                        }, 10)
                    },
                    startup: function () {
                        this.inherited(arguments);
                        this._descendants = this._getDescendantFormWidgets();
                        this.value = this.get("value");
                        this.state = this._getState();
                        var a = this;
                        this.own(q(this.containerNode, "attrmodified-state, attrmodified-disabled, attrmodified-value, attrmodified-checked", function (l) {
                            l.target != a.domNode &&
                                a._onChildChange(l.type.replace("attrmodified-", ""))
                        }));
                        this.watch("state", function (a, e, c) {
                            this.onValidStateChange("" == c)
                        })
                    },
                    destroy: function () {
                        this.inherited(arguments)
                    }
                })
            })
        },
        "esri/main": function () {
            define(["./kernel", "dojo/i18n!./nls/jsapi", "./config", "./sniff"], function (r, p) {
                r.bundle = p;
                return r
            })
        },
        "esri/kernel": function () {
            define(["dojo/_base/kernel", "dojo/_base/config", "dojo/has"], function (r, p, a) {
                var g = function () {
                        return this
                    }(),
                    q = g.location,
                    h = q.pathname,
                    k = q.protocol,
                    q = {
                        version: "3.19",
                        _appBaseUrl: k +
                            "//" + q.host + h.substring(0, h.lastIndexOf(h.split("/")[h.split("/").length - 1]))
                    };
                p.noGlobals || (g.esri = q);
                r.isAsync || a.add("extend-esri", 1);
                (q.dijit = q.dijit || {})._arcgisUrl = ("http:" === k || "https:" === k ? k : "http:") + "//www.arcgis.com/sharing/rest";
                return q
            })
        },
        "esri/config": function () {
            define(["dojo/_base/config", "dojo/topic", "dojo/has", "./kernel"], function (r, p, a, g) {
                var q = function () {
                        return this
                    }(),
                    h = {
                        defaults: {
                            screenDPI: 96,
                            geometryService: null,
                            kmlService: null,
                            map: {
                                width: 400,
                                height: 400,
                                layerNamePrefix: "layer",
                                graphicsLayerNamePrefix: "graphicsLayer",
                                slider: {
                                    left: "30px",
                                    top: "30px",
                                    width: null,
                                    height: "200px"
                                },
                                sliderLabel: {
                                    tick: 5,
                                    labels: null,
                                    style: "width:2em; font-family:Verdana; font-size:75%;"
                                },
                                sliderChangeImmediate: !0,
                                zoomSymbol: {
                                    color: [0, 0, 0, 64],
                                    outline: {
                                        color: [255, 0, 0, 255],
                                        width: 1.25,
                                        style: "esriSLSSolid"
                                    },
                                    style: "esriSFSSolid"
                                },
                                zoomDuration: 500,
                                zoomRate: 25,
                                panDuration: 350,
                                panRate: 25,
                                logoLink: "https://www.esri.com"
                            },
                            autoSpatialIndexing: q.Worker && !1,
                            io: {
                                errorHandler: function (a, l) {
                                    p.publish("esri.Error", [a])
                                },
                                proxyUrl: null,
                                alwaysUseProxy: !1,
                                useCors: "with-credentials",
                                corsEnabledServers: "server.arcgisonline.com services.arcgisonline.com www.arcgis.com tiles.arcgis.com tiles1.arcgis.com tiles2.arcgis.com tiles3.arcgis.com tiles4.arcgis.com basemaps.arcgis.com elevation3d.arcgis.com services.arcgis.com services1.arcgis.com services2.arcgis.com services3.arcgis.com services4.arcgis.com services5.arcgis.com services6.arcgis.com services7.arcgis.com static.arcgis.com utility.arcgisonline.com geocode.arcgis.com geoenrich.arcgis.com qaext.arcgis.com tilesqa.arcgis.com servicesqa.arcgis.com servicesqa1.arcgis.com servicesqa2.arcgis.com servicesqa3.arcgis.com geocodeqa.arcgis.com geoenrichqa.arcgis.com dev.arcgis.com devext.arcgis.com staticdev.arcgis.com tilesdevext.arcgis.com elevation3ddev.arcgis.com servicesdev.arcgis.com servicesdev1.arcgis.com servicesdev2.arcgis.com servicesdev3.arcgis.com geocodedev.arcgis.com geoenrichdev.arcgis.com basemapsdev.arcgis.com".split(" "),
                                corsDetection: q.cordova ? !1 : !0,
                                corsStatus: {},
                                webTierAuthServers: [],
                                proxyRules: [],
                                postLength: 2E3,
                                timeout: 6E4,
                                useWorkers: "on-request",
                                maxRequestWorkers: 5,
                                httpsDomains: "arcgis.com arcgisonline.com esrikr.com premiumservices.blackbridge.com esripremium.accuweather.com gbm.digitalglobe.com firstlook.digitalglobe.com msi.digitalglobe.com".split(" ")
                            }
                        }
                    };
                a("extend-esri") && (g.config = h);
                r.noGlobals || (q.esriConfig = h);
                return h
            })
        },
        "esri/sniff": function () {
            define(["dojo/_base/sniff", "./kernel"], function (r, p) {
                var a =
                    function () {
                        return this
                    }(),
                    g = r("ff"),
                    q = r("ie"),
                    h = void 0 === q && 7 <= r("trident"),
                    k = r("edge"),
                    l = r("webkit"),
                    e = r("opera"),
                    c = r("chrome"),
                    b = r("safari"),
                    d = navigator.userAgent,
                    m;
                (m = d.match(/(iPhone|iPad|CPU)\s+OS\s+(\d+\_\d+)/i)) && r.add("esri-iphone", parseFloat(m[2].replace("_", ".")));
                (m = d.match(/Android\s+(\d+\.\d+)/i)) && r.add("esri-android", parseFloat(m[1]));
                (m = d.match(/Fennec\/(\d+\.\d+)/i)) && r.add("esri-fennec", parseFloat(m[1]));
                0 <= d.indexOf("BlackBerry") && 0 <= d.indexOf("WebKit") && r.add("esri-blackberry",
                    1);
                r.add("esri-touch", r("esri-iphone") || r("esri-android") || r("esri-blackberry") || 6 <= r("esri-fennec") || (g || l) && document.createTouch ? !0 : !1);
                (m = d.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i)) && r.add("esri-mobile", m);
                r.add("esri-pointer", navigator.pointerEnabled || navigator.msPointerEnabled);
                p._getDOMAccessor = function (a) {
                    var b = "";
                    g ? b = "Moz" : l ? b = "Webkit" : q ? b = "ms" : e && (b = "O");
                    return b + a.charAt(0).toUpperCase() + a.substr(1)
                };
                r.add("esri-phonegap", !!a.cordova);
                r.add("esri-cors", r("esri-phonegap") ||
                    a.XMLHttpRequest && "withCredentials" in new XMLHttpRequest);
                r.add("esri-file-upload", a.FormData && a.FileList ? !0 : !1);
                r.add("esri-workers", a.Worker ? !0 : !1);
                r.add("esri-transforms", h || k || 9 <= q || 3.5 <= g || 4 <= c || 3.1 <= b || 10.5 <= e || 3.2 <= r("esri-iphone") || 2.1 <= r("esri-android"));
                r.add("esri-transitions", h || k || 10 <= q || 4 <= g || 4 <= c || 3.1 <= b || 10.5 <= e || 3.2 <= r("esri-iphone") || 2.1 <= r("esri-android"));
                r.add("esri-transforms3d", h || k || 10 <= g || 12 <= c || 4 <= b || 3.2 <= r("esri-iphone") || 3 <= r("esri-android"));
                r.add("esri-url-encodes-apostrophe",
                    function () {
                        if (a.document) return !1;
                        var b = a.document.createElement("a");
                        b.href = "?'";
                        return -1 < b.href.indexOf("?%27")
                    });
                3 > r("esri-android") && (r.add("esri-transforms", !1, !1, !0), r.add("esri-transitions", !1, !1, !0), r.add("esri-transforms3d", !1, !1, !0));
                r.add("esri-will-change", r("esri-transforms") && (52 <= c || 9.1 <= b));
                p._css = function (a) {
                    var d = r("esri-transforms3d");
                    if (void 0 !== a && null !== a) d = a;
                    else if (d && (c || b && !r("esri-iphone"))) d = !1;
                    var n = d ? "translate3d(" : "translate(",
                        f = d ? c ? ",-1px)" : ",0px)" : ")",
                        m = d ? "scale3d(" :
                        "scale(",
                        u = d ? ",1)" : ")",
                        w = d ? "rotate3d(0,0,1," : "rotate(",
                        k = d ? "matrix3d(" : "matrix(",
                        h = d ? ",0,0," : ",",
                        p = d ? ",0,0,0,0,1,0," : ",",
                        A = d ? ",0,1)" : ")";
                    return {
                        names: {
                            transition: l && "-webkit-transition" || g && "MozTransition" || e && "OTransition" || q && "msTransition" || "transition",
                            transform: l && "-webkit-transform" || g && "MozTransform" || e && "OTransform" || q && "msTransform" || "transform",
                            transformName: l && "-webkit-transform" || g && "-moz-transform" || e && "-o-transform" || q && "-ms-transform" || "transform",
                            origin: l && "-webkit-transform-origin" ||
                                g && "MozTransformOrigin" || e && "OTransformOrigin" || q && "msTransformOrigin" || "transformOrigin",
                            endEvent: l && "webkitTransitionEnd" || g && "transitionend" || e && "oTransitionEnd" || q && "MSTransitionEnd" || "transitionend"
                        },
                        translate: function (a, b) {
                            return n + a + "px," + b + "px" + f
                        },
                        scale: function (a) {
                            return m + a + "," + a + u
                        },
                        rotate: function (a) {
                            return w + a + "deg)"
                        },
                        matrix: function (a) {
                            return k + a.xx + "," + a.xy + h + a.yx + "," + a.yy + p + a.dx.toFixed(10) + (g ? "px," : ",") + a.dy.toFixed(10) + (g ? "px" : "") + A
                        },
                        getScaleFromMatrix: function (a) {
                            if (!a) return 1;
                            a = a.toLowerCase();
                            var f = -1 < a.indexOf("matrix3d") ? "matrix3d(" : "matrix(";
                            return Number(a.substring(f.length, a.indexOf(",")))
                        }
                    }
                };
                r("extend-esri") && (p.isiPhone = r("esri-iphone"), p.isAndroid = r("esri-android"), p.isFennec = r("esri-fennec"), p.isBlackBerry = r("esri-blackberry"), p.isTouchEnabled = r("esri-touch"), p.isPointerEnabled = r("esri-pointer"), p._hasCors = r("esri-cors"), p._hasFileUpload = r("esri-file-upload"), p._hasTransforms = r("esri-transforms"), p._hasTransitions = r("esri-transitions"), p._has3DTransforms = r("esri-transforms3d"));
                return r
            })
        },
        "esri/map": function () {
            define("require dojo/_base/kernel dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/event dojo/on dojo/aspect dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dijit/a11yclick dijit/registry ./kernel ./config ./sniff ./lang ./_coremap ./MapNavigationManager dojo/i18n!./nls/jsapi".split(" "), function (r, p, a, g, q, h, k, l, e, c, b, d, m, t, s, n, f, y, u, w, C, x, v, A) {
                var z = {
                        up: "panUp",
                        right: "panRight",
                        down: "panDown",
                        left: "panLeft"
                    },
                    H = {
                        upperRight: "panUpperRight",
                        lowerRight: "panLowerRight",
                        lowerLeft: "panLowerLeft",
                        upperLeft: "panUpperLeft"
                    },
                    D = g.connect,
                    F = g.disconnect,
                    E = m.create,
                    Q = s.set,
                    R = q.hitch,
                    G = t.getMarginBox,
                    I = p.deprecated,
                    P = q.mixin,
                    K = 0;
                p = a(x, {
                    declaredClass: "esri.Map",
                    constructor: function (a, f) {
                        P(this, {
                            _slider: null,
                            _navDiv: null,
                            _mapParams: P({
                                attributionWidth: 0.45,
                                slider: !0,
                                nav: !1,
                                logo: !0,
                                sliderStyle: "small",
                                sliderPosition: "top-left",
                                sliderOrientation: "vertical",
                                autoResize: !0
                            }, f || {})
                        });
                        P(this, {
                            isDoubleClickZoom: !1,
                            isShiftDoubleClickZoom: !1,
                            isClickRecenter: !1,
                            isScrollWheelZoom: !1,
                            isPan: !1,
                            isRubberBandZoom: !1,
                            isKeyboardNavigation: !1,
                            isPanArrows: !1,
                            isZoomSlider: !1
                        });
                        q.isFunction(y._css) && (y._css = y._css(this._mapParams.force3DTransforms), this.force3DTransforms = this._mapParams.force3DTransforms);
                        var b = w("esri-transforms") && w("esri-transitions");
                        this.navigationMode = this._mapParams.navigationMode || b && "css-transforms" || "classic";
                        "css-transforms" === this.navigationMode && !b && (this.navigationMode = "classic");
                        this.fadeOnZoom =
                            C.isDefined(this._mapParams.fadeOnZoom) ? this._mapParams.fadeOnZoom : "css-transforms" === this.navigationMode;
                        "css-transforms" !== this.navigationMode && (this.fadeOnZoom = !1);
                        this.setMapCursor("default");
                        this.smartNavigation = f && f.smartNavigation;
                        if (!C.isDefined(this.smartNavigation) && w("mac") && !w("esri-touch") && !w("esri-pointer") && !(3.5 >= w("ff"))) {
                            var c = navigator.userAgent.match(/Mac\s+OS\s+X\s+([\d]+)(\.|\_)([\d]+)\D/i);
                            c && (C.isDefined(c[1]) && C.isDefined(c[3])) && (b = parseInt(c[1], 10), c = parseInt(c[3], 10),
                                this.smartNavigation = 10 < b || 10 === b && 6 <= c)
                        }
                        this.showAttribution = C.isDefined(this._mapParams.showAttribution) ? this._mapParams.showAttribution : !0;
                        this._onLoadHandler_connect = D(this, "onLoad", this, "_onLoadInitNavsHandler");
                        var d = E("div", {
                            "class": "esriControlsBR" + (this._mapParams.nav ? " withPanArrows" : "")
                        }, this.root);
                        if (this.showAttribution)
                            if (b = q.getObject("esri.dijit.Attribution", !1)) this._initAttribution(b, d);
                            else {
                                var s = K++,
                                    m = this;
                                this._rids && this._rids.push(s);
                                r(["./dijit/Attribution"], function (a) {
                                    var f =
                                        m._rids ? h.indexOf(m._rids, s) : -1; - 1 !== f && (m._rids.splice(f, 1), m._initAttribution(a, d))
                                })
                            }
                        this._mapParams.logo && (b = {}, 6 === w("ie") && (b.filter = "progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled\x3d'true', sizingMethod\x3d'crop', src\x3d'" + r.toUrl("./images/map/logo-med.png") + "')"), this._ogol = E("div", {
                            style: b,
                            tabIndex: "0",
                            title: "Esri"
                        }, d), this._setLogoSize(), this._onMapResizeLogo_connect = D(this, "onResize", this, "_setLogoSize"), this._ogol_connect = D(this._ogol, n, this, "_openLogoLink"));
                        this.navigationManager =
                            new v(this);
                        f && f.basemap && (this._onLoadFix = !0, this.setBasemap(f.basemap), this._onLoadFix = !1);
                        if (this.autoResize = this._mapParams.autoResize) b = this._getEnclosingResizableWidget(this.container) || window, c = this.resize, this._rszSignal = l.pausable(b, "resize", c), this._oriSignal = l.pausable(window, "orientationchange", c), e.after(b, "resize", c, !0), this._startResizeTimer()
                    },
                    _startResizeTimer: function () {
                        clearTimeout(this._persistentTimer);
                        this._persistentTimer = setTimeout(this._timedResize, 2 * this.resizeDelay)
                    },
                    _getEnclosingResizableWidget: function (a) {
                        var b =
                            f.getEnclosingWidget(a);
                        return !b ? b : b.resize ? b : this._getEnclosingResizableWidget(a.parentNode)
                    },
                    _setLogoSize: function () {
                        this._ogol && (25E4 > this.root.clientWidth * this.root.clientHeight ? (d.remove(this._ogol, "logo-med"), d.add(this._ogol, "logo-sm")) : (d.remove(this._ogol, "logo-sm"), d.add(this._ogol, "logo-med")))
                    },
                    _initAttribution: function (a, f) {
                        var b = E("span", {
                            "class": "esriAttribution"
                        }, f, "first");
                        Q(b, "maxWidth", Math.floor(this.width * this._mapParams.attributionWidth) + "px");
                        this._connects.push(D(b, n, function () {
                            d.contains(this,
                                "esriAttributionOpen") ? d.remove(this, "esriAttributionOpen") : this.scrollWidth > this.clientWidth && d.add(this, "esriAttributionOpen")
                        }));
                        this.attribution = new a({
                            map: this
                        }, b)
                    },
                    _cleanUp: function () {
                        this.disableMapNavigation();
                        this.navigationManager.destroy();
                        var a = this._slider;
                        a && (a.destroy && !a._destroyed) && a.destroy();
                        var a = this._navDiv,
                            f = this.attribution;
                        a && m.destroy(a);
                        f && f.destroy();
                        this._connects.push(this._slider_connect, this._ogol_connect, this._rszSignal, this._oriSignal);
                        h.forEach(this._connects, F);
                        clearInterval(this._persistentTimer);
                        this.attribution = this.navigationManager = this._rids = this._connects = this._slider_connect = this._ogol_connect = this._rszSignal = this._oriSignal = this._persistentTimer = null;
                        this.inherited("_cleanUp", arguments)
                    },
                    _isPanningOrZooming: function () {
                        return this.__panning || this.__zooming
                    },
                    _canZoom: function (a) {
                        var f = this.getLevel();
                        return !this.__tileInfo || !(f === this.getMinZoom() && 0 > a || f === this.getMaxZoom() && 0 < a)
                    },
                    _onLoadInitNavsHandler: function () {
                        this.enableMapNavigation();
                        this._createNav();
                        if ("small" === this._mapParams.sliderStyle || !this._createSlider) this._createSimpleSlider();
                        else if (this._mapParams.slider) {
                            var a = -1 !== this._getSliderClass(!0).indexOf("Horizontal"),
                                a = [a ? "dijit.form.HorizontalSlider" : "dijit.form.VerticalSlider", a ? "dijit.form.HorizontalRule" : "dijit.form.VerticalRule", a ? "dijit.form.HorizontalRuleLabels" : "dijit.form.VerticalRuleLabels"];
                            if (h.some(a, function (a) {
                                    return !q.getObject(a, !1)
                                })) {
                                var a = h.map(a, function (a) {
                                        return a.replace(/\./g, "/")
                                    }),
                                    f = K++,
                                    b = this;
                                this._rids && this._rids.push(f);
                                r(a, function () {
                                    var a = b._rids ? h.indexOf(b._rids, f) : -1; - 1 !== a && (b._rids.splice(a, 1), b._createSlider.apply(b, arguments))
                                })
                            } else a = h.map(a, function (a) {
                                return q.getObject(a, !1)
                            }), this._createSlider.apply(this, a)
                        }
                        F(this._onLoadHandler_connect)
                    },
                    _createNav: function () {
                        if (this._mapParams.nav) {
                            var a, f, b, c = d.add,
                                n = this.id;
                            this._navDiv = E("div", {
                                id: n + "_navdiv"
                            }, this.root);
                            c(this._navDiv, "navDiv");
                            var e = this.width / 2,
                                s = this.height / 2,
                                m;
                            for (b in z) f = z[b], a = E("div", {
                                    id: n + "_pan_" + b
                                }, this._navDiv), c(a, "fixedPan " + f),
                                "up" === b || "down" === b ? (m = parseInt(G(a).w, 10) / 2, Q(a, {
                                    left: e - m + "px",
                                    zIndex: 30
                                })) : (m = parseInt(G(a).h, 10) / 2, Q(a, {
                                    top: s - m + "px",
                                    zIndex: 30
                                })), this._connects.push(D(a, "onclick", R(this, this[f])));
                            this._onMapResizeNavHandler_connect = D(this, "onResize", this, "_onMapResizeNavHandler");
                            for (b in H) f = H[b], a = E("div", {
                                id: n + "_pan_" + b,
                                style: {
                                    zIndex: 30
                                }
                            }, this._navDiv), c(a, "fixedPan " + f), this._connects.push(D(a, "onclick", R(this, this[f])));
                            this.isPanArrows = !0
                        }
                    },
                    _onMapResizeNavHandler: function (a, f, b) {
                        a = this.id;
                        f /= 2;
                        b /= 2;
                        var d =
                            c.byId,
                            n, e, s;
                        for (n in z) e = d(a + "_pan_" + n), "up" === n || "down" === n ? (s = parseInt(G(e).w, 10) / 2, Q(e, "left", f - s + "px")) : (s = parseInt(G(e).h, 10) / 2, Q(e, "top", b - s + "px"))
                    },
                    _createSimpleSlider: function () {
                        if (this._mapParams.slider) {
                            var a = this._slider = E("div", {
                                    id: this.id + "_zoom_slider",
                                    "class": this._getSliderClass(),
                                    style: {
                                        zIndex: 30
                                    }
                                }),
                                f = E("div", {
                                    "class": "esriSimpleSliderIncrementButton",
                                    tabIndex: "0",
                                    role: "button"
                                }, a),
                                b = E("div", {
                                    "class": "esriSimpleSliderDecrementButton",
                                    tabIndex: "0",
                                    role: "button"
                                }, a);
                            this._addZoomButtonTooltips(f,
                                b);
                            this._incButton = f;
                            this._decButton = b;
                            this._simpleSliderZoomHandler(null, null, null, this.getLevel());
                            var e = A.widgets.zoomSlider;
                            this._addZoomButtonIcon(f, "+", e.zoomIn);
                            this._addZoomButtonIcon(b, "\x26minus;", e.zoomOut);
                            8 > w("ie") && d.add(b, "dj_ie67Fix");
                            this._connects.push(D(f, n, this, this._simpleSliderChangeHandler));
                            this._connects.push(D(b, n, this, this._simpleSliderChangeHandler));
                            (-1 < this.getMaxZoom() || -1 < this.getMinZoom()) && this._connects.push(D(this, "onZoomEnd", this, this._simpleSliderZoomHandler));
                            10 > w("ie") && c.setSelectable(a, !1);
                            this.root.appendChild(a);
                            this.isZoomSlider = !0
                        }
                    },
                    _simpleSliderChangeHandler: function (a) {
                        k.stop(a);
                        a = -1 !== a.currentTarget.className.indexOf("IncrementButton") ? !0 : !1;
                        this._extentUtil({
                            numLevels: a ? 1 : -1
                        })
                    },
                    _simpleSliderZoomHandler: function (a, f, b, c) {
                        var n;
                        a = this._incButton;
                        f = this._decButton; - 1 < c && c === this.getMaxZoom() ? n = a : -1 < c && c === this.getMinZoom() && (n = f);
                        n ? (d.add(n, "esriSimpleSliderDisabledButton"), d.remove(n === a ? f : a, "esriSimpleSliderDisabledButton")) : (d.remove(a, "esriSimpleSliderDisabledButton"),
                            d.remove(f, "esriSimpleSliderDisabledButton"))
                    },
                    _getSliderClass: function (a) {
                        a = a ? "Large" : "Simple";
                        var f = this._mapParams.sliderOrientation,
                            b = this._mapParams.sliderPosition || "",
                            f = f && "horizontal" === f.toLowerCase() ? "esri" + a + "SliderHorizontal" : "esri" + a + "SliderVertical";
                        if (b) switch (b.toLowerCase()) {
                        case "top-left":
                            b = "esri" + a + "SliderTL";
                            break;
                        case "top-right":
                            b = "esri" + a + "SliderTR";
                            break;
                        case "bottom-left":
                            b = "esri" + a + "SliderBL";
                            break;
                        case "bottom-right":
                            b = "esri" + a + "SliderBR"
                        }
                        return "esri" + a + "Slider " + f + " " +
                            b
                    },
                    _addZoomButtonIcon: function (a, f, b) {
                        m.create("span", {
                            "aria-hidden": "true",
                            role: "presentation",
                            innerHTML: f
                        }, a);
                        m.create("span", {
                            "class": "esriIconFallbackText",
                            innerHTML: b
                        }, a)
                    },
                    _addZoomButtonTooltips: function (a, f) {
                        var c = A.widgets.zoomSlider;
                        b.set(a, "title", c.zoomIn);
                        b.set(f, "title", c.zoomOut)
                    },
                    _createSlider: function (a, f, b) {
                        if (this._mapParams.slider) {
                            var c = E("div", {
                                    id: this.id + "_zoom_slider"
                                }, this.root),
                                d = u.defaults.map,
                                n = this._getSliderClass(!0),
                                e = -1 !== n.indexOf("Horizontal"),
                                s = this.getNumLevels();
                            if (0 < s) {
                                var m, y, t = this._mapParams.sliderLabels,
                                    l = !!t,
                                    k = !1 !== t;
                                if (k) {
                                    var g = e ? "bottomDecoration" : "rightDecoration";
                                    if (!t) {
                                        t = [];
                                        for (d = 0; d < s; d++) t[d] = ""
                                    }
                                    h.forEach([{
                                        "class": "esriLargeSliderTicks",
                                        container: g,
                                        count: s,
                                        dijitClass: f
                                    }, {
                                        "class": l && "esriLargeSliderLabels",
                                        container: g,
                                        count: s,
                                        labels: t,
                                        dijitClass: b
                                    }], function (a) {
                                        var b = E("div"),
                                            d = a.dijitClass;
                                        delete a.dijitClass;
                                        c.appendChild(b);
                                        d === f ? m = new d(a, b) : y = new d(a, b)
                                    })
                                }
                                a = this._slider = new a({
                                    id: c.id,
                                    "class": n,
                                    minimum: this.getMinZoom(),
                                    maximum: this.getMaxZoom(),
                                    discreteValues: s,
                                    value: this.getLevel(),
                                    clickSelect: !0,
                                    intermediateChanges: !0,
                                    style: "z-index:30;"
                                }, c);
                                a.startup();
                                k && (m.startup(), y.startup());
                                this._slider_connect = D(a, "onChange", this, "_onSliderChangeHandler");
                                this._connects.push(D(this, "onExtentChange", this, "_onExtentChangeSliderHandler"));
                                this._connects.push(D(a._movable, "onFirstMove", this, "_onSliderMoveStartHandler"))
                            } else {
                                a = this._slider = new a({
                                    id: c.id,
                                    "class": n,
                                    minimum: 0,
                                    maximum: 2,
                                    discreteValues: 3,
                                    value: 1,
                                    clickSelect: !0,
                                    intermediateChanges: d.sliderChangeImmediate,
                                    style: "height:50px; z-index:30;"
                                }, c);
                                b = a.domNode.firstChild.childNodes;
                                for (d = 1; 3 >= d; d++) Q(b[d], "visibility", "hidden");
                                a.startup();
                                this._slider_connect = D(a, "onChange", this, "_onDynSliderChangeHandler");
                                this._connects.push(D(this, "onExtentChange", this, "_onExtentChangeDynSliderHandler"))
                            }
                            d = a.incrementButton;
                            b = a.decrementButton;
                            e ? this._addZoomButtonTooltips(d, b) : this._addZoomButtonTooltips(b, d);
                            d.style.outline = "none";
                            b.style.outline = "none";
                            a.sliderHandle.style.outline = "none";
                            a._onKeyPress = function () {};
                            if (e = a._movable) {
                                var q = e.onMouseDown;
                                e.onMouseDown = function (a) {
                                    9 > w("ie") && 1 !== a.button || q.apply(this, arguments)
                                }
                            }
                            this.isZoomSlider = !0
                        }
                    },
                    _onSliderMoveStartHandler: function () {
                        F(this._slider_connect);
                        F(this._slidermovestop_connect);
                        this._slider_connect = D(this._slider, "onChange", this, "_onSliderChangeDragHandler");
                        this._slidermovestop_connect = D(this._slider._movable, "onMoveStop", this, "_onSliderMoveEndHandler")
                    },
                    _onSliderChangeDragHandler: function (a) {
                        this._extentUtil({
                            targetLevel: a
                        })
                    },
                    _onSliderMoveEndHandler: function () {
                        F(this._slider_connect);
                        F(this._slidermovestop_connect)
                    },
                    _onSliderChangeHandler: function (a) {
                        this.setLevel(a)
                    },
                    _updateSliderValue: function (a, f) {
                        F(this._slider_connect);
                        var b = this._slider,
                            c = b._onChangeActive;
                        b._onChangeActive = !1;
                        b.set("value", a);
                        b._onChangeActive = c;
                        this._slider_connect = D(b, "onChange", this, f)
                    },
                    _onExtentChangeSliderHandler: function (a, f, b, c) {
                        F(this._slidermovestop_connect);
                        this._updateSliderValue(c.level, "_onSliderChangeHandler")
                    },
                    _onDynSliderChangeHandler: function (a) {
                        this._extentUtil({
                            numLevels: 0 < a ? 1 : -1
                        })
                    },
                    _onExtentChangeDynSliderHandler: function () {
                        this._updateSliderValue(1, "_onDynSliderChangeHandler")
                    },
                    _openLogoLink: function (a) {
                        window.open(u.defaults.map.logoLink, "_blank");
                        k.stop(a)
                    },
                    enableMapNavigation: function () {
                        this.navigationManager.enableNavigation()
                    },
                    disableMapNavigation: function () {
                        this.navigationManager.disableNavigation()
                    },
                    enableDoubleClickZoom: function () {
                        this.isDoubleClickZoom || (this.navigationManager.enableDoubleClickZoom(), this.isDoubleClickZoom = !0)
                    },
                    disableDoubleClickZoom: function () {
                        this.isDoubleClickZoom &&
                            (this.navigationManager.disableDoubleClickZoom(), this.isDoubleClickZoom = !1)
                    },
                    enableShiftDoubleClickZoom: function () {
                        this.isShiftDoubleClickZoom || (I(this.declaredClass + ": Map.(enable/disable)ShiftDoubleClickZoom deprecated. Shift-Double-Click zoom behavior will not be supported.", null, "v2.0"), this.navigationManager.enableShiftDoubleClickZoom(), this.isShiftDoubleClickZoom = !0)
                    },
                    disableShiftDoubleClickZoom: function () {
                        this.isShiftDoubleClickZoom && (I(this.declaredClass + ": Map.(enable/disable)ShiftDoubleClickZoom deprecated. Shift-Double-Click zoom behavior will not be supported.",
                            null, "v2.0"), this.navigationManager.disableShiftDoubleClickZoom(), this.isShiftDoubleClickZoom = !1)
                    },
                    enableClickRecenter: function () {
                        this.isClickRecenter || (this.navigationManager.enableClickRecenter(), this.isClickRecenter = !0)
                    },
                    disableClickRecenter: function () {
                        this.isClickRecenter && (this.navigationManager.disableClickRecenter(), this.isClickRecenter = !1)
                    },
                    enablePan: function () {
                        this.isPan || (this.navigationManager.enablePan(), this.isPan = !0)
                    },
                    disablePan: function () {
                        this.isPan && (this.navigationManager.disablePan(),
                            this.isPan = !1)
                    },
                    enableRubberBandZoom: function () {
                        this.isRubberBandZoom || (this.navigationManager.enableRubberBandZoom(), this.isRubberBandZoom = !0)
                    },
                    disableRubberBandZoom: function () {
                        this.isRubberBandZoom && (this.navigationManager.disableRubberBandZoom(), this.isRubberBandZoom = !1)
                    },
                    enableKeyboardNavigation: function () {
                        this.isKeyboardNavigation || (this.navigationManager.enableKeyboardNavigation(), this.isKeyboardNavigation = !0)
                    },
                    disableKeyboardNavigation: function () {
                        this.isKeyboardNavigation && (this.navigationManager.disableKeyboardNavigation(),
                            this.isKeyboardNavigation = !1)
                    },
                    enableScrollWheelZoom: function () {
                        this.isScrollWheelZoom || (this.navigationManager.enableScrollWheelZoom(), this.isScrollWheelZoom = !0)
                    },
                    disableScrollWheelZoom: function () {
                        this.isScrollWheelZoom && (this.navigationManager.disableScrollWheelZoom(), this.isScrollWheelZoom = !1)
                    },
                    showPanArrows: function () {
                        this._navDiv && (this._navDiv.style.display = "block", this.isPanArrows = !0)
                    },
                    hidePanArrows: function () {
                        this._navDiv && (this._navDiv.style.display = "none", this.isPanArrows = !1)
                    },
                    showZoomSlider: function () {
                        this._slider &&
                            (Q(this._slider.domNode || this._slider, "visibility", "inherit"), this.isZoomSlider = !0)
                    },
                    hideZoomSlider: function () {
                        this._slider && (Q(this._slider.domNode || this._slider, "visibility", "hidden"), this.isZoomSlider = !1)
                    }
                });
                w("extend-esri") && (y.Map = p);
                return p
            })
        },
        "esri/lang": function () {
            define("dojo/_base/array dojo/_base/json dojo/_base/kernel dojo/_base/lang dojo/date dojo/has dojo/number dojo/date/locale ./kernel".split(" "), function (r, p, a, g, q, h, k, l, e) {
                function c(f, b, c) {
                    return [g.isString(f) ? f.split("") : f, b ||
a.global, g.isString(c) ? new Function("item", "index", "array", c) : c]
                }

                function b(a) {
                    return void 0 !== a && null !== a
                }

                function d(a, c, d) {
                    var n = d.match(/([^\(]+)(\([^\)]+\))?/i),
                        e = g.trim(n[1]);
                    d = c[a];
                    var n = p.fromJson((n[2] ? g.trim(n[2]) : "()").replace(/^\(/, "({").replace(/\)$/, "})")),
                        s = n.utcOffset;
                    if (-1 === r.indexOf(t, e)) e = g.getObject(e), g.isFunction(e) && (d = e(d, a, c, n));
                    else if ("number" === typeof d || "string" === typeof d && d && !isNaN(Number(d))) switch (d = Number(d), e) {
                    case "NumberFormat":
                        return k.format(d, n);
                    case "DateString":
                        a =
                            new Date(d);
                        if (n.local || n.systemLocale) return n.systemLocale ? a.toLocaleDateString() + (n.hideTime ? "" : " " + a.toLocaleTimeString()) : a.toDateString() + (n.hideTime ? "" : " " + a.toTimeString());
                        a = a.toUTCString();
                        n.hideTime && (a = a.replace(/\s+\d\d\:\d\d\:\d\d\s+(utc|gmt)/i, ""));
                        return a;
                    case "DateFormat":
                        return a = new Date(d), b(s) && (a = q.add(a, "minute", a.getTimezoneOffset() - s)), l.format(a, n)
                    }
                    return b(d) ? d : ""
                }

                function m(a, b) {
                    var c;
                    if (b)
                        for (c in a) a.hasOwnProperty(c) && (void 0 === a[c] ? delete a[c] : a[c] instanceof Object &&
                            m(a[c], !0));
                    else
                        for (c in a) a.hasOwnProperty(c) && void 0 === a[c] && delete a[c];
                    return a
                }
                var t = ["NumberFormat", "DateString", "DateFormat"],
                    s = /<\/?[^>]+>/g,
                    n = {
                        valueOf: function (a, b) {
                            for (var c in a)
                                if (a[c] == b) return c;
                            return null
                        },
                        stripTags: function (a) {
                            if (a) {
                                var b = typeof a;
                                if ("string" === b) a = a.replace(s, "");
                                else if ("object" === b)
                                    for (var c in a)(b = a[c]) && "string" === typeof b && (b = b.replace(s, "")), a[c] = b
                            }
                            return a
                        },
                        substitute: function (a, c, n) {
                            var e, s, m;
                            b(n) && (g.isObject(n) ? (e = n.first, s = n.dateFormat, m = n.numberFormat) :
                                e = n);
                            if (!c || "${*}" === c) {
                                c = [];
                                for (var t in a) {
                                    n = a[t];
                                    if (s && -1 !== r.indexOf(s.properties || "", t)) n = d(t, a, s.formatter || "DateString");
                                    else if (m && -1 !== r.indexOf(m.properties || "", t)) n = d(t, a, m.formatter || "NumberFormat");
                                    c.push(t + " \x3d " + (b(n) ? n : "") + "\x3cbr/\x3e");
                                    if (e) break
                                }
                                return c.join("")
                            }
                            return g.replace(c, g.hitch({
                                obj: a
                            }, function (a, f) {
                                var c = f.split(":");
                                return 1 < c.length ? (f = c[0], c.shift(), d(f, this.obj, c.join(":"))) : s && -1 !== r.indexOf(s.properties || "", f) ? d(f, this.obj, s.formatter || "DateString") : m && -1 !==
                                    r.indexOf(m.properties || "", f) ? d(f, this.obj, m.formatter || "NumberFormat") : b(this.obj[f]) ? this.obj[f] : ""
                            }), /\$\{([^\}]+)\}/g)
                        },
                        filter: function (a, b, d) {
                            b = c(a, d, b);
                            d = {};
                            var n;
                            a = b[0];
                            for (n in a) b[2].call(b[n], a[n], n, a) && (d[n] = a[n]);
                            return d
                        },
                        startsWith: function (a, b, c) {
                            c = c || 0;
                            return a.indexOf(b, c) === c
                        },
                        endsWith: function (a, b, c) {
                            if ("number" !== typeof c || !isFinite(c) || Math.floor(c) !== c || c > a.length) c = a.length;
                            c -= b.length;
                            a = a.indexOf(b, c);
                            return -1 !== a && a === c
                        },
                        isDefined: b,
                        fixJson: m
                    };
                h("extend-esri") && (g.mixin(e,
                    n), e._isDefined = b, e._getParts = c, e._sanitize = m);
                return n
            })
        },
        "dojo/date": function () {
            define(["./has", "./_base/lang"], function (r, p) {
                var a = {
                    getDaysInMonth: function (g) {
                        var q = g.getMonth();
                        return 1 == q && a.isLeapYear(g) ? 29 : [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31][q]
                    },
                    isLeapYear: function (a) {
                        a = a.getFullYear();
                        return !(a % 400) || !(a % 4) && !!(a % 100)
                    },
                    getTimezoneName: function (a) {
                        var q = a.toString(),
                            h = "",
                            k = q.indexOf("(");
                        if (-1 < k) h = q.substring(++k, q.indexOf(")"));
                        else if (k = /([A-Z\/]+) \d{4}$/, q = q.match(k)) h = q[1];
                        else if (q =
                            a.toLocaleString(), k = / ([A-Z\/]+)$/, q = q.match(k)) h = q[1];
                        return "AM" == h || "PM" == h ? "" : h
                    },
                    compare: function (a, q, h) {
                        a = new Date(+a);
                        q = new Date(+(q || new Date));
                        "date" == h ? (a.setHours(0, 0, 0, 0), q.setHours(0, 0, 0, 0)) : "time" == h && (a.setFullYear(0, 0, 0), q.setFullYear(0, 0, 0));
                        return a > q ? 1 : a < q ? -1 : 0
                    },
                    add: function (a, q, h) {
                        var k = new Date(+a),
                            l = !1,
                            e = "Date";
                        switch (q) {
                        case "day":
                            break;
                        case "weekday":
                            var c;
                            (q = h % 5) ? c = parseInt(h / 5): (q = 0 < h ? 5 : -5, c = 0 < h ? (h - 5) / 5 : (h + 5) / 5);
                            var b = a.getDay(),
                                d = 0;
                            6 == b && 0 < h ? d = 1 : 0 == b && 0 > h && (d = -1);
                            b += q;
                            if (0 ==
                                b || 6 == b) d = 0 < h ? 2 : -2;
                            h = 7 * c + q + d;
                            break;
                        case "year":
                            e = "FullYear";
                            l = !0;
                            break;
                        case "week":
                            h *= 7;
                            break;
                        case "quarter":
                            h *= 3;
                        case "month":
                            l = !0;
                            e = "Month";
                            break;
                        default:
                            e = "UTC" + q.charAt(0).toUpperCase() + q.substring(1) + "s"
                        }
                        if (e) k["set" + e](k["get" + e]() + h);
                        l && k.getDate() < a.getDate() && k.setDate(0);
                        return k
                    },
                    difference: function (g, q, h) {
                        q = q || new Date;
                        h = h || "day";
                        var k = q.getFullYear() - g.getFullYear(),
                            l = 1;
                        switch (h) {
                        case "quarter":
                            g = g.getMonth();
                            q = q.getMonth();
                            g = Math.floor(g / 3) + 1;
                            q = Math.floor(q / 3) + 1;
                            l = q + 4 * k - g;
                            break;
                        case "weekday":
                            k =
                                Math.round(a.difference(g, q, "day"));
                            h = parseInt(a.difference(g, q, "week"));
                            l = k % 7;
                            if (0 == l) k = 5 * h;
                            else {
                                var e = 0,
                                    c = g.getDay();
                                q = q.getDay();
                                h = parseInt(k / 7);
                                l = k % 7;
                                g = new Date(g);
                                g.setDate(g.getDate() + 7 * h);
                                g = g.getDay();
                                if (0 < k) switch (!0) {
                                    case 6 == c:
                                        e = -1;
                                        break;
                                    case 0 == c:
                                        e = 0;
                                        break;
                                    case 6 == q:
                                        e = -1;
                                        break;
                                    case 0 == q:
                                        e = -2;
                                        break;
                                    case 5 < g + l:
                                        e = -2
                                    } else if (0 > k) switch (!0) {
                                    case 6 == c:
                                        e = 0;
                                        break;
                                    case 0 == c:
                                        e = 1;
                                        break;
                                    case 6 == q:
                                        e = 2;
                                        break;
                                    case 0 == q:
                                        e = 1;
                                        break;
                                    case 0 > g + l:
                                        e = 2
                                    }
                                    k = k + e - 2 * h
                            }
                            l = k;
                            break;
                        case "year":
                            l = k;
                            break;
                        case "month":
                            l = q.getMonth() -
                                g.getMonth() + 12 * k;
                            break;
                        case "week":
                            l = parseInt(a.difference(g, q, "day") / 7);
                            break;
                        case "day":
                            l /= 24;
                        case "hour":
                            l /= 60;
                        case "minute":
                            l /= 60;
                        case "second":
                            l /= 1E3;
                        case "millisecond":
                            l *= q.getTime() - g.getTime()
                        }
                        return Math.round(l)
                    }
                };
                p.mixin(p.getObject("dojo.date", !0), a);
                return a
            })
        },
        "dojo/number": function () {
            define(["./_base/lang", "./i18n", "./i18n!./cldr/nls/number", "./string", "./regexp"], function (r, p, a, g, q) {
                var h = {};
                r.setObject("dojo.number", h);
                h.format = function (a, e) {
                    e = r.mixin({}, e || {});
                    var c = p.normalizeLocale(e.locale),
                        c = p.getLocalization("dojo.cldr", "number", c);
                    e.customs = c;
                    c = e.pattern || c[(e.type || "decimal") + "Format"];
                    return isNaN(a) || Infinity == Math.abs(a) ? null : h._applyPattern(a, c, e)
                };
                h._numberPatternRE = /[#0,]*[#0](?:\.0*#*)?/;
                h._applyPattern = function (a, e, c) {
                    c = c || {};
                    var b = c.customs.group,
                        d = c.customs.decimal;
                    e = e.split(";");
                    var m = e[0];
                    e = e[0 > a ? 1 : 0] || "-" + m;
                    if (-1 != e.indexOf("%")) a *= 100;
                    else if (-1 != e.indexOf("\u2030")) a *= 1E3;
                    else if (-1 != e.indexOf("\u00a4")) b = c.customs.currencyGroup || b, d = c.customs.currencyDecimal || d, e =
                        e.replace(/([\s\xa0]*)(\u00a4{1,3})([\s\xa0]*)/, function (a, b, f, d) {
                            a = c[["symbol", "currency", "displayName"][f.length - 1]] || c.currency || "";
                            return !a ? "" : b + a + d
                        });
                    else if (-1 != e.indexOf("E")) throw Error("exponential notation not supported");
                    var t = h._numberPatternRE,
                        m = m.match(t);
                    if (!m) throw Error("unable to find a number expression in pattern: " + e);
                    !1 === c.fractional && (c.places = 0);
                    return e.replace(t, h._formatAbsolute(a, m[0], {
                        decimal: d,
                        group: b,
                        places: c.places,
                        round: c.round
                    }))
                };
                h.round = function (a, e, c) {
                    c = 10 / (c ||
                        10);
                    return (c * +a).toFixed(e) / c
                };
                if (0 == (0.9).toFixed()) {
                    var k = h.round;
                    h.round = function (a, e, c) {
                        var b = Math.pow(10, -e || 0),
                            d = Math.abs(a);
                        if (!a || d >= b) b = 0;
                        else if (d /= b, 0.5 > d || 0.95 <= d) b = 0;
                        return k(a, e, c) + (0 < a ? b : -b)
                    }
                }
                h._formatAbsolute = function (a, e, c) {
                    c = c || {};
                    !0 === c.places && (c.places = 0);
                    Infinity === c.places && (c.places = 6);
                    e = e.split(".");
                    var b = "string" == typeof c.places && c.places.indexOf(","),
                        d = c.places;
                    b ? d = c.places.substring(b + 1) : 0 <= d || (d = (e[1] || []).length);
                    0 > c.round || (a = h.round(a, d, c.round));
                    a = String(Math.abs(a)).split(".");
                    var m = a[1] || "";
                    e[1] || c.places ? (b && (c.places = c.places.substring(0, b)), b = void 0 !== c.places ? c.places : e[1] && e[1].lastIndexOf("0") + 1, b > m.length && (a[1] = g.pad(m, b, "0", !0)), d < m.length && (a[1] = m.substr(0, d))) : a[1] && a.pop();
                    d = e[0].replace(",", "");
                    b = d.indexOf("0"); - 1 != b && (b = d.length - b, b > a[0].length && (a[0] = g.pad(a[0], b)), -1 == d.indexOf("#") && (a[0] = a[0].substr(a[0].length - b)));
                    var d = e[0].lastIndexOf(","),
                        t, s; - 1 != d && (t = e[0].length - d - 1, e = e[0].substr(0, d), d = e.lastIndexOf(","), -1 != d && (s = e.length - d - 1));
                    e = [];
                    for (d = a[0]; d;) b =
                        d.length - t, e.push(0 < b ? d.substr(b) : d), d = 0 < b ? d.slice(0, b) : "", s && (t = s, delete s);
                    a[0] = e.reverse().join(c.group || ",");
                    return a.join(c.decimal || ".")
                };
                h.regexp = function (a) {
                    return h._parseInfo(a).regexp
                };
                h._parseInfo = function (a) {
                    a = a || {};
                    var e = p.normalizeLocale(a.locale),
                        e = p.getLocalization("dojo.cldr", "number", e),
                        c = a.pattern || e[(a.type || "decimal") + "Format"],
                        b = e.group,
                        d = e.decimal,
                        m = 1;
                    if (-1 != c.indexOf("%")) m /= 100;
                    else if (-1 != c.indexOf("\u2030")) m /= 1E3;
                    else {
                        var t = -1 != c.indexOf("\u00a4");
                        t && (b = e.currencyGroup ||
                            b, d = e.currencyDecimal || d)
                    }
                    e = c.split(";");
                    1 == e.length && e.push("-" + e[0]);
                    e = q.buildGroupRE(e, function (c) {
                        c = "(?:" + q.escapeString(c, ".") + ")";
                        return c.replace(h._numberPatternRE, function (c) {
                            var f = {
                                signed: !1,
                                separator: a.strict ? b : [b, ""],
                                fractional: a.fractional,
                                decimal: d,
                                exponent: !1
                            };
                            c = c.split(".");
                            var e = a.places;
                            1 == c.length && 1 != m && (c[1] = "###");
                            1 == c.length || 0 === e ? f.fractional = !1 : (void 0 === e && (e = a.pattern ? c[1].lastIndexOf("0") + 1 : Infinity), e && void 0 == a.fractional && (f.fractional = !0), !a.places && e < c[1].length &&
                                (e += "," + c[1].length), f.places = e);
                            c = c[0].split(",");
                            1 < c.length && (f.groupSize = c.pop().length, 1 < c.length && (f.groupSize2 = c.pop().length));
                            return "(" + h._realNumberRegexp(f) + ")"
                        })
                    }, !0);
                    t && (e = e.replace(/([\s\xa0]*)(\u00a4{1,3})([\s\xa0]*)/g, function (b, c, f, d) {
                        b = q.escapeString(a[["symbol", "currency", "displayName"][f.length - 1]] || a.currency || "");
                        if (!b) return "";
                        c = c ? "[\\s\\xa0]" : "";
                        d = d ? "[\\s\\xa0]" : "";
                        return !a.strict ? (c && (c += "*"), d && (d += "*"), "(?:" + c + b + d + ")?") : c + b + d
                    }));
                    return {
                        regexp: e.replace(/[\xa0 ]/g, "[\\s\\xa0]"),
                        group: b,
                        decimal: d,
                        factor: m
                    }
                };
                h.parse = function (a, e) {
                    var c = h._parseInfo(e),
                        b = RegExp("^" + c.regexp + "$").exec(a);
                    if (!b) return NaN;
                    var d = b[1];
                    if (!b[1]) {
                        if (!b[2]) return NaN;
                        d = b[2];
                        c.factor *= -1
                    }
                    d = d.replace(RegExp("[" + c.group + "\\s\\xa0]", "g"), "").replace(c.decimal, ".");
                    return d * c.factor
                };
                h._realNumberRegexp = function (a) {
                    a = a || {};
                    "places" in a || (a.places = Infinity);
                    "string" != typeof a.decimal && (a.decimal = ".");
                    if (!("fractional" in a) || /^0/.test(a.places)) a.fractional = [!0, !1];
                    "exponent" in a || (a.exponent = [!0, !1]);
                    "eSigned" in
                    a || (a.eSigned = [!0, !1]);
                    var e = h._integerRegexp(a),
                        c = q.buildGroupRE(a.fractional, function (b) {
                            var c = "";
                            b && 0 !== a.places && (c = "\\" + a.decimal, c = Infinity == a.places ? "(?:" + c + "\\d+)?" : c + ("\\d{" + a.places + "}"));
                            return c
                        }, !0),
                        b = q.buildGroupRE(a.exponent, function (b) {
                            return b ? "([eE]" + h._integerRegexp({
                                signed: a.eSigned
                            }) + ")" : ""
                        }),
                        e = e + c;
                    c && (e = "(?:(?:" + e + ")|(?:" + c + "))");
                    return e + b
                };
                h._integerRegexp = function (a) {
                    a = a || {};
                    "signed" in a || (a.signed = [!0, !1]);
                    "separator" in a ? "groupSize" in a || (a.groupSize = 3) : a.separator = "";
                    var e =
                        q.buildGroupRE(a.signed, function (a) {
                            return a ? "[-+]" : ""
                        }, !0),
                        c = q.buildGroupRE(a.separator, function (b) {
                            if (!b) return "(?:\\d+)";
                            b = q.escapeString(b);
                            " " == b ? b = "\\s" : "\u00a0" == b && (b = "\\s\\xa0");
                            var c = a.groupSize,
                                e = a.groupSize2;
                            return e ? (b = "(?:0|[1-9]\\d{0," + (e - 1) + "}(?:[" + b + "]\\d{" + e + "})*[" + b + "]\\d{" + c + "})", 0 < c - e ? "(?:" + b + "|(?:0|[1-9]\\d{0," + (c - 1) + "}))" : b) : "(?:0|[1-9]\\d{0," + (c - 1) + "}(?:[" + b + "]\\d{" + c + "})*)"
                        }, !0);
                    return e + c
                };
                return h
            })
        },
        "dojo/regexp": function () {
            define(["./_base/kernel", "./_base/lang"], function (r,
                p) {
                var a = {};
                p.setObject("dojo.regexp", a);
                a.escapeString = function (a, q) {
                    return a.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g, function (a) {
                        return q && -1 != q.indexOf(a) ? a : "\\" + a
                    })
                };
                a.buildGroupRE = function (g, q, h) {
                    if (!(g instanceof Array)) return q(g);
                    for (var k = [], l = 0; l < g.length; l++) k.push(q(g[l]));
                    return a.group(k.join("|"), h)
                };
                a.group = function (a, q) {
                    return "(" + (q ? "?:" : "") + a + ")"
                };
                return a
            })
        },
        "dojo/date/locale": function () {
            define("../_base/lang ../_base/array ../date ../cldr/supplemental ../i18n ../regexp ../string ../i18n!../cldr/nls/gregorian module".split(" "),
                function (r, p, a, g, q, h, k, l, e) {
                    function c(a, f, b, c) {
                        return c.replace(/([a-z])\1*/ig, function (d) {
                            var e, s, t = d.charAt(0);
                            d = d.length;
                            var l = ["abbr", "wide", "narrow"];
                            switch (t) {
                            case "G":
                                e = f[4 > d ? "eraAbbr" : "eraNames"][0 > a.getFullYear() ? 0 : 1];
                                break;
                            case "y":
                                e = a.getFullYear();
                                switch (d) {
                                case 1:
                                    break;
                                case 2:
                                    if (!b.fullYear) {
                                        e = String(e);
                                        e = e.substr(e.length - 2);
                                        break
                                    }
                                default:
                                    s = !0
                                }
                                break;
                            case "Q":
                            case "q":
                                e = Math.ceil((a.getMonth() + 1) / 3);
                                s = !0;
                                break;
                            case "M":
                            case "L":
                                e = a.getMonth();
                                3 > d ? (e += 1, s = !0) : (t = ["months", "L" == t ? "standAlone" :
"format", l[d - 3]].join("-"), e = f[t][e]);
                                break;
                            case "w":
                                e = m._getWeekOfYear(a, 0);
                                s = !0;
                                break;
                            case "d":
                                e = a.getDate();
                                s = !0;
                                break;
                            case "D":
                                e = m._getDayOfYear(a);
                                s = !0;
                                break;
                            case "e":
                            case "c":
                                if (e = a.getDay(), 2 > d) {
                                    e = (e - g.getFirstDayOfWeek(b.locale) + 8) % 7;
                                    break
                                }
                            case "E":
                                e = a.getDay();
                                3 > d ? (e += 1, s = !0) : (t = ["days", "c" == t ? "standAlone" : "format", l[d - 3]].join("-"), e = f[t][e]);
                                break;
                            case "a":
                                t = 12 > a.getHours() ? "am" : "pm";
                                e = b[t] || f["dayPeriods-format-wide-" + t];
                                break;
                            case "h":
                            case "H":
                            case "K":
                            case "k":
                                s = a.getHours();
                                switch (t) {
                                case "h":
                                    e =
                                        s % 12 || 12;
                                    break;
                                case "H":
                                    e = s;
                                    break;
                                case "K":
                                    e = s % 12;
                                    break;
                                case "k":
                                    e = s || 24
                                }
                                s = !0;
                                break;
                            case "m":
                                e = a.getMinutes();
                                s = !0;
                                break;
                            case "s":
                                e = a.getSeconds();
                                s = !0;
                                break;
                            case "S":
                                e = Math.round(a.getMilliseconds() * Math.pow(10, d - 3));
                                s = !0;
                                break;
                            case "v":
                            case "z":
                                if (e = m._getZone(a, !0, b)) break;
                                d = 4;
                            case "Z":
                                t = m._getZone(a, !1, b);
                                t = [0 >= t ? "+" : "-", k.pad(Math.floor(Math.abs(t) / 60), 2), k.pad(Math.abs(t) % 60, 2)];
                                4 == d && (t.splice(0, 0, "GMT"), t.splice(3, 0, ":"));
                                e = t.join("");
                                break;
                            default:
                                throw Error("dojo.date.locale.format: invalid pattern char: " +
                                    c);
                            }
                            s && (e = k.pad(e, d));
                            return e
                        })
                    }

                    function b(a, f, b, c) {
                        var d = function (a) {
                            return a
                        };
                        f = f || d;
                        b = b || d;
                        c = c || d;
                        var e = a.match(/(''|[^'])+/g),
                            s = "'" == a.charAt(0);
                        p.forEach(e, function (a, c) {
                            a ? (e[c] = (s ? b : f)(a.replace(/''/g, "'")), s = !s) : e[c] = ""
                        });
                        return c(e.join(""))
                    }

                    function d(a, f, b, c) {
                        c = h.escapeString(c);
                        b.strict || (c = c.replace(" a", " ?a"));
                        return c.replace(/([a-z])\1*/ig, function (c) {
                            var d;
                            d = c.charAt(0);
                            var e = c.length,
                                s = "",
                                m = "";
                            b.strict ? (1 < e && (s = "0{" + (e - 1) + "}"), 2 < e && (m = "0{" + (e - 2) + "}")) : (s = "0?", m = "0{0,2}");
                            switch (d) {
                            case "y":
                                d =
                                    "\\d{2,4}";
                                break;
                            case "M":
                            case "L":
                                d = 2 < e ? "\\S+?" : "1[0-2]|" + s + "[1-9]";
                                break;
                            case "D":
                                d = "[12][0-9][0-9]|3[0-5][0-9]|36[0-6]|" + s + "[1-9][0-9]|" + m + "[1-9]";
                                break;
                            case "d":
                                d = "3[01]|[12]\\d|" + s + "[1-9]";
                                break;
                            case "w":
                                d = "[1-4][0-9]|5[0-3]|" + s + "[1-9]";
                                break;
                            case "E":
                            case "e":
                            case "c":
                                d = ".+?";
                                break;
                            case "h":
                                d = "1[0-2]|" + s + "[1-9]";
                                break;
                            case "k":
                                d = "1[01]|" + s + "\\d";
                                break;
                            case "H":
                                d = "1\\d|2[0-3]|" + s + "\\d";
                                break;
                            case "K":
                                d = "1\\d|2[0-4]|" + s + "[1-9]";
                                break;
                            case "m":
                            case "s":
                                d = "[0-5]\\d";
                                break;
                            case "S":
                                d = "\\d{" + e + "}";
                                break;
                            case "a":
                                e = b.am || f["dayPeriods-format-wide-am"];
                                s = b.pm || f["dayPeriods-format-wide-pm"];
                                d = e + "|" + s;
                                b.strict || (e != e.toLowerCase() && (d += "|" + e.toLowerCase()), s != s.toLowerCase() && (d += "|" + s.toLowerCase()), -1 != d.indexOf(".") && (d += "|" + d.replace(/\./g, "")));
                                d = d.replace(/\./g, "\\.");
                                break;
                            default:
                                d = ".*"
                            }
                            a && a.push(c);
                            return "(" + d + ")"
                        }).replace(/[\xa0 ]/g, "[\\s\\xa0]")
                    }
                    var m = {};
                    r.setObject(e.id.replace(/\//g, "."), m);
                    m._getZone = function (b, f, c) {
                        return f ? a.getTimezoneName(b) : b.getTimezoneOffset()
                    };
                    m.format =
                        function (a, f) {
                            f = f || {};
                            var d = q.normalizeLocale(f.locale),
                                e = f.formatLength || "short",
                                d = m._getGregorianBundle(d),
                                s = [],
                                t = r.hitch(this, c, a, d, f);
                            if ("year" == f.selector) return b(d["dateFormatItem-yyyy"] || "yyyy", t);
                            var k;
                            "date" != f.selector && (k = f.timePattern || d["timeFormat-" + e]) && s.push(b(k, t));
                            "time" != f.selector && (k = f.datePattern || d["dateFormat-" + e]) && s.push(b(k, t));
                            return 1 == s.length ? s[0] : d["dateTimeFormat-" + e].replace(/\'/g, "").replace(/\{(\d+)\}/g, function (a, f) {
                                return s[f]
                            })
                        };
                    m.regexp = function (a) {
                        return m._parseInfo(a).regexp
                    };
                    m._parseInfo = function (a) {
                        a = a || {};
                        var f = q.normalizeLocale(a.locale),
                            f = m._getGregorianBundle(f),
                            c = a.formatLength || "short",
                            e = a.datePattern || f["dateFormat-" + c],
                            s = a.timePattern || f["timeFormat-" + c],
                            c = "date" == a.selector ? e : "time" == a.selector ? s : f["dateTimeFormat-" + c].replace(/\{(\d+)\}/g, function (a, f) {
                                return [s, e][f]
                            }),
                            t = [];
                        return {
                            regexp: b(c, r.hitch(this, d, t, f, a)),
                            tokens: t,
                            bundle: f
                        }
                    };
                    m.parse = function (b, f) {
                        var c = /[\u200E\u200F\u202A\u202E]/g,
                            d = m._parseInfo(f),
                            e = d.tokens,
                            s = d.bundle,
                            c = RegExp("^" + d.regexp.replace(c,
                                "") + "$", d.strict ? "" : "i").exec(b && b.replace(c, ""));
                        if (!c) return null;
                        var t = ["abbr", "wide", "narrow"],
                            k = [1970, 0, 1, 0, 0, 0, 0],
                            l = "",
                            c = p.every(c, function (a, b) {
                                if (!b) return !0;
                                var c = e[b - 1],
                                    d = c.length,
                                    c = c.charAt(0);
                                switch (c) {
                                case "y":
                                    if (2 != d && f.strict) k[0] = a;
                                    else if (100 > a) a = Number(a), c = "" + (new Date).getFullYear(), d = 100 * c.substring(0, 2), c = Math.min(Number(c.substring(2, 4)) + 20, 99), k[0] = a < c ? d + a : d - 100 + a;
                                    else {
                                        if (f.strict) return !1;
                                        k[0] = a
                                    }
                                    break;
                                case "M":
                                case "L":
                                    if (2 < d) {
                                        if (d = s["months-" + ("L" == c ? "standAlone" : "format") +
                                                "-" + t[d - 3]].concat(), f.strict || (a = a.replace(".", "").toLowerCase(), d = p.map(d, function (a) {
                                                return a.replace(".", "").toLowerCase()
                                            })), a = p.indexOf(d, a), -1 == a) return !1
                                    } else a--;
                                    k[1] = a;
                                    break;
                                case "E":
                                case "e":
                                case "c":
                                    d = s["days-" + ("c" == c ? "standAlone" : "format") + "-" + t[d - 3]].concat();
                                    f.strict || (a = a.toLowerCase(), d = p.map(d, function (a) {
                                        return a.toLowerCase()
                                    }));
                                    a = p.indexOf(d, a);
                                    if (-1 == a) return !1;
                                    break;
                                case "D":
                                    k[1] = 0;
                                case "d":
                                    k[2] = a;
                                    break;
                                case "a":
                                    d = f.am || s["dayPeriods-format-wide-am"];
                                    c = f.pm || s["dayPeriods-format-wide-pm"];
                                    if (!f.strict) {
                                        var n = /\./g;
                                        a = a.replace(n, "").toLowerCase();
                                        d = d.replace(n, "").toLowerCase();
                                        c = c.replace(n, "").toLowerCase()
                                    }
                                    if (f.strict && a != d && a != c) return !1;
                                    l = a == c ? "p" : a == d ? "a" : "";
                                    break;
                                case "K":
                                    24 == a && (a = 0);
                                case "h":
                                case "H":
                                case "k":
                                    if (23 < a) return !1;
                                    k[3] = a;
                                    break;
                                case "m":
                                    k[4] = a;
                                    break;
                                case "s":
                                    k[5] = a;
                                    break;
                                case "S":
                                    k[6] = a
                                }
                                return !0
                            }),
                            d = +k[3];
                        "p" === l && 12 > d ? k[3] = d + 12 : "a" === l && 12 == d && (k[3] = 0);
                        d = new Date(k[0], k[1], k[2], k[3], k[4], k[5], k[6]);
                        f.strict && d.setFullYear(k[0]);
                        var h = e.join(""),
                            g = -1 != h.indexOf("d"),
                            h = -1 != h.indexOf("M");
                        if (!c || h && d.getMonth() > k[1] || g && d.getDate() > k[2]) return null;
                        if (h && d.getMonth() < k[1] || g && d.getDate() < k[2]) d = a.add(d, "hour", 1);
                        return d
                    };
                    var t = [],
                        s = {};
                    m.addCustomFormats = function (a, f) {
                        t.push({
                            pkg: a,
                            name: f
                        });
                        s = {}
                    };
                    m._getGregorianBundle = function (a) {
                        if (s[a]) return s[a];
                        var f = {};
                        p.forEach(t, function (b) {
                            b = q.getLocalization(b.pkg, b.name, a);
                            f = r.mixin(f, b)
                        }, this);
                        return s[a] = f
                    };
                    m.addCustomFormats(e.id.replace(/\/date\/locale$/, ".cldr"), "gregorian");
                    m.getNames = function (a, f, b, c) {
                        var d;
                        c =
                            m._getGregorianBundle(c);
                        a = [a, b, f];
                        "standAlone" == b && (b = a.join("-"), d = c[b], 1 == d[0] && (d = void 0));
                        a[1] = "format";
                        return (d || c[a.join("-")]).concat()
                    };
                    m.isWeekend = function (a, f) {
                        var b = g.getWeekend(f),
                            c = (a || new Date).getDay();
                        b.end < b.start && (b.end += 7, c < b.start && (c += 7));
                        return c >= b.start && c <= b.end
                    };
                    m._getDayOfYear = function (b) {
                        return a.difference(new Date(b.getFullYear(), 0, 1, b.getHours()), b) + 1
                    };
                    m._getWeekOfYear = function (a, f) {
                        1 == arguments.length && (f = 0);
                        var b = (new Date(a.getFullYear(), 0, 1)).getDay(),
                            c = Math.floor((m._getDayOfYear(a) +
                                (b - f + 7) % 7 - 1) / 7);
                        b == f && c++;
                        return c
                    };
                    return m
                })
        },
        "dojo/cldr/supplemental": function () {
            define(["../_base/lang", "../i18n"], function (r, p) {
                var a = {};
                r.setObject("dojo.cldr.supplemental", a);
                a.getFirstDayOfWeek = function (g) {
                    g = {
                        bd: 5,
                        mv: 5,
                        ae: 6,
                        af: 6,
                        bh: 6,
                        dj: 6,
                        dz: 6,
                        eg: 6,
                        iq: 6,
                        ir: 6,
                        jo: 6,
                        kw: 6,
                        ly: 6,
                        ma: 6,
                        om: 6,
                        qa: 6,
                        sa: 6,
                        sd: 6,
                        sy: 6,
                        ye: 6,
                        ag: 0,
                        ar: 0,
                        as: 0,
                        au: 0,
                        br: 0,
                        bs: 0,
                        bt: 0,
                        bw: 0,
                        by: 0,
                        bz: 0,
                        ca: 0,
                        cn: 0,
                        co: 0,
                        dm: 0,
                        "do": 0,
                        et: 0,
                        gt: 0,
                        gu: 0,
                        hk: 0,
                        hn: 0,
                        id: 0,
                        ie: 0,
                        il: 0,
                        "in": 0,
                        jm: 0,
                        jp: 0,
                        ke: 0,
                        kh: 0,
                        kr: 0,
                        la: 0,
                        mh: 0,
                        mm: 0,
                        mo: 0,
                        mt: 0,
                        mx: 0,
                        mz: 0,
                        ni: 0,
                        np: 0,
                        nz: 0,
                        pa: 0,
                        pe: 0,
                        ph: 0,
                        pk: 0,
                        pr: 0,
                        py: 0,
                        sg: 0,
                        sv: 0,
                        th: 0,
                        tn: 0,
                        tt: 0,
                        tw: 0,
                        um: 0,
                        us: 0,
                        ve: 0,
                        vi: 0,
                        ws: 0,
                        za: 0,
                        zw: 0
                    }[a._region(g)];
                    return void 0 === g ? 1 : g
                };
                a._region = function (a) {
                    a = p.normalizeLocale(a);
                    a = a.split("-");
                    var q = a[1];
                    q ? 4 == q.length && (q = a[2]) : q = {
                        aa: "et",
                        ab: "ge",
                        af: "za",
                        ak: "gh",
                        am: "et",
                        ar: "eg",
                        as: "in",
                        av: "ru",
                        ay: "bo",
                        az: "az",
                        ba: "ru",
                        be: "by",
                        bg: "bg",
                        bi: "vu",
                        bm: "ml",
                        bn: "bd",
                        bo: "cn",
                        br: "fr",
                        bs: "ba",
                        ca: "es",
                        ce: "ru",
                        ch: "gu",
                        co: "fr",
                        cr: "ca",
                        cs: "cz",
                        cv: "ru",
                        cy: "gb",
                        da: "dk",
                        de: "de",
                        dv: "mv",
                        dz: "bt",
                        ee: "gh",
                        el: "gr",
                        en: "us",
                        es: "es",
                        et: "ee",
                        eu: "es",
                        fa: "ir",
                        ff: "sn",
                        fi: "fi",
                        fj: "fj",
                        fo: "fo",
                        fr: "fr",
                        fy: "nl",
                        ga: "ie",
                        gd: "gb",
                        gl: "es",
                        gn: "py",
                        gu: "in",
                        gv: "gb",
                        ha: "ng",
                        he: "il",
                        hi: "in",
                        ho: "pg",
                        hr: "hr",
                        ht: "ht",
                        hu: "hu",
                        hy: "am",
                        ia: "fr",
                        id: "id",
                        ig: "ng",
                        ii: "cn",
                        ik: "us",
                        "in": "id",
                        is: "is",
                        it: "it",
                        iu: "ca",
                        iw: "il",
                        ja: "jp",
                        ji: "ua",
                        jv: "id",
                        jw: "id",
                        ka: "ge",
                        kg: "cd",
                        ki: "ke",
                        kj: "na",
                        kk: "kz",
                        kl: "gl",
                        km: "kh",
                        kn: "in",
                        ko: "kr",
                        ks: "in",
                        ku: "tr",
                        kv: "ru",
                        kw: "gb",
                        ky: "kg",
                        la: "va",
                        lb: "lu",
                        lg: "ug",
                        li: "nl",
                        ln: "cd",
                        lo: "la",
                        lt: "lt",
                        lu: "cd",
                        lv: "lv",
                        mg: "mg",
                        mh: "mh",
                        mi: "nz",
                        mk: "mk",
                        ml: "in",
                        mn: "mn",
                        mo: "ro",
                        mr: "in",
                        ms: "my",
                        mt: "mt",
                        my: "mm",
                        na: "nr",
                        nb: "no",
                        nd: "zw",
                        ne: "np",
                        ng: "na",
                        nl: "nl",
                        nn: "no",
                        no: "no",
                        nr: "za",
                        nv: "us",
                        ny: "mw",
                        oc: "fr",
                        om: "et",
                        or: "in",
                        os: "ge",
                        pa: "in",
                        pl: "pl",
                        ps: "af",
                        pt: "br",
                        qu: "pe",
                        rm: "ch",
                        rn: "bi",
                        ro: "ro",
                        ru: "ru",
                        rw: "rw",
                        sa: "in",
                        sd: "in",
                        se: "no",
                        sg: "cf",
                        si: "lk",
                        sk: "sk",
                        sl: "si",
                        sm: "ws",
                        sn: "zw",
                        so: "so",
                        sq: "al",
                        sr: "rs",
                        ss: "za",
                        st: "za",
                        su: "id",
                        sv: "se",
                        sw: "tz",
                        ta: "in",
                        te: "in",
                        tg: "tj",
                        th: "th",
                        ti: "et",
                        tk: "tm",
                        tl: "ph",
                        tn: "za",
                        to: "to",
                        tr: "tr",
                        ts: "za",
                        tt: "ru",
                        ty: "pf",
                        ug: "cn",
                        uk: "ua",
                        ur: "pk",
                        uz: "uz",
                        ve: "za",
                        vi: "vn",
                        wa: "be",
                        wo: "sn",
                        xh: "za",
                        yi: "il",
                        yo: "ng",
                        za: "cn",
                        zh: "cn",
                        zu: "za",
                        ace: "id",
                        ady: "ru",
                        agq: "cm",
                        alt: "ru",
                        amo: "ng",
                        asa: "tz",
                        ast: "es",
                        awa: "in",
                        bal: "pk",
                        ban: "id",
                        bas: "cm",
                        bax: "cm",
                        bbc: "id",
                        bem: "zm",
                        bez: "tz",
                        bfq: "in",
                        bft: "pk",
                        bfy: "in",
                        bhb: "in",
                        bho: "in",
                        bik: "ph",
                        bin: "ng",
                        bjj: "in",
                        bku: "ph",
                        bqv: "ci",
                        bra: "in",
                        brx: "in",
                        bss: "cm",
                        btv: "pk",
                        bua: "ru",
                        buc: "yt",
                        bug: "id",
                        bya: "id",
                        byn: "er",
                        cch: "ng",
                        ccp: "in",
                        ceb: "ph",
                        cgg: "ug",
                        chk: "fm",
                        chm: "ru",
                        chp: "ca",
                        chr: "us",
                        cja: "kh",
                        cjm: "vn",
                        ckb: "iq",
                        crk: "ca",
                        csb: "pl",
                        dar: "ru",
                        dav: "ke",
                        den: "ca",
                        dgr: "ca",
                        dje: "ne",
                        doi: "in",
                        dsb: "de",
                        dua: "cm",
                        dyo: "sn",
                        dyu: "bf",
                        ebu: "ke",
                        efi: "ng",
                        ewo: "cm",
                        fan: "gq",
                        fil: "ph",
                        fon: "bj",
                        fur: "it",
                        gaa: "gh",
                        gag: "md",
                        gbm: "in",
                        gcr: "gf",
                        gez: "et",
                        gil: "ki",
                        gon: "in",
                        gor: "id",
                        grt: "in",
                        gsw: "ch",
                        guz: "ke",
                        gwi: "ca",
                        haw: "us",
                        hil: "ph",
                        hne: "in",
                        hnn: "ph",
                        hoc: "in",
                        hoj: "in",
                        ibb: "ng",
                        ilo: "ph",
                        inh: "ru",
                        jgo: "cm",
                        jmc: "tz",
                        kaa: "uz",
                        kab: "dz",
                        kaj: "ng",
                        kam: "ke",
                        kbd: "ru",
                        kcg: "ng",
                        kde: "tz",
                        kdt: "th",
                        kea: "cv",
                        ken: "cm",
                        kfo: "ci",
                        kfr: "in",
                        kha: "in",
                        khb: "cn",
                        khq: "ml",
                        kht: "in",
                        kkj: "cm",
                        kln: "ke",
                        kmb: "ao",
                        koi: "ru",
                        kok: "in",
                        kos: "fm",
                        kpe: "lr",
                        krc: "ru",
                        kri: "sl",
                        krl: "ru",
                        kru: "in",
                        ksb: "tz",
                        ksf: "cm",
                        ksh: "de",
                        kum: "ru",
                        lag: "tz",
                        lah: "pk",
                        lbe: "ru",
                        lcp: "cn",
                        lep: "in",
                        lez: "ru",
                        lif: "np",
                        lis: "cn",
                        lki: "ir",
                        lmn: "in",
                        lol: "cd",
                        lua: "cd",
                        luo: "ke",
                        luy: "ke",
                        lwl: "th",
                        mad: "id",
                        mag: "in",
                        mai: "in",
                        mak: "id",
                        man: "gn",
                        mas: "ke",
                        mdf: "ru",
                        mdh: "ph",
                        mdr: "id",
                        men: "sl",
                        mer: "ke",
                        mfe: "mu",
                        mgh: "mz",
                        mgo: "cm",
                        min: "id",
                        mni: "in",
                        mnk: "gm",
                        mnw: "mm",
                        mos: "bf",
                        mua: "cm",
                        mwr: "in",
                        myv: "ru",
                        nap: "it",
                        naq: "na",
                        nds: "de",
                        "new": "np",
                        niu: "nu",
                        nmg: "cm",
                        nnh: "cm",
                        nod: "th",
                        nso: "za",
                        nus: "sd",
                        nym: "tz",
                        nyn: "ug",
                        pag: "ph",
                        pam: "ph",
                        pap: "bq",
                        pau: "pw",
                        pon: "fm",
                        prd: "ir",
                        raj: "in",
                        rcf: "re",
                        rej: "id",
                        rjs: "np",
                        rkt: "in",
                        rof: "tz",
                        rwk: "tz",
                        saf: "gh",
                        sah: "ru",
                        saq: "ke",
                        sas: "id",
                        sat: "in",
                        saz: "in",
                        sbp: "tz",
                        scn: "it",
                        sco: "gb",
                        sdh: "ir",
                        seh: "mz",
                        ses: "ml",
                        shi: "ma",
                        shn: "mm",
                        sid: "et",
                        sma: "se",
                        smj: "se",
                        smn: "fi",
                        sms: "fi",
                        snk: "ml",
                        srn: "sr",
                        srr: "sn",
                        ssy: "er",
                        suk: "tz",
                        sus: "gn",
                        swb: "yt",
                        swc: "cd",
                        syl: "bd",
                        syr: "sy",
                        tbw: "ph",
                        tcy: "in",
                        tdd: "cn",
                        tem: "sl",
                        teo: "ug",
                        tet: "tl",
                        tig: "er",
                        tiv: "ng",
                        tkl: "tk",
                        tmh: "ne",
                        tpi: "pg",
                        trv: "tw",
                        tsg: "ph",
                        tts: "th",
                        tum: "mw",
                        tvl: "tv",
                        twq: "ne",
                        tyv: "ru",
                        tzm: "ma",
                        udm: "ru",
                        uli: "fm",
                        umb: "ao",
                        unr: "in",
                        unx: "in",
                        vai: "lr",
                        vun: "tz",
                        wae: "ch",
                        wal: "et",
                        war: "ph",
                        xog: "ug",
                        xsr: "np",
                        yao: "mz",
                        yap: "fm",
                        yav: "cm",
                        zza: "tr"
                    }[a[0]];
                    return q
                };
                a.getWeekend = function (g) {
                    var q = a._region(g);
                    g = {
                        "in": 0,
                        af: 4,
                        dz: 4,
                        ir: 4,
                        om: 4,
                        sa: 4,
                        ye: 4,
                        ae: 5,
                        bh: 5,
                        eg: 5,
                        il: 5,
                        iq: 5,
                        jo: 5,
                        kw: 5,
                        ly: 5,
                        ma: 5,
                        qa: 5,
                        sd: 5,
                        sy: 5,
                        tn: 5
                    }[q];
                    q = {
                        af: 5,
                        dz: 5,
                        ir: 5,
                        om: 5,
                        sa: 5,
                        ye: 5,
                        ae: 6,
                        bh: 5,
                        eg: 6,
                        il: 6,
                        iq: 6,
                        jo: 6,
                        kw: 6,
                        ly: 6,
                        ma: 6,
                        qa: 6,
                        sd: 6,
                        sy: 6,
                        tn: 6
                    }[q];
                    void 0 === g && (g = 6);
                    void 0 === q && (q = 0);
                    return {
                        start: g,
                        end: q
                    }
                };
                return a
            })
        },
        "esri/_coremap": function () {
            define("require module dojo/_base/kernel dojo/_base/declare dojo/_base/connect dojo/_base/Deferred dojo/_base/lang dojo/_base/array dojo/_base/event dojo/_base/unload dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/sniff dijit/registry dojox/gfx/matrix ./kernel ./config ./basemaps ./lang ./Evented ./fx ./deferredUtils ./tileUtils ./urlUtils ./PluginTarget ./arcade/Dictionary ./geometry/Point ./geometry/ScreenPoint ./geometry/Extent ./geometry/Rect ./geometry/mathUtils ./geometry/scaleUtils ./geometry/screenUtils ./geometry/webMercatorUtils ./layers/GraphicsLayer ./layers/TileInfo ./layers/LOD ./layers/ArcGISTiledMapServiceLayer ./layers/MapImageLayer ./layers/OpenStreetMapLayer ./layers/VectorTileLayer ./dijit/Popup ./plugins/popupManager dojo/uacss".split(" "),
                function (r, p, a, g, q, h, k, l, e, c, b, d, m, t, s, n, f, y, u, w, C, x, v, A, z, H, D, F, E, Q, R, G, I, P, K, J, O, W, T, N, Y, Z, ga, aa, ea, ua) {
                    function xa(a, f) {
                        var b = a.lods;
                        b.sort(function (a, f) {
                            return a.scale > f.scale ? -1 : a.scale < f.scale ? 1 : 0
                        });
                        var c = [],
                            b = l.filter(b, function (a) {
                                if (-1 === va(c, a.scale)) return c.push(a.scale), !0
                            }),
                            d = f.lods = [],
                            e;
                        l.forEach(b, function (a, f) {
                            e = d[f] = new Y(a);
                            e.level = f
                        });
                        f.tileInfo = new N(Ba(a, {
                            lods: d
                        }))
                    }
                    var ha, pa = O.toMapPoint,
                        oa = O.toScreenPoint,
                        na = q.connect,
                        ia = q.disconnect,
                        ma = k.hitch,
                        ya = n.set,
                        va = l.indexOf,
                        Ba = k.mixin,
                        Ja = 0,
                        qa = C.defaults.map,
                        wa = qa.layerNamePrefix,
                        ja = qa.graphicsLayerNamePrefix,
                        Ca = RegExp("^" + wa + "(\\d+)$"),
                        Ma = RegExp("^" + ja + "(\\d+)$"),
                        Pa = function () {};
                    g = g([A, E], {
                        declaredClass: "esri._CoreMap",
                        resizeDelay: 300,
                        invalidExtent: "Map does not have a valid extent.",
                        invalidGeometry: "Geometry (wkid: ${geometry}) cannot be converted to spatial reference of the map (wkid: ${map})",
                        unknownBasemap: 'Unable to find basemap definition for: "${basemapName}". Try one of these: ${list}',
                        invalidBasemap: 'Unable to add basemap: "${basemapName}".',
                        unknownLayerType: 'Unknown basemap layer type: "${type}" found in basemap definition for: "${basemapName}".',
                        visible: !0,
                        _eventMap: {
                            "basemap-change": !0,
                            "extent-change": ["extent", "delta", "levelChange", "lod"],
                            "layer-add": ["layer"],
                            "layer-add-result": ["layer", "error"],
                            "layer-remove": ["layer"],
                            "layer-reorder": ["layer", "index"],
                            "layer-resume": ["layer"],
                            "layer-suspend": ["layer"],
                            "layers-add-result": ["layers"],
                            "layers-removed": !0,
                            "layers-reordered": ["layerIds"],
                            load: ["map"],
                            pan: ["extent", "delta"],
                            "pan-end": ["extent",
"delta"],
                            "pan-start": ["extent", "screenPoint"],
                            reposition: ["x", "y"],
                            resize: ["extent", "width", "height"],
                            scale: ["matrix", "immediate"],
                            "time-extent-change": ["timeExtent"],
                            "before-unload": ["map"],
                            unload: ["map"],
                            "update-end": ["error"],
                            "update-start": !0,
                            zoom: ["extent", "zoomFactor", "anchor"],
                            "zoom-end": ["extent", "zoomFactor", "anchor", "level"],
                            "zoom-start": ["extent", "zoomFactor", "anchor", "level"],
                            click: !0,
                            "dbl-click": !0,
                            "key-down": !0,
                            "key-up": !0,
                            "mouse-down": !0,
                            "mouse-drag": !0,
                            "mouse-drag-end": !0,
                            "mouse-drag-start": !0,
                            "mouse-move": !0,
                            "mouse-out": !0,
                            "mouse-over": !0,
                            "mouse-up": !0,
                            "mouse-wheel": !0,
                            "basic-tap": !0,
                            "double-tap": !0,
                            "pinch-end": !0,
                            "pinch-move": !0,
                            "pinch-start": !0,
                            "processed-double-tap": !0,
                            "processed-tap": !0,
                            "swipe-end": !0,
                            "swipe-move": !0,
                            "swipe-start": !0,
                            tap: !0,
                            "two-finger-tap": !0
                        },
                        constructor: function (a, f) {
                            var e = this;
                            this.registerConnectEvents();
                            Ba(this, {
                                _internalLayerIds: [],
                                _layers: [],
                                _layerDivs: [],
                                _layerSize: 0,
                                _connects: [],
                                _zoomAnimDiv: null,
                                _zoomAnim: null,
                                _layersDiv: null,
                                _firstLayerId: null,
                                _delta: null,
                                _cursor: null,
                                _ratioW: 1,
                                _ratioH: 1,
                                _params: null,
                                cursor: null,
                                layerIds: [],
                                graphicsLayerIds: [],
                                graphics: null,
                                _labels: null,
                                loaded: !1,
                                __panning: !1,
                                __zooming: !1,
                                __container: null,
                                root: null,
                                __LOD: null,
                                __tileInfo: null,
                                __visibleRect: null,
                                __visibleDelta: null,
                                _rids: []
                            });
                            var n = this.container = b.byId(a),
                                u = this.id = d.get(n, "id") || y.getUniqueId(this.declaredClass);
                            m.add(n, "map");
                            var k = s.getContentBox(n),
                                w = m.add,
                                l = t.create;
                            this.position = new G(0, 0);
                            this._reposition();
                            var h = this.width = 0 < k.w ? k.w : qa.width,
                                g = this.height = 0 <
                                k.h ? k.h : qa.height,
                                q = this.root = l("div", {
                                    id: u + "_root",
                                    style: {
                                        width: h + "px",
                                        height: g + "px",
                                        direction: "ltr"
                                    }
                                });
                            w(q, "esriMapContainer");
                            k = this.__container = l("div", {
                                id: u + "_container"
                            }, q);
                            ya(k, "position", "absolute");
                            w(k, "esriMapContainer");
                            n.appendChild(q);
                            n = this._params = Ba({
                                slider: !0,
                                nav: !1,
                                zoom: -1,
                                minZoom: -1,
                                maxZoom: -1,
                                scale: -1,
                                minScale: 0,
                                maxScale: 0,
                                showInfoWindowOnClick: !0,
                                displayGraphicsOnPan: !0,
                                wrapAround180: !0,
                                fitExtent: !1,
                                optimizePanAnimation: !0
                            }, f || {});
                            this.wrapAround180 = n.wrapAround180;
                            this.optimizePanAnimation =
                                n.optimizePanAnimation;
                            v.isDefined(n.resizeDelay) && (this.resizeDelay = n.resizeDelay);
                            n.lods && (xa({
                                rows: 512,
                                cols: 512,
                                dpi: 96,
                                format: "JPEG",
                                compressionQuality: 75,
                                origin: {
                                    x: -180,
                                    y: 90
                                },
                                spatialReference: {
                                    wkid: 4326
                                },
                                lods: n.lods
                            }, n), this.__tileInfo = n.tileInfo);
                            this.extent = n.extent;
                            this._extentUtil({
                                mapCenter: n.center,
                                targetLevel: n.zoom,
                                targetScale: n.scale
                            });
                            this.__visibleRect = new P(0, 0, h, g);
                            this.__visibleDelta = new P(0, 0, h, g);
                            u = this._layersDiv = l("div", {
                                id: u + "_layers"
                            });
                            w(u, "esriMapLayers");
                            k.appendChild(u);
                            this._zoomAnimDiv = l("div", {
                                style: {
                                    position: "absolute"
                                }
                            });
                            n.infoWindow ? this.infoWindow = n.infoWindow : (w = this.infoWindow = new ua(n.popupOptions, l("div")), w.startup(), w._ootb = !0, ya(w.domNode, "zIndex", 40));
                            n.showLabels && (r(["./layers/LabelLayer"], function (a) {
                                ha = a;
                                e._createLabelLayer()
                            }), this.on("load", function () {
                                e._createLabelLayer()
                            }));
                            this.addPlugin(this._getAbsMid("./plugins/popupManager"), {
                                enabled: n.showInfoWindowOnClick
                            });
                            this._zoomStartHandler = ma(this, this._zoomStartHandler);
                            this._zoomingHandler =
                                ma(this, this._zoomingHandler);
                            this._zoomEndHandler = ma(this, this._zoomEndHandler);
                            this._panningHandler = ma(this, this._panningHandler);
                            this._panEndHandler = ma(this, this._panEndHandler);
                            this._endTranslate = ma(this, this._endTranslate);
                            this._timedResize = ma(this, this._timedResize);
                            this._execResize = ma(this, this._execResize);
                            this._processLabelLayers = ma(this, this._processLabelLayers);
                            this._updateLabelLayers = ma(this, this._updateLabelLayers);
                            this.resize = ma(this, this.resize);
                            c.addOnWindowUnload(this, this.destroy)
                        },
                        _getAbsMid: function (a) {
                            return r.toAbsMid ? r.toAbsMid(a) : p.id.replace(/\/[^\/]*$/ig, "/") + a
                        },
                        _cleanUp: function () {
                            var a = this.infoWindow;
                            a && (a._ootb && a.destroy ? a.destroy() : a.unsetMap(this), delete this.infoWindow);
                            ia(this._tsTimeExtentChange_connect);
                            this.removePlugin("./plugins/popupManager");
                            t.destroy(this.root);
                            this.root = null
                        },
                        _addLayer: function (a, f, b) {
                            if (a.id) {
                                var c = a.id.match(a instanceof T ? Ma : Ca);
                                c && c[1] && (c = Number(c[1]), Ja <= c && (Ja = c + 1))
                            }
                            var d = a.id || (a instanceof T ? ja : wa) + Ja++;
                            a.id = d;
                            this._layers[d] =
                                a;
                            var e, n;
                            if (f === this.layerIds || f === this.graphicsLayerIds) e = this._layerSize, this._layerSize++;
                            a._isRefLayer = "top" === b;
                            b = !v.isDefined(b) || 0 > b || b > f.length || "top" === b ? f.length : b;
                            0 === e && (this._firstLayerId = d);
                            if (!a._isRefLayer)
                                for (;
                                    (n = this.getLayer(f[b - 1])) && n._isRefLayer;) b--;
                            f.splice(b, 0, d);
                            var s = ma(this, this._addLayerHandler),
                                m = this;
                            b = this._connects;
                            c = function () {
                                a.loaded ? m._onLoadFix ? (m._onLoadFix = !1, setTimeout(function () {
                                    s(a)
                                }, 0)) : s(a) : (m["_" + d + "_addtoken_load"] = na(a, "onLoad", m, "_addLayerHandler"),
                                    m["_" + d + "_addtoken_err"] = na(a, "onError", m, function (b) {
                                        s(a, b, f)
                                    }))
                            };
                            this.loaded || 0 === e || a.loaded && -1 === va(this.graphicsLayerIds, d) ? c() : b.push(na(this, "onLoad", c));
                            return a
                        },
                        _addLayerHandler: function (a, f, b) {
                            var c = this.id,
                                d = a.id,
                                e = va(a instanceof T ? this.graphicsLayerIds : this.layerIds, d),
                                n = e,
                                s = !1,
                                m = this._params;
                            ia(this["_" + d + "_addtoken_load"]);
                            ia(this["_" + d + "_addtoken_err"]);
                            if (f) delete this._layers[d], -1 !== e && (b.splice(e, 1), this.onLayerAddResult(a, f));
                            else {
                                -1 === e && (e = va(this._internalLayerIds, d), n = 20 +
                                    e, s = !0);
                                if (d === this._firstLayerId) {
                                    f = a.spatialReference;
                                    if ((b = this.extent && this.extent.spatialReference) && !b.equals(f) && (a.tileInfo || !a.url)) b = null;
                                    b = this.spatialReference = b || f;
                                    this.wrapAround180 = this.wrapAround180 && b && b._isWrappable() ? !0 : !1;
                                    a.tileInfo && (this.__tileInfo ? (f = this.__tileInfo.lods, this.__tileInfo = Ba({}, a.tileInfo), this.__tileInfo.lods = f) : (xa(Ba({}, a.tileInfo), m), this.__tileInfo = m.tileInfo));
                                    if (this.wrapAround180) {
                                        f = this.__tileInfo;
                                        b = b._getInfo();
                                        if (!f || Math.abs(b.origin[0] - f.origin.x) >
                                            b.dx) this.wrapAround180 = !1;
                                        this.wrapAround180 && f && D._addFrameInfo(f, b)
                                    }
                                    m.units = a.units;
                                    if ((f = this.__tileInfo && this.__tileInfo.lods) && f.length) {
                                        b = m.minScale;
                                        var e = m.maxScale,
                                            u = -1,
                                            t = -1,
                                            y = !1,
                                            k = !1,
                                            w;
                                        for (w = 0; w < f.length; w++) 0 < b && (!y && b >= f[w].scale) && (u = f[w].level, y = !0), 0 < e && (!k && e >= f[w].scale) && (t = 0 < w ? f[w - 1].level : -1, k = !0); - 1 === m.minZoom && (m.minZoom = 0 === b ? f[0].level : u); - 1 === m.maxZoom && (m.maxZoom = 0 === e ? f[f.length - 1].level : t);
                                        for (w = 0; w < f.length; w++) m.minZoom === f[w].level && (m.minScale = f[w].scale), m.maxZoom ===
                                            f[w].level && (m.maxScale = f[w].scale)
                                    } else m.minZoom = m.maxZoom = m.zoom = -1
                                }
                                a instanceof T ? (this._gc || (this._gc = new T._GraphicsContainer, this._gc._setMap(this, this._layersDiv).id = c + "_gc"), n = a._setMap(this, this._gc._surface), n.id = c + "_" + d, this._layerDivs[d] = n, this._reorderLayers(this.graphicsLayerIds)) : (n = a._setMap(this, this._layersDiv, n, this.__LOD), n.id = c + "_" + d, this._layerDivs[d] = n, this._reorderLayers(this.layerIds), !s && -1 !== a.declaredClass.indexOf("VETiledLayer") && this._onBingLayerAdd(a));
                                d === this._firstLayerId &&
                                    (this.graphics = new T({
                                        id: c + "_graphics",
                                        displayOnPan: m.displayGraphicsOnPan
                                    }), this._addLayer(this.graphics, this._internalLayerIds, 20));
                                if (a === this.graphics) {
                                    b = this._layers[this._firstLayerId];
                                    c = m.zoom;
                                    n = m.scale;
                                    f = m.center;
                                    b = b.initialExtent || b.fullExtent;
                                    this._firstLayerId = null;
                                    this.extent && (this.extent = this._convertGeometry(this, this.extent));
                                    !this.extent && b && (f && (f = this._convertGeometry(b, f)), f && (b = b.centerAt(f)));
                                    if (f = this.extent || b && new I(b.toJson())) - 1 < c ? f = this.__getExtentForLevel(c, null, f).extent :
                                        0 < n && (f = J.getExtentForScale(this, n, f));
                                    if (!f) {
                                        console.log("Map: " + this.invalidExtent);
                                        return
                                    }
                                    m = this._fixExtent(f, m.fitExtent);
                                    this.extent = m.extent;
                                    this.__LOD = m.lod;
                                    this.__setExtent(this.extent);
                                    this.loaded = !0;
                                    this.attr("data-loaded", "");
                                    this.infoWindow.setMap(this);
                                    this.onLoad(this)
                                }
                                s || (this.onLayerAdd(a), this.onLayerAddResult(a));
                                ia(this[d + "_addLayerHandler_connect"])
                            }
                        },
                        _convertGeometry: function (a, f) {
                            var b = a && a.spatialReference,
                                c = f && f.spatialReference;
                            b && (c && !b.equals(c)) && (b._canProject(c) ? b.isWebMercator() ?
                                f = W.geographicToWebMercator(f) : 4326 === b.wkid && (f = W.webMercatorToGeographic(f, !0)) : (console.log("Map: " + v.substitute({
                                    geometry: c.wkid || c.wkt,
                                    map: b.wkid || b.wkt
                                }, this.invalidGeometry)), f = null));
                            return f
                        },
                        _reorderLayers: function (a) {
                            var b = this.onLayerReorder,
                                c = t.place,
                                d = this._layerDivs,
                                e = this._layers,
                                n = this._gc ? this._gc._surface.getEventSource() : null;
                            if (a === this.graphicsLayerIds) l.forEach(a, function (a, f) {
                                var s = d[a];
                                s && (c(s.getEventSource(), n, f), b(e[a], f))
                            });
                            else {
                                var s = this.graphics,
                                    m = s ? s.id : null,
                                    u = this._layersDiv,
                                    y;
                                l.forEach(a, function (a, f) {
                                    y = d[a];
                                    a !== m && y && (c(y, u, f), b(e[a], f))
                                });
                                this._mapImageLyr && this._placeMapImageLyr();
                                n && (n = 9 > f("ie") ? n.parentNode : n, c(n, n.parentNode, a.length))
                            }
                            this.onLayersReordered([].concat(a))
                        },
                        _zoomStartHandler: function () {
                            this.__zoomStart(this._zoomAnimDiv.startingExtent, this._zoomAnimDiv.anchor)
                        },
                        _zoomingHandler: function (a) {
                            var f = parseFloat(a.left),
                                b = parseFloat(a.top);
                            a = new I(f, b - parseFloat(a.height), f + parseFloat(a.width), b, this.spatialReference);
                            f = this.extent.getWidth() / a.getWidth();
                            this.__zoom(a, f, this._zoomAnimDiv.anchor)
                        },
                        _zoomEndHandler: function () {
                            var a = this._zoomAnimDiv,
                                f = a.extent,
                                b = this.extent.getWidth() / f.getWidth(),
                                c = a.anchor,
                                d = a.newLod,
                                e = a.levelChange;
                            a.extent = a.anchor = a.levelChange = a.startingExtent = a.newLod = this._delta = this._zoomAnim = null;
                            this.__zoomEnd(f, b, c, d, e)
                        },
                        _panningHandler: function (a) {
                            if (isNaN(parseFloat(a.left)) || isNaN(parseFloat(a.top))) {
                                var f = Math.round,
                                    b = this._panAnim.node;
                                a.left = -1 * (this._delta.x - f(this.width / 2)) + "px";
                                a.top = -1 * (this._delta.y - f(this.height /
                                    2)) + "px";
                                n.set(b, "left", a.left);
                                n.set(b, "top", a.top)
                            }
                            a = new G(parseFloat(a.left), parseFloat(a.top));
                            f = this.toMap(a);
                            this.onPan(this.extent.offset(this.extent.xmin - f.x, this.extent.ymax - f.y), a)
                        },
                        _panEndHandler: function (a) {
                            this.__panning = !1;
                            var f = Math.round;
                            a = new G(-f(parseFloat(a.style.left)), -f(parseFloat(a.style.top)));
                            var f = a.x,
                                b = a.y,
                                c = this.__visibleRect,
                                d = this.__visibleDelta;
                            c.x += -f;
                            c.y += -b;
                            d.x += -f;
                            d.y += -b;
                            ya(this._zoomAnimDiv, {
                                left: "0px",
                                top: "0px"
                            });
                            var c = this.extent,
                                d = this._ratioW,
                                e = this._ratioH,
                                c = new I(c.xmin + f / d, c.ymin - b / e, c.xmax + f / d, c.ymax - b / e, this.spatialReference);
                            a.setX(-a.x);
                            a.setY(-a.y);
                            this._delta = this._panAnim = null;
                            this._updateExtent(c);
                            this.onPanEnd(c, a);
                            this._fireExtChg([c, a, !1, this.__LOD])
                        },
                        _fixExtent: function (a, f) {
                            for (var b = this._reshapeExtent(a), c = 1.25; !0 === f && (b.extent.getWidth() < a.getWidth() || b.extent.getHeight() < a.getHeight()) && 0 < b.lod.level && 3 >= c;) b = this._reshapeExtent(a.expand(c)), c += 0.25;
                            return b
                        },
                        _getFrameWidth: function () {
                            var a = -1,
                                f = this.spatialReference._getInfo();
                            this.__LOD ? (f = this.__LOD._frameInfo) && (a = f[3]) : f && (a = Math.round(2 * f.valid[1] / (this.extent.getWidth() / this.width)));
                            return a
                        },
                        _fixAspectRatio: function (a) {
                            var f = a.getWidth(),
                                b = a.getHeight(),
                                c = f / b,
                                d = this.width / this.height,
                                e = 0,
                                n = 0;
                            this.width > this.height ? f > b ? d > c ? e = b * d - f : n = f / d - b : e = b * d - f : this.width < this.height ? f < b ? d > c ? e = b * d - f : n = f / d - b : n = f / d - b : f < b ? e = b - f : f > b && (n = f / d - b);
                            e && (a.xmin -= e / 2, a.xmax += e / 2);
                            n && (a.ymin -= n / 2, a.ymax += n / 2);
                            return a
                        },
                        _reshapeExtent: function (a) {
                            a = this._fixAspectRatio(a);
                            return this._getAdjustedExtent(a)
                        },
                        _getAdjustedExtent: function (a) {
                            if (this.__tileInfo) return D.getCandidateTileInfo(this, this.__tileInfo, a);
                            var f = J.getScale(this, a),
                                b = this.getMinScale(),
                                c = this.getMaxScale(),
                                d = !c || f >= c;
                            b && !(f <= b) ? a = J.getExtentForScale(this, b, a) : d || (a = J.getExtentForScale(this, c, a));
                            return {
                                extent: a
                            }
                        },
                        _onBingLayerAdd: function (a) {
                            this["__" + a.id + "_vis_connect"] = q.connect(a, "onVisibilityChange", this, "_toggleBingLogo");
                            this._toggleBingLogo(a.visible)
                        },
                        _onBingLayerRemove: function (a) {
                            q.disconnect(this["__" + a.id + "_vis_connect"]);
                            delete this["__" + a.id + "_vis_connect"];
                            var f = l.some(this.layerIds, function (f) {
                                return (a = this._layers[f]) && a.visible && -1 !== a.declaredClass.indexOf("VETiledLayer")
                            }, this);
                            this._toggleBingLogo(f)
                        },
                        _toggleBingLogo: function (a) {
                            a && !this._bingLogo ? (a = {
                                left: this._mapParams && this._mapParams.nav ? "25px" : ""
                            }, 6 === f("ie") && (a.filter = "progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled\x3d'true', sizingMethod\x3d'crop', src\x3d'" + r.toUrl("./images/map/bing-logo-lg.png") + "')"), a = this._bingLogo = t.create("div", {
                                style: a
                            }, this.root), m.add(a, "bingLogo-lg")) : !a && this._bingLogo && (t.destroy(this._bingLogo), delete this._bingLogo)
                        },
                        __panStart: function (a, f) {
                            var b = this._zoomAnim,
                                c = this._panAnim;
                            if (b && b._active) b.stop(), b._fire("onEnd", [b.node]);
                            else if (c && c._active) {
                                c.stop();
                                this._panAnim = null;
                                var c = c.curve.getValue(c._getStep()),
                                    b = Math.round(parseFloat(c.left)),
                                    c = Math.round(parseFloat(c.top)),
                                    d = this.navigationManager._dragOrigin;
                                this.__pan(b, c);
                                d && (d.x -= b, d.y -= c);
                                return
                            }
                            this.__panning = !0;
                            this.onPanStart(this.extent,
                                new G(a, f))
                        },
                        __pan: function (a, f) {
                            var b = this.extent,
                                c = this._ratioW,
                                d = this._ratioH;
                            this.onPan(new I(b.xmin - a / c, b.ymin + f / d, b.xmax - a / c, b.ymax + f / d, this.spatialReference), new G(a, f))
                        },
                        __panEnd: function (a, f) {
                            var b = this.__visibleRect,
                                c = this.__visibleDelta;
                            b.x += a;
                            b.y += f;
                            c.x += a;
                            c.y += f;
                            var b = new G(a, f),
                                c = this.extent,
                                d = this._ratioW,
                                e = this._ratioH,
                                c = new I(c.xmin - a / d, c.ymin + f / e, c.xmax - a / d, c.ymax + f / e, this.spatialReference);
                            this.__panning = !1;
                            this._updateExtent(c);
                            this.onPanEnd(c, b);
                            this._fireExtChg([c, b, !1, this.__LOD])
                        },
                        __zoomStart: function (a, f) {
                            this.__zooming = !0;
                            this.onZoomStart(a, 1, f, this.__LOD ? this.__LOD.level : null)
                        },
                        __zoom: function (a, f, b) {
                            this.onZoom(a, f, b)
                        },
                        __zoomEnd: function (a, f, b, c, d) {
                            ya(this._layersDiv, {
                                left: "0px",
                                top: "0px"
                            });
                            this._delta = new G(0, 0);
                            this.__visibleRect.x = this.__visibleRect.y = 0;
                            a = new I(a);
                            this.__LOD = c;
                            this._ratioW = this.width / a.getWidth();
                            this._ratioH = this.height / a.getHeight();
                            var e = this._delta;
                            this._delta = null;
                            this.__zooming = !1;
                            this._updateExtent(a, d);
                            this.onZoomEnd(a, f, b, c ? c.level : null);
                            this._fireExtChg([a,
e, d, c])
                        },
                        _extentUtil: function (a, f, b, c, d) {
                            var e = new h,
                                n, s, m, u, t, y, w, l, g, q, p = this.width,
                                r = this.height,
                                x, C, D;
                            a && (n = a.numLevels, s = a.targetLevel, x = v.isDefined(s), m = a.factor, u = a.mapAnchor, t = a.screenAnchor, y = a.mapCenter, C = a.levelOrFactor, w = a.targetScale, l = v.isDefined(w) && 0 < w);
                            f && (g = f.dx, q = f.dy, y = f.mapCenter);
                            k.isArray(y) && (y = new R(y));
                            var E = this._panAnim;
                            f = (a = this._stopAnim()) ? a.divExtent : this.extent;
                            var A = this.__tileInfo,
                                z = this._params;
                            if (!this.loaded) {
                                if (b) f && (b = this._convertGeometry(f, b)), b && (this.extent =
                                    b, z.zoom = z.scale = -1, z.center = null);
                                else if (y || x || l) {
                                    if (y)
                                        if (f) {
                                            if (y = this._convertGeometry(f, y)) this.extent = f.centerAt(y), z.center = null
                                        } else z.center = y;
                                    x && -1 < s ? (z.zoom = s, z.scale = -1) : l && (z.scale = w, z.zoom = -1)
                                }
                                e.resolve();
                                return e
                            }
                            if (y && (y = this._convertGeometry(this, y), !y) || u && (u = this._convertGeometry(this, u), !u) || b && (b = this._convertGeometry(this, b), !b)) return e.reject(), e;
                            E && (u && t) && (u = pa(this.extent, p, r, t));
                            a && (u && t) && (u = pa(a.divExtent, p, r, t));
                            x && (A ? (n = this.getMinZoom(), x = this.getMaxZoom(), s < n ? s = n :
                                s > x && (s = x), n = s - (a ? a.level : this.getLevel())) : (n = 0 < s ? -1 : 1, D = C ? s : null));
                            if (!b)
                                if (v.isDefined(n)) A ? (p = a ? a.level : this.getLevel(), p = this.__getExtentForLevel(p + n, y, f).extent) : (p = (a ? a.end : this.extent).expand(D || (0 < n ? 0.5 * n : 2 * -n)), D && y && (p = p.centerAt(y))), p && (y ? b = p : (g = u || f.getCenter(), r = p.getWidth(), q = p.getHeight(), p = g.x >= f.xmin && g.x <= f.xmax ? (g.x - f.xmin) / f.getWidth() : 0.5, b = g.y >= f.ymin && g.y <= f.ymax ? (g.y - f.ymin) / f.getHeight() : 0.5, p = g.x - p * r, g = g.y - b * q, b = new I(p, g, p + r, g + q, this.spatialReference)));
                                else if (l) b = J.getExtentForScale(this,
                                w, f);
                            else if (v.isDefined(m)) b = f.expand(m);
                            else if (g || q) a ? (b = a.end, u = b.getCenter(), D = oa(b, p, r, u), D.x += g, D.y += q, D = pa(b, p, r, D), b = b.offset(D.x - u.x, D.y - u.y)) : (g = new G(p / 2 + g, r / 2 + q), g = pa(f, p, r, g), r = f.getWidth(), q = f.getHeight(), p = g.x - r / 2, g = g.y - q / 2, b = new I(p, g, p + r, g + q, this.spatialReference));
                            b || (y ? (f = a ? a.end : f, r = f.getWidth(), q = f.getHeight(), p = y.x - r / 2, g = y.y - q / 2, b = new I(p, g, p + r, g + q, this.spatialReference)) : a && (b = a.end));
                            b ? (this._extentDfd && -1 === this._extentDfd.fired && (this._extentDfd.then(null, Pa), this._extentDfd.reject()),
                                this._extentDfd = e, this.__setExtent(b, null, t, c, a, d)) : e.reject();
                            return e
                        },
                        __setExtent: function (a, f, b, c, d, e) {
                            try {
                                if (this._firstLayerId) this.extent = a;
                                else {
                                    var n = !0,
                                        s = this.spatialReference,
                                        m = d ? d.divExtent : this.extent,
                                        u = this._fixExtent(a, c || !1);
                                    a = u.extent;
                                    var t = a.getWidth(),
                                        y = a.getHeight(),
                                        k = Math.round;
                                    if (m) var w = k(1E6 * m.getWidth()),
                                        l = k(1E6 * t),
                                        g = k(1E6 * m.getHeight()),
                                        h = k(1E6 * y),
                                        n = w !== l || g !== h;
                                    var q, p, r = d && d.rect,
                                        x = d && d.divExtent;
                                    if (qa.zoomDuration && n && m) {
                                        x = x || new I(m);
                                        r = r || {
                                            left: m.xmin,
                                            top: m.ymax,
                                            width: m.getWidth(),
                                            height: m.getHeight()
                                        };
                                        p = {
                                            left: a.xmin,
                                            top: a.ymax,
                                            width: t,
                                            height: y
                                        };
                                        var C = new R(a.xmin, a.ymax, s),
                                            v = new R(a.xmin, a.ymin, s),
                                            D = new R(this.extent.xmin, this.extent.ymax, s),
                                            E = new R(this.extent.xmin, this.extent.ymin, s);
                                        q = K.getLineIntersection(D, C, E, v, s);
                                        !q && !d && (n = !1)
                                    }
                                    this._ratioW = this.width / t;
                                    this._ratioH = this.height / y;
                                    var A = this._zoomAnimDiv;
                                    if (n)
                                        if (ya(this._layersDiv, {
                                                left: "0px",
                                                top: "0px"
                                            }), f = new G(0, 0), this.__visibleRect.x = this.__visibleRect.y = 0, r && p) {
                                            this._delta = f;
                                            A.id = "_zAD";
                                            A.startingExtent = x;
                                            A.extent =
                                                a;
                                            A.levelChange = n;
                                            A.newLod = u.lod;
                                            A.anchor = b ? b : !q && d ? d.anchor : oa(this.extent, this.width, this.height, q);
                                            var aa = this.extent.getWidth() / a.getWidth();
                                            1024 < (1 > aa ? 1 / aa : aa) ? (this.__zoomStart(x, A.anchor), this.__zoom(x, 1, A.anchor), this._fireOnScale(1, A.anchor, !0), this.__zoomEnd(a, aa, A.anchor, u.lod, n)) : (this._zoomAnim = z.resize({
                                                node: A,
                                                start: r,
                                                end: p,
                                                duration: qa.zoomDuration,
                                                rate: qa.zoomRate,
                                                beforeBegin: !d ? this._zoomStartHandler : null,
                                                onAnimate: this._zoomingHandler,
                                                onEnd: this._zoomEndHandler
                                            }).play(), this._fireOnScale(aa,
                                                A.anchor, e))
                                        } else this._updateExtent(a, n, e), this._fireExtChg([this.extent, f, n, this.__LOD = u.lod]);
                                    else if (!this.__panning)
                                        if (!1 === this.loaded || e) this._updateExtent(a, n, e), this._fireExtChg([this.extent, f, n, this.__LOD = u.lod]);
                                        else {
                                            this.__panning = !0;
                                            r = (new P(0, 0, this.width, this.height, this.spatialReference)).getCenter();
                                            r.x = k(r.x);
                                            r.y = k(r.y);
                                            var F = this._delta = this.toScreen(a.getCenter()),
                                                Q = Math.abs(r.x - F.x),
                                                H = Math.abs(r.y - F.y);
                                            this.optimizePanAnimation && (Q > 2 * this.width || H > 2 * this.height) ? (this.__panStart(0,
                                                0), this.__pan(0, 0), this.__visibleRect.x = this.__visibleRect.y = this.__visibleDelta.x = this.__visibleDelta.y = 0, this.__panning = !1, this._delta = null, this._updateExtent(a, !1, e), this.onPanEnd(this.extent, new G(0, 0)), this._fireExtChg([this.extent, new G(0, 0), !0, this.__LOD])) : (this.onPanStart(this.extent, new G(0, 0)), this._panAnim = z.slideTo({
                                                node: A,
                                                left: r.x - F.x,
                                                top: r.y - F.y,
                                                duration: qa.panDuration,
                                                rate: qa.panRate,
                                                onAnimate: this._panningHandler,
                                                onEnd: this._panEndHandler
                                            }), this._panAnim.play())
                                        }
                                }
                            } catch (ea) {
                                console.log(ea.stack),
                                    console.error(ea)
                            }
                        },
                        _fireOnScale: function (a, f, b) {
                            if ("css-transforms" === this.navigationMode) {
                                var c = this.__visibleDelta;
                                this.onScale(u.scaleAt(a, {
                                    x: -1 * (this.width / 2 - (f.x - c.x)),
                                    y: -1 * (this.height / 2 - (f.y - c.y))
                                }), b)
                            }
                        },
                        _stopAnim: function () {
                            var a = this._zoomAnim,
                                f = this._panAnim;
                            if (a && a._active) {
                                a.stop();
                                var f = a.curve.getValue(a._getStep()),
                                    b = parseFloat(f.left),
                                    c = parseFloat(f.top),
                                    a = a.node;
                                return {
                                    anchor: a.anchor,
                                    start: a.startingExtent,
                                    end: a.extent,
                                    level: a.newLod && a.newLod.level,
                                    rect: f,
                                    divExtent: new I(b, c - parseFloat(f.height),
                                        b + parseFloat(f.width), c, this.spatialReference)
                                }
                            }
                            f && f._active && (f.stop(), f._fire("onEnd", [f.node]))
                        },
                        __getExtentForLevel: function (a, f, b) {
                            var c = this.__tileInfo,
                                c = c && c.lods;
                            a = v.isDefined(a) ? a : 0;
                            b = b || this.extent;
                            f = f || b && b.getCenter();
                            if (c) {
                                if (f) {
                                    b = this.getMinZoom();
                                    var d = this.getMaxZoom();
                                    a > d && (a = d);
                                    a < b && (a = b);
                                    a = c[a];
                                    c = this.width * a.resolution / 2;
                                    b = this.height * a.resolution / 2;
                                    return {
                                        extent: new I(f.x - c, f.y - b, f.x + c, f.y + b, f.spatialReference),
                                        lod: a
                                    }
                                }
                            } else if (b) return {
                                extent: b.expand(!a || 1 > a ? 1 : a).centerAt(f)
                            };
                            console.log("Map: " + this.invalidExtent)
                        },
                        _jobs: 0,
                        _incr: function () {
                            1 === ++this._jobs && (this.updating = !0, this.attr("data-updating", ""), this.onUpdateStart())
                        },
                        _decr: function () {
                            var a = --this._jobs;
                            a ? 0 > a && (this._jobs = 0) : (this.updating = !1, this.attr("data-updating"), this.onUpdateEnd())
                        },
                        _fireEvent: function (a, f) {
                            this[a] && this[a].apply(this, f)
                        },
                        _updateExtent: function (a, f, b) {
                            this.extent = a;
                            this._view = new Q({
                                viewingMode: "map",
                                scale: this.getScale()
                            });
                            (f || b) && this._setClipRect();
                            if (a = this.spatialReference) a.isWebMercator() ?
                                this.geographicExtent = W.webMercatorToGeographic(this._getAvailExtent(), !0) : 4326 === a.wkid && (this.geographicExtent = new I(this._getAvailExtent().toJson()))
                        },
                        _fireExtChg: function (a) {
                            this.attr("data-zoom", this.getZoom());
                            this.attr("data-scale", this.getScale());
                            this._fireEvent("onExtentChange", a);
                            if (a = this._extentDfd) delete this._extentDfd, a.resolve()
                        },
                        attr: function (a, f) {
                            var b = this.container;
                            b && (null == f ? b.removeAttribute(a) : b.setAttribute(a, f));
                            return this
                        },
                        onUpdateStart: function () {},
                        onUpdateEnd: function () {},
                        onLoad: function () {
                            this._setClipRect()
                        },
                        onBeforeUnload: function () {},
                        onUnload: function () {},
                        onExtentChange: function (a, f, b) {},
                        onTimeExtentChange: function () {},
                        onLayerAdd: function () {},
                        onLayerAddResult: function () {},
                        onLayersAddResult: function () {},
                        onLayerRemove: function () {},
                        onLayersRemoved: function () {},
                        onLayerReorder: function () {},
                        onLayersReordered: function () {},
                        onLayerSuspend: function () {},
                        onLayerResume: function () {},
                        onPanStart: function () {},
                        onPan: function () {},
                        onPanEnd: function () {},
                        onScale: function () {},
                        onZoomStart: function () {},
                        onZoom: function () {},
                        onZoomEnd: function () {},
                        onResize: function () {
                            this._setClipRect()
                        },
                        onReposition: function () {},
                        destroy: function () {
                            this._destroyed || (this.onBeforeUnload(this), this.removeAllLayers(), this._cleanUp(), clearTimeout(this._resizeT), this._gc && this._gc._cleanUp(), this._destroyed = !0, this.onUnload(this))
                        },
                        setCursor: function (a) {
                            ya(this.__container, "cursor", this.cursor = a)
                        },
                        setMapCursor: function (a) {
                            this.setCursor(this._cursor = a)
                        },
                        resetMapCursor: function () {
                            this.setCursor(this._cursor)
                        },
                        setInfoWindow: function (a) {
                            var f =
                                this.infoWindow;
                            f && f.unsetMap(this);
                            this.infoWindow = a;
                            this.loaded && a && a.setMap(this)
                        },
                        setInfoWindowOnClick: function (a) {
                            this._params.showInfoWindowOnClick = a;
                            this.popupManager && this.popupManager.set("enabled", a)
                        },
                        getInfoWindowAnchor: function (a) {
                            return this.infoWindow && this.infoWindow._getAnchor && this.infoWindow._getAnchor(a) || "upperright"
                        },
                        toScreen: function (a, f) {
                            return oa(this.extent, this.width, this.height, a, f)
                        },
                        toMap: function (a) {
                            return pa(this.extent, this.width, this.height, a)
                        },
                        addLayer: function (a,
                            f) {
                            a && !this.getLayer(a.id) && this._addLayer(a, a instanceof T ? this.graphicsLayerIds : this.layerIds, f);
                            return a
                        },
                        addLayers: function (a) {
                            var f = [],
                                b = a.length,
                                c, d, e = a.length;
                            c = q.connect(this, "onLayerAddResult", function (d, e) {
                                -1 !== l.indexOf(a, d) && (b--, f.push({
                                    layer: d,
                                    success: !e,
                                    error: e
                                }), b || (q.disconnect(c), this.onLayersAddResult(f)))
                            });
                            for (d = 0; d < e; d++) this.addLayer(a[d]);
                            return this
                        },
                        removeLayer: function (a, f) {
                            var b = a.id,
                                c = a instanceof T ? this.graphicsLayerIds : this.layerIds,
                                d = va(c, b);
                            0 <= d && (c.splice(d, 1), a instanceof T ? (ia(this["_gl_" + a.id + "_click_connect"]), a.loaded && a._unsetMap(this, this._gc._surface)) : a.loaded && (a._unsetMap(this, this._layersDiv), -1 !== a.declaredClass.indexOf("VETiledLayer") && this._onBingLayerRemove(a)), delete this._layers[b], delete this._layerDivs[b], f || this._reorderLayers(c), this.onLayerRemove(a))
                        },
                        removeAllLayers: function () {
                            var a = this.layerIds,
                                f;
                            for (f = a.length - 1; 0 <= f; f--) this.removeLayer(this._layers[a[f]], 1);
                            a = this.graphicsLayerIds;
                            for (f = a.length - 1; 0 <= f; f--) this.removeLayer(this._layers[a[f]],
                                1);
                            this.onLayersRemoved()
                        },
                        reorderLayer: function (f, b) {
                            k.isString(f) && (a.deprecated(this.declaredClass + ": Map.reorderLayer(/*String*/ id, /*Number*/ index) deprecated. Use Map.reorderLayer(/*Layer*/ layer, /*Number*/ index).", null, "v2.0"), f = this.getLayer(f));
                            var c = f.id,
                                d, e = f instanceof T ? this.graphicsLayerIds : this.layerIds;
                            0 > b ? b = 0 : b >= e.length && (b = e.length - 1);
                            d = va(e, c); - 1 === d || d === b || (e.splice(d, 1), e.splice(b, 0, c), this._reorderLayers(e))
                        },
                        getLayer: function (a) {
                            return this._layers[a]
                        },
                        setExtent: function (a,
                            f) {
                            a = new I(a.toJson());
                            var b = a.getWidth(),
                                c = a.getHeight();
                            return 0 === b && 0 === c ? this.centerAt(new R({
                                x: a.xmin,
                                y: a.ymin,
                                spatialReference: a.spatialReference && a.spatialReference.toJson()
                            })) : this._extentUtil(null, null, a, f)
                        },
                        centerAt: function (a) {
                            return this._extentUtil(null, {
                                mapCenter: a
                            })
                        },
                        centerAndZoom: function (a, f) {
                            return this._extentUtil({
                                targetLevel: f,
                                mapCenter: a,
                                levelOrFactor: !0
                            })
                        },
                        getScale: function () {
                            return this.__LOD ? this.__LOD.scale : J.getScale(this)
                        },
                        getResolution: function () {
                            return this.__LOD ? this.__LOD.resolution :
                                this.extent ? this.extent.getWidth() / this.width : 0
                        },
                        getResolutionInMeters: function () {
                            return this.getResolution() * J.getUnitValueForSR(this.spatialReference)
                        },
                        getMinScale: function () {
                            return this._params.minScale
                        },
                        getMaxScale: function () {
                            return this._params.maxScale
                        },
                        _getView: function () {
                            return this._view
                        },
                        setScale: function (a) {
                            return this._extentUtil({
                                targetScale: a
                            })
                        },
                        getLayersVisibleAtScale: function (a) {
                            var f = [];
                            (a = a || this.getScale()) && l.forEach(this.layerIds.concat(this.graphicsLayerIds), function (b) {
                                b = this.getLayer(b);
                                b.isVisibleAtScale(a) && f.push(b)
                            }, this);
                            return f
                        },
                        getNumLevels: function () {
                            var a = this.getMinZoom(),
                                f = this.getMaxZoom();
                            return a === f && 0 > a ? 0 : f - a + 1
                        },
                        getLevel: function () {
                            return this.__LOD ? this.__LOD.level : -1
                        },
                        setLevel: function (a) {
                            if (-1 < a) return this._extentUtil({
                                targetLevel: a
                            })
                        },
                        getZoom: function () {
                            return this.getLevel()
                        },
                        setZoom: function (a) {
                            return this.setLevel(a)
                        },
                        getMinZoom: function () {
                            return this._params.minZoom
                        },
                        getMaxZoom: function () {
                            return this._params.maxZoom
                        },
                        setBasemap: function (a) {
                            var f;
                            k.isObject(a) ?
                                (f = a, a = f.title) : f = x && x[a];
                            if (f) {
                                this._basemapDfd && -1 === this._basemapDfd.fired && this._basemapDfd.cancel();
                                var b = [],
                                    c = [],
                                    d = 0;
                                l.forEach(f.baseMapLayers || f.layers, function (f) {
                                    var e, n = {
                                        id: f.id,
                                        displayLevels: f.displayLevels,
                                        opacity: v.isDefined(f.opacity) ? f.opacity : null,
                                        visible: v.isDefined(f.visibility) ? f.visibility : null
                                    };
                                    if (f.type) switch (f.type) {
                                    case "OpenStreetMap":
                                        e = new aa(n);
                                        break;
                                    case "VectorTile":
                                        e = F.normalize(f.url);
                                        e = new ea(e, n);
                                        break;
                                    default:
                                        console.log("Map.setBasemap: " + v.substitute({
                                            basemapName: a,
                                            type: f.type
                                        }, this.unknownLayerType))
                                    } else e = F.normalize(f.url), e = new Z(e, n);
                                    e && (b.push(e), c.push(f), f.isReference || d++)
                                }, this);
                                if (!b.length || !d) console.log("Map.setBasemap: " + v.substitute({
                                    basemapName: a
                                }, this.invalidBasemap));
                                else {
                                    var e = {
                                        basemapName: a,
                                        infos: c,
                                        layers: b
                                    };
                                    if (this.loaded) {
                                        var n = this,
                                            s = new h(H._dfdCanceller),
                                            m = function (a) {
                                                s._pendingLayers--;
                                                a = l.indexOf(e.layers, this);
                                                if (-1 < a && (a = s._layerEvents[a])) q.disconnect(a[0]), q.disconnect(a[1]);
                                                0 >= s._pendingLayers && (delete s._layerEvents, delete n._basemapDfd,
                                                    0 > s.fired && s.callback(e))
                                            };
                                        this._basemapDfd = s;
                                        s._pendingLayers = 0;
                                        s._layerEvents = {};
                                        l.forEach(b, function (a, f) {
                                            a && (s._pendingLayers++, a.loaded ? m(a) : s._layerEvents[f] = [q.connect(a, "onLoad", a, m), q.connect(a, "onError", a, m)])
                                        });
                                        s.addCallback(ma(this, this._basemapLoaded))
                                    } else this._basemapLoaded(e)
                                }
                            } else {
                                f = [];
                                for (var u in x) f.push(u);
                                console.log("Map.setBasemap: " + v.substitute({
                                    basemapName: a,
                                    list: f.join(",")
                                }, this.unknownBasemap))
                            }
                        },
                        _basemapLoaded: function (a) {
                            var f = a.layers,
                                b = a.infos,
                                c = 0,
                                d = !0,
                                e;
                            this.loaded &&
                                (l.forEach(f, function (a, f) {
                                    a.loaded && (b[f].isReference || c++)
                                }), d = c);
                            d && (this.basemapLayerIds && (e = {
                                    basemapName: this._basemap,
                                    infos: x && x[this._basemap] && x[this._basemap].baseMapLayers
                                }, e.basemapName || (l.forEach(this.basemapLayerIds, function (a) {
                                    if (this.getLayer(a) instanceof aa) return e.basemapName = "osm", e.infos = x && x.osm && x.osm.baseMapLayers, !1
                                }, this), e.basemapName || (e = null))), this._removeBasemap(), this._basemap = a.basemapName, this.basemapLayerIds = this._addBasemap(f, b), this.attr("data-basemap", this.getBasemap()),
                                this.emit("basemap-change", {
                                    current: a,
                                    previous: e
                                }))
                        },
                        _addBasemap: function (a, f) {
                            var b = [],
                                c = [],
                                d = 0;
                            l.forEach(a, function (a, e) {
                                f[e].isReference ? b.push(a) : (this.addLayer(a, d++), c.push(a.id))
                            }, this);
                            b.length && l.forEach(b, function (a) {
                                a.attr("data-reference", !0);
                                this.addLayer(a, "top");
                                c.push(a.id)
                            }, this);
                            return c
                        },
                        _removeBasemap: function () {
                            var a = this.basemapLayerIds,
                                f;
                            a && a.length && l.forEach(a, function (a) {
                                (f = this.getLayer(a)) && this.removeLayer(f)
                            }, this)
                        },
                        getBasemap: function () {
                            return this._basemap || ""
                        },
                        translate: function (a,
                            f) {
                            a = a || 0;
                            f = f || 0;
                            if (!this._txTimer) {
                                this._tx = this._ty = 0;
                                var b = this.toScreen(this.extent.getCenter());
                                this.__panStart(b.x, b.y)
                            }
                            this._tx += a;
                            this._ty += f;
                            this.__pan(this._tx, this._ty);
                            clearTimeout(this._txTimer);
                            this._txTimer = setTimeout(this._endTranslate, 150)
                        },
                        _endTranslate: function () {
                            clearTimeout(this._txTimer);
                            this._txTimer = null;
                            var a = this._tx,
                                f = this._ty;
                            this._tx = this._ty = 0;
                            this.__panEnd(a, f)
                        },
                        setTimeExtent: function (a) {
                            a = (this.timeExtent = a) ? new a.constructor(a.toJson()) : null;
                            this.onTimeExtentChange(a)
                        },
                        setTimeSlider: function (a) {
                            this.timeSlider && (ia(this._tsTimeExtentChange_connect), this.timeSlider = this._tsTimeExtentChange_connect = null);
                            a && (this.timeSlider = a, this.setTimeExtent(a.getCurrentTimeExtent()), this._tsTimeExtentChange_connect = na(a, "onTimeExtentChange", this, "setTimeExtent"))
                        },
                        setVisibility: function (a) {
                            if (this.visible !== a) {
                                this.visible = a;
                                a || (this._display = this.container.style.display);
                                this.container.style.display = a ? this._display : "none";
                                if (this.autoResize) {
                                    var f = a ? "resume" : "pause";
                                    this._rszSignal[f]();
                                    this._oriSignal[f]()
                                }
                                a && this.resize()
                            }
                            return this
                        },
                        resize: function (a) {
                            clearTimeout(this._resizeT);
                            this._destroyed || (!0 === a ? this._execResize() : this._resizeT = setTimeout(this._execResize, this.resizeDelay))
                        },
                        _timedResize: function () {
                            this._resizeT || this._execResize()
                        },
                        _execResize: function () {
                            clearTimeout(this._resizeT);
                            this._resizeT = null;
                            this.reposition();
                            this._resize();
                            this.autoResize && this._startResizeTimer()
                        },
                        _resize: function () {
                            var a = this.width,
                                f = this.height,
                                b = n.get(this.container, "display"),
                                c = s.getContentBox(this.container);
                            if (!("none" === b || 0 >= c.w || 0 >= c.h || a === c.w && f === c.h)) {
                                if (b = this._zoomAnim || this._panAnim) b.stop(), b._fire("onEnd", [b.node]);
                                ya(this.root, {
                                    width: (this.width = c.w) + "px",
                                    height: (this.height = c.h) + "px"
                                });
                                c = this.width;
                                b = this.height;
                                this.attribution && this.attribution.domNode && n.set(this.attribution.domNode, "maxWidth", Math.floor(c * this._mapParams.attributionWidth) + "px");
                                this.__visibleRect.update(this.__visibleRect.x, this.__visibleRect.y, c, b);
                                this.__visibleDelta.update(this.__visibleDelta.x, this.__visibleDelta.y,
                                    c, b);
                                var d = new P(this.extent),
                                    a = (new P(d.x, d.y, d.width * (c / a), d.height * (b / f), this.spatialReference)).getExtent();
                                this.onResize(a, c, b);
                                this._extentUtil(null, null, a, null, !0)
                            }
                        },
                        reposition: function () {
                            var a = this.position,
                                f = a.x,
                                b = a.y;
                            this._reposition();
                            a = this.position;
                            if (f !== a.x || b !== a.y) this.onReposition(a.x, a.y)
                        },
                        _reposition: function () {
                            var a = s.position(this.container, !0),
                                f = s.getPadBorderExtents(this.container);
                            this.position.update(a.x + f.l, a.y + f.t)
                        },
                        _setClipRect: function () {
                            delete this._clip;
                            var a = 7 >= f("ie") ||
                                void 0 === f("ie") && 7 <= f("trident") ? "rect(auto,auto,auto,auto)" : "auto";
                            if (this.wrapAround180) {
                                var b = this.width,
                                    c = this.height,
                                    d = this._getFrameWidth(),
                                    e = b - d;
                                0 < e && (a = e / 2, a = "rect(0px," + (a + d) + "px," + c + "px," + a + "px)", c = this.extent.getWidth(), b = c * (d / b), this._clip = [(c - b) / 2, b])
                            }
                            ya(this.__container, "clip", a)
                        },
                        _getAvailExtent: function () {
                            var a = this.extent,
                                f = this._clip;
                            if (f) {
                                if (!a._clip) {
                                    var b = new P(a);
                                    b.width = f[1];
                                    b.x += f[0];
                                    a._clip = b.getExtent()
                                }
                                return a._clip
                            }
                            return a
                        },
                        _fixedPan: function (a, f) {
                            return this._extentUtil(null, {
                                dx: a,
                                dy: f
                            })
                        },
                        panUp: function () {
                            return this._fixedPan(0, -0.75 * this.height)
                        },
                        panUpperRight: function () {
                            return this._fixedPan(0.75 * this.width, -0.75 * this.height)
                        },
                        panRight: function () {
                            return this._fixedPan(0.75 * this.width, 0)
                        },
                        panLowerRight: function () {
                            return this._fixedPan(0.75 * this.width, 0.75 * this.height)
                        },
                        panDown: function () {
                            return this._fixedPan(0, 0.75 * this.height)
                        },
                        panLowerLeft: function () {
                            return this._fixedPan(-0.75 * this.width, 0.75 * this.height)
                        },
                        panLeft: function () {
                            return this._fixedPan(-0.75 * this.width,
                                0)
                        },
                        panUpperLeft: function () {
                            return this._fixedPan(-0.75 * this.width, -0.75 * this.height)
                        },
                        enableSnapping: function (a) {
                            a = a || {};
                            if ("esri.SnappingManager" === a.declaredClass) this.snappingManager = a;
                            else {
                                var f = Ja++,
                                    b = this;
                                this._rids && this._rids.push(f);
                                r(["./SnappingManager"], function (c) {
                                    var d = b._rids ? l.indexOf(b._rids, f) : -1; - 1 !== d && (b._rids.splice(d, 1), b.snappingManager = new c(k.mixin({
                                        map: b
                                    }, a)))
                                })
                            }
                            return this.snappingManager
                        },
                        disableSnapping: function () {
                            this.snappingManager && this.snappingManager.destroy();
                            this.snappingManager = null
                        },
                        _createLabelLayer: function () {
                            !this._labels && (ha && this.loaded) && (this._labels = new ha({
                                id: "_internal_LabelLayer"
                            }), this._labels._setMap(this, this._gc._surface), this._processLabelLayers(), this.on("layers-reordered", this._processLabelLayers))
                        },
                        _processLabelLayers: function () {
                            null == this._labelProcessor && (this._labelProcessor = setTimeout(this._updateLabelLayers, 0))
                        },
                        _updateLabelLayers: function () {
                            this._labelProcessor = null;
                            this._labels && (this._labels.removeAllFeatureLayers(), l.forEach(this.graphicsLayerIds,
                                function (a) {
                                    a = this.getLayer(a);
                                    "function" === typeof a.applyEdits ? this._labels.addFeatureLayer(a) : "esri.layers.WFSLayer" === a.declaredClass && this._labels.addFeatureLayer(a)
                                }, this))
                        },
                        _getMapImageLyr: function () {
                            this.loaded && !this._mapImageLyr && (this._mapImageLyr = new ga, this._mapImageLyr._setMap(this, this._layersDiv), this._placeMapImageLyr());
                            return this._mapImageLyr
                        },
                        _placeMapImageLyr: function () {
                            for (var a = this.layerIds, f = this._layerDivs, b = !1, c, d, e = a.length - 1; 0 <= e; e--)
                                if (c = a[e], d = this.getLayer(c), c = f[c],
                                    d && c && !d._isReference) {
                                    t.place(this._mapImageLyr._div, c, "after");
                                    b = !0;
                                    break
                                }
                            b || t.place(this._mapImageLyr._div, this._layersDiv, "first")
                        }
                    });
                    f("extend-esri") && (w._CoreMap = g);
                    return g
                })
        },
        "dojox/gfx/matrix": function () {
            define(["./_base", "dojo/_base/lang"], function (r, p) {
                var a = r.matrix = {},
                    g = {};
                a._degToRad = function (a) {
                    return g[a] || (g[a] = Math.PI * a / 180)
                };
                a._radToDeg = function (a) {
                    return 180 * (a / Math.PI)
                };
                a.Matrix2D = function (g) {
                    if (g)
                        if ("number" == typeof g) this.xx = this.yy = g;
                        else if (g instanceof Array) {
                        if (0 < g.length) {
                            for (var h =
                                    a.normalize(g[0]), k = 1; k < g.length; ++k) {
                                var l = h,
                                    e = a.normalize(g[k]),
                                    h = new a.Matrix2D;
                                h.xx = l.xx * e.xx + l.xy * e.yx;
                                h.xy = l.xx * e.xy + l.xy * e.yy;
                                h.yx = l.yx * e.xx + l.yy * e.yx;
                                h.yy = l.yx * e.xy + l.yy * e.yy;
                                h.dx = l.xx * e.dx + l.xy * e.dy + l.dx;
                                h.dy = l.yx * e.dx + l.yy * e.dy + l.dy
                            }
                            p.mixin(this, h)
                        }
                    } else p.mixin(this, g)
                };
                p.extend(a.Matrix2D, {
                    xx: 1,
                    xy: 0,
                    yx: 0,
                    yy: 1,
                    dx: 0,
                    dy: 0
                });
                p.mixin(a, {
                    identity: new a.Matrix2D,
                    flipX: new a.Matrix2D({
                        xx: -1
                    }),
                    flipY: new a.Matrix2D({
                        yy: -1
                    }),
                    flipXY: new a.Matrix2D({
                        xx: -1,
                        yy: -1
                    }),
                    translate: function (g, h) {
                        return 1 < arguments.length ?
                            new a.Matrix2D({
                                dx: g,
                                dy: h
                            }) : new a.Matrix2D({
                                dx: g.x,
                                dy: g.y
                            })
                    },
                    scale: function (g, h) {
                        return 1 < arguments.length ? new a.Matrix2D({
                            xx: g,
                            yy: h
                        }) : "number" == typeof g ? new a.Matrix2D({
                            xx: g,
                            yy: g
                        }) : new a.Matrix2D({
                            xx: g.x,
                            yy: g.y
                        })
                    },
                    rotate: function (g) {
                        var h = Math.cos(g);
                        g = Math.sin(g);
                        return new a.Matrix2D({
                            xx: h,
                            xy: -g,
                            yx: g,
                            yy: h
                        })
                    },
                    rotateg: function (g) {
                        return a.rotate(a._degToRad(g))
                    },
                    skewX: function (g) {
                        return new a.Matrix2D({
                            xy: Math.tan(g)
                        })
                    },
                    skewXg: function (g) {
                        return a.skewX(a._degToRad(g))
                    },
                    skewY: function (g) {
                        return new a.Matrix2D({
                            yx: Math.tan(g)
                        })
                    },
                    skewYg: function (g) {
                        return a.skewY(a._degToRad(g))
                    },
                    reflect: function (g, h) {
                        1 == arguments.length && (h = g.y, g = g.x);
                        var k = g * g,
                            l = h * h,
                            e = k + l,
                            c = 2 * g * h / e;
                        return new a.Matrix2D({
                            xx: 2 * k / e - 1,
                            xy: c,
                            yx: c,
                            yy: 2 * l / e - 1
                        })
                    },
                    project: function (g, h) {
                        1 == arguments.length && (h = g.y, g = g.x);
                        var k = g * g,
                            l = h * h,
                            e = k + l,
                            c = g * h / e;
                        return new a.Matrix2D({
                            xx: k / e,
                            xy: c,
                            yx: c,
                            yy: l / e
                        })
                    },
                    normalize: function (g) {
                        return g instanceof a.Matrix2D ? g : new a.Matrix2D(g)
                    },
                    isIdentity: function (a) {
                        return 1 == a.xx && 0 == a.xy && 0 == a.yx && 1 == a.yy && 0 == a.dx && 0 == a.dy
                    },
                    clone: function (g) {
                        var h =
                            new a.Matrix2D,
                            k;
                        for (k in g) "number" == typeof g[k] && ("number" == typeof h[k] && h[k] != g[k]) && (h[k] = g[k]);
                        return h
                    },
                    invert: function (g) {
                        g = a.normalize(g);
                        var h = g.xx * g.yy - g.xy * g.yx;
                        return g = new a.Matrix2D({
                            xx: g.yy / h,
                            xy: -g.xy / h,
                            yx: -g.yx / h,
                            yy: g.xx / h,
                            dx: (g.xy * g.dy - g.yy * g.dx) / h,
                            dy: (g.yx * g.dx - g.xx * g.dy) / h
                        })
                    },
                    _multiplyPoint: function (a, g, k) {
                        return {
                            x: a.xx * g + a.xy * k + a.dx,
                            y: a.yx * g + a.yy * k + a.dy
                        }
                    },
                    multiplyPoint: function (g, h, k) {
                        g = a.normalize(g);
                        return "number" == typeof h && "number" == typeof k ? a._multiplyPoint(g, h, k) : a._multiplyPoint(g,
                            h.x, h.y)
                    },
                    multiplyRectangle: function (g, h) {
                        var k = a.normalize(g);
                        h = h || {
                            x: 0,
                            y: 0,
                            width: 0,
                            height: 0
                        };
                        if (a.isIdentity(k)) return {
                            x: h.x,
                            y: h.y,
                            width: h.width,
                            height: h.height
                        };
                        var l = a.multiplyPoint(k, h.x, h.y),
                            e = a.multiplyPoint(k, h.x, h.y + h.height),
                            c = a.multiplyPoint(k, h.x + h.width, h.y),
                            b = a.multiplyPoint(k, h.x + h.width, h.y + h.height),
                            k = Math.min(l.x, e.x, c.x, b.x),
                            d = Math.min(l.y, e.y, c.y, b.y),
                            m = Math.max(l.x, e.x, c.x, b.x),
                            l = Math.max(l.y, e.y, c.y, b.y);
                        return {
                            x: k,
                            y: d,
                            width: m - k,
                            height: l - d
                        }
                    },
                    multiply: function (g) {
                        for (var h = a.normalize(g),
                                k = 1; k < arguments.length; ++k) {
                            var l = h,
                                e = a.normalize(arguments[k]),
                                h = new a.Matrix2D;
                            h.xx = l.xx * e.xx + l.xy * e.yx;
                            h.xy = l.xx * e.xy + l.xy * e.yy;
                            h.yx = l.yx * e.xx + l.yy * e.yx;
                            h.yy = l.yx * e.xy + l.yy * e.yy;
                            h.dx = l.xx * e.dx + l.xy * e.dy + l.dx;
                            h.dy = l.yx * e.dx + l.yy * e.dy + l.dy
                        }
                        return h
                    },
                    _sandwich: function (g, h, k) {
                        return a.multiply(a.translate(h, k), g, a.translate(-h, -k))
                    },
                    scaleAt: function (g, h, k, l) {
                        switch (arguments.length) {
                        case 4:
                            return a._sandwich(a.scale(g, h), k, l);
                        case 3:
                            return "number" == typeof k ? a._sandwich(a.scale(g), h, k) : a._sandwich(a.scale(g,
                                h), k.x, k.y)
                        }
                        return a._sandwich(a.scale(g), h.x, h.y)
                    },
                    rotateAt: function (g, h, k) {
                        return 2 < arguments.length ? a._sandwich(a.rotate(g), h, k) : a._sandwich(a.rotate(g), h.x, h.y)
                    },
                    rotategAt: function (g, h, k) {
                        return 2 < arguments.length ? a._sandwich(a.rotateg(g), h, k) : a._sandwich(a.rotateg(g), h.x, h.y)
                    },
                    skewXAt: function (g, h, k) {
                        return 2 < arguments.length ? a._sandwich(a.skewX(g), h, k) : a._sandwich(a.skewX(g), h.x, h.y)
                    },
                    skewXgAt: function (g, h, k) {
                        return 2 < arguments.length ? a._sandwich(a.skewXg(g), h, k) : a._sandwich(a.skewXg(g), h.x,
                            h.y)
                    },
                    skewYAt: function (g, h, k) {
                        return 2 < arguments.length ? a._sandwich(a.skewY(g), h, k) : a._sandwich(a.skewY(g), h.x, h.y)
                    },
                    skewYgAt: function (g, h, k) {
                        return 2 < arguments.length ? a._sandwich(a.skewYg(g), h, k) : a._sandwich(a.skewYg(g), h.x, h.y)
                    }
                });
                r.Matrix2D = a.Matrix2D;
                return a
            })
        },
        "dojox/gfx/_base": function () {
            define("dojo/_base/kernel dojo/_base/lang dojo/_base/Color dojo/_base/sniff dojo/_base/window dojo/_base/array dojo/dom dojo/dom-construct dojo/dom-geometry".split(" "), function (r, p, a, g, q, h, k, l, e) {
                var c = p.getObject("dojox.gfx", !0),
                    b = c._base = {};
                c._hasClass = function (a, b) {
                    var c = a.getAttribute("className");
                    return c && 0 <= (" " + c + " ").indexOf(" " + b + " ")
                };
                c._addClass = function (a, b) {
                    var c = a.getAttribute("className") || "";
                    if (!c || 0 > (" " + c + " ").indexOf(" " + b + " ")) a.setAttribute("className", c + (c ? " " : "") + b)
                };
                c._removeClass = function (a, b) {
                    var c = a.getAttribute("className");
                    c && a.setAttribute("className", c.replace(RegExp("(^|\\s+)" + b + "(\\s+|$)"), "$1$2"))
                };
                b._getFontMeasurements = function () {
                    var a = {
                            "1em": 0,
                            "1ex": 0,
                            "100%": 0,
                            "12pt": 0,
                            "16px": 0,
                            "xx-small": 0,
                            "x-small": 0,
                            small: 0,
                            medium: 0,
                            large: 0,
                            "x-large": 0,
                            "xx-large": 0
                        },
                        b, c;
                    g("ie") && (c = q.doc.documentElement.style.fontSize || "", c || (q.doc.documentElement.style.fontSize = "100%"));
                    var d = l.create("div", {
                        style: {
                            position: "absolute",
                            left: "0",
                            top: "-100px",
                            width: "30px",
                            height: "1000em",
                            borderWidth: "0",
                            margin: "0",
                            padding: "0",
                            outline: "none",
                            lineHeight: "1",
                            overflow: "hidden"
                        }
                    }, q.body());
                    for (b in a) d.style.fontSize = b, a[b] = 16 * Math.round(12 * d.offsetHeight / 16) / 12 / 1E3;
                    g("ie") && (q.doc.documentElement.style.fontSize = c);
                    q.body().removeChild(d);
                    return a
                };
                var d = null;
                b._getCachedFontMeasurements = function (a) {
                    if (a || !d) d = b._getFontMeasurements();
                    return d
                };
                var m = null,
                    t = {};
                b._getTextBox = function (a, b, c) {
                    var d, n, s = arguments.length,
                        g;
                    m || (m = l.create("div", {
                        style: {
                            position: "absolute",
                            top: "-10000px",
                            left: "0",
                            visibility: "hidden"
                        }
                    }, q.body()));
                    d = m;
                    d.className = "";
                    n = d.style;
                    n.borderWidth = "0";
                    n.margin = "0";
                    n.padding = "0";
                    n.outline = "0";
                    if (1 < s && b)
                        for (g in b) g in t || (n[g] = b[g]);
                    2 < s && c && (d.className = c);
                    d.innerHTML = a;
                    d.getBoundingClientRect ? (n = d.getBoundingClientRect(),
                        n = {
                            l: n.left,
                            t: n.top,
                            w: n.width || n.right - n.left,
                            h: n.height || n.bottom - n.top
                        }) : n = e.getMarginBox(d);
                    d.innerHTML = "";
                    return n
                };
                b._computeTextLocation = function (a, b, c, d) {
                    var e = {};
                    switch (a.align) {
                    case "end":
                        e.x = a.x - b;
                        break;
                    case "middle":
                        e.x = a.x - b / 2;
                        break;
                    default:
                        e.x = a.x
                    }
                    e.y = a.y - c * (d ? 0.75 : 1);
                    return e
                };
                b._computeTextBoundingBox = function (a) {
                    if (!c._base._isRendered(a)) return {
                        x: 0,
                        y: 0,
                        width: 0,
                        height: 0
                    };
                    var d;
                    d = a.getShape();
                    var e = a.getFont() || c.defaultFont;
                    a = a.getTextWidth();
                    e = c.normalizedLength(e.size);
                    d = b._computeTextLocation(d,
                        a, e, !0);
                    return {
                        x: d.x,
                        y: d.y,
                        width: a,
                        height: e
                    }
                };
                b._isRendered = function (a) {
                    for (a = a.parent; a && a.getParent;) a = a.parent;
                    return null !== a
                };
                var s = 0;
                b._getUniqueId = function () {
                    var a;
                    do a = r._scopeName + "xUnique" + ++s; while (k.byId(a));
                    return a
                };
                var n = g("pointer-events") ? "touchAction" : g("MSPointer") ? "msTouchAction" : null;
                b._fixMsTouchAction = n ? function (a) {
                    a.rawNode.style[n] = "none"
                } : function () {};
                p.mixin(c, {
                    defaultPath: {
                        type: "path",
                        path: ""
                    },
                    defaultPolyline: {
                        type: "polyline",
                        points: []
                    },
                    defaultRect: {
                        type: "rect",
                        x: 0,
                        y: 0,
                        width: 100,
                        height: 100,
                        r: 0
                    },
                    defaultEllipse: {
                        type: "ellipse",
                        cx: 0,
                        cy: 0,
                        rx: 200,
                        ry: 100
                    },
                    defaultCircle: {
                        type: "circle",
                        cx: 0,
                        cy: 0,
                        r: 100
                    },
                    defaultLine: {
                        type: "line",
                        x1: 0,
                        y1: 0,
                        x2: 100,
                        y2: 100
                    },
                    defaultImage: {
                        type: "image",
                        x: 0,
                        y: 0,
                        width: 0,
                        height: 0,
                        src: ""
                    },
                    defaultText: {
                        type: "text",
                        x: 0,
                        y: 0,
                        text: "",
                        align: "start",
                        decoration: "none",
                        rotated: !1,
                        kerning: !0
                    },
                    defaultTextPath: {
                        type: "textpath",
                        text: "",
                        align: "start",
                        decoration: "none",
                        rotated: !1,
                        kerning: !0
                    },
                    defaultStroke: {
                        type: "stroke",
                        color: "black",
                        style: "solid",
                        width: 1,
                        cap: "butt",
                        join: 4
                    },
                    defaultLinearGradient: {
                        type: "linear",
                        x1: 0,
                        y1: 0,
                        x2: 100,
                        y2: 100,
                        colors: [{
                            offset: 0,
                            color: "black"
                        }, {
                            offset: 1,
                            color: "white"
                        }]
                    },
                    defaultRadialGradient: {
                        type: "radial",
                        cx: 0,
                        cy: 0,
                        r: 100,
                        colors: [{
                            offset: 0,
                            color: "black"
                        }, {
                            offset: 1,
                            color: "white"
                        }]
                    },
                    defaultPattern: {
                        type: "pattern",
                        x: 0,
                        y: 0,
                        width: 0,
                        height: 0,
                        src: ""
                    },
                    defaultFont: {
                        type: "font",
                        style: "normal",
                        variant: "normal",
                        weight: "normal",
                        size: "10pt",
                        family: "serif"
                    },
                    getDefault: function () {
                        var a = {};
                        return function (b) {
                            var d = a[b];
                            if (d) return new d;
                            d = a[b] = new Function;
                            d.prototype = c["default" + b];
                            return new d
                        }
                    }(),
                    normalizeColor: function (f) {
                        return f instanceof a ? f : new a(f)
                    },
                    normalizeParameters: function (a, b) {
                        var c;
                        if (b) {
                            var d = {};
                            for (c in a) c in b && !(c in d) && (a[c] = b[c])
                        }
                        return a
                    },
                    makeParameters: function (a, b) {
                        var c = null;
                        if (!b) return p.delegate(a);
                        var d = {};
                        for (c in a) c in d || (d[c] = p.clone(c in b ? b[c] : a[c]));
                        return d
                    },
                    formatNumber: function (a, b) {
                        var c = a.toString();
                        if (0 <= c.indexOf("e")) c = a.toFixed(4);
                        else {
                            var d = c.indexOf(".");
                            0 <= d && 5 < c.length - d && (c = a.toFixed(4))
                        }
                        return 0 >
                            a ? c : b ? " " + c : c
                    },
                    makeFontString: function (a) {
                        return a.style + " " + a.variant + " " + a.weight + " " + a.size + " " + a.family
                    },
                    splitFontString: function (a) {
                        var b = c.getDefault("Font");
                        a = a.split(/\s+/);
                        if (!(5 > a.length)) {
                            b.style = a[0];
                            b.variant = a[1];
                            b.weight = a[2];
                            var d = a[3].indexOf("/");
                            b.size = 0 > d ? a[3] : a[3].substring(0, d);
                            var e = 4;
                            0 > d && ("/" == a[4] ? e = 6 : "/" == a[4].charAt(0) && (e = 5));
                            e < a.length && (b.family = a.slice(e).join(" "))
                        }
                        return b
                    },
                    cm_in_pt: 72 / 2.54,
                    mm_in_pt: 7.2 / 2.54,
                    px_in_pt: function () {
                        return c._base._getCachedFontMeasurements()["12pt"] /
                            12
                    },
                    pt2px: function (a) {
                        return a * c.px_in_pt()
                    },
                    px2pt: function (a) {
                        return a / c.px_in_pt()
                    },
                    normalizedLength: function (a) {
                        if (0 === a.length) return 0;
                        if (2 < a.length) {
                            var b = c.px_in_pt(),
                                d = parseFloat(a);
                            switch (a.slice(-2)) {
                            case "px":
                                return d;
                            case "pt":
                                return d * b;
                            case "in":
                                return 72 * d * b;
                            case "pc":
                                return 12 * d * b;
                            case "mm":
                                return d * c.mm_in_pt * b;
                            case "cm":
                                return d * c.cm_in_pt * b
                            }
                        }
                        return parseFloat(a)
                    },
                    pathVmlRegExp: /([A-Za-z]+)|(\d+(\.\d+)?)|(\.\d+)|(-\d+(\.\d+)?)|(-\.\d+)/g,
                    pathSvgRegExp: /([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g,
                    equalSources: function (a, b) {
                        return a && b && a === b
                    },
                    switchTo: function (a) {
                        var b = "string" == typeof a ? c[a] : a;
                        b && (h.forEach("Group Rect Ellipse Circle Line Polyline Image Text Path TextPath EsriPath Surface createSurface fixTarget".split(" "), function (a) {
                            c[a] = b[a]
                        }), "string" == typeof a ? c.renderer = a : h.some(["svg", "vml", "canvas", "canvasWithEvents", "silverlight"], function (a) {
                            return c.renderer = c[a] && c[a].Surface === c.Surface ? a : null
                        }))
                    }
                });
                return c
            })
        },
        "esri/basemaps": function () {
            define(["require", "dojo/has", "./kernel",
"dojo/i18n!./nls/jsapi"], function (r, p, a, g) {
                r = {
                    streets: {
                        title: g.basemaps.streets,
                        thumbnailUrl: r.toUrl("./images/basemap/streets.jpg"),
                        itemId: "d8855ee4d3d74413babfb0f41203b168",
                        baseMapLayers: [{
                            url: "https://services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer"
                        }]
                    },
                    satellite: {
                        title: g.basemaps.satellite,
                        thumbnailUrl: r.toUrl("./images/basemap/satellite.jpg"),
                        itemId: "86de95d4e0244cba80f0fa2c9403a7b2",
                        baseMapLayers: [{
                            url: "https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"
                        }]
                    },
                    hybrid: {
                        title: g.basemaps.hybrid,
                        thumbnailUrl: r.toUrl("./images/basemap/hybrid.jpg"),
                        itemId: "413fd05bbd7342f5991d5ec96f4f8b18",
                        baseMapLayers: [{
                            url: "https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"
                        }, {
                            url: "https://services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer",
                            isReference: !0
                        }]
                    },
                    terrain: {
                        title: g.basemaps.terrain,
                        thumbnailUrl: r.toUrl("./images/basemap/terrain.jpg"),
                        itemId: "aab054ab883c4a4094c72e949566ad40",
                        baseMapLayers: [{
                                url: "https://services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer"
                            },
                            {
                                url: "https://services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",
                                isReference: !0
                            }]
                    },
                    topo: {
                        title: g.basemaps.topo,
                        thumbnailUrl: r.toUrl("./images/basemap/topo.jpg"),
                        itemId: "6e03e8c26aad4b9c92a87c1063ddb0e3",
                        baseMapLayers: [{
                            url: "https://services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer"
                        }]
                    },
                    gray: {
                        title: g.basemaps.gray,
                        thumbnailUrl: r.toUrl("./images/basemap/gray.jpg"),
                        itemId: "8b3b470883a744aeb60e5fff0a319ce7",
                        baseMapLayers: [{
                                url: "https://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer"
                            },
                            {
                                url: "https://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer",
                                isReference: !0
                            }]
                    },
                    "dark-gray": {
                        title: g.basemaps["dark-gray"],
                        thumbnailUrl: r.toUrl("./images/basemap/dark-gray.jpg"),
                        itemId: "da65bacab5bd4defb576f839b6b28098",
                        baseMapLayers: [{
                            url: "https://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer"
                        }, {
                            url: "https://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer",
                            isReference: !0
                        }]
                    },
                    oceans: {
                        title: g.basemaps.oceans,
                        thumbnailUrl: r.toUrl("./images/basemap/oceans.jpg"),
                        itemId: "48b8cec7ebf04b5fbdcaf70d09daff21",
                        baseMapLayers: [{
                            url: "https://services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"
                        }, {
                            url: "https://services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",
                            isReference: !0
                        }]
                    },
                    "national-geographic": {
                        title: g.basemaps["national-geographic"],
                        thumbnailUrl: r.toUrl("./images/basemap/national-geographic.jpg"),
                        itemId: "509e2d6b034246d692a461724ae2d62c",
                        baseMapLayers: [{
                            url: "https://services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer"
                        }]
                    },
                    osm: {
                        title: g.basemaps.osm,
                        thumbnailUrl: r.toUrl("./images/basemap/osm.jpg"),
                        itemId: "5d2bfa736f8448b3a1708e1f6be23eed",
                        baseMapLayers: [{
                            type: "OpenStreetMap"
                        }]
                    },
                    "dark-gray-vector": {
                        title: g.basemaps["dark-gray"],
                        thumbnailUrl: r.toUrl("./images/basemap/dark-gray.jpg"),
                        itemId: "850db44b9eb845d3bd42b19e8aa7a024",
                        baseMapLayers: [{
                            url: "https://www.arcgis.com/sharing/rest/content/items/850db44b9eb845d3bd42b19e8aa7a024/resources/styles/root.json",
                            type: "VectorTile"
                        }]
                    },
                    "gray-vector": {
                        title: g.basemaps.gray,
                        thumbnailUrl: r.toUrl("./images/basemap/gray.jpg"),
                        itemId: "0e02e6f86d02455091796eaae811d9b5",
                        baseMapLayers: [{
                            url: "https://www.arcgis.com/sharing/rest/content/items/0e02e6f86d02455091796eaae811d9b5/resources/styles/root.json",
                            type: "VectorTile"
                        }]
                    },
                    "streets-vector": {
                        title: g.basemaps.streets,
                        thumbnailUrl: r.toUrl("./images/basemap/streets.jpg"),
                        itemId: "4e1133c28ac04cca97693cf336cd49ad",
                        baseMapLayers: [{
                            url: "https://www.arcgis.com/sharing/rest/content/items/4e1133c28ac04cca97693cf336cd49ad/resources/styles/root.json",
                            type: "VectorTile"
                        }]
                    },
                    "topo-vector": {
                        title: g.basemaps.topo,
                        thumbnailUrl: r.toUrl("./images/basemap/topo.jpg"),
                        itemId: "6f65bc1351b7411588a8cb43fe23dad7",
                        baseMapLayers: [{
                            url: "https://www.arcgis.com/sharing/rest/content/items/6f65bc1351b7411588a8cb43fe23dad7/resources/styles/root.json",
                            type: "VectorTile"
                        }]
                    },
                    "streets-night-vector": {
                        title: g.basemaps["streets-night-vector"],
                        thumbnailUrl: r.toUrl("./images/basemap/streets-night.jpg"),
                        itemId: "bf79e422e9454565ae0cbe9553cf6471",
                        baseMapLayers: [{
                            url: "https://www.arcgis.com/sharing/rest/content/items/bf79e422e9454565ae0cbe9553cf6471/resources/styles/root.json",
                            type: "VectorTile"
                        }]
                    },
                    "streets-relief-vector": {
                        title: g.basemaps["streets-relief-vector"],
                        thumbnailUrl: r.toUrl("./images/basemap/streets-relief.jpg"),
                        itemId: "2e063e709e3446459f8538ed6743f879",
                        baseMapLayers: [{
                            url: "https://www.arcgis.com/sharing/rest/content/items/2e063e709e3446459f8538ed6743f879/resources/styles/root.json",
                            type: "VectorTile"
                        }]
                    },
                    "streets-navigation-vector": {
                        title: g.basemaps["streets-navigation-vector"],
                        thumbnailUrl: r.toUrl("./images/basemap/streets-navigation.jpg"),
                        itemId: "dcbbba0edf094eaa81af19298b9c6247",
                        baseMapLayers: [{
                            url: "https://www.arcgis.com/sharing/rest/content/items/dcbbba0edf094eaa81af19298b9c6247/resources/styles/root.json",
                            type: "VectorTile"
                        }]
                    }
                };
                p("extend-esri") && (a.basemaps = r);
                return r
            })
        },
        "esri/Evented": function () {
            define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/Evented dojo/has ./kernel".split(" "), function (r, p, a, g, q, h) {
                r = r([g], {
                    declaredClass: "esri.Evented",
                    registerConnectEvents: function () {
                        var a = this.constructor,
                            g = this.constructor._meta.parents,
                            e = [{}],
                            c = {},
                            b, d, m = function (a, b) {
                                p.isArray(a) ||
                                    (a = [a]);
                                for (var c = 0; c < a.length; c++) {
                                    var f = a[c];
                                    f._meta && f._meta.parents && m(f._meta.parents, b);
                                    f.prototype._eventMap && b.push(p.mixin({}, f.prototype._eventMap))
                                }
                                return b
                            };
                        if (!a._onMap) {
                            m(g, e);
                            e.push(this._eventMap);
                            g = p.mixin.apply(this, e);
                            for (b in this) /^on\w/.test(b) && p.isFunction(this[b]) && (e = this._hyphenLower(b).toLowerCase(), g[e] || (c[e] = {
                                method: b
                            }));
                            for (d in g) b = this._onCamelCase(d), c[d] = {
                                method: b,
                                argKeys: g[d]
                            };
                            a._onMap = c;
                            return a._onMap
                        }
                    },
                    on: function (g, l) {
                        if (-1 < g.indexOf(",")) {
                            for (var e = g.split(/\s*,\s*/),
                                    c = e.length, b = []; c--;) b.push(this.on(e[c], l));
                            b.remove = function () {
                                for (var a = 0; a < b.length; a++) b[a].remove()
                            };
                            return b
                        }
                        var e = this.constructor._onMap || this.registerConnectEvents(),
                            c = "string" == typeof g && g.toLowerCase(),
                            d = this._onCamelCase(c),
                            m = e && e[c];
                        return (d = m && m.method || this[d] && p.isFunction(this[d]) && d) ? m && p.isArray(m.argKeys) ? (e = this._onArr2Obj(l, e[c].argKeys), a.after(this, d, e, !0)) : a.after(this, d, function (a) {
                            a = a || {};
                            a.target || (a.target = this);
                            l.call(this, a)
                        }, !0) : this.inherited(arguments)
                    },
                    emit: function (a,
                        g) {
                        var e, c, b, d, m = a.toLowerCase();
                        d = this._onCamelCase(a);
                        var t = this.constructor._onMap || this.registerConnectEvents();
                        d = (b = t && t[m] && t[m].method || p.isFunction(this[d]) && d) && this[b];
                        b && (t && t[m]) && this._onObj2Arr(function () {
                            c = Array.prototype.slice.call(arguments)
                        }, t[m].argKeys)(g);
                        g = g || {};
                        g.target || (g.target = this);
                        d && (e = c && c.length ? c : [g], e = d.apply(this, e));
                        this.inherited(arguments, [a, g]);
                        return e
                    },
                    _onObj2Arr: function (a, g) {
                        if (g) {
                            var e = this;
                            return function (c) {
                                var b, d = [],
                                    m = g.length;
                                for (b = 0; b < m; b++) d[b] = c[g[b]];
                                a.apply(e, d)
                            }
                        }
                        return a
                    },
                    _onArr2Obj: function (a, g) {
                        if (g) {
                            var e = this;
                            return function () {
                                var c, b = {},
                                    d = arguments.length;
                                for (c = 0; c < d; c++) b[g[c]] = arguments[c];
                                b.target || (b.target = e);
                                a.call(e, b)
                            }
                        }
                        return a
                    },
                    _hyphenLower: function (a) {
                        return a.replace(/^on/, "").replace(/[A-Z](?=[a-z])/g, function (a, e) {
                            return (e ? "-" : "") + a.toLowerCase()
                        })
                    },
                    _onCamelCase: function (a) {
                        return "on" + a.substr(0, 1).toUpperCase() + a.substr(1).replace(/\-([a-z])/g, function (a, e) {
                            return e.toUpperCase()
                        })
                    }
                });
                q("extend-esri") && (h.Evented = r);
                return r
            })
        },
        "esri/fx": function () {
            define("dojo/_base/connect dojo/_base/fx dojo/_base/lang dojo/dom dojo/dom-geometry dojo/dom-style dojo/fx dojo/has ./kernel".split(" "), function (r, p, a, g, q, h, k, l, e) {
                var c = {
                    animateRange: function (b) {
                        var c = b.range;
                        return new p.Animation(a.mixin({
                            curve: new p._Line(c.start, c.end)
                        }, b))
                    },
                    resize: function (b) {
                        var c = b.node = g.byId(b.node),
                            e = b.start,
                            t = b.end;
                        e || (e = q.getMarginBox(c), c = q.getPadBorderExtents(c), e = b.start = {
                            left: e.l + c.l,
                            top: e.t + c.t,
                            width: e.w - c.w,
                            height: e.h - c.h
                        });
                        t || (t = b.anchor ?
                            b.anchor : {
                                x: e.left,
                                y: e.top
                            }, c = b.size, t = b.end = {
                                left: e.left - (c.width - e.width) * (t.x - e.left) / e.width,
                                top: e.top - (c.height - e.height) * (t.y - e.top) / e.height,
                                width: c.width,
                                height: c.height
                            });
                        return p.animateProperty(a.mixin({
                            properties: {
                                left: {
                                    start: e.left,
                                    end: t.left
                                },
                                top: {
                                    start: e.top,
                                    end: t.top
                                },
                                width: {
                                    start: e.width,
                                    end: t.width
                                },
                                height: {
                                    start: e.height,
                                    end: t.height
                                }
                            }
                        }, b))
                    },
                    slideTo: function (b) {
                        var c = b.node = g.byId(b.node),
                            e = h.getComputedStyle,
                            t = null,
                            s = null,
                            n = function () {
                                return function () {
                                    var a = "absolute" == c.style.position ?
                                        "absolute" : "relative";
                                    t = "absolute" == a ? c.offsetTop : parseInt(e(c).top) || 0;
                                    s = "absolute" == a ? c.offsetLeft : parseInt(e(c).left) || 0;
                                    "absolute" != a && "relative" != a && (a = q.position(c, !0), t = a.y, s = a.x, c.style.position = "absolute", c.style.top = t + "px", c.style.left = s + "px")
                                }
                            }();
                        n();
                        b = p.animateProperty(a.mixin({
                            properties: {
                                top: {
                                    start: t,
                                    end: b.top || 0
                                },
                                left: {
                                    start: s,
                                    end: b.left || 0
                                }
                            }
                        }, b));
                        r.connect(b, "beforeBegin", b, n);
                        return b
                    },
                    flash: function (b) {
                        b = a.mixin({
                            end: "#f00",
                            duration: 500,
                            count: 1
                        }, b);
                        b.duration /= 2 * b.count;
                        var c = g.byId(b.node),
                            e = b.start;
                        e || (e = h.getComputedStyle(c).backgroundColor);
                        var t = b.end,
                            s = [],
                            n = b.count,
                            c = {
                                node: c,
                                duration: b.duration
                            };
                        for (b = 0; b < n; b++) s.push(p.animateProperty(a.mixin({
                            properties: {
                                backgroundColor: {
                                    start: e,
                                    end: t
                                }
                            }
                        }, c))), s.push(p.animateProperty(a.mixin({
                            properties: {
                                backgroundColor: {
                                    start: t,
                                    end: e
                                }
                            }
                        }, c)));
                        return k.chain(s)
                    }
                };
                l("extend-esri") && a.mixin(a.getObject("fx", !0, e), c);
                return c
            })
        },
        "dojo/fx": function () {
            define("./_base/lang ./Evented ./_base/kernel ./_base/array ./aspect ./_base/fx ./dom ./dom-style ./dom-geometry ./ready require".split(" "),
                function (r, p, a, g, q, h, k, l, e, c, b) {
                    a.isAsync || c(0, function () {
                        b(["./fx/Toggler"])
                    });
                    a = a.fx = {};
                    c = {
                        _fire: function (a, b) {
                            this[a] && this[a].apply(this, b || []);
                            return this
                        }
                    };
                    var d = function (a) {
                        this._index = -1;
                        this._animations = a || [];
                        this._current = this._onAnimateCtx = this._onEndCtx = null;
                        this.duration = 0;
                        g.forEach(this._animations, function (a) {
                            a && ("undefined" != typeof a.duration && (this.duration += a.duration), a.delay && (this.duration += a.delay))
                        }, this)
                    };
                    d.prototype = new p;
                    r.extend(d, {
                        _onAnimate: function () {
                            this._fire("onAnimate",
                                arguments)
                        },
                        _onEnd: function () {
                            this._onAnimateCtx.remove();
                            this._onEndCtx.remove();
                            this._onAnimateCtx = this._onEndCtx = null;
                            this._index + 1 == this._animations.length ? this._fire("onEnd") : (this._current = this._animations[++this._index], this._onAnimateCtx = q.after(this._current, "onAnimate", r.hitch(this, "_onAnimate"), !0), this._onEndCtx = q.after(this._current, "onEnd", r.hitch(this, "_onEnd"), !0), this._current.play(0, !0))
                        },
                        play: function (a, b) {
                            this._current || (this._current = this._animations[this._index = 0]);
                            if (!b && "playing" ==
                                this._current.status()) return this;
                            var c = q.after(this._current, "beforeBegin", r.hitch(this, function () {
                                    this._fire("beforeBegin")
                                }), !0),
                                f = q.after(this._current, "onBegin", r.hitch(this, function (a) {
                                    this._fire("onBegin", arguments)
                                }), !0),
                                d = q.after(this._current, "onPlay", r.hitch(this, function (a) {
                                    this._fire("onPlay", arguments);
                                    c.remove();
                                    f.remove();
                                    d.remove()
                                }));
                            this._onAnimateCtx && this._onAnimateCtx.remove();
                            this._onAnimateCtx = q.after(this._current, "onAnimate", r.hitch(this, "_onAnimate"), !0);
                            this._onEndCtx &&
                                this._onEndCtx.remove();
                            this._onEndCtx = q.after(this._current, "onEnd", r.hitch(this, "_onEnd"), !0);
                            this._current.play.apply(this._current, arguments);
                            return this
                        },
                        pause: function () {
                            if (this._current) {
                                var a = q.after(this._current, "onPause", r.hitch(this, function (b) {
                                    this._fire("onPause", arguments);
                                    a.remove()
                                }), !0);
                                this._current.pause()
                            }
                            return this
                        },
                        gotoPercent: function (a, b) {
                            this.pause();
                            var c = this.duration * a;
                            this._current = null;
                            g.some(this._animations, function (a, b) {
                                if (c <= a.duration) return this._current = a, this._index =
                                    b, !0;
                                c -= a.duration;
                                return !1
                            }, this);
                            this._current && this._current.gotoPercent(c / this._current.duration);
                            b && this.play();
                            return this
                        },
                        stop: function (a) {
                            if (this._current) {
                                if (a) {
                                    for (; this._index + 1 < this._animations.length; ++this._index) this._animations[this._index].stop(!0);
                                    this._current = this._animations[this._index]
                                }
                                var b = q.after(this._current, "onStop", r.hitch(this, function (a) {
                                    this._fire("onStop", arguments);
                                    b.remove()
                                }), !0);
                                this._current.stop()
                            }
                            return this
                        },
                        status: function () {
                            return this._current ? this._current.status() :
                                "stopped"
                        },
                        destroy: function () {
                            this.stop();
                            this._onAnimateCtx && this._onAnimateCtx.remove();
                            this._onEndCtx && this._onEndCtx.remove()
                        }
                    });
                    r.extend(d, c);
                    a.chain = function (a) {
                        return new d(r.isArray(a) ? a : Array.prototype.slice.call(a, 0))
                    };
                    var m = function (a) {
                        this._animations = a || [];
                        this._connects = [];
                        this.duration = this._finished = 0;
                        g.forEach(a, function (a) {
                            var b = a.duration;
                            a.delay && (b += a.delay);
                            this.duration < b && (this.duration = b);
                            this._connects.push(q.after(a, "onEnd", r.hitch(this, "_onEnd"), !0))
                        }, this);
                        this._pseudoAnimation =
                            new h.Animation({
                                curve: [0, 1],
                                duration: this.duration
                            });
                        var b = this;
                        g.forEach("beforeBegin onBegin onPlay onAnimate onPause onStop onEnd".split(" "), function (a) {
                            b._connects.push(q.after(b._pseudoAnimation, a, function () {
                                b._fire(a, arguments)
                            }, !0))
                        })
                    };
                    r.extend(m, {
                        _doAction: function (a, b) {
                            g.forEach(this._animations, function (c) {
                                c[a].apply(c, b)
                            });
                            return this
                        },
                        _onEnd: function () {
                            ++this._finished > this._animations.length && this._fire("onEnd")
                        },
                        _call: function (a, b) {
                            var c = this._pseudoAnimation;
                            c[a].apply(c, b)
                        },
                        play: function (a,
                            b) {
                            this._finished = 0;
                            this._doAction("play", arguments);
                            this._call("play", arguments);
                            return this
                        },
                        pause: function () {
                            this._doAction("pause", arguments);
                            this._call("pause", arguments);
                            return this
                        },
                        gotoPercent: function (a, b) {
                            var c = this.duration * a;
                            g.forEach(this._animations, function (a) {
                                a.gotoPercent(a.duration < c ? 1 : c / a.duration, b)
                            });
                            this._call("gotoPercent", arguments);
                            return this
                        },
                        stop: function (a) {
                            this._doAction("stop", arguments);
                            this._call("stop", arguments);
                            return this
                        },
                        status: function () {
                            return this._pseudoAnimation.status()
                        },
                        destroy: function () {
                            this.stop();
                            g.forEach(this._connects, function (a) {
                                a.remove()
                            })
                        }
                    });
                    r.extend(m, c);
                    a.combine = function (a) {
                        return new m(r.isArray(a) ? a : Array.prototype.slice.call(a, 0))
                    };
                    a.wipeIn = function (a) {
                        var b = a.node = k.byId(a.node),
                            c = b.style,
                            f;
                        a = h.animateProperty(r.mixin({
                                properties: {
                                    height: {
                                        start: function () {
                                            f = c.overflow;
                                            c.overflow = "hidden";
                                            if ("hidden" == c.visibility || "none" == c.display) return c.height = "1px", c.display = "", c.visibility = "", 1;
                                            var a = l.get(b, "height");
                                            return Math.max(a, 1)
                                        },
                                        end: function () {
                                            return b.scrollHeight
                                        }
                                    }
                                }
                            },
                            a));
                        var d = function () {
                            c.height = "auto";
                            c.overflow = f
                        };
                        q.after(a, "onStop", d, !0);
                        q.after(a, "onEnd", d, !0);
                        return a
                    };
                    a.wipeOut = function (a) {
                        var b = (a.node = k.byId(a.node)).style,
                            c;
                        a = h.animateProperty(r.mixin({
                            properties: {
                                height: {
                                    end: 1
                                }
                            }
                        }, a));
                        q.after(a, "beforeBegin", function () {
                            c = b.overflow;
                            b.overflow = "hidden";
                            b.display = ""
                        }, !0);
                        var f = function () {
                            b.overflow = c;
                            b.height = "auto";
                            b.display = "none"
                        };
                        q.after(a, "onStop", f, !0);
                        q.after(a, "onEnd", f, !0);
                        return a
                    };
                    a.slideTo = function (a) {
                        var b = null,
                            c = null,
                            f = function (a) {
                                return function () {
                                    var f =
                                        l.getComputedStyle(a),
                                        d = f.position;
                                    b = "absolute" == d ? a.offsetTop : parseInt(f.top) || 0;
                                    c = "absolute" == d ? a.offsetLeft : parseInt(f.left) || 0;
                                    "absolute" != d && "relative" != d && (f = e.position(a, !0), b = f.y, c = f.x, a.style.position = "absolute", a.style.top = b + "px", a.style.left = c + "px")
                                }
                            }(a.node = k.byId(a.node));
                        f();
                        a = h.animateProperty(r.mixin({
                            properties: {
                                top: a.top || 0,
                                left: a.left || 0
                            }
                        }, a));
                        q.after(a, "beforeBegin", f, !0);
                        return a
                    };
                    return a
                })
        },
        "esri/deferredUtils": function () {
            define(["dojo/_base/lang", "dojo/has", "./kernel"], function (r,
                p, a) {
                var g = {
                    _dfdCanceller: function (a) {
                        a.canceled = !0;
                        var g = a._pendingDfd; - 1 === a.fired && (g && -1 === g.fired) && g.cancel();
                        a._pendingDfd = null
                    },
                    _fixDfd: function (a) {
                        var g = a.then;
                        a.then = function (a, l, e) {
                            if (a) {
                                var c = a;
                                a = function (a) {
                                    return a && a._argsArray ? c.apply(null, a) : c(a)
                                }
                            }
                            return g.call(this, a, l, e)
                        };
                        return a
                    },
                    _resDfd: function (a, g, k) {
                        var l = g.length;
                        1 === l ? k ? a.errback(g[0]) : a.callback(g[0]) : 1 < l ? (g._argsArray = !0, a.callback(g)) : a.callback()
                    }
                };
                p("extend-esri") && r.mixin(a, g);
                return g
            })
        },
        "esri/tileUtils": function () {
            define(["dojo/_base/array",
"dojo/has", "./kernel", "./geometry/Point", "./geometry/Extent"], function (r, p, a, g, q) {
                var h = {
                    _addFrameInfo: function (a, g) {
                        var e, c, b = 2 * g.origin[1],
                            d = g.origin[0],
                            m = a.origin.x,
                            t = a.width,
                            s;
                        r.forEach(a.lods, function (a) {
                            e = Math.round(b / a.resolution);
                            c = Math.ceil(e / t);
                            s = Math.floor((d - m) / (t * a.resolution));
                            a._frameInfo || (a._frameInfo = [c, s, s + c - 1, e])
                        })
                    },
                    getContainingTileCoords: function (a, g, e) {
                        var c = a.origin;
                        e = e.resolution;
                        return {
                            row: Math.floor((c.y - g.y) / (a.height * e)),
                            col: Math.floor((g.x - c.x) / (a.width * e))
                        }
                    },
                    getCandidateTileInfo: function (a,
                        l, e) {
                        var c;
                        c = a.width;
                        for (var b = a.height, d = e.xmax - e.xmin, m = e.ymax - e.ymin, t = a.__tileInfo === l, s = t ? a.getMinZoom() : -1, t = t ? a.getMaxZoom() : -1, n = -1, f = l.lods, y = Math.abs, u, w, h, t = -1 < t ? t : f.length - 1, s = -1 < s ? s : 0; s <= t; s++)
                            if (w = f[s])
                                if (h = d > m ? y(m - b * w.resolution) : y(d - c * w.resolution), 0 > n || h <= n) u = w, n = h;
                                else break;
                        c = u;
                        u = c.resolution;
                        b = (e.xmin + e.xmax) / 2;
                        d = (e.ymin + e.ymax) / 2;
                        m = a.width / 2 * u;
                        u *= a.height / 2;
                        b = new q(b - m, d - u, b + m, d + u, e.spatialReference);
                        e = new g(b.xmin, b.ymax, e.spatialReference);
                        t = c.resolution;
                        m = l.width;
                        d = l.height;
                        l = l.origin;
                        a = a.__visibleDelta;
                        u = Math.floor;
                        f = m * t;
                        y = d * t;
                        t = u((l.y - e.y) / y);
                        n = u((e.x - l.x) / f);
                        s = l.y - t * y;
                        l = u(Math.abs((e.x - (l.x + n * f)) * m / f)) + a.x;
                        a = u(Math.abs((e.y - s) * d / y)) + a.y;
                        return {
                            tile: {
                                point: e,
                                coords: {
                                    row: t,
                                    col: n
                                },
                                offsets: {
                                    x: l,
                                    y: a
                                }
                            },
                            lod: c,
                            extent: b
                        }
                    },
                    getTileExtent: function (a, g, e, c) {
                        var b = a.origin;
                        g = a.lods[g].resolution;
                        var d = a.width,
                            m = a.height;
                        return new q(c * g * d + b.x, b.y - (e + 1) * g * m, (c + 1) * g * d + b.x, b.y - e * g * m, a.spatialReference)
                    }
                };
                p("extend-esri") && (a.TileUtils = h);
                return h
            })
        },
        "esri/geometry/Point": function () {
            define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ../srUtils".split(" "),
                function (r, p, a, g, q, h, k, l) {
                    function e(a, f) {
                        89.99999 < f ? f = 89.99999 : -89.99999 > f && (f = -89.99999);
                        var c = f * t;
                        return [a * t * b, b / 2 * Math.log((1 + Math.sin(c)) / (1 - Math.sin(c)))]
                    }

                    function c(a, f, c) {
                        a = a / b * m;
                        if (c) return f = d / 2 - 2 * Math.atan(Math.exp(-1 * f / b)), [a, f * m];
                        c = a - 360 * Math.floor((a + 180) / 360);
                        f = d / 2 - 2 * Math.atan(Math.exp(-1 * f / b));
                        return [c, f * m]
                    }
                    var b = 6378137,
                        d = 3.141592653589793,
                        m = 57.29577951308232,
                        t = 0.017453292519943,
                        s = {
                            type: "point",
                            x: 0,
                            y: 0
                        };
                    r = r(k, {
                        declaredClass: "esri.geometry.Point",
                        constructor: function (a, b, c) {
                            p.mixin(this,
                                s);
                            p.isArray(a) ? (this.x = a[0], this.y = a[1], this.spatialReference = b) : p.isObject(a) ? (p.mixin(this, a), q.isDefined(this.latitude) && (this.y = this.latitude), q.isDefined(this.longitude) && (this.x = this.longitude), this.spatialReference && (this.spatialReference = l.createSpatialReference(this.spatialReference))) : (this.x = a, this.y = b, this.spatialReference = c);
                            this.verifySR()
                        },
                        offset: function (a, b) {
                            return new this.constructor(this.x + a, this.y + b, this.spatialReference)
                        },
                        setX: function (a) {
                            this.x = a;
                            this.clearCache();
                            return this
                        },
                        setY: function (a) {
                            this.y = a;
                            this.clearCache();
                            return this
                        },
                        setLongitude: function (a) {
                            var b = this.spatialReference;
                            b && (b._isWebMercator() ? this.setX(e(a, this.y)[0]) : 4326 === b.wkid && this.setX(a));
                            return this
                        },
                        setLatitude: function (a) {
                            var b = this.spatialReference;
                            b && (b._isWebMercator() ? this.setY(e(this.x, a)[1]) : 4326 === b.wkid && this.setY(a));
                            return this
                        },
                        getLongitude: function () {
                            var a = this.spatialReference,
                                b;
                            a && (a._isWebMercator() ? b = c(this.x, this.y)[0] : 4326 === a.wkid && (b = this.x));
                            return b
                        },
                        getLatitude: function () {
                            var a =
                                this.spatialReference,
                                b;
                            a && (a._isWebMercator() ? b = c(this.x, this.y)[1] : 4326 === a.wkid && (b = this.y));
                            return b
                        },
                        update: function (a, b) {
                            this.x = a;
                            this.y = b;
                            this.clearCache();
                            return this
                        },
                        normalize: function () {
                            var a = this.x,
                                b = this.spatialReference;
                            if (b) {
                                var c = b._getInfo();
                                if (c) {
                                    var d = c.valid[0],
                                        e = c.valid[1],
                                        c = 2 * e;
                                    a > e ? (d = Math.ceil(Math.abs(a - e) / c), a -= d * c) : a < d && (d = Math.ceil(Math.abs(a - d) / c), a += d * c)
                                }
                            }
                            return new this.constructor(a, this.y, b)
                        },
                        toJson: function () {
                            var a = {
                                    x: this.x,
                                    y: this.y
                                },
                                b = this.spatialReference;
                            b && (a.spatialReference =
                                b.toJson());
                            return a
                        }
                    });
                    r.lngLatToXY = e;
                    r.xyToLngLat = c;
                    r.defaultProps = s;
                    a("extend-esri") && (p.setObject("geometry.Point", r, g), g.geometry.defaultPoint = s);
                    return r
                })
        },
        "esri/SpatialReference": function () {
            define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ./kernel ./lang".split(" "), function (r, p, a, g, q, h) {
                var k = [-2.0037508342788905E7, 2.0037508342788905E7],
                    l = [-2.0037508342787E7, 2.0037508342787E7];
                r = r(null, {
                    declaredClass: "esri.SpatialReference",
                    constructor: function (e) {
                        e && (a.isObject(e) ? a.mixin(this,
                            e) : a.isString(e) ? this.wkt = e : this.wkid = e)
                    },
                    wkid: null,
                    wkt: null,
                    _info: {
                        102113: {
                            wkTemplate: 'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',
                            valid: k,
                            origin: l,
                            dx: 1E-5
                        },
                        102100: {
                            wkTemplate: 'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',
                            valid: k,
                            origin: l,
                            dx: 1E-5
                        },
                        3785: {
                            wkTemplate: 'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',
                            valid: k,
                            origin: l,
                            dx: 1E-5
                        },
                        3857: {
                            wkTemplate: 'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',
                            valid: k,
                            origin: l,
                            dx: 1E-5
                        },
                        4326: {
                            wkTemplate: 'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",${Central_Meridian}],UNIT["Degree",0.0174532925199433]]',
                            altTemplate: 'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],UNIT["Degrees",111319.491]]',
                            valid: [-180, 180],
                            origin: [-180, 180],
                            dx: 1E-5
                        }
                    },
                    _isWebMercator: function () {
                        return -1 !== p.indexOf([102113, 102100, 3857, 3785], this.wkid)
                    },
                    _isWrappable: function () {
                        return -1 !== p.indexOf([102113, 102100, 3857, 3785, 4326], this.wkid)
                    },
                    _getInfo: function () {
                        return this.wkid ? this._info[this.wkid] : null
                    },
                    _canProject: function (a) {
                        var c = !1;
                        a && (c = this.isWebMercator() && 4326 === a.wkid || a.isWebMercator() && 4326 === this.wkid);
                        return c
                    },
                    isWebMercator: function () {
                        return this._isWebMercator()
                    },
                    equals: function (a) {
                        var c = !1;
                        a && (this === a &&
                            (c = !0), this.wkid || a.wkid ? c = this.wkid === a.wkid || this.isWebMercator() && a.isWebMercator() || this.wkid === a.latestWkid || a.wkid === this.latestWkid : this.wkt && a.wkt && (c = this.wkt.toUpperCase() === a.wkt.toUpperCase()));
                        return c
                    },
                    toJson: function () {
                        var a = null,
                            c = h.isDefined;
                        c(this.wkid) ? a = {
                            wkid: this.wkid
                        } : c(this.wkt) && (a = {
                            wkt: this.wkt
                        });
                        a && c(this.latestWkid) && (a.latestWkid = this.latestWkid);
                        return a
                    }
                });
                g("extend-esri") && (q.SpatialReference = r);
                return r
            })
        },
        "esri/geometry/Geometry": function () {
            define(["dojo/_base/declare",
"dojo/_base/lang", "dojo/has", "../kernel", "../SpatialReference"], function (r, p, a, g, q) {
                r = r(null, {
                    declaredClass: "esri.geometry.Geometry",
                    spatialReference: null,
                    type: null,
                    cache: void 0,
                    setSpatialReference: function (a) {
                        this.spatialReference = a;
                        return this
                    },
                    verifySR: function () {
                        this.spatialReference || this.setSpatialReference(new q(4326))
                    },
                    getExtent: function () {
                        return null
                    },
                    clearCache: function () {
                        this.cache = void 0
                    },
                    getCacheValue: function (a) {
                        return this.cache && this.cache[a]
                    },
                    setCacheValue: function (a, g) {
                        this.cache ||
                            (this.cache = {});
                        this.cache[a] = g
                    }
                });
                a("extend-esri") && p.setObject("geometry.Geometry", r, g);
                return r
            })
        },
        "esri/srUtils": function () {
            define(["./SpatialReference", "./ImageSpatialReference", "./kernel", "./sniff", "dojo/_base/lang"], function (r, p, a, g, q) {
                function h(a) {
                    var e = !1;
                    if (a && (a.ics || a.icsid)) e = !0;
                    return e
                }
                var k = {
                    isICS: h,
                    createSpatialReference: function (a) {
                        var e = null;
                        a && (e = h(a) ? new p(a) : new r(a));
                        return e
                    }
                };
                g("extend-esri") && q.mixin(a, k);
                return k
            })
        },
        "esri/ImageSpatialReference": function () {
            define("dojo/_base/declare dojo/_base/lang dojo/has ./kernel ./lang ./SpatialReference".split(" "),
                function (r, p, a, g, q, h) {
                    r = r(h, {
                        declaredClass: "esri.ImageSpatialReference",
                        constructor: function (a) {
                            a && (p.isObject(a) && p.mixin(this, a), this.url || console.error("ImageSpatialReference: must provide image service URL."))
                        },
                        icsid: null,
                        ics: null,
                        _isWebMercator: function () {
                            return !1
                        },
                        _isWrappable: function () {
                            return !1
                        },
                        equals: function (a) {
                            var g = !1;
                            a && (this.icsid && a.icsid ? g = this.icsid === a.icsid : this.ics && a.ics && (g = this.ics === a.ics));
                            return g
                        },
                        toJson: function (a) {
                            var g = null,
                                e = q.isDefined;
                            a = e(a) ? a : !0;
                            e(this.icsid) ? g = {
                                icsid: this.icsid
                            } : e(this.ics) && (g = {
                                ics: this.ics
                            });
                            e(this.url) && (e(g) && a) && (g.url = this.url);
                            return g
                        }
                    });
                    a("extend-esri") && (g.ImageSpatialReference = r);
                    return r
                })
        },
        "esri/geometry/Extent": function () {
            define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./webMercatorUtils ./mathUtils ../srUtils".split(" "), function (r, p, a, g, q, h, k, l, e, c, b, d) {
                var m = {
                        type: "extent",
                        xmin: 0,
                        ymin: 0,
                        xmax: 0,
                        ymax: 0
                    },
                    t = r(l, {
                        declaredClass: "esri.geometry.Extent",
                        constructor: function (b, c, f, e, g) {
                            a.mixin(this, m);
                            a.isObject(b) ? (a.mixin(this, b), this.spatialReference && (this.spatialReference = d.createSpatialReference(this.spatialReference))) : this.update(b, c, f, e, g);
                            this.verifySR()
                        },
                        getWidth: function () {
                            return Math.abs(this.xmax - this.xmin)
                        },
                        getHeight: function () {
                            return Math.abs(this.ymax - this.ymin)
                        },
                        getCenter: function () {
                            return new e((this.xmin + this.xmax) / 2, (this.ymin + this.ymax) / 2, this.spatialReference)
                        },
                        centerAt: function (a) {
                            var b = this.getCenter(),
                                c = a.x - b.x;
                            a = a.y - b.y;
                            return new t(this.xmin + c, this.ymin + a, this.xmax + c, this.ymax + a, this.spatialReference)
                        },
                        update: function (a, b, c, d, e) {
                            this.xmin = a;
                            this.ymin = b;
                            this.xmax = c;
                            this.ymax = d;
                            this.spatialReference = e;
                            this.clearCache();
                            return this
                        },
                        offset: function (a, b) {
                            return new t(this.xmin + a, this.ymin + b, this.xmax + a, this.ymax + b, this.spatialReference)
                        },
                        expand: function (a) {
                            var b = (1 - a) / 2;
                            a = this.getWidth() * b;
                            b *= this.getHeight();
                            return new t(this.xmin + a, this.ymin + b, this.xmax - a, this.ymax - b, this.spatialReference)
                        },
                        intersects: function (a) {
                            if (!a) return !1;
                            var b = a.type,
                                f = this.spatialReference,
                                d = a.spatialReference;
                            f && (d && !f.equals(d) && f._canProject(d)) && (a = f.isWebMercator() ? c.geographicToWebMercator(a) : c.webMercatorToGeographic(a, !0));
                            switch (b) {
                            case "point":
                                return this.contains(a);
                            case "multipoint":
                                return this._intersectsMultipoint(a);
                            case "extent":
                                return this._intersectsExtent(a);
                            case "polygon":
                                return this._intersectsPolygon(a);
                            case "polyline":
                                return this._intersectsPolyline(a)
                            }
                        },
                        normalize: function () {
                            var b = this._normalize(!1, !0);
                            a.isArray(b) || (b = [b]);
                            return b
                        },
                        shiftCentralMeridian: function () {
                            return this._normalize(!0)
                        },
                        bisect: function () {
                            var a = this.spatialReference,
                                b = a && a._getInfo(),
                                c = [],
                                d = 0;
                            if (b && this._isOutOfBounds(b)) {
                                var e = this,
                                    d = e.xmin,
                                    m = e.ymin,
                                    g = e.ymax,
                                    h = b.valid[0],
                                    l = b.valid[1];
                                e.getWidth() > 2 * l && (e = e.getCenter(), e = new t(e.x - l, m, e.x + l, g, new k(a.toJson())));
                                var d = e.xmin - d,
                                    q = this._normalizeX(e.xmin, b),
                                    b = this._normalizeX(e.xmax, b);
                                q.frameId === b.frameId ? c.push(new t(q.x, m, b.x, g, new k(a.toJson()))) : c.push(new t(q.x, m, l, g, new k(a.toJson())), new t(h,
                                    m, b.x, g, new k(a.toJson())))
                            } else c.push(this.getExtent());
                            return {
                                extents: c,
                                marginLeft: d
                            }
                        },
                        _intersectsMultipoint: function (a) {
                            var b = a.points.length,
                                c;
                            for (c = 0; c < b; c++)
                                if (this.contains(a.getPoint(c))) return !0;
                            return !1
                        },
                        _intersectsExtent: function (a) {
                            var b, c, d, e, m = !1;
                            this.xmin <= a.xmin ? (b = a.xmin, this.xmax < b ? m = !0 : d = Math.min(this.xmax, a.xmax) - b) : (b = this.xmin, a.xmax < b ? m = !0 : d = Math.min(this.xmax, a.xmax) - b);
                            this.ymin <= a.ymin ? (c = a.ymin, this.ymax < c ? m = !0 : e = Math.min(this.ymax, a.ymax) - c) : (c = this.ymin, a.ymax < c ? m = !0 :
                                e = Math.min(this.ymax, a.ymax) - c);
                            return m ? null : new t(b, c, b + d, c + e, this.spatialReference)
                        },
                        _intersectsPolygon: function (a) {
                            var b = [this.xmin, this.ymax],
                                c = [this.xmax, this.ymax],
                                d = [this.xmin, this.ymin],
                                m = [this.xmax, this.ymin],
                                g = [b, c, d, m],
                                b = [[d, b], [b, c], [c, m], [m, d]],
                                d = a.rings,
                                m = d.length,
                                t, k = new e(0, 0, this.spatialReference);
                            t = g.length;
                            for (c = 0; c < t; c++)
                                if (k.update(g[c][0], g[c][1]), a.contains(k)) return !0;
                            k.setSpatialReference(a.spatialReference);
                            for (var h, l, c = 0; c < m; c++)
                                if (g = d[c], t = g.length) {
                                    h = g[0];
                                    k.update(h[0],
                                        h[1]);
                                    if (this.contains(k)) return !0;
                                    for (a = 1; a < t; a++) {
                                        l = g[a];
                                        k.update(l[0], l[1]);
                                        if (this.contains(k) || this._intersectsLine([h, l], b)) return !0;
                                        h = l
                                    }
                                }
                            return !1
                        },
                        _intersectsPolyline: function (a) {
                            var b = [[[this.xmin, this.ymin], [this.xmin, this.ymax]], [[this.xmin, this.ymax], [this.xmax, this.ymax]], [[this.xmax, this.ymax], [this.xmax, this.ymin]], [[this.xmax, this.ymin], [this.xmin, this.ymin]]],
                                c, d = a.paths,
                                m = d.length,
                                g, t, k, h, l = new e(0, 0, a.spatialReference);
                            for (a = 0; a < m; a++)
                                if (g = d[a], t = g.length) {
                                    k = g[0];
                                    l.update(k[0], k[1]);
                                    if (this.contains(l)) return !0;
                                    for (c = 1; c < t; c++) {
                                        h = g[c];
                                        l.update(h[0], h[1]);
                                        if (this.contains(l) || this._intersectsLine([k, h], b)) return !0;
                                        k = h
                                    }
                                }
                            return !1
                        },
                        _intersectsLine: function (a, c) {
                            var f = b._getLineIntersection2,
                                d, e = c.length;
                            for (d = 0; d < e; d++)
                                if (f(a, c[d])) return !0;
                            return !1
                        },
                        contains: function (a) {
                            if (!a) return !1;
                            var b = a.type;
                            if ("point" === b) {
                                var c = this.spatialReference,
                                    d = a.spatialReference,
                                    b = a.x;
                                a = a.y;
                                c && (d && !c.equals(d) && c._canProject(d)) && (a = c.isWebMercator() ? e.lngLatToXY(b, a) : e.xyToLngLat(b, a, !0), b = a[0],
                                    a = a[1]);
                                return b >= this.xmin && b <= this.xmax && a >= this.ymin && a <= this.ymax
                            }
                            return "extent" === b ? this._containsExtent(a) : !1
                        },
                        _containsExtent: function (a) {
                            var b = a.xmin,
                                c = a.ymin,
                                d = a.xmax,
                                m = a.ymax,
                                g = a.spatialReference;
                            a = new e(b, c, g);
                            b = new e(b, m, g);
                            m = new e(d, m, g);
                            c = new e(d, c, g);
                            return this.contains(a) && this.contains(b) && this.contains(m) && this.contains(c) ? !0 : !1
                        },
                        union: function (a) {
                            return new t(Math.min(this.xmin, a.xmin), Math.min(this.ymin, a.ymin), Math.max(this.xmax, a.xmax), Math.max(this.ymax, a.ymax), this.spatialReference)
                        },
                        getExtent: function () {
                            var a = this.spatialReference;
                            return new t(this.xmin, this.ymin, this.xmax, this.ymax, a && new k(a.toJson()))
                        },
                        _shiftCM: function (a) {
                            var b = this.getCacheValue("_shifted");
                            if (!b) {
                                var b = new t(this.toJson()),
                                    f = b.spatialReference;
                                if (a = a || f._getInfo()) {
                                    var d = this._getCM(a);
                                    if (d) {
                                        var e = f._isWebMercator() ? c.webMercatorToGeographic(d) : d;
                                        b.xmin -= d.x;
                                        b.xmax -= d.x;
                                        f._isWebMercator() || (e.x = this._normalizeX(e.x, a).x);
                                        b.setSpatialReference(new k(h.substitute({
                                                Central_Meridian: e.x
                                            }, 4326 === f.wkid ? a.altTemplate :
                                            a.wkTemplate)))
                                    }
                                }
                                this.setCacheValue("_shifted", b)
                            }
                            return b
                        },
                        _getCM: function (a) {
                            var b;
                            this._isOutOfBounds(a) && (b = this.getCenter());
                            return b
                        },
                        _isOutOfBounds: function (a) {
                            var b = a.valid[0];
                            a = a.valid[1];
                            var c = this.xmin,
                                d = this.xmax;
                            return !(c >= b && c <= a && d >= b && d <= a)
                        },
                        _normalize: function (a, b, c) {
                            var d = new t(this.toJson()),
                                e = d.spatialReference;
                            if (e && (c = c || e._getInfo())) {
                                var m = p.map(this._getParts(c), function (a) {
                                    return a.extent
                                });
                                return 2 < m.length ? a ? this._shiftCM(c) : d.update(c.valid[0], d.ymin, c.valid[1], d.ymax,
                                    e) : 2 === m.length ? a ? this._shiftCM(c) : b ? m : {
                                    rings: p.map(m, function (a) {
                                        return [[a.xmin, a.ymin], [a.xmin, a.ymax], [a.xmax, a.ymax], [a.xmax, a.ymin], [a.xmin, a.ymin]]
                                    }),
                                    spatialReference: e
                                } : m[0] || d
                            }
                            return d
                        },
                        _getParts: function (a) {
                            var b = this.getCacheValue("_parts");
                            if (!b) {
                                var b = [],
                                    c = this.xmin,
                                    d = this.xmax,
                                    e = this.ymin,
                                    m = this.ymax,
                                    g = this.spatialReference,
                                    k = this.getWidth(),
                                    h = c,
                                    l = d,
                                    q = 0,
                                    p = 0,
                                    r, F;
                                a = a || g._getInfo();
                                r = a.valid[0];
                                F = a.valid[1];
                                p = this._normalizeX(c, a);
                                c = p.x;
                                q = p.frameId;
                                p = this._normalizeX(d, a);
                                d = p.x;
                                p = p.frameId;
                                a = c === d && 0 < k;
                                if (k > 2 * F) {
                                    k = new t(h < l ? c : d, e, F, m, g);
                                    c = new t(r, e, h < l ? d : c, m, g);
                                    F = new t(0, e, F, m, g);
                                    e = new t(r, e, 0, m, g);
                                    g = [];
                                    r = [];
                                    k.contains(F) && g.push(q);
                                    k.contains(e) && r.push(q);
                                    c.contains(F) && g.push(p);
                                    c.contains(e) && r.push(p);
                                    for (m = q + 1; m < p; m++) g.push(m), r.push(m);
                                    b.push({
                                        extent: k,
                                        frameIds: [q]
                                    }, {
                                        extent: c,
                                        frameIds: [p]
                                    }, {
                                        extent: F,
                                        frameIds: g
                                    }, {
                                        extent: e,
                                        frameIds: r
                                    })
                                } else c > d || a ? b.push({
                                    extent: new t(c, e, F, m, g),
                                    frameIds: [q]
                                }, {
                                    extent: new t(r, e, d, m, g),
                                    frameIds: [p]
                                }) : b.push({
                                    extent: new t(c, e, d, m, g),
                                    frameIds: [q]
                                });
                                this.setCacheValue("_parts", b)
                            }
                            return b
                        },
                        _normalizeX: function (a, b) {
                            var c = 0,
                                d = b.valid[0],
                                e = b.valid[1],
                                m = 2 * e;
                            a > e ? (c = Math.ceil(Math.abs(a - e) / m), a -= c * m) : a < d && (c = Math.ceil(Math.abs(a - d) / m), a += c * m, c = -c);
                            return {
                                x: a,
                                frameId: c
                            }
                        },
                        toJson: function () {
                            var a = {
                                    xmin: this.xmin,
                                    ymin: this.ymin,
                                    xmax: this.xmax,
                                    ymax: this.ymax
                                },
                                b = this.spatialReference;
                            b && (a.spatialReference = b.toJson());
                            return a
                        }
                    });
                t.defaultProps = m;
                g("extend-esri") && (a.setObject("geometry.Extent", t, q), q.geometry.defaultExtent = m);
                return t
            })
        },
        "esri/geometry/webMercatorUtils": function () {
            define("dojo/_base/array dojo/_base/lang dojo/has ../kernel ../SpatialReference ./Point".split(" "),
                function (r, p, a, g, q, h) {
                    function k(a, b, d, e) {
                        if ("point" === a.type) {
                            var g = b(a.x, a.y, e);
                            return new a.constructor(g[0], g[1], new q(d))
                        }
                        if ("extent" === a.type) {
                            var g = b(a.xmin, a.ymin, e),
                                s = b(a.xmax, a.ymax, e);
                            return new a.constructor(g[0], g[1], s[0], s[1], new q(d))
                        }
                        if ("polyline" === a.type || "polygon" === a.type) {
                            var g = "polyline" === a.type,
                                n = [],
                                f;
                            r.forEach(g ? a.paths : a.rings, function (a) {
                                n.push(f = []);
                                r.forEach(a, function (a) {
                                    f.push(b(a[0], a[1], e))
                                })
                            });
                            return g ? new a.constructor({
                                paths: n,
                                spatialReference: new q(d)
                            }) : new a.constructor({
                                rings: n,
                                spatialReference: new q(d)
                            })
                        }
                        if ("multipoint" === a.type) {
                            var k = [];
                            r.forEach(a.points, function (a) {
                                k.push(b(a[0], a[1], e))
                            });
                            return new a.constructor({
                                points: k,
                                spatialReference: new q(d)
                            })
                        }
                    }

                    function l(a, b) {
                        var d = a && (null != a.wkid ? a : a.spatialReference),
                            e = b && (null != b.wkid ? b : b.spatialReference);
                        return !d || !e ? !1 : e.equals(d) ? !0 : e._canProject(d)
                    }
                    var e = {
                        canProject: l,
                        project: function (a, b) {
                            var d = a && a.spatialReference,
                                e = b && (null != b.wkid ? b : b.spatialReference);
                            d && e ? d.equals(e) ? a = new a.constructor(a.toJson()) : l(d, e) ? e.isWebMercator() ?
                                a = k(a, h.lngLatToXY, {
                                    wkid: 102100
                                }) : 4326 === e.wkid && (a = k(a, h.xyToLngLat, {
                                    wkid: 4326
                                })) : a = null : a = null;
                            return a
                        },
                        lngLatToXY: h.lngLatToXY,
                        xyToLngLat: h.xyToLngLat,
                        geographicToWebMercator: function (a) {
                            return k(a, h.lngLatToXY, {
                                wkid: 102100
                            })
                        },
                        webMercatorToGeographic: function (a, b) {
                            return k(a, h.xyToLngLat, {
                                wkid: 4326
                            }, b)
                        }
                    };
                    a("extend-esri") && p.mixin(p.getObject("geometry", !0, g), e);
                    return e
                })
        },
        "esri/geometry/mathUtils": function () {
            define(["dojo/_base/lang", "dojo/has", "../kernel", "./Point"], function (r, p, a, g) {
                function q(a,
                    c, b) {
                    return a instanceof g ? new g(a.x + b * (c.x - a.x), a.y + b * (c.y - a.y)) : [a[0] + b * (c[0] - a[0]), a[1] + b * (c[1] - a[1])]
                }

                function h(a, c) {
                    return 1E-8 > Math.abs(a - c)
                }

                function k(a, c, b, d) {
                    var m, g = h(a[0], c[0]) ? 1E10 : (a[1] - c[1]) / (a[0] - c[0]),
                        s = h(b[0], d[0]) ? 1E10 : (b[1] - d[1]) / (b[0] - d[0]),
                        n = a[1] - g * a[0],
                        f = b[1] - s * b[0];
                    if (h(g, s)) {
                        if (h(n, f)) {
                            if (h(a[0], c[0]))
                                if (Math.min(a[1], c[1]) < Math.max(b[1], d[1]) || Math.max(a[1], c[1]) > Math.min(b[1], d[1])) a = (a[1] + c[1] + b[1] + d[1] - Math.min(a[1], c[1], b[1], d[1]) - Math.max(a[1], c[1], b[1], d[1])) / 2, m = (a -
                                    n) / g;
                                else return null;
                            else if (Math.min(a[0], c[0]) < Math.max(b[0], d[0]) || Math.max(a[0], c[0]) > Math.min(b[0], d[0])) m = (a[0] + c[0] + b[0] + d[0] - Math.min(a[0], c[0], b[0], d[0]) - Math.max(a[0], c[0], b[0], d[0])) / 2, a = g * m + n;
                            else return null;
                            return [m, a]
                        }
                        return null
                    }
                    h(g, 1E10) ? (m = a[0], a = s * m + f) : h(s, 1E10) ? (m = b[0], a = g * m + n) : (m = -(n - f) / (g - s), a = a[1] === c[1] ? a[1] : b[1] === d[1] ? b[1] : g * m + n);
                    return [m, a]
                }
                var l = {
                    getLength: function (a, c) {
                        var b = c.x - a.x,
                            d = c.y - a.y;
                        return Math.sqrt(b * b + d * d)
                    },
                    _getLength: function (a, c) {
                        var b = c[0] - a[0],
                            d = c[1] -
                            a[1];
                        return Math.sqrt(b * b + d * d)
                    },
                    getPointOnLine: q,
                    getMidpoint: function (a, c) {
                        return q(a, c, 0.5)
                    },
                    _equals: h,
                    _getLineIntersection: k,
                    getLineIntersection: function (a, c, b, d, m) {
                        (a = k([a.x, a.y], [c.x, c.y], [b.x, b.y], [d.x, d.y])) && (a = new g(a[0], a[1], m));
                        return a
                    },
                    _getLineIntersection2: function (a, c) {
                        var b = a[0],
                            d = a[1],
                            m = c[0],
                            g = c[1],
                            s = b[0],
                            b = b[1],
                            n = d[0],
                            d = d[1],
                            f = m[0],
                            k = m[1],
                            m = g[0] - f,
                            f = s - f,
                            u = n - s,
                            g = g[1] - k,
                            k = b - k,
                            h = d - b,
                            l = g * u - m * h;
                        if (0 === l) return !1;
                        m = (m * k - g * f) / l;
                        f = (u * k - h * f) / l;
                        return 0 <= m && 1 >= m && 0 <= f && 1 >= f ? [s + m * (n - s), b + m *
                            (d - b)] : !1
                    },
                    _pointLineDistance: function (a, c) {
                        var b = c[0],
                            d = c[1],
                            m = b[0],
                            g = b[1],
                            b = a[0],
                            s = a[1],
                            n = d[0] - m,
                            f = d[1] - g,
                            k = b - m,
                            u = s - g,
                            d = Math.sqrt,
                            h = Math.pow,
                            l = d(h(n, 2) + h(f, 2)),
                            k = (k * n + u * f) / (l * l),
                            g = g + k * f;
                        return d(h(b - (m + k * n), 2) + h(s - g, 2))
                    }
                };
                p("extend-esri") && r.mixin(r.getObject("geometry", !0, a), l);
                return l
            })
        },
        "esri/urlUtils": function () {
            define("dojo/_base/lang dojo/_base/array dojo/_base/url dojo/io-query ./kernel ./lang ./config ./sniff dojo/i18n!./nls/jsapi".split(" "), function (r, p, a, g, q, h, k, l, e) {
                var c = function () {
                        return this
                    }(),
                    b = {},
                    d = k.defaults.io,
                    m = /^[a-z][a-z0-9\+\-\.]*:/i,
                    t = /^\s*http:/i;
                b.isHTTP = function (a) {
                    var b = c.location.protocol;
                    return null == a ? "http:" === b || "https:" === b : a ? "https:" === b : "http:" === b
                };
                b.getProtocolForWebResource = function (a) {
                    return b.isHTTP() ? c.location.protocol : a ? "https:" : "http:"
                };
                b.urlToObject = function (b) {
                    var c = {},
                        f = new a(b),
                        d = b.indexOf("?");
                    null === f.query ? c = {
                        path: b,
                        query: null
                    } : (c.path = b.substring(0, d), c.query = g.queryToObject(f.query));
                    f.fragment && (c.hash = f.fragment, null === f.query && (c.path = c.path.substring(0,
                        c.path.length - (f.fragment.length + 1))));
                    return c
                };
                b.getProxyUrl = function (a, n) {
                    var f = r.isString(a) ? 0 === r.trim(a).toLowerCase().indexOf("https:") : a,
                        m = d.proxyUrl,
                        g, t, k = e.io.proxyNotSet;
                    if (r.isString(a) && (t = b.getProxyRule(a))) m = t.proxyUrl;
                    if (!m) throw console.log(k), Error(k);
                    f && (!1 !== n && 0 !== c.location.href.toLowerCase().indexOf("https:")) && (f = m, 0 !== f.toLowerCase().indexOf("http") && (f = b.getAbsoluteUrl(f)), f = f.replace(/^http:/i, "https:"), b.canUseXhr(f) && (m = f, g = 1));
                    m = b.urlToObject(m);
                    m._xo = g;
                    return m
                };
                b.addProxy =
                    function (a) {
                        var c = b.getProxyRule(a),
                            f;
                        c ? f = b.urlToObject(c.proxyUrl) : d.alwaysUseProxy && (f = b.getProxyUrl());
                        f && (c = b.urlToObject(a), a = f.path + "?" + c.path, (f = g.objectToQuery(r.mixin(f.query || {}, c.query))) && (a += "?" + f));
                        return a
                    };
                b.addProxyRule = function (a) {
                    var c = a.urlPrefix = b.urlToObject(a.urlPrefix).path.replace(/([^\/])$/, "$1/").replace(/^https?:\/\//ig, "").toLowerCase(),
                        f = d.proxyRules,
                        e, m = f.length,
                        g, t = m;
                    for (e = 0; e < m; e++)
                        if (g = f[e].urlPrefix, 0 === c.indexOf(g)) {
                            if (c.length === g) return -1;
                            t = e;
                            break
                        } else 0 === g.indexOf(c) &&
                            (t = e + 1);
                    f.splice(t, 0, a);
                    return t
                };
                b.getProxyRule = function (a) {
                    var c = d.proxyRules,
                        f = c.length,
                        e = b.urlToObject(a).path.replace(/([^\/])$/, "$1/").replace(/^https?:\/\//ig, "").toLowerCase(),
                        m;
                    for (a = 0; a < f; a++)
                        if (0 === e.indexOf(c[a].urlPrefix)) {
                            m = c[a];
                            break
                        }
                    return m
                };
                b.hasSameOrigin = function (b, d, f) {
                    b = b.toLowerCase();
                    d = d.toLowerCase();
                    var e = c.location.href.toLowerCase();
                    b = 0 === b.indexOf("http") ? new a(b) : e = new a(e);
                    d = 0 === d.indexOf("http") ? new a(d) : r.isString(e) ? new a(e) : e;
                    return (f || b.scheme === d.scheme) && b.host ===
                        d.host && b.port === d.port
                };
                b.canUseXhr = function (a, c) {
                    var f = l("esri-phonegap") ? !0 : !1,
                        e = b.hasSameOrigin,
                        m = d.corsEnabledServers,
                        g, t = -1;
                    !f && (l("esri-cors") && m && m.length) && (f = p.some(m, function (b, c) {
                        var f = b && "object" === typeof b ? b.host : b;
                        return f && (g = 0 !== r.trim(f).toLowerCase().indexOf("http"), e(a, g ? "http://" + f : f) || g && e(a, "https://" + f)) ? (t = c, !0) : !1
                    }));
                    return c ? t : f
                };
                b.getAbsoluteUrl = function (a) {
                    var d = b.getProtocolForWebResource();
                    return r.isString(a) && !m.test(a) ? 0 === a.indexOf("//") ? d + a : 0 === a.indexOf("/") ? d +
                        "//" + c.location.host + a : q._appBaseUrl + a : a
                };
                b.fixUrl = function (a) {
                    a = b.getAbsoluteUrl(a);
                    a = b.upgradeToHTTPS(a);
                    return a = a.replace(/^(https?:\/\/)(arcgis\.com)/i, "$1www.$2")
                };
                b.normalize = function (a) {
                    return b.fixUrl(a)
                };
                b.upgradeToHTTPS = function (a) {
                    var d = k.defaults.io.httpsDomains,
                        f = b.isHTTP(!1),
                        e = b.isHTTP(!0);
                    if (!t.test(a) || f) return a;
                    var f = a.indexOf("/", 7),
                        f = -1 === f ? a : a.slice(0, f),
                        m = !1;
                    if (e && c.location && h.endsWith(f, c.location.host)) m = !0;
                    else if (d)
                        for (e = 0; e < d.length; e++)
                            if (h.endsWith(f, d[e])) {
                                m = !0;
                                break
                            }
                    m &&
                        (a = a.replace(t, "https:"));
                    return a
                };
                l("extend-esri") && (r.mixin(q, b), q._getProxyUrl = b.getProxyUrl, q._getProxiedUrl = b.addProxy, q._hasSameOrigin = b.hasSameOrigin, q._canDoXOXHR = b.canUseXhr, q._getAbsoluteUrl = b.getAbsoluteUrl, q.fixUrl = b.fixUrl);
                return b
            })
        },
        "esri/PluginTarget": function () {
            define("require dojo/aspect dojo/_base/array dojo/_base/lang dojo/Deferred dojo/when".split(" "), function (r, p, a, g, q, h) {
                function k() {
                    p.after(this.constructor._meta, "ctor", this._pluginsHandler, !0);
                    this._plugins = {}
                }
                k.prototype = {
                    addPlugin: function (a, e) {
                        var c = this,
                            b = this._plugins,
                            d = new q;
                        try {
                            r([a], function (m) {
                                a in b ? d.resolve({
                                    id: b[a].declaredId || a.replace(/\//g, ".")
                                }) : (b[a] = m, h(m.add(c, e), function () {
                                    var b = {
                                        id: m.declaredId || a.replace(/\//g, ".")
                                    };
                                    c.emit("plugin-add", b);
                                    d.resolve(b)
                                }, function (a) {
                                    d.reject(a)
                                }))
                            })
                        } catch (m) {
                            d.reject(m)
                        }
                        return d.promise
                    },
                    removePlugin: function (a) {
                        if (a in this._plugins) {
                            var e = this._plugins[a];
                            e.remove(this);
                            delete this._plugins[a];
                            this.emit("plugin-remove", {
                                id: e.declaredId || a.replace(/\//g, ".")
                            })
                        }
                    },
                    _pluginsHandler: function () {
                        var g = this;
                        a.some(arguments, function (a) {
                            if (a && a.plugins && a.plugins instanceof Array) {
                                a = a.plugins;
                                var c, b, d;
                                for (d = 0; d < a.length; d++) c = a[d], b = c instanceof Object ? c.id : c, g.addPlugin(b, c.options);
                                return !0
                            }
                        })
                    }
                };
                return k
            })
        },
        "esri/arcade/Dictionary": function () {
            define(["require", "exports", "./languageUtils", "../geometry/Geometry", "./ImmutableArray"], function (r, p, a, g, q) {
                return function () {
                    function h(a) {
                        this.attributes = null;
                        this.plain = !1;
                        this.immutable = !0;
                        this.attributes = a instanceof
                        h ? a.attributes : void 0 === a ? {} : null === a ? {} : a
                    }
                    h.prototype.field = function (a) {
                        var g = a.toLowerCase();
                        a = this.attributes[a];
                        if (void 0 !== a) return a;
                        for (var e in this.attributes)
                            if (e.toLowerCase() === g) return this.attributes[e];
                        throw Error("Field not Found");
                    };
                    h.prototype.setField = function (a, g) {
                        if (this.immutable) throw Error("Dictionary is Immutable");
                        var e = a.toLowerCase();
                        if (void 0 === this.attributes[a])
                            for (var c in this.attributes)
                                if (c.toLowerCase() === e) {
                                    this.attributes[c] = g;
                                    return
                                }
                        this.attributes[a] = g
                    };
                    h.prototype.hasField =
                        function (a) {
                            var g = a.toLowerCase();
                            if (void 0 !== this.attributes[a]) return !0;
                            for (var e in this.attributes)
                                if (e.toLowerCase() === g) return !0;
                            return !1
                        };
                    h.prototype.keys = function () {
                        var a = [],
                            g;
                        for (g in this.attributes) a.push(g);
                        return a = a.sort()
                    };
                    h.prototype.castToText = function () {
                        var k = "",
                            h;
                        for (h in this.attributes) {
                            "" !== k && (k += ",");
                            var e = this.attributes[h];
                            null != e && (a.isBoolean(e) || a.isNumber(e) || a.isString(e) ? k += JSON.stringify(h) + ":" + JSON.stringify(e) : e instanceof g ? k += JSON.stringify(h) + ":" + a.toStringExplicit(e) :
                                e instanceof q ? k += JSON.stringify(h) + ":" + a.toStringExplicit(e) : e instanceof Array ? k += JSON.stringify(h) + ":" + a.toStringExplicit(e) : e instanceof Date ? k += JSON.stringify(h) + ":" + JSON.stringify(e) : null !== e && "object" === typeof e && void 0 !== e.castToText && (k += JSON.stringify(h) + ":" + e.castToText()))
                        }
                        return "{" + k + "}"
                    };
                    return h
                }()
            })
        },
        "esri/arcade/languageUtils": function () {
            define("require exports ../geometry/Geometry ../moment dojo/number ./ImmutableArray ../kernel ./ImmutablePointArray ./ImmutablePathArray dojo/_base/array ../geometry/Point ./FunctionWrapper".split(" "),
                function (r, p, a, g, q, h, k, l, e, c, b, d) {
                    function m(a, b, c) {
                        if ("" === b || null === b || void 0 === b || b === c || b === c) return a;
                        do a = a.replace(b, c); while (-1 !== a.indexOf(b));
                        return a
                    }

                    function t(a) {
                        return a instanceof R || a instanceof d || a instanceof G
                    }

                    function s(a) {
                        return "string" === typeof a || a instanceof String
                    }

                    function n(a) {
                        return "boolean" === typeof a
                    }

                    function f(a) {
                        return "number" === typeof a
                    }

                    function y(a) {
                        return a instanceof Array
                    }

                    function u(a) {
                        return a instanceof Date
                    }

                    function w(a, b) {
                        if (!1 === isNaN(a)) {
                            if (void 0 === b || null ===
                                b || "" === b) return a.toString();
                            b = m(b, "\u2030", "");
                            b = m(b, "\u00a4", "");
                            return q.format(a, {
                                pattern: b
                            })
                        }
                        return a.toString()
                    }

                    function C(a, b) {
                        var c = g(a);
                        return void 0 === b || null === b || "" === b ? c.format() : c.format(x(b))
                    }

                    function x(a) {
                        return a.replace(/(LTS)|L|l/g, function (a) {
                            return "[" + a + "]"
                        })
                    }

                    function v(a, b, c) {
                        switch (c) {
                        case "\x3e":
                            return a > b;
                        case "\x3c":
                            return a < b;
                        case "\x3e\x3d":
                            return a >= b;
                        case "\x3c\x3d":
                            return a <= b
                        }
                        return !1
                    }

                    function A(a, c) {
                        if (a === c || null === a && c === p.voidOperation || null === c && a === p.voidOperation) return !0;
                        if (u(a) && u(c)) return a.getTime() === c.getTime();
                        if (a instanceof e || a instanceof l) return a.equalityTest(c);
                        if (a instanceof b && c instanceof b) {
                            var f = void 0,
                                d = void 0;
                            p.isVersion4 ? (f = a.cache._arcadeCacheId, d = c.cache._arcadeCacheId) : (f = a.getCacheValue("_arcadeCacheId"), d = c.getCacheValue("_arcadeCacheId"));
                            if (void 0 !== f && null !== f) return f === d
                        }
                        return void 0 !== a && (void 0 !== c && null !== a && null !== c && "object" === typeof a && "object" === typeof c) && (a._arcadeCacheId === c._arcadeCacheId && void 0 !== a._arcadeCacheId && null !==
                            a._arcadeCacheId || a._underlyingGraphic === c._underlyingGraphic && void 0 !== a._underlyingGraphic && null !== a._underlyingGraphic) ? !0 : !1
                    }

                    function z(b, c) {
                        if (s(b)) return b;
                        if (null === b) return "";
                        if (f(b)) return w(b, c);
                        if (n(b)) return b.toString();
                        if (u(b)) return C(b, c);
                        if (b instanceof a) return JSON.stringify(b.toJson());
                        if (y(b)) {
                            for (var d = [], e = 0; e < b.length; e++) d[e] = D(b[e]);
                            return "[" + d.join(",") + "]"
                        }
                        if (b instanceof h) {
                            d = [];
                            for (e = 0; e < b.length(); e++) d[e] = D(b.get(e));
                            return "[" + d.join(",") + "]"
                        }
                        return null !== b && "object" ===
                            typeof b && void 0 !== b.castToText ? b.castToText() : t(b) ? "object, Function" : ""
                    }

                    function H(b, c) {
                        if (s(b)) return b;
                        if (null === b) return "";
                        if (f(b)) return w(b, c);
                        if (n(b)) return b.toString();
                        if (u(b)) return C(b, c);
                        if (b instanceof a) return JSON.stringify(b.toJson());
                        if (y(b)) {
                            for (var d = [], e = 0; e < b.length; e++) d[e] = D(b[e]);
                            return "[" + d.join(",") + "]"
                        }
                        if (b instanceof h) {
                            d = [];
                            for (e = 0; e < b.length(); e++) d[e] = D(b.get(e));
                            return "[" + d.join(",") + "]"
                        }
                        return null !== b && "object" === typeof b && void 0 !== b.castToText ? b.castToText() : t(b) ?
                            "object, Function" : ""
                    }

                    function D(b) {
                        if (null !== b) {
                            if (n(b) || f(b) || s(b)) return JSON.stringify(b);
                            if (b instanceof a || b instanceof h || b instanceof Array) return H(b);
                            if (b instanceof Date) return JSON.stringify(C(b, ""));
                            if (null !== b && "object" === typeof b && void 0 !== b.castToText) return b.castToText()
                        }
                        return "null"
                    }

                    function F(a, b) {
                        return f(a) ? a : null === a || "" === a ? 0 : u(a) ? NaN : n(a) ? a ? 1 : 0 : "" === a || void 0 === a ? NaN : void 0 !== b && s(a) ? (b = m(b, "\u2030", ""), b = m(b, "\u00a4", ""), q.parse(a, {
                            pattern: b
                        })) : a === p.voidOperation ? 0 : Number(a)
                    }

                    function E(a, b) {
                        var f;
                        c.some(b.fields, function (b) {
                            b.name === a && (f = b.domain);
                            return !!f
                        });
                        return f
                    }
                    r = function () {
                        return function (a) {
                            this.value = a
                        }
                    }();
                    var Q = function () {
                            return function (a) {
                                this.value = a
                            }
                        }(),
                        R = function () {
                            return function (a) {
                                this.fn = a
                            }
                        }(),
                        G = function () {
                            return function (a) {
                                this.fn = a
                            }
                        }();
                    p.NativeFunction = R;
                    p.ImplicitResult = Q;
                    p.ReturnResult = r;
                    p.SizzleFunction = G;
                    p.isVersion4 = 0 === k.version.indexOf("4.");
                    p.voidOperation = {
                        type: "VOID"
                    };
                    p.breakResult = {
                        type: "BREAK"
                    };
                    p.continueResult = {
                        type: "CONTINUE"
                    };
                    p.multiReplace =
                        m;
                    p.isFunctionParameter = t;
                    p.isSimpleType = function (a) {
                        return s(a) || f(a) || u(a) || n(a) || null === a || a === p.voidOperation || "number" === typeof a ? !0 : !1
                    };
                    p.defaultUndefined = function (a, b) {
                        return void 0 === a ? b : a
                    };
                    p.isString = s;
                    p.isBoolean = n;
                    p.isNumber = f;
                    p.isArray = y;
                    p.isFeatureCursor = function (a) {
                        return a && void 0 !== a.isFeatureCursor
                    };
                    p.isImmutableArray = function (a) {
                        return a instanceof h
                    };
                    p.isDate = u;
                    p.pcCheck = function (a, b, c) {
                        if (a.length < b || a.length > c) throw Error("Function called with wrong number of Parameters");
                    };
                    p.generateUUID =
                        function () {
                            var a = (new Date).getTime();
                            return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, function (b) {
                                var c = (a + 16 * Math.random()) % 16 | 0;
                                a = Math.floor(a / 16);
                                return ("x" === b ? c : c & 3 | 8).toString(16)
                            })
                        };
                    p.formatNumber = w;
                    p.formatDate = C;
                    p.standardiseDateFormat = x;
                    p.greaterThanLessThan = function (a, b, c) {
                        if (null === a) {
                            if (null === b || b === p.voidOperation) return v(null, null, c);
                            if (f(b)) return v(0, b, c);
                            if (s(b) || n(b)) return v(0, F(b), c);
                            if (u(b)) return v(0, b.getTime(), c)
                        }
                        if (a === p.voidOperation) {
                            if (null === b || b === p.voidOperation) return v(null,
                                null, c);
                            if (f(b)) return v(0, b, c);
                            if (s(b) || n(b)) return v(0, F(b), c);
                            if (u(b)) return v(0, b.getTime(), c)
                        } else if (f(a)) {
                            if (f(b)) return v(a, b, c);
                            if (n(b)) return v(a, F(b), c);
                            if (null === b || b === p.voidOperation) return v(a, 0, c);
                            if (s(b)) return v(a, F(b), c);
                            if (u(b)) return v(a, b.getTime(), c)
                        } else if (s(a)) {
                            if (s(b)) return v(z(a), z(b), c);
                            if (u(b)) return v(F(a), b.getTime(), c);
                            if (f(b)) return v(F(a), b, c);
                            if (null === b || b === p.voidOperation) return v(F(a), 0, c);
                            if (n(b)) return v(F(a), F(b), c)
                        } else if (u(a)) {
                            if (u(b)) return v(a, b, c);
                            if (null === b || b === p.voidOperation) return v(a.getTime(), 0, c);
                            if (f(b)) return v(a.getTime(), b, c);
                            if (n(b) || s(b)) return v(a.getTime(), F(b), c)
                        } else if (n(a)) {
                            if (n(b)) return v(a, b, c);
                            if (f(b)) return v(F(a), F(b), c);
                            if (u(b)) return v(F(a), b.getTime(), c);
                            if (null === b || b === p.voidOperation) return v(F(a), 0, c);
                            if (s(b)) return v(F(a), F(b), c)
                        }
                        return A(a, b) && ("\x3c\x3d" === c || "\x3e\x3d" === c) ? !0 : !1
                    };
                    p.equalityTest = A;
                    p.toString = z;
                    p.toNumberArray = function (a) {
                        var b = [];
                        if (!1 === y(a)) return null;
                        if (a instanceof h) {
                            for (var c = 0; c <
                                a.length(); c++) b[c] = F(a.get(c));
                            return b
                        }
                        for (c = 0; c < a.length; c++) b[c] = F(a[c]);
                        return b
                    };
                    p.toStringExplicit = H;
                    p.toNumber = F;
                    p.toDate = function (a, b) {
                        if (u(a)) return a;
                        if (s(a)) {
                            var c = g(a, [void 0 === b || null === b || "" === b ? g.ISO_8601 : b]);
                            if (c.isValid()) return c.toDate()
                        }
                        return null
                    };
                    p.toDateM = function (a, b) {
                        if (u(a)) return g(a);
                        if (s(a)) {
                            var c = g(a, [void 0 === b || null === b || "" === b ? g.ISO_8601 : b]);
                            if (c.isValid()) return c
                        }
                        return null
                    };
                    p.toBoolean = function (a) {
                        if (n(a)) return a;
                        if (s(a)) {
                            if (a = a.toLowerCase(), "true" === a) return !0
                        } else if (f(a)) return 0 ===
                            a || isNaN(a) ? !1 : !0;
                        return !1
                    };
                    p.fixSpatialReference = function (a, b) {
                        if (null === a) return null;
                        if (null === a.spatialReference || void 0 === a.spatialReference) a.spatialReference = b;
                        return a
                    };
                    p.getDomainValue = function (a, b) {
                        if (!a || !a.domain) return null;
                        var c = null;
                        b = "string" === a.field.type || "esriFieldTypeString" === a.field.type ? z(b) : F(b);
                        for (var f = 0; f < a.domain.codedValues.length; f++) {
                            var d = a.domain.codedValues[f];
                            d.code === b && (c = d)
                        }
                        return null === c ? null : c.name
                    };
                    p.getDomainCode = function (a, b) {
                        if (!a || !a.domain) return null;
                        var c = null;
                        b = z(b);
                        for (var f = 0; f < a.domain.codedValues.length; f++) {
                            var d = a.domain.codedValues[f];
                            d.name === b && (c = d)
                        }
                        return null === c ? null : c.code
                    };
                    p.getDomain = function (a, b, f, d) {
                        void 0 === f && (f = null);
                        if (!b || !b.fields) return null;
                        for (var e = null, m = 0; m < b.fields.length; m++) {
                            var n = b.fields[m];
                            n.name.toLowerCase() === a.toString().toLowerCase() && (e = n)
                        }
                        if (null === e) return null;
                        var s, g;
                        d || (d = f && b.typeIdField && f._field(b.typeIdField));
                        null != d && c.some(b.types, function (a) {
                            if (a.id === d) {
                                if ((s = a.domains && a.domains[e.name]) &&
                                    "inherited" === s.type) s = E(e.name, b), g = !0;
                                return !0
                            }
                            return !1
                        });
                        !g && !s && (s = E(a, b));
                        return {
                            field: e,
                            domain: s
                        }
                    }
                })
        },
        "esri/moment": function () {
            define(["require", "exports", "./plugins/moment!"], function (r, p, a) {
                return a
            })
        },
        "esri/plugins/moment": function () {
            define(["require", "exports", "dojo/_base/kernel", "moment/moment"], function (r, p, a, g) {
                var q = {
                    ar: 1,
                    "ar-ly": 1,
                    "ar-ma": 1,
                    "ar-sa": 1,
                    "ar-tn": 1,
                    bs: 1,
                    cs: 1,
                    da: 1,
                    de: 1,
                    "de-at": 1,
                    el: 1,
                    "en-au": 1,
                    "en-ca": 1,
                    "en-gb": 1,
                    "en-ie": 1,
                    "en-nz": 1,
                    es: 1,
                    "es-do": 1,
                    et: 1,
                    fi: 1,
                    fr: 1,
                    "fr-ca": 1,
                    "fr-ch": 1,
                    he: 1,
                    hr: 1,
                    id: 1,
                    it: 1,
                    ja: 1,
                    ko: 1,
                    lt: 1,
                    lv: 1,
                    nb: 1,
                    nl: 1,
                    pl: 1,
                    pt: 1,
                    "pt-br": 1,
                    ro: 1,
                    ru: 1,
                    sr: 1,
                    "sr-cyrl": 1,
                    sv: 1,
                    th: 1,
                    tr: 1,
                    vi: 1,
                    "zh-cn": 1,
                    "zh-hk": 1,
                    "zh-tw": 1
                };
                p.load = function (h, k, l) {
                    h = a.locale;
                    var e = h in q;
                    if (!e) {
                        var c = h.split("-");
                        1 < c.length && c[0] in q && (h = c[0], e = !0)
                    }
                    e ? k(["moment/locale/" + h], function () {
                        l(g)
                    }) : l(g)
                }
            })
        },
        "moment/moment": function () {
            (function (r, p) {
                "object" === typeof exports && "undefined" !== typeof module ? module.exports = p() : "function" === typeof define && define.amd ? define(p) : r.moment = p()
            })(this,
                function () {
                    function r() {
                        return Kb.apply(null, arguments)
                    }

                    function p(a) {
                        return a instanceof Array || "[object Array]" === Object.prototype.toString.call(a)
                    }

                    function a(a) {
                        return null != a && "[object Object]" === Object.prototype.toString.call(a)
                    }

                    function g(a) {
                        return a instanceof Date || "[object Date]" === Object.prototype.toString.call(a)
                    }

                    function q(a, b) {
                        var c = [],
                            f;
                        for (f = 0; f < a.length; ++f) c.push(b(a[f], f));
                        return c
                    }

                    function h(a, b) {
                        return Object.prototype.hasOwnProperty.call(a, b)
                    }

                    function k(a, b) {
                        for (var c in b) h(b,
                            c) && (a[c] = b[c]);
                        h(b, "toString") && (a.toString = b.toString);
                        h(b, "valueOf") && (a.valueOf = b.valueOf);
                        return a
                    }

                    function l(a, b, c, f) {
                        return Ia(a, b, c, f, !0).utc()
                    }

                    function e(a) {
                        null == a._pf && (a._pf = {
                            empty: !1,
                            unusedTokens: [],
                            unusedInput: [],
                            overflow: -2,
                            charsLeftOver: 0,
                            nullInput: !1,
                            invalidMonth: null,
                            invalidFormat: !1,
                            userInvalidated: !1,
                            iso: !1,
                            parsedDateParts: [],
                            meridiem: null
                        });
                        return a._pf
                    }

                    function c(a) {
                        if (null == a._isValid) {
                            var b = e(a),
                                c = Lb.call(b.parsedDateParts, function (a) {
                                    return null != a
                                }),
                                c = !isNaN(a._d.getTime()) &&
                                0 > b.overflow && !b.empty && !b.invalidMonth && !b.invalidWeekday && !b.nullInput && !b.invalidFormat && !b.userInvalidated && (!b.meridiem || b.meridiem && c);
                            a._strict && (c = c && 0 === b.charsLeftOver && 0 === b.unusedTokens.length && void 0 === b.bigHour);
                            if (null == Object.isFrozen || !Object.isFrozen(a)) a._isValid = c;
                            else return c
                        }
                        return a._isValid
                    }

                    function b(a) {
                        var b = l(NaN);
                        null != a ? k(e(b), a) : e(b).userInvalidated = !0;
                        return b
                    }

                    function d(a) {
                        return void 0 === a
                    }

                    function m(a, b) {
                        var c, f, m;
                        d(b._isAMomentObject) || (a._isAMomentObject = b._isAMomentObject);
                        d(b._i) || (a._i = b._i);
                        d(b._f) || (a._f = b._f);
                        d(b._l) || (a._l = b._l);
                        d(b._strict) || (a._strict = b._strict);
                        d(b._tzm) || (a._tzm = b._tzm);
                        d(b._isUTC) || (a._isUTC = b._isUTC);
                        d(b._offset) || (a._offset = b._offset);
                        d(b._pf) || (a._pf = e(b));
                        d(b._locale) || (a._locale = b._locale);
                        if (0 < zb.length)
                            for (c in zb) f = zb[c], m = b[f], d(m) || (a[f] = m);
                        return a
                    }

                    function t(a) {
                        m(this, a);
                        this._d = new Date(null != a._d ? a._d.getTime() : NaN);
                        !1 === kb && (kb = !0, r.updateOffset(this), kb = !1)
                    }

                    function s(a) {
                        return a instanceof t || null != a && null != a._isAMomentObject
                    }

                    function n(a) {
                        return 0 > a ? Math.ceil(a) || 0 : Math.floor(a)
                    }

                    function f(a) {
                        a = +a;
                        var b = 0;
                        0 !== a && isFinite(a) && (b = n(a));
                        return b
                    }

                    function y(a, b, c) {
                        var d = Math.min(a.length, b.length),
                            e = Math.abs(a.length - b.length),
                            m = 0,
                            n;
                        for (n = 0; n < d; n++)(c && a[n] !== b[n] || !c && f(a[n]) !== f(b[n])) && m++;
                        return m + e
                    }

                    function u(a) {
                        !1 === r.suppressDeprecationWarnings && ("undefined" !== typeof console && console.warn) && console.warn("Deprecation warning: " + a)
                    }

                    function w(a, b) {
                        var c = !0;
                        return k(function () {
                            null != r.deprecationHandler && r.deprecationHandler(null,
                                a);
                            if (c) {
                                for (var f = [], d, e = 0; e < arguments.length; e++) {
                                    d = "";
                                    if ("object" === typeof arguments[e]) {
                                        d += "\n[" + e + "] ";
                                        for (var m in arguments[0]) d += m + ": " + arguments[0][m] + ", ";
                                        d = d.slice(0, -2)
                                    } else d = arguments[e];
                                    f.push(d)
                                }
                                u(a + "\nArguments: " + Array.prototype.slice.call(f).join("") + "\n" + Error().stack);
                                c = !1
                            }
                            return b.apply(this, arguments)
                        }, b)
                    }

                    function C(a, b) {
                        null != r.deprecationHandler && r.deprecationHandler(a, b);
                        qb[a] || (u(b), qb[a] = !0)
                    }

                    function x(a) {
                        return a instanceof Function || "[object Function]" === Object.prototype.toString.call(a)
                    }

                    function v(b, c) {
                        var f = k({}, b),
                            d;
                        for (d in c) h(c, d) && (a(b[d]) && a(c[d]) ? (f[d] = {}, k(f[d], b[d]), k(f[d], c[d])) : null != c[d] ? f[d] = c[d] : delete f[d]);
                        for (d in b) h(b, d) && (!h(c, d) && a(b[d])) && (f[d] = k({}, f[d]));
                        return f
                    }

                    function A(a) {
                        null != a && this.set(a)
                    }

                    function z(a, b) {
                        var c = a.toLowerCase();
                        ab[c] = ab[c + "s"] = ab[b] = a
                    }

                    function H(a) {
                        return "string" === typeof a ? ab[a] || ab[a.toLowerCase()] : void 0
                    }

                    function D(a) {
                        var b = {},
                            c, f;
                        for (f in a) h(a, f) && (c = H(f)) && (b[c] = a[f]);
                        return b
                    }

                    function F(a) {
                        var b = [],
                            c;
                        for (c in a) b.push({
                            unit: c,
                            priority: za[c]
                        });
                        b.sort(function (a, b) {
                            return a.priority - b.priority
                        });
                        return b
                    }

                    function E(a, b) {
                        return function (c) {
                            if (null != c) {
                                if (this.isValid()) this._d["set" + (this._isUTC ? "UTC" : "") + a](c);
                                r.updateOffset(this, b);
                                return this
                            }
                            return Q(this, a)
                        }
                    }

                    function Q(a, b) {
                        return a.isValid() ? a._d["get" + (a._isUTC ? "UTC" : "") + b]() : NaN
                    }

                    function R(a, b, c) {
                        var f = "" + Math.abs(a);
                        return (0 <= a ? c ? "+" : "" : "-") + Math.pow(10, Math.max(0, b - f.length)).toString().substr(1) + f
                    }

                    function G(a, b, c, f) {
                        var d = f;
                        "string" === typeof f && (d = function () {
                            return this[f]()
                        });
                        a && (Qa[a] = d);
                        b && (Qa[b[0]] = function () {
                            return R(d.apply(this, arguments), b[1], b[2])
                        });
                        c && (Qa[c] = function () {
                            return this.localeData().ordinal(d.apply(this, arguments), a)
                        })
                    }

                    function I(a) {
                        var b = a.match(Ab),
                            c, f;
                        c = 0;
                        for (f = b.length; c < f; c++) b[c] = Qa[b[c]] ? Qa[b[c]] : b[c].match(/\[[\s\S]/) ? b[c].replace(/^\[|\]$/g, "") : b[c].replace(/\\/g, "");
                        return function (c) {
                            var d = "",
                                e;
                            for (e = 0; e < f; e++) d += b[e] instanceof Function ? b[e].call(c, a) : b[e];
                            return d
                        }
                    }

                    function P(a, b) {
                        if (!a.isValid()) return a.localeData().invalidDate();
                        b = K(b,
                            a.localeData());
                        rb[b] = rb[b] || I(b);
                        return rb[b](a)
                    }

                    function K(a, b) {
                        function c(a) {
                            return b.longDateFormat(a) || a
                        }
                        var f = 5;
                        for (bb.lastIndex = 0; 0 <= f && bb.test(a);) a = a.replace(bb, c), bb.lastIndex = 0, f -= 1;
                        return a
                    }

                    function J(a, b, c) {
                        Pb[a] = x(b) ? b : function (a, f) {
                            return a && c ? c : b
                        }
                    }

                    function O(a) {
                        return W(a.replace("\\", "").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g, function (a, b, c, f, d) {
                            return b || c || f || d
                        }))
                    }

                    function W(a) {
                        return a.replace(/[-\/\\^$*+?.()|[\]{}]/g, "\\$\x26")
                    }

                    function T(a, b) {
                        var c, d = b;
                        "string" === typeof a &&
                            (a = [a]);
                        "number" === typeof b && (d = function (a, c) {
                            c[b] = f(a)
                        });
                        for (c = 0; c < a.length; c++) Qb[a[c]] = d
                    }

                    function N(a, b) {
                        T(a, function (a, c, f, d) {
                            f._w = f._w || {};
                            b(a, f._w, f, d)
                        })
                    }

                    function Y(a, b) {
                        return (new Date(Date.UTC(a, b + 1, 0))).getUTCDate()
                    }

                    function Z(a, b) {
                        var c;
                        if (!a.isValid()) return a;
                        if ("string" === typeof b)
                            if (/^\d+$/.test(b)) b = f(b);
                            else if (b = a.localeData().monthsParse(b), "number" !== typeof b) return a;
                        c = Math.min(a.date(), Y(a.year(), b));
                        a._d["set" + (a._isUTC ? "UTC" : "") + "Month"](b, c);
                        return a
                    }

                    function ga(a) {
                        return null !=
                            a ? (Z(this, a), r.updateOffset(this, !0), this) : Q(this, "Month")
                    }

                    function aa() {
                        function a(b, c) {
                            return c.length - b.length
                        }
                        var b = [],
                            c = [],
                            f = [],
                            d, e;
                        for (d = 0; 12 > d; d++) e = l([2E3, d]), b.push(this.monthsShort(e, "")), c.push(this.months(e, "")), f.push(this.months(e, "")), f.push(this.monthsShort(e, ""));
                        b.sort(a);
                        c.sort(a);
                        f.sort(a);
                        for (d = 0; 12 > d; d++) b[d] = W(b[d]), c[d] = W(c[d]);
                        for (d = 0; 24 > d; d++) f[d] = W(f[d]);
                        this._monthsShortRegex = this._monthsRegex = RegExp("^(" + f.join("|") + ")", "i");
                        this._monthsStrictRegex = RegExp("^(" + c.join("|") +
                            ")", "i");
                        this._monthsShortStrictRegex = RegExp("^(" + b.join("|") + ")", "i")
                    }

                    function ea(a) {
                        return 0 === a % 4 && 0 !== a % 100 || 0 === a % 400
                    }

                    function ua(a, b, c, f, d, e, m) {
                        b = new Date(a, b, c, f, d, e, m);
                        100 > a && (0 <= a && isFinite(b.getFullYear())) && b.setFullYear(a);
                        return b
                    }

                    function xa(a) {
                        var b = new Date(Date.UTC.apply(null, arguments));
                        100 > a && (0 <= a && isFinite(b.getUTCFullYear())) && b.setUTCFullYear(a);
                        return b
                    }

                    function ha(a, b, c) {
                        c = 7 + b - c;
                        return -((7 + xa(a, 0, c).getUTCDay() - b) % 7) + c - 1
                    }

                    function pa(a, b, c, f, d) {
                        c = (7 + c - f) % 7;
                        f = ha(a, f, d);
                        f = 1 +
                            7 * (b - 1) + c + f;
                        0 >= f ? (b = a - 1, a = (ea(b) ? 366 : 365) + f) : f > (ea(a) ? 366 : 365) ? (b = a + 1, a = f - (ea(a) ? 366 : 365)) : (b = a, a = f);
                        return {
                            year: b,
                            dayOfYear: a
                        }
                    }

                    function oa(a, b, c) {
                        var f = ha(a.year(), b, c),
                            f = Math.floor((a.dayOfYear() - f - 1) / 7) + 1;
                        1 > f ? (a = a.year() - 1, b = f + na(a, b, c)) : f > na(a.year(), b, c) ? (b = f - na(a.year(), b, c), a = a.year() + 1) : (a = a.year(), b = f);
                        return {
                            week: b,
                            year: a
                        }
                    }

                    function na(a, b, c) {
                        var f = ha(a, b, c);
                        b = ha(a + 1, b, c);
                        return ((ea(a) ? 366 : 365) - f + b) / 7
                    }

                    function ia(a, b, c) {
                        var f, d;
                        a = a.toLocaleLowerCase();
                        if (!this._weekdaysParse) {
                            this._weekdaysParse = [];
                            this._shortWeekdaysParse = [];
                            this._minWeekdaysParse = [];
                            for (f = 0; 7 > f; ++f) d = l([2E3, 1]).day(f), this._minWeekdaysParse[f] = this.weekdaysMin(d, "").toLocaleLowerCase(), this._shortWeekdaysParse[f] = this.weekdaysShort(d, "").toLocaleLowerCase(), this._weekdaysParse[f] = this.weekdays(d, "").toLocaleLowerCase()
                        }
                        if (c) b = "dddd" === b ? Da.call(this._weekdaysParse, a) : "ddd" === b ? Da.call(this._shortWeekdaysParse, a) : Da.call(this._minWeekdaysParse, a);
                        else if ("dddd" === b) {
                            b = Da.call(this._weekdaysParse, a);
                            if (-1 !== b) return b;
                            b =
                                Da.call(this._shortWeekdaysParse, a);
                            if (-1 !== b) return b;
                            b = Da.call(this._minWeekdaysParse, a)
                        } else if ("ddd" === b) {
                            b = Da.call(this._shortWeekdaysParse, a);
                            if (-1 !== b) return b;
                            b = Da.call(this._weekdaysParse, a);
                            if (-1 !== b) return b;
                            b = Da.call(this._minWeekdaysParse, a)
                        } else {
                            b = Da.call(this._minWeekdaysParse, a);
                            if (-1 !== b) return b;
                            b = Da.call(this._weekdaysParse, a);
                            if (-1 !== b) return b;
                            b = Da.call(this._shortWeekdaysParse, a)
                        }
                        return -1 !== b ? b : null
                    }

                    function ma() {
                        function a(b, c) {
                            return c.length - b.length
                        }
                        var b = [],
                            c = [],
                            f = [],
                            d = [],
                            e, m, n, s;
                        for (e = 0; 7 > e; e++) m = l([2E3, 1]).day(e), n = this.weekdaysMin(m, ""), s = this.weekdaysShort(m, ""), m = this.weekdays(m, ""), b.push(n), c.push(s), f.push(m), d.push(n), d.push(s), d.push(m);
                        b.sort(a);
                        c.sort(a);
                        f.sort(a);
                        d.sort(a);
                        for (e = 0; 7 > e; e++) c[e] = W(c[e]), f[e] = W(f[e]), d[e] = W(d[e]);
                        this._weekdaysMinRegex = this._weekdaysShortRegex = this._weekdaysRegex = RegExp("^(" + d.join("|") + ")", "i");
                        this._weekdaysStrictRegex = RegExp("^(" + f.join("|") + ")", "i");
                        this._weekdaysShortStrictRegex = RegExp("^(" + c.join("|") + ")", "i");
                        this._weekdaysMinStrictRegex =
                            RegExp("^(" + b.join("|") + ")", "i")
                    }

                    function ya() {
                        return this.hours() % 12 || 12
                    }

                    function va(a, b) {
                        G(a, 0, 0, function () {
                            return this.localeData().meridiem(this.hours(), this.minutes(), b)
                        })
                    }

                    function Ba(a, b) {
                        return b._meridiemParse
                    }

                    function Ja(a) {
                        var b = null;
                        if (!Aa[a] && "undefined" !== typeof module && module && module.exports) try {
                            b = Nb._abbr, require("./locale/" + a), qa(b)
                        } catch (c) {}
                        return Aa[a]
                    }

                    function qa(a, b) {
                        var c;
                        a && (c = d(b) ? ja(a) : wa(a, b)) && (Nb = c);
                        return Nb._abbr
                    }

                    function wa(a, b) {
                        if (null !== b) {
                            var c = Tb;
                            b.abbr = a;
                            null !=
                                Aa[a] ? (C("defineLocaleOverride", "use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."), c = Aa[a]._config) : null != b.parentLocale && (null != Aa[b.parentLocale] ? c = Aa[b.parentLocale]._config : C("parentLocaleUndefined", "specified parentLocale is not defined yet. See http://momentjs.com/guides/#/warnings/parent-locale/"));
                            Aa[a] = new A(v(c,
                                b));
                            qa(a);
                            return Aa[a]
                        }
                        delete Aa[a];
                        return null
                    }

                    function ja(a) {
                        var b;
                        a && (a._locale && a._locale._abbr) && (a = a._locale._abbr);
                        if (!a) return Nb;
                        if (!p(a)) {
                            if (b = Ja(a)) return b;
                            a = [a]
                        }
                        a: {
                            b = 0;
                            for (var c, f, d, e; b < a.length;) {
                                e = (a[b] ? a[b].toLowerCase().replace("_", "-") : a[b]).split("-");
                                c = e.length;
                                for (f = (f = a[b + 1] ? a[b + 1].toLowerCase().replace("_", "-") : a[b + 1]) ? f.split("-") : null; 0 < c;) {
                                    if (d = Ja(e.slice(0, c).join("-"))) {
                                        a = d;
                                        break a
                                    }
                                    if (f && f.length >= c && y(e, f, !0) >= c - 1) break;
                                    c--
                                }
                                b++
                            }
                            a = null
                        }
                        return a
                    }

                    function Ca(a) {
                        var b;
                        if ((b =
                                a._a) && -2 === e(a).overflow) {
                            b = 0 > b[cb] || 11 < b[cb] ? cb : 1 > b[Wa] || b[Wa] > Y(b[Ra], b[cb]) ? Wa : 0 > b[Ea] || 24 < b[Ea] || 24 === b[Ea] && (0 !== b[Sa] || 0 !== b[db] || 0 !== b[sb]) ? Ea : 0 > b[Sa] || 59 < b[Sa] ? Sa : 0 > b[db] || 59 < b[db] ? db : 0 > b[sb] || 999 < b[sb] ? sb : -1;
                            if (e(a)._overflowDayOfYear && (b < Ra || b > Wa)) b = Wa;
                            e(a)._overflowWeeks && -1 === b && (b = Yb);
                            e(a)._overflowWeekday && -1 === b && (b = Zb);
                            e(a).overflow = b
                        }
                        return a
                    }

                    function Ma(a) {
                        var b, c;
                        b = a._i;
                        var f = $b.exec(b) || ac.exec(b),
                            d, m, n, s;
                        if (f) {
                            e(a).iso = !0;
                            b = 0;
                            for (c = Ob.length; b < c; b++)
                                if (Ob[b][1].exec(f[1])) {
                                    m =
                                        Ob[b][0];
                                    d = !1 !== Ob[b][2];
                                    break
                                }
                            if (null == m) a._isValid = !1;
                            else {
                                if (f[3]) {
                                    b = 0;
                                    for (c = Rb.length; b < c; b++)
                                        if (Rb[b][1].exec(f[3])) {
                                            n = (f[2] || " ") + Rb[b][0];
                                            break
                                        }
                                    if (null == n) {
                                        a._isValid = !1;
                                        return
                                    }
                                }
                                if (!d && null != n) a._isValid = !1;
                                else {
                                    if (f[4])
                                        if (bc.exec(f[4])) s = "Z";
                                        else {
                                            a._isValid = !1;
                                            return
                                        }
                                    a._f = m + (n || "") + (s || "");
                                    Va(a)
                                }
                            }
                        } else a._isValid = !1
                    }

                    function Pa(a) {
                        var b = cc.exec(a._i);
                        null !== b ? a._d = new Date(+b[1]) : (Ma(a), !1 === a._isValid && (delete a._isValid, r.createFromInputFallback(a)))
                    }

                    function Ha(a, b, c) {
                        return null != a ? a :
                            null != b ? b : c
                    }

                    function Oa(a) {
                        var b, c = [],
                            f;
                        if (!a._d) {
                            f = new Date(r.now());
                            f = a._useUTC ? [f.getUTCFullYear(), f.getUTCMonth(), f.getUTCDate()] : [f.getFullYear(), f.getMonth(), f.getDate()];
                            if (a._w && null == a._a[Wa] && null == a._a[cb]) {
                                var d, m, n, s, g, t;
                                d = a._w;
                                if (null != d.GG || null != d.W || null != d.E) {
                                    if (g = 1, t = 4, m = Ha(d.GG, a._a[Ra], oa(L(), 1, 4).year), n = Ha(d.W, 1), s = Ha(d.E, 1), 1 > s || 7 < s) b = !0
                                } else if (g = a._locale._week.dow, t = a._locale._week.doy, m = Ha(d.gg, a._a[Ra], oa(L(), g, t).year), n = Ha(d.w, 1), null != d.d) {
                                    if (s = d.d, 0 > s || 6 < s) b = !0
                                } else if (null !=
                                    d.e) {
                                    if (s = d.e + g, 0 > d.e || 6 < d.e) b = !0
                                } else s = g;
                                1 > n || n > na(m, g, t) ? e(a)._overflowWeeks = !0 : null != b ? e(a)._overflowWeekday = !0 : (b = pa(m, n, s, g, t), a._a[Ra] = b.year, a._dayOfYear = b.dayOfYear)
                            }
                            if (a._dayOfYear) {
                                b = Ha(a._a[Ra], f[Ra]);
                                if (a._dayOfYear > (ea(b) ? 366 : 365)) e(a)._overflowDayOfYear = !0;
                                b = xa(b, 0, a._dayOfYear);
                                a._a[cb] = b.getUTCMonth();
                                a._a[Wa] = b.getUTCDate()
                            }
                            for (b = 0; 3 > b && null == a._a[b]; ++b) a._a[b] = c[b] = f[b];
                            for (; 7 > b; b++) a._a[b] = c[b] = null == a._a[b] ? 2 === b ? 1 : 0 : a._a[b];
                            24 === a._a[Ea] && (0 === a._a[Sa] && 0 === a._a[db] && 0 === a._a[sb]) &&
                                (a._nextDay = !0, a._a[Ea] = 0);
                            a._d = (a._useUTC ? xa : ua).apply(null, c);
                            null != a._tzm && a._d.setUTCMinutes(a._d.getUTCMinutes() - a._tzm);
                            a._nextDay && (a._a[Ea] = 24)
                        }
                    }

                    function Va(a) {
                        if (a._f === r.ISO_8601) Ma(a);
                        else {
                            a._a = [];
                            e(a).empty = !0;
                            var b = "" + a._i,
                                c, f, d, m, n, s = b.length,
                                g = 0;
                            d = K(a._f, a._locale).match(Ab) || [];
                            for (c = 0; c < d.length; c++) {
                                m = d[c];
                                if (f = (b.match(!h(Pb, m) ? RegExp(O(m)) : Pb[m](a._strict, a._locale)) || [])[0]) n = b.substr(0, b.indexOf(f)), 0 < n.length && e(a).unusedInput.push(n), b = b.slice(b.indexOf(f) + f.length), g += f.length;
                                if (Qa[m]) {
                                    if (f ? e(a).empty = !1 : e(a).unusedTokens.push(m), n = a, null != f && h(Qb, m)) Qb[m](f, n._a, n, m)
                                } else a._strict && !f && e(a).unusedTokens.push(m)
                            }
                            e(a).charsLeftOver = s - g;
                            0 < b.length && e(a).unusedInput.push(b);
                            12 >= a._a[Ea] && (!0 === e(a).bigHour && 0 < a._a[Ea]) && (e(a).bigHour = void 0);
                            e(a).parsedDateParts = a._a.slice(0);
                            e(a).meridiem = a._meridiem;
                            b = a._a;
                            c = Ea;
                            s = a._locale;
                            d = a._a[Ea];
                            g = a._meridiem;
                            null != g && (null != s.meridiemHour ? d = s.meridiemHour(d, g) : null != s.isPM && ((s = s.isPM(g)) && 12 > d && (d += 12), !s && 12 === d && (d = 0)));
                            b[c] =
                                d;
                            Oa(a);
                            Ca(a)
                        }
                    }

                    function jb(a) {
                        if (!a._d) {
                            var b = D(a._i);
                            a._a = q([b.year, b.month, b.day || b.date, b.hour, b.minute, b.second, b.millisecond], function (a) {
                                return a && parseInt(a, 10)
                            });
                            Oa(a)
                        }
                    }

                    function Ya(a) {
                        var f = a._i,
                            d = a._f;
                        a._locale = a._locale || ja(a._l);
                        if (null === f || void 0 === d && "" === f) return b({
                            nullInput: !0
                        });
                        "string" === typeof f && (a._i = f = a._locale.preparse(f));
                        if (s(f)) return new t(Ca(f));
                        if (p(d)) {
                            var n, u, h;
                            if (0 === a._f.length) e(a).invalidFormat = !0, a._d = new Date(NaN);
                            else {
                                for (f = 0; f < a._f.length; f++)
                                    if (d = 0, n = m({},
                                            a), null != a._useUTC && (n._useUTC = a._useUTC), n._f = a._f[f], Va(n), c(n) && (d += e(n).charsLeftOver, d += 10 * e(n).unusedTokens.length, e(n).score = d, null == h || d < h)) h = d, u = n;
                                k(a, u || n)
                            }
                        } else g(f) ? a._d = f : d ? Va(a) : Za(a);
                        c(a) || (a._d = null);
                        return a
                    }

                    function Za(a) {
                        var b = a._i;
                        void 0 === b ? a._d = new Date(r.now()) : g(b) ? a._d = new Date(b.valueOf()) : "string" === typeof b ? Pa(a) : p(b) ? (a._a = q(b.slice(0), function (a) {
                            return parseInt(a, 10)
                        }), Oa(a)) : "object" === typeof b ? jb(a) : "number" === typeof b ? a._d = new Date(b) : r.createFromInputFallback(a)
                    }

                    function Ia(b, c, f, d, e) {
                        var m = {};
                        "boolean" === typeof f && (d = f, f = void 0);
                        var n;
                        if (n = a(b)) a: {
                            for (var s in b) {
                                n = !1;
                                break a
                            }
                            n = !0
                        }
                        if (n || p(b) && 0 === b.length) b = void 0;
                        m._isAMomentObject = !0;
                        m._useUTC = m._isUTC = e;
                        m._l = f;
                        m._i = b;
                        m._f = c;
                        m._strict = d;
                        b = new t(Ca(Ya(m)));
                        b._nextDay && (b.add(1, "d"), b._nextDay = void 0);
                        return b
                    }

                    function L(a, b, c, f) {
                        return Ia(a, b, c, f, !1)
                    }

                    function Fa(a, b) {
                        var c, f;
                        1 === b.length && p(b[0]) && (b = b[0]);
                        if (!b.length) return L();
                        c = b[0];
                        for (f = 1; f < b.length; ++f)
                            if (!b[f].isValid() || b[f][a](c)) c = b[f];
                        return c
                    }

                    function $a(a) {
                        a = D(a);
                        var b = a.year || 0,
                            c = a.quarter || 0,
                            f = a.month || 0,
                            d = a.week || 0,
                            e = a.day || 0;
                        this._milliseconds = +(a.millisecond || 0) + 1E3 * (a.second || 0) + 6E4 * (a.minute || 0) + 36E5 * (a.hour || 0);
                        this._days = +e + 7 * d;
                        this._months = +f + 3 * c + 12 * b;
                        this._data = {};
                        this._locale = ja();
                        this._bubble()
                    }

                    function $(a) {
                        return a instanceof $a
                    }

                    function Ka(a) {
                        return 0 > a ? -1 * Math.round(-1 * a) : Math.round(a)
                    }

                    function La(a, b) {
                        G(a, 0, 0, function () {
                            var a = this.utcOffset(),
                                c = "+";
                            0 > a && (a = -a, c = "-");
                            return c + R(~~(a / 60), 2) + b + R(~~a % 60, 2)
                        })
                    }

                    function ca(a,
                        b) {
                        var c = (b || "").match(a) || [],
                            c = ((c[c.length - 1] || []) + "").match(dc) || ["-", 0, 0],
                            d = +(60 * c[1]) + f(c[2]);
                        return "+" === c[0] ? d : -d
                    }

                    function sa(a, b) {
                        var c, f;
                        return b._isUTC ? (c = b.clone(), f = (s(a) || g(a) ? a.valueOf() : L(a).valueOf()) - c.valueOf(), c._d.setTime(c._d.valueOf() + f), r.updateOffset(c, !1), c) : L(a).local()
                    }

                    function S() {
                        return this.isValid() ? this._isUTC && 0 === this._offset : !1
                    }

                    function fa(a, b) {
                        var c = a,
                            d = null;
                        if ($(a)) c = {
                            ms: a._milliseconds,
                            d: a._days,
                            M: a._months
                        };
                        else if ("number" === typeof a) c = {}, b ? c[b] = a : c.milliseconds =
                            a;
                        else if (d = ec.exec(a)) c = "-" === d[1] ? -1 : 1, c = {
                            y: 0,
                            d: f(d[Wa]) * c,
                            h: f(d[Ea]) * c,
                            m: f(d[Sa]) * c,
                            s: f(d[db]) * c,
                            ms: f(Ka(1E3 * d[sb])) * c
                        };
                        else if (d = fc.exec(a)) c = "-" === d[1] ? -1 : 1, c = {
                            y: B(d[2], c),
                            M: B(d[3], c),
                            w: B(d[4], c),
                            d: B(d[5], c),
                            h: B(d[6], c),
                            m: B(d[7], c),
                            s: B(d[8], c)
                        };
                        else if (null == c) c = {};
                        else if ("object" === typeof c && ("from" in c || "to" in c)) d = L(c.from), c = L(c.to), !d.isValid() || !c.isValid() ? d = {
                                milliseconds: 0,
                                months: 0
                            } : (c = sa(c, d), d.isBefore(c) ? c = ba(d, c) : (c = ba(c, d), c.milliseconds = -c.milliseconds, c.months = -c.months), d = c),
                            c = {}, c.ms = d.milliseconds, c.M = d.months;
                        c = new $a(c);
                        $(a) && h(a, "_locale") && (c._locale = a._locale);
                        return c
                    }

                    function B(a, b) {
                        var c = a && parseFloat(a.replace(",", "."));
                        return (isNaN(c) ? 0 : c) * b
                    }

                    function ba(a, b) {
                        var c = {
                            milliseconds: 0,
                            months: 0
                        };
                        c.months = b.month() - a.month() + 12 * (b.year() - a.year());
                        a.clone().add(c.months, "M").isAfter(b) && --c.months;
                        c.milliseconds = +b - +a.clone().add(c.months, "M");
                        return c
                    }

                    function da(a, b) {
                        return function (c, f) {
                            var d;
                            null !== f && !isNaN(+f) && (C(b, "moment()." + b + "(period, number) is deprecated. Please use moment()." +
                                b + "(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."), d = c, c = f, f = d);
                            d = fa("string" === typeof c ? +c : c, f);
                            ka(this, d, a);
                            return this
                        }
                    }

                    function ka(a, b, c, f) {
                        var d = b._milliseconds,
                            e = Ka(b._days);
                        b = Ka(b._months);
                        if (a.isValid()) {
                            f = null == f ? !0 : f;
                            d && a._d.setTime(a._d.valueOf() + d * c);
                            if (e && (d = Q(a, "Date") + e * c, a.isValid())) a._d["set" + (a._isUTC ? "UTC" : "") + "Date"](d);
                            b && Z(a, Q(a, "Month") + b * c);
                            f && r.updateOffset(a, e || b)
                        }
                    }

                    function V(a) {
                        if (void 0 === a) return this._locale._abbr;
                        a = ja(a);
                        null != a && (this._locale = a);
                        return this
                    }

                    function X() {
                        return this._locale
                    }

                    function M(a, b) {
                        G(0, [a, a.length], 0, b)
                    }

                    function Gb(a, b, c, f, d) {
                        var e;
                        if (null == a) return oa(this, f, d).year;
                        e = na(a, f, d);
                        b > e && (b = e);
                        a = pa(a, b, c, f, d);
                        a = xa(a.year, 0, a.dayOfYear);
                        this.year(a.getUTCFullYear());
                        this.month(a.getUTCMonth());
                        this.date(a.getUTCDate());
                        return this
                    }

                    function Mb(a, b) {
                        b[sb] = f(1E3 * ("0." + a))
                    }

                    function Hb(a) {
                        return a
                    }

                    function pb(a, b, c, f) {
                        var d = ja();
                        b = l().set(f, b);
                        return d[c](b, a)
                    }

                    function Ib(a, b, c) {
                        "number" === typeof a &&
                            (b = a, a = void 0);
                        a = a || "";
                        if (null != b) return pb(a, b, c, "month");
                        var f = [];
                        for (b = 0; 12 > b; b++) f[b] = pb(a, b, c, "month");
                        return f
                    }

                    function yb(a, b, c, f) {
                        "boolean" !== typeof a && (c = b = a, a = !1);
                        "number" === typeof b && (c = b, b = void 0);
                        b = b || "";
                        var d = ja();
                        a = a ? d._week.dow : 0;
                        if (null != c) return pb(b, (c + a) % 7, f, "day");
                        d = [];
                        for (c = 0; 7 > c; c++) d[c] = pb(b, (c + a) % 7, f, "day");
                        return d
                    }

                    function Jb(a, b, c, f) {
                        b = fa(b, c);
                        a._milliseconds += f * b._milliseconds;
                        a._days += f * b._days;
                        a._months += f * b._months;
                        return a._bubble()
                    }

                    function Ta(a) {
                        return function () {
                            return this.as(a)
                        }
                    }

                    function Na(a) {
                        return function () {
                            return this._data[a]
                        }
                    }

                    function Ua(a, b, c, f, d) {
                        return d.relativeTime(b || 1, !!c, a, f)
                    }

                    function tb() {
                        var a = Sb(this._milliseconds) / 1E3,
                            b = Sb(this._days),
                            c = Sb(this._months),
                            f, d, e;
                        f = n(a / 60);
                        d = n(f / 60);
                        a %= 60;
                        f %= 60;
                        e = n(c / 12);
                        var c = c % 12,
                            m = this.asSeconds();
                        return !m ? "P0D" : (0 > m ? "-" : "") + "P" + (e ? e + "Y" : "") + (c ? c + "M" : "") + (b ? b + "D" : "") + (d || f || a ? "T" : "") + (d ? d + "H" : "") + (f ? f + "M" : "") + (a ? a + "S" : "")
                    }
                    var Kb, Lb;
                    Lb = Array.prototype.some ? Array.prototype.some : function (a) {
                        for (var b = Object(this), c = b.length >>>
                                0, f = 0; f < c; f++)
                            if (f in b && a.call(this, b[f], f, b)) return !0;
                        return !1
                    };
                    var zb = r.momentProperties = [],
                        kb = !1,
                        qb = {};
                    r.suppressDeprecationWarnings = !1;
                    r.deprecationHandler = null;
                    var ub;
                    ub = Object.keys ? Object.keys : function (a) {
                        var b, c = [];
                        for (b in a) h(a, b) && c.push(b);
                        return c
                    };
                    var ab = {},
                        za = {},
                        Ab = /(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,
                        bb = /(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,
                        rb = {},
                        Qa = {},
                        vb = /\d/,
                        Ga = /\d\d/,
                        Bb = /\d{3}/,
                        lb = /\d{4}/,
                        eb = /[+-]?\d{6}/,
                        ra = /\d\d?/,
                        wb = /\d\d\d\d?/,
                        Cb = /\d\d\d\d\d\d?/,
                        fb = /\d{1,3}/,
                        mb = /\d{1,4}/,
                        gb = /[+-]?\d{1,6}/,
                        Db = /\d+/,
                        hb = /[+-]?\d+/,
                        Eb = /Z|[+-]\d\d:?\d\d/gi,
                        Fb = /Z|[+-]\d\d(?::?\d\d)?/gi,
                        xb = /[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,
                        Pb = {},
                        Qb = {},
                        Ra = 0,
                        cb = 1,
                        Wa = 2,
                        Ea = 3,
                        Sa = 4,
                        db = 5,
                        sb = 6,
                        Yb = 7,
                        Zb = 8,
                        Da;
                    Da = Array.prototype.indexOf ? Array.prototype.indexOf : function (a) {
                        var b;
                        for (b = 0; b < this.length; ++b)
                            if (this[b] ===
                                a) return b;
                        return -1
                    };
                    G("M", ["MM", 2], "Mo", function () {
                        return this.month() + 1
                    });
                    G("MMM", 0, 0, function (a) {
                        return this.localeData().monthsShort(this, a)
                    });
                    G("MMMM", 0, 0, function (a) {
                        return this.localeData().months(this, a)
                    });
                    z("month", "M");
                    za.month = 8;
                    J("M", ra);
                    J("MM", ra, Ga);
                    J("MMM", function (a, b) {
                        return b.monthsShortRegex(a)
                    });
                    J("MMMM", function (a, b) {
                        return b.monthsRegex(a)
                    });
                    T(["M", "MM"], function (a, b) {
                        b[cb] = f(a) - 1
                    });
                    T(["MMM", "MMMM"], function (a, b, c, f) {
                        f = c._locale.monthsParse(a, f, c._strict);
                        null != f ? b[cb] = f : e(c).invalidMonth =
                            a
                    });
                    var Ub = /D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/;
                    G("Y", 0, 0, function () {
                        var a = this.year();
                        return 9999 >= a ? "" + a : "+" + a
                    });
                    G(0, ["YY", 2], 0, function () {
                        return this.year() % 100
                    });
                    G(0, ["YYYY", 4], 0, "year");
                    G(0, ["YYYYY", 5], 0, "year");
                    G(0, ["YYYYYY", 6, !0], 0, "year");
                    z("year", "y");
                    za.year = 1;
                    J("Y", hb);
                    J("YY", ra, Ga);
                    J("YYYY", mb, lb);
                    J("YYYYY", gb, eb);
                    J("YYYYYY", gb, eb);
                    T(["YYYYY", "YYYYYY"], Ra);
                    T("YYYY", function (a, b) {
                        b[Ra] = 2 === a.length ? r.parseTwoDigitYear(a) : f(a)
                    });
                    T("YY", function (a, b) {
                        b[Ra] = r.parseTwoDigitYear(a)
                    });
                    T("Y", function (a,
                        b) {
                        b[Ra] = parseInt(a, 10)
                    });
                    r.parseTwoDigitYear = function (a) {
                        return f(a) + (68 < f(a) ? 1900 : 2E3)
                    };
                    var Vb = E("FullYear", !0);
                    G("w", ["ww", 2], "wo", "week");
                    G("W", ["WW", 2], "Wo", "isoWeek");
                    z("week", "w");
                    z("isoWeek", "W");
                    za.week = 5;
                    za.isoWeek = 5;
                    J("w", ra);
                    J("ww", ra, Ga);
                    J("W", ra);
                    J("WW", ra, Ga);
                    N(["w", "ww", "W", "WW"], function (a, b, c, d) {
                        b[d.substr(0, 1)] = f(a)
                    });
                    G("d", 0, "do", "day");
                    G("dd", 0, 0, function (a) {
                        return this.localeData().weekdaysMin(this, a)
                    });
                    G("ddd", 0, 0, function (a) {
                        return this.localeData().weekdaysShort(this, a)
                    });
                    G("dddd", 0, 0, function (a) {
                        return this.localeData().weekdays(this, a)
                    });
                    G("e", 0, 0, "weekday");
                    G("E", 0, 0, "isoWeekday");
                    z("day", "d");
                    z("weekday", "e");
                    z("isoWeekday", "E");
                    za.day = 11;
                    za.weekday = 11;
                    za.isoWeekday = 11;
                    J("d", ra);
                    J("e", ra);
                    J("E", ra);
                    J("dd", function (a, b) {
                        return b.weekdaysMinRegex(a)
                    });
                    J("ddd", function (a, b) {
                        return b.weekdaysShortRegex(a)
                    });
                    J("dddd", function (a, b) {
                        return b.weekdaysRegex(a)
                    });
                    N(["dd", "ddd", "dddd"], function (a, b, c, f) {
                        f = c._locale.weekdaysParse(a, f, c._strict);
                        null != f ? b.d = f : e(c).invalidWeekday =
                            a
                    });
                    N(["d", "e", "E"], function (a, b, c, d) {
                        b[d] = f(a)
                    });
                    G("H", ["HH", 2], 0, "hour");
                    G("h", ["hh", 2], 0, ya);
                    G("k", ["kk", 2], 0, function () {
                        return this.hours() || 24
                    });
                    G("hmm", 0, 0, function () {
                        return "" + ya.apply(this) + R(this.minutes(), 2)
                    });
                    G("hmmss", 0, 0, function () {
                        return "" + ya.apply(this) + R(this.minutes(), 2) + R(this.seconds(), 2)
                    });
                    G("Hmm", 0, 0, function () {
                        return "" + this.hours() + R(this.minutes(), 2)
                    });
                    G("Hmmss", 0, 0, function () {
                        return "" + this.hours() + R(this.minutes(), 2) + R(this.seconds(), 2)
                    });
                    va("a", !0);
                    va("A", !1);
                    z("hour", "h");
                    za.hour = 13;
                    J("a", Ba);
                    J("A", Ba);
                    J("H", ra);
                    J("h", ra);
                    J("HH", ra, Ga);
                    J("hh", ra, Ga);
                    J("hmm", wb);
                    J("hmmss", Cb);
                    J("Hmm", wb);
                    J("Hmmss", Cb);
                    T(["H", "HH"], Ea);
                    T(["a", "A"], function (a, b, c) {
                        c._isPm = c._locale.isPM(a);
                        c._meridiem = a
                    });
                    T(["h", "hh"], function (a, b, c) {
                        b[Ea] = f(a);
                        e(c).bigHour = !0
                    });
                    T("hmm", function (a, b, c) {
                        var d = a.length - 2;
                        b[Ea] = f(a.substr(0, d));
                        b[Sa] = f(a.substr(d));
                        e(c).bigHour = !0
                    });
                    T("hmmss", function (a, b, c) {
                        var d = a.length - 4,
                            m = a.length - 2;
                        b[Ea] = f(a.substr(0, d));
                        b[Sa] = f(a.substr(d, 2));
                        b[db] = f(a.substr(m));
                        e(c).bigHour = !0
                    });
                    T("Hmm", function (a, b, c) {
                        c = a.length - 2;
                        b[Ea] = f(a.substr(0, c));
                        b[Sa] = f(a.substr(c))
                    });
                    T("Hmmss", function (a, b, c) {
                        c = a.length - 4;
                        var d = a.length - 2;
                        b[Ea] = f(a.substr(0, c));
                        b[Sa] = f(a.substr(c, 2));
                        b[db] = f(a.substr(d))
                    });
                    var gc = E("Hours", !0),
                        Tb = {
                            calendar: {
                                sameDay: "[Today at] LT",
                                nextDay: "[Tomorrow at] LT",
                                nextWeek: "dddd [at] LT",
                                lastDay: "[Yesterday at] LT",
                                lastWeek: "[Last] dddd [at] LT",
                                sameElse: "L"
                            },
                            longDateFormat: {
                                LTS: "h:mm:ss A",
                                LT: "h:mm A",
                                L: "MM/DD/YYYY",
                                LL: "MMMM D, YYYY",
                                LLL: "MMMM D, YYYY h:mm A",
                                LLLL: "dddd, MMMM D, YYYY h:mm A"
                            },
                            invalidDate: "Invalid date",
                            ordinal: "%d",
                            ordinalParse: /\d{1,2}/,
                            relativeTime: {
                                future: "in %s",
                                past: "%s ago",
                                s: "a few seconds",
                                m: "a minute",
                                mm: "%d minutes",
                                h: "an hour",
                                hh: "%d hours",
                                d: "a day",
                                dd: "%d days",
                                M: "a month",
                                MM: "%d months",
                                y: "a year",
                                yy: "%d years"
                            },
                            months: "January February March April May June July August September October November December".split(" "),
                            monthsShort: "Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),
                            week: {
                                dow: 0,
                                doy: 6
                            },
                            weekdays: "Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),
                            weekdaysMin: "Su Mo Tu We Th Fr Sa".split(" "),
                            weekdaysShort: "Sun Mon Tue Wed Thu Fri Sat".split(" "),
                            meridiemParse: /[ap]\.?m?\.?/i
                        },
                        Aa = {},
                        Nb, $b = /^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,
                        ac = /^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,
                        bc = /Z|[+-]\d\d(?::?\d\d)?/,
                        Ob = [["YYYYYY-MM-DD", /[+-]\d{6}-\d\d-\d\d/],
["YYYY-MM-DD", /\d{4}-\d\d-\d\d/], ["GGGG-[W]WW-E", /\d{4}-W\d\d-\d/], ["GGGG-[W]WW", /\d{4}-W\d\d/, !1], ["YYYY-DDD", /\d{4}-\d{3}/], ["YYYY-MM", /\d{4}-\d\d/, !1], ["YYYYYYMMDD", /[+-]\d{10}/], ["YYYYMMDD", /\d{8}/], ["GGGG[W]WWE", /\d{4}W\d{3}/], ["GGGG[W]WW", /\d{4}W\d{2}/, !1], ["YYYYDDD", /\d{7}/]],
                        Rb = [["HH:mm:ss.SSSS", /\d\d:\d\d:\d\d\.\d+/], ["HH:mm:ss,SSSS", /\d\d:\d\d:\d\d,\d+/], ["HH:mm:ss", /\d\d:\d\d:\d\d/], ["HH:mm", /\d\d:\d\d/], ["HHmmss.SSSS", /\d\d\d\d\d\d\.\d+/], ["HHmmss,SSSS", /\d\d\d\d\d\d,\d+/], ["HHmmss", /\d\d\d\d\d\d/],
["HHmm", /\d\d\d\d/], ["HH", /\d\d/]],
                        cc = /^\/?Date\((\-?\d+)/i;
                    r.createFromInputFallback = w("value provided is not in a recognized ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.", function (a) {
                        a._d = new Date(a._i + (a._useUTC ? " UTC" : ""))
                    });
                    r.ISO_8601 = function () {};
                    var hc = w("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",
                            function () {
                                var a = L.apply(null, arguments);
                                return this.isValid() && a.isValid() ? a < this ? this : a : b()
                            }),
                        ic = w("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/", function () {
                            var a = L.apply(null, arguments);
                            return this.isValid() && a.isValid() ? a > this ? this : a : b()
                        });
                    La("Z", ":");
                    La("ZZ", "");
                    J("Z", Fb);
                    J("ZZ", Fb);
                    T(["Z", "ZZ"], function (a, b, c) {
                        c._useUTC = !0;
                        c._tzm = ca(Fb, a)
                    });
                    var dc = /([\+\-]|\d\d)/gi;
                    r.updateOffset = function () {};
                    var ec = /^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,
                        fc = /^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/;
                    fa.fn = $a.prototype;
                    var jc = da(1, "add"),
                        kc = da(-1, "subtract");
                    r.defaultFormat = "YYYY-MM-DDTHH:mm:ssZ";
                    r.defaultFormatUtc = "YYYY-MM-DDTHH:mm:ss[Z]";
                    var Wb = w("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.", function (a) {
                        return void 0 === a ? this.localeData() : this.locale(a)
                    });
                    G(0, ["gg", 2], 0, function () {
                        return this.weekYear() % 100
                    });
                    G(0, ["GG", 2], 0, function () {
                        return this.isoWeekYear() % 100
                    });
                    M("gggg", "weekYear");
                    M("ggggg", "weekYear");
                    M("GGGG", "isoWeekYear");
                    M("GGGGG", "isoWeekYear");
                    z("weekYear", "gg");
                    z("isoWeekYear", "GG");
                    za.weekYear = 1;
                    za.isoWeekYear = 1;
                    J("G", hb);
                    J("g", hb);
                    J("GG", ra, Ga);
                    J("gg", ra, Ga);
                    J("GGGG", mb, lb);
                    J("gggg", mb, lb);
                    J("GGGGG", gb, eb);
                    J("ggggg", gb, eb);
                    N(["gggg", "ggggg", "GGGG", "GGGGG"], function (a, b, c, d) {
                        b[d.substr(0, 2)] = f(a)
                    });
                    N(["gg", "GG"], function (a, b, c, f) {
                        b[f] =
                            r.parseTwoDigitYear(a)
                    });
                    G("Q", 0, "Qo", "quarter");
                    z("quarter", "Q");
                    za.quarter = 7;
                    J("Q", vb);
                    T("Q", function (a, b) {
                        b[cb] = 3 * (f(a) - 1)
                    });
                    G("D", ["DD", 2], "Do", "date");
                    z("date", "D");
                    za.date = 9;
                    J("D", ra);
                    J("DD", ra, Ga);
                    J("Do", function (a, b) {
                        return a ? b._ordinalParse : b._ordinalParseLenient
                    });
                    T(["D", "DD"], Wa);
                    T("Do", function (a, b) {
                        b[Wa] = f(a.match(ra)[0], 10)
                    });
                    var Xb = E("Date", !0);
                    G("DDD", ["DDDD", 3], "DDDo", "dayOfYear");
                    z("dayOfYear", "DDD");
                    za.dayOfYear = 4;
                    J("DDD", fb);
                    J("DDDD", Bb);
                    T(["DDD", "DDDD"], function (a, b, c) {
                        c._dayOfYear =
                            f(a)
                    });
                    G("m", ["mm", 2], 0, "minute");
                    z("minute", "m");
                    za.minute = 14;
                    J("m", ra);
                    J("mm", ra, Ga);
                    T(["m", "mm"], Sa);
                    var lc = E("Minutes", !1);
                    G("s", ["ss", 2], 0, "second");
                    z("second", "s");
                    za.second = 15;
                    J("s", ra);
                    J("ss", ra, Ga);
                    T(["s", "ss"], db);
                    var mc = E("Seconds", !1);
                    G("S", 0, 0, function () {
                        return ~~(this.millisecond() / 100)
                    });
                    G(0, ["SS", 2], 0, function () {
                        return ~~(this.millisecond() / 10)
                    });
                    G(0, ["SSS", 3], 0, "millisecond");
                    G(0, ["SSSS", 4], 0, function () {
                        return 10 * this.millisecond()
                    });
                    G(0, ["SSSSS", 5], 0, function () {
                        return 100 * this.millisecond()
                    });
                    G(0, ["SSSSSS", 6], 0, function () {
                        return 1E3 * this.millisecond()
                    });
                    G(0, ["SSSSSSS", 7], 0, function () {
                        return 1E4 * this.millisecond()
                    });
                    G(0, ["SSSSSSSS", 8], 0, function () {
                        return 1E5 * this.millisecond()
                    });
                    G(0, ["SSSSSSSSS", 9], 0, function () {
                        return 1E6 * this.millisecond()
                    });
                    z("millisecond", "ms");
                    za.millisecond = 16;
                    J("S", fb, vb);
                    J("SS", fb, Ga);
                    J("SSS", fb, Bb);
                    var Xa;
                    for (Xa = "SSSS"; 9 >= Xa.length; Xa += "S") J(Xa, Db);
                    for (Xa = "S"; 9 >= Xa.length; Xa += "S") T(Xa, Mb);
                    var nc = E("Milliseconds", !1);
                    G("z", 0, 0, "zoneAbbr");
                    G("zz", 0, 0, "zoneName");
                    var U = t.prototype;
                    U.add = jc;
                    U.calendar = function (a, b) {
                        var c = a || L(),
                            f = sa(c, this).startOf("day"),
                            f = r.calendarFormat(this, f) || "sameElse",
                            d = b && (x(b[f]) ? b[f].call(this, c) : b[f]);
                        return this.format(d || this.localeData().calendar(f, this, L(c)))
                    };
                    U.clone = function () {
                        return new t(this)
                    };
                    U.diff = function (a, b, c) {
                        var f;
                        if (!this.isValid()) return NaN;
                        a = sa(a, this);
                        if (!a.isValid()) return NaN;
                        f = 6E4 * (a.utcOffset() - this.utcOffset());
                        b = H(b);
                        if ("year" === b || "month" === b || "quarter" === b) {
                            f = 12 * (a.year() - this.year()) + (a.month() - this.month());
                            var d = this.clone().add(f, "months"),
                                e;
                            0 > a - d ? (e = this.clone().add(f - 1, "months"), a = (a - d) / (d - e)) : (e = this.clone().add(f + 1, "months"), a = (a - d) / (e - d));
                            a = -(f + a) || 0;
                            "quarter" === b ? a /= 3 : "year" === b && (a /= 12)
                        } else a = this - a, a = "second" === b ? a / 1E3 : "minute" === b ? a / 6E4 : "hour" === b ? a / 36E5 : "day" === b ? (a - f) / 864E5 : "week" === b ? (a - f) / 6048E5 : a;
                        return c ? a : n(a)
                    };
                    U.endOf = function (a) {
                        a = H(a);
                        if (void 0 === a || "millisecond" === a) return this;
                        "date" === a && (a = "day");
                        return this.startOf(a).add(1, "isoWeek" === a ? "week" : a).subtract(1, "ms")
                    };
                    U.format =
                        function (a) {
                            a || (a = this.isUtc() ? r.defaultFormatUtc : r.defaultFormat);
                            a = P(this, a);
                            return this.localeData().postformat(a)
                        };
                    U.from = function (a, b) {
                        return this.isValid() && (s(a) && a.isValid() || L(a).isValid()) ? fa({
                            to: this,
                            from: a
                        }).locale(this.locale()).humanize(!b) : this.localeData().invalidDate()
                    };
                    U.fromNow = function (a) {
                        return this.from(L(), a)
                    };
                    U.to = function (a, b) {
                        return this.isValid() && (s(a) && a.isValid() || L(a).isValid()) ? fa({
                            from: this,
                            to: a
                        }).locale(this.locale()).humanize(!b) : this.localeData().invalidDate()
                    };
                    U.toNow = function (a) {
                        return this.to(L(), a)
                    };
                    U.get = function (a) {
                        a = H(a);
                        return x(this[a]) ? this[a]() : this
                    };
                    U.invalidAt = function () {
                        return e(this).overflow
                    };
                    U.isAfter = function (a, b) {
                        var c = s(a) ? a : L(a);
                        if (!this.isValid() || !c.isValid()) return !1;
                        b = H(!d(b) ? b : "millisecond");
                        return "millisecond" === b ? this.valueOf() > c.valueOf() : c.valueOf() < this.clone().startOf(b).valueOf()
                    };
                    U.isBefore = function (a, b) {
                        var c = s(a) ? a : L(a);
                        if (!this.isValid() || !c.isValid()) return !1;
                        b = H(!d(b) ? b : "millisecond");
                        return "millisecond" === b ? this.valueOf() <
                            c.valueOf() : this.clone().endOf(b).valueOf() < c.valueOf()
                    };
                    U.isBetween = function (a, b, c, f) {
                        f = f || "()";
                        return ("(" === f[0] ? this.isAfter(a, c) : !this.isBefore(a, c)) && (")" === f[1] ? this.isBefore(b, c) : !this.isAfter(b, c))
                    };
                    U.isSame = function (a, b) {
                        var c = s(a) ? a : L(a);
                        if (!this.isValid() || !c.isValid()) return !1;
                        b = H(b || "millisecond");
                        if ("millisecond" === b) return this.valueOf() === c.valueOf();
                        c = c.valueOf();
                        return this.clone().startOf(b).valueOf() <= c && c <= this.clone().endOf(b).valueOf()
                    };
                    U.isSameOrAfter = function (a, b) {
                        return this.isSame(a,
                            b) || this.isAfter(a, b)
                    };
                    U.isSameOrBefore = function (a, b) {
                        return this.isSame(a, b) || this.isBefore(a, b)
                    };
                    U.isValid = function () {
                        return c(this)
                    };
                    U.lang = Wb;
                    U.locale = V;
                    U.localeData = X;
                    U.max = ic;
                    U.min = hc;
                    U.parsingFlags = function () {
                        return k({}, e(this))
                    };
                    U.set = function (a, b) {
                        if ("object" === typeof a) {
                            a = D(a);
                            for (var c = F(a), f = 0; f < c.length; f++) this[c[f].unit](a[c[f].unit])
                        } else if (a = H(a), x(this[a])) return this[a](b);
                        return this
                    };
                    U.startOf = function (a) {
                        a = H(a);
                        switch (a) {
                        case "year":
                            this.month(0);
                        case "quarter":
                        case "month":
                            this.date(1);
                        case "week":
                        case "isoWeek":
                        case "day":
                        case "date":
                            this.hours(0);
                        case "hour":
                            this.minutes(0);
                        case "minute":
                            this.seconds(0);
                        case "second":
                            this.milliseconds(0)
                        }
                        "week" === a && this.weekday(0);
                        "isoWeek" === a && this.isoWeekday(1);
                        "quarter" === a && this.month(3 * Math.floor(this.month() / 3));
                        return this
                    };
                    U.subtract = kc;
                    U.toArray = function () {
                        return [this.year(), this.month(), this.date(), this.hour(), this.minute(), this.second(), this.millisecond()]
                    };
                    U.toObject = function () {
                        return {
                            years: this.year(),
                            months: this.month(),
                            date: this.date(),
                            hours: this.hours(),
                            minutes: this.minutes(),
                            seconds: this.seconds(),
                            milliseconds: this.milliseconds()
                        }
                    };
                    U.toDate = function () {
                        return new Date(this.valueOf())
                    };
                    U.toISOString = function () {
                        var a = this.clone().utc();
                        return 0 < a.year() && 9999 >= a.year() ? x(Date.prototype.toISOString) ? this.toDate().toISOString() : P(a, "YYYY-MM-DD[T]HH:mm:ss.SSS[Z]") : P(a, "YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")
                    };
                    U.toJSON = function () {
                        return this.isValid() ? this.toISOString() : null
                    };
                    U.toString = function () {
                        return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")
                    };
                    U.unix = function () {
                        return Math.floor(this.valueOf() / 1E3)
                    };
                    U.valueOf = function () {
                        return this._d.valueOf() - 6E4 * (this._offset || 0)
                    };
                    U.creationData = function () {
                        return {
                            input: this._i,
                            format: this._f,
                            locale: this._locale,
                            isUTC: this._isUTC,
                            strict: this._strict
                        }
                    };
                    U.year = Vb;
                    U.isLeapYear = function () {
                        return ea(this.year())
                    };
                    U.weekYear = function (a) {
                        return Gb.call(this, a, this.week(), this.weekday(), this.localeData()._week.dow, this.localeData()._week.doy)
                    };
                    U.isoWeekYear = function (a) {
                        return Gb.call(this, a, this.isoWeek(), this.isoWeekday(),
                            1, 4)
                    };
                    U.quarter = U.quarters = function (a) {
                        return null == a ? Math.ceil((this.month() + 1) / 3) : this.month(3 * (a - 1) + this.month() % 3)
                    };
                    U.month = ga;
                    U.daysInMonth = function () {
                        return Y(this.year(), this.month())
                    };
                    U.week = U.weeks = function (a) {
                        var b = this.localeData().week(this);
                        return null == a ? b : this.add(7 * (a - b), "d")
                    };
                    U.isoWeek = U.isoWeeks = function (a) {
                        var b = oa(this, 1, 4).week;
                        return null == a ? b : this.add(7 * (a - b), "d")
                    };
                    U.weeksInYear = function () {
                        var a = this.localeData()._week;
                        return na(this.year(), a.dow, a.doy)
                    };
                    U.isoWeeksInYear = function () {
                        return na(this.year(),
                            1, 4)
                    };
                    U.date = Xb;
                    U.day = U.days = function (a) {
                        if (!this.isValid()) return null != a ? this : NaN;
                        var b = this._isUTC ? this._d.getUTCDay() : this._d.getDay();
                        if (null != a) {
                            var c = this.localeData();
                            "string" === typeof a && (isNaN(a) ? (a = c.weekdaysParse(a), a = "number" === typeof a ? a : null) : a = parseInt(a, 10));
                            return this.add(a - b, "d")
                        }
                        return b
                    };
                    U.weekday = function (a) {
                        if (!this.isValid()) return null != a ? this : NaN;
                        var b = (this.day() + 7 - this.localeData()._week.dow) % 7;
                        return null == a ? b : this.add(a - b, "d")
                    };
                    U.isoWeekday = function (a) {
                        if (!this.isValid()) return null !=
                            a ? this : NaN;
                        if (null != a) {
                            var b = this.localeData();
                            a = "string" === typeof a ? b.weekdaysParse(a) % 7 || 7 : isNaN(a) ? null : a;
                            return this.day(this.day() % 7 ? a : a - 7)
                        }
                        return this.day() || 7
                    };
                    U.dayOfYear = function (a) {
                        var b = Math.round((this.clone().startOf("day") - this.clone().startOf("year")) / 864E5) + 1;
                        return null == a ? b : this.add(a - b, "d")
                    };
                    U.hour = U.hours = gc;
                    U.minute = U.minutes = lc;
                    U.second = U.seconds = mc;
                    U.millisecond = U.milliseconds = nc;
                    U.utcOffset = function (a, b) {
                        var c = this._offset || 0,
                            f;
                        return !this.isValid() ? null != a ? this : NaN : null !=
                            a ? ("string" === typeof a ? a = ca(Fb, a) : 16 > Math.abs(a) && (a *= 60), !this._isUTC && b && (f = 15 * -Math.round(this._d.getTimezoneOffset() / 15)), this._offset = a, this._isUTC = !0, null != f && this.add(f, "m"), c !== a && (!b || this._changeInProgress ? ka(this, fa(a - c, "m"), 1, !1) : this._changeInProgress || (this._changeInProgress = !0, r.updateOffset(this, !0), this._changeInProgress = null)), this) : this._isUTC ? c : 15 * -Math.round(this._d.getTimezoneOffset() / 15)
                    };
                    U.utc = function (a) {
                        return this.utcOffset(0, a)
                    };
                    U.local = function (a) {
                        this._isUTC && (this.utcOffset(0,
                            a), this._isUTC = !1, a && this.subtract(15 * -Math.round(this._d.getTimezoneOffset() / 15), "m"));
                        return this
                    };
                    U.parseZone = function () {
                        this._tzm ? this.utcOffset(this._tzm) : "string" === typeof this._i && (0 === ca(Eb, this._i) ? this.utcOffset(0, !0) : this.utcOffset(ca(Eb, this._i)));
                        return this
                    };
                    U.hasAlignedHourOffset = function (a) {
                        if (!this.isValid()) return !1;
                        a = a ? L(a).utcOffset() : 0;
                        return 0 === (this.utcOffset() - a) % 60
                    };
                    U.isDST = function () {
                        return this.utcOffset() > this.clone().month(0).utcOffset() || this.utcOffset() > this.clone().month(5).utcOffset()
                    };
                    U.isLocal = function () {
                        return this.isValid() ? !this._isUTC : !1
                    };
                    U.isUtcOffset = function () {
                        return this.isValid() ? this._isUTC : !1
                    };
                    U.isUtc = S;
                    U.isUTC = S;
                    U.zoneAbbr = function () {
                        return this._isUTC ? "UTC" : ""
                    };
                    U.zoneName = function () {
                        return this._isUTC ? "Coordinated Universal Time" : ""
                    };
                    U.dates = w("dates accessor is deprecated. Use date instead.", Xb);
                    U.months = w("months accessor is deprecated. Use month instead", ga);
                    U.years = w("years accessor is deprecated. Use year instead", Vb);
                    U.zone = w("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",
                        function (a, b) {
                            return null != a ? ("string" !== typeof a && (a = -a), this.utcOffset(a, b), this) : -this.utcOffset()
                        });
                    U.isDSTShifted = w("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information", function () {
                        if (!d(this._isDSTShifted)) return this._isDSTShifted;
                        var a = {};
                        m(a, this);
                        a = Ya(a);
                        if (a._a) {
                            var b = a._isUTC ? l(a._a) : L(a._a);
                            this._isDSTShifted = this.isValid() && 0 < y(a._a, b.toArray())
                        } else this._isDSTShifted = !1;
                        return this._isDSTShifted
                    });
                    var ta = A.prototype;
                    ta.calendar = function (a,
                        b, c) {
                        a = this._calendar[a] || this._calendar.sameElse;
                        return x(a) ? a.call(b, c) : a
                    };
                    ta.longDateFormat = function (a) {
                        var b = this._longDateFormat[a],
                            c = this._longDateFormat[a.toUpperCase()];
                        if (b || !c) return b;
                        this._longDateFormat[a] = c.replace(/MMMM|MM|DD|dddd/g, function (a) {
                            return a.slice(1)
                        });
                        return this._longDateFormat[a]
                    };
                    ta.invalidDate = function () {
                        return this._invalidDate
                    };
                    ta.ordinal = function (a) {
                        return this._ordinal.replace("%d", a)
                    };
                    ta.preparse = Hb;
                    ta.postformat = Hb;
                    ta.relativeTime = function (a, b, c, f) {
                        var d = this._relativeTime[c];
                        return x(d) ? d(a, b, c, f) : d.replace(/%d/i, a)
                    };
                    ta.pastFuture = function (a, b) {
                        var c = this._relativeTime[0 < a ? "future" : "past"];
                        return x(c) ? c(b) : c.replace(/%s/i, b)
                    };
                    ta.set = function (a) {
                        var b, c;
                        for (c in a) b = a[c], x(b) ? this[c] = b : this["_" + c] = b;
                        this._config = a;
                        this._ordinalParseLenient = RegExp(this._ordinalParse.source + "|" + /\d{1,2}/.source)
                    };
                    ta.months = function (a, b) {
                        return !a ? this._months : p(this._months) ? this._months[a.month()] : this._months[(this._months.isFormat || Ub).test(b) ? "format" : "standalone"][a.month()]
                    };
                    ta.monthsShort =
                        function (a, b) {
                            return !a ? this._monthsShort : p(this._monthsShort) ? this._monthsShort[a.month()] : this._monthsShort[Ub.test(b) ? "format" : "standalone"][a.month()]
                        };
                    ta.monthsParse = function (a, b, c) {
                        var f, d;
                        if (this._monthsParseExact) {
                            a: {
                                a = a.toLocaleLowerCase();
                                if (!this._monthsParse) {
                                    this._monthsParse = [];
                                    this._longMonthsParse = [];
                                    this._shortMonthsParse = [];
                                    for (f = 0; 12 > f; ++f) d = l([2E3, f]), this._shortMonthsParse[f] = this.monthsShort(d, "").toLocaleLowerCase(), this._longMonthsParse[f] = this.months(d, "").toLocaleLowerCase()
                                }
                                if (c) b =
                                    "MMM" === b ? Da.call(this._shortMonthsParse, a) : Da.call(this._longMonthsParse, a);
                                else if ("MMM" === b) {
                                    b = Da.call(this._shortMonthsParse, a);
                                    if (-1 !== b) break a;
                                    b = Da.call(this._longMonthsParse, a)
                                } else {
                                    b = Da.call(this._longMonthsParse, a);
                                    if (-1 !== b) break a;
                                    b = Da.call(this._shortMonthsParse, a)
                                }
                                b = -1 !== b ? b : null
                            }
                            return b
                        }
                        this._monthsParse || (this._monthsParse = [], this._longMonthsParse = [], this._shortMonthsParse = []);
                        for (f = 0; 12 > f; f++)
                            if (d = l([2E3, f]), c && !this._longMonthsParse[f] && (this._longMonthsParse[f] = RegExp("^" + this.months(d,
                                    "").replace(".", "") + "$", "i"), this._shortMonthsParse[f] = RegExp("^" + this.monthsShort(d, "").replace(".", "") + "$", "i")), !c && !this._monthsParse[f] && (d = "^" + this.months(d, "") + "|^" + this.monthsShort(d, ""), this._monthsParse[f] = RegExp(d.replace(".", ""), "i")), c && "MMMM" === b && this._longMonthsParse[f].test(a) || c && "MMM" === b && this._shortMonthsParse[f].test(a) || !c && this._monthsParse[f].test(a)) return f
                    };
                    ta.monthsRegex = function (a) {
                        if (this._monthsParseExact) return h(this, "_monthsRegex") || aa.call(this), a ? this._monthsStrictRegex :
                            this._monthsRegex;
                        h(this, "_monthsRegex") || (this._monthsRegex = xb);
                        return this._monthsStrictRegex && a ? this._monthsStrictRegex : this._monthsRegex
                    };
                    ta.monthsShortRegex = function (a) {
                        if (this._monthsParseExact) return h(this, "_monthsRegex") || aa.call(this), a ? this._monthsShortStrictRegex : this._monthsShortRegex;
                        h(this, "_monthsShortRegex") || (this._monthsShortRegex = xb);
                        return this._monthsShortStrictRegex && a ? this._monthsShortStrictRegex : this._monthsShortRegex
                    };
                    ta.week = function (a) {
                        return oa(a, this._week.dow, this._week.doy).week
                    };
                    ta.firstDayOfYear = function () {
                        return this._week.doy
                    };
                    ta.firstDayOfWeek = function () {
                        return this._week.dow
                    };
                    ta.weekdays = function (a, b) {
                        return !a ? this._weekdays : p(this._weekdays) ? this._weekdays[a.day()] : this._weekdays[this._weekdays.isFormat.test(b) ? "format" : "standalone"][a.day()]
                    };
                    ta.weekdaysMin = function (a) {
                        return a ? this._weekdaysMin[a.day()] : this._weekdaysMin
                    };
                    ta.weekdaysShort = function (a) {
                        return a ? this._weekdaysShort[a.day()] : this._weekdaysShort
                    };
                    ta.weekdaysParse = function (a, b, c) {
                        var f, d;
                        if (this._weekdaysParseExact) return ia.call(this,
                            a, b, c);
                        this._weekdaysParse || (this._weekdaysParse = [], this._minWeekdaysParse = [], this._shortWeekdaysParse = [], this._fullWeekdaysParse = []);
                        for (f = 0; 7 > f; f++)
                            if (d = l([2E3, 1]).day(f), c && !this._fullWeekdaysParse[f] && (this._fullWeekdaysParse[f] = RegExp("^" + this.weekdays(d, "").replace(".", ".?") + "$", "i"), this._shortWeekdaysParse[f] = RegExp("^" + this.weekdaysShort(d, "").replace(".", ".?") + "$", "i"), this._minWeekdaysParse[f] = RegExp("^" + this.weekdaysMin(d, "").replace(".", ".?") + "$", "i")), this._weekdaysParse[f] || (d = "^" +
                                    this.weekdays(d, "") + "|^" + this.weekdaysShort(d, "") + "|^" + this.weekdaysMin(d, ""), this._weekdaysParse[f] = RegExp(d.replace(".", ""), "i")), c && "dddd" === b && this._fullWeekdaysParse[f].test(a) || c && "ddd" === b && this._shortWeekdaysParse[f].test(a) || c && "dd" === b && this._minWeekdaysParse[f].test(a) || !c && this._weekdaysParse[f].test(a)) return f
                    };
                    ta.weekdaysRegex = function (a) {
                        if (this._weekdaysParseExact) return h(this, "_weekdaysRegex") || ma.call(this), a ? this._weekdaysStrictRegex : this._weekdaysRegex;
                        h(this, "_weekdaysRegex") ||
                            (this._weekdaysRegex = xb);
                        return this._weekdaysStrictRegex && a ? this._weekdaysStrictRegex : this._weekdaysRegex
                    };
                    ta.weekdaysShortRegex = function (a) {
                        if (this._weekdaysParseExact) return h(this, "_weekdaysRegex") || ma.call(this), a ? this._weekdaysShortStrictRegex : this._weekdaysShortRegex;
                        h(this, "_weekdaysShortRegex") || (this._weekdaysShortRegex = xb);
                        return this._weekdaysShortStrictRegex && a ? this._weekdaysShortStrictRegex : this._weekdaysShortRegex
                    };
                    ta.weekdaysMinRegex = function (a) {
                        if (this._weekdaysParseExact) return h(this,
                            "_weekdaysRegex") || ma.call(this), a ? this._weekdaysMinStrictRegex : this._weekdaysMinRegex;
                        h(this, "_weekdaysMinRegex") || (this._weekdaysMinRegex = xb);
                        return this._weekdaysMinStrictRegex && a ? this._weekdaysMinStrictRegex : this._weekdaysMinRegex
                    };
                    ta.isPM = function (a) {
                        return "p" === (a + "").toLowerCase().charAt(0)
                    };
                    ta.meridiem = function (a, b, c) {
                        return 11 < a ? c ? "pm" : "PM" : c ? "am" : "AM"
                    };
                    qa("en", {
                        ordinalParse: /\d{1,2}(th|st|nd|rd)/,
                        ordinal: function (a) {
                            var b = a % 10,
                                b = 1 === f(a % 100 / 10) ? "th" : 1 === b ? "st" : 2 === b ? "nd" : 3 === b ? "rd" : "th";
                            return a + b
                        }
                    });
                    r.lang = w("moment.lang is deprecated. Use moment.locale instead.", qa);
                    r.langData = w("moment.langData is deprecated. Use moment.localeData instead.", ja);
                    var ib = Math.abs,
                        oc = Ta("ms"),
                        pc = Ta("s"),
                        qc = Ta("m"),
                        rc = Ta("h"),
                        sc = Ta("d"),
                        tc = Ta("w"),
                        uc = Ta("M"),
                        vc = Ta("y"),
                        wc = Na("milliseconds"),
                        xc = Na("seconds"),
                        yc = Na("minutes"),
                        zc = Na("hours"),
                        Ac = Na("days"),
                        Bc = Na("months"),
                        Cc = Na("years"),
                        nb = Math.round,
                        ob = {
                            s: 45,
                            m: 45,
                            h: 22,
                            d: 26,
                            M: 11
                        },
                        Sb = Math.abs,
                        la = $a.prototype;
                    la.abs = function () {
                        var a = this._data;
                        this._milliseconds =
                            ib(this._milliseconds);
                        this._days = ib(this._days);
                        this._months = ib(this._months);
                        a.milliseconds = ib(a.milliseconds);
                        a.seconds = ib(a.seconds);
                        a.minutes = ib(a.minutes);
                        a.hours = ib(a.hours);
                        a.months = ib(a.months);
                        a.years = ib(a.years);
                        return this
                    };
                    la.add = function (a, b) {
                        return Jb(this, a, b, 1)
                    };
                    la.subtract = function (a, b) {
                        return Jb(this, a, b, -1)
                    };
                    la.as = function (a) {
                        var b, c = this._milliseconds;
                        a = H(a);
                        if ("month" === a || "year" === a) return b = this._days + c / 864E5, b = this._months + 4800 * b / 146097, "month" === a ? b : b / 12;
                        b = this._days + Math.round(146097 *
                            this._months / 4800);
                        switch (a) {
                        case "week":
                            return b / 7 + c / 6048E5;
                        case "day":
                            return b + c / 864E5;
                        case "hour":
                            return 24 * b + c / 36E5;
                        case "minute":
                            return 1440 * b + c / 6E4;
                        case "second":
                            return 86400 * b + c / 1E3;
                        case "millisecond":
                            return Math.floor(864E5 * b) + c;
                        default:
                            throw Error("Unknown unit " + a);
                        }
                    };
                    la.asMilliseconds = oc;
                    la.asSeconds = pc;
                    la.asMinutes = qc;
                    la.asHours = rc;
                    la.asDays = sc;
                    la.asWeeks = tc;
                    la.asMonths = uc;
                    la.asYears = vc;
                    la.valueOf = function () {
                        return this._milliseconds + 864E5 * this._days + 2592E6 * (this._months % 12) + 31536E6 * f(this._months /
                            12)
                    };
                    la._bubble = function () {
                        var a = this._milliseconds,
                            b = this._days,
                            c = this._months,
                            f = this._data;
                        0 <= a && 0 <= b && 0 <= c || 0 >= a && 0 >= b && 0 >= c || (a += 864E5 * (0 > 146097 * c / 4800 + b ? Math.floor(146097 * c / 4800 + b) : Math.ceil(146097 * c / 4800 + b)), c = b = 0);
                        f.milliseconds = a % 1E3;
                        a = n(a / 1E3);
                        f.seconds = a % 60;
                        a = n(a / 60);
                        f.minutes = a % 60;
                        a = n(a / 60);
                        f.hours = a % 24;
                        b += n(a / 24);
                        a = n(4800 * b / 146097);
                        c += a;
                        b -= 0 > 146097 * a / 4800 ? Math.floor(146097 * a / 4800) : Math.ceil(146097 * a / 4800);
                        a = n(c / 12);
                        f.days = b;
                        f.months = c % 12;
                        f.years = a;
                        return this
                    };
                    la.get = function (a) {
                        a = H(a);
                        return this[a + "s"]()
                    };
                    la.milliseconds = wc;
                    la.seconds = xc;
                    la.minutes = yc;
                    la.hours = zc;
                    la.days = Ac;
                    la.weeks = function () {
                        return n(this.days() / 7)
                    };
                    la.months = Bc;
                    la.years = Cc;
                    la.humanize = function (a) {
                        var b = this.localeData(),
                            c;
                        c = !a;
                        var f = fa(this).abs(),
                            d = nb(f.as("s")),
                            e = nb(f.as("m")),
                            m = nb(f.as("h")),
                            n = nb(f.as("d")),
                            s = nb(f.as("M")),
                            f = nb(f.as("y")),
                            d = d < ob.s && ["s", d] || 1 >= e && ["m"] || e < ob.m && ["mm", e] || 1 >= m && ["h"] || m < ob.h && ["hh", m] || 1 >= n && ["d"] || n < ob.d && ["dd", n] || 1 >= s && ["M"] || s < ob.M && ["MM", s] || 1 >= f && ["y"] || ["yy", f];
                        d[2] =
                            c;
                        d[3] = 0 < +this;
                        d[4] = b;
                        c = Ua.apply(null, d);
                        a && (c = b.pastFuture(+this, c));
                        return b.postformat(c)
                    };
                    la.toISOString = tb;
                    la.toString = tb;
                    la.toJSON = tb;
                    la.locale = V;
                    la.localeData = X;
                    la.toIsoString = w("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)", tb);
                    la.lang = Wb;
                    G("X", 0, 0, "unix");
                    G("x", 0, 0, "valueOf");
                    J("x", hb);
                    J("X", /[+-]?\d+(\.\d{1,3})?/);
                    T("X", function (a, b, c) {
                        c._d = new Date(1E3 * parseFloat(a, 10))
                    });
                    T("x", function (a, b, c) {
                        c._d = new Date(f(a))
                    });
                    r.version = "2.15.2";
                    Kb = L;
                    r.fn = U;
                    r.min =
                        function () {
                            var a = [].slice.call(arguments, 0);
                            return Fa("isBefore", a)
                        };
                    r.max = function () {
                        var a = [].slice.call(arguments, 0);
                        return Fa("isAfter", a)
                    };
                    r.now = function () {
                        return Date.now ? Date.now() : +new Date
                    };
                    r.utc = l;
                    r.unix = function (a) {
                        return L(1E3 * a)
                    };
                    r.months = function (a, b) {
                        return Ib(a, b, "months")
                    };
                    r.isDate = g;
                    r.locale = qa;
                    r.invalid = b;
                    r.duration = fa;
                    r.isMoment = s;
                    r.weekdays = function (a, b, c) {
                        return yb(a, b, c, "weekdays")
                    };
                    r.parseZone = function () {
                        return L.apply(null, arguments).parseZone()
                    };
                    r.localeData = ja;
                    r.isDuration =
                        $;
                    r.monthsShort = function (a, b) {
                        return Ib(a, b, "monthsShort")
                    };
                    r.weekdaysMin = function (a, b, c) {
                        return yb(a, b, c, "weekdaysMin")
                    };
                    r.defineLocale = wa;
                    r.updateLocale = function (a, b) {
                        if (null != b) {
                            var c;
                            c = Tb;
                            null != Aa[a] && (c = Aa[a]._config);
                            b = v(c, b);
                            c = new A(b);
                            c.parentLocale = Aa[a];
                            Aa[a] = c;
                            qa(a)
                        } else null != Aa[a] && (null != Aa[a].parentLocale ? Aa[a] = Aa[a].parentLocale : null != Aa[a] && delete Aa[a]);
                        return Aa[a]
                    };
                    r.locales = function () {
                        return ub(Aa)
                    };
                    r.weekdaysShort = function (a, b, c) {
                        return yb(a, b, c, "weekdaysShort")
                    };
                    r.normalizeUnits =
                        H;
                    r.relativeTimeRounding = function (a) {
                        return void 0 === a ? nb : "function" === typeof a ? (nb = a, !0) : !1
                    };
                    r.relativeTimeThreshold = function (a, b) {
                        if (void 0 === ob[a]) return !1;
                        if (void 0 === b) return ob[a];
                        ob[a] = b;
                        return !0
                    };
                    r.calendarFormat = function (a, b) {
                        var c = a.diff(b, "days", !0);
                        return -6 > c ? "sameElse" : -1 > c ? "lastWeek" : 0 > c ? "lastDay" : 1 > c ? "sameDay" : 2 > c ? "nextDay" : 7 > c ? "nextWeek" : "sameElse"
                    };
                    r.prototype = U;
                    return r
                })
        },
        "esri/arcade/ImmutableArray": function () {
            define(["require", "exports"], function (r, p) {
                return function () {
                    function a(a) {
                        void 0 ===
                            a && (a = []);
                        this._elements = a
                    }
                    a.prototype.length = function () {
                        return this._elements.length
                    };
                    a.prototype.get = function (a) {
                        return this._elements[a]
                    };
                    a.prototype.toArray = function () {
                        for (var a = [], q = 0; q < this.length(); q++) a.push(this.get(q));
                        return a
                    };
                    return a
                }()
            })
        },
        "esri/arcade/ImmutablePointArray": function () {
            define("require exports ../core/tsSupport/extendsHelper ./ImmutableArray ../geometry/Point ../kernel".split(" "), function (r, p, a, g, q, h) {
                var k = 0 === h.version.indexOf("4.");
                return function (g) {
                    function e(a, b,
                        d, e, t, s) {
                        g.call(this, a);
                        this._lazyPt = [];
                        this._hasM = this._hasZ = !1;
                        this._spRef = b;
                        this._hasZ = d;
                        this._hasM = e;
                        this._cacheId = t;
                        this._partId = s
                    }
                    a(e, g);
                    e.prototype.get = function (a) {
                        if (void 0 === this._lazyPt[a]) {
                            var b = this._elements[a];
                            if (void 0 === b) return;
                            var d = this._hasZ,
                                e = this._hasM,
                                g = null,
                                g = d && !e ? new q(b[0], b[1], b[2], void 0, this._spRef) : e && d ? new q(b[0], b[1], void 0, b[2], this._spRef) : d && e ? new q(b[0], b[1], b[2], b[3], this._spRef) : new q(b[0], b[1], this._spRef);
                            k ? g.cache._arcadeCacheId = this._cacheId.toString() + "-" +
                                this._partId.toString() + "-" + a.toString() : g.setCacheValue("_arcadeCacheId", this._cacheId.toString() + "-" + this._partId.toString() + "-" + a.toString());
                            this._lazyPt[a] = g
                        }
                        return this._lazyPt[a]
                    };
                    e.prototype.equalityTest = function (a) {
                        return a === this ? !0 : null === a || !1 === a instanceof e ? !1 : a.getUniqueHash() === this.getUniqueHash()
                    };
                    e.prototype.getUniqueHash = function () {
                        return this._cacheId.toString() + "-" + this._partId.toString()
                    };
                    return e
                }(g)
            })
        },
        "esri/core/tsSupport/extendsHelper": function () {
            define([], function () {
                return function (r,
                    p) {
                    function a() {
                        this.constructor = r
                    }
                    for (var g in p) p.hasOwnProperty(g) && (r[g] = p[g]);
                    r.prototype = null === p ? Object.create(p) : (a.prototype = p.prototype, new a)
                }
            })
        },
        "esri/arcade/ImmutablePathArray": function () {
            define(["require", "exports", "../core/tsSupport/extendsHelper", "./ImmutableArray", "./ImmutablePointArray"], function (r, p, a, g, q) {
                return function (g) {
                    function k(a, e, c, b, d) {
                        g.call(this, a);
                        this._lazyPath = [];
                        this._hasM = this._hasZ = !1;
                        this._hasZ = c;
                        this._hasM = b;
                        this._spRef = e;
                        this._cacheId = d
                    }
                    a(k, g);
                    k.prototype.get =
                        function (a) {
                            if (void 0 === this._lazyPath[a]) {
                                var e = this._elements[a];
                                if (void 0 === e) return;
                                this._lazyPath[a] = new q(e, this._spRef, this._hasZ, this._hasM, this._cacheId, a)
                            }
                            return this._lazyPath[a]
                        };
                    k.prototype.equalityTest = function (a) {
                        return a === this ? !0 : null === a || !1 === a instanceof k ? !1 : a.getUniqueHash() === this.getUniqueHash()
                    };
                    k.prototype.getUniqueHash = function () {
                        return this._cacheId.toString()
                    };
                    return k
                }(g)
            })
        },
        "esri/arcade/FunctionWrapper": function () {
            define(["require", "exports"], function (r, p) {
                return function () {
                    return function (a,
                        g) {
                        this.context = this.definition = null;
                        this.definition = a;
                        this.context = g
                    }
                }()
            })
        },
        "esri/geometry/ScreenPoint": function () {
            define(["dojo/_base/declare", "dojo/_base/lang", "dojo/has", "../kernel", "./Point"], function (r, p, a, g, q) {
                r = r(q, {
                    declaredClass: "esri.geometry.ScreenPoint",
                    verifySR: function () {}
                });
                a("extend-esri") && p.setObject("geometry.ScreenPoint", r, g);
                return r
            })
        },
        "esri/geometry/Rect": function () {
            define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ../SpatialReference ./Geometry ./Point ./Extent ../srUtils".split(" "),
                function (r, p, a, g, q, h, k, l, e, c) {
                    function b(a) {
                        return new e(parseFloat(a.x), parseFloat(a.y) - parseFloat(a.height), parseFloat(a.x) + parseFloat(a.width), parseFloat(a.y), a.spatialReference)
                    }
                    var d = r(k, {
                        declaredClass: "esri.geometry.Rect",
                        constructor: function (a, b, d, e, f) {
                            p.mixin(this, g.defaultRect);
                            p.isObject(a) && "extent" === a.type && (b = a.ymax, d = a.getWidth(), e = a.getHeight(), f = a.spatialReference, a = a.xmin);
                            p.isObject(a) ? (p.mixin(this, a), this.spatialReference && (this.spatialReference = c.createSpatialReference(this.spatialReference))) :
                                (this.x = a, this.y = b, this.width = d, this.height = e, this.spatialReference = f);
                            this.verifySR()
                        },
                        getCenter: function () {
                            return new l(this.x + this.width / 2, this.y + this.height / 2, this.spatialReference)
                        },
                        offset: function (a, b) {
                            return new d(this.x + a, this.y + b, this.width, this.height, this.spatialReference)
                        },
                        intersects: function (a) {
                            return a.x + a.width <= this.x || a.y + a.height <= this.y || a.y >= this.y + this.height || a.x >= this.x + this.width ? !1 : !0
                        },
                        getExtent: function () {
                            return b(this)
                        },
                        update: function (a, b, c, d, f) {
                            this.x = a;
                            this.y = b;
                            this.width =
                                c;
                            this.height = d;
                            this.spatialReference = f;
                            this.clearCache();
                            return this
                        }
                    });
                    a("extend-esri") && (p.setObject("geometry.Rect", d, q), q.geometry._rectToExtent = b, q.geometry._extentToRect = function (a) {
                        return new d(a)
                    });
                    return d
                })
        },
        "esri/geometry/scaleUtils": function () {
            define("dojo/_base/lang dojo/has ../kernel ../config ../lang ../WKIDUnitConversion".split(" "), function (r, p, a, g, q, h) {
                function k(a, d, m) {
                    return a && d ? a.getWidth() / d * (m || c) * e * b.screenDPI : 0
                }

                function l(a, m, n, f, g) {
                    return a.expand(f * m / (((g ? n : d.values[d[n]]) ||
                        c) * e * b.screenDPI) / a.getWidth())
                }
                var e = 39.37,
                    c = 6370997 * Math.PI / 180,
                    b = g.defaults,
                    d = h,
                    m = {
                        getUnitValueForSR: function (a) {
                            return this.getUnitValue(a) || c
                        },
                        getUnitValue: function (a) {
                            var b, c, f;
                            a && ("object" === typeof a ? (b = a.wkid, c = a.wkt) : "number" === typeof a ? b = a : "string" === typeof a && (c = a));
                            b ? f = d.values[d[b]] : c && -1 !== c.search(/^PROJCS/i) && (a = /UNIT\[([^\]]+)\]\]$/i.exec(c)) && a[1] && (f = parseFloat(a[1].split(",")[1]));
                            return f
                        },
                        getScale: function (a, b, c) {
                            var f, d, e;
                            1 < arguments.length && q.isDefined(b) && !b.declaredClass ?
                                (f = a, d = b, b = null, e = m.getUnitValue(c)) : (f = b || a.extent, d = a.width, e = m.getUnitValue(f && f.spatialReference));
                            return k(f, d, e)
                        },
                        getExtentForScale: function (a, b, c) {
                            return l(c || a.extent, a.width, m.getUnitValue(a.spatialReference), b, !0)
                        }
                    };
                p("extend-esri") && (r.mixin(r.getObject("geometry", !0, a), m), a.geometry._getScale = k, a.geometry._getExtentForScale = l);
                return m
            })
        },
        "esri/WKIDUnitConversion": function () {
            define(["dojo/has", "./kernel"], function (r, p) {
                var a, g = {
                    values: [1, 0.3048, 0.3048006096012192, 0.3047972654, 0.9143917962,
0.201166195164, 0.9143984146160287, 0.3047994715386762, 20.11676512155263, 20.11678249437587, 0.9143985307444408, 0.91439523, 0.3047997101815088, 20.116756, 5E4, 15E4],
                    2066: 5,
                    2136: 12,
                    2155: 2,
                    2157: 0,
                    2158: 0,
                    2159: 12,
                    2160: 12,
                    2204: 2,
                    2219: 0,
                    2220: 0,
                    2254: 2,
                    2255: 2,
                    2256: 1,
                    2265: 1,
                    2266: 1,
                    2267: 2,
                    2268: 2,
                    2269: 1,
                    2270: 1,
                    2271: 2,
                    2272: 2,
                    2273: 1,
                    2294: 0,
                    2295: 0,
                    2314: 3,
                    2899: 2,
                    2900: 2,
                    2901: 1,
                    2909: 1,
                    2910: 1,
                    2911: 2,
                    2912: 2,
                    2913: 1,
                    2914: 1,
                    2992: 1,
                    2993: 0,
                    2994: 1,
                    3080: 1,
                    3089: 2,
                    3090: 0,
                    3091: 2,
                    3102: 2,
                    3141: 0,
                    3142: 0,
                    3167: 13,
                    3359: 2,
                    3360: 0,
                    3361: 1,
                    3362: 0,
                    3363: 2,
                    3364: 0,
                    3365: 2,
                    3366: 3,
                    3404: 2,
                    3405: 0,
                    3406: 0,
                    3407: 3,
                    3439: 0,
                    3440: 0,
                    3479: 1,
                    3480: 0,
                    3481: 1,
                    3482: 0,
                    3483: 1,
                    3484: 0,
                    3485: 2,
                    3486: 0,
                    3487: 2,
                    3488: 0,
                    3489: 0,
                    3490: 2,
                    3491: 0,
                    3492: 2,
                    3493: 0,
                    3494: 2,
                    3495: 0,
                    3496: 2,
                    3497: 0,
                    3498: 2,
                    3499: 0,
                    3500: 2,
                    3501: 0,
                    3502: 2,
                    3503: 0,
                    3504: 2,
                    3505: 0,
                    3506: 2,
                    3507: 0,
                    3508: 2,
                    3509: 0,
                    3510: 2,
                    3511: 0,
                    3512: 2,
                    3513: 0,
                    3514: 0,
                    3515: 2,
                    3516: 0,
                    3517: 2,
                    3518: 0,
                    3519: 2,
                    3520: 0,
                    3521: 2,
                    3522: 0,
                    3523: 2,
                    3524: 0,
                    3525: 2,
                    3526: 0,
                    3527: 2,
                    3528: 0,
                    3529: 2,
                    3530: 0,
                    3531: 2,
                    3532: 0,
                    3533: 2,
                    3534: 0,
                    3535: 2,
                    3536: 0,
                    3537: 2,
                    3538: 0,
                    3539: 2,
                    3540: 0,
                    3541: 2,
                    3542: 0,
                    3543: 2,
                    3544: 0,
                    3545: 2,
                    3546: 0,
                    3547: 2,
                    3548: 0,
                    3549: 2,
                    3550: 0,
                    3551: 2,
                    3552: 0,
                    3553: 2,
                    3582: 2,
                    3583: 0,
                    3584: 2,
                    3585: 0,
                    3586: 2,
                    3587: 0,
                    3588: 1,
                    3589: 0,
                    3590: 1,
                    3591: 0,
                    3592: 0,
                    3593: 1,
                    3598: 2,
                    3599: 0,
                    3600: 2,
                    3605: 1,
                    3606: 0,
                    3607: 0,
                    3608: 2,
                    3609: 0,
                    3610: 2,
                    3611: 0,
                    3612: 2,
                    3613: 0,
                    3614: 2,
                    3615: 0,
                    3616: 2,
                    3617: 0,
                    3618: 2,
                    3619: 0,
                    3620: 2,
                    3621: 0,
                    3622: 2,
                    3623: 0,
                    3624: 2,
                    3625: 0,
                    3626: 2,
                    3627: 0,
                    3628: 2,
                    3629: 0,
                    3630: 2,
                    3631: 0,
                    3632: 2,
                    3633: 0,
                    3634: 1,
                    3635: 0,
                    3636: 1,
                    3640: 2,
                    3641: 0,
                    3642: 2,
                    3643: 0,
                    3644: 1,
                    3645: 0,
                    3646: 1,
                    3647: 0,
                    3648: 1,
                    3649: 0,
                    3650: 2,
                    3651: 0,
                    3652: 2,
                    3653: 0,
                    3654: 2,
                    3655: 0,
                    3656: 1,
                    3657: 0,
                    3658: 2,
                    3659: 0,
                    3660: 2,
                    3661: 0,
                    3662: 2,
                    3663: 0,
                    3664: 2,
                    3668: 2,
                    3669: 0,
                    3670: 2,
                    3671: 0,
                    3672: 2,
                    3673: 0,
                    3674: 2,
                    3675: 0,
                    3676: 1,
                    3677: 2,
                    3678: 0,
                    3679: 1,
                    3680: 2,
                    3681: 0,
                    3682: 1,
                    3683: 2,
                    3684: 0,
                    3685: 0,
                    3686: 2,
                    3687: 0,
                    3688: 2,
                    3689: 0,
                    3690: 2,
                    3691: 0,
                    3692: 2,
                    3696: 2,
                    3697: 0,
                    3698: 2,
                    3699: 0,
                    3700: 2,
                    3793: 0,
                    3794: 0,
                    3812: 0,
                    3854: 0,
                    3857: 0,
                    3920: 0,
                    3978: 0,
                    3979: 0,
                    3991: 2,
                    3992: 2,
                    4026: 0,
                    4037: 0,
                    4038: 0,
                    4071: 0,
                    4082: 0,
                    4083: 0,
                    4087: 0,
                    4088: 0,
                    4217: 2,
                    4414: 0,
                    4415: 0,
                    4417: 0,
                    4434: 0,
                    4437: 0,
                    4438: 2,
                    4439: 2,
                    4462: 0,
                    4467: 0,
                    4471: 0,
                    4474: 0,
                    4559: 0,
                    4647: 0,
                    4822: 0,
                    4826: 0,
                    4839: 0,
                    5018: 0,
                    5048: 0,
                    5167: 0,
                    5168: 0,
                    5221: 0,
                    5223: 0,
                    5234: 0,
                    5235: 0,
                    5243: 0,
                    5247: 0,
                    5266: 0,
                    5316: 0,
                    5320: 0,
                    5321: 0,
                    5325: 0,
                    5337: 0,
                    5361: 0,
                    5362: 0,
                    5367: 0,
                    5382: 0,
                    5383: 0,
                    5396: 0,
                    5456: 0,
                    5457: 0,
                    5469: 0,
                    5472: 4,
                    5490: 0,
                    5513: 0,
                    5514: 0,
                    5523: 0,
                    5559: 0,
                    5588: 1,
                    5589: 3,
                    5596: 0,
                    5627: 0,
                    5629: 0,
                    5641: 0,
                    5643: 0,
                    5644: 0,
                    5646: 2,
                    5654: 2,
                    5655: 2,
                    5659: 0,
                    5700: 0,
                    5825: 0,
                    5836: 0,
                    5837: 0,
                    5839: 0,
                    5842: 0,
                    5844: 0,
                    5858: 0,
                    5879: 0,
                    5880: 0,
                    5887: 0,
                    5890: 0,
                    6128: 1,
                    6129: 1,
                    6141: 1,
                    6204: 0,
                    6210: 0,
                    6211: 0,
                    6307: 0,
                    6312: 0,
                    6316: 0,
                    6362: 0,
                    6391: 1,
                    6405: 1,
                    6406: 0,
                    6407: 1,
                    6408: 0,
                    6409: 1,
                    6410: 0,
                    6411: 2,
                    6412: 0,
                    6413: 2,
                    6414: 0,
                    6415: 0,
                    6416: 2,
                    6417: 0,
                    6418: 2,
                    6419: 0,
                    6420: 2,
                    6421: 0,
                    6422: 2,
                    6423: 0,
                    6424: 2,
                    6425: 0,
                    6426: 2,
                    6427: 0,
                    6428: 2,
                    6429: 0,
                    6430: 2,
                    6431: 0,
                    6432: 2,
                    6433: 0,
                    6434: 2,
                    6435: 0,
                    6436: 2,
                    6437: 0,
                    6438: 2,
                    6439: 0,
                    6440: 0,
                    6441: 2,
                    6442: 0,
                    6443: 2,
                    6444: 0,
                    6445: 2,
                    6446: 0,
                    6447: 2,
                    6448: 0,
                    6449: 2,
                    6450: 0,
                    6451: 2,
                    6452: 0,
                    6453: 2,
                    6454: 0,
                    6455: 2,
                    6456: 0,
                    6457: 2,
                    6458: 0,
                    6459: 2,
                    6460: 0,
                    6461: 2,
                    6462: 0,
                    6463: 2,
                    6464: 0,
                    6465: 2,
                    6466: 0,
                    6467: 2,
                    6468: 0,
                    6469: 2,
                    6470: 0,
                    6471: 2,
                    6472: 0,
                    6473: 2,
                    6474: 0,
                    6475: 2,
                    6476: 0,
                    6477: 2,
                    6478: 0,
                    6479: 2,
                    6484: 2,
                    6485: 0,
                    6486: 2,
                    6487: 0,
                    6488: 2,
                    6489: 0,
                    6490: 2,
                    6491: 0,
                    6492: 2,
                    6493: 0,
                    6494: 1,
                    6495: 0,
                    6496: 1,
                    6497: 0,
                    6498: 0,
                    6499: 1,
                    6500: 0,
                    6501: 2,
                    6502: 0,
                    6503: 2,
                    6504: 0,
                    6505: 2,
                    6506: 0,
                    6507: 2,
                    6508: 0,
                    6509: 0,
                    6510: 2,
                    6515: 1,
                    6516: 0,
                    6518: 0,
                    6519: 2,
                    6520: 0,
                    6521: 2,
                    6522: 0,
                    6523: 2,
                    6524: 0,
                    6525: 2,
                    6526: 0,
                    6527: 2,
                    6528: 0,
                    6529: 2,
                    6530: 0,
                    6531: 2,
                    6532: 0,
                    6533: 2,
                    6534: 0,
                    6535: 2,
                    6536: 0,
                    6537: 2,
                    6538: 0,
                    6539: 2,
                    6540: 0,
                    6541: 2,
                    6542: 0,
                    6543: 2,
                    6544: 0,
                    6545: 1,
                    6546: 0,
                    6547: 1,
                    6548: 0,
                    6549: 2,
                    6550: 0,
                    6551: 2,
                    6552: 0,
                    6553: 2,
                    6554: 0,
                    6555: 2,
                    6556: 0,
                    6557: 1,
                    6558: 0,
                    6559: 1,
                    6560: 0,
                    6561: 1,
                    6562: 0,
                    6563: 2,
                    6564: 0,
                    6565: 2,
                    6566: 0,
                    6567: 0,
                    6568: 2,
                    6569: 0,
                    6570: 1,
                    6571: 0,
                    6572: 2,
                    6573: 0,
                    6574: 2,
                    6575: 0,
                    6576: 2,
                    6577: 0,
                    6578: 2,
                    6582: 2,
                    6583: 0,
                    6584: 2,
                    6585: 0,
                    6586: 2,
                    6587: 0,
                    6588: 2,
                    6589: 0,
                    6590: 2,
                    6591: 0,
                    6592: 0,
                    6593: 2,
                    6594: 0,
                    6595: 2,
                    6596: 0,
                    6597: 2,
                    6598: 0,
                    6599: 2,
                    6600: 0,
                    6601: 2,
                    6602: 0,
                    6603: 2,
                    6605: 2,
                    6606: 0,
                    6607: 2,
                    6608: 0,
                    6609: 2,
                    6610: 0,
                    6611: 0,
                    6612: 2,
                    6613: 0,
                    6614: 2,
                    6615: 0,
                    6616: 2,
                    6617: 0,
                    6618: 2,
                    6633: 2,
                    6646: 0,
                    6703: 0,
                    6784: 0,
                    6785: 1,
                    6786: 0,
                    6787: 1,
                    6788: 0,
                    6789: 1,
                    6790: 0,
                    6791: 1,
                    6792: 0,
                    6793: 1,
                    6794: 0,
                    6795: 1,
                    6796: 0,
                    6797: 1,
                    6798: 0,
                    6799: 1,
                    6800: 0,
                    6801: 1,
                    6802: 0,
                    6803: 1,
                    6804: 0,
                    6805: 1,
                    6806: 0,
                    6807: 1,
                    6808: 0,
                    6809: 1,
                    6810: 0,
                    6811: 1,
                    6812: 0,
                    6813: 1,
                    6814: 0,
                    6815: 1,
                    6816: 0,
                    6817: 1,
                    6818: 0,
                    6819: 1,
                    6820: 0,
                    6821: 1,
                    6822: 0,
                    6823: 1,
                    6824: 0,
                    6825: 1,
                    6826: 0,
                    6827: 1,
                    6828: 0,
                    6829: 1,
                    6830: 0,
                    6831: 1,
                    6832: 0,
                    6833: 1,
                    6834: 0,
                    6835: 1,
                    6836: 0,
                    6837: 1,
                    6838: 0,
                    6839: 1,
                    6840: 0,
                    6841: 1,
                    6842: 0,
                    6843: 1,
                    6844: 0,
                    6845: 1,
                    6846: 0,
                    6847: 1,
                    6848: 0,
                    6849: 1,
                    6850: 0,
                    6851: 1,
                    6852: 0,
                    6853: 1,
                    6854: 0,
                    6855: 1,
                    6856: 0,
                    6857: 1,
                    6858: 0,
                    6859: 1,
                    6860: 0,
                    6861: 1,
                    6862: 0,
                    6863: 1,
                    6867: 0,
                    6868: 1,
                    6870: 0,
                    6875: 0,
                    6876: 0,
                    6879: 0,
                    6880: 2,
                    6884: 0,
                    6885: 1,
                    6886: 0,
                    6887: 1,
                    6915: 0,
                    6922: 0,
                    6923: 2,
                    6924: 0,
                    6925: 2,
                    6962: 0,
                    6984: 0,
                    6991: 0,
                    7128: 2,
                    7131: 0,
                    7132: 2,
                    7257: 0,
                    7258: 2,
                    7259: 0,
                    7260: 2,
                    7261: 0,
                    7262: 2,
                    7263: 0,
                    7264: 2,
                    7265: 0,
                    7266: 2,
                    7267: 0,
                    7268: 2,
                    7269: 0,
                    7270: 2,
                    7271: 0,
                    7272: 2,
                    7273: 0,
                    7274: 2,
                    7275: 0,
                    7276: 2,
                    7277: 0,
                    7278: 2,
                    7279: 0,
                    7280: 2,
                    7281: 0,
                    7282: 2,
                    7283: 0,
                    7284: 2,
                    7285: 0,
                    7286: 2,
                    7287: 0,
                    7288: 2,
                    7289: 0,
                    7290: 2,
                    7291: 0,
                    7292: 2,
                    7293: 0,
                    7294: 2,
                    7295: 0,
                    7296: 2,
                    7297: 0,
                    7298: 2,
                    7299: 0,
                    7300: 2,
                    7301: 0,
                    7302: 2,
                    7303: 0,
                    7304: 2,
                    7305: 0,
                    7306: 2,
                    7307: 0,
                    7308: 2,
                    7309: 0,
                    7310: 2,
                    7311: 0,
                    7312: 2,
                    7313: 0,
                    7314: 2,
                    7315: 0,
                    7316: 2,
                    7317: 0,
                    7318: 2,
                    7319: 0,
                    7320: 2,
                    7321: 0,
                    7322: 2,
                    7323: 0,
                    7324: 2,
                    7325: 0,
                    7326: 2,
                    7327: 0,
                    7328: 2,
                    7329: 0,
                    7330: 2,
                    7331: 0,
                    7332: 2,
                    7333: 0,
                    7334: 2,
                    7335: 0,
                    7336: 2,
                    7337: 0,
                    7338: 2,
                    7339: 0,
                    7340: 2,
                    7341: 0,
                    7342: 2,
                    7343: 0,
                    7344: 2,
                    7345: 0,
                    7346: 2,
                    7347: 0,
                    7348: 2,
                    7349: 0,
                    7350: 2,
                    7351: 0,
                    7352: 2,
                    7353: 0,
                    7354: 2,
                    7355: 0,
                    7356: 2,
                    7357: 0,
                    7358: 2,
                    7359: 0,
                    7360: 2,
                    7361: 0,
                    7362: 2,
                    7363: 0,
                    7364: 2,
                    7365: 0,
                    7366: 2,
                    7367: 0,
                    7368: 2,
                    7369: 0,
                    7370: 2,
                    20499: 0,
                    20538: 0,
                    20539: 0,
                    20790: 0,
                    20791: 0,
                    21291: 0,
                    21292: 0,
                    21500: 0,
                    21817: 0,
                    21818: 0,
                    22032: 0,
                    22033: 0,
                    22091: 0,
                    22092: 0,
                    22332: 0,
                    22391: 0,
                    22392: 0,
                    22700: 0,
                    22770: 0,
                    22780: 0,
                    22832: 0,
                    23090: 0,
                    23095: 0,
                    23239: 0,
                    23240: 0,
                    23433: 0,
                    23700: 0,
                    24047: 0,
                    24048: 0,
                    24100: 3,
                    24200: 0,
                    24305: 0,
                    24306: 0,
                    24382: 10,
                    24383: 0,
                    24500: 0,
                    24547: 0,
                    24548: 0,
                    24571: 9,
                    24600: 0,
                    25E3: 0,
                    25231: 0,
                    25884: 0,
                    25932: 0,
                    26237: 0,
                    26331: 0,
                    26332: 0,
                    26432: 0,
                    26591: 0,
                    26592: 0,
                    26632: 0,
                    26692: 0,
                    27120: 0,
                    27200: 0,
                    27291: 6,
                    27292: 6,
                    27429: 0,
                    27492: 0,
                    27493: 0,
                    27500: 0,
                    27700: 0,
                    28232: 0,
                    28600: 0,
                    28991: 0,
                    28992: 0,
                    29100: 0,
                    29101: 0,
                    29220: 0,
                    29221: 0,
                    29333: 0,
                    29635: 0,
                    29636: 0,
                    29701: 0,
                    29738: 0,
                    29739: 0,
                    29849: 0,
                    29850: 0,
                    29871: 8,
                    29872: 7,
                    29873: 0,
                    30200: 5,
                    30339: 0,
                    30340: 0,
                    30591: 0,
                    30592: 0,
                    30791: 0,
                    30792: 0,
                    30800: 0,
                    31028: 0,
                    31121: 0,
                    31154: 0,
                    31170: 0,
                    31171: 0,
                    31370: 0,
                    31528: 0,
                    31529: 0,
                    31600: 0,
                    31700: 0,
                    31838: 0,
                    31839: 0,
                    31900: 0,
                    31901: 0,
                    32061: 0,
                    32062: 0,
                    32098: 0,
                    32099: 2,
                    32100: 0,
                    32104: 0,
                    32161: 0,
                    32766: 0,
                    53034: 0,
                    53048: 0,
                    53049: 0,
                    54034: 0,
                    65061: 2,
                    65062: 2,
                    65161: 0,
                    65163: 0,
                    102041: 2,
                    102064: 11,
                    102068: 14,
                    102069: 15,
                    102118: 2,
                    102119: 1,
                    102120: 2,
                    102121: 2,
                    102217: 2,
                    102218: 0,
                    102219: 2,
                    102220: 2,
                    102378: 1,
                    102379: 1,
                    102380: 0,
                    102381: 1,
                    102589: 2,
                    102599: 2,
                    102600: 2,
                    102604: 2,
                    102647: 0,
                    102704: 2,
                    102705: 2,
                    102706: 0,
                    102761: 2,
                    102762: 0,
                    102763: 2,
                    102764: 0,
                    102765: 0,
                    102766: 2,
                    102962: 0,
                    102963: 0,
                    102970: 1,
                    102974: 2,
                    102993: 0,
                    102994: 0,
                    102995: 2,
                    102996: 2,
                    103015: 0,
                    103016: 2,
                    103017: 0,
                    103018: 2,
                    103025: 0,
                    103026: 0,
                    103027: 2,
                    103028: 2,
                    103035: 0,
                    103036: 0,
                    103037: 2,
                    103038: 2,
                    103039: 0,
                    103040: 0,
                    103041: 2,
                    103042: 2,
                    103043: 0,
                    103044: 0,
                    103045: 2,
                    103046: 2,
                    103047: 0,
                    103048: 0,
                    103049: 2,
                    103050: 2,
                    103051: 0,
                    103052: 2,
                    103053: 0,
                    103054: 2,
                    103055: 0,
                    103056: 2,
                    103057: 0,
                    103058: 0,
                    103059: 2,
                    103060: 2,
                    103061: 0,
                    103062: 0,
                    103063: 2,
                    103064: 2,
                    103069: 2,
                    103070: 0,
                    103071: 0,
                    103072: 2,
                    103073: 2,
                    103086: 0,
                    103087: 0,
                    103088: 2,
                    103089: 2,
                    103094: 1,
                    103095: 0,
                    103096: 2,
                    103103: 0,
                    103104: 2,
                    103105: 0,
                    103106: 2,
                    103121: 0,
                    103122: 2,
                    103123: 0,
                    103124: 0,
                    103125: 1,
                    103126: 1,
                    103127: 0,
                    103128: 0,
                    103129: 2,
                    103130: 2,
                    103131: 0,
                    103132: 0,
                    103133: 2,
                    103134: 2,
                    103135: 0,
                    103136: 0,
                    103137: 1,
                    103138: 1,
                    103139: 0,
                    103140: 2,
                    103141: 0,
                    103142: 2,
                    103143: 0,
                    103144: 2,
                    103145: 0,
                    103146: 1,
                    103147: 0,
                    103148: 0,
                    103149: 2,
                    103150: 2,
                    103151: 0,
                    103152: 2,
                    103172: 0,
                    103173: 2,
                    103174: 0,
                    103175: 0,
                    103176: 2,
                    103177: 2,
                    103178: 0,
                    103179: 0,
                    103180: 2,
                    103181: 2,
                    103182: 0,
                    103183: 0,
                    103184: 2,
                    103185: 2,
                    103228: 0,
                    103229: 0,
                    103230: 2,
                    103231: 2,
                    103250: 0,
                    103251: 2,
                    103252: 0,
                    103253: 2,
                    103260: 0,
                    103261: 0,
                    103262: 2,
                    103263: 2,
                    103270: 0,
                    103271: 0,
                    103272: 2,
                    103273: 2,
                    103274: 0,
                    103275: 0,
                    103276: 2,
                    103277: 2,
                    103278: 0,
                    103279: 0,
                    103280: 2,
                    103281: 2,
                    103282: 0,
                    103283: 0,
                    103284: 2,
                    103285: 2,
                    103286: 0,
                    103287: 2,
                    103288: 0,
                    103289: 2,
                    103290: 0,
                    103291: 2,
                    103292: 0,
                    103293: 0,
                    103294: 2,
                    103295: 2,
                    103296: 0,
                    103297: 0,
                    103298: 2,
                    103299: 2,
                    103376: 2,
                    103377: 0,
                    103378: 0,
                    103379: 2,
                    103380: 2,
                    103393: 0,
                    103394: 0,
                    103395: 2,
                    103396: 2,
                    103472: 0,
                    103473: 1,
                    103474: 0,
                    103475: 2,
                    103482: 0,
                    103483: 2,
                    103484: 0,
                    103485: 2,
                    103500: 0,
                    103501: 2,
                    103502: 0,
                    103503: 0,
                    103504: 1,
                    103505: 1,
                    103506: 0,
                    103507: 0,
                    103508: 2,
                    103509: 2,
                    103510: 0,
                    103511: 0,
                    103512: 2,
                    103513: 2,
                    103514: 0,
                    103515: 2,
                    103516: 0,
                    103517: 2,
                    103518: 0,
                    103519: 2,
                    103520: 0,
                    103521: 1,
                    103522: 0,
                    103523: 0,
                    103524: 2,
                    103525: 2,
                    103526: 0,
                    103527: 2,
                    103561: 2,
                    103562: 2,
                    103563: 0,
                    103564: 0,
                    103565: 2,
                    103566: 2,
                    103567: 0,
                    103568: 0,
                    103569: 2,
                    103570: 2,
                    103584: 0,
                    103585: 2,
                    103695: 2
                };
                for (a = 2E3; 2045 >= a; a++) g[a] =
                    0;
                for (a = 2056; 2065 >= a; a++) g[a] = 0;
                for (a = 2067; 2135 >= a; a++) g[a] = 0;
                for (a = 2137; 2154 >= a; a++) g[a] = 0;
                for (a = 2161; 2170 >= a; a++) g[a] = 0;
                for (a = 2172; 2193 >= a; a++) g[a] = 0;
                for (a = 2195; 2198 >= a; a++) g[a] = 0;
                for (a = 2200; 2203 >= a; a++) g[a] = 0;
                for (a = 2205; 2217 >= a; a++) g[a] = 0;
                for (a = 2222; 2224 >= a; a++) g[a] = 1;
                for (a = 2225; 2250 >= a; a++) g[a] = 2;
                for (a = 2251; 2253 >= a; a++) g[a] = 1;
                for (a = 2257; 2264 >= a; a++) g[a] = 2;
                for (a = 2274; 2279 >= a; a++) g[a] = 2;
                for (a = 2280; 2282 >= a; a++) g[a] = 1;
                for (a = 2283; 2289 >= a; a++) g[a] = 2;
                for (a = 2290; 2292 >= a; a++) g[a] = 0;
                for (a = 2308; 2313 >= a; a++) g[a] =
                    0;
                for (a = 2315; 2491 >= a; a++) g[a] = 0;
                for (a = 2494; 2866 >= a; a++) g[a] = 0;
                for (a = 2867; 2869 >= a; a++) g[a] = 1;
                for (a = 2870; 2888 >= a; a++) g[a] = 2;
                for (a = 2891; 2895 >= a; a++) g[a] = 2;
                for (a = 2896; 2898 >= a; a++) g[a] = 1;
                for (a = 2902; 2908 >= a; a++) g[a] = 2;
                for (a = 2915; 2920 >= a; a++) g[a] = 2;
                for (a = 2921; 2923 >= a; a++) g[a] = 1;
                for (a = 2924; 2930 >= a; a++) g[a] = 2;
                for (a = 2931; 2962 >= a; a++) g[a] = 0;
                for (a = 2964; 2968 >= a; a++) g[a] = 2;
                for (a = 2969; 2973 >= a; a++) g[a] = 0;
                for (a = 2975; 2991 >= a; a++) g[a] = 0;
                for (a = 2995; 3051 >= a; a++) g[a] = 0;
                for (a = 3054; 3079 >= a; a++) g[a] = 0;
                for (a = 3081; 3088 >= a; a++) g[a] =
                    0;
                for (a = 3092; 3101 >= a; a++) g[a] = 0;
                for (a = 3106; 3138 >= a; a++) g[a] = 0;
                for (a = 3146; 3151 >= a; a++) g[a] = 0;
                for (a = 3153; 3166 >= a; a++) g[a] = 0;
                for (a = 3168; 3172 >= a; a++) g[a] = 0;
                for (a = 3174; 3203 >= a; a++) g[a] = 0;
                for (a = 3294; 3358 >= a; a++) g[a] = 0;
                for (a = 3367; 3403 >= a; a++) g[a] = 0;
                for (a = 3408; 3416 >= a; a++) g[a] = 0;
                for (a = 3417; 3438 >= a; a++) g[a] = 2;
                for (a = 3441; 3446 >= a; a++) g[a] = 2;
                for (a = 3447; 3450 >= a; a++) g[a] = 0;
                for (a = 3451; 3459 >= a; a++) g[a] = 2;
                for (a = 3460; 3478 >= a; a++) g[a] = 0;
                for (a = 3554; 3559 >= a; a++) g[a] = 0;
                for (a = 3560; 3570 >= a; a++) g[a] = 2;
                for (a = 3571; 3581 >= a; a++) g[a] =
                    0;
                for (a = 3594; 3597 >= a; a++) g[a] = 0;
                for (a = 3601; 3604 >= a; a++) g[a] = 0;
                for (a = 3637; 3639 >= a; a++) g[a] = 0;
                for (a = 3665; 3667 >= a; a++) g[a] = 0;
                for (a = 3693; 3695 >= a; a++) g[a] = 0;
                for (a = 3701; 3727 >= a; a++) g[a] = 0;
                for (a = 3728; 3739 >= a; a++) g[a] = 2;
                for (a = 3740; 3751 >= a; a++) g[a] = 0;
                for (a = 3753; 3760 >= a; a++) g[a] = 2;
                for (a = 3761; 3773 >= a; a++) g[a] = 0;
                for (a = 3775; 3777 >= a; a++) g[a] = 0;
                for (a = 3779; 3781 >= a; a++) g[a] = 0;
                for (a = 3783; 3785 >= a; a++) g[a] = 0;
                for (a = 3788; 3791 >= a; a++) g[a] = 0;
                for (a = 3797; 3802 >= a; a++) g[a] = 0;
                for (a = 3814; 3816 >= a; a++) g[a] = 0;
                for (a = 3825; 3829 >= a; a++) g[a] =
                    0;
                for (a = 3832; 3841 >= a; a++) g[a] = 0;
                for (a = 3844; 3852 >= a; a++) g[a] = 0;
                for (a = 3873; 3885 >= a; a++) g[a] = 0;
                for (a = 3890; 3893 >= a; a++) g[a] = 0;
                for (a = 3907; 3912 >= a; a++) g[a] = 0;
                for (a = 3942; 3950 >= a; a++) g[a] = 0;
                for (a = 3968; 3970 >= a; a++) g[a] = 0;
                for (a = 3973; 3976 >= a; a++) g[a] = 0;
                for (a = 3986; 3989 >= a; a++) g[a] = 0;
                for (a = 3994; 3997 >= a; a++) g[a] = 0;
                for (a = 4048; 4051 >= a; a++) g[a] = 0;
                for (a = 4056; 4063 >= a; a++) g[a] = 0;
                for (a = 4093; 4096 >= a; a++) g[a] = 0;
                for (a = 4390; 4398 >= a; a++) g[a] = 0;
                for (a = 4399; 4413 >= a; a++) g[a] = 2;
                for (a = 4418; 4433 >= a; a++) g[a] = 2;
                for (a = 4455; 4457 >= a; a++) g[a] =
                    2;
                for (a = 4484; 4489 >= a; a++) g[a] = 0;
                for (a = 4491; 4554 >= a; a++) g[a] = 0;
                for (a = 4568; 4589 >= a; a++) g[a] = 0;
                for (a = 4652; 4656 >= a; a++) g[a] = 0;
                for (a = 4766; 4800 >= a; a++) g[a] = 0;
                for (a = 5014; 5016 >= a; a++) g[a] = 0;
                for (a = 5069; 5072 >= a; a++) g[a] = 0;
                for (a = 5105; 5130 >= a; a++) g[a] = 0;
                for (a = 5173; 5188 >= a; a++) g[a] = 0;
                for (a = 5253; 5259 >= a; a++) g[a] = 0;
                for (a = 5269; 5275 >= a; a++) g[a] = 0;
                for (a = 5292; 5311 >= a; a++) g[a] = 0;
                for (a = 5329; 5331 >= a; a++) g[a] = 0;
                for (a = 5343; 5349 >= a; a++) g[a] = 0;
                for (a = 5355; 5357 >= a; a++) g[a] = 0;
                for (a = 5387; 5389 >= a; a++) g[a] = 0;
                for (a = 5459; 5463 >= a; a++) g[a] =
                    0;
                for (a = 5479; 5482 >= a; a++) g[a] = 0;
                for (a = 5518; 5520 >= a; a++) g[a] = 0;
                for (a = 5530; 5539 >= a; a++) g[a] = 0;
                for (a = 5550; 5552 >= a; a++) g[a] = 0;
                for (a = 5562; 5583 >= a; a++) g[a] = 0;
                for (a = 5623; 5625 >= a; a++) g[a] = 2;
                for (a = 5631; 5639 >= a; a++) g[a] = 0;
                for (a = 5649; 5653 >= a; a++) g[a] = 0;
                for (a = 5663; 5680 >= a; a++) g[a] = 0;
                for (a = 5682; 5685 >= a; a++) g[a] = 0;
                for (a = 5875; 5877 >= a; a++) g[a] = 0;
                for (a = 5921; 5940 >= a; a++) g[a] = 0;
                for (a = 6050; 6125 >= a; a++) g[a] = 0;
                for (a = 6244; 6275 >= a; a++) g[a] = 0;
                for (a = 6328; 6348 >= a; a++) g[a] = 0;
                for (a = 6350; 6356 >= a; a++) g[a] = 0;
                for (a = 6366; 6372 >= a; a++) g[a] =
                    0;
                for (a = 6381; 6387 >= a; a++) g[a] = 0;
                for (a = 6393; 6404 >= a; a++) g[a] = 0;
                for (a = 6480; 6483 >= a; a++) g[a] = 0;
                for (a = 6511; 6514 >= a; a++) g[a] = 0;
                for (a = 6579; 6581 >= a; a++) g[a] = 0;
                for (a = 6619; 6624 >= a; a++) g[a] = 0;
                for (a = 6625; 6627 >= a; a++) g[a] = 2;
                for (a = 6628; 6632 >= a; a++) g[a] = 0;
                for (a = 6634; 6637 >= a; a++) g[a] = 0;
                for (a = 6669; 6692 >= a; a++) g[a] = 0;
                for (a = 6707; 6709 >= a; a++) g[a] = 0;
                for (a = 6720; 6723 >= a; a++) g[a] = 0;
                for (a = 6732; 6738 >= a; a++) g[a] = 0;
                for (a = 6931; 6933 >= a; a++) g[a] = 0;
                for (a = 6956; 6959 >= a; a++) g[a] = 0;
                for (a = 7005; 7007 >= a; a++) g[a] = 0;
                for (a = 7057; 7070 >= a; a++) g[a] =
                    2;
                for (a = 7074; 7082 >= a; a++) g[a] = 0;
                for (a = 7109; 7118 >= a; a++) g[a] = 0;
                for (a = 7119; 7127 >= a; a++) g[a] = 1;
                for (a = 7374; 7376 >= a; a++) g[a] = 0;
                for (a = 7528; 7586 >= a; a++) g[a] = 0;
                for (a = 7587; 7645 >= a; a++) g[a] = 2;
                for (a = 7845; 7859 >= a; a++) g[a] = 0;
                for (a = 20002; 20032 >= a; a++) g[a] = 0;
                for (a = 20062; 20092 >= a; a++) g[a] = 0;
                for (a = 20135; 20138 >= a; a++) g[a] = 0;
                for (a = 20248; 20258 >= a; a++) g[a] = 0;
                for (a = 20348; 20358 >= a; a++) g[a] = 0;
                for (a = 20436; 20440 >= a; a++) g[a] = 0;
                for (a = 20822; 20824 >= a; a++) g[a] = 0;
                for (a = 20934; 20936 >= a; a++) g[a] = 0;
                for (a = 21035; 21037 >= a; a++) g[a] = 0;
                for (a =
                    21095; 21097 >= a; a++) g[a] = 0;
                for (a = 21148; 21150 >= a; a++) g[a] = 0;
                for (a = 21413; 21423 >= a; a++) g[a] = 0;
                for (a = 21473; 21483 >= a; a++) g[a] = 0;
                for (a = 21780; 21782 >= a; a++) g[a] = 0;
                for (a = 21891; 21894 >= a; a++) g[a] = 0;
                for (a = 21896; 21899 >= a; a++) g[a] = 0;
                for (a = 22171; 22177 >= a; a++) g[a] = 0;
                for (a = 22181; 22187 >= a; a++) g[a] = 0;
                for (a = 22191; 22197 >= a; a++) g[a] = 0;
                for (a = 22234; 22236 >= a; a++) g[a] = 0;
                for (a = 22521; 22525 >= a; a++) g[a] = 0;
                for (a = 22991; 22994 >= a; a++) g[a] = 0;
                for (a = 23028; 23038 >= a; a++) g[a] = 0;
                for (a = 23830; 23853 >= a; a++) g[a] = 0;
                for (a = 23866; 23872 >= a; a++) g[a] =
                    0;
                for (a = 23877; 23884 >= a; a++) g[a] = 0;
                for (a = 23886; 23894 >= a; a++) g[a] = 0;
                for (a = 23946; 23948 >= a; a++) g[a] = 0;
                for (a = 24311; 24313 >= a; a++) g[a] = 0;
                for (a = 24342; 24347 >= a; a++) g[a] = 0;
                for (a = 24370; 24374 >= a; a++) g[a] = 10;
                for (a = 24375; 24381 >= a; a++) g[a] = 0;
                for (a = 24718; 24721 >= a; a++) g[a] = 0;
                for (a = 24817; 24821 >= a; a++) g[a] = 0;
                for (a = 24877; 24882 >= a; a++) g[a] = 0;
                for (a = 24891; 24893 >= a; a++) g[a] = 0;
                for (a = 25391; 25395 >= a; a++) g[a] = 0;
                for (a = 25828; 25838 >= a; a++) g[a] = 0;
                for (a = 26191; 26195 >= a; a++) g[a] = 0;
                for (a = 26391; 26393 >= a; a++) g[a] = 0;
                for (a = 26701; 26722 >=
                    a; a++) g[a] = 0;
                for (a = 26729; 26799 >= a; a++) g[a] = 2;
                for (a = 26801; 26803 >= a; a++) g[a] = 2;
                for (a = 26811; 26813 >= a; a++) g[a] = 2;
                for (a = 26847; 26870 >= a; a++) g[a] = 2;
                for (a = 26891; 26899 >= a; a++) g[a] = 0;
                for (a = 26901; 26923 >= a; a++) g[a] = 0;
                for (a = 26929; 26946 >= a; a++) g[a] = 0;
                for (a = 26948; 26998 >= a; a++) g[a] = 0;
                for (a = 27037; 27040 >= a; a++) g[a] = 0;
                for (a = 27205; 27232 >= a; a++) g[a] = 0;
                for (a = 27258; 27260 >= a; a++) g[a] = 0;
                for (a = 27391; 27398 >= a; a++) g[a] = 0;
                for (a = 27561; 27564 >= a; a++) g[a] = 0;
                for (a = 27571; 27574 >= a; a++) g[a] = 0;
                for (a = 27581; 27584 >= a; a++) g[a] = 0;
                for (a = 27591; 27594 >=
                    a; a++) g[a] = 0;
                for (a = 28191; 28193 >= a; a++) g[a] = 0;
                for (a = 28348; 28358 >= a; a++) g[a] = 0;
                for (a = 28402; 28432 >= a; a++) g[a] = 0;
                for (a = 28462; 28492 >= a; a++) g[a] = 0;
                for (a = 29118; 29122 >= a; a++) g[a] = 0;
                for (a = 29168; 29172 >= a; a++) g[a] = 0;
                for (a = 29177; 29185 >= a; a++) g[a] = 0;
                for (a = 29187; 29195 >= a; a++) g[a] = 0;
                for (a = 29900; 29903 >= a; a++) g[a] = 0;
                for (a = 30161; 30179 >= a; a++) g[a] = 0;
                for (a = 30491; 30494 >= a; a++) g[a] = 0;
                for (a = 30729; 30732 >= a; a++) g[a] = 0;
                for (a = 31251; 31259 >= a; a++) g[a] = 0;
                for (a = 31265; 31268 >= a; a++) g[a] = 0;
                for (a = 31275; 31279 >= a; a++) g[a] = 0;
                for (a = 31281; 31297 >=
                    a; a++) g[a] = 0;
                for (a = 31461; 31469 >= a; a++) g[a] = 0;
                for (a = 31491; 31495 >= a; a++) g[a] = 0;
                for (a = 31917; 31922 >= a; a++) g[a] = 0;
                for (a = 31965; 32E3 >= a; a++) g[a] = 0;
                for (a = 32001; 32003 >= a; a++) g[a] = 2;
                for (a = 32005; 32031 >= a; a++) g[a] = 2;
                for (a = 32033; 32060 >= a; a++) g[a] = 2;
                for (a = 32064; 32067 >= a; a++) g[a] = 2;
                for (a = 32074; 32077 >= a; a++) g[a] = 2;
                for (a = 32081; 32086 >= a; a++) g[a] = 0;
                for (a = 32107; 32130 >= a; a++) g[a] = 0;
                for (a = 32133; 32158 >= a; a++) g[a] = 0;
                for (a = 32164; 32167 >= a; a++) g[a] = 2;
                for (a = 32180; 32199 >= a; a++) g[a] = 0;
                for (a = 32201; 32260 >= a; a++) g[a] = 0;
                for (a = 32301; 32360 >=
                    a; a++) g[a] = 0;
                for (a = 32601; 32662 >= a; a++) g[a] = 0;
                for (a = 32664; 32667 >= a; a++) g[a] = 2;
                for (a = 32701; 32761 >= a; a++) g[a] = 0;
                for (a = 53001; 53004 >= a; a++) g[a] = 0;
                for (a = 53008; 53019 >= a; a++) g[a] = 0;
                for (a = 53021; 53032 >= a; a++) g[a] = 0;
                for (a = 53042; 53046 >= a; a++) g[a] = 0;
                for (a = 53074; 53080 >= a; a++) g[a] = 0;
                for (a = 54001; 54004 >= a; a++) g[a] = 0;
                for (a = 54008; 54019 >= a; a++) g[a] = 0;
                for (a = 54021; 54032 >= a; a++) g[a] = 0;
                for (a = 54042; 54046 >= a; a++) g[a] = 0;
                for (a = 54048; 54053 >= a; a++) g[a] = 0;
                for (a = 54074; 54080 >= a; a++) g[a] = 0;
                for (a = 102001; 102040 >= a; a++) g[a] = 0;
                for (a =
                    102042; 102063 >= a; a++) g[a] = 0;
                for (a = 102065; 102067 >= a; a++) g[a] = 0;
                for (a = 102070; 102117 >= a; a++) g[a] = 0;
                for (a = 102122; 102216 >= a; a++) g[a] = 0;
                for (a = 102221; 102377 >= a; a++) g[a] = 0;
                for (a = 102382; 102388 >= a; a++) g[a] = 0;
                for (a = 102389; 102398 >= a; a++) g[a] = 2;
                for (a = 102399; 102444 >= a; a++) g[a] = 0;
                for (a = 102445; 102447 >= a; a++) g[a] = 2;
                for (a = 102448; 102458 >= a; a++) g[a] = 0;
                for (a = 102459; 102468 >= a; a++) g[a] = 2;
                for (a = 102469; 102496 >= a; a++) g[a] = 0;
                for (a = 102500; 102519 >= a; a++) g[a] = 1;
                for (a = 102520; 102524 >= a; a++) g[a] = 0;
                for (a = 102525; 102529 >= a; a++) g[a] =
                    2;
                for (a = 102530; 102561 >= a; a++) g[a] = 0;
                for (a = 102570; 102588 >= a; a++) g[a] = 0;
                for (a = 102590; 102598 >= a; a++) g[a] = 0;
                for (a = 102601; 102603 >= a; a++) g[a] = 0;
                for (a = 102605; 102628 >= a; a++) g[a] = 0;
                for (a = 102629; 102646 >= a; a++) g[a] = 2;
                for (a = 102648; 102700 >= a; a++) g[a] = 2;
                for (a = 102701; 102703 >= a; a++) g[a] = 0;
                for (a = 102707; 102730 >= a; a++) g[a] = 2;
                for (a = 102733; 102758 >= a; a++) g[a] = 2;
                for (a = 102767; 102798 >= a; a++) g[a] = 0;
                for (a = 102965; 102969 >= a; a++) g[a] = 0;
                for (a = 102971; 102973 >= a; a++) g[a] = 0;
                for (a = 102975; 102989 >= a; a++) g[a] = 0;
                for (a = 102990; 102992 >= a; a++) g[a] =
                    1;
                for (a = 102997; 103002 >= a; a++) g[a] = 0;
                for (a = 103003; 103008 >= a; a++) g[a] = 2;
                for (a = 103009; 103011 >= a; a++) g[a] = 0;
                for (a = 103012; 103014 >= a; a++) g[a] = 2;
                for (a = 103019; 103021 >= a; a++) g[a] = 0;
                for (a = 103022; 103024 >= a; a++) g[a] = 2;
                for (a = 103029; 103031 >= a; a++) g[a] = 0;
                for (a = 103032; 103034 >= a; a++) g[a] = 2;
                for (a = 103065; 103068 >= a; a++) g[a] = 0;
                for (a = 103074; 103076 >= a; a++) g[a] = 0;
                for (a = 103077; 103079 >= a; a++) g[a] = 1;
                for (a = 103080; 103082 >= a; a++) g[a] = 0;
                for (a = 103083; 103085 >= a; a++) g[a] = 2;
                for (a = 103090; 103093 >= a; a++) g[a] = 0;
                for (a = 103097; 103099 >= a; a++) g[a] =
                    0;
                for (a = 103100; 103102 >= a; a++) g[a] = 2;
                for (a = 103107; 103109 >= a; a++) g[a] = 0;
                for (a = 103110; 103112 >= a; a++) g[a] = 2;
                for (a = 103113; 103116 >= a; a++) g[a] = 0;
                for (a = 103117; 103120 >= a; a++) g[a] = 2;
                for (a = 103153; 103157 >= a; a++) g[a] = 0;
                for (a = 103158; 103162 >= a; a++) g[a] = 2;
                for (a = 103163; 103165 >= a; a++) g[a] = 0;
                for (a = 103166; 103168 >= a; a++) g[a] = 1;
                for (a = 103169; 103171 >= a; a++) g[a] = 2;
                for (a = 103186; 103188 >= a; a++) g[a] = 0;
                for (a = 103189; 103191 >= a; a++) g[a] = 2;
                for (a = 103192; 103195 >= a; a++) g[a] = 0;
                for (a = 103196; 103199 >= a; a++) g[a] = 2;
                for (a = 103200; 103224 >= a; a++) g[a] =
                    0;
                for (a = 103225; 103227 >= a; a++) g[a] = 1;
                for (a = 103232; 103237 >= a; a++) g[a] = 0;
                for (a = 103238; 103243 >= a; a++) g[a] = 2;
                for (a = 103244; 103246 >= a; a++) g[a] = 0;
                for (a = 103247; 103249 >= a; a++) g[a] = 2;
                for (a = 103254; 103256 >= a; a++) g[a] = 0;
                for (a = 103257; 103259 >= a; a++) g[a] = 2;
                for (a = 103264; 103266 >= a; a++) g[a] = 0;
                for (a = 103267; 103269 >= a; a++) g[a] = 2;
                for (a = 103300; 103375 >= a; a++) g[a] = 0;
                for (a = 103381; 103383 >= a; a++) g[a] = 0;
                for (a = 103384; 103386 >= a; a++) g[a] = 1;
                for (a = 103387; 103389 >= a; a++) g[a] = 0;
                for (a = 103390; 103392 >= a; a++) g[a] = 2;
                for (a = 103397; 103399 >= a; a++) g[a] =
                    0;
                for (a = 103400; 103471 >= a; a++) g[a] = 2;
                for (a = 103476; 103478 >= a; a++) g[a] = 0;
                for (a = 103479; 103481 >= a; a++) g[a] = 2;
                for (a = 103486; 103488 >= a; a++) g[a] = 0;
                for (a = 103489; 103491 >= a; a++) g[a] = 2;
                for (a = 103492; 103495 >= a; a++) g[a] = 0;
                for (a = 103496; 103499 >= a; a++) g[a] = 2;
                for (a = 103528; 103543 >= a; a++) g[a] = 0;
                for (a = 103544; 103548 >= a; a++) g[a] = 2;
                for (a = 103549; 103551 >= a; a++) g[a] = 0;
                for (a = 103552; 103554 >= a; a++) g[a] = 1;
                for (a = 103555; 103557 >= a; a++) g[a] = 2;
                for (a = 103558; 103560 >= a; a++) g[a] = 0;
                for (a = 103571; 103573 >= a; a++) g[a] = 0;
                for (a = 103574; 103576 >= a; a++) g[a] =
                    2;
                for (a = 103577; 103580 >= a; a++) g[a] = 0;
                for (a = 103581; 103583 >= a; a++) g[a] = 2;
                for (a = 103600; 103694 >= a; a++) g[a] = 0;
                for (a = 103700; 103793 >= a; a++) g[a] = 2;
                for (a = 103794; 103871 >= a; a++) g[a] = 0;
                for (a = 103900; 103971 >= a; a++) g[a] = 2;
                r("extend-esri") && (p.WKIDUnitConversion = g);
                return g
            })
        },
        "esri/geometry/screenUtils": function () {
            define("dojo/_base/array dojo/_base/lang dojo/sniff ../kernel ./Point ./ScreenPoint ./Polyline ./Polygon ./Multipoint ./Extent".split(" "), function (r, p, a, g, q, h, k, l, e, c) {
                var b = function () {
                        return 9 > a("ie") ?
                            function (a, b, c, d, f, e, g, k, h) {
                                var l = [],
                                    q = Math.round,
                                    p, r = g.length,
                                    H, D, F, E, Q, R;
                                for (p = 0; p < r; p++)
                                    if (H = g[p], E = k ? k(H[0][0], H[0][1], h) : H[0], 1 < (F = H.length)) {
                                        Q = q((E[0] - a) * c + f);
                                        R = q((b - E[1]) * d + e);
                                        E = k ? k(H[1][0], H[1][1], h) : H[1];
                                        D = q((E[0] - a) * c + f);
                                        E = q((b - E[1]) * d + e);
                                        l.push("M", Q + "," + R, "L", D + "," + E);
                                        for (D = 2; D < F; D++) E = k ? k(H[D][0], H[D][1], h) : H[D], Q = q((E[0] - a) * c + f), R = q((b - E[1]) * d + e), l.push(Q + "," + R)
                                    } else Q = q((E[0] - a) * c + f), R = q((b - E[1]) * d + e), l.push("M", Q + "," + R);
                                return l
                            } : function (a, b, c, d, f, e, g, k, h, l) {
                                var q = [],
                                    p, r, H, D, F, E,
                                    Q = Math.round;
                                p = 0;
                                for (H = g ? g.length : 0; p < H; p++) {
                                    F = g[p];
                                    q.push("M");
                                    r = 0;
                                    for (D = F ? F.length : 0; r < D; r++) E = k ? k(F[r][0], F[r][1], h) : F[r], q.push(Q((E[0] - a) * c + f) + "," + Q((b - E[1]) * d + e));
                                    l || q.push("Z")
                                }
                                return q
                            }
                    }(),
                    d = {
                        toScreenPoint: function (a, b, c, d, f) {
                            var e = a.spatialReference,
                                g = d.spatialReference,
                                k = d.x;
                            d = d.y;
                            e && (g && !e.equals(g) && e._canProject(g)) && (e = e.isWebMercator() ? q.lngLatToXY(k, d) : q.xyToLngLat(k, d, !0), k = e[0], d = e[1]);
                            k = (k - a.xmin) * (b / a.getWidth());
                            d = (a.ymax - d) * (c / a.getHeight());
                            f || (k = Math.round(k), d = Math.round(d));
                            return new h(k, d)
                        },
                        toScreenGeometry: function (a, b, d, n) {
                            var f = a.xmin,
                                g = a.ymax,
                                u = b / a.getWidth(),
                                h = d / a.getHeight(),
                                p = r.forEach,
                                x = Math.round;
                            if (n instanceof q) return new q(x((n.x - f) * u), x((g - n.y) * h));
                            if (n instanceof e) {
                                a = new e;
                                var v = a.points;
                                p(n.points, function (a, b) {
                                    v[b] = [x((a[0] - f) * u), x((g - a[1]) * h)]
                                });
                                return a
                            }
                            if (n instanceof c) return new c(x((n.xmin - f) * u), x((g - n.ymin) * h), x((n.xmax - f) * u), x((g - n.ymax) * u));
                            if (n instanceof k) {
                                a = new k;
                                var A = a.paths,
                                    z;
                                p(n.paths, function (a, b) {
                                    z = A[b] = [];
                                    p(a, function (a, b) {
                                        z[b] = [x((a[0] - f) * u), x((g - a[1]) * h)]
                                    })
                                });
                                return a
                            }
                            if (n instanceof l) {
                                a = new l;
                                var H = a.rings,
                                    D;
                                p(n.rings, function (a, b) {
                                    D = H[b] = [];
                                    p(a, function (a, b) {
                                        D[b] = [x((a[0] - f) * u), x((g - a[1]) * h)]
                                    })
                                });
                                return a
                            }
                        },
                        _toScreenPath: function (a, c, d, e, f, g) {
                            var u = e instanceof k,
                                h = a.spatialReference,
                                l = e.spatialReference,
                                p, r;
                            h && (l && !h.equals(l) && h._canProject(l)) && (h.isWebMercator() ? p = q.lngLatToXY : (p = q.xyToLngLat, r = !0));
                            return b(a.xmin, a.ymax, c / a.getWidth(), d / a.getHeight(), f, g, u ? e.paths : e.rings, p, r, u)
                        },
                        toMapPoint: function (a, b, c, d) {
                            return new q(a.xmin +
                                d.x / (b / a.getWidth()), a.ymax - d.y / (c / a.getHeight()), a.spatialReference)
                        },
                        toMapGeometry: function (a, b, d, n) {
                            var f = a.xmin,
                                g = a.ymax,
                                u = a.spatialReference,
                                h = b / a.getWidth(),
                                p = d / a.getHeight(),
                                x = r.forEach;
                            if (n instanceof q) return new q(f + n.x / h, g - n.y / p, u);
                            if (n instanceof e) {
                                a = new e(u);
                                var v = a.points;
                                x(n.points, function (a, b) {
                                    v[b] = [f + a[0] / h, g - a[1] / p]
                                });
                                return a
                            }
                            if (n instanceof c) return new c(f + n.xmin / h, g - n.ymin / p, f + n.xmax / h, g - n.ymax / p, u);
                            if (n instanceof k) {
                                a = new k(u);
                                var A = a.paths,
                                    z;
                                x(n.paths, function (a, b) {
                                    z = A[b] = [];
                                    x(a, function (a, b) {
                                        z[b] = [f + a[0] / h, g - a[1] / p]
                                    })
                                });
                                return a
                            }
                            if (n instanceof l) {
                                a = new l(u);
                                var H = a.rings,
                                    D;
                                x(n.rings, function (a, b) {
                                    D = H[b] = [];
                                    x(a, function (a, b) {
                                        D[b] = [f + a[0] / h, g - a[1] / p]
                                    })
                                });
                                return a
                            }
                        }
                    };
                a("extend-esri") && p.mixin(p.getObject("geometry", !0, g), d);
                return d
            })
        },
        "esri/geometry/Polyline": function () {
            define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./Extent ../srUtils".split(" "), function (r, p, a, g, q, h, k, l, e, c, b) {
                var d = {
                    type: "polyline",
                    paths: null
                };
                r = r(l, {
                    declaredClass: "esri.geometry.Polyline",
                    constructor: function (c) {
                        a.mixin(this, d);
                        this.paths = [];
                        this._path = 0;
                        c && (a.isArray(c) ? this.paths = a.isArray(c[0][0]) ? c : [c] : c.paths ? a.mixin(this, c) : this.spatialReference = c, this.spatialReference && (this.spatialReference = b.createSpatialReference(this.spatialReference)));
                        this.verifySR()
                    },
                    addPath: function (b) {
                        this.clearCache();
                        this._path = this.paths.length;
                        this.paths[this._path] = [];
                        a.isArray(b[0]) ? p.forEach(b, this._addPointArr, this) : p.forEach(b, this._addPoint,
                            this);
                        return this
                    },
                    _addPointArr: function (a) {
                        this.paths[this._path].push(a)
                    },
                    _addPoint: function (a) {
                        this.paths[this._path].push([a.x, a.y])
                    },
                    _insertPoints: function (a, b) {
                        this.clearCache();
                        this._path = b;
                        this.paths[this._path] || (this.paths[this._path] = []);
                        p.forEach(a, this._addPoint, this)
                    },
                    _validateInputs: function (a, b) {
                        return null !== a && void 0 !== a && (0 > a || a >= this.paths.length) || null !== b && void 0 !== a && (0 > b || b >= this.paths[a].length) ? !1 : !0
                    },
                    getPoint: function (a, b) {
                        if (this._validateInputs(a, b)) return new e(this.paths[a][b],
                            this.spatialReference)
                    },
                    setPoint: function (a, b, c) {
                        if (this._validateInputs(a, b)) return this.clearCache(), this.paths[a][b] = [c.x, c.y], this
                    },
                    insertPoint: function (a, b, c) {
                        if (this._validateInputs(a) && h.isDefined(b) && 0 <= b && b <= this.paths[a].length) return this.clearCache(), this.paths[a].splice(b, 0, [c.x, c.y]), this
                    },
                    removePath: function (a) {
                        if (this._validateInputs(a, null)) {
                            this.clearCache();
                            a = this.paths.splice(a, 1)[0];
                            var b, c = a.length,
                                d = this.spatialReference;
                            for (b = 0; b < c; b++) a[b] = new e(a[b], d);
                            return a
                        }
                    },
                    removePoint: function (a,
                        b) {
                        if (this._validateInputs(a, b)) return this.clearCache(), new e(this.paths[a].splice(b, 1)[0], this.spatialReference)
                    },
                    getExtent: function () {
                        var a;
                        a = this.getCacheValue("_extent");
                        var b = this.getCacheValue("_partwise");
                        if (a) return a = new c(a), a._partwise = b, a;
                        a = this.paths;
                        var d = a.length;
                        if (d && a[0].length) {
                            var e, f, g, u, k, h, l, p, q = u = a[0][0][0],
                                r = k = a[0][0][1],
                                H = Math.min,
                                D = Math.max,
                                F = this.spatialReference,
                                b = [],
                                E, Q, R, G;
                            for (h = 0; h < d; h++) {
                                e = a[h];
                                E = Q = e[0] && e[0][0];
                                R = G = e[0] && e[0][1];
                                p = e.length;
                                for (l = 0; l < p; l++) f = e[l],
                                    g = f[0], f = f[1], q = H(q, g), r = H(r, f), u = D(u, g), k = D(k, f), E = H(E, g), R = H(R, f), Q = D(Q, g), G = D(G, f);
                                b.push(new c({
                                    xmin: E,
                                    ymin: R,
                                    xmax: Q,
                                    ymax: G,
                                    spatialReference: F ? F.toJson() : null
                                }))
                            }
                            a = {
                                xmin: q,
                                ymin: r,
                                xmax: u,
                                ymax: k,
                                spatialReference: F ? F.toJson() : null
                            };
                            b = 1 < b.length ? b : null;
                            this.setCacheValue("_extent", a);
                            this.setCacheValue("_partwise", b);
                            a = new c(a);
                            a._partwise = b;
                            return a
                        }
                    },
                    toJson: function () {
                        var b = {
                                paths: a.clone(this.paths)
                            },
                            c = this.spatialReference;
                        c && (b.spatialReference = c.toJson());
                        return b
                    }
                });
                r.defaultProps = d;
                g("extend-esri") &&
                    (a.setObject("geometry.Polyline", r, q), q.geometry.defaultPolyline = d);
                return r
            })
        },
        "esri/geometry/Polygon": function () {
            define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./Extent ./mathUtils ../srUtils".split(" "), function (r, p, a, g, q, h, k, l, e, c, b, d) {
                var m = {
                        type: "polygon",
                        rings: null
                    },
                    t = r(l, {
                        declaredClass: "esri.geometry.Polygon",
                        constructor: function (b) {
                            a.mixin(this, m);
                            this.rings = [];
                            this._ring = 0;
                            b && (a.isArray(b) ? this.rings = a.isArray(b[0][0]) ?
                                b : [b] : b.rings ? a.mixin(this, b) : this.spatialReference = b, this.spatialReference && (this.spatialReference = d.createSpatialReference(this.spatialReference)));
                            this.verifySR()
                        },
                        addRing: function (b) {
                            this.clearCache();
                            this._ring = this.rings.length;
                            this.rings[this._ring] = [];
                            a.isArray(b[0]) ? p.forEach(b, this._addPointArr, this) : p.forEach(b, this._addPoint, this);
                            return this
                        },
                        _addPointArr: function (a) {
                            this.rings[this._ring].push(a)
                        },
                        _addPoint: function (a) {
                            this.rings[this._ring].push([a.x, a.y])
                        },
                        _insertPoints: function (a,
                            b) {
                            this.clearCache();
                            this._ring = b;
                            this.rings[this._ring] || (this.rings[this._ring] = []);
                            p.forEach(a, this._addPoint, this)
                        },
                        _validateInputs: function (a, b) {
                            return null !== a && void 0 !== a && (0 > a || a >= this.rings.length) || null !== b && void 0 !== a && (0 > b || b >= this.rings[a].length) ? !1 : !0
                        },
                        getPoint: function (a, b) {
                            if (this._validateInputs(a, b)) return new e(this.rings[a][b], this.spatialReference)
                        },
                        setPoint: function (a, b, c) {
                            if (this._validateInputs(a, b)) return this.clearCache(), this.rings[a][b] = [c.x, c.y], this
                        },
                        insertPoint: function (a,
                            b, c) {
                            if (this._validateInputs(a) && h.isDefined(b) && 0 <= b && b <= this.rings[a].length) return this.clearCache(), this.rings[a].splice(b, 0, [c.x, c.y]), this
                        },
                        removeRing: function (a) {
                            if (this._validateInputs(a, null)) {
                                this.clearCache();
                                a = this.rings.splice(a, 1)[0];
                                var b, c = a.length,
                                    d = this.spatialReference;
                                for (b = 0; b < c; b++) a[b] = new e(a[b], d);
                                return a
                            }
                        },
                        removePoint: function (a, b) {
                            if (this._validateInputs(a, b)) return this.clearCache(), new e(this.rings[a].splice(b, 1)[0], this.spatialReference)
                        },
                        getExtent: function () {
                            var a;
                            a = this.getCacheValue("_extent");
                            var b = this.getCacheValue("_partwise");
                            if (a) return a = new c(a), a._partwise = b, a;
                            a = this.rings;
                            var f = a.length;
                            if (f && a[0].length) {
                                var d, e, m, g, k, h, t, l, p = g = a[0][0][0],
                                    q = k = a[0][0][1],
                                    r = Math.min,
                                    E = Math.max,
                                    Q = this.spatialReference,
                                    b = [],
                                    R, G, I, P;
                                for (h = 0; h < f; h++) {
                                    d = a[h];
                                    R = G = d[0] && d[0][0];
                                    I = P = d[0] && d[0][1];
                                    l = d.length;
                                    for (t = 0; t < l; t++) e = d[t], m = e[0], e = e[1], p = r(p, m), q = r(q, e), g = E(g, m), k = E(k, e), R = r(R, m), I = r(I, e), G = E(G, m), P = E(P, e);
                                    b.push(new c({
                                        xmin: R,
                                        ymin: I,
                                        xmax: G,
                                        ymax: P,
                                        spatialReference: Q ?
                                            Q.toJson() : null
                                    }))
                                }
                                a = {
                                    xmin: p,
                                    ymin: q,
                                    xmax: g,
                                    ymax: k,
                                    spatialReference: Q ? Q.toJson() : null
                                };
                                b = 1 < b.length ? b : null;
                                this.setCacheValue("_extent", a);
                                this.setCacheValue("_partwise", b);
                                a = new c(a);
                                a._partwise = b;
                                return a
                            }
                        },
                        contains: function (a) {
                            var b = this.rings,
                                c, d = !1,
                                m, g, k, h, t, l, p = b.length;
                            c = this.spatialReference;
                            m = a.spatialReference;
                            var q = a.x;
                            a = a.y;
                            c && (m && !c.equals(m) && c._canProject(m)) && (a = c.isWebMercator() ? e.lngLatToXY(q, a) : e.xyToLngLat(q, a, !0), q = a[0], a = a[1]);
                            for (l = 0; l < p; l++) {
                                c = b[l];
                                k = c.length;
                                for (t = h = 0; t < k; t++)
                                    if (h++,
                                        h === k && (h = 0), m = c[t], g = c[h], (m[1] < a && g[1] >= a || g[1] < a && m[1] >= a) && m[0] + (a - m[1]) / (g[1] - m[1]) * (g[0] - m[0]) < q) d = !d
                            }
                            return d
                        },
                        getCentroid: function () {
                            var a = this.getCacheValue("_centroid");
                            if (void 0 !== a) return a;
                            var a = this.rings,
                                b, c, d, m, g = [],
                                k, h, t = Infinity,
                                l = -Infinity,
                                q = Infinity,
                                r = -Infinity;
                            p.forEach(a, function (a) {
                                b = c = d = 0;
                                p.forEach(a, function (e, m) {
                                    m < a.length - 1 && (k = a[m + 1], h = e[0] * k[1] - k[0] * e[1], b += (e[0] + k[0]) * h, c += (e[1] + k[1]) * h, d += h, e[0] < t && (t = e[0]), e[0] > l && (l = e[0]), e[1] < q && (q = e[1]), e[1] > r && (r = e[1]))
                                });
                                0 < d &&
                                    (d *= -1);
                                d && g.push([b, c, d / 2])
                            });
                            g.sort(function (a, b) {
                                return a[2] - b[2]
                            });
                            b = c = void 0;
                            if (g[0] && (m = 6 * g[0][2], b = g[0][0] / m, c = g[0][1] / m, b < t || b > l || c < q || c > r)) b = c = void 0;
                            if (void 0 === b || void 0 === c)
                                if (a = a[0] && a[0].length ? this._getLineCentroid(a[0]) : null) b = a.x, c = a.y;
                            a = isNaN(b) || isNaN(c) ? null : new e(b, c, this.spatialReference);
                            this.setCacheValue("_centroid", a);
                            return a
                        },
                        _getLineCentroid: function (a) {
                            var c, f = 0,
                                d = 0,
                                e = 0,
                                m, g, k = {
                                    x: 0,
                                    y: 0
                                },
                                h = {
                                    x: 0,
                                    y: 0
                                },
                                t, l = a.length,
                                p;
                            for (t = 0; t < l - 1; t++) m = a[t], g = a[t + 1], m && g && (k.x = m[0], k.y = m[1],
                                h.x = g[0], h.y = g[1], c = b.getLength(k, h), 0 < c && (f += c, m = b.getMidpoint(m, g), d += c * m[0], e += c * m[1]));
                            0 < f ? p = {
                                x: d / f,
                                y: e / f
                            } : a[0] && (p = {
                                x: a[0][0],
                                y: a[0][1]
                            });
                            return p
                        },
                        isClockwise: function (b) {
                            var c = 0,
                                f, d = b.length,
                                e = a.isArray(b[0]) ? function (a, b) {
                                    return a[0] * b[1] - b[0] * a[1]
                                } : function (a, b) {
                                    return a.x * b.y - b.x * a.y
                                };
                            for (f = 0; f < d; f++) c += e(b[f], b[(f + 1) % d]);
                            return 0 >= c / 2
                        },
                        isSelfIntersecting: function (a) {
                            a = a || this;
                            var c, f, d, e, m, g, k, h = a.rings.length,
                                t;
                            for (d = 0; d < h; d++) {
                                for (c = 0; c < a.rings[d].length - 1; c++) {
                                    m = [[a.rings[d][c][0], a.rings[d][c][1]],
[a.rings[d][c + 1][0], a.rings[d][c + 1][1]]];
                                    for (f = d + 1; f < h; f++)
                                        for (e = 0; e < a.rings[f].length - 1; e++)
                                            if (g = [[a.rings[f][e][0], a.rings[f][e][1]], [a.rings[f][e + 1][0], a.rings[f][e + 1][1]]], (k = b._getLineIntersection2(m, g)) && !(k[0] === m[0][0] && k[1] === m[0][1] || k[0] === g[0][0] && k[1] === g[0][1] || k[0] === m[1][0] && k[1] === m[1][1] || k[0] === g[1][0] && k[1] === g[1][1])) return !0
                                }
                                e = a.rings[d].length;
                                if (!(4 >= e))
                                    for (c = 0; c < e - 3; c++) {
                                        t = e - 1;
                                        0 === c && (t = e - 2);
                                        m = [[a.rings[d][c][0], a.rings[d][c][1]], [a.rings[d][c + 1][0], a.rings[d][c + 1][1]]];
                                        for (f =
                                            c + 2; f < t; f++)
                                            if (g = [[a.rings[d][f][0], a.rings[d][f][1]], [a.rings[d][f + 1][0], a.rings[d][f + 1][1]]], (k = b._getLineIntersection2(m, g)) && !(k[0] === m[0][0] && k[1] === m[0][1] || k[0] === g[0][0] && k[1] === g[0][1] || k[0] === m[1][0] && k[1] === m[1][1] || k[0] === g[1][0] && k[1] === g[1][1])) return !0
                                    }
                            }
                            return !1
                        },
                        toJson: function () {
                            var b = {
                                    rings: a.clone(this.rings)
                                },
                                c = this.spatialReference;
                            c && (b.spatialReference = c.toJson());
                            return b
                        }
                    });
                t.defaultProps = m;
                t.createEllipse = function (a) {
                    var b = a.center.x,
                        c = a.center.y,
                        d = a.longAxis,
                        e = a.shortAxis,
                        m = a.numberOfPoints,
                        g = a.map,
                        k, h, l;
                    a = [];
                    var p = 2 * Math.PI / m;
                    for (h = 0; h < m; h++) k = Math.cos(h * p), l = Math.sin(h * p), k = g.toMap({
                        x: d * k + b,
                        y: e * l + c
                    }), a.push(k);
                    a.push(a[0]);
                    b = new t(g.spatialReference);
                    b.addRing(a);
                    return b
                };
                t.createCircle = function (a) {
                    return t.createEllipse({
                        center: a.center,
                        longAxis: a.r,
                        shortAxis: a.r,
                        numberOfPoints: a.numberOfPoints,
                        map: a.map
                    })
                };
                t.fromExtent = function (a) {
                    var b = a.normalize();
                    a = a.spatialReference;
                    return new t({
                        rings: p.map(b, function (a) {
                            return [[a.xmin, a.ymin], [a.xmin, a.ymax], [a.xmax, a.ymax],
[a.xmax, a.ymin], [a.xmin, a.ymin]]
                        }),
                        spatialReference: a ? a.toJson() : null
                    })
                };
                g("extend-esri") && (a.setObject("geometry.Polygon", t, q), q.geometry.defaultPolygon = m, q.geometry.createEllipse = t.createEllipse, q.geometry.createCircle = t.createCircle, q.geometry.isClockwise = t.prototype.isClockwise, q.geometry.polygonSelfIntersecting = t.prototype.isSelfIntersecting);
                return t
            })
        },
        "esri/geometry/Multipoint": function () {
            define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../SpatialReference ./Geometry ./Point ./Extent ../srUtils".split(" "),
                function (r, p, a, g, q, h, k, l, e) {
                    var c = {
                        type: "multipoint",
                        points: null
                    };
                    r = r(h, {
                        declaredClass: "esri.geometry.Multipoint",
                        constructor: function (a) {
                            p.mixin(this, c);
                            this.points = [];
                            a && (a.points ? p.mixin(this, a) : this.spatialReference = a, this.spatialReference && (this.spatialReference = e.createSpatialReference(this.spatialReference)));
                            this.verifySR()
                        },
                        addPoint: function (a) {
                            this.clearCache();
                            p.isArray(a) ? this.points.push(a) : this.points.push([a.x, a.y]);
                            return this
                        },
                        removePoint: function (a) {
                            if (this._validateInputs(a)) return this.clearCache(),
                                new k(this.points.splice(a, 1)[0], this.spatialReference)
                        },
                        getExtent: function () {
                            var a = this.getCacheValue("_extent");
                            if (a) return new l(a);
                            var a = this.points,
                                c = a.length;
                            if (c) {
                                var e = a[0],
                                    g, s, n = g = e[0],
                                    f = s = e[1],
                                    k = Math.min,
                                    h = Math.max,
                                    w = this.spatialReference,
                                    p, q;
                                for (q = 0; q < c; q++) e = a[q], p = e[0], e = e[1], n = k(n, p), f = k(f, e), g = h(g, p), s = h(s, e);
                                a = {
                                    xmin: n,
                                    ymin: f,
                                    xmax: g,
                                    ymax: s,
                                    spatialReference: w ? w.toJson() : null
                                };
                                this.setCacheValue("_extent", a);
                                return new l(a)
                            }
                        },
                        _validateInputs: function (a) {
                            return null === a || 0 > a || a >= this.points.length ?
                                !1 : !0
                        },
                        getPoint: function (a) {
                            if (this._validateInputs(a)) return a = this.points[a], new k(a[0], a[1], this.spatialReference)
                        },
                        setPoint: function (a, c) {
                            if (this._validateInputs(a)) return this.clearCache(), this.points[a] = [c.x, c.y], this
                        },
                        toJson: function () {
                            var a = {
                                    points: p.clone(this.points)
                                },
                                c = this.spatialReference;
                            c && (a.spatialReference = c.toJson());
                            return a
                        }
                    });
                    r.defaultProps = c;
                    a("extend-esri") && (p.setObject("geometry.Multipoint", r, g), g.geometry.defaultMultipoint = c);
                    return r
                })
        },
        "esri/layers/GraphicsLayer": function () {
            define("dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/dom-attr dojo/dom-construct dojo/dom-style dojo/dom dojox/gfx dojox/gfx/matrix ./gfxSniff!esri-svg?dojox/gfx/filters ./layer ../kernel ../lang ../sniff ../Color ../domUtils ../symbols/MarkerSymbol ../symbols/SimpleMarkerSymbol ../geometry/Point ../geometry/ScreenPoint ../geometry/Extent ../geometry/mathUtils ../geometry/screenUtils ../PluginTarget ./gfxSniff!esri-svg?dojox/gfx/svgext".split(" "),
                function (r, p, a, g, q, h, k, l, e, c, b, d, m, t, s, n, f, y, u, w, C, x, v, A, z) {
                    var H, D = -1 !== e.renderer.toLowerCase().indexOf("svg"),
                        F = -1 !== e.renderer.toLowerCase().indexOf("canvas"),
                        E = 9 > s("ie"),
                        Q = s("esri-touch");
                    y = r(null, {
                        declaredClass: "esri.layers._GraphicsContainer",
                        _setMap: function (a, b) {
                            var c, f = this._connects = [];
                            this._map = a;
                            this._useWillChange = "css-transforms" === a.navigationMode && D && s("esri-will-change");
                            F ? (c = h.create("div", {
                                    style: "overflow: visible; position: absolute;"
                                }, b), this._surface = {
                                    getEventSource: function () {
                                        return c
                                    }
                                },
                                f.push(p.connect(c, "onmousedown", this, this._canvasDownHandler)), f.push(p.connect(c, "onmouseup", this, this._canvasUpHandler)), f.push(p.connect(c, "onclick", this, this._canvasClickHandler)), H.prototype._canvas = !0) : (c = (this._surface = e.createSurface(b, a.width, a.height)).getEventSource(), this._useWillChange && k.set(c, "will-change", "transform"), k.set(c = E ? c.parentNode : c, {
                                overflow: "visible",
                                position: "absolute"
                            }));
                            f.push(p.connect(a, "onResize", this, "_onResizeHandler"));
                            this._useWillChange && (f.push(p.connect(a,
                                "onPan", this, "_onPanHandler")), f.push(p.connect(a, "onPanEnd", this, "_onPanEndHandler")), f.push(p.connect(a, "onExtentChange", this, "_onExtentChangeHandler")));
                            return c
                        },
                        _onPanHandler: function (a, b) {
                            var c = this._map.__visibleRect,
                                f = c.x + b.x,
                                c = c.y + b.y;
                            this._panDx = f;
                            this._panDy = c;
                            k.set(this._surface.getEventSource(), m._css.names.transform, m._css.translate(f, c))
                        },
                        _onPanEndHandler: function (a, b) {
                            var c = this._map.__visibleRect,
                                f = c.x,
                                c = c.y;
                            this._panDx = f;
                            this._panDy = c;
                            k.set(this._surface.getEventSource(), m._css.names.transform,
                                m._css.translate(f, c))
                        },
                        _onExtentChangeHandler: function (a, b, c, f) {
                            c && (this._panDy = this._panDx = 0, k.set(this._surface.getEventSource(), m._css.names.transform, m._css.translate(0, 0)))
                        },
                        _getTransform: function () {
                            return {
                                dx: this._panDx || 0,
                                dy: this._panDy || 0
                            }
                        },
                        _onResizeHandler: function (a, b, c) {
                            a = this._surface.getEventSource();
                            var f = this._map,
                                d;
                            E && k.set(a = a.parentNode, {
                                width: b + "px",
                                height: c + "px",
                                clip: "rect(0px " + b + "px " + c + "px 0px)"
                            });
                            q.set(a, "width", b);
                            q.set(a, "height", c);
                            this._surface.declaredClass || g.forEach(a.childNodes,
                                function (a) {
                                    q.set(a, "width", b);
                                    q.set(a, "height", c)
                                });
                            f.loaded && (f.graphics.suspended || (f.graphics._resized = !0), g.forEach(f.graphicsLayerIds, function (a) {
                                d = f.getLayer(a);
                                d.suspended || (d._resized = !0, d._childLayer && (d._childLayer._resized = !0));
                                d._updateSVGFilters(null, null, b, c)
                            }))
                        },
                        _cleanUp: function () {
                            g.forEach(this._connects, p.disconnect, p);
                            this._map = this._surface = null
                        },
                        _processEvent: function (a) {
                            var b = this._map;
                            a.screenPoint = new C(a.pageX - b.position.x, a.pageY - b.position.y);
                            a.mapPoint = b.toMap(a.screenPoint)
                        },
                        _canvasDownHandler: function (a) {
                            this._processEvent(a);
                            this._downPt = a.screenPoint.x + "," + a.screenPoint.y
                        },
                        _canvasUpHandler: function (a) {
                            this._processEvent(a);
                            this._upPt = a.screenPoint.x + "," + a.screenPoint.y
                        },
                        _tolerance: 15,
                        _isPrimaryMatch: function (a, b, c, f) {
                            if (!a.visible || !b) return !1;
                            var d = b.getTransformedBoundingBox(),
                                e;
                            return d ? (e = new x(d[0].x, d[0].y, d[2].x, d[2].y), delete e.spatialReference, Q ? e.intersects(c) : e.contains(f)) : g.some(b.children || [], function (a) {
                                d = a.getTransformedBoundingBox();
                                e = new x(d[0].x,
                                    d[0].y, d[2].x, d[2].y);
                                delete e.spatialReference;
                                return Q ? e.intersects(c) : e.contains(f)
                            })
                        },
                        _canvasClickHandler: function (a) {
                            if (this._downPt && this._upPt && this._downPt === this._upPt) {
                                this._processEvent(a);
                                var b = this._map,
                                    c = g.map(b.graphicsLayerIds, function (a) {
                                        return b.getLayer(a)
                                    });
                                c.push(b.graphics);
                                c.reverse();
                                var c = g.filter(c, function (a) {
                                        return a.loaded && a._mouseEvents && !a.suspended && (!t.isDefined(a.opacity) || 0 < a.opacity)
                                    }),
                                    f = a.screenPoint,
                                    d = this._tolerance,
                                    e = f.x - d,
                                    m = f.y + d,
                                    n = f.x + d,
                                    d = f.y - d,
                                    s = new x(e,
                                        d, n, m),
                                    e = b.toMap(new C(e, m)),
                                    n = b.toMap(new C(n, d)),
                                    m = e.spatialReference._getInfo(),
                                    k = new x(x.prototype._normalizeX(e.x, m).x, e.y, x.prototype._normalizeX(n.x, m).x, n.y, e.spatialReference),
                                    h;
                                delete s.spatialReference;
                                g.some(c, function (a) {
                                    a = g.filter(a.graphics, function (a) {
                                        return this._isPrimaryMatch(a, a.getDojoShape(), s, f) || !(!a._bgShape || !this._isPrimaryMatch(a, a._bgShape, s, f))
                                    }, this);
                                    a.reverse();
                                    if (0 < a.length) {
                                        var b;
                                        g.some(a, function (a) {
                                            return a.geometry && k.intersects(a.geometry) ? (b = a, !0) : !1
                                        });
                                        if (b) return h =
                                            b, !0
                                    }
                                    return !1
                                }, this);
                                if (h && (c = h.getLayer())) a.graphic = h, c.onClick(a)
                            }
                        }
                    });
                    H = r(d, {
                        declaredClass: "esri.layers._GraphicsLayer",
                        managedSuspension: !0,
                        surfaceType: F ? "canvas-2d" : e.renderer,
                        _eventMap: {
                            "graphic-add": ["graphic"],
                            "graphic-remove": ["graphic"],
                            "renderer-change": ["renderer"]
                        },
                        constructor: function (b, c) {
                            if (b && (a.isString(b) || a.isObject(b) && (b.layerDefinition || b.query))) b = c;
                            this._params = a.mixin({
                                displayOnPan: !0,
                                drawMode: !0,
                                styling: !0
                            }, b || {});
                            var f = this._params.dataAttributes;
                            "string" === typeof f && (f = [f]);
                            this.styling = D ? this._params.styling : !0;
                            this.dataAttributes = f;
                            this.infoTemplate = b && b.infoTemplate;
                            this.graphics = [];
                            this._draw = a.hitch(this, this._draw);
                            this._refresh = a.hitch(this, this._refresh);
                            this.registerConnectEvents()
                        },
                        getNode: function () {
                            return this._div && this._div.getEventSource()
                        },
                        setDrawMode: function (a) {
                            this._params.drawMode = a
                        },
                        renderer: null,
                        _setMap: function (b, c) {
                            this.inherited(arguments);
                            this._map = b;
                            this._wrap = b.wrapAround180;
                            this._srInfo = b.spatialReference._getInfo();
                            this._svgFilters = {};
                            this._canvas ? (c = e.createSurface(c.getEventSource(), b.width, b.height), k.set(c.rawNode, "position", "absolute"), this._div = c.createGroup(), this._renderProto = this._div.constructor.prototype._render, this._div._render = a.hitch(this, this._canvasRender)) : this._div = c.createGroup();
                            this._bgGroup = this._div.createGroup();
                            this._div.getEventSource().id = this.id + "_layer";
                            this._initOpacity();
                            return this._div
                        },
                        _unsetMap: function (a, b) {
                            g.forEach(this.graphics, function (a) {
                                a._shape = null
                            });
                            this._canvas ? (b = this._div.getParent(),
                                b._parent = {}, h.destroy(b.rawNode), b.destroy()) : (this._div.clear(), b.remove(this._div), h.destroy(this._div.getEventSource()));
                            this._map = this._div = this._svgFilters = null;
                            clearTimeout(this._wakeTimer);
                            this._wakeTimer = null;
                            this._disableDrawConnectors();
                            this.inherited(arguments)
                        },
                        _initOpacity: function () {
                            var a = this.opacity;
                            t.isDefined(a) && 1 > a && this.setOpacity(a, !0)
                        },
                        _onZoomStartHandler: function () {
                            f.hide(this._div.getEventSource())
                        },
                        _onExtentChangeHandler: function (a, b, c, d) {
                            clearTimeout(this._wakeTimer);
                            this._wakeTimer =
                                null;
                            c ? (a = this._map.__visibleRect, b = this._div, this._evalSDRenderer(), this._refresh(!0), this._updateTransform(b, a.x, a.y, !0), this._renderProto && b.surface.pendingRender ? this._dirty = !0 : this.suspended || f.show(b.getEventSource())) : this._resized && (this._resized = !1, this._refresh(!1));
                            if (0 < this.graphics.length) this.onUpdate()
                        },
                        _canvasRender: function () {
                            var a = this._div;
                            this._dirty && (delete this._dirty, this.suspended || f.show(a.getEventSource()));
                            return this._renderProto.apply(a, arguments)
                        },
                        _refresh: function (a) {
                            var b =
                                this.graphics,
                                c = b.length,
                                f, d = this._draw;
                            for (f = 0; f < c; f++) d(b[f], a)
                        },
                        refresh: function () {
                            this._refresh(!0)
                        },
                        redraw: function () {
                            this._refresh(!0)
                        },
                        _getTransform: function () {
                            var a = {
                                dx: 0,
                                dy: 0
                            };
                            this._map && (this._map._gc._useWillChange ? a = this._map._gc._getTransform() : this._div && (a = this._div.getTransform()));
                            return a
                        },
                        _onPanHandler: function (a, b) {
                            this._panDx = b.x;
                            this._panDy = b.y;
                            var c = this._map.__visibleRect;
                            this._updateTransform(this._div, c.x + b.x, c.y + b.y)
                        },
                        _onPanEndUpdateHandler: function (a, b) {
                            var c = this._map.__visibleRect;
                            !this._params._child && (b.x !== this._panDx || b.y !== this._panDy) ? this._updateTransform(this._div, c.x, c.y, !0) : this._updateSVGFilters(-c.x, -c.y);
                            this._refresh(!1);
                            if (this.graphics.length) this.onUpdate()
                        },
                        _onPanStartHandler: function () {
                            f.hide(this._div.getEventSource())
                        },
                        _onPanEndHandler: function () {
                            var a = this._map.__visibleRect,
                                b = this._div;
                            this._updateTransform(b, a.x, a.y, !0);
                            this._refresh(!1);
                            this._renderProto && b.surface.pendingRender ? this._dirty = !0 : f.show(b.getEventSource());
                            if (this.graphics.length) this.onUpdate()
                        },
                        _updateTransform: function (a, b, f, d) {
                            this._map._gc._useWillChange || a.setTransform(c.translate({
                                x: b,
                                y: f
                            }));
                            d && this._updateSVGFilters(-b, -f)
                        },
                        onSuspend: function () {
                            this.inherited(arguments);
                            f.hide(this._div.getEventSource());
                            clearTimeout(this._wakeTimer);
                            this._wakeTimer = null;
                            this._disableDrawConnectors()
                        },
                        onResume: function (b) {
                            this.inherited(arguments);
                            b.firstOccurrence && this._evalSDRenderer();
                            this._enableDrawConnectors();
                            this._wakeTimer = this._wakeTimer || setTimeout(a.hitch(this, function () {
                                !this.suspended &&
                                    !this._map.__zooming && this._onExtentChangeHandler(null, null, !0)
                            }), 0)
                        },
                        _enableDrawConnectors: function () {
                            var a = this._map,
                                b = p.connect;
                            this._disableDrawConnectors();
                            this._params.displayOnPan ? (this._params._child || (this._onPanHandler_connect = b(a, "onPan", this, "_onPanHandler")), this._onPanEndHandler_connect = b(a, "onPanEnd", this, "_onPanEndUpdateHandler")) : (this._onPanStartHandler_connect = b(a, "onPanStart", this, "_onPanStartHandler"), this._onPanEndHandler_connect = b(a, "onPanEnd", this, "_onPanEndHandler"));
                            this._onZoomStartHandler_connect =
                                b(a, "onZoomStart", this, "_onZoomStartHandler");
                            this._onExtentChangeHandler_connect = b(a, "onExtentChange", this, "_onExtentChangeHandler")
                        },
                        _disableDrawConnectors: function () {
                            var a = p.disconnect;
                            a(this._onExtentChangeHandler_connect);
                            a(this._onZoomStartHandler_connect);
                            a(this._onPanHandler_connect);
                            a(this._onPanStartHandler_connect);
                            a(this._onPanEndHandler_connect);
                            this._onExtentChangeHandler_connect = this._onZoomStartHandler_connect = this._onPanHandler_connect = this._onPanStartHandler_connect = this._onPanEndHandler_connect =
                                null
                        },
                        _updateExtent: function (a) {
                            var b = a.geometry;
                            if (b) {
                                if (!(a._extent = b.getExtent())) {
                                    var c, f;
                                    if ("esri.geometry.Point" === b.declaredClass) c = b.x, f = b.y;
                                    else if ("esri.geometry.Multipoint" === b.declaredClass) c = b.points[0][0], f = b.points[0][1];
                                    else {
                                        a._extent = null;
                                        return
                                    }
                                    a._extent = new x(c, f, c, f, b.spatialReference)
                                }
                            } else a._extent = null
                        },
                        _intersects: function (a, b, c) {
                            var f = a.spatialReference,
                                d = b.spatialReference,
                                e = f && d && !f.equals(d) && f._canProject(d) && 4326 === d.wkid;
                            if (this._wrap && !c) {
                                c = [];
                                var f = a._getFrameWidth(),
                                    m = this._srInfo,
                                    n = a._clip ? a._getAvailExtent() : a.extent,
                                    s, k, h, t, u = [];
                                s = b._partwise;
                                e && (n = a.geographicExtent, m = d._getInfo());
                                a = n._getParts(m);
                                if (s && s.length) {
                                    b = [];
                                    d = 0;
                                    for (e = s.length; d < e; d++) b = b.concat(s[d]._getParts(m))
                                } else b = b._getParts(m);
                                d = 0;
                                for (e = b.length; d < e; d++) {
                                    h = b[d];
                                    m = 0;
                                    for (n = a.length; m < n; m++)
                                        if (t = a[m], t.extent.intersects(h.extent)) {
                                            s = 0;
                                            for (k = h.frameIds.length; s < k; s++) c.push((t.frameIds[0] - h.frameIds[s]) * f)
                                        }
                                }
                                d = 0;
                                for (e = c.length; d < e; d++) s = c[d], g.indexOf(c, s) === d && u.push(s);
                                return u.length ? u :
                                    null
                            }
                            return (e ? a.geographicExtent : a.extent).intersects(b) ? [0] : null
                        },
                        _defaultMarker: {
                            type: "simplemarkersymbol",
                            style: "square",
                            size: 1,
                            xoffset: 0,
                            yoffset: 0,
                            angle: 0
                        },
                        _draw: function (a, b) {
                            if (this._params.drawMode && this._map && !this.suspended && !this._map.__zooming && !this._resized) try {
                                var c = a._extent,
                                    f, d, e = !D || this.styling,
                                    m = D && this.dataAttributes,
                                    g = a.getDojoShape(),
                                    n;
                                if (a.visible && c && (f = this._intersects(this._map, c, a.geometry._originOnly)) && (d = e ? this._getSymbol(a) : this._defaultMarker)) {
                                    if (!a._offsets || a._offsets.join(",") !==
                                        f.join(",") ? a._offsets = f : n = !0, !g || b || !n) {
                                        var s = a.geometry.type,
                                            c = {
                                                graphic: a
                                            },
                                            k = a._bgShape,
                                            h = e && !a.symbol ? this._getRenderer(a) : null,
                                            t = h && h.backgroundFillSymbol;
                                        if ("point" === s) this._isInvalidShape(d, g) && this._removeShape(a), a._shape = this._drawPoint(this._div, a.geometry, d, a.getDojoShape(), f, h, a), e && this._symbolizePoint(a.getDojoShape(), d, h, a);
                                        else if ("multipoint" === s) this._drawMarkers(a, d, f, h), e && this._symbolizeMarkers(a, d, h);
                                        else {
                                            var u, s = d,
                                                l, w;
                                            e && (s = (u = "simplemarkersymbol" === d.type || "picturemarkersymbol" ===
                                                d.type || "textsymbol" === d.type ? d : null) ? t : d);
                                            s && s === t && (l = this._bgGroup);
                                            k && !l && this._removeBgShape(a);
                                            s && (!l && this._isInvalidShape(s, a._shape) && this._removeShape(a, !1), w = this._drawShape(a, f, l || this._div, l ? k : a.getDojoShape()), e && this._symbolizeShape(w, s, h, !!t, a), a[l ? "_bgShape" : "_shape"] = w);
                                            if (u) {
                                                this._isInvalidShape(u, a._shape) && this._removeShape(a, !1);
                                                var p = a.geometry.getCentroid();
                                                (w = p && this._drawPoint(this._div, p, u, a._shape, f, h, a)) && this._symbolizePoint(w, u, h, a);
                                                a._shape = w
                                            }
                                        }
                                        F || (a._bgShape && this._initNode(a,
                                            a._bgShape, a._bgShape !== k, c, m), a._shape && this._initNode(a, a._shape, a._shape !== g, c, m));
                                        c.node = a.getNode();
                                        this.onGraphicDraw(c)
                                    }
                                } else g && this._removeShape(a)
                            } catch (q) {
                                this._errorHandler(q, a)
                            }
                        },
                        _initNode: function (a, b, c, f, d) {
                            if (b = b && b.getNode()) b.e_graphic = a, this._addDataAttrs(a, d, b), c && (f.node = b, this.onGraphicNodeAdd(f))
                        },
                        _removeShape: function (a, b, c) {
                            var f = a.getDojoShape(),
                                d = f && f.getNode();
                            f && !c && (f.removeShape(), f.destroy());
                            a._shape = a._offsets = null;
                            !1 !== b && this._removeBgShape(a, c);
                            if (d && (d.e_graphic =
                                    null, !F)) this.onGraphicNodeRemove({
                                graphic: a,
                                node: d
                            })
                        },
                        _removeBgShape: function (a, b) {
                            var c = a._bgShape,
                                f = c && c.getNode();
                            c && !b && (c.removeShape(), c.destroy());
                            a._bgShape = null;
                            if (f && (f.e_graphic = null, !F)) this.onGraphicNodeRemove({
                                graphic: a,
                                node: f
                            })
                        },
                        _addDataAttrs: function (a, b, c) {
                            var f = a.attributes,
                                d, e = b ? b.length : 0,
                                m = this._getRenderer(a);
                            if (c && f) {
                                for (d = 0; d < e; d++)(c = b[d]) && a.attr("data-" + c, f[c]);
                                !this.styling && m && (m.getBreakIndex ? (b = m.getBreakIndex(a), a.attr("data-class-break", -1 !== b ? b : null)) : m.getUniqueValueInfo &&
                                    (b = m.getUniqueValueInfo(a), a.attr("data-unique-value", b ? b.value : null)))
                            }
                        },
                        _drawShape: function (a, b, c, f) {
                            a = a.geometry;
                            var d = a.type,
                                e = this._map,
                                m = e.extent,
                                g = e.width,
                                n = e.height,
                                e = e.__visibleRect,
                                s = [],
                                k, h;
                            k = "extent" === d;
                            if ("rect" === d || k) s = {
                                    x: 0,
                                    y: 0,
                                    spatialReference: a.spatialReference
                                }, s.x = k ? a.xmin : a.x, s.y = k ? a.ymax : a.y, d = A.toScreenPoint(m, g, n, s), s.x = k ? a.xmax : a.x + a.width, s.y = k ? a.ymin : a.y + a.height, a = A.toScreenPoint(m, g, n, s), b = {
                                    x: d.x - e.x + b[0],
                                    y: d.y - e.y,
                                    width: Math.abs(a.x - d.x),
                                    height: Math.abs(a.y - d.y)
                                }, 0 ===
                                b.width && (b.width = 1), 0 === b.height && (b.height = 1), f = this._drawRect(c, f, b);
                            else if ("polyline" === d || "polygon" === d) {
                                k = 0;
                                for (h = b.length; k < h; k++) s = s.concat(A._toScreenPath(m, g, n, a, -e.x + b[k], -e.y));
                                f = this._drawPath(c, f, s);
                                this._rendererLimits && ("polyline" === d ? this._clipPolyline(f, a) : this._clipPolygon(f, a))
                            }
                            return f
                        },
                        _drawRect: function (a, b, c) {
                            return b ? b.setShape(c) : a.createRect(c)
                        },
                        _drawImage: function (a, b, c) {
                            return b ? b.setShape(c) : a.createImage(c)
                        },
                        _drawCircle: function (a, b, c) {
                            return b ? b.setShape(c) : a.createCircle(c)
                        },
                        _drawPath: function () {
                            return E ? function (a, b, c, f) {
                                c = f ? c : c.join(" ");
                                if (b) return b.setShape(c);
                                b = a.createObject(f ? e.Path : e.EsriPath, c);
                                a._overrideSize(b.getEventSource());
                                return b
                            } : function (a, b, c, f) {
                                c = f ? c : c.join(" ");
                                return b ? b.setShape(c) : a.createPath(c)
                            }
                        }(),
                        _drawText: function (a, b, c) {
                            return b ? b.setShape(c) : a.createText(c)
                        },
                        _evalSDRenderer: function (a) {
                            var b = this._map,
                                c = this.renderer,
                                f, d = this._rndForScale;
                            b && (b.loaded && c && c.getRendererInfo) && (f = "zoom" === c.rangeType ? c.getRendererInfoByZoom(b.getZoom()) :
                                c.getRendererInfoByScale(b.getScale()));
                            this._rndForScale = f && f.renderer;
                            (b = this._getRenderer()) && b.prepareForViewChange();
                            !a && this._rndForScale != d && this.emit("renderer-change", {
                                renderer: this._rndForScale
                            })
                        },
                        _getRenderer: function (a) {
                            var b = this._rndForScale || this.renderer;
                            a && (b && b.getObservationRenderer) && (b = b.getObservationRenderer(a));
                            return b
                        },
                        _getSymbol: function (a) {
                            var b = this._getRenderer();
                            return a.symbol || b && b.getSymbol(a)
                        },
                        _getVariable: function (a, b, c) {
                            var f;
                            a && (f = (a = a.getVisualVariablesForType(b,
                                c)) && a[0]);
                            return f
                        },
                        _applyOpacity: function (a, b, c, f) {
                            b = b.getOpacity(f, {
                                opacityInfo: c
                            });
                            null != b && (a = new n(a), a.a = b);
                            return a
                        },
                        _symbolizeShape: function (b, c, f, d, e) {
                            var m = c.getStroke(),
                                g = c.getFill(),
                                n = c.type,
                                s, k, h = this._getVariable(f, "sizeInfo", !1),
                                t = this._getVariable(f, "colorInfo", !1),
                                u = this._getVariable(f, "opacityInfo", !1),
                                l = -1 !== n.indexOf("linesymbol");
                            c = l ? "none" !== c.style : c.outline && "none" !== c.outline.style;
                            var w = l ? null : this._getVariable(f, "sizeInfo", "outline"),
                                h = (h = d ? w : w || h) ? f.getSize(e, {
                                    sizeInfo: h,
                                    resolution: this._map.getResolutionInMeters(),
                                    scale: this._map.getScale()
                                }) : null;
                            d && (t = u = null);
                            if ((t || u) && "picturefillsymbol" !== n) l ? (s = m && m.color, t && (s = f.getColor(e, {
                                colorInfo: t
                            }) || s), s && u && (s = this._applyOpacity(s, f, u, e))) : g && g.toCss && (k = g, t && (k = f.getColor(e, {
                                colorInfo: t
                            }) || k), k && u && (k = this._applyOpacity(k, f, u, e)));
                            b.setStroke(!c || null == h && !s ? m : a.mixin({}, m, null != h ? {
                                width: h
                            } : null, s && {
                                color: s
                            })).setFill(k || g)
                        },
                        _smsToPath: function () {
                            return E ? function (a, b, c, f, d, e, m, g, n) {
                                switch (b) {
                                case a.STYLE_SQUARE:
                                    return ["M",
d + "," + m, "L", e + "," + m, e + "," + g, d + "," + g, "X", "E"];
                                case a.STYLE_CROSS:
                                    return ["M", c + "," + m, "L", c + "," + g, "M", d + "," + f, "L", e + "," + f, "E"];
                                case a.STYLE_X:
                                    return ["M", d + "," + m, "L", e + "," + g, "M", d + "," + g, "L", e + "," + m, "E"];
                                case a.STYLE_DIAMOND:
                                    return ["M", c + "," + m, "L", e + "," + f, c + "," + g, d + "," + f, "X", "E"];
                                case a.STYLE_TARGET:
                                    return ["M", d + "," + m, "L", e + "," + m, e + "," + g, d + "," + g, d + "," + m, "M", d - n + "," + f, "L", d + "," + f, "M", c + "," + (m - n), "L", c + "," + m, "M", e + n + "," + f, "L", e + "," + f, "M", c + "," + (g + n), "L", c + "," + g, "E"]
                                }
                            } : function (a, b, c, f, d, e, m, g, n) {
                                switch (b) {
                                case a.STYLE_SQUARE:
                                    return ["M",
d + "," + m, e + "," + m, e + "," + g, d + "," + g, "Z"];
                                case a.STYLE_CROSS:
                                    return ["M", c + "," + m, c + "," + g, "M", d + "," + f, e + "," + f];
                                case a.STYLE_X:
                                    return ["M", d + "," + m, e + "," + g, "M", d + "," + g, e + "," + m];
                                case a.STYLE_DIAMOND:
                                    return ["M", c + "," + m, e + "," + f, c + "," + g, d + "," + f, "Z"];
                                case a.STYLE_TARGET:
                                    return ["M", d + "," + m, e + "," + m, e + "," + g, d + "," + g, d + "," + m, "M", d - n + "," + f, d + "," + f, "M", c + "," + (m - n), c + "," + m, "M", e + n + "," + f, e + "," + f, "M", c + "," + (g + n), c + "," + g]
                                }
                            }
                        }(),
                        _pathStyles: {
                            square: 1,
                            cross: 1,
                            x: 1,
                            diamond: 1,
                            target: 1
                        },
                        _typeMaps: {
                            picturemarkersymbol: "image",
                            picturefillsymbol: "path",
                            simplefillsymbol: "path",
                            simplelinesymbol: "path",
                            cartographiclinesymbol: "path",
                            textsymbol: "text"
                        },
                        _isInvalidShape: function (a, b) {
                            var c = b && b.shape && b.shape.type,
                                f = a && a.type,
                                d = a && a.style;
                            "rect" === c && (c = "path");
                            f && (d = this._typeMaps[f] || d);
                            this._pathStyles[d] && (d = "path");
                            return "shieldlabelsymbol" === f ? !0 : !(!c || !(d && c !== d))
                        },
                        _drawPoint: function (a, b, f, d, e, m, g) {
                            var n = f.type,
                                s = this._map,
                                k = s.__visibleRect,
                                h = A.toScreenPoint(s.extent, s.width, s.height, b).offset(-k.x + e[0], -k.y),
                                k = h.x,
                                t = h.y,
                                l;
                            b = [];
                            var w, p = this._getVariable(m,
                                    "rotationInfo", !1),
                                p = p ? m.getRotationAngle(g, {
                                    rotationInfo: p
                                }) : null,
                                q = this._getVariable(m, "sizeInfo", !1),
                                s = q ? m.getSize(g, {
                                    sizeInfo: q,
                                    shape: f.style,
                                    resolution: s.getResolutionInMeters(),
                                    scale: s.getScale()
                                }) : null;
                            p && b.push(c.rotategAt(p, h));
                            if (0 !== f.xoffset || 0 !== f.yoffset) w = c.translate(f.xoffset, -f.yoffset), b.push(w);
                            0 !== f.angle && b.push(c.rotategAt(f.angle, h));
                            if ("simplemarkersymbol" === n) switch (l = f.style, m = Math.round, s = null != s ? s : f.size, l) {
                                case u.STYLE_SQUARE:
                                case u.STYLE_CROSS:
                                case u.STYLE_X:
                                case u.STYLE_DIAMOND:
                                    f =
                                        isNaN(s) ? 16 : s / 2;
                                    l = this._drawPath(a, d, this._smsToPath(u, l, k, t, m(k - f), m(k + f), m(t - f), m(t + f)));
                                    break;
                                case u.STYLE_TARGET:
                                    g = f._targetWidth / 2;
                                    h = f._targetHeight / 2;
                                    l = this._drawPath(a, d, this._smsToPath(u, l, k, t, m(k - g), m(k + g), m(t - h), m(t + h), f._spikeSize));
                                    break;
                                case u.STYLE_PATH:
                                    l = this._drawPath(a, d, f.path, !0);
                                    f = l.getBoundingBox();
                                    a = this._getScaleMatrix(f, s);
                                    (1 !== a.xx || 1 !== a.yy) && b.push(c.scaleAt(a.xx, a.yy, h));
                                    b.push(c.translate(-(f.x + f.width / 2) + k, -(f.y + f.height / 2) + t));
                                    break;
                                default:
                                    f = isNaN(s) ? 16 : s / 2, l = this._drawCircle(a,
                                        d, {
                                            cx: k,
                                            cy: t,
                                            r: f
                                        })
                                } else if ("shieldlabelsymbol" === n) l = f.width, h = f.height, d = a.createGroup(), l = a.createImage({
                                    x: k - l / 2,
                                    y: t - h / 2,
                                    width: l,
                                    height: h,
                                    src: f.url
                                }), d.add(l), null != f.font && (t += 0.2 * f.getHeight(), a = a.createText({
                                    type: "text",
                                    text: f.text,
                                    x: k,
                                    y: t,
                                    align: "middle",
                                    decoration: f.decoration,
                                    rotated: f.rotated,
                                    kerning: f.kerning
                                }), a.setFont(f.font), a.setFill(f.color), d.add(a)), l = d;
                                else if ("picturemarkersymbol" === n) {
                                if (null == s ? (l = f.width, h = f.height) : (h = s, l = h * (f.width / f.height), w && (null != w.dx && (w.dx = l * (w.dx / f.width)),
                                        null != w.dy && (w.dy = h * (w.dy / f.height)))), l = this._drawImage(a, d, {
                                        x: k - l / 2,
                                        y: t - h / 2,
                                        width: l,
                                        height: h,
                                        src: f.url
                                    }), D && (a = l.getNode())) f = (f = this._getVariable(m, "opacityInfo", !1)) ? m.getOpacity(g, {
                                    opacityInfo: f
                                }) : null, null != f ? a.setAttribute("opacity", f) : a.setAttribute("opacity", 1)
                            } else "textsymbol" === n && (m = f.font, null != s && m && (m = new m.constructor(m.toJson()), m.setSize(s)), l = this._drawText(a, d, {
                                    type: "text",
                                    text: f.text,
                                    x: k,
                                    y: t,
                                    align: f.getSVGAlign(),
                                    decoration: f.decoration || m && m.decoration,
                                    rotated: f.rotated,
                                    kerning: f.kerning
                                }),
                                m && l.setFont(m), D && (a = l.getNode(), k = f.getSVGBaseline(), t = f.getSVGBaselineShift(), a && (a.setAttribute("dominant-baseline", k), t && a.setAttribute("baseline-shift", t), this._applyHalo(l, f.haloColor, f.haloSize))));
                            l.setTransform(c.multiply(b));
                            l._wrapOffsets = e;
                            return l
                        },
                        _applyHalo: function (a, b, c) {
                            var f = b && c ? this._getHaloId(b, c) : null;
                            a.setFilter(b && c ? s("webkit") || s("ff") ? this._getDilateFilter(b, c, f) : this._getOffsetFilter(b, c, f) : null)
                        },
                        _getDilateFilter: function (a, c, f) {
                            var d = this._getSVGFilter(f);
                            d || (d = this._createSVGFilter({
                                id: f
                            }, [b.feMorphology({
                                operator: "dilate",
                                radius: c,
                                result: "dilated"
                            }), b.feFlood({
                                "flood-color": a.toCss(!0)
                            }), b.feComposite({
                                in2: "dilated",
                                operator: "in",
                                result: "composite"
                            }), b.feMerge("composite", "SourceGraphic")]));
                            return d
                        },
                        _getOffsetFilter: function (a, c, f) {
                            var d = this._getSVGFilter(f);
                            if (!d) {
                                a = a.toCss(!0);
                                var d = this._offsetPrimitives,
                                    e, m = d.length,
                                    g = [],
                                    n = [];
                                for (e = 0; e < m; e++) {
                                    var s = d[e],
                                        k = "offset" + s.dir,
                                        h = "composite" + s.dir;
                                    n.push(h);
                                    g.push(b.feOffset({
                                            dx: s.dx * c,
                                            dy: s.dy * c,
                                            "in": "SourceAlpha",
                                            result: k
                                        }), b.feFlood({
                                            "flood-color": a
                                        }),
                                        b.feComposite({
                                            in2: k,
                                            operator: "in",
                                            result: h
                                        }))
                                }
                                n.push("SourceGraphic");
                                g.push(b.feMerge.apply(b.feMerge, n));
                                d = this._createSVGFilter({
                                    id: f
                                }, g)
                            }
                            return d
                        },
                        _offsetPrimitives: [{
                            dir: "L",
                            dx: -1,
                            dy: 0
                        }, {
                            dir: "TL",
                            dx: -1,
                            dy: -1
                        }, {
                            dir: "T",
                            dx: 0,
                            dy: -1
                        }, {
                            dir: "TR",
                            dx: 1,
                            dy: -1
                        }, {
                            dir: "R",
                            dx: 1,
                            dy: 0
                        }, {
                            dir: "BR",
                            dx: 1,
                            dy: 1
                        }, {
                            dir: "B",
                            dx: 0,
                            dy: 1
                        }, {
                            dir: "BL",
                            dx: -1,
                            dy: 1
                        }],
                        _getHaloId: function (a, b) {
                            return "halo_" + this._map.id + "_" + this.id + "_" + a.r + "_" + a.g + "_" + a.b + "_" + a.a + "_" + b
                        },
                        _getSVGFilter: function (a) {
                            return this._svgFilters[a]
                        },
                        _createSVGFilter: function (a,
                            c) {
                            var f = b.createFilter(a, c),
                                d = this._map,
                                e = d.__visibleRect;
                            f.x = -e.x;
                            f.y = -e.y;
                            f.width = d.width;
                            f.height = d.height;
                            return this._svgFilters[a.id] = f
                        },
                        _updateSVGFilters: function (a, b, c, f) {
                            var d = this._svgFilters,
                                e, m, g;
                            for (m in d)
                                if (e = d[m]) {
                                    if (g = l.byId(m)) null != a && g.setAttribute("x", a), null != b && g.setAttribute("y", b), null != c && g.setAttribute("width", c), null != f && g.setAttribute("height", f);
                                    null != a && (e.x = a);
                                    null != b && (e.y = b);
                                    null != c && (e.width = c);
                                    null != f && (e.height = f)
                                }
                        },
                        _getScaleMatrix: function (a, b) {
                            var c = a.width /
                                a.height,
                                f = 1,
                                d = 1;
                            isNaN(b) || (1 < c ? (f = b / a.width, d = b / c / a.height) : (d = b / a.height, f = b * c / a.width));
                            return {
                                xx: f,
                                yy: d
                            }
                        },
                        _symbolizePoint: function (b, c, f, d) {
                            var e = c.type,
                                m = c.style;
                            if (!("shieldlabelsymbol" === e || "picturemarkersymbol" === e)) {
                                var g = c.getStroke();
                                c = c.getFill();
                                var m = m === u.STYLE_X || m === u.STYLE_CROSS,
                                    n = g && g.color,
                                    s = m ? n : c;
                                if (f) {
                                    var k = this._getVariable(f, "colorInfo", !1),
                                        h = this._getVariable(f, "opacityInfo", !1);
                                    k && (s = f.getColor(d, {
                                        colorInfo: k
                                    }) || s);
                                    s && h && (s = this._applyOpacity(s, f, h, d));
                                    s && (m ? s !== n && (g = g ?
                                        a.mixin({}, g) : {}, g.color = s) : s !== c && (c = s))
                                }
                                "textsymbol" === e ? b.setFill(c) : "simplemarkersymbol" === e && b.setFill(c).setStroke(g)
                            }
                        },
                        _drawMarkers: function (a, b, c, f) {
                            var d = a.geometry,
                                e = d.points,
                                m = a.getDojoShape() || this._div.createGroup(),
                                g, n, s = e.length,
                                k = [],
                                h = 0,
                                t, u = c ? c.length : 0;
                            m.children[0] && this._isInvalidShape(b, m.children[0]) && m.clear();
                            for (n = 0; n < s; n++) {
                                g = e[n];
                                for (t = 0; t < u; t++) k[0] = c[t], this._drawPoint(m, {
                                    x: g[0],
                                    y: g[1],
                                    spatialReference: d.spatialReference
                                }, b, m.children[h++], k, f, a)
                            }
                            b = m.children.length;
                            if (s *
                                c.length < b)
                                for (n = b - 1; n >= s * c.length; n--) m.children[n].removeShape();
                            a._shape = m
                        },
                        _symbolizeMarkers: function (a, b, c) {
                            var f = a.getDojoShape().children,
                                d, e = f.length;
                            for (d = 0; d < e; d++) this._symbolizePoint(f[d], b, c, a)
                        },
                        _errorHandler: function (a, b) {
                            a.message = b ? "Unable to draw graphic (geometry:" + (b.geometry ? b.geometry.declaredClass : null) + ", symbol:" + (b.symbol ? b.symbol.declaredClass : null) + "): " + a.message : "Unable to draw graphic (null): " + a.message;
                            this.inherited(arguments)
                        },
                        _rendererLimits: function () {
                            var a, b, c;
                            s("ff") ? (a = 16125, b = -32250, c = 32250) : E ? (a = 1E5, b = -1E5, c = 1E5) : s("chrome") && 6 > s("chrome") && (a = 8150, b = -1E4, c = 1E4);
                            if (a) return {
                                clipLimit: a,
                                rangeMin: b,
                                rangeMax: c,
                                clipBBox: [-a, -a, a, a],
                                clipSegments: [[[-a, -a], [a, -a]], [[a, -a], [a, a]], [[a, a], [-a, a]], [[-a, a], [-a, -a]]]
                            }
                        }(),
                        _clipPolyline: function (a, b) {
                            var c = this._getCorners(a, b),
                                f = c.br,
                                d = this._rendererLimits,
                                e = d.rangeMin,
                                m = d.rangeMax,
                                n = d.clipBBox,
                                s = d.clipSegments,
                                d = this._isPointWithinRange,
                                k = this._isPointWithinBBox,
                                h = this._getClipperIntersection,
                                t = this._getPlaneIndex;
                            if (!d(c.tl, e, m) || !d(f, e, m)) {
                                E && this._createSegments(a);
                                var u = [];
                                g.forEach(a.segments, function (a) {
                                    a = a.args;
                                    var b = a.length,
                                        c = [],
                                        f;
                                    for (f = 0; f < b; f += 2) {
                                        var d = [a[f], a[f + 1]],
                                            e = [a[f + 2], a[f + 3]],
                                            m = k(d, n),
                                            g = k(e, n);
                                        if (m ^ g) {
                                            if (g = h([d, e], s)) m ? (f ? c.push(g[1]) : c.push(d, g[1]), u.push(c), c = []) : c.push(g[1], e)
                                        } else m ? f ? c.push(e) : c.push(d, e) : (g = t(d, n), m = t(e, n), -1 === g || (-1 === m || g === m) || (d = h([d, e], s, !0), 0 < d.length && (d[g] || (g = d[g[0]] ? g[0] : g[1]), d[m] || (m = d[m[0]] ? m[0] : m[1]), e = d[g], d = d[m], e && c.push(e), d && (c.push(d), u.push(c),
                                            c = []))))
                                    }
                                    u.push(c)
                                });
                                a.setShape(this._getPathStringFromPaths(u))
                            }
                        },
                        _clipPolygon: function (b, c) {
                            var f = this._getCorners(b, c),
                                d = f.br,
                                e = this._rendererLimits,
                                m = e.clipLimit,
                                n = e.rangeMin,
                                s = e.rangeMax,
                                k = e.clipBBox,
                                h = e.clipSegments,
                                e = this._isPointWithinRange,
                                t = this._isPointWithinBBox,
                                u = this._getClipperIntersection,
                                l = this._getPlaneIndex,
                                w = v._pointLineDistance;
                            if (!e(f.tl, n, s) || !e(d, n, s)) E && this._createSegments(b), f = g.map(b.segments, function (b) {
                                var c = b.args,
                                    f = c.length,
                                    d = [];
                                b = [];
                                var e;
                                for (e = 0; e < f; e += 2) {
                                    var n = [c[e],
c[e + 1]],
                                        s = [c[e + 2], c[e + 3]];
                                    if (e === f - 2) {
                                        d.push(n);
                                        break
                                    }
                                    var p = t(n, k),
                                        q = t(s, k);
                                    d.push(n);
                                    if (p ^ q) {
                                        if (q = u([n, s], h)) n = q[1], n[p ? "inOut" : "outIn"] = !0, d.push(n), b.push([p ? "INOUT" : "OUTIN", d.length - 1, q[0]])
                                    } else if (!p) {
                                        var p = l(n, k),
                                            y = l(s, k); - 1 === p || (-1 === y || p === y) || (q = u([n, s], h, !0), 0 < q.length ? (q[p] || (p = q[p[0]] ? p[0] : p[1]), q[y] || (y = q[y[0]] ? y[0] : y[1]), n = q[p], s = q[y], n && (n.outIn = !0, d.push(n), b.push(["OUTIN", d.length - 1, p])), s && (s.inOut = !0, d.push(s), b.push(["INOUT", d.length - 1, y]))) : a.isArray(p) && a.isArray(y) && (q = p.concat(y),
                                            q.sort(), "0123" === q.join("") && (q = [], 3 === p[0] + p[1] ? q.push([m, -m], [-m, m]) : q.push([-m, -m], [m, m]), p = w(q[0], [n, s]), n = w(q[1], [n, s]), d.push(p < n ? q[0] : q[1]))))
                                    }
                                }
                                var r = k[0],
                                    x = k[1],
                                    D = k[2],
                                    v = k[3];
                                g.forEach(d, function (a) {
                                    a[0] < r && (a[1] >= x && a[1] <= v ? a[0] = r : (a[0] = r, a[1] = a[1] < x ? x : v))
                                });
                                g.forEach(d, function (a) {
                                    a[1] < x && (a[0] >= r && a[0] <= D ? a[1] = x : (a[1] = x, a[0] = a[0] < r ? r : D))
                                });
                                g.forEach(d, function (a) {
                                    a[0] > D && (a[1] >= x && a[1] <= v ? a[0] = D : (a[0] = D, a[1] = a[1] < x ? x : v))
                                });
                                g.forEach(d, function (a) {
                                    a[1] > v && (a[0] >= r && a[0] <= D ? a[1] = v : (a[1] =
                                        v, a[0] = a[0] < r ? r : D))
                                });
                                c = 0;
                                f = b.length;
                                if (0 < f) {
                                    do {
                                        s = b[c];
                                        e = b[(c + 1) % f];
                                        if (s[2] === e[2] && "INOUT" === s[0] && "OUTIN" === e[0])
                                            if (n = s[1], e = e[1], n < e)
                                                for (n += 1; n < e; n++) d[n][2] = !0;
                                            else if (n > e) {
                                            for (n += 1; n < d.length; n++) d[n][2] = !0;
                                            for (n = 0; n < e; n++) d[n][2] = !0
                                        }
                                        c = (c + 1) % f
                                    } while (0 !== c)
                                }
                                f = d[0];
                                c = d[d.length - 1];
                                f[2] && (c[2] = !0, g.some(b, function (b) {
                                    return 1 === b[1] ? (d.splice(d.length - 1, 0, a.clone(d[1])), !0) : !1
                                }));
                                d = g.filter(d, function (a) {
                                    return a[2] ? !1 : !0
                                });
                                for (c = 0; c < d.length - 1; c++)
                                    if (f = d[c], (e = d[c + 1]) && !(f[0] !== e[0] || f[1] !== e[1])) e.outIn ?
                                        f.outIn = !0 : e.inOut && (f.inOut = !0), d.splice(c + 1, 1);
                                f = Math.abs;
                                b = [];
                                for (c = 0; c < d.length - 1; c++) {
                                    s = d[c];
                                    n = s[0];
                                    s = s[1];
                                    p = f(n) === m;
                                    q = f(s) === m;
                                    e = d[c + 1];
                                    y = e[0];
                                    e = e[1];
                                    var C = f(y) === m,
                                        E = f(e) === m;
                                    p && E ? b.push([c + 1, [n, e]]) : q && C && b.push([c + 1, [y, s]])
                                }
                                for (c = b.length - 1; 0 <= c; c--) e = b[c], n = d[e[0] - 1], f = d[e[0]], !n.outIn && (!n.inOut && !f.outIn && !f.inOut) && d.splice(e[0], 0, e[1]);
                                f = d[0];
                                c = d[d.length - 1];
                                (f[0] !== c[0] || f[1] !== c[1]) && d.push(f);
                                return d
                            }), b.setShape(this._getPathStringFromPaths(f))
                        },
                        _getCorners: function (a, b) {
                            if (E) {
                                var c =
                                    this._map,
                                    f = b.getExtent(),
                                    d = f.spatialReference,
                                    e = c.toScreen(new w(f.xmin, f.ymax, d)),
                                    c = c.toScreen(new w(f.xmax, f.ymin, d));
                                return {
                                    tl: e,
                                    br: c
                                }
                            }
                            e = a.getTransformedBoundingBox();
                            return {
                                tl: e[0],
                                br: e[2]
                            }
                        },
                        _createSegments: function (a) {
                            a.shape.path = a.vmlPath;
                            a.segmented = !1;
                            a._confirmSegmented();
                            var b = a.segments;
                            1 < b.length && (a.segments = g.filter(b, function (a, b, c) {
                                b = c[b + 1];
                                return "M" === a.action && b && "L" === b.action ? (a.args = a.args.concat(b.args), !0) : !1
                            }))
                        },
                        _getPathStringFromPaths: function (a) {
                            E ? (a = g.map(a, function (a) {
                                return "m " +
                                    g.map(a, function (a, b) {
                                        return (1 === b ? "l " : "") + a.join(",")
                                    }).join(" ")
                            }), a.push("e")) : a = g.map(a, function (a) {
                                return "M " + g.map(a, function (a) {
                                    return a.join(",")
                                }).join(" ")
                            });
                            return a.join(" ")
                        },
                        _isPointWithinBBox: function (a, b) {
                            var c = b[1],
                                f = b[2],
                                d = b[3],
                                e = a[0],
                                m = a[1];
                            return e > b[0] && e < f && m > c && m < d ? !0 : !1
                        },
                        _isPointWithinRange: function (a, b, c) {
                            var f = a.x;
                            a = a.y;
                            return f < b || a < b || f > c || a > c ? !1 : !0
                        },
                        _getClipperIntersection: function (a, b, c) {
                            var f, d = v._getLineIntersection2,
                                e = Math.round,
                                m = {
                                    length: 0
                                };
                            for (f = 0; 4 > f; f++) {
                                var n =
                                    d(a, b[f]);
                                if (n)
                                    if (n[0] = e(n[0]), n[1] = e(n[1]), c) m[f] = n, m.length++;
                                    else return [f, n]
                            }
                            return c ? m : null
                        },
                        _getPlaneIndex: function (a, b) {
                            var c = a[0],
                                f = a[1],
                                d = b[0],
                                e = b[1],
                                m = b[2],
                                n = b[3];
                            return c <= d ? f >= e && f <= n ? 3 : f < e ? [0, 3] : [2, 3] : f <= e ? c >= d && c <= m ? 0 : c < d ? [3, 0] : [1, 0] : c >= m ? f >= e && f <= n ? 1 : f < e ? [0, 1] : [2, 1] : f >= n ? c >= d && c <= m ? 2 : c < d ? [3, 2] : [1, 2] : -1
                        },
                        onGraphicAdd: function () {},
                        onGraphicRemove: function () {},
                        onGraphicNodeAdd: function () {},
                        onGraphicNodeRemove: function () {},
                        onGraphicDraw: function () {},
                        onGraphicsClear: function () {},
                        onRendererChange: function () {},
                        onOpacityChange: function () {},
                        setInfoTemplate: function (a) {
                            this.infoTemplate = a
                        },
                        add: function (a, b) {
                            if (a._graphicsLayer === this) return a;
                            b || this.graphics.push(a);
                            a._graphicsLayer = this;
                            a._layer = this;
                            this._updateExtent(a);
                            this._draw(a);
                            if (!b) this.onGraphicAdd(a);
                            return a
                        },
                        remove: function (a, b, c) {
                            if (!b && !c) {
                                b = this.graphics;
                                if (-1 === (a = g.indexOf(b, a))) return null;
                                a = b.splice(a, 1)[0]
                            }
                            a.getDojoShape() && this._removeShape(a, null, c);
                            a._shape = a._graphicsLayer = null;
                            this.onGraphicRemove(a);
                            return a
                        },
                        clear: function (a,
                            b) {
                            var c = this.graphics,
                                f, d = !E;
                            for (f = c.length - 1; 0 <= f; f--) this.remove(c[f], null, d);
                            this.graphics = [];
                            if (d && this._div) {
                                var e;
                                this._childLayer && (e = this._childLayer.getNode()) && e.parentNode && e.parentNode.removeChild(e);
                                this._bgGroup.clear();
                                this._div.clear();
                                this._bgGroup = this._div.createGroup();
                                e && this._div.getEventSource().appendChild(e);
                                this._initOpacity()
                            }
                            if (!b) this.onGraphicsClear()
                        },
                        _setIEOpacity: function (a, b) {
                            var c = a && a.getNode();
                            if (c) {
                                var f = a.strokeStyle,
                                    d = c.stroke;
                                f && d && (d.opacity = f.color.a * b);
                                f = a.fillStyle;
                                d = c.fill;
                                f && d && ("tile" === d.type ? k.set(c, "opacity", b) : d.opacity = f.a * b)
                            }
                        },
                        setOpacity: function (a, b) {
                            if (b || this.opacity != a) {
                                var c = this._div;
                                c && (E ? (g.forEach(this.graphics, function (b) {
                                    this._setIEOpacity(b._shape, a);
                                    this._setIEOpacity(b._bgShape, a)
                                }, this), c._esriIeOpacity = a, this._bgGroup._esriIeOpacity = a) : this._canvas ? k.set(c.getEventSource(), "opacity", a) : c.getEventSource().setAttribute("opacity", a));
                                this.opacity = a;
                                if (!b) this.onOpacityChange(a)
                            }
                        },
                        setRenderer: function (a) {
                            this.renderer = a;
                            this._evalSDRenderer(!0);
                            this.emit("renderer-change", {
                                renderer: this._rndForScale || a
                            })
                        }
                    });
                    r = r([H, z], {
                        declaredClass: "esri.layers.GraphicsLayer",
                        constructor: function () {
                            this.enableMouseEvents = a.hitch(this, this.enableMouseEvents);
                            this.disableMouseEvents = a.hitch(this, this.disableMouseEvents);
                            this._processEvent = a.hitch(this, this._processEvent);
                            this._initLayer()
                        },
                        _initLayer: function () {
                            this.loaded = !0;
                            this.onLoad(this)
                        },
                        _setMap: function () {
                            var a = this.inherited("_setMap", arguments);
                            this.enableMouseEvents();
                            return a
                        },
                        _unsetMap: function () {
                            this.disableMouseEvents();
                            this.inherited("_unsetMap", arguments)
                        },
                        _processEvent: function (a) {
                            var b = this._map,
                                c = a.target,
                                f;
                            a.screenPoint = new C(a.pageX - b.position.x, a.pageY - b.position.y);
                            for (a.mapPoint = b.toMap(a.screenPoint); c && !(f = c.e_graphic);) c = c.parentNode;
                            if (f) return a.graphic = f, a
                        },
                        _onMouseOverHandler: function (a) {
                            if (this._processEvent(a)) this.onMouseOver(a)
                        },
                        _onMouseMoveHandler: function (a) {
                            if (this._processEvent(a)) this.onMouseMove(a)
                        },
                        _onMouseDragHandler: function (a) {
                            if (this._processEvent(a)) this.onMouseDrag(a)
                        },
                        _onMouseOutHandler: function (a) {
                            if (this._processEvent(a)) this.onMouseOut(a)
                        },
                        _onMouseDownHandler: function (a) {
                            this._downGr = this._downPt = null;
                            this._processEvent(a) && (p.disconnect(this._onmousemove_connect), p.disconnect(this._onmousedrag_connect), this._onmousedrag_connect = p.connect(this._div.getEventSource(), "onmousemove", this, "_onMouseDragHandler"), this._downGr = a.graphic, this._downPt = a.screenPoint.x + "," + a.screenPoint.y, this.onMouseDown(a))
                        },
                        _onMouseUpHandler: function (a) {
                            this._upGr = this._upPt = null;
                            this._processEvent(a) && (p.disconnect(this._onmousedrag_connect), p.disconnect(this._onmousemove_connect),
                                this._onmousemove_connect = p.connect(this._div.getEventSource(), "onmousemove", this, "_onMouseMoveHandler"), this._upGr = a.graphic, this._upPt = a.screenPoint.x + "," + a.screenPoint.y, this.onMouseUp(a))
                        },
                        _onClickHandler: function (a) {
                            if (this._processEvent(a)) {
                                var b = this._downGr,
                                    c = this._upGr;
                                b && (c && b === c && this._downPt === this._upPt) && (E && (m._ieGraphic = a.graphic), this.onClick(a))
                            }
                        },
                        _onDblClickHandler: function (a) {
                            if (this._processEvent(a)) this.onDblClick(a)
                        },
                        onMouseOver: function () {},
                        onMouseMove: function () {},
                        onMouseDrag: function () {},
                        onMouseOut: function () {},
                        onMouseDown: function () {},
                        onMouseUp: function () {},
                        onClick: function () {},
                        onDblClick: function () {},
                        enableMouseEvents: function () {
                            if (!this._mouseEvents) {
                                var a = p.connect,
                                    b = this._div.getEventSource();
                                F || (this._onmouseover_connect = a(b, "onmouseover", this, "_onMouseOverHandler"), this._onmousemove_connect = a(b, "onmousemove", this, "_onMouseMoveHandler"), this._onmouseout_connect = a(b, "onmouseout", this, "_onMouseOutHandler"), this._onmousedown_connect = a(b, "onmousedown", this, "_onMouseDownHandler"),
                                    this._onmouseup_connect = a(b, "onmouseup", this, "_onMouseUpHandler"), this._onclick_connect = a(b, "onclick", this, "_onClickHandler"), this._ondblclick_connect = a(b, "ondblclick", this, "_onDblClickHandler"));
                                this._mouseEvents = !0
                            }
                        },
                        disableMouseEvents: function () {
                            if (this._mouseEvents) {
                                var a = p.disconnect;
                                a(this._onmouseover_connect);
                                a(this._onmousemove_connect);
                                a(this._onmousedrag_connect);
                                a(this._onmouseout_connect);
                                a(this._onmousedown_connect);
                                a(this._onmouseup_connect);
                                a(this._onclick_connect);
                                a(this._ondblclick_connect);
                                this._mouseEvents = !1
                            }
                        }
                    });
                    r._GraphicsContainer = y;
                    r._GraphicsLayer = H;
                    s("extend-esri") && (a.setObject("layers.GraphicsLayer", r, m), a.setObject("layers._GraphicsContainer", y, m), a.setObject("layers._GraphicsLayer", H, m));
                    return r
                })
        },
        "dojox/gfx": function () {
            define(["dojo/_base/lang", "./gfx/_base", "./gfx/renderer!"], function (r, p, a) {
                p.switchTo(a);
                return p
            })
        },
        "dojox/gfx/renderer": function () {
            define(["./_base", "dojo/_base/lang", "dojo/_base/sniff", "dojo/_base/window", "dojo/_base/config"], function (r, p, a, g, q) {
                var h =
                    null;
                a.add("vml", function (a, g, e) {
                    e.innerHTML = '\x3cv:shape adj\x3d"1"/\x3e';
                    a = "adj" in e.firstChild;
                    e.innerHTML = "";
                    return a
                });
                return {
                    load: function (k, l, e) {
                        function c() {
                            l(["dojox/gfx/" + b], function (a) {
                                r.renderer = b;
                                h = a;
                                e(a)
                            })
                        }
                        if (h && "force" != k) e(h);
                        else {
                            var b = q.forceGfxRenderer;
                            k = !b && (p.isString(q.gfxRenderer) ? q.gfxRenderer : "svg,vml,canvas,silverlight").split(",");
                            for (var d, m; !b && k.length;) switch (k.shift()) {
                            case "svg":
                                "SVGAngle" in g.global && (b = "svg");
                                break;
                            case "vml":
                                a("vml") && (b = "vml");
                                break;
                            case "silverlight":
                                try {
                                    a("ie") ?
                                        (d = new ActiveXObject("AgControl.AgControl")) && d.IsVersionSupported("1.0") && (m = !0) : navigator.plugins["Silverlight Plug-In"] && (m = !0)
                                } catch (t) {
                                    m = !1
                                } finally {
                                    d = null
                                }
                                m && (b = "silverlight");
                                break;
                            case "canvas":
                                g.global.CanvasRenderingContext2D && (b = "canvas")
                            }
                            "canvas" === b && !1 !== q.canvasEvents && (b = "canvasWithEvents");
                            q.isDebug && console.log("gfx renderer \x3d " + b);
                            "svg" == b && "undefined" != typeof window.svgweb ? window.svgweb.addOnLoad(c) : c()
                        }
                    }
                }
            })
        },
        "esri/layers/gfxSniff": function () {
            define(["dojo/has", "dojox/gfx"],
                function (r, p) {
                    r.add("esri-svg", function () {
                        return -1 !== p.renderer.toLowerCase().indexOf("svg")
                    });
                    return r
                })
        },
        "esri/layers/layer": function () {
            define("dojo/_base/declare dojo/_base/config dojo/_base/connect dojo/_base/lang dojo/_base/Deferred dojo/_base/json dojo/has ../Evented ../kernel ../lang ../request ../deferredUtils ../urlUtils ../SpatialReference ../geometry/Extent".split(" "), function (r, p, a, g, q, h, k, l, e, c, b, d, m, t, s) {
                var n = r([l], {
                    declaredClass: "esri.layers.Layer",
                    _eventMap: {
                        error: ["error"],
                        load: ["layer"],
                        "opacity-change": ["opacity"],
                        "update-end": ["error"],
                        "visibility-change": ["visible"]
                    },
                    constructor: function (b, d) {
                        this._attrs = {};
                        if (b && g.isString(b)) this._url = m.urlToObject(this.url = b);
                        else if (this.url = this._url = null, (d = d || b) && (d.layerDefinition || d.query)) d = null;
                        this.spatialReference = new t(4326);
                        this.initialExtent = new s(-180, -90, 180, 90, new t(4326));
                        this._map = this._div = null;
                        this.normalization = !0;
                        d && (d.id && (this.id = d.id), !1 === d.visible && (this.visible = !1), c.isDefined(d.opacity) && (this.opacity = d.opacity),
                            c.isDefined(d.minScale) && this.setMinScale(d.minScale), c.isDefined(d.maxScale) && this.setMaxScale(d.maxScale), this.attributionDataUrl = d.attributionDataUrl || "", this.hasAttributionData = !!this.attributionDataUrl, c.isDefined(d.showAttribution) && (this.showAttribution = d.showAttribution), this.className = d.className, this.refreshInterval = d.refreshInterval || 0);
                        this._errorHandler = g.hitch(this, this._errorHandler);
                        this.refresh = g.hitch(this, this.refresh);
                        if (this.managedSuspension) {
                            var e = this._setMap;
                            this._setMap =
                                function (b) {
                                    var c = e.apply(this, arguments);
                                    this.evaluateSuspension();
                                    if (this.suspended && !b.loaded) var f = a.connect(b, "onLoad", this, function () {
                                        a.disconnect(f);
                                        f = null;
                                        this.evaluateSuspension()
                                    });
                                    return c
                                }
                        }
                        this.registerConnectEvents()
                    },
                    id: null,
                    visible: !0,
                    opacity: 1,
                    loaded: !1,
                    loadError: null,
                    minScale: 0,
                    maxScale: 0,
                    visibleAtMapScale: !1,
                    suspended: !0,
                    attributionDataUrl: "",
                    hasAttributionData: !1,
                    showAttribution: !0,
                    refreshInterval: 0,
                    _errorHandler: function (a) {
                        this.loaded || (this.loadError = a);
                        this.onError(a)
                    },
                    _setMap: function (b,
                        c, d, e) {
                        this._map = b;
                        this._lyrZEHandle = a.connect(b, "onZoomEnd", this, this._processMapScale);
                        if (b.loaded) this.visibleAtMapScale = this._isMapAtVisibleScale();
                        else var m = a.connect(b, "onLoad", this, function () {
                            a.disconnect(m);
                            m = null;
                            this._processMapScale()
                        })
                    },
                    _unsetMap: function (b, c) {
                        a.disconnect(this._lyrZEHandle);
                        this._toggleRT();
                        this._map = this._lyrZEHandle = null;
                        this._resumedOnce = void 0;
                        this.suspended = !0
                    },
                    _cleanUp: function () {
                        this._map = this._div = null
                    },
                    _fireUpdateStart: function () {
                        this.updating || (this.updating = !0, this.attr("data-updating", ""), this._toggleRT(), this.onUpdateStart(), this._map && this._map._incr())
                    },
                    _fireUpdateEnd: function (a, b) {
                        this.updating && (this.updating = !1, this.attr("data-updating"), this._toggleRT(!0), this.onUpdateEnd(a, b), this._map && this._map._decr())
                    },
                    _getToken: function () {
                        var a = this._url,
                            b = this.credential;
                        return a && a.query && a.query.token || b && b.token || void 0
                    },
                    _findCredential: function () {
                        this.credential = e.id && this._url && e.id.findCredential(this._url.path)
                    },
                    _useSSL: function () {
                        var a = this._url,
                            b = /^http:/i;
                        this.url && (this.url = this.url.replace(b, "https:"));
                        a && a.path && (a.path = a.path.replace(b, "https:"))
                    },
                    refresh: function () {},
                    show: function () {
                        this.setVisibility(!0)
                    },
                    hide: function () {
                        this.setVisibility(!1)
                    },
                    setMinScale: function (a) {
                        this.setScaleRange(a)
                    },
                    setMaxScale: function (a) {
                        this.setScaleRange(null, a)
                    },
                    setScaleRange: function (a, b) {
                        var d = c.isDefined(a),
                            e = c.isDefined(b);
                        this.loaded || (this._hasMin = this._hasMin || d, this._hasMax = this._hasMax || e);
                        var m = this.minScale,
                            n = this.maxScale;
                        this.minScale = (d ?
                            a : this.minScale) || 0;
                        this.maxScale = (e ? b : this.maxScale) || 0;
                        if (m !== this.minScale || n !== this.maxScale) this.onScaleRangeChange(), this._processMapScale()
                    },
                    suspend: function () {
                        this._suspended = !0;
                        this.evaluateSuspension()
                    },
                    resume: function () {
                        this._suspended = !1;
                        this.evaluateSuspension()
                    },
                    canResume: function () {
                        return this.loaded && this._map && this._map.loaded && this.visible && this.visibleAtMapScale && !this._suspended
                    },
                    evaluateSuspension: function () {
                        this.canResume() ? this.suspended && this._resume() : this.suspended || this._suspend()
                    },
                    _suspend: function () {
                        this.suspended = !0;
                        this.attr("data-suspended", "");
                        this._toggleRT();
                        this.onSuspend();
                        if (this._map) this._map.onLayerSuspend(this)
                    },
                    _resume: function () {
                        this.suspended = !1;
                        this.attr("data-suspended");
                        var a = void 0 === this._resumedOnce,
                            b = this.className,
                            c = this._attrs,
                            d = this.getNode(),
                            e;
                        if (a) {
                            this._resumedOnce = !0;
                            if (b && d) {
                                var m = d.getAttribute("class") || "";
                                RegExp("(^|\\s)" + b + "(\\s|$)", "i").test(m) || d.setAttribute("class", m + ((m ? " " : "") + b))
                            }
                            if (c && d)
                                for (e in c) c.hasOwnProperty(e) && d.setAttribute(e,
                                    c[e])
                        }
                        this._toggleRT(!0);
                        this.onResume({
                            firstOccurrence: a
                        });
                        if (this._map) this._map.onLayerResume(this)
                    },
                    _processMapScale: function () {
                        var a = this.visibleAtMapScale;
                        this.visibleAtMapScale = this._isMapAtVisibleScale();
                        a !== this.visibleAtMapScale && (this.onScaleVisibilityChange(), this.evaluateSuspension())
                    },
                    isVisibleAtScale: function (a) {
                        return a ? n.prototype._isMapAtVisibleScale.apply(this, arguments) : !1
                    },
                    _isMapAtVisibleScale: function (a, b) {
                        if (!a && (!this._map || !this._map.loaded)) return !1;
                        var c = this._map;
                        a = a ||
                            c.getScale();
                        var d = this.minScale,
                            e = this.maxScale,
                            m = !d,
                            n = !e,
                            g;
                        b && (g = c.width > c.height ? c.width : c.height);
                        m || (a <= d ? m = !0 : b && (m = Math.abs(d - a) / d < 1 / g));
                        n || (a >= e ? n = !0 : b && (n = Math.abs(e - a) / e < 1 / g));
                        return m && n
                    },
                    getAttributionData: function () {
                        var a = this.attributionDataUrl,
                            c = new q(d._dfdCanceller);
                        this.hasAttributionData && a ? (c._pendingDfd = b({
                            url: a,
                            content: {
                                f: "json"
                            },
                            handleAs: "json",
                            callbackParamName: "callback"
                        }), c._pendingDfd.then(function (a) {
                            c.callback(a)
                        }, function (a) {
                            c.errback(a)
                        })) : (a = Error("Layer does not have attribution data"),
                            a.log = p.isDebug, c.errback(a));
                        return c
                    },
                    getResourceInfo: function () {
                        var a = this.resourceInfo;
                        return g.isString(a) ? h.fromJson(a) : g.clone(a)
                    },
                    getMap: function () {
                        return this._map
                    },
                    getNode: function () {
                        return this._div
                    },
                    attr: function (a, b) {
                        var c = this.getNode();
                        if ("data-reference" === a && 11 > k("ie")) return this;
                        c && (null == b ? c.removeAttribute(a) : c.setAttribute(a, b));
                        this._attrs && (null == b ? delete this._attrs[a] : this._attrs[a] = b);
                        return this
                    },
                    setRefreshInterval: function (a) {
                        var b = this.refreshInterval;
                        this.refreshInterval =
                            a;
                        this._toggleRT();
                        a && !this.updating && !this.suspended && this._toggleRT(!0);
                        if (b !== a) this.onRefreshIntervalChange();
                        return this
                    },
                    _toggleRT: function (a) {
                        a && this.refreshInterval ? (clearTimeout(this._refreshT), this._refreshT = setTimeout(this.refresh, 6E4 * this.refreshInterval)) : this._refreshT && (clearTimeout(this._refreshT), this._refreshT = null)
                    },
                    setNormalization: function (a) {
                        this.normalization = a
                    },
                    setVisibility: function (a) {
                        this.visible !== a && (this.visible = a, this.onVisibilityChange(this.visible), this.evaluateSuspension());
                        this.attr("data-hidden", a ? null : "")
                    },
                    onLoad: function () {},
                    onVisibilityChange: function () {},
                    onScaleRangeChange: function () {},
                    onScaleVisibilityChange: function () {},
                    onSuspend: function () {},
                    onResume: function () {},
                    onUpdate: function () {},
                    onUpdateStart: function () {},
                    onUpdateEnd: function () {},
                    onRefreshIntervalChange: function () {},
                    onError: function () {}
                });
                k("extend-esri") && g.setObject("layers.Layer", n, e);
                return n
            })
        },
        "esri/request": function () {
            define("require dojo/_base/array dojo/_base/config dojo/_base/Deferred dojo/_base/lang dojo/_base/url dojo/_base/xhr dojo/io/script dojo/io/iframe dojo/dom-construct dojo/io-query ./kernel ./config ./sniff ./lang ./urlUtils ./deferredUtils".split(" "),
                function (r, p, a, g, q, h, k, l, e, c, b, d, m, t, s, n, f) {
                    function y(a) {
                        a = new h(a);
                        return (a.host + (a.port ? ":" + a.port : "")).toLowerCase()
                    }

                    function u(a) {
                        return this._xhr ? this._xhr.getResponseHeader(a) : null
                    }

                    function w(f, m, h, u) {
                        var w = !1,
                            y = !1,
                            r;
                        s.isDefined(m) && (q.isObject(m) ? (w = !!m.useProxy, y = !!m.usePost, r = m.crossOrigin) : w = !!m);
                        f = q.mixin({}, f);
                        f._ssl && (f.url = f.url.replace(/^http:/i, "https:"));
                        m = f.content;
                        var x = f.url,
                            v = h && f.form,
                            C = D;
                        r = s.isDefined(r) ? r : C.useCors;
                        f.load = function (b) {
                            var c;
                            b && (b.error ? (c = q.mixin(Error(), b.error),
                                c.log = a.isDebug) : "error" === b.status && (c = q.mixin(Error(), b), c.log = a.isDebug), c && !s.isDefined(c.httpCode) && (c.httpCode = c.code));
                            return c || b
                        };
                        f.error = function (b, c) {
                            c && c.xhr && c.xhr.abort();
                            b instanceof Error || (b = q.mixin(Error(), b));
                            b.log = a.isDebug;
                            C.errorHandler(b, c);
                            return b
                        };
                        f._token && (f.content = f.content || {}, f.content.token = f._token);
                        var z = 0,
                            A;
                        m && x && (A = b.objectToQuery(m), z = A.length + x.length + 1, t("esri-url-encodes-apostrophe") && (z = A.replace(/'/g, "%27").length + x.length + 1));
                        f.timeout = s.isDefined(f.timeout) ?
                            f.timeout : C.timeout;
                        f.handleAs = f.handleAs || "json";
                        try {
                            var F, ga, aa = r && n.canUseXhr(f.url) && !/https?:\/\/[^\/]+\/[^\/]+\/admin\/?(\/.*)?$/i.test(f.url),
                                ea = n.hasSameOrigin(f.url, window.location.href) || aa,
                                ua = y || h || z > C.postLength ? !0 : !1,
                                xa = !ea && -1 !== f.handleAs.indexOf("json") && f.callbackParamName && !h ? !0 : !1,
                                ha = n.getProxyRule(f.url) || C.alwaysUseProxy || w || (!xa || ua) && !ea ? !0 : !1;
                            h && (!t("esri-file-upload") && !ha && aa) && (ha = !0);
                            if (ha)
                                if (F = n.getProxyUrl(x, r), ga = F.path, F._xo && (aa = !0), !ua && ga.length + 1 + z > C.postLength &&
                                    (ua = !0), f.url = ga + "?" + x, ua) f.content = q.mixin(F.query || {}, m);
                                else {
                                    var pa = b.objectToQuery(q.mixin(F.query || {}, m));
                                    pa && (f.url += "?" + pa);
                                    f.content = null
                                }
                            if (xa && !ua) return !s.isDefined(f.isAsync) && 4 > t("ff") && (f.isAsync = !0), l.get(H ? H(f) : f);
                            var oa = f.headers;
                            if (aa && (!oa || !oa.hasOwnProperty("X-Requested-With"))) oa = f.headers = oa || {}, oa["X-Requested-With"] = null;
                            if (h) {
                                var na = f.callbackParamName || "callback.html",
                                    ia = f.callbackElementName || "textarea",
                                    ma, ya, va, Ba, Ja = v.elements ? v.elements.length : 0,
                                    qa;
                                if (m = f.content)
                                    for (ma in m)
                                        if (va =
                                            m[ma], s.isDefined(va)) {
                                            ya = null;
                                            for (Ba = 0; Ba < Ja; Ba++)
                                                if (qa = v.elements[Ba], qa.name === ma) {
                                                    ya = qa;
                                                    break
                                                }
                                            ya ? ya.value = va : u ? v.append(ma, va) : v.appendChild(c.create("input", {
                                                type: "hidden",
                                                name: ma,
                                                value: va
                                            }))
                                        }
                                if (t("esri-file-upload")) p.forEach(v.elements, function (a) {
                                    a.name === na && v.removeChild(a)
                                }), f.contentType = !1, f.postData = u ? v : new FormData(v), delete f.form;
                                else {
                                    v.enctype = "multipart/form-data";
                                    9 > t("ie") && (v.encoding = "multipart/form-data");
                                    v.method = "post";
                                    p.some(v.elements, function (a) {
                                        return a.name === na
                                    }) || v.appendChild(c.create("input", {
                                        type: "hidden",
                                        name: na,
                                        value: ia
                                    }));
                                    if (-1 !== x.toLowerCase().indexOf("addattachment") || -1 !== x.toLowerCase().indexOf("updateattachment")) f.url = x + (-1 === x.indexOf("?") ? "?" : "\x26") + na + "\x3d" + ia, ha && (f.url = ga + "?" + f.url);
                                    delete f.content
                                }
                            }
                            if (aa && !f.hasOwnProperty("withCredentials") && "with-credentials" === D.useCors) {
                                u = ha ? ga : x;
                                var wa = n.canUseXhr(u, !0),
                                    ja = -1 < wa ? D.corsEnabledServers[wa] : null;
                                if (ja && ja.hasOwnProperty("withCredentials")) ja.withCredentials && (f.withCredentials = !0);
                                else if (d.id) {
                                    var Ca = d.id.findServerInfo(u);
                                    Ca && Ca.webTierAuth && (f.withCredentials = !0)
                                }
                            }
                            f = H ? H(f) : f;
                            if (ua) {
                                if (h && !t("esri-file-upload")) return e.send(f);
                                !ha && t("safari") && (f.url += (-1 === f.url.indexOf("?") ? "?" : "\x26") + "_ts\x3d" + (new Date).getTime() + E++);
                                return k.post(f)
                            }
                            return k.get(f)
                        } catch (Ma) {
                            return h = new g, h.errback(f.error(Ma)), h
                        }
                    }

                    function C(a) {
                        var b = D.corsStatus,
                            c = n.canUseXhr(a, !0); - 1 < c && D.corsEnabledServers.splice(c, 1);
                        b[y(a)] = 1;
                        return c
                    }

                    function x(a) {
                        var b = D.corsStatus;
                        if (D.corsDetection && D.useCors) try {
                            var c = y(a);
                            t("esri-cors") && (a && -1 !==
                                a.toLowerCase().indexOf("/rest/services") && !n.hasSameOrigin(a, window.location.href) && !n.canUseXhr(a) && !b[c]) && (b[c] = -1, k.get({
                                url: a.substring(0, a.toLowerCase().indexOf("/rest/") + 6) + "info",
                                content: {
                                    f: "json"
                                },
                                failOk: !0,
                                handleAs: "json",
                                headers: {
                                    "X-Requested-With": null
                                }
                            }).then(function (f) {
                                f ? (b[c] = 2, n.canUseXhr(a) || D.corsEnabledServers.push(c)) : b[c] = 1
                            }, function (a) {
                                b[c] = 1
                            }))
                        } catch (f) {
                            console.log("esri._detectCors: an unknown error occurred while detecting CORS support")
                        }
                    }

                    function v(a) {
                        H = a
                    }

                    function A(b,
                        c) {
                        function e(f) {
                            f._pendingDfd = w(b, c, N, H);
                            if (!f._pendingDfd) {
                                f.ioArgs = f._pendingDfd && f._pendingDfd.ioArgs;
                                var m = Error("Deferred object is missing");
                                m.log = a.isDebug;
                                b._usrDfd = null;
                                f.errback(m);
                                f._pendingDfd = null;
                                return f
                            }
                            f._pendingDfd.addCallback(function (a) {
                                f.ioArgs = f._pendingDfd && f._pendingDfd.ioArgs;
                                b._usrDfd = null;
                                c.returnFullResponse && (a = {
                                    data: a,
                                    _xhr: f.ioArgs && f.ioArgs.xhr,
                                    getHeader: u
                                });
                                f.callback(a);
                                f._pendingDfd = null
                            }).addErrback(function (a) {
                                var e, m, n;
                                a && (e = a.code, m = a.subcode, n = (n = a.messageCode) &&
                                    n.toUpperCase());
                                if (a && 403 == e && (4 == m || a.message && -1 < a.message.toLowerCase().indexOf("ssl") && -1 === a.message.toLowerCase().indexOf("permission"))) {
                                    if (!b._ssl) {
                                        b._ssl = b._sslFromServer = !0;
                                        b._usrDfd = f;
                                        A(b, c);
                                        return
                                    }
                                } else if (a && 415 == a.status) {
                                    if (C(b.url), !b._err415) {
                                        b._err415 = 1;
                                        b._usrDfd = f;
                                        A(b, c);
                                        return
                                    }
                                } else if (d.id && -1 !== p.indexOf(d.id._errorCodes, e) && !d.id._isPublic(b.url) && !l && (403 != e || -1 === p.indexOf(F, n) && (!s.isDefined(m) || 2 == m && b._token))) {
                                    f._pendingDfd = d.id.getCredential(b.url, {
                                        token: b._token,
                                        error: a
                                    });
                                    f._pendingDfd.addCallback(function (a) {
                                        b._token = a.token;
                                        b._usrDfd = f;
                                        b._credential = a;
                                        b._ssl = b._sslFromServer || a.ssl;
                                        A(b, c)
                                    }).addErrback(function (a) {
                                        b._usrDfd = null;
                                        f.errback(a);
                                        f._pendingDfd = null
                                    });
                                    return
                                }
                                f.ioArgs = f._pendingDfd && f._pendingDfd.ioArgs;
                                b._usrDfd = null;
                                f.errback(a);
                                f._pendingDfd = null
                            })
                        }
                        b.url = n.fixUrl(b.url);
                        c = c || {};
                        var m, h = b.form,
                            l = c.disableIdentityLookup,
                            q = c._preLookup,
                            v = !1;
                        if (t("esri-workers") && !1 !== D.useWorkers)
                            if (!0 === c.useWorkers || !0 === D.useWorkers) v = !0;
                            else if (c.workerOptions) {
                            var E =
                                c.workerOptions;
                            if (E.callback || E.worker && E.worker.worker instanceof Worker) v = !0
                        }
                        var H = h && t("esri-file-upload") && h instanceof FormData,
                            N = h && (h.elements ? p.some(h.elements, function (a) {
                                return "file" === a.type
                            }) : H),
                            Y = -1 !== b.url.toLowerCase().indexOf("token\x3d") || b.content && b.content.token || N && p.some(h.elements, function (a) {
                                return "token" === a.name
                            }) ? 1 : 0;
                        x(b.url);
                        if (b._usrDfd) m = b._usrDfd;
                        else {
                            m = new g(f._dfdCanceller);
                            m.addCallback(function (a) {
                                if ((/\/sharing\/rest\/accounts\/self/i.test(b.url) || /\/sharing\/rest\/portals\/self/i.test(b.url)) &&
                                    !Y && !b._token && a.user && a.user.username) {
                                    D.webTierAuthServers.push(y(b.url));
                                    a = D.corsEnabledServers;
                                    var c = n.canUseXhr(b.url, !0),
                                        f = {
                                            host: y(b.url),
                                            withCredentials: !0
                                        };
                                    if (-1 === c) a.push(f);
                                    else {
                                        var e = a[c];
                                        "object" === typeof e ? e.withCredentials = !0 : a.splice(c, 1, f)
                                    }
                                }
                                if (a = b._credential)
                                    if (c = (c = d.id.findServerInfo(a.server)) && c.owningSystemUrl) c = c.replace(/\/?$/, "/sharing"), (a = d.id.findCredential(c, a.userId)) && -1 === d.id._getIdenticalSvcIdx(c, a) && a.resources.splice(0, 0, c)
                            });
                            m.addBoth(function (a) {
                                delete b._credential;
                                if (a && (!t("ie") || !a.nodeType)) a._ssl = b._ssl
                            });
                            var Z = b.load,
                                ga = b.error;
                            Z && m.addCallback(function (a) {
                                var b = m._pendingDfd,
                                    b = b && b.ioArgs;
                                return Z.call(b && b.args, a, b)
                            });
                            ga && m.addErrback(function (a) {
                                var b = m._pendingDfd,
                                    b = b && b.ioArgs;
                                return ga.call(b && b.args, a, b)
                            })
                        }
                        if (d.id && !Y && !b._token && !d.id._isPublic(b.url) && (!l || q))
                            if (h = d.id.findCredential(b.url)) b._token = h.token, b._ssl = h.ssl;
                        v ? c.workerOptions && c.workerOptions.worker ? (z || (z = k), k = c.workerOptions.worker, e(m)) : r(["./workers/RequestClient"], function (a) {
                            z ||
                                (z = k);
                            if (c.workerOptions) {
                                var b = c.workerOptions;
                                k = a.getClient(b.callback, b.cbFunction)
                            } else k = a.getClient();
                            e(m)
                        }) : (z && (k = z, z = null), e(m));
                        return m
                    }
                    var z = null,
                        H, D = m.defaults.io,
                        F = ["COM_0056", "COM_0057"],
                        E = 0;
                    A._request = w;
                    A._disableCors = C;
                    A._detectCors = x;
                    A.setRequestPreCallback = v;
                    t("extend-esri") && (d.request = A, d._request = w, d._disableCors = C, d._detectCors = x, d.setRequestPreCallback = v);
                    return A
                })
        },
        "dojo/io/script": function () {
            define("../_base/connect ../_base/kernel ../_base/lang ../sniff ../_base/window ../_base/xhr ../dom ../dom-construct ../request/script ../aspect".split(" "),
                function (r, p, a, g, q, h, k, l, e, c) {
                    p.deprecated("dojo/io/script", "Use dojo/request/script.", "2.0");
                    var b = {
                        get: function (a) {
                            var m, g = this._makeScriptDeferred(a, function (a) {
                                    m && m.cancel()
                                }),
                                s = g.ioArgs;
                            h._ioAddQueryToUrl(s);
                            h._ioNotifyStart(g);
                            m = e.get(s.url, {
                                timeout: a.timeout,
                                jsonp: s.jsonp,
                                checkString: a.checkString,
                                ioArgs: s,
                                frameDoc: a.frameDoc,
                                canAttach: function (a) {
                                    s.requestId = a.id;
                                    s.scriptId = a.scriptId;
                                    s.canDelete = a.canDelete;
                                    return b._canAttach(s)
                                }
                            }, !0);
                            c.around(m, "isValid", function (a) {
                                return function (c) {
                                    b._validCheck(g);
                                    return a.call(this, c)
                                }
                            });
                            m.then(function () {
                                g.resolve(g)
                            }).otherwise(function (a) {
                                g.ioArgs.error = a;
                                g.reject(a)
                            });
                            return g
                        },
                        attach: e._attach,
                        remove: e._remove,
                        _makeScriptDeferred: function (a, c) {
                            var g = h._ioSetArgs(a, c || this._deferredCancel, this._deferredOk, this._deferredError),
                                s = g.ioArgs;
                            s.id = p._scopeName + "IoScript" + (a.callbackSuffix || this._counter++);
                            s.canDelete = !1;
                            s.jsonp = a.callbackParamName || a.jsonp;
                            s.jsonp && (s.query = s.query || "", 0 < s.query.length && (s.query += "\x26"), s.query += s.jsonp + "\x3d" + (a.frameDoc ?
                                "parent." : "") + p._scopeName + ".io.script.jsonp_" + s.id + "._jsonpCallback", s.frameDoc = a.frameDoc, s.canDelete = !0, g._jsonpCallback = this._jsonpCallback, this["jsonp_" + s.id] = g);
                            g.addBoth(function (a) {
                                s.canDelete && (a instanceof Error ? b["jsonp_" + s.id]._jsonpCallback = function () {
                                    delete b["jsonp_" + s.id];
                                    if (s.requestId) p.global[e._callbacksProperty][s.requestId]()
                                } : b._addDeadScript(s))
                            });
                            return g
                        },
                        _deferredCancel: function (a) {
                            a.canceled = !0
                        },
                        _deferredOk: function (a) {
                            a = a.ioArgs;
                            return a.json || a.scriptLoaded || a
                        },
                        _deferredError: function (a,
                            b) {
                            console.log("dojo.io.script error", a);
                            return a
                        },
                        _deadScripts: [],
                        _counter: 1,
                        _addDeadScript: function (a) {
                            b._deadScripts.push({
                                id: a.id,
                                frameDoc: a.frameDoc
                            });
                            a.frameDoc = null
                        },
                        _validCheck: function (a) {
                            if ((a = b._deadScripts) && 0 < a.length) {
                                for (var c = 0; c < a.length; c++) b.remove(a[c].id, a[c].frameDoc), delete b["jsonp_" + a[c].id], a[c].frameDoc = null;
                                b._deadScripts = []
                            }
                            return !0
                        },
                        _ioCheck: function (a) {
                            a = a.ioArgs;
                            return a.json || a.scriptLoaded && !a.args.checkString ? !0 : (a = a.args.checkString) && eval("typeof(" + a + ") !\x3d 'undefined'")
                        },
                        _resHandle: function (a) {
                            b._ioCheck(a) ? a.callback(a) : a.errback(Error("inconceivable dojo.io.script._resHandle error"))
                        },
                        _canAttach: function () {
                            return !0
                        },
                        _jsonpCallback: function (a) {
                            this.ioArgs.json = a;
                            if (this.ioArgs.requestId) p.global[e._callbacksProperty][this.ioArgs.requestId](a)
                        }
                    };
                    a.setObject("dojo.io.script", b);
                    return b
                })
        },
        "dojo/request/script": function () {
            define("module ./watch ./util ../_base/kernel ../_base/array ../_base/lang ../on ../dom ../dom-construct ../has ../_base/window".split(" "), function (r,
                p, a, g, q, h, k, l, e, c, b) {
                function d(a, b) {
                    a.canDelete && f._remove(a.id, b.options.frameDoc, !0)
                }

                function m(a) {
                    v && v.length && (q.forEach(v, function (a) {
                        f._remove(a.id, a.frameDoc);
                        a.frameDoc = null
                    }), v = []);
                    return a.options.jsonp ? !a.data : !0
                }

                function t(a) {
                    return !!this.scriptLoaded
                }

                function s(a) {
                    return (a = a.options.checkString) && eval("typeof(" + a + ') !\x3d\x3d "undefined"')
                }

                function n(a, b) {
                    if (this.canDelete) {
                        var c = this.response.options;
                        v.push({
                            id: this.id,
                            frameDoc: c.ioArgs ? c.ioArgs.frameDoc : c.frameDoc
                        });
                        c.ioArgs && (c.ioArgs.frameDoc =
                            null);
                        c.frameDoc = null
                    }
                    b ? this.reject(b) : this.resolve(a)
                }

                function f(b, c, e) {
                    var g = a.parseArgs(b, a.deepCopy({}, c));
                    b = g.url;
                    c = g.options;
                    var l = a.deferred(g, d, m, c.jsonp ? null : c.checkString ? s : t, n);
                    h.mixin(l, {
                        id: y + u++,
                        canDelete: !1
                    });
                    c.jsonp && (RegExp("[?\x26]" + c.jsonp + "\x3d").test(b) || (b += (~b.indexOf("?") ? "\x26" : "?") + c.jsonp + "\x3d" + (c.frameDoc ? "parent." : "") + y + "_callbacks." + l.id), l.canDelete = !0, x[l.id] = function (a) {
                        g.data = a;
                        l.handleResponse(g)
                    });
                    a.notify && a.notify.emit("send", g, l.promise.cancel);
                    if (!c.canAttach ||
                        c.canAttach(l)) {
                        var q = f._attach(l.id, b, c.frameDoc);
                        if (!c.jsonp && !c.checkString) var r = k(q, w, function (a) {
                            if ("load" === a.type || C.test(q.readyState)) r.remove(), l.scriptLoaded = a
                        })
                    }
                    k.once(q, "error", function (a) {
                        l.reject(a);
                        f._remove(l.id, c.frameDoc, !0)
                    });
                    p(l);
                    return e ? l : l.promise
                }
                c.add("script-readystatechange", function (a, b) {
                    return "undefined" !== typeof b.createElement("script").onreadystatechange && ("undefined" === typeof a.opera || "[object Opera]" !== a.opera.toString())
                });
                var y = r.id.replace(/[\/\.\-]/g, "_"),
                    u =
                    0,
                    w = c("script-readystatechange") ? "readystatechange" : "load",
                    C = /complete|loaded/,
                    x = g.global[y + "_callbacks"] = {},
                    v = [];
                f.get = f;
                f._attach = function (a, c, f) {
                    f = f || b.doc;
                    var d = f.createElement("script");
                    d.type = "text/javascript";
                    d.src = c;
                    d.id = a;
                    d.async = !0;
                    d.charset = "utf-8";
                    return f.getElementsByTagName("head")[0].appendChild(d)
                };
                f._remove = function (a, b, c) {
                    e.destroy(l.byId(a, b));
                    x[a] && (c ? x[a] = function () {
                        delete x[a]
                    } : delete x[a])
                };
                f._callbacksProperty = y + "_callbacks";
                return f
            })
        },
        "dojo/io/iframe": function () {
            define("../_base/config ../_base/json ../_base/kernel ../_base/lang ../_base/xhr ../sniff ../_base/window ../dom ../dom-construct ../query require ../aspect ../request/iframe".split(" "),
                function (r, p, a, g, q, h, k, l, e, c, b, d, m) {
                    a.deprecated("dojo/io/iframe", "Use dojo/request/iframe.", "2.0");
                    h = m._iframeName;
                    h = h.substring(0, h.lastIndexOf("_"));
                    var t = g.delegate(m, {
                        create: function () {
                            return t._frame = m.create.apply(m, arguments)
                        },
                        get: null,
                        post: null,
                        send: function (b) {
                            var c, f = q._ioSetArgs(b, function (a) {
                                    c && c.cancel()
                                }, function (b) {
                                    var f = null;
                                    b = b.ioArgs;
                                    try {
                                        var d = b.handleAs;
                                        "xml" === d || "html" === d ? f = c.response.data : (f = c.response.text, "json" === d ? f = p.fromJson(f) : "javascript" === d && (f = a.eval(f)))
                                    } catch (e) {
                                        f =
                                            e
                                    }
                                    return f
                                }, function (a, b) {
                                    b.ioArgs._hasError = !0;
                                    return a
                                }),
                                e = f.ioArgs,
                                g = "GET",
                                h = l.byId(b.form);
                            b.method && ("POST" === b.method.toUpperCase() && h) && (g = "POST");
                            b = {
                                method: g,
                                handleAs: "json" === b.handleAs || "javascript" === b.handleAs ? "text" : b.handleAs,
                                form: b.form,
                                query: h ? null : b.content,
                                data: h ? b.content : null,
                                timeout: b.timeout,
                                ioArgs: e
                            };
                            b.method && (b.method = b.method.toUpperCase());
                            if (r.ioPublish && a.publish && !1 !== e.args.ioPublish) var k = d.after(m, "_notifyStart", function (a) {
                                a.options.ioArgs === e && (k.remove(), q._ioNotifyStart(f))
                            }, !0);
                            c = m(e.url, b, !0);
                            e._callNext = c._callNext;
                            c.then(function () {
                                f.resolve(f)
                            }).otherwise(function (a) {
                                f.ioArgs.error = a;
                                f.reject(a)
                            });
                            return f
                        },
                        _iframeOnload: k.global[h + "_onload"]
                    });
                    g.setObject("dojo.io.iframe", t);
                    return t
                })
        },
        "dojo/request/iframe": function () {
            define("module require ./watch ./util ./handlers ../_base/lang ../io-query ../query ../has ../dom ../dom-construct ../_base/window ../NodeList-dom".split(" "), function (r, p, a, g, q, h, k, l, e, c, b, d) {
                function m(a) {
                    return !this.isFulfilled()
                }

                function t(a) {
                    return !!this._finished
                }

                function s(a, b) {
                    if (!b) try {
                        var c = a.options,
                            d = f.doc(f._frame),
                            e = c.handleAs;
                        if ("html" !== e) {
                            if ("xml" === e)
                                if ("html" === d.documentElement.tagName.toLowerCase()) {
                                    l("a", d.documentElement).orphan();
                                    var m = d.documentElement.innerText || d.documentElement.textContent,
                                        m = m.replace(/>\s+</g, "\x3e\x3c");
                                    a.text = h.trim(m)
                                } else a.data = d;
                            else a.text = d.getElementsByTagName("textarea")[0].value;
                            q(a)
                        } else a.data = d
                    } catch (g) {
                        b = g
                    }
                    b ? this.reject(b) : this._finished ? this.resolve(a) : this.reject(Error("Invalid dojo/request/iframe request state"))
                }

                function n(a) {
                    this._callNext()
                }

                function f(b, c, d) {
                    var e = g.parseArgs(b, g.deepCreate(w, c), !0);
                    b = e.url;
                    c = e.options;
                    if ("GET" !== c.method && "POST" !== c.method) throw Error(c.method + " not supported by dojo/request/iframe");
                    f._frame || (f._frame = f.create(f._iframeName, u + "();"));
                    b = g.deferred(e, null, m, t, s, n);
                    b._callNext = function () {
                        this._calledNext || (this._calledNext = !0, f._currentDfd = null, f._fireNextRequest())
                    };
                    b._legacy = d;
                    f._dfdQueue.push(b);
                    f._fireNextRequest();
                    a(b);
                    return d ? b : b.promise
                }
                var y = r.id.replace(/[\/\.\-]/g,
                        "_"),
                    u = y + "_onload";
                d.global[u] || (d.global[u] = function () {
                    var a = f._currentDfd;
                    if (a) {
                        var d = c.byId(a.response.options.form) || a._tmpForm;
                        if (d) {
                            for (var e = a._contentToClean, m = 0; m < e.length; m++)
                                for (var g = e[m], n = 0; n < d.childNodes.length; n++) {
                                    var s = d.childNodes[n];
                                    if (s.name === g) {
                                        b.destroy(s);
                                        break
                                    }
                                }
                            a._originalAction && d.setAttribute("action", a._originalAction);
                            a._originalMethod && (d.setAttribute("method", a._originalMethod), d.method = a._originalMethod);
                            a._originalTarget && (d.setAttribute("target", a._originalTarget),
                                d.target = a._originalTarget)
                        }
                        a._tmpForm && (b.destroy(a._tmpForm), delete a._tmpForm);
                        a._finished = !0
                    } else f._fireNextRequest()
                });
                var w = {
                    method: "POST"
                };
                f.create = function (a, c, f) {
                    if (d.global[a]) return d.global[a];
                    if (d.global.frames[a]) return d.global.frames[a];
                    f || (e("config-useXDomain") && !e("config-dojoBlankHtmlUrl") && console.warn("dojo/request/iframe: When using cross-domain Dojo builds, please save dojo/resources/blank.html to your domain and set dojoConfig.dojoBlankHtmlUrl to the path on your domain to blank.html"),
                        f = e("config-dojoBlankHtmlUrl") || p.toUrl("dojo/resources/blank.html"));
                    c = b.place('\x3ciframe id\x3d"' + a + '" name\x3d"' + a + '" src\x3d"' + f + '" onload\x3d"' + c + '" style\x3d"position: absolute; left: 1px; top: 1px; height: 1px; width: 1px; visibility: hidden"\x3e', d.body());
                    return d.global[a] = c
                };
                f.doc = function (a) {
                    if (a.contentDocument) return a.contentDocument;
                    var b = a.name;
                    if (b) {
                        var c = d.doc.getElementsByTagName("iframe");
                        if (a.document && c[b].contentWindow && c[b].contentWindow.document) return c[b].contentWindow.document;
                        if (d.doc.frames[b] && d.doc.frames[b].document) return d.doc.frames[b].document
                    }
                    return null
                };
                f.setSrc = function (a, b, c) {
                    a = d.global.frames[a.name];
                    a.contentWindow && (a = a.contentWindow);
                    try {
                        c ? a.location.replace(b) : a.location = b
                    } catch (f) {
                        console.log("dojo/request/iframe.setSrc: ", f)
                    }
                };
                f._iframeName = y + "_IoIframe";
                f._notifyStart = function () {};
                f._dfdQueue = [];
                f._currentDfd = null;
                f._fireNextRequest = function () {
                    var a;
                    try {
                        if (!f._currentDfd && f._dfdQueue.length) {
                            do a = f._currentDfd = f._dfdQueue.shift(); while (a && (a.canceled ||
                                    a.isCanceled && a.isCanceled()) && f._dfdQueue.length);
                            if (!a || a.canceled || a.isCanceled && a.isCanceled()) f._currentDfd = null;
                            else {
                                var e = a.response,
                                    m = e.options,
                                    n = a._contentToClean = [],
                                    s = c.byId(m.form),
                                    t = g.notify,
                                    l = m.data || null,
                                    u;
                                !a._legacy && "POST" === m.method && !s ? s = a._tmpForm = b.create("form", {
                                    name: y + "_form",
                                    style: {
                                        position: "absolute",
                                        top: "-1000px",
                                        left: "-1000px"
                                    }
                                }, d.body()) : "GET" === m.method && (s && -1 < e.url.indexOf("?")) && (u = e.url.slice(e.url.indexOf("?") + 1), l = h.mixin(k.queryToObject(u), l));
                                if (s) {
                                    if (!a._legacy) {
                                        var p =
                                            s;
                                        do p = p.parentNode; while (p && p !== d.doc.documentElement);
                                        p || (s.style.position = "absolute", s.style.left = "-1000px", s.style.top = "-1000px", d.body().appendChild(s));
                                        s.name || (s.name = y + "_form")
                                    }
                                    if (l) {
                                        var p = function (a, c) {
                                                b.create("input", {
                                                    type: "hidden",
                                                    name: a,
                                                    value: c
                                                }, s);
                                                n.push(a)
                                            },
                                            q;
                                        for (q in l) {
                                            var w = l[q];
                                            if (h.isArray(w) && 1 < w.length)
                                                for (u = 0; u < w.length; u++) p(q, w[u]);
                                            else s[q] ? s[q].value = w : p(q, w)
                                        }
                                    }
                                    var r = s.getAttributeNode("action"),
                                        I = s.getAttributeNode("method"),
                                        P = s.getAttributeNode("target");
                                    e.url && (a._originalAction =
                                        r ? r.value : null, r ? r.value = e.url : s.setAttribute("action", e.url));
                                    if (a._legacy) {
                                        if (!I || !I.value) I ? I.value = m.method : s.setAttribute("method", m.method)
                                    } else a._originalMethod = I ? I.value : null, I ? I.value = m.method : s.setAttribute("method", m.method);
                                    a._originalTarget = P ? P.value : null;
                                    P ? P.value = f._iframeName : s.setAttribute("target", f._iframeName);
                                    s.target = f._iframeName;
                                    t && t.emit("send", e, a.promise.cancel);
                                    f._notifyStart(e);
                                    s.submit()
                                } else m = "", e.options.data && (m = e.options.data, "string" !== typeof m && (m = k.objectToQuery(m))),
                                    p = e.url + (-1 < e.url.indexOf("?") ? "\x26" : "?") + m, t && t.emit("send", e, a.promise.cancel), f._notifyStart(e), f.setSrc(f._frame, p, !0)
                            }
                        }
                    } catch (K) {
                        a.reject(K)
                    }
                };
                g.addCommonMethods(f, ["GET", "POST"]);
                return f
            })
        },
        "esri/Color": function () {
            define(["dojo/_base/declare", "dojo/_base/Color", "dojo/has", "./kernel"], function (r, p, a, g) {
                r = r([p], {
                    declaredClass: "esri.Color"
                });
                r.toJsonColor = function (a) {
                    return a && [a.r, a.g, a.b, 1 < a.a ? a.a : Math.round(255 * a.a)]
                };
                r.toDojoColor = function (a) {
                    return a && new p([a[0], a[1], a[2], a[3] / 255])
                };
                var q,
                    h = "named blendColors fromRgb fromHex fromArray fromString".split(" ");
                for (q = 0; q < h.length; q++) r[h[q]] = p[h[q]];
                a("extend-esri") && (g.Color = r);
                return r
            })
        },
        "esri/domUtils": function () {
            define(["./kernel", "dojo/_base/connect", "dojo/_base/lang", "dojo/dom-style", "dojo/has"], function (r, p, a, g, q) {
                var h = {
                    show: function (a) {
                        if (a = h.getNode(a)) a.style.display = "block"
                    },
                    getNode: function (a) {
                        return a && a.domNode || a
                    },
                    hide: function (a) {
                        if (a = h.getNode(a)) a.style.display = "none"
                    },
                    toggle: function (a) {
                        if (a = h.getNode(a)) a.style.display =
                            "none" === a.style.display ? "block" : "none"
                    },
                    documentBox: 8 >= q("ie") ? {
                        w: document.documentElement.clientWidth,
                        h: document.documentElement.clientHeight
                    } : {
                        w: window.innerWidth,
                        h: window.innerHeight
                    },
                    setScrollable: function (a) {
                        if (a = this.getNode(a)) {
                            var h = 0,
                                e = 0,
                                c = 0,
                                b = 0,
                                d = 0,
                                m = 0;
                            return [p.connect(a, "ontouchstart", function (g) {
                                h = g.touches[0].screenX;
                                e = g.touches[0].screenY;
                                c = a.scrollWidth;
                                b = a.scrollHeight;
                                d = a.clientWidth;
                                m = a.clientHeight
                            }), p.connect(a, "ontouchmove", function (t) {
                                t.preventDefault();
                                var s = a.firstChild;
                                s instanceof
                                Text && (s = a.childNodes[1]);
                                var n = s._currentX || 0,
                                    f = s._currentY || 0,
                                    n = n + (t.touches[0].screenX - h);
                                0 < n ? n = 0 : 0 > n && Math.abs(n) + d > c && (n = -1 * (c - d));
                                s._currentX = n;
                                f += t.touches[0].screenY - e;
                                0 < f ? f = 0 : 0 > f && Math.abs(f) + m > b && (f = -1 * (b - m));
                                s._currentY = f;
                                g.set(s, {
                                    "-webkit-transition-property": "-webkit-transform",
                                    "-webkit-transform": "translate(" + n + "px, " + f + "px)"
                                });
                                h = t.touches[0].screenX;
                                e = t.touches[0].screenY
                            })]
                        }
                    }
                };
                q("extend-esri") && a.mixin(r, h);
                return h
            })
        },
        "esri/symbols/MarkerSymbol": function () {
            define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ./Symbol".split(" "),
                function (r, p, a, g, q, h) {
                    r = r(h, {
                        declaredClass: "esri.symbol.MarkerSymbol",
                        angle: 0,
                        xoffset: 0,
                        yoffset: 0,
                        size: 12,
                        constructor: function (a) {
                            a && p.isObject(a) && (this.size = "auto" === this.size ? this.size : g.pt2px(this.size), this.xoffset = g.pt2px(this.xoffset), this.yoffset = g.pt2px(this.yoffset), this.angle && (this.angle *= -1))
                        },
                        setAngle: function (a) {
                            this.angle = a;
                            return this
                        },
                        setSize: function (a) {
                            this.size = a;
                            return this
                        },
                        setOffset: function (a, g) {
                            this.xoffset = a;
                            this.yoffset = g;
                            return this
                        },
                        toJson: function () {
                            var a = g.px2pt(this.size),
                                a = isNaN(a) ? void 0 : a,
                                h = g.px2pt(this.xoffset),
                                h = isNaN(h) ? void 0 : h,
                                e = g.px2pt(this.yoffset),
                                e = isNaN(e) ? void 0 : e;
                            return p.mixin(this.inherited("toJson", arguments), {
                                size: "auto" === this.size ? this.size : a,
                                angle: this.angle && -1 * this.angle,
                                xoffset: h,
                                yoffset: e
                            })
                        }
                    });
                    a("extend-esri") && p.setObject("symbol.MarkerSymbol", r, q);
                    return r
                })
        },
        "esri/symbols/Symbol": function () {
            define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../Color".split(" "), function (r, p, a, g, q, h) {
                r = r(null, {
                    declaredClass: "esri.symbol.Symbol",
                    color: new h([0, 0, 0, 1]),
                    type: null,
                    constructor: function (a) {
                        if (a && p.isObject(a) && (p.mixin(this, a), this.color && q.isDefined(this.color[0]) && (this.color = h.toDojoColor(this.color)), (a = this.type) && 0 === a.indexOf("esri"))) this.type = {
                            esriSMS: "simplemarkersymbol",
                            esriPMS: "picturemarkersymbol",
                            esriSLS: "simplelinesymbol",
                            esriCLS: "cartographiclinesymbol",
                            esriSFS: "simplefillsymbol",
                            esriPFS: "picturefillsymbol",
                            esriTS: "textsymbol",
                            esriSHD: "shieldlabelsymbol"
                        }[a]
                    },
                    setColor: function (a) {
                        this.color = a;
                        return this
                    },
                    toJson: function () {
                        return {
                            color: h.toJsonColor(this.color)
                        }
                    }
                });
                a("extend-esri") && p.setObject("symbol.Symbol", r, g);
                return r
            })
        },
        "esri/symbols/SimpleMarkerSymbol": function () {
            define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./MarkerSymbol ./SimpleLineSymbol".split(" "), function (r, p, a, g, q, h, k, l, e) {
                var c = {
                        STYLE_CIRCLE: "circle",
                        STYLE_SQUARE: "square",
                        STYLE_CROSS: "cross",
                        STYLE_X: "x",
                        STYLE_DIAMOND: "diamond",
                        STYLE_PATH: "path",
                        STYLE_TARGET: "target"
                    },
                    b = {
                        style: c.STYLE_CIRCLE,
                        color: [255, 255, 255, 0.25],
                        size: 12,
                        angle: 0,
                        xoffset: 0,
                        yoffset: 0
                    };
                r = r(l, {
                    declaredClass: "esri.symbol.SimpleMarkerSymbol",
                    type: "simplemarkersymbol",
                    _styles: {
                        circle: "esriSMSCircle",
                        square: "esriSMSSquare",
                        cross: "esriSMSCross",
                        x: "esriSMSX",
                        diamond: "esriSMSDiamond",
                        path: "esriSMSPath"
                    },
                    constructor: function (d, m, g, s) {
                        d ? p.isString(d) ? (this.style = d, m && (this.size = m), g && (this.outline = g), s && (this.color = s)) : (this.style = k.valueOf(this._styles, this.style), d.outline && (this.outline = new e(d.outline))) : (p.mixin(this, b), this.size = q.pt2px(this.size), this.outline = new e(this.outline),
                            this.color = new a(this.color));
                        this.style || (this.style = c.STYLE_CIRCLE)
                    },
                    setStyle: function (a) {
                        this.style = a;
                        return this
                    },
                    setPath: function (a) {
                        this.path = a;
                        this.setStyle(c.STYLE_PATH);
                        return this
                    },
                    setOutline: function (a) {
                        this.outline = a;
                        return this
                    },
                    getStroke: function () {
                        return this.outline && this.outline.getStroke()
                    },
                    getFill: function () {
                        return this.color
                    },
                    _setDim: function (a, b, c) {
                        this._targetWidth = a;
                        this._targetHeight = b;
                        this._spikeSize = c
                    },
                    getShapeDescriptors: function () {
                        var a, e, g, s = this.style,
                            n = (this.size || q.pt2px(b.size)) /
                            2,
                            f = 0 - n,
                            h = 0 + n,
                            k = 0 - n,
                            l = 0 + n;
                        switch (s) {
                        case c.STYLE_CIRCLE:
                            a = {
                                type: "circle",
                                cx: 0,
                                cy: 0,
                                r: n
                            };
                            e = this.getFill();
                            if (g = this.getStroke()) g.style = g.style || "Solid";
                            break;
                        case c.STYLE_CROSS:
                            a = {
                                type: "path",
                                path: "M " + f + ",0 L " + h + ",0 M 0," + k + " L 0," + l + " E"
                            };
                            e = null;
                            g = this.getStroke();
                            break;
                        case c.STYLE_DIAMOND:
                            a = {
                                type: "path",
                                path: "M " + f + ",0 L 0," + k + " L " + h + ",0 L 0," + l + " L " + f + ",0 Z"
                            };
                            e = this.getFill();
                            g = this.getStroke();
                            break;
                        case c.STYLE_SQUARE:
                            a = {
                                type: "path",
                                path: "M " + f + "," + l + " L " + f + "," + k + " L " + h + "," + k + " L " + h +
                                    "," + l + " L " + f + "," + l + " Z"
                            };
                            e = this.getFill();
                            g = this.getStroke();
                            break;
                        case c.STYLE_X:
                            a = {
                                type: "path",
                                path: "M " + f + "," + l + " L " + h + "," + k + " M " + f + "," + k + " L " + h + "," + l + " E"
                            };
                            e = null;
                            g = this.getStroke();
                            break;
                        case c.STYLE_PATH:
                            a = {
                                type: "path",
                                path: this.path || ""
                            }, e = this.getFill(), g = this.getStroke()
                        }
                        return {
                            defaultShape: a,
                            fill: e,
                            stroke: g
                        }
                    },
                    toJson: function () {
                        var a = this.style,
                            b = this.outline,
                            c = p.mixin(this.inherited("toJson", arguments), {
                                type: "esriSMS",
                                style: this._styles[a]
                            });
                        b && (c.outline = b.toJson());
                        ("x" === a || "cross" ===
                            a) && delete c.color;
                        c.path = this.path;
                        return k.fixJson(c)
                    }
                });
                p.mixin(r, c);
                r.defaultProps = b;
                g("extend-esri") && (p.setObject("symbol.SimpleMarkerSymbol", r, h), h.symbol.defaultSimpleMarkerSymbol = b);
                return r
            })
        },
        "esri/symbols/SimpleLineSymbol": function () {
            define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./LineSymbol".split(" "), function (r, p, a, g, q, h, k, l) {
                var e = {
                        STYLE_SOLID: "solid",
                        STYLE_DASH: "dash",
                        STYLE_DOT: "dot",
                        STYLE_DASHDOT: "dashdot",
                        STYLE_DASHDOTDOT: "longdashdotdot",
                        STYLE_NULL: "none",
                        STYLE_SHORTDASH: "shortdash",
                        STYLE_SHORTDOT: "shortdot",
                        STYLE_SHORTDASHDOT: "shortdashdot",
                        STYLE_SHORTDASHDOTDOT: "shortdashdotdot",
                        STYLE_LONGDASH: "longdash",
                        STYLE_LONGDASHDOT: "longdashdot"
                    },
                    c = {
                        color: [0, 0, 0, 1],
                        style: e.STYLE_SOLID,
                        width: 1
                    };
                r = r(l, {
                    declaredClass: "esri.symbol.SimpleLineSymbol",
                    type: "simplelinesymbol",
                    _styles: {
                        solid: "esriSLSSolid",
                        dash: "esriSLSDash",
                        dot: "esriSLSDot",
                        dashdot: "esriSLSDashDot",
                        longdashdotdot: "esriSLSDashDotDot",
                        none: "esriSLSNull",
                        insideframe: "esriSLSInsideFrame",
                        shortdash: "esriSLSShortDash",
                        shortdot: "esriSLSShortDot",
                        shortdashdot: "esriSLSShortDashDot",
                        shortdashdotdot: "esriSLSShortDashDotDot",
                        longdash: "esriSLSLongDash",
                        longdashdot: "esriSLSLongDashDot"
                    },
                    constructor: function (b, d, m) {
                        b ? p.isString(b) ? (this.style = b, d && (this.color = d), m && (this.width = m)) : this.style = k.valueOf(this._styles, b.style) || e.STYLE_SOLID : (p.mixin(this, c), this.color = new a(this.color), this.width = q.pt2px(this.width))
                    },
                    setStyle: function (a) {
                        this.style = a;
                        return this
                    },
                    getStroke: function () {
                        return this.style ===
                            e.STYLE_NULL || 0 === this.width ? null : {
                                color: this.color,
                                style: this.style,
                                width: this.width
                            }
                    },
                    getFill: function () {
                        return null
                    },
                    getShapeDescriptors: function () {
                        return {
                            defaultShape: {
                                type: "path",
                                path: "M -15,0 L 15,0 E"
                            },
                            fill: null,
                            stroke: this.getStroke()
                        }
                    },
                    toJson: function () {
                        return k.fixJson(p.mixin(this.inherited("toJson", arguments), {
                            type: "esriSLS",
                            style: this._styles[this.style]
                        }))
                    }
                });
                p.mixin(r, e);
                r.defaultProps = c;
                g("extend-esri") && (p.setObject("symbol.SimpleLineSymbol", r, h), h.symbol.defaultSimpleLineSymbol =
                    c);
                return r
            })
        },
        "esri/symbols/LineSymbol": function () {
            define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ./Symbol".split(" "), function (r, p, a, g, q, h) {
                r = r(h, {
                    declaredClass: "esri.symbol.LineSymbol",
                    constructor: function (a) {
                        p.isObject(a) ? this.width = g.pt2px(this.width) : this.width = 12
                    },
                    setWidth: function (a) {
                        this.width = a;
                        return this
                    },
                    toJson: function () {
                        var a = g.px2pt(this.width),
                            a = isNaN(a) ? void 0 : a;
                        return p.mixin(this.inherited("toJson", arguments), {
                            width: a
                        })
                    }
                });
                a("extend-esri") && p.setObject("symbol.LineSymbol",
                    r, q);
                return r
            })
        },
        "esri/layers/TileInfo": function () {
            define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../SpatialReference ../geometry/Point ./LOD".split(" "), function (r, p, a, g, q, h, k, l, e) {
                r = r(null, {
                    declaredClass: "esri.layers.TileInfo",
                    constructor: function (c) {
                        p.mixin(this, c);
                        this.width = this.cols;
                        this.height = this.rows;
                        c = this.spatialReference;
                        var b = this.origin;
                        c && (c = this.spatialReference = new k(c.toJson ? c.toJson() : c));
                        b && (this.origin = new l(b.toJson ? b.toJson() : b), !b.spatialReference &&
                            c && this.origin.setSpatialReference(new k(c.toJson())));
                        this.lods = a.map(this.lods, function (a) {
                            return new e(a)
                        })
                    },
                    toJson: function () {
                        return h.fixJson({
                            rows: this.rows,
                            cols: this.cols,
                            dpi: this.dpi,
                            format: this.format,
                            compressionQuality: this.compressionQuality,
                            origin: this.origin && this.origin.toJson(),
                            spatialReference: this.spatialReference && this.spatialReference.toJson(),
                            lods: this.lods && a.map(this.lods, function (a) {
                                return a.toJson()
                            })
                        })
                    }
                });
                g("extend-esri") && p.setObject("layers.TileInfo", r, q);
                return r
            })
        },
        "esri/layers/LOD": function () {
            define(["dojo/_base/declare",
"dojo/_base/lang", "dojo/has", "../kernel", "../lang"], function (r, p, a, g, q) {
                r = r(null, {
                    declaredClass: "esri.layers.LOD",
                    constructor: function (a) {
                        p.mixin(this, a)
                    },
                    toJson: function () {
                        return q.fixJson({
                            level: this.level,
                            levelValue: this.levelValue,
                            resolution: this.resolution,
                            scale: this.scale
                        })
                    }
                });
                a("extend-esri") && p.setObject("layers.LOD", r, g);
                return r
            })
        },
        "esri/layers/ArcGISTiledMapServiceLayer": function () {
            define("dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/has dojo/io-query ../kernel ../urlUtils ../SpatialReference ./TiledMapServiceLayer ./ArcGISMapServiceLayer ./TileInfo ./TimeInfo ./TileMap".split(" "),
                function (r, p, a, g, q, h, k, l, e, c, b, d, m, t, s) {
                    p = p([b, d], {
                        declaredClass: "esri.layers.ArcGISTiledMapServiceLayer",
                        _agolAttrs: "Canvas/World_Dark_Gray_Base Canvas/World_Dark_Gray_Reference Canvas/World_Light_Gray_Base Canvas/World_Light_Gray_Reference Elevation/World_Hillshade Ocean/World_Ocean_Base Ocean/World_Ocean_Reference Ocean_Basemap Reference/World_Boundaries_and_Places Reference/World_Boundaries_and_Places_Alternate Reference/World_Transportation World_Imagery World_Street_Map World_Topo_Map".split(" "),
                        _isReference: !1,
                        _referenceLayers: "Canvas/World_Dark_Gray_Reference Canvas/World_Light_Gray_Reference Ocean/World_Ocean_Reference Reference/World_Boundaries_and_Places Reference/World_Boundaries_and_Places_Alternate Reference/World_Reference_Overlay Reference/World_Transportation".split(" "),
                        constructor: function (b, c) {
                            c && (c.roundrobin && (r.deprecated(this.declaredClass + " : Constructor option 'roundrobin' deprecated. Use option 'tileServers'."), c.tileServers = c.roundrobin), this._setTileServers(c.tileServers),
                                this._loadCallback = c.loadCallback);
                            this._params = a.mixin({}, this._url.query);
                            this._initLayer = a.hitch(this, this._initLayer);
                            var d = c && c.resourceInfo;
                            d ? this._initLayer(d) : (this._load = a.hitch(this, this._load), this._load())
                        },
                        _TILE_FORMATS: {
                            PNG: "png",
                            PNG8: "png",
                            PNG24: "png",
                            PNG32: "png",
                            JPG: "jpg",
                            JPEG: "jpg",
                            GIF: "gif"
                        },
                        _setTileServers: function (a) {
                            if (a && 0 < a.length) {
                                this.tileServers = a;
                                var b, c = a.length;
                                for (b = 0; b < c; b++) a[b] = e.urlToObject(a[b]).path
                            }
                        },
                        _initLayer: function (a, b) {
                            this.inherited(arguments);
                            this.resourceInfo =
                                q.toJson(a);
                            this.tileInfo = new m(a.tileInfo);
                            !1 !== this.resampling && (a.capabilities && -1 < a.capabilities.indexOf("Tilemap") ? (this.resampling = !0, this.tileMap = new s(this)) : this.resampling = !!a.resampling);
                            !this.spatialReference && this.tileInfo.spatialReference && (this.spatialReference = new c(this.tileInfo.spatialReference.toJson()));
                            this.isPNG32 = "PNG24" === this.tileInfo.format || "PNG32" === this.tileInfo.format;
                            a.timeInfo && (this.timeInfo = new t(a.timeInfo));
                            a.mensurationCapabilities && (this.mensurationCapabilities =
                                a.mensurationCapabilities);
                            var d = this._url.path,
                                g = this._loadCallback,
                                h = e.getProtocolForWebResource(!0),
                                k = d.match(/^https?\:\/\/(server|services)\.arcgisonline\.com\/arcgis\/rest\/services\/([^\/]+(\/[^\/]+)*)\/mapserver/i),
                                k = k && k[2];
                            if (!this.tileServers)
                                if (a.tileServers) this._setTileServers(a.tileServers);
                                else {
                                    var l = -1 !== d.search(/^https?\:\/\/server\.arcgisonline\.com/i),
                                        p = -1 !== d.search(/^https?\:\/\/services\.arcgisonline\.com/i);
                                    if (l || p) this._setTileServers([d, d.replace(l ? /server\.arcgisonline/i :
                                        /services\.arcgisonline/i, l ? "services.arcgisonline" : "server.arcgisonline")])
                                }
                            if (k) {
                                k = k.toLowerCase();
                                for (d = 0; d < this._agolAttrs.length; d++)
                                    if (l = this._agolAttrs[d], l.toLowerCase() === k) {
                                        this.hasAttributionData = !0;
                                        this.attributionDataUrl = this.attributionDataUrl || h + "//static.arcgis.com/attribution/" + l;
                                        break
                                    }
                                for (d = 0; d < this._referenceLayers.length; d++)
                                    if (l = this._referenceLayers[d], l.toLowerCase() === k) {
                                        this._isReference = !0;
                                        break
                                    }
                            }
                            this.loaded = !0;
                            this.onLoad(this);
                            g && (delete this._loadCallback, g(this))
                        },
                        getTileUrl: function (a,
                            b, c) {
                            var d = this.tileServers,
                                m = this._getToken(),
                                g = this._url.query;
                            a = (d ? d[b % d.length] : this._url.path) + "/tile/" + a + "/" + b + "/" + c;
                            a = e.upgradeToHTTPS(a);
                            this.resampling && !this.tileMap && (a += "?blankTile\x3dfalse");
                            g && (a = this.resampling && !this.tileMap ? a + ("\x26" + k.objectToQuery(g)) : a + ("?" + k.objectToQuery(g)));
                            if (m && (!g || !g.token)) a += (-1 === a.indexOf("?") ? "?" : "\x26") + "token\x3d" + m;
                            a = this.addTimestampToURL(a);
                            return e.addProxy(a)
                        }
                    });
                    h("extend-esri") && a.setObject("layers.ArcGISTiledMapServiceLayer", p, l);
                    return p
                })
        },
        "esri/layers/TiledMapServiceLayer": function () {
            define("dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/url dojo/dom-construct dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/dom dojox/collections/ArrayList dojox/gfx/matrix ../kernel ../config ../sniff ../domUtils ../tileUtils ../geometry/Point ../geometry/Rect ../geometry/Extent ./layer".split(" "), function (r, p, a, g, q, h, k, l, e, c, b, d, m, t, s, n, f, y, u, w, C) {
                r = r(C, {
                    declaredClass: "esri.layers.TiledMapServiceLayer",
                    constructor: function (b,
                        c) {
                        p.connect(this, "onLoad", this, "_initTiledLayer");
                        this._lowestLevel = (this._displayLevels = c ? c.displayLevels : null) ? this._displayLevels[0] : 0;
                        this.resampling = c ? c.resampling : void 0;
                        this._resamplingTolerance = c ? c.resamplingTolerance : null;
                        this.exclusionAreas = c ? c.exclusionAreas : null;
                        var f = a.hitch;
                        this._addImage = f(this, this._addImage);
                        this._tileLoadHandler = f(this, this._tileLoadHandler);
                        this._tileErrorHandler = f(this, this._tileErrorHandler);
                        this._popTile = f(this, this._popTile);
                        this._cleanUpRemovedImages = f(this,
                            this._cleanUpRemovedImages);
                        this._fireOnUpdateEvent = f(this, this._fireOnUpdateEvent);
                        this._transitionEnd = f(this, this._transitionEnd);
                        this._tileMapCallback = f(this, this._tileMapCallback)
                    },
                    opacity: 1,
                    isPNG32: !1,
                    _multiple: 1,
                    isResampling: !1,
                    _initTiledLayer: function () {
                        var a = this.tileInfo,
                            b = a.lods;
                        this.resampling = null != this.resampling ? this.resampling : !1;
                        this._tileW = a.width;
                        this._tileH = a.height;
                        var c = this.scales = [],
                            d = this._displayLevels,
                            e = -Infinity,
                            m = Infinity,
                            n = this.fullExtent,
                            h = new y(n.xmin, n.ymax),
                            n = new y(n.xmax,
                                n.ymin),
                            k = f.getContainingTileCoords,
                            t, l, u, p = b.length;
                        for (u = 0; u < p; u++)
                            if (l = b[u], t = k(a, h, l), l.startTileRow = 0 > t.row ? 0 : t.row, l.startTileCol = 0 > t.col ? 0 : t.col, t = k(a, n, l), l.endTileRow = t.row, l.endTileCol = t.col, !d || -1 !== g.indexOf(d, l.level)) c[u] = l.scale, e = l.scale > e ? l.scale : e, m = l.scale < m ? l.scale : m; - Infinity !== e && !this._hasMin && this.setMinScale(e);
                        Infinity !== m && !this._hasMax && this.setMaxScale(m);
                        this.setExclusionAreas(this.exclusionAreas);
                        this._patchIE = 6 <= s("ie") && 7 > s("ie") && (this.isPNG32 || "Mixed" === a.format)
                    },
                    isVisibleAtScale: function (a) {
                        return a ? C.prototype._isMapAtVisibleScale.call(this, a, !0) : !1
                    },
                    _isMapAtVisibleScale: function (a) {
                        var b = this.inherited(arguments, [a, !0]);
                        if (b) {
                            var c;
                            c = this._map;
                            var b = this.scales,
                                f = c.getScale(),
                                d = !1,
                                e = c.width > c.height ? c.width : c.height;
                            for (c = 0; c < b.length; c++)
                                if (Math.abs(b[c] - f) / b[c] < 1 / e) {
                                    d = !0;
                                    break
                                }
                            b = d
                        }
                        return b
                    },
                    _setMap: function (a, b, c, d) {
                        this.inherited(arguments);
                        this._map = a;
                        var g = this._div = h.create("div", null, b),
                            n = a.__visibleDelta,
                            s = p.connect,
                            k = m._css.names,
                            l = {
                                position: "absolute",
                                width: a.width + "px",
                                height: a.height + "px",
                                overflow: "visible"
                            },
                            u = t.defaults.map.zoomDuration;
                        "css-transforms" === a.navigationMode ? (l[k.transform] = m._css.translate(-n.x, -n.y), e.set(g, l), delete l[k.transform], l[k.transition] = k.transformName + " " + u + "ms ease", e.set(this._active = h.create("div", null, g), l), this._active._remove = 0, this._passives = []) : (l.left = -n.x + "px", l.top = -n.y + "px", e.set(g, l));
                        this._onResizeHandler_connect = s(a, "onResize", this, "_onResizeHandler");
                        this._opacityChangeHandler_connect = s(this, "onOpacityChange",
                            this, "_opacityChangeHandler");
                        n = this.tileInfo;
                        s = n.spatialReference;
                        k = s._getInfo();
                        (this._wrap = a.wrapAround180 && s._isWrappable() && Math.abs(k.origin[0] - n.origin.x) <= k.dx) && f._addFrameInfo(n, k);
                        this.setExclusionAreas(this.exclusionAreas);
                        this.evaluateSuspension();
                        if (this.suspended && !a.loaded) var q = p.connect(a, "onLoad", this, function () {
                            p.disconnect(q);
                            q = null;
                            this.setExclusionAreas(this.exclusionAreas);
                            this.evaluateSuspension()
                        });
                        return g
                    },
                    _unsetMap: function (a, b) {
                        this.suspended || this._suspendImpl();
                        h.destroy(this._div);
                        this._map = this._div = null;
                        var c = p.disconnect;
                        c(this._onResizeHandler_connect);
                        c(this._opacityChangeHandler_connect);
                        this.inherited(arguments)
                    },
                    onSuspend: function () {
                        this.inherited(arguments);
                        this._suspendImpl()
                    },
                    _suspendImpl: function () {
                        n.hide(this._div);
                        clearTimeout(this._wakeTimer);
                        this._wakeTimer = null;
                        this._disableDrawConnectors();
                        var a = this._tiles,
                            b = this._tileIds,
                            c = this._loadingList,
                            f, d, e = p.disconnect,
                            m = h.destroy;
                        c && 0 < c.count && (c.forEach(function (b) {
                            if (f = a[b]) e(f._onload_connect), e(f._onerror_connect),
                                e(f._onabort_connect), f._onload_connect = f._onerror_connect = f._onabort_connect = null
                        }), c.clear(), this._fireUpdateEnd());
                        this._removeList.clear();
                        for (c = b.length - 1; 0 <= c; c--)(f = (d = b[c]) && a[d]) && m(f);
                        if ("css-transforms" === this._map.navigationMode) {
                            b = this._active;
                            d = this._passives;
                            var g;
                            this._noDom = 0;
                            for (c = d.length - 1; 0 <= c; c--) g = d[c], g._endHandle && e(g._endHandle), g._matrix = g._multiply = g._endHandle = null, g._marked = g._remove = 0, d.splice(c, 1), m(g);
                            b._matrix = b._multiply = null;
                            b._marked = b._remove = 0
                        }
                        this._tileIds =
                            this._tiles = this._tileBounds = this._ct = this._loadingList = this._removeList = this._standby = null
                    },
                    onResume: function () {
                        this.inherited(arguments);
                        this._tileIds = [];
                        this._tiles = [];
                        this._tileBounds = [];
                        this._ct = null;
                        this._removeList = new b;
                        this._loadingList = new b;
                        n.show(this._div);
                        this._enableDrawConnectors();
                        this._wakeTimer = this._wakeTimer || setTimeout(a.hitch(this, function () {
                            this.suspended || this._onExtentChangeHandler(this._map.extent, null, !0, this._map.__LOD)
                        }), 0)
                    },
                    _enableDrawConnectors: function () {
                        var a = this._map,
                            b = p.connect;
                        if ("css-transforms" === a.navigationMode) {
                            if (this._onScaleHandler_connect = b(a, "onScale", this, this._onScaleHandler), s("esri-mobile")) {
                                this._standby = [];
                                var c = this,
                                    f = function () {
                                        c._noDom = 1
                                    };
                                this._onPanStartHandler_connect = b(a, "onPanStart", f);
                                this._onZoomStartHandler_connect = b(a, "onZoomStart", f)
                            }
                        } else this._onZoomHandler_connect = b(a, "onZoom", this, "_onZoomHandler");
                        this._onPanHandler_connect = b(a, "onPan", this, "_onPanHandler");
                        this._onExtentChangeHandler_connect = b(a, "onExtentChange", this, "_onExtentChangeHandler")
                    },
                    _disableDrawConnectors: function () {
                        var a = p.disconnect;
                        a(this._onPanHandler_connect);
                        a(this._onZoomHandler_connect);
                        a(this._onScaleHandler_connect);
                        a(this._onExtentChangeHandler_connect);
                        a(this._onPanStartHandler_connect);
                        a(this._onZoomStartHandler_connect);
                        this._onPanHandler_connect = this._onZoomHandler_connect = this._onScaleHandler_connect = this._onExtentChangeHandler_connect = this._onPanStartHandler_connect = this._onZoomStartHandler_connect = null
                    },
                    _onResizeHandler: function (a, b, c) {
                        a = {
                            width: b + "px",
                            height: c +
                                "px"
                        };
                        b = e.set;
                        b(this._div, a);
                        if ("css-transforms" === this._map.navigationMode) {
                            this._active && b(this._active, a);
                            for (c = this._passives.length - 1; 0 <= c; c--) b(this._passives[c], a)
                        }
                    },
                    _onExtentChangeHandler: function (a, b, c, g) {
                        b = this._map;
                        var n = this._standby,
                            s;
                        clearTimeout(this._wakeTimer);
                        this._wakeTimer = null;
                        if (!b._isPanningOrZooming()) {
                            if ("css-transforms" === b.navigationMode) {
                                if (c)
                                    for (g = this._passives.length - 1; 0 <= g; g--) s = this._passives[g], e.set(s, m._css.names.transition, "none"), s._marked ? (this._passives.splice(g,
                                        1), s.parentNode && s.parentNode.removeChild(s), h.destroy(s)) : 0 < s.childNodes.length && (s._multiply = s._multiply ? d.multiply(s._matrix, s._multiply) : s._matrix);
                                this._noDom = 0;
                                if (n && n.length)
                                    for (g = n.length - 1; 0 <= g; g--) s = n[g], e.set(s, "visibility", "inherit"), this._popTile(s), n.splice(g, 1)
                            }
                            this._fireUpdateStart();
                            this._rrIndex = 0;
                            g = f.getCandidateTileInfo(b, this.tileInfo, a);
                            a = b.__visibleDelta;
                            if (!this._ct || g.lod.level !== this._ct.lod.level || c) {
                                s = g && this._ct && g.lod.level !== this._ct.lod.level;
                                this._ct = g;
                                var k = this._tiles,
                                    t = this._tileIds,
                                    p = this._tileBounds,
                                    q = this._removeList,
                                    w, r = t.length;
                                this._cleanUpRemovedImages();
                                for (g = 0; g < r; g++) n = t[g], w = k[n], p[n] = t[g] = null, "css-transforms" === b.navigationMode && (s && w.parentNode && b.fadeOnZoom) && (w._fadeOut = s, w.parentNode._remove++), q.add(w);
                                c && (this._tileIds = [], this._tiles = [], this._tileBounds = [])
                            }
                            g = a.x;
                            c = a.y;
                            "css-transforms" === b.navigationMode ? (n = {}, n[m._css.names.transform] = m._css.translate(g, c), e.set(this._div, n)) : e.set(this._div, {
                                left: g + "px",
                                top: c + "px"
                            });
                            this.__coords_dx = g;
                            this.__coords_dy =
                                c;
                            this._updateImages(new u(0, 0, a.width, a.height));
                            0 === this._loadingList.count ? (this._cleanUpRemovedImages(), this.onUpdate(), this._fireUpdateEnd()) : this._fireOnUpdate = !0;
                            c = this._tileW;
                            k = this._tileH;
                            a = new u(-a.x, -a.y, a.width, a.height);
                            for (g = this._tileIds.length - 1; 0 <= g; g--)(n = this._tileIds[g]) ? (s = this._tiles[n], t = l.getMarginBox(s), t = new u(t.l, t.t, c, k), "css-transforms" === b.navigationMode && (t.x = s._left, t.y = s._top), a.intersects(t) ? this._tileBounds[n] = t : (this._loadingList.contains(n) && this._popTile(s), h.destroy(s),
                                this._tileIds.splice(g, 1), delete this._tileBounds[n], delete this._tiles[n])) : (this._tileIds.splice(g, 1), delete this._tileBounds[n], delete this._tiles[n])
                        }
                    },
                    _onPanHandler: function (a, b) {
                        var c = this._map,
                            f = c.__visibleDelta.offset(b.x, b.y);
                        this.__coords_dx = this.__coords_dy = 0;
                        "css-transforms" === c.navigationMode ? (c = {}, c[m._css.names.transform] = m._css.translate(f.x, f.y), e.set(this._div, c), s("esri-mobile") || this._updateImages({
                            x: -f.x,
                            y: -f.y,
                            width: f.width,
                            height: f.height
                        })) : (e.set(this._div, {
                            left: f.x + "px",
                            top: f.y + "px"
                        }), this._updateImages({
                            x: -f.x,
                            y: -f.y,
                            width: f.width,
                            height: f.height
                        }));
                        0 < this._loadingList.count && (this._fireUpdateStart(), this._fireOnUpdate = !0)
                    },
                    _onScaleHandler: function (a, b) {
                        var c, f = {},
                            g = m._css.names,
                            n = this._map,
                            s = t.defaults.map.zoomDuration;
                        for (c = this._passives.length - 1; 0 <= c; c--) {
                            var k = this._passives[c];
                            0 === k.childNodes.length ? (this._passives.splice(c, 1), h.destroy(k)) : ("none" === k.style[g.transition] && e.set(k, g.transition, g.transformName + " " + s + "ms ease"), e.set(k, g.transition, b ? "none" :
                                g.transformName + " " + s + "ms ease"), k._matrix = a, f[g.transform] = m._css.matrix(k._multiply ? d.multiply(a, k._multiply) : a), e.set(k, f))
                        }
                        this._active && 0 === this._active.childNodes.length || (e.set(this._active, g.transition, b ? "none" : g.transformName + " " + s + "ms ease"), this._active._matrix = a, f[g.transform] = m._css.matrix(this._active._matrix), e.set(this._active, f), this._passives.push(this._active), f = {
                                position: "absolute",
                                width: n.width + "px",
                                height: n.height + "px",
                                overflow: "visible"
                            }, f[g.transition] = g.transformName + " " +
                            s + "ms ease", e.set(this._active = h.create("div", null, this._div), f), this._active._remove = 0, n.fadeOnZoom && h.place(this._active, this._div, "first"))
                    },
                    _onZoomHandler: function (a, b, c) {
                        a = l.getMarginBox(this._div);
                        c = c.offset(-a.l, -a.t);
                        if (!this._previousScale || 1 === b) this._previousScale = 1;
                        var f, d = this._tileW * b,
                            m = this._tileH * b,
                            n = this._tileBounds,
                            h = this._tiles,
                            k = this._previousScale,
                            t = this._multiple,
                            u = e.set,
                            p, q;
                        if ((a = s("ie")) && 8 > a) g.forEach(this._tileIds, function (a) {
                            q = "";
                            f = n[a];
                            p = h[a].style.margin.split(" ");
                            g.forEach(p,
                                function (a) {
                                    "" !== q && (q += " ");
                                    a = parseFloat(a);
                                    q += a / k * b + "px"
                                });
                            u(h[a], {
                                left: f.x - (d - f.width) * (c.x - f.x) / f.width + "px",
                                top: f.y - (m - f.height) * (c.y - f.y) / f.height + "px",
                                margin: 1 !== t && -1 === q.indexOf("NaN") ? q : "",
                                zoom: b
                            })
                        });
                        else {
                            var w = d * t,
                                r = m * t,
                                y, C;
                            g.forEach(this._tileIds, function (a) {
                                q = "";
                                f = n[a];
                                y = f.x - (d - f.width) * (c.x - f.x) / f.width;
                                C = f.y - (m - f.height) * (c.y - f.y) / f.height;
                                p = h[a].style.margin.split(" ");
                                g.forEach(p, function (a) {
                                    "" !== q && (q += " ");
                                    a = parseFloat(a);
                                    q += a / k * b + "px"
                                });
                                u(h[a], {
                                    left: y + "px",
                                    top: C + "px",
                                    margin: 1 !==
                                        t && -1 === q.indexOf("NaN") ? q : "",
                                    width: w + "px",
                                    height: r + "px"
                                })
                            })
                        }
                        this._previousScale = b
                    },
                    _updateImages: function (a) {
                        if (this._ct) {
                            var b, c = this._tileW,
                                f = this._tileH,
                                d = this._ct;
                            b = d.lod;
                            var d = d.tile,
                                e = d.offsets,
                                m = d.coords,
                                n = m.row,
                                m = m.col,
                                s = b.level,
                                h = this.opacity,
                                k = this._tileIds,
                                t = this._loadingList,
                                l = this._addImage,
                                u = this._map.id,
                                q = this.id,
                                p = a.x,
                                w = a.y,
                                r = b.startTileRow,
                                y = b.endTileRow,
                                C = b.startTileCol,
                                Z = b.endTileCol,
                                ga = g.indexOf,
                                aa, ea, ua = e.x - this.__coords_dx,
                                xa = e.y - this.__coords_dy;
                            ea = c - ua + -a.x;
                            var ha = f - xa + -a.y;
                            aa = Math.ceil;
                            ea = 0 < ea ? ea % c : c - Math.abs(ea) % c;
                            ha = 0 < ha ? ha % f : f - Math.abs(ha) % f;
                            p = 0 < p ? Math.floor((p + ua) / c) : aa((p - (c - ua)) / c);
                            w = 0 < w ? Math.floor((w + xa) / f) : aa((w - (f - xa)) / f);
                            xa = p + aa((a.width - ea) / c);
                            a = w + aa((a.height - ha) / f);
                            var pa, oa, na;
                            this._wrap && (pa = b._frameInfo, oa = pa[0], na = pa[1], pa = pa[2]);
                            for (ha = p; ha <= xa; ha++)
                                for (p = w; p <= a; p++) aa = n + p, ea = m + ha, this._wrap && (ea < na ? (ea %= oa, ea = ea < na ? ea + oa : ea) : ea > pa && (ea %= oa)), !this._isExcluded(s, aa, ea) && (aa >= r && aa <= y && ea >= C && ea <= Z) && (b = u + "_" + q + "_tile_" + s + "_" + p + "_" + ha, -1 === ga(k, b) &&
                                    (t.add(b), k.push(b), l(s, p, aa, ha, ea, b, c, f, h, d, e)))
                        }
                    },
                    _cleanUpRemovedImages: function () {
                        var a = this._removeList,
                            b = h.destroy,
                            c, f = m._css.names;
                        a.forEach(function (a) {
                            a._fadeOut || (a.style.filter = "", a.style.zoom = 1, b(a))
                        });
                        if ("css-transforms" === this._map.navigationMode)
                            for (c = this._passives.length - 1; 0 <= c; c--) {
                                var d = this._passives[c];
                                0 === d.childNodes.length ? (this._passives.splice(c, 1), b(d)) : this._map.fadeOnZoom && (!d._marked && d._remove === d.childNodes.length) && (d._marked = 1, 2048 > m._css.getScaleFromMatrix(e.get(d,
                                    f.transform)) ? (e.set(d, f.transition, "opacity 0.65s"), e.set(d, "opacity", 0), p.disconnect(d._endHandle), d._endHandle = p.connect(d, f.endEvent, this._transitionEnd)) : this._transitionEnd({
                                    propertyName: "opacity",
                                    target: d
                                }))
                            }
                        a.clear()
                    },
                    _transitionEnd: function (a) {
                        var b = a.target;
                        "opacity" === a.propertyName && (p.disconnect(b._endHandle), b._endHandle = null, a = g.indexOf(this._passives, b), -1 < a && this._passives.splice(a, 1), b.parentNode && b.parentNode.removeChild(b), h.destroy(b))
                    },
                    _addImage: function (b, c, f, d, g, n, s, t, l, u,
                        q) {
                        if (this._patchIE) u = this._tiles[n] = h.create("div"), u.id = n, k.add(u, "layerTile"), e.set(u, {
                            left: s * d - q.x + "px",
                            top: t * c - q.y + "px",
                            width: s + "px",
                            height: t + "px",
                            filter: "progid:DXImageTransform.Microsoft.AlphaImageLoader(src\x3d'" + this.getTileUrl(b, f, g) + "', sizingMethod\x3d'scale')"
                        }), 1 > l && e.set(u, "opacity", l), b = u.appendChild(h.create("div")), e.set(b, {
                            opacity: 0,
                            width: s + "px",
                            height: t + "px"
                        }), this._div.appendChild(u), this._loadingList.remove(n), this._fireOnUpdateEvent();
                        else {
                            u = this._tiles[n] = h.create("img");
                            var w =
                                p.connect;
                            u.id = n;
                            u._uid = b + "_" + f + "_" + g;
                            u.alt = "";
                            k.add(u, "layerTile");
                            d = s * d - q.x;
                            q = t * c - q.y;
                            c = this._map;
                            var r = m._css.names;
                            s = {
                                width: s + "px",
                                height: t + "px",
                                visibility: "hidden"
                            };
                            "css-transforms" === c.navigationMode ? (s[r.transform] = m._css.translate(d, q), e.set(u, s), u._left = d, u._top = q) : (s.left = d + "px", s.top = q + "px", e.set(u, s));
                            1 > l && e.set(u, "opacity", l);
                            u._onload_connect = w(u, "onload", this, "_tileLoadHandler");
                            u._onerror_connect = w(u, "onerror", a.hitch(this, "_tileErrorHandler", f, g));
                            u._onabort_connect = w(u, "onabort",
                                this, "_tileAbortHandler");
                            if (this.tileMap) this.tileMap.getTile(b, f, g, n, this._tileMapCallback);
                            else if (n = this.getTileUrl(b, f, g, u)) this._failedRequests && this._failedRequests[n] ? (e.set(u, this._failedRequests[n].css), u.src = this._failedRequests[n].src, this._multiple = parseInt(this._failedRequests[n].css.width) / this._tileW, this.isResampling = 1 !== this._multiple) : (this._multiple = 1, this.isResampling = !1, u.src = n);
                            "css-transforms" === c.navigationMode ? this._active.appendChild(u) : this._div.appendChild(u)
                        }
                    },
                    _tileMapCallback: function (a,
                        b) {
                        var f, d;
                        this.suspended || (d = this._tiles[b.id] || c.byId(b.id), f = b.level + "_" + b.row + "_" + b.col, d && d._uid === f ? (this._multiple = 2 * (b.level - a.level) || 1, this.isResampling = 1 !== this._multiple, f = this.tileMap.style(a, b), e.set(d, f), d.src = this.getTileUrl(a.level, a.row, a.col)) : this._popTile(b))
                    },
                    getTileUrl: function (a, b, c) {},
                    _reCheckTS: /[\?\&]_ts=/ig,
                    _reReplaceTS: /([\?\&]_ts=)[0-9]+/ig,
                    addTimestampToURL: function (a) {
                        var b = this._refreshTS;
                        b && (a = this._reCheckTS.test(a) ? a.replace(this._reReplaceTS, "$$$1" + b) : a + ((-1 ===
                            a.indexOf("?") ? "?" : "\x26") + "_ts\x3d" + b));
                        return a
                    },
                    refresh: function () {
                        this.suspended || (this._refreshTS = (new Date).getTime(), this._onExtentChangeHandler(this._map.extent, null, !0, this._map.__LOD))
                    },
                    _popTile: function (a) {
                        var b = p.disconnect;
                        b(a._onload_connect);
                        b(a._onerror_connect);
                        b(a._onabort_connect);
                        a._onload_connect = a._onerror_connect = a._onabort_connect = null;
                        this._loadingList.remove(a.id);
                        this._fireOnUpdateEvent()
                    },
                    _tileLoadHandler: function (a) {
                        a = a.currentTarget;
                        this._noDom ? this._standby.push(a) :
                            (e.set(a, "visibility", "inherit"), this._popTile(a))
                    },
                    _tileAbortHandler: function (a) {
                        a = a.currentTarget;
                        this.onError(Error("Unable to load tile: " + a.src));
                        e.set(a, "visibility", "hidden");
                        this._popTile(a)
                    },
                    _tileErrorHandler: function (a, b, c) {
                        c = c.currentTarget;
                        var f, d, m = !0;
                        if (this.tileMap || !this.resampling) m = !1;
                        else if (f = new q(c.src), f = f.path.split("/"), f = parseInt(f[f.length - 3]), d = this._ct.lod.level - f + 1, this._multiple = Math.pow(2, d), f === this._lowestLevel || 0 === this._resamplingTolerance || this._resamplingTolerance &&
                            Math.log(this._multiple) / Math.LN2 > this._resamplingTolerance) m = !1;
                        m ? (this.isResampling = !0, this._resample(c, a, b)) : (this.onError(Error("Unable to load tile: " + c.src)), e.set(c, "visibility", "hidden"), this._popTile(c))
                    },
                    _resample: function (a, b, c) {
                        var f = (new q(a.src)).path.split("/"),
                            d = this._multiple,
                            m = parseInt(f[f.length - 3]) - 1,
                            g = parseInt(b / d),
                            n = parseInt(c / d),
                            f = c % d,
                            h = b % d,
                            g = this.getTileUrl(m, g, n);
                        b = this.getTileUrl(m + Math.log(d) / Math.LN2, b, c);
                        d = {
                            width: this._tileW * d + "px",
                            height: this._tileH * d + "px",
                            margin: "-" +
                                this._tileW * h + "px 0 0 " + ("-" + this._tileH * f + "px")
                        };
                        this._failedRequests || (this._failedRequests = {});
                        this._failedRequests[b] = {
                            src: g,
                            css: d
                        };
                        e.set(a, d);
                        s("chrome") && a.setAttribute("src", null);
                        a.src = g
                    },
                    _fireOnUpdateEvent: function () {
                        0 === this._loadingList.count && (this._cleanUpRemovedImages(), this._fireOnUpdate && (this._fireOnUpdate = !1, this.onUpdate(), this._fireUpdateEnd()))
                    },
                    setOpacity: function (a) {
                        if (this.opacity != a) this.onOpacityChange(this.opacity = a)
                    },
                    onOpacityChange: function () {},
                    _opacityChangeHandler: function (a) {
                        var b =
                            e.set,
                            c, f, d;
                        if ("css-transforms" === this._map.navigationMode) {
                            if (this._active) {
                                d = this._active.childNodes;
                                for (c = d.length - 1; 0 <= c; c--) b(d[c], "opacity", a)
                            }
                            for (c = this._passives.length - 1; 0 <= c; c--) {
                                d = this._passives[c].childNodes;
                                for (f = d.length - 1; 0 <= f; f--) b(d[f], "opacity", a)
                            }
                        } else {
                            d = this._div.childNodes;
                            for (c = d.length - 1; 0 <= c; c--) b(d[c], "opacity", a)
                        }
                    },
                    setExclusionAreas: function (a) {
                        this.exclusionAreas = a;
                        if (this.loaded && this._map && this._map.loaded) {
                            var b = this._map.spatialReference,
                                c = this.tileInfo,
                                f = c.origin,
                                d =
                                c.lods,
                                e = d[0].level,
                                m = d[d.length - 1].level,
                                g, n, s, h, k, t, l, u, q;
                            if (!this.exclusionAreas || !this.exclusionAreas.length) this._exclusionsPerZoom = null;
                            else {
                                this._exclusionsPerZoom = [];
                                n = 0;
                                for (s = a.length; n < s; n++)
                                    if (g = a[n], (q = g.geometry) && "extent" === q.type && q.xmin <= q.xmax && q.ymin <= q.ymax) {
                                        if (!b.equals(q.spatialReference))
                                            if (b._canProject(q.spatialReference)) b.isWebMercator() ? (u = y.lngLatToXY(q.xmin, q.ymin), q = y.lngLatToXY(q.xmax, q.ymax)) : (u = y.xyToLngLat(q.xmin, q.ymin, !0), q = y.xyToLngLat(q.xmax, q.ymax, !0)), q = new w(u[0],
                                                u[1], q[0], q[1], b);
                                            else continue;
                                        l = -1;
                                        if (g.minZoom && -1 !== g.minZoom) l = g.minZoom;
                                        else if (g.minScale && -1 !== g.minScale) {
                                            h = 0;
                                            for (k = d.length; h < k; h++)
                                                if (d[h].scale <= g.minScale) {
                                                    l = d[h].level;
                                                    break
                                                }
                                        }
                                        l = Math.max(l, e);
                                        u = -1;
                                        if (g.maxZoom && -1 !== g.maxZoom) u = g.maxZoom;
                                        else if (g.maxScale && -1 !== g.maxScale) {
                                            h = 0;
                                            for (k = d.length; h < k; h++)
                                                if (d[h].scale < g.maxScale) {
                                                    u = d[h - 1].level;
                                                    break
                                                } else if (d[h].scale === g.maxScale) {
                                                u = d[h].level;
                                                break
                                            }
                                        }
                                        u = -1 === u ? m : Math.min(u, m);
                                        for (g = l; g <= u; g++) {
                                            h = 0;
                                            for (k = d.length; h < k; h++)
                                                if (d[h].level ===
                                                    g) {
                                                    t = d[h];
                                                    break
                                                }
                                            t && (this._exclusionsPerZoom[g] || (this._exclusionsPerZoom[g] = []), h = 1 / t.resolution / c.rows, k = 1 / t.resolution / c.cols, this._exclusionsPerZoom[g].push({
                                                rowFrom: Math.floor((f.y - q.ymax) * h),
                                                rowTo: Math.ceil((f.y - q.ymin) * h),
                                                colFrom: Math.floor((q.xmin - f.x) * k),
                                                colTo: Math.ceil((q.xmax - f.x) * k)
                                            }))
                                        }
                                    }
                            }
                            this.suspended || this._onExtentChangeHandler(this._map.extent, null, !0, this._map.__LOD)
                        }
                    },
                    _isExcluded: function (a, b, c) {
                        var f, d, e;
                        if (!this._exclusionsPerZoom) return !1;
                        f = this._exclusionsPerZoom[a];
                        if (!f) return !1;
                        d = 0;
                        for (e = f.length; d < e; d++)
                            if (a = f[d], b >= a.rowFrom && b < a.rowTo && c >= a.colFrom && c < a.colTo) return !0;
                        return !1
                    }
                });
                s("extend-esri") && a.setObject("layers.TiledMapServiceLayer", r, m);
                return r
            })
        },
        "dojox/collections/ArrayList": function () {
            define(["dojo/_base/kernel", "dojo/_base/array", "./_base"], function (r, p, a) {
                a.ArrayList = function (g) {
                    var q = [];
                    g && (q = q.concat(g));
                    this.count = q.length;
                    this.add = function (a) {
                        q.push(a);
                        this.count = q.length
                    };
                    this.addRange = function (a) {
                        if (a.getIterator)
                            for (a = a.getIterator(); !a.atEnd();) this.add(a.get());
                        else
                            for (var g = 0; g < a.length; g++) q.push(a[g]);
                        this.count = q.length
                    };
                    this.clear = function () {
                        q.splice(0, q.length);
                        this.count = 0
                    };
                    this.clone = function () {
                        return new a.ArrayList(q)
                    };
                    this.contains = function (a) {
                        for (var g = 0; g < q.length; g++)
                            if (q[g] == a) return !0;
                        return !1
                    };
                    this.forEach = function (a, g) {
                        r.forEach(q, a, g)
                    };
                    this.getIterator = function () {
                        return new a.Iterator(q)
                    };
                    this.indexOf = function (a) {
                        for (var g = 0; g < q.length; g++)
                            if (q[g] == a) return g;
                        return -1
                    };
                    this.insert = function (a, g) {
                        q.splice(a, 0, g);
                        this.count = q.length
                    };
                    this.item =
                        function (a) {
                            return q[a]
                        };
                    this.remove = function (a) {
                        a = this.indexOf(a);
                        0 <= a && q.splice(a, 1);
                        this.count = q.length
                    };
                    this.removeAt = function (a) {
                        q.splice(a, 1);
                        this.count = q.length
                    };
                    this.reverse = function () {
                        q.reverse()
                    };
                    this.sort = function (a) {
                        a ? q.sort(a) : q.sort()
                    };
                    this.setByIndex = function (a, g) {
                        q[a] = g;
                        this.count = q.length
                    };
                    this.toArray = function () {
                        return [].concat(q)
                    };
                    this.toString = function (a) {
                        return q.join(a || ",")
                    }
                };
                return a.ArrayList
            })
        },
        "dojox/collections/_base": function () {
            define(["dojo/_base/kernel", "dojo/_base/lang",
"dojo/_base/array"], function (r, p, a) {
                r = p.getObject("dojox.collections", !0);
                r.DictionaryEntry = function (a, q) {
                    this.key = a;
                    this.value = q;
                    this.valueOf = function () {
                        return this.value
                    };
                    this.toString = function () {
                        return String(this.value)
                    }
                };
                r.Iterator = function (g) {
                    var q = 0;
                    this.element = g[q] || null;
                    this.atEnd = function () {
                        return q >= g.length
                    };
                    this.get = function () {
                        return this.atEnd() ? null : this.element = g[q++]
                    };
                    this.map = function (h, k) {
                        return a.map(g, h, k)
                    };
                    this.reset = function () {
                        q = 0;
                        this.element = g[q]
                    }
                };
                r.DictionaryIterator = function (g) {
                    var q = [],
                        h = {},
                        k;
                    for (k in g) h[k] || q.push(g[k]);
                    var l = 0;
                    this.element = q[l] || null;
                    this.atEnd = function () {
                        return l >= q.length
                    };
                    this.get = function () {
                        return this.atEnd() ? null : this.element = q[l++]
                    };
                    this.map = function (e, c) {
                        return a.map(q, e, c)
                    };
                    this.reset = function () {
                        l = 0;
                        this.element = q[l]
                    }
                };
                return r
            })
        },
        "esri/layers/ArcGISMapServiceLayer": function () {
            define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../request ../SpatialReference ../geometry/Extent ./LayerInfo".split(" "), function (r,
                p, a, g, q, h, k, l, e, c) {
                r = r(null, {
                    declaredClass: "esri.layers.ArcGISMapServiceLayer",
                    infoTemplates: null,
                    constructor: function (a, c) {
                        this.layerInfos = [];
                        c && (this.infoTemplates = c.infoTemplates || null);
                        var e = this._params = {},
                            g = this._url.query ? this._url.query.token : null;
                        g && (e.token = g)
                    },
                    setInfoTemplates: function (a) {
                        this.infoTemplates = a
                    },
                    _load: function () {
                        k({
                            url: this._url.path,
                            content: p.mixin({
                                f: "json"
                            }, this._params),
                            callbackParamName: "callback",
                            load: this._initLayer,
                            error: this._errorHandler
                        })
                    },
                    spatialReference: null,
                    initialExtent: null,
                    fullExtent: null,
                    description: null,
                    units: null,
                    _initLayer: function (b, d) {
                        try {
                            this._findCredential();
                            (this.credential && this.credential.ssl || b && b._ssl) && this._useSSL();
                            this.description = b.description;
                            this.copyright = b.copyrightText;
                            this.spatialReference = b.spatialReference && new l(b.spatialReference);
                            this.initialExtent = b.initialExtent && new e(b.initialExtent);
                            this.fullExtent = b.fullExtent && new e(b.fullExtent);
                            this.units = b.units;
                            this.maxRecordCount = b.maxRecordCount;
                            this.maxImageHeight = b.maxImageHeight;
                            this.maxImageWidth = b.maxImageWidth;
                            this.supportsDynamicLayers = b.supportsDynamicLayers;
                            var m = this.layerInfos = [],
                                g = b.layers,
                                s = this._defaultVisibleLayers = [];
                            a.forEach(g, function (a, b) {
                                m[b] = new c(a);
                                a.defaultVisibility && s.push(a.id)
                            });
                            this.visibleLayers || (this.visibleLayers = s);
                            this.version = b.currentVersion;
                            this.version || (this.version = "capabilities" in b || "tables" in b ? 10 : "supportedImageFormatTypes" in b ? 9.31 : 9.3);
                            this.capabilities = b.capabilities;
                            h.isDefined(b.minScale) && !this._hasMin && this.setMinScale(b.minScale);
                            h.isDefined(b.maxScale) && !this._hasMax && this.setMaxScale(b.maxScale)
                        } catch (n) {
                            this._errorHandler(n)
                        }
                    }
                });
                g("extend-esri") && p.setObject("layers.ArcGISMapServiceLayer", r, q);
                return r
            })
        },
        "esri/layers/LayerInfo": function () {
            define(["dojo/_base/declare", "dojo/_base/lang", "dojo/has", "../kernel", "../lang"], function (r, p, a, g, q) {
                r = r(null, {
                    declaredClass: "esri.layers.LayerInfo",
                    constructor: function (a) {
                        p.mixin(this, a)
                    },
                    toJson: function () {
                        return q.fixJson({
                            defaultVisibility: this.defaultVisibility,
                            id: this.id,
                            maxScale: this.maxScale,
                            minScale: this.minScale,
                            name: this.name,
                            parentLayerId: this.parentLayerId,
                            subLayerIds: this.subLayerIds
                        })
                    }
                });
                a("extend-esri") && p.setObject("layers.LayerInfo", r, g);
                return r
            })
        },
        "esri/layers/TimeInfo": function () {
            define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../TimeExtent ./TimeReference ./LayerTimeOptions".split(" "), function (r, p, a, g, q, h, k) {
                r = r(null, {
                    declaredClass: "esri.layers.TimeInfo",
                    constructor: function (a) {
                        null !== a && (p.mixin(this, a), a.exportOptions && (this.exportOptions = new k(a.exportOptions)),
                            this.timeExtent = null, a.timeExtent && 2 === a.timeExtent.length && (this.timeExtent = new q(a.timeExtent)), this.timeReference = new h(a.timeReference))
                    }
                });
                p.mixin(r, {
                    UNIT_CENTURIES: "esriTimeUnitsCenturies",
                    UNIT_DAYS: "esriTimeUnitsDays",
                    UNIT_DECADES: "esriTimeUnitsDecades",
                    UNIT_HOURS: "esriTimeUnitsHours",
                    UNIT_MILLISECONDS: "esriTimeUnitsMilliseconds",
                    UNIT_MINUTES: "esriTimeUnitsMinutes",
                    UNIT_MONTHS: "esriTimeUnitsMonths",
                    UNIT_SECONDS: "esriTimeUnitsSeconds",
                    UNIT_UNKNOWN: "esriTimeUnitsUnknown",
                    UNIT_WEEKS: "esriTimeUnitsWeeks",
                    UNIT_YEARS: "esriTimeUnitsYears"
                });
                a("extend-esri") && p.setObject("layers.TimeInfo", r, g);
                return r
            })
        },
        "esri/TimeExtent": function () {
            define(["dojo/_base/declare", "dojo/_base/lang", "dojo/has", "./kernel"], function (r, p, a, g) {
                var q = r(null, {
                    declaredClass: "esri.TimeExtent",
                    constructor: function (a) {
                        if (1 < arguments.length) this._create(arguments[0], arguments[1]);
                        else if (a)
                            if (p.isArray(a)) {
                                var g = a[0],
                                    l = a[1];
                                this.startTime = null === g || "null" === g ? null : new Date(g);
                                this.endTime = null === l || "null" === l ? null : new Date(l)
                            } else a instanceof
                        Date && this._create(a, null)
                    },
                    offset: function (a, g) {
                        var l = new q,
                            e = this.startTime,
                            c = this.endTime;
                        e && (l.startTime = this._getOffsettedDate(e, a, g));
                        c && (l.endTime = this._getOffsettedDate(c, a, g));
                        return l
                    },
                    intersection: function (a) {
                        return this._intersection(this, a)
                    },
                    toJson: function () {
                        var a = [],
                            g = this.startTime;
                        a.push(g ? g.getTime() : "null");
                        g = this.endTime;
                        a.push(g ? g.getTime() : "null");
                        return a
                    },
                    _create: function (a, g) {
                        this.startTime = a ? new Date(a.getTime()) : null;
                        this.endTime = g ? new Date(g.getTime()) : null
                    },
                    _refData: {
                        esriTimeUnitsMilliseconds: {
                            getter: "getUTCMilliseconds",
                            setter: "setUTCMilliseconds",
                            multiplier: 1
                        },
                        esriTimeUnitsSeconds: {
                            getter: "getUTCSeconds",
                            setter: "setUTCSeconds",
                            multiplier: 1
                        },
                        esriTimeUnitsMinutes: {
                            getter: "getUTCMinutes",
                            setter: "setUTCMinutes",
                            multiplier: 1
                        },
                        esriTimeUnitsHours: {
                            getter: "getUTCHours",
                            setter: "setUTCHours",
                            multiplier: 1
                        },
                        esriTimeUnitsDays: {
                            getter: "getUTCDate",
                            setter: "setUTCDate",
                            multiplier: 1
                        },
                        esriTimeUnitsWeeks: {
                            getter: "getUTCDate",
                            setter: "setUTCDate",
                            multiplier: 7
                        },
                        esriTimeUnitsMonths: {
                            getter: "getUTCMonth",
                            setter: "setUTCMonth",
                            multiplier: 1
                        },
                        esriTimeUnitsYears: {
                            getter: "getUTCFullYear",
                            setter: "setUTCFullYear",
                            multiplier: 1
                        },
                        esriTimeUnitsDecades: {
                            getter: "getUTCFullYear",
                            setter: "setUTCFullYear",
                            multiplier: 10
                        },
                        esriTimeUnitsCenturies: {
                            getter: "getUTCFullYear",
                            setter: "setUTCFullYear",
                            multiplier: 100
                        }
                    },
                    _intersection: function (a, g) {
                        if (a && g) {
                            var l = a.startTime,
                                e = a.endTime,
                                c = g.startTime,
                                b = g.endTime,
                                l = l ? l.getTime() : -Infinity,
                                c = c ? c.getTime() : -Infinity,
                                e = e ? e.getTime() : Infinity,
                                b = b ? b.getTime() : Infinity,
                                d, m;
                            c >= l && c <= e ? d = c : l >= c && l <= b && (d = l);
                            e >= c && e <= b ? m =
                                e : b >= l && b <= e && (m = b);
                            if (!isNaN(d) && !isNaN(m)) return l = new q, l.startTime = -Infinity === d ? null : new Date(d), l.endTime = Infinity === m ? null : new Date(m), l
                        }
                        return null
                    },
                    _getOffsettedDate: function (a, g, l) {
                        var e = this._refData;
                        a = new Date(a.getTime());
                        g && l && (e = e[l], a[e.setter](a[e.getter]() + g * e.multiplier));
                        return a
                    }
                });
                a("extend-esri") && (g.TimeExtent = q);
                return q
            })
        },
        "esri/layers/TimeReference": function () {
            define(["dojo/_base/declare", "dojo/_base/lang", "dojo/has", "../kernel"], function (r, p, a, g) {
                r = r(null, {
                    declaredClass: "esri.layers.TimeReference",
                    constructor: function (a) {
                        a && p.mixin(this, a)
                    }
                });
                a("extend-esri") && p.setObject("layers.TimeReference", r, g);
                return r
            })
        },
        "esri/layers/LayerTimeOptions": function () {
            define(["dojo/_base/declare", "dojo/_base/lang", "dojo/has", "../kernel", "../lang"], function (r, p, a, g, q) {
                r = r(null, {
                    declaredClass: "esri.layers.LayerTimeOptions",
                    constructor: function (a) {
                        a && p.mixin(this, a)
                    },
                    toJson: function () {
                        return q.fixJson({
                            timeDataCumulative: this.timeDataCumulative,
                            timeOffset: this.timeOffset,
                            timeOffsetUnits: this.timeOffsetUnits,
                            useTime: this.useTime
                        })
                    }
                });
                a("extend-esri") && p.setObject("layers.LayerTimeOptions", r, g);
                return r
            })
        },
        "esri/layers/TileMap": function () {
            define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/Deferred dojo/io-query ../request ../urlUtils ../sniff".split(" "), function (r, p, a, g, q, h, k, l) {
                var e = l("esri-iphone");
                return r(null, {
                    declaredClass: "esri.layers.TileMap",
                    constructor: function (a) {
                        this.layer = a;
                        this._tileMaps = {}
                    },
                    getTile: function (a, b, d, e, g) {
                        a = {
                            id: e,
                            level: a,
                            row: b,
                            col: d
                        };
                        b = this._getResamplingBudget();
                        0 < b ? this._process({
                            tile: a,
                            requestedTile: a,
                            callback: g,
                            resamplingBudget: b
                        }) : (g || this.callback).call(this, a, a)
                    },
                    statusOf: function (a, b, d) {
                        var e = this._getResamplingBudget();
                        a = {
                            level: a,
                            row: b,
                            col: d
                        };
                        if (0 === e) return 1;
                        for (; 0 <= e;) {
                            b = this._tileToTileMap(a);
                            if (!this._tileMaps[b.uid]) return -1;
                            b = this._tileMaps[b.uid];
                            if (!b.promise.isFulfilled()) return -1;
                            if (this._isTileAvailable(a, b)) return 1;
                            a = this._parentTile(a);
                            if (!a) break;
                            e--
                        }
                        return 0
                    },
                    style: function (a, b) {
                        if (!(a.level === b.level && a.row === b.row && a.col === b.col)) {
                            for (var d =
                                    this.layer.tileInfo, g = d.lods, h = d.cols, d = d.rows, s, n, f = g.length - 1; !s || !n;) !s && g[f].level === a.level && (s = g[f]), !n && g[f].level === b.level && (n = g[f]), f--;
                            s = Math.round(s.resolution / n.resolution);
                            n = -1 * b.col % s * h;
                            g = -1 * b.row % s * d;
                            s = {
                                width: h * s + "px",
                                height: d * s + "px",
                                margin: g + "px 0 0 " + n + "px",
                                "will-change": "transform"
                            };
                            e && (n = 0 === n ? 0 : -1 * n, g = 0 === g ? 0 : -1 * g, s.clip = "rect(" + g + "px," + (n + h) + "px," + (g + d) + "px," + n + "px)");
                            return s
                        }
                    },
                    _process: function (a) {
                        var b = a.tile,
                            d = this._tileToTileMap(b),
                            e = this._parentTile(b);
                        this._getTileMap(d).then(p.hitch(this,
                            function (g) {
                                d = g;
                                this._isTileAvailable(b, d) ? (a.callback || this.callback).call(this, b, a.requestedTile) : 0 < a.resamplingBudget && e ? (a.resamplingBudget--, a.tile = e, this._process(a)) : (a.callback || this.callback).call(this, a.requestedTile, a.requestedTile)
                            }), p.hitch(this, function () {
                            (a.callback || this.callback).call(this, a.requestedTile, a.requestedTile)
                        }))
                    },
                    _getTileMap: function (a) {
                        var b, d, e, k, s = null;
                        this._tileMaps[a.uid] ? (a = this._tileMaps[a.uid], b = a.promise) : (this._tileMaps[a.uid] = a, d = new g, h({
                            url: this._getTileMapUrl(a.level,
                                a.row, a.col),
                            handleAs: "json",
                            callbackParamName: "callback",
                            timeout: 3E3,
                            load: function (b) {
                                p.mixin(a, b);
                                if (a.data && 0 < a.data.length) {
                                    k = a.data.length;
                                    if (1 === k) s = a.data[0];
                                    else {
                                        s = a.data[0];
                                        for (e = 1; e < k; e++)
                                            if (a.data[e] !== s) {
                                                s = null;
                                                break
                                            }
                                    }
                                    null !== s && (delete a.data, a.value = s)
                                }
                                d.resolve(a)
                            },
                            error: function (a) {
                                d.reject()
                            }
                        }), b = a.promise = d.promise);
                        return b
                    },
                    _parentTile: function (c) {
                        var b = this.layer.tileInfo.lods,
                            d, e, g = null;
                        a.some(b, function (a, b) {
                            return c.level === a.level ? (d = a, e = b, !0) : !1
                        });
                        0 < e && (b = b[e - 1], g = {
                            id: c.id,
                            level: b.level,
                            row: Math.floor(c.row * d.resolution / b.resolution + 0.01),
                            col: Math.floor(c.col * d.resolution / b.resolution + 0.01)
                        });
                        return g
                    },
                    _tileToTileMap: function (a) {
                        var b = 8 * Math.floor(a.row / 8),
                            d = 8 * Math.floor(a.col / 8);
                        return {
                            uid: a.level + "_" + b + "_" + d,
                            level: a.level,
                            row: b,
                            col: d
                        }
                    },
                    _isTileAvailable: function (a, b) {
                        var d, e;
                        b.valid ? void 0 !== b.value ? d = b.value : (d = b.location.left, e = b.location.top, d = (a.row - e) * b.location.width + (a.col - d), d = d < b.data.length ? b.data[d] : 0) : d = 0;
                        return d
                    },
                    _getTileMapUrl: function (a, b, d) {
                        var e =
                            this.layer,
                            g = e.tileServers,
                            s = e._getToken(),
                            n = e._url.query;
                        a = (g ? g[b % g.length] : e._url.path) + "/tilemap/" + a + "/" + b + "/" + d + "/8/8";
                        n && (a += "?" + q.objectToQuery(n));
                        if (s && (!n || !n.token)) a += (-1 === a.indexOf("?") ? "?" : "\x26") + "token\x3d" + s;
                        return a = e.addTimestampToURL(a)
                    },
                    _getResamplingBudget: function () {
                        var a = this.layer,
                            b = 0;
                        if (a.resampling && (b = a._resamplingTolerance, null === b || void 0 === b)) b = a.tileInfo.lods.length;
                        return b
                    }
                })
            })
        },
        "esri/layers/MapImageLayer": function () {
            define("dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/dom-construct dojo/dom-style ../kernel ../config ../sniff ../domUtils ../geometry/Point ../geometry/webMercatorUtils ./layer".split(" "),
                function (r, p, a, g, q, h, k, l, e, c, b, d, m) {
                    var t = r([m], {
                        declaredClass: "esri.layers.MapImageLayer",
                        "-chains-": {
                            constructor: "manual"
                        },
                        constructor: function (b) {
                            this.inherited(arguments, [null, b]);
                            this._mapImages = [];
                            var c = a.hitch;
                            this._panStart = c(this, this._panStart);
                            this._pan = c(this, this._pan);
                            this._extentChange = c(this, this._extentChange);
                            this._zoom = c(this, this._zoom);
                            this._zoomStart = c(this, this._zoomStart);
                            this._scale = c(this, this._scale);
                            this._resize = c(this, this._resize);
                            p.connect(this, "onSuspend", this, this._onSuspend);
                            p.connect(this, "onResume", this, this._onResume);
                            this.loaded = !0;
                            this.onLoad(this)
                        },
                        opacity: 1,
                        addImage: function (a) {
                            var b = this._mapImages.push(a),
                                b = b - 1;
                            a._idx = b;
                            a._layer = this;
                            this._div && this._createImage(a, b)
                        },
                        removeImage: function (a) {
                            if (a) {
                                var b = a._idx,
                                    c = this._mapImages;
                                if (c[b] === a) {
                                    delete c[b];
                                    if (b = a._node) this._clearEvents(b), b.e_idx = b.e_bl = b.e_tr = b.e_l = b.e_t = b.e_w = b.e_h = null, b.parentNode && (b.parentNode.removeChild(b), q.destroy(b));
                                    a._node = a._idx = a._layer = null
                                }
                            }
                        },
                        removeAllImages: function () {
                            var a = this._mapImages,
                                b, c = a.length;
                            for (b = 0; b < c; b++) {
                                var d = a[b];
                                d && this.removeImage(d)
                            }
                            this._mapImages = []
                        },
                        getImages: function () {
                            var a = this._mapImages,
                                b = [],
                                c, d = a.length;
                            for (c = 0; c < d; c++) a[c] && b.push(a[c]);
                            return b
                        },
                        setOpacity: function (a) {
                            this.opacity != a && (this._opacityChanged(this.opacity = a), this.onOpacityChange())
                        },
                        onOpacityChange: function () {},
                        _opacityChanged: function (a) {
                            var b = this._div,
                                c, d;
                            if (b)
                                if (!e("ie") || 8 < e("ie")) h.set(b, "opacity", a);
                                else {
                                    d = b.childNodes;
                                    c = d.length;
                                    for (b = 0; b < c; b++) h.set(d[b], "opacity", a)
                                }
                        },
                        _createImage: function (a,
                            b) {
                            var c = q.create("img");
                            h.set(c, {
                                position: "absolute"
                            });
                            1 > a.opacity ? h.set(c, "opacity", a.opacity) : 8 >= e("ie") && h.set(c, "opacity", this.opacity);
                            a.rotation && !(9 > e("ie")) && h.set(c, k._css.names.transform, k._css.rotate(360 - a.rotation));
                            a._node = c;
                            c.e_idx = b;
                            c.e_layer = this;
                            c.e_load = p.connect(c, "onload", t.prototype._imageLoaded);
                            c.e_error = p.connect(c, "onerror", t.prototype._imageError);
                            c.e_abort = p.connect(c, "onabort", t.prototype._imageError);
                            c.src = a.href
                        },
                        _imageLoaded: function (a, b) {
                            var c = b || a.target || a.currentTarget,
                                d = c.e_layer,
                                e = d._mapImages[c.e_idx],
                                g = d._map;
                            g && (g.__zooming || g.__panning || !d._sr) ? d._standby.push(c) : (d._clearEvents(c), e && e._node === c && g && d._attach(e))
                        },
                        _imageError: function (a) {
                            a = a.target || a.currentTarget;
                            var b = a.e_layer,
                                c = b._mapImages[a.e_idx];
                            b._clearEvents(a);
                            c && (c._node = null)
                        },
                        _clearEvents: function (a) {
                            var b = p.disconnect;
                            b(a.e_load);
                            b(a.e_error);
                            b(a.e_abort);
                            a.e_load = a.e_error = a.e_abort = a.e_layer = null
                        },
                        _attach: function (a) {
                            var c = a.extent,
                                f = c.spatialReference,
                                e = this._sr,
                                g = this._div,
                                m = a._node,
                                h =
                                new b({
                                    x: c.xmin,
                                    y: c.ymin,
                                    spatialReference: f
                                }),
                                c = new b({
                                    x: c.xmax,
                                    y: c.ymax,
                                    spatialReference: f
                                });
                            e.equals(f) || (e.isWebMercator() && 4326 === f.wkid ? (h = d.geographicToWebMercator(h), c = d.geographicToWebMercator(c)) : f.isWebMercator() && 4326 === e.wkid && (h = d.webMercatorToGeographic(h), c = d.webMercatorToGeographic(c)));
                            m.e_bl = h;
                            m.e_tr = c;
                            a.visible && (this._setPos(m, g._left, g._top), (this._active || g).appendChild(m))
                        },
                        _setPos: function (a, b, c) {
                            var d = a.e_bl,
                                e = a.e_tr,
                                g = this._map,
                                d = g.toScreen(d),
                                e = g.toScreen(e);
                            b = d.x - b;
                            c = e.y -
                                c;
                            var m = Math.abs(e.x - d.x),
                                d = Math.abs(d.y - e.y),
                                e = {
                                    width: m + "px",
                                    height: d + "px"
                                },
                                t = this._mapImages[a.e_idx];
                            "css-transforms" === g.navigationMode ? e[k._css.names.transform] = k._css.translate(b, c) + (t.rotation ? " " + k._css.rotate(360 - t.rotation) : "") : (e.left = b + "px", e.top = c + "px");
                            h.set(a, e);
                            a.e_l = b;
                            a.e_t = c;
                            a.e_w = m;
                            a.e_h = d
                        },
                        managedSuspension: !0,
                        _setMap: function (a, b) {
                            this.inherited(arguments);
                            var f = this._div = q.create("div", null, b),
                                d = k._css.names,
                                g = {
                                    position: "absolute"
                                },
                                m = a.__visibleDelta;
                            if (!e("ie") || 8 < e("ie")) g.opacity =
                                this.opacity;
                            "css-transforms" === a.navigationMode ? (g[d.transform] = k._css.translate(m.x, m.y), h.set(f, g), f._left = m.x, f._top = m.y, g = {
                                position: "absolute",
                                width: a.width + "px",
                                height: a.height + "px",
                                overflow: "visible"
                            }, this._active = q.create("div", null, f), h.set(this._active, g), this._passive = q.create("div", null, f), h.set(this._passive, g)) : (f._left = 0, f._top = 0, h.set(f, g));
                            this._standby = [];
                            d = this._mapImages;
                            m = d.length;
                            for (g = 0; g < m; g++) {
                                var t = d[g];
                                t._node || this._createImage(t, t._idx)
                            }
                            c.hide(f);
                            return f
                        },
                        _unsetMap: function (a,
                            b) {
                            this._disconnect();
                            var c = this._div;
                            if (c) {
                                var d = this._mapImages,
                                    e, g = d.length;
                                for (e = 0; e < g; e++) {
                                    var m = d[e];
                                    if (m) {
                                        var h = m._node;
                                        h && (this._clearEvents(h), h.e_idx = h.e_bl = h.e_tr = h.e_l = h.e_t = h.e_w = h.e_h = null);
                                        m._node = null
                                    }
                                }
                                b.removeChild(c);
                                q.destroy(c)
                            }
                            this._map = this._div = this._sr = this._active = this._passive = this._standby = null;
                            this.inherited(arguments)
                        },
                        _onSuspend: function () {
                            this._disconnect();
                            c.hide(this._div)
                        },
                        _onResume: function (a) {
                            a.firstOccurrence && (this._sr = this._map.spatialReference, this._processStandbyList());
                            a = this._map;
                            var b = this._div,
                                f = a.__visibleDelta;
                            "css-transforms" === a.navigationMode && (b._left = f.x, b._top = f.y, h.set(b, k._css.names.transform, k._css.translate(b._left, b._top)));
                            this._redraw("css-transforms" === a.navigationMode);
                            this._connect(a);
                            c.show(b)
                        },
                        _connect: function (a) {
                            if (!this._connections) {
                                var b = p.connect,
                                    c = "css-transforms" === a.navigationMode;
                                this._connections = [b(a, "onPanStart", this._panStart), b(a, "onPan", this._pan), b(a, "onExtentChange", this._extentChange), c && b(a, "onZoomStart", this._zoomStart),
c ? b(a, "onScale", this._scale) : b(a, "onZoom", this._zoom), c && b(a, "onResize", this._resize)]
                            }
                        },
                        _disconnect: function () {
                            this._connections && (g.forEach(this._connections, p.disconnect), this._connections = null)
                        },
                        _panStart: function () {
                            this._panL = this._div._left;
                            this._panT = this._div._top
                        },
                        _pan: function (a, b) {
                            var c = this._div;
                            c._left = this._panL + b.x;
                            c._top = this._panT + b.y;
                            "css-transforms" === this._map.navigationMode ? h.set(c, k._css.names.transform, k._css.translate(c._left, c._top)) : h.set(c, {
                                left: c._left + "px",
                                top: c._top +
                                    "px"
                            })
                        },
                        _extentChange: function (a, b, c) {
                            c ? this._redraw("css-transforms" === this._map.navigationMode) : b && this._pan(a, b);
                            this._processStandbyList()
                        },
                        _processStandbyList: function () {
                            var a, b = this._standby;
                            if (b && b.length)
                                for (a = b.length - 1; 0 <= a; a--) this._imageLoaded(null, b[a]), b.splice(a, 1)
                        },
                        _redraw: function (a) {
                            if (a) {
                                a = this._passive;
                                var b = k._css.names;
                                h.set(a, b.transition, "none");
                                this._moveImages(a, this._active);
                                h.set(a, b.transform, "none")
                            }
                            a = this._active || this._div;
                            var b = this._div._left,
                                c = this._div._top,
                                d, e =
                                a.childNodes.length,
                                g;
                            for (d = 0; d < e; d++) g = a.childNodes[d], this._setPos(g, b, c)
                        },
                        _zoom: function (a, b, c) {
                            a = this._div;
                            var d = a._left,
                                e = a._top,
                                g, m = a.childNodes.length,
                                k;
                            for (g = 0; g < m; g++) {
                                k = a.childNodes[g];
                                var t = k.e_w * b,
                                    l = k.e_h * b,
                                    q = (c.x - d - k.e_l) * (t - k.e_w) / k.e_w,
                                    p = (c.y - e - k.e_t) * (l - k.e_h) / k.e_h,
                                    q = isNaN(q) ? 0 : q,
                                    p = isNaN(p) ? 0 : p;
                                h.set(k, {
                                    left: k.e_l - q + "px",
                                    top: k.e_t - p + "px",
                                    width: t + "px",
                                    height: l + "px"
                                })
                            }
                        },
                        _zoomStart: function () {
                            this._moveImages(this._active, this._passive)
                        },
                        _moveImages: function (a, b) {
                            var c = a.childNodes,
                                d;
                            d = c.length;
                            if (0 < d)
                                for (d -= 1; 0 <= d; d--) b.appendChild(c[d])
                        },
                        _scale: function (a, b) {
                            var c = k._css.names,
                                d = this._passive;
                            h.set(d, c.transition, b ? "none" : c.transformName + " " + l.defaults.map.zoomDuration + "ms ease");
                            k._css.matrix(a);
                            h.set(d, c.transform, k._css.matrix(a))
                        },
                        _resize: function (a, b, c) {
                            h.set(this._active, {
                                width: b + "px",
                                height: c + "px"
                            });
                            h.set(this._passive, {
                                width: b + "px",
                                height: c + "px"
                            })
                        }
                    });
                    e("extend-esri") && a.setObject("layers.MapImageLayer", t, k);
                    return t
                })
        },
        "esri/layers/OpenStreetMapLayer": function () {
            define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../urlUtils ../SpatialReference ../geometry/Extent ./TiledMapServiceLayer ./TileInfo".split(" "),
                function (r, p, a, g, q, h, k, l, e) {
                    r = r(l, {
                        declaredClass: "esri.layers.OpenStreetMapLayer",
                        constructor: function (a) {
                            this.spatialReference = new h({
                                wkid: 102100
                            });
                            this.tileInfo = new e({
                                rows: 256,
                                cols: 256,
                                dpi: 96,
                                format: "PNG8",
                                compressionQuality: 0,
                                origin: {
                                    x: -2.0037508342787E7,
                                    y: 2.0037508342787E7
                                },
                                spatialReference: {
                                    wkid: 102100
                                },
                                lods: [{
                                        level: 0,
                                        scale: 5.91657527591555E8,
                                        resolution: 156543.033928
                                    }, {
                                        level: 1,
                                        scale: 2.95828763795777E8,
                                        resolution: 78271.5169639999
                                    }, {
                                        level: 2,
                                        scale: 1.47914381897889E8,
                                        resolution: 39135.7584820001
                                    },
                                    {
                                        level: 3,
                                        scale: 7.3957190948944E7,
                                        resolution: 19567.8792409999
                                    }, {
                                        level: 4,
                                        scale: 3.6978595474472E7,
                                        resolution: 9783.93962049996
                                    }, {
                                        level: 5,
                                        scale: 1.8489297737236E7,
                                        resolution: 4891.96981024998
                                    }, {
                                        level: 6,
                                        scale: 9244648.868618,
                                        resolution: 2445.98490512499
                                    }, {
                                        level: 7,
                                        scale: 4622324.434309,
                                        resolution: 1222.99245256249
                                    }, {
                                        level: 8,
                                        scale: 2311162.217155,
                                        resolution: 611.49622628138
                                    }, {
                                        level: 9,
                                        scale: 1155581.108577,
                                        resolution: 305.748113140558
                                    }, {
                                        level: 10,
                                        scale: 577790.554289,
                                        resolution: 152.874056570411
                                    }, {
                                        level: 11,
                                        scale: 288895.277144,
                                        resolution: 76.4370282850732
                                    }, {
                                        level: 12,
                                        scale: 144447.638572,
                                        resolution: 38.2185141425366
                                    }, {
                                        level: 13,
                                        scale: 72223.819286,
                                        resolution: 19.1092570712683
                                    }, {
                                        level: 14,
                                        scale: 36111.909643,
                                        resolution: 9.55462853563415
                                    }, {
                                        level: 15,
                                        scale: 18055.954822,
                                        resolution: 4.77731426794937
                                    }, {
                                        level: 16,
                                        scale: 9027.977411,
                                        resolution: 2.38865713397468
                                    }, {
                                        level: 17,
                                        scale: 4513.988705,
                                        resolution: 1.19432856685505
                                    }, {
                                        level: 18,
                                        scale: 2256.994353,
                                        resolution: 0.597164283559817
                                    }, {
                                        level: 19,
                                        scale: 1128.497176,
                                        resolution: 0.298582141647617
                                    }]
                            });
                            this.fullExtent =
                                new k({
                                    xmin: -2.003750834E7,
                                    ymin: -2.003750834E7,
                                    xmax: 2.003750834E7,
                                    ymax: 2.003750834E7,
                                    spatialReference: {
                                        wkid: 102100
                                    }
                                });
                            this.initialExtent = new k({
                                xmin: -2.003750834E7,
                                ymin: -2.003750834E7,
                                xmax: 2.003750834E7,
                                ymax: 2.003750834E7,
                                spatialReference: {
                                    wkid: 102100
                                }
                            });
                            this.tileServers = a && a.tileServers || ["//a.tile.openstreetmap.org", "//b.tile.openstreetmap.org", "//c.tile.openstreetmap.org"];
                            this.serversLength = this.tileServers.length;
                            this._displayLevels = a ? a.displayLevels : null;
                            this.copyright = a && a.copyright || "Map data \u00a9 OpenStreetMap contributors, CC-BY-SA";
                            this.loaded = !0;
                            this.onLoad(this);
                            (a = a && a.loadCallback) && a(this)
                        },
                        getTileUrl: function (a, b, d) {
                            a = this.tileServers[b % this.serversLength] + "/" + a + "/" + d + "/" + b + ".png";
                            a = q.normalize(a);
                            a = this.addTimestampToURL(a);
                            return q.addProxy(a)
                        }
                    });
                    a("extend-esri") && p.setObject("layers.OpenStreetMapLayer", r, g);
                    return r
                })
        },
        "esri/layers/VectorTileLayer": function () {
            (function () {
                var r = function () {
                        var a;
                        try {
                            a = window.WebGLRenderingContext
                        } catch (g) {
                            a = !1
                        }
                        var q;
                        try {
                            for (var h = document.createElement("canvas"), k = ["webgl", "experimental-webgl",
"webkit-3d", "moz-webgl"], l = null, e = 0; e < k.length; ++e) {
                                try {
                                    l = h.getContext(k[e])
                                } catch (c) {}
                                if (l) break
                            }
                            q = l
                        } catch (b) {
                            q = !1
                        }
                        return !a || !q ? !1 : !0
                    }(),
                    p = ["dojo/_base/lang", "dojo/has", "dojo/Deferred", "../sniff", "./layer"];
                r && p.push("./VectorTileLayerImpl");
                define(p, function (a, g, q, h, k, l) {
                    k = l ? l : k.createSubclass({
                        declaredClass: "esri.layers.VectorTileLayer",
                        constructor: function () {
                            var e = new q;
                            e.reject(Error("esri.layers.VectorTileLayer is not supported"));
                            e.promise.otherwise(a.hitch(this, function (a) {
                                this._errorHandler(a)
                            }))
                        }
                    });
                    k.ACCESS_TOKEN = null;
                    k.supported = function () {
                        return r
                    };
                    g("extend-esri") && a.setObject("layers.VectorTileLayer", k, h);
                    return k
                })
            })()
        },
        "esri/dijit/Popup": function () {
            define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/kernel dojo/has dojo/window dojo/Stateful dojo/query dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dijit/registry ../kernel ../lang ../domUtils ../geometry/Polyline ../geometry/Polygon ../geometry/normalizeUtils ../InfoWindowBase ../PopupBase dojo/i18n!../nls/jsapi dojo/NodeList-dom dojo/has!extend-esri?./PopupTemplate dojo/has!extend-esri?./PopupRenderer".split(" "),
                function (r, p, a, g, q, h, k, l, e, c, b, d, m, t, s, n, f, y, u, w, C, x, v, A, z) {
                    r = r([v, A, l], {
                        declaredClass: "esri.dijit.Popup",
                        offsetX: 3,
                        offsetY: 3,
                        zoomFactor: 4,
                        marginLeft: 25,
                        marginTop: 25,
                        highlight: !0,
                        pagingControls: !0,
                        pagingInfo: !0,
                        keepHighlightOnHide: !1,
                        popupWindow: !0,
                        titleInBody: !0,
                        anchor: "auto",
                        visibleWhenEmpty: !0,
                        hideDelay: 1E3,
                        location: null,
                        constructor: function (a, f) {
                            this.initialize();
                            p.mixin(this, a);
                            this.domNode = c.byId(f);
                            var e = this._nls = p.mixin({}, z.widgets.popup),
                                m = this.domNode;
                            d.add(m, "esriPopup");
                            (this._isRTL = !t.isBodyLtr()) && s.set(m, "direction", "rtl");
                            b.set(m, "innerHTML", "\x3cdiv class\x3d'esriPopupWrapper' style\x3d'position: absolute;'\x3e\x3cdiv class\x3d'sizer'\x3e\x3cdiv class\x3d'titlePane'\x3e\x3cdiv class\x3d'spinner hidden' title\x3d'" + e.NLS_searching + "...'\x3e\x3c/div\x3e\x3cdiv class\x3d'title'\x3e\x3c/div\x3e\x3cdiv class\x3d'titleButton prev hidden' title\x3d'" + e.NLS_prevFeature + "'\x3e\x3c/div\x3e\x3cdiv class\x3d'titleButton next hidden' title\x3d'" + e.NLS_nextFeature + "'\x3e\x3c/div\x3e\x3cdiv class\x3d'titleButton maximize' title\x3d'" +
                                e.NLS_maximize + "'\x3e\x3c/div\x3e\x3cdiv class\x3d'titleButton close' title\x3d'" + e.NLS_close + "'\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'sizer content'\x3e\x3cdiv class\x3d'contentPane'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'sizer'\x3e\x3cdiv class\x3d'actionsPane'\x3e\x3cdiv class\x3d'actionList hidden'\x3e\x3ca title\x3d" + e.NLS_zoomTo + " class\x3d'action zoomTo' href\x3d'javascript:void(0);'\x3e\x3cspan\x3e" + e.NLS_zoomTo + "\x3c/span\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'pointer hidden'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'outerPointer hidden'\x3e\x3c/div\x3e");
                            this._sizers = q.query(".sizer", m);
                            e = q.query(".titlePane", m)[0];
                            c.setSelectable(e, !1);
                            this._title = q.query(".title", e)[0];
                            this._prevFeatureButton = q.query(".prev", e)[0];
                            this._nextFeatureButton = q.query(".next", e)[0];
                            this._maxButton = q.query(".maximize", e)[0];
                            this._spinner = q.query(".spinner", e)[0];
                            this._contentPane = q.query(".contentPane", m)[0];
                            this._positioner = q.query(".esriPopupWrapper", m)[0];
                            this._pointer = q.query(".pointer", m)[0];
                            this._outerPointer = q.query(".outerPointer", m)[0];
                            this._actionList = q.query(".actionsPane .actionList",
                                m)[0];
                            this._eventConnections = [g.connect(q.query(".close", e)[0], "onclick", this, this.hide), g.connect(this._prevFeatureButton, "onclick", this, this.selectPrevious), g.connect(this._nextFeatureButton, "onclick", this, this.selectNext), g.connect(this._maxButton, "onclick", this, this._toggleSize), g.connect(q.query(".zoomTo", this._actionList)[0], "onclick", this, this._zoomToFeature), g.connect(this, "onClearFeatures", this, this._featuresCleared), g.connect(this, "onSelectionChange", this, this._featureSelected), g.connect(this,
                                "onDfdComplete", this, this._updateUI)];
                            h("esri-touch") && (m = u.setScrollable(this._contentPane), this._eventConnections.push(m[0], m[1]));
                            this._toggleVisibility(!1)
                        },
                        onMaximize: function () {},
                        onRestore: function () {},
                        setMap: function (a) {
                            this.inherited(arguments);
                            m.place(this.domNode, a.root);
                            this.highlight && this.enableHighlight(a);
                            this._maxHeight = s.get(this._contentPane, "maxHeight")
                        },
                        unsetMap: function () {
                            this.disableHighlight(this.map);
                            this.inherited(arguments)
                        },
                        setTitle: function (a) {
                            if (this.popupWindow) {
                                if (!y.isDefined(a) ||
                                    "" === a) a = "\x26nbsp;";
                                this.destroyDijits(this._title);
                                this.place(a, this._title);
                                this.isShowing && (this.startupDijits(this._title), this.reposition())
                            }
                        },
                        setContent: function (a) {
                            if (this.popupWindow) {
                                if (!y.isDefined(a) || "" === a) a = "\x26nbsp;";
                                this.destroyDijits(this._contentPane);
                                this.place(a, this._contentPane);
                                this.isShowing && (this.startupDijits(this._contentPane), this.reposition())
                            }
                        },
                        show: function (a, b) {
                            if (this.popupWindow)
                                if (this._delayHide = !1, a) {
                                    var c = this.map,
                                        f;
                                    a.spatialReference ? (this.location = a, f = c.toScreen(a)) :
                                        (this.location = c.toMap(a), f = a);
                                    var d = c._getFrameWidth();
                                    if (-1 !== d && (f.x %= d, 0 > f.x && (f.x += d), c.width > d))
                                        for (c = (c.width - d) / 2; f.x < c;) f.x += d;
                                    this._maximized ? this.restore() : this._setPosition(f);
                                    b && b.closestFirst && this.showClosestFirst(this.location);
                                    this.isShowing || (this._toggleVisibility(!0), this._followMap(), this.startupDijits(this._title), this.startupDijits(this._contentPane), this.reposition(), this.showHighlight(), this.onShow())
                                } else this._toggleVisibility(!0)
                        },
                        hide: function () {
                            this.isShowing && (this._toggleVisibility(!1),
                                this._unfollowMap(), this.keepHighlightOnHide || this.hideHighlight(), this.onHide())
                        },
                        resize: function (a, b) {
                            this.popupWindow && (this._sizers.style({
                                width: a + "px"
                            }), s.set(this._contentPane, "maxHeight", b + "px"), this._maxHeight = b, this.isShowing && this.reposition())
                        },
                        reposition: function () {
                            this.popupWindow && this.map && (this.location && !this._maximized && this.isShowing) && this._setPosition(this.map.toScreen(this.location))
                        },
                        maximize: function () {
                            var a = this.map;
                            if (a && !this._maximized && this.popupWindow) {
                                this._maximized = !0;
                                var c = this._maxButton;
                                d.remove(c, "maximize");
                                d.add(c, "restore");
                                b.set(c, "title", this._nls.NLS_restore);
                                var c = this.marginLeft,
                                    f = this.marginTop,
                                    e = a.width - 2 * c,
                                    a = a.height - 2 * f;
                                s.set(this.domNode, {
                                    left: this._isRTL ? null : c + "px",
                                    right: this._isRTL ? c + "px" : null,
                                    top: f + "px",
                                    bottom: null
                                });
                                s.set(this._positioner, {
                                    left: null,
                                    right: null,
                                    top: null,
                                    bottom: null
                                });
                                this._savedWidth = s.get(this._sizers[0], "width");
                                this._savedHeight = s.get(this._contentPane, "maxHeight");
                                this._sizers.style({
                                    width: e + "px"
                                });
                                s.set(this._contentPane, {
                                    maxHeight: a - 65 + "px",
                                    height: a - 65 + "px"
                                });
                                this._showPointer("");
                                this._unfollowMap();
                                d.add(this.domNode, "esriPopupMaximized");
                                this.onMaximize()
                            }
                        },
                        restore: function () {
                            if (this.map && this._maximized && this.popupWindow) {
                                this._maximized = !1;
                                var a = this._maxButton;
                                d.remove(a, "restore");
                                d.add(a, "maximize");
                                b.set(a, "title", this._nls.NLS_maximize);
                                s.set(this._contentPane, "height", null);
                                this.resize(this._savedWidth, this._savedHeight);
                                this._savedWidth = this._savedHeight = null;
                                this.show(this.location);
                                this._followMap();
                                d.remove(this.domNode, "esriPopupMaximized");
                                this.onRestore()
                            }
                        },
                        startup: function () {},
                        destroy: function () {
                            this.map && this.unsetMap();
                            this.cleanup();
                            this.isShowing && this.hide();
                            this.destroyDijits(this._title);
                            this.destroyDijits(this._content);
                            a.forEach(this._eventConnections, g.disconnect);
                            m.destroy(this.domNode);
                            this._sizers = this._contentPane = this._actionList = this._positioner = this._pointer = this._outerPointer = this._title = this._prevFeatureButton = this._nextFeatureButton = this._spinner = this._eventConnections =
                                this._pagerScope = this._targetLocation = this._nls = this._maxButton = null
                        },
                        selectNext: function () {
                            this.select(this.selectedIndex + 1)
                        },
                        selectPrevious: function () {
                            this.select(this.selectedIndex - 1)
                        },
                        setFeatures: function () {
                            this.inherited(arguments);
                            this._updateUI()
                        },
                        postscript: null,
                        _highlightSetter: function (a) {
                            var b = this.highlight,
                                c = this.map;
                            this.highlight = a;
                            if (c && a !== b)
                                if (a) {
                                    if (this.enableHighlight(c), a = this.features && this.features[this.selectedIndex]) this.updateHighlight(c, a), this.showHighlight()
                                } else this.disableHighlight(c)
                        },
                        _pagingControlsSetter: function (a) {
                            var b = this.pagingControls,
                                c = this.map;
                            this.pagingControls = a;
                            c && a !== b && this._updatePagingControls()
                        },
                        _pagingInfoSetter: function (a) {
                            var b = this.pagingInfo,
                                c = this.map;
                            this.pagingInfo = a;
                            c && (a !== b && this.features && this.features.length) && this._updatePagingInfo()
                        },
                        _popupWindowSetter: function (a) {
                            var b = this.popupWindow,
                                c = this.map;
                            this.popupWindow = a;
                            c && a !== b && (a ? (this._updateUI(), this._updateWindow()) : (this.hide(), this.showHighlight()))
                        },
                        _anchorSetter: function (a) {
                            var b = this.anchor;
                            this.anchor = a;
                            this.map && a !== b && this.reposition()
                        },
                        _featuresCleared: function () {
                            this.setTitle("\x26nbsp;");
                            this.setContent("\x26nbsp;");
                            this._setPagerCallbacks(this);
                            this._updateUI();
                            this.hideHighlight()
                        },
                        _featureSelected: function () {
                            this._updateUI();
                            this._updateWindow()
                        },
                        _updateWindow: function () {
                            var a = this.selectedIndex;
                            if (0 <= a) {
                                var b = this.features[a].getContent(),
                                    c;
                                !this.titleInBody && b && p.isString(b.id) && (c = n.byId(b.id)) && (c.set && /_PopupRenderer/.test(c.declaredClass)) && c.set("showTitle", !1);
                                this.setContent(b);
                                this.updateHighlight(this.map, this.features[a]);
                                this.showHighlight()
                            }
                        },
                        _toggleVisibility: function (a) {
                            this._setVisibility(a);
                            this.isShowing = a
                        },
                        _setVisibility: function (a) {
                            d.toggle(this.domNode, "esriPopupVisible", a);
                            d.toggle(this.domNode, "esriPopupHidden", !a)
                        },
                        _waitAndHide: function (a) {
                            var b = this;
                            this._delayHide = !0;
                            setTimeout(function () {
                                b._delayHide && (b._delayHide = !1, b.hide())
                            }, a)
                        },
                        _followMap: function () {
                            this._unfollowMap();
                            var a = this.map;
                            this._handles = [g.connect(a, "onPanStart", this, this._onPanStart),
g.connect(a, "onPan", this, this._onPan), g.connect(a, "onZoomStart", this, this._onZoomStart), g.connect(a, "onExtentChange", this, this._onExtentChange)]
                        },
                        _unfollowMap: function () {
                            var b = this._handles;
                            b && (a.forEach(b, g.disconnect), this._handles = null)
                        },
                        _onPanStart: function () {
                            var a = this.domNode.style;
                            this._panOrigin = {
                                left: a.left,
                                top: a.top,
                                right: a.right,
                                bottom: a.bottom
                            }
                        },
                        _onPan: function (a, b) {
                            var c = this._panOrigin,
                                f = b.x,
                                d = b.y,
                                e = c.left,
                                g = c.top,
                                m = c.right,
                                c = c.bottom;
                            e && (e = parseFloat(e) + f + "px");
                            g && (g = parseFloat(g) +
                                d + "px");
                            m && (m = parseFloat(m) - f + "px");
                            c && (c = parseFloat(c) - d + "px");
                            s.set(this.domNode, {
                                left: e,
                                top: g,
                                right: m,
                                bottom: c
                            })
                        },
                        _onZoomStart: function () {
                            this._setVisibility(!1)
                        },
                        _onExtentChange: function (a, b, c) {
                            c && (this._setVisibility(!0), this.show(this._targetLocation || this.location));
                            this._targetLocation = null
                        },
                        _toggleSize: function () {
                            this._maximized ? this.restore() : this.maximize()
                        },
                        _setPosition: function (a) {
                            var b = a.x,
                                c = a.y;
                            a = this.offsetX || 0;
                            var f = this.offsetY || 0,
                                d = 0,
                                e = 0,
                                g = t.position(this.map.container, !0),
                                m = g.w,
                                n = g.h,
                                h = "Left",
                                l = "bottom",
                                u = t.getContentBox(this._positioner),
                                q = u.w / 2,
                                p = u.h / 2,
                                w = s.get(this._sizers[0], "height") + this._maxHeight + s.get(this._sizers[2], "height"),
                                r = w / 2,
                                y = 0,
                                C = 0,
                                v = b,
                                x = c,
                                z = this.anchor.toLowerCase();
                            if ("auto" === z) {
                                if (z = k.getBox) z = z(), y = Math.max(z.l, g.x), m = Math.min(z.l + z.w, g.x + g.w), C = Math.max(z.t, g.y), n = Math.min(z.t + z.h, g.y + g.h), v += g.x, x += g.y;
                                g = x - C >= w;
                                w = n - x >= w;
                                z = m - v >= u.w;
                                u = v - y >= u.w;
                                x - C > r && n - x >= r && (z ? (l = "", h = "Left") : u && (l = "", h = "Right"));
                                h && l && (v - y > q && m - v >= q) && (g ? (h = "", l = "bottom") : w && (h = "",
                                    l = "top"));
                                h && l && (z && g ? (h = "Left", l = "bottom") : z && w ? (h = "Left", l = "top") : u && w ? (h = "Right", l = "top") : u && g && (h = "Right", l = "bottom"))
                            } else l = h = "", -1 !== z.indexOf("top") ? l = "bottom" : -1 !== z.indexOf("bottom") && (l = "top"), -1 !== z.indexOf("left") ? h = "Right" : -1 !== z.indexOf("right") && (h = "Left");
                            r = l + h;
                            switch (r) {
                            case "top":
                            case "bottom":
                                e = 14;
                                break;
                            case "Left":
                            case "Right":
                                d = 13;
                                break;
                            case "topLeft":
                            case "topRight":
                            case "bottomLeft":
                            case "bottomRight":
                                e = 14, d = -16
                            }
                            s.set(this.domNode, {
                                left: b + "px",
                                top: c + "px",
                                right: null,
                                bottom: null
                            });
                            b = {
                                left: null,
                                right: null,
                                top: null,
                                bottom: null
                            };
                            h ? b[h.toLowerCase()] = d + a + "px" : b.left = -q + "px";
                            l ? b[l] = e + f + "px" : b.top = -p + "px";
                            s.set(this._positioner, b);
                            this._showPointer(r)
                        },
                        _showPointer: function (a) {
                            d.remove(this._pointer, "top bottom right left topLeft topRight bottomRight bottomLeft hidden".split(" "));
                            d.remove(this._outerPointer, ["right", "left", "hidden"]);
                            "Right" === a || "Left" === a ? (a = a.toLowerCase(), d.add(this._outerPointer, a)) : d.add(this._pointer, a)
                        },
                        _setPagerCallbacks: function (a, b, c) {
                            if (this.pagingControls &&
                                !(a === this && (!this._pagerScope || this._pagerScope === this)) && a !== this._pagerScope) {
                                this._pagerScope = a;
                                a === this && (b = this.selectPrevious, c = this.selectNext);
                                var f = this._eventConnections;
                                g.disconnect(f[1]);
                                g.disconnect(f[2]);
                                b && (f[1] = g.connect(this._prevFeatureButton, "onclick", a, b));
                                c && (f[2] = g.connect(this._nextFeatureButton, "onclick", a, c))
                            }
                        },
                        _getLocation: function (a) {
                            var b, c;
                            if (a = a && a.geometry) switch (a.type) {
                            case "point":
                                b = a;
                                break;
                            case "multipoint":
                                b = a.getPoint(0);
                                c = x.getDenormalizedExtent(a);
                                break;
                            case "polyline":
                            case "polygon":
                                b =
                                    a.getPoint(0, 0), c = x.getDenormalizedExtent(a)
                            }
                            return [b, c]
                        },
                        _zoomToFeature: function (a) {
                            a.preventDefault();
                            var b = this.features,
                                c = this.selectedIndex;
                            a = this.map;
                            if (b) {
                                c = this._getLocation(b[c]);
                                b = c[0];
                                c = c[1];
                                b || (b = this.location);
                                if (!c || !c.intersects(this.location)) this.location = b;
                                if (c && c.getWidth() && c.getHeight()) a.setExtent(c, !0);
                                else {
                                    var f = a.getNumLevels(),
                                        c = a.getLevel(),
                                        d = a.getMaxZoom(),
                                        e = this.zoomFactor || 1;
                                    0 < f ? c !== d && (f = c + e, f > d && (f = d), a.navigationManager._wheelZoom({
                                        value: f - c,
                                        mapPoint: b
                                    }, !0)) : a.navigationManager._wheelZoom({
                                        value: 2 *
                                            (1 / Math.pow(2, e)),
                                        mapPoint: b
                                    }, !0)
                                }
                            }
                        },
                        _updatePagingControls: function () {
                            var a = this._prevFeatureButton,
                                b = this._nextFeatureButton,
                                c = this.selectedIndex,
                                f = this.features ? this.features.length : 0;
                            this.pagingControls && 1 < f ? (0 === c ? d.add(a, "hidden") : d.remove(a, "hidden"), c === f - 1 ? d.add(b, "hidden") : d.remove(b, "hidden")) : (d.add(a, "hidden"), d.add(b, "hidden"))
                        },
                        _updatePagingInfo: function () {
                            var a = this.features ? this.features.length : 0,
                                b = this._nls,
                                c = "\x26nbsp;";
                            this.pagingInfo && (1 < a && b.NLS_pagingInfo) && (c = y.substitute({
                                index: this.selectedIndex +
                                    1,
                                total: a
                            }, b.NLS_pagingInfo));
                            if (a && (b = this.getSelectedFeature(), a = b.getInfoTemplate(), b = b.getTitle(), (!a || /esri\.InfoTemplate/.test(a.declaredClass) || !this.titleInBody) && b)) c = b + ("\x26nbsp;" === c ? "" : " " + c);
                            this.setTitle(c)
                        },
                        _updateUI: function () {
                            if (this.popupWindow) {
                                var a = this.features,
                                    b = this.deferreds,
                                    c = a ? a.length : 0,
                                    f = this._spinner,
                                    e = this._actionList,
                                    g = this._nls;
                                this._updatePagingControls();
                                this._updatePagingInfo();
                                c ? d.remove(e, "hidden") : d.add(e, "hidden");
                                b && b.length ? a ? d.remove(f, "hidden") : this.setContent("\x3cdiv style\x3d'text-align: center;'\x3e" +
                                    g.NLS_searching + "...\x3c/div\x3e") : (d.add(f, "hidden"), c || (this.setContent("\x3cdiv style\x3d'text-align: center;'\x3e" + g.NLS_noInfo + ".\x3c/div\x3e"), this.visibleWhenEmpty || this._waitAndHide(this.hideDelay)))
                            }
                        }
                    });
                    h("extend-esri") && p.setObject("dijit.Popup", r, f);
                    return r
                })
        },
        "esri/geometry/normalizeUtils": function () {
            define("dojo/_base/array dojo/_base/lang dojo/_base/Deferred dojo/has ../kernel ../config ../deferredUtils ./Extent ./Polyline ./Polygon ./webMercatorUtils ./jsonUtils".split(" "), function (r,
                p, a, g, q, h, k, l, e, c, b, d) {
                function m(a, b) {
                    return Math.ceil((a - b) / (2 * b))
                }

                function t(a, b) {
                    var c = a.paths || a.rings,
                        f, d, e = c.length,
                        g;
                    for (f = 0; f < e; f++) {
                        g = c[f].length;
                        for (d = 0; d < g; d++) {
                            var m = a.getPoint(f, d);
                            a.setPoint(f, d, m.offset(b, 0))
                        }
                    }
                    return a
                }

                function s(a, b) {
                    if (!(a instanceof e || a instanceof c)) throw console.error("_straightLineDensify: the input geometry is neither polyline nor polygon"), Error("_straightLineDensify: the input geometry is neither polyline nor polygon");
                    var f = a instanceof e,
                        d = [],
                        g;
                    r.forEach(f ?
                        a.paths : a.rings,
                        function (a) {
                            d.push(g = []);
                            g.push([a[0][0], a[0][1]]);
                            var c, f, e, m, n, s, h, k, t, l, u, q;
                            for (n = 0; n < a.length - 1; n++) {
                                c = a[n][0];
                                f = a[n][1];
                                e = a[n + 1][0];
                                m = a[n + 1][1];
                                h = Math.sqrt((e - c) * (e - c) + (m - f) * (m - f));
                                k = (m - f) / h;
                                t = (e - c) / h;
                                l = h / b;
                                if (1 < l) {
                                    for (s = 1; s <= l - 1; s++) q = s * b, u = t * q + c, q = k * q + f, g.push([u, q]);
                                    s = (h + Math.floor(l - 1) * b) / 2;
                                    u = t * s + c;
                                    q = k * s + f;
                                    g.push([u, q])
                                }
                                g.push([e, m])
                            }
                        });
                    return f ? new e({
                        paths: d,
                        spatialReference: a.spatialReference
                    }) : new c({
                        rings: d,
                        spatialReference: a.spatialReference
                    })
                }

                function n(a, c, f) {
                    c && (a =
                        s(a, 1E6), a = b.webMercatorToGeographic(a, !0));
                    f && (a = t(a, f));
                    return a
                }

                function f(a, b, c) {
                    var f = a.x || a[0],
                        d;
                    f > b ? (d = m(f, b), a.x ? a = a.offset(d * -2 * b, 0) : a[0] = f + d * -2 * b) : f < c && (d = m(f, c), a.x ? a = a.offset(d * -2 * c, 0) : a[0] = f + d * -2 * c);
                    return a
                }

                function y(a, b) {
                    var c = -1;
                    r.forEach(b.cutIndexes, function (f, d) {
                        var e = b.geometries[d];
                        r.forEach(e.rings || e.paths, function (a, b) {
                            r.some(a, function (c) {
                                if (!(180 > c[0])) {
                                    c = 0;
                                    var f, d = a.length,
                                        g;
                                    for (f = 0; f < d; f++) g = a[f][0], c = g > c ? g : c;
                                    c = Number(c.toFixed(9));
                                    c = -360 * m(c, 180);
                                    d = a.length;
                                    for (f = 0; f <
                                        d; f++) g = e.getPoint(b, f), e.setPoint(b, f, g.offset(c, 0))
                                }
                                return !0
                            })
                        });
                        f === c ? e.rings ? r.forEach(e.rings, function (b) {
                            a[f] = a[f].addRing(b)
                        }) : r.forEach(e.paths, function (b) {
                            a[f] = a[f].addPath(b)
                        }) : (c = f, a[f] = e)
                    });
                    return a
                }

                function u(g, s, k, l) {
                    var u = new a;
                    u.addCallbacks(k, l);
                    s = s || h.defaults.geometryService;
                    var q = [],
                        p = [],
                        w, C, v, x, A, O, W, T, N = 0;
                    r.forEach(g, function (a) {
                        if (a)
                            if (w || (w = a.spatialReference, C = w._getInfo(), x = (v = w._isWebMercator()) ? 2.0037508342788905E7 : 180, A = v ? -2.0037508342788905E7 : -180, O = v ? 102100 : 4326, W = new e({
                                    paths: [[[x,
A], [x, x]]],
                                    spatialReference: {
                                        wkid: O
                                    }
                                }), T = new e({
                                    paths: [[[A, A], [A, x]]],
                                    spatialReference: {
                                        wkid: O
                                    }
                                })), C) {
                                var b = d.fromJson(a.toJson()),
                                    g = a.getExtent();
                                "point" === a.type ? q.push(f(b, x, A)) : "multipoint" === a.type ? (b.points = r.map(b.points, function (a) {
                                    return f(a, x, A)
                                }), q.push(b)) : "extent" === a.type ? (b = g._normalize(null, null, C), q.push(b.rings ? new c(b) : b)) : g ? (a = m(g.xmin, A) * 2 * x, b = 0 === a ? b : t(b, a), g = g.offset(a, 0), g.intersects(W) && g.xmax !== x ? (N = g.xmax > N ? g.xmax : N, b = n(b, v), p.push(b), q.push("cut")) : g.intersects(T) && g.xmin !==
                                    A ? (N = g.xmax * 2 * x > N ? g.xmax * 2 * x : N, b = n(b, v, 360), p.push(b), q.push("cut")) : q.push(b)) : q.push(b)
                            } else q.push(a);
                        else q.push(a)
                    });
                    k = new e;
                    l = m(N, x);
                    for (var Y = -90, Z = l; 0 < l;) {
                        var ga = -180 + 360 * l;
                        k.addPath([[ga, Y], [ga, -1 * Y]]);
                        Y *= -1;
                        l--
                    }
                    0 < p.length && 0 < Z ? s ? s.cut(p, k, function (a) {
                        p = y(p, a);
                        var c = [];
                        r.forEach(q, function (a, f) {
                            if ("cut" === a) {
                                var d = p.shift();
                                g[f].rings && 1 < g[f].rings.length && d.rings.length >= g[f].rings.length ? (q[f] = "simplify", c.push(d)) : q[f] = !0 === v ? b.geographicToWebMercator(d) : d
                            }
                        });
                        0 < c.length ? s.simplify(c, function (a) {
                            r.forEach(q,
                                function (c, f) {
                                    "simplify" === c && (q[f] = !0 === v ? b.geographicToWebMercator(a.shift()) : a.shift())
                                });
                            u.callback(q)
                        }, function (a) {
                            u.errback(a)
                        }) : u.callback(q)
                    }, function (a) {
                        u.errback(a)
                    }) : u.errback(Error("esri.geometry.normalizeCentralMeridian: 'geometryService' argument is missing.")) : (r.forEach(q, function (a, c) {
                        if ("cut" === a) {
                            var f = p.shift();
                            q[c] = !0 === v ? b.geographicToWebMercator(f) : f
                        }
                    }), u.callback(q));
                    return u
                }

                function w(a, b, c, f) {
                    var d = !1,
                        e;
                    p.isObject(a) && a && (p.isArray(a) ? a.length && ((e = a[0] && a[0].declaredClass) &&
                        -1 !== e.indexOf("Graphic") ? (a = r.map(a, function (a) {
                            return a.geometry
                        }), d = a.length ? !0 : !1) : e && -1 !== e.indexOf("esri.geometry.") && (d = !0)) : (e = a.declaredClass) && -1 !== e.indexOf("FeatureSet") ? (a = r.map(a.features || [], function (a) {
                        return a.geometry
                    }), d = a.length ? !0 : !1) : e && -1 !== e.indexOf("esri.geometry.") && (d = !0));
                    d && b.push({
                        index: c,
                        property: f,
                        value: a
                    })
                }

                function C(a, b) {
                    var c = [];
                    r.forEach(b, function (b) {
                        var f = b.i,
                            d = a[f];
                        b = b.p;
                        var e;
                        if (p.isObject(d) && d)
                            if (b)
                                if ("*" === b[0])
                                    for (e in d) d.hasOwnProperty(e) && w(d[e], c, f,
                                        e);
                                else r.forEach(b, function (a) {
                                    w(p.getObject(a, !1, d), c, f, a)
                                });
                        else w(d, c, f)
                    });
                    return c
                }

                function x(a, b) {
                    var c = 0,
                        f = {};
                    r.forEach(b, function (b) {
                        var d = b.index,
                            e = b.property,
                            g = b.value,
                            m = g.length || 1,
                            n = a.slice(c, c + m);
                        p.isArray(g) || (n = n[0]);
                        c += m;
                        delete b.value;
                        e ? (f[d] = f[d] || {}, f[d][e] = n) : f[d] = n
                    });
                    return f
                }

                function v(a) {
                    for (var b = [], c = 0, f = 0, d = Math.min, e = Math.max, g = 0; g < a.length; g++) {
                        for (var m = a[g], n = null, s = 0; s < m.length; s++) n = m[s], b.push(n), 0 === s ? f = c = n[0] : (c = d(c, n[0]), f = e(f, n[0]));
                        n && b.push([(c + f) / 2, 0])
                    }
                    return b
                }
                var A = {
                    normalizeCentralMeridian: u,
                    _foldCutResults: y,
                    _prepareGeometryForCut: n,
                    _offsetMagnitude: m,
                    _pointNormalization: f,
                    _updatePolyGeometry: t,
                    _straightLineDensify: s,
                    _createWrappers: function (b) {
                        var c = p.isObject(b) ? b.prototype : p.getObject(b + ".prototype");
                        r.forEach(c.__msigns, function (b) {
                            var f = c[b.n];
                            c[b.n] = function () {
                                var c = this,
                                    d = [],
                                    e, g = new a(k._dfdCanceller);
                                b.f && k._fixDfd(g);
                                for (e = 0; e < b.c; e++) d[e] = arguments[e];
                                var m = {
                                    dfd: g
                                };
                                d.push(m);
                                var n, s = [],
                                    h;
                                c.normalization && !c._isTable && (n = C(d, b.a), r.forEach(n,
                                    function (a) {
                                        s = s.concat(a.value)
                                    }), s.length && (h = u(s)));
                                h ? (g._pendingDfd = h, h.addCallbacks(function (a) {
                                    g.canceled || (m.assembly = x(a, n), g._pendingDfd = f.apply(c, d))
                                }, function (a) {
                                    var f = c.declaredClass;
                                    f && -1 !== f.indexOf("FeatureLayer") ? c._resolve([a], null, d[b.e], g, !0) : c._errorHandler(a, d[b.e], g)
                                })) : g._pendingDfd = f.apply(c, d);
                                return g
                            }
                        })
                    },
                    _disassemble: C,
                    _addToBucket: w,
                    _reassemble: x,
                    getDenormalizedExtent: function (a) {
                        if (!a) return null;
                        var b = a.getExtent();
                        if (!b) return null;
                        var c = a.spatialReference && a.spatialReference._getInfo();
                        if (!c) return b;
                        var f = c.valid[0],
                            c = c.valid[1],
                            d = 2 * c,
                            e = b.getWidth(),
                            g = b.xmax,
                            m = b.xmin;
                        if ("extent" === a.type || 0 === e || e <= c || e > d || g < f || m > c) return b;
                        var n;
                        switch (a.type) {
                        case "polygon":
                            if (1 < a.rings.length) n = v(a.rings);
                            else return b;
                            break;
                        case "polyline":
                            if (1 < a.paths.length) n = v(a.paths);
                            else return b;
                            break;
                        case "multipoint":
                            n = a.points
                        }
                        a = Math.min;
                        for (var f = Math.max, d = new l(b.toJson()), s = 0; s < n.length; s++) {
                            var h = n[s][0];
                            0 > h ? (h += c, m = f(h, m)) : (h -= c, g = a(h, g))
                        }
                        d.xmin = g;
                        d.xmax = m;
                        return d.getWidth() < e ? (d.xmin -= c, d.xmax -=
                            c, d) : b
                    }
                };
                g("extend-esri") && p.mixin(p.getObject("geometry", !0, q), A);
                return A
            })
        },
        "esri/geometry/jsonUtils": function () {
            define("dojo/_base/lang dojo/has ../kernel ./Point ./Polyline ./Polygon ./Multipoint ./Extent".split(" "), function (r, p, a, g, q, h, k, l) {
                var e = {
                    fromJson: function (a) {
                        if (void 0 !== a.x && void 0 !== a.y) return new g(a);
                        if (void 0 !== a.paths) return new q(a);
                        if (void 0 !== a.rings) return new h(a);
                        if (void 0 !== a.points) return new k(a);
                        if (void 0 !== a.xmin && void 0 !== a.ymin && void 0 !== a.xmax && void 0 !== a.ymax) return new l(a)
                    },
                    getJsonType: function (a) {
                        return a instanceof g ? "esriGeometryPoint" : a instanceof q ? "esriGeometryPolyline" : a instanceof h ? "esriGeometryPolygon" : a instanceof l ? "esriGeometryEnvelope" : a instanceof k ? "esriGeometryMultipoint" : null
                    },
                    getGeometryType: function (a) {
                        return "esriGeometryPoint" === a ? g : "esriGeometryPolyline" === a ? q : "esriGeometryPolygon" === a ? h : "esriGeometryEnvelope" === a ? l : "esriGeometryMultipoint" === a ? k : null
                    }
                };
                p("extend-esri") && r.mixin(r.getObject("geometry", !0, a), e);
                return e
            })
        },
        "esri/InfoWindowBase": function () {
            define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/Deferred dojo/dom-construct dojo/has dijit/registry ./kernel ./lang ./geometry/ScreenPoint".split(" "),
                function (r, p, a, g, q, h, k, l, e, c, b) {
                    r = r(null, {
                        declaredClass: "esri.InfoWindowBase",
                        constructor: function () {
                            var a = p.hitch;
                            this.__set_title = a(this, this.__set_title);
                            this.__err_title = a(this, this.__err_title);
                            this.__set_content = a(this, this.__set_content);
                            this.__err_content = a(this, this.__err_content)
                        },
                        setMap: function (a) {
                            this.map = a
                        },
                        unsetMap: function (a) {
                            delete this.map
                        },
                        setTitle: function () {},
                        setContent: function () {},
                        show: function () {},
                        hide: function () {},
                        resize: function () {},
                        onShow: function () {},
                        onHide: function () {},
                        place: function (a, b) {
                            c.isDefined(a) ? p.isObject(a) ? h.place(a, b, "only") : b.innerHTML = a : b.innerHTML = ""
                        },
                        startupDijits: function (a) {
                            this._processDijits(a)
                        },
                        destroyDijits: function (a) {
                            this._processDijits(a, !0)
                        },
                        _processDijits: function (b, c) {
                            if (b && 1 === b.children.length) {
                                var e = b.children[0];
                                if (e) {
                                    var g = l.byNode(e),
                                        e = g ? [g] : l.findWidgets(e);
                                    a.forEach(e, function (a) {
                                        if (c) {
                                            if (a._started && !a._destroyed) try {
                                                a.destroyRecursive ? a.destroyRecursive() : a.destroy && a.destroy()
                                            } catch (b) {
                                                console.debug("An error occurred when destroying a widget embedded within InfoWindow: " +
                                                    b.message)
                                            }
                                        } else if (!a._started) try {
                                            a.startup()
                                        } catch (d) {
                                            console.debug("An error occurred when starting a widget embedded within InfoWindow: " + d.message)
                                        }
                                    })
                                }
                            }
                        },
                        __registerMapListeners: function () {
                            this.__unregisterMapListeners();
                            var a = this.map;
                            this.__handles = [g.connect(a, "onPan", this, this.__onMapPan), g.connect(a, "onZoomStart", this, this.__onMapZmStart), g.connect(a, "onExtentChange", this, this.__onMapExtChg)]
                        },
                        __unregisterMapListeners: function () {
                            var b = this.__handles;
                            b && (a.forEach(b, g.disconnect, g), this.__handles =
                                null)
                        },
                        __onMapPan: function (a, b) {
                            this.move(b, !0)
                        },
                        __onMapZmStart: function () {
                            this.__mcoords = this.mapCoords || this.map.toMap(new b(this.coords));
                            this.hide(null, !0)
                        },
                        __onMapExtChg: function (a, b, c) {
                            a = this.map;
                            var e = this.mapCoords;
                            e ? this.show(e, null, !0) : (b = c ? a.toScreen(this.__mcoords) : this.coords.offset(b && b.x || 0, b && b.y || 0), this.show(b, null, !0))
                        },
                        __setValue: function (a, b) {
                            this[a].innerHTML = "";
                            var e = "_dfd" + a,
                                g = this[e];
                            g && -1 === g.fired && (g.cancel(), this[e] = null);
                            c.isDefined(b) && (b instanceof q ? (this[e] = b, b.addCallbacks(this["__set" +
                                a], this["__err" + a])) : this.__render(a, b))
                        },
                        __set_title: function (a) {
                            this._dfd_title = null;
                            this.__render("_title", a)
                        },
                        __err_title: function (a) {
                            this._dfd_title = null
                        },
                        __set_content: function (a) {
                            this._dfd_content = null;
                            this.__render("_content", a)
                        },
                        __err_content: function (a) {
                            this._dfd_content = null
                        },
                        __render: function (a, b) {
                            var c = this[a];
                            this.place(b, c);
                            this.isShowing && (this.startupDijits(c), "_title" === a && this._adjustContentArea && this._adjustContentArea())
                        }
                    });
                    k("extend-esri") && (e.InfoWindowBase = r);
                    return r
                })
        },
        "esri/PopupBase": function () {
            define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/Color dojo/_base/Deferred dojo/has ./kernel ./graphic ./geometry/Point ./geometry/jsonUtils ./geometry/mathUtils ./geometry/webMercatorUtils ./symbols/SimpleMarkerSymbol ./symbols/SimpleLineSymbol ./symbols/CartographicLineSymbol ./symbols/SimpleFillSymbol ./tasks/query ./Evented dojo/has!extend-esri?./PopupInfo".split(" "),
                function (r, p, a, g, q, h, k, l, e, c, b, d, m, t, s, n, f, y) {
                    function u(a) {
                        return "sizeInfo" === a.type
                    }
                    r = r(y, {
                        declaredClass: "esri.PopupBase",
                        _featureLayers: {},
                        _updateEndHandles: [],
                        _evtMap: {
                            "set-features": !0,
                            "clear-features": !0,
                            "selection-change": !0,
                            "dfd-complete": !0
                        },
                        onSetFeatures: function () {},
                        onClearFeatures: function () {},
                        onSelectionChange: function () {},
                        onDfdComplete: function () {},
                        initialize: function () {
                            this.count = 0;
                            this.selectedIndex = -1;
                            this.on("clear-features", p.hitch(this, this._resetUpdateEndListeners));
                            this.on("dfd-complete",
                                p.hitch(this, this._processFeatures));
                            this.on("set-features", p.hitch(this, this._processFeatures))
                        },
                        cleanup: function () {
                            this.features = this.deferreds = null;
                            this._resetUpdateEndListeners()
                        },
                        setFeatures: function (b) {
                            if (b && b.length) {
                                this.clearFeatures();
                                var c, f;
                                b[0] instanceof q ? f = b : c = b;
                                c ? this._updateFeatures(null, c) : (this.deferreds = f, f = f.slice(0), a.forEach(f, function (a) {
                                    a.addBoth(p.hitch(this, this._updateFeatures, a))
                                }, this))
                            }
                        },
                        clearFeatures: function () {
                            this.features = this.deferreds = this._marked = null;
                            this.count =
                                0;
                            var a = this.selectedIndex;
                            this.selectedIndex = -1;
                            if (-1 < a) this.onSelectionChange();
                            this.onClearFeatures()
                        },
                        getSelectedFeature: function () {
                            var a = this.features;
                            if (a) return a[this.selectedIndex]
                        },
                        select: function (a) {
                            0 > a || a >= this.count || (this.selectedIndex = a, this.onSelectionChange())
                        },
                        // modified color highlight from aqua - rjt 
                        enableHighlight: function (a) {
                            this._highlighted = a.graphics.add(new l(new e(0, 0, a.spatialReference)));
                            this._highlighted.hide();
                            this.markerSymbol || (a = this.markerSymbol = new m, a.setStyle(m.STYLE_TARGET), a._setDim(16, 16, 0), a.setOutline(new s(t.STYLE_SOLID,
                                new g([255, 0, 0]), 2, s.CAP_ROUND, s.JOIN_ROUND)), a.setColor(new g([0, 0, 0, 0])));
                            this.lineSymbol || (this.lineSymbol = new t(t.STYLE_SOLID, new g([255, 0, 255]), 2));
                            this.fillSymbol || (this.fillSymbol = new n(n.STYLE_NULL, new t(t.STYLE_SOLID, new g([255, 0, 255]), 2), new g([0, 0, 0, 0])))
                        },
                        disableHighlight: function (a) {
                            var b = this._highlighted;
                            b && (b.hide(), a.graphics.remove(b), delete this._highlighted);
                            this.markerSymbol = this.lineSymbol = this.fillSymbol = null
                        },
                        showHighlight: function () {
                            var a = this.features && this.features[this.selectedIndex];
                            this._highlighted && (a && a.geometry) && this._highlighted.show()
                        },
                        hideHighlight: function () {
                            this._highlighted && this._highlighted.hide()
                        },
                        updateHighlight: function (a, b) {
                            var f = b.geometry,
                                d = this._highlighted;
                            if (!f || !d) d && d.hide();
                            else {
                                d.hide();
                                !d._graphicsLayer && a && a.graphics.add(d);
                                d.setGeometry(c.fromJson(f.toJson()));
                                var e;
                                switch (f.type) {
                                case "point":
                                case "multipoint":
                                    var g = b.getLayer(),
                                        f = b.symbol || g && g._getSymbol(b);
                                    if (g && f) {
                                        var m, n, s = 0,
                                            h = 0,
                                            k = 0;
                                        e = !b.symbol ? g._getRenderer(b) : null;
                                        if (g = this._getSizeInfo(e)) m =
                                            n = e.getSize(b, {
                                                sizeInfo: g,
                                                shape: f.style,
                                                resolution: a && a.getResolutionInMeters && a.getResolutionInMeters()
                                            });
                                        else switch (f.type) {
                                        case "simplemarkersymbol":
                                            m = n = f.size || 0;
                                            break;
                                        case "picturemarkersymbol":
                                            m = f.width || 0, n = f.height || 0
                                        }
                                        s = f.xoffset || 0;
                                        h = f.yoffset || 0;
                                        k = f.angle || 0;
                                        e = this.markerSymbol;
                                        e.setOffset(0, 0);
                                        e.setAngle(0);
                                        m && n && e._setDim(m + 1, n + 1, 0);
                                        e.setOffset(s, h);
                                        e.setAngle(k)
                                    }
                                    break;
                                case "polyline":
                                    e = this.lineSymbol;
                                    break;
                                case "polygon":
                                    e = this.fillSymbol
                                }
                                d.setSymbol(e)
                            }
                        },
                        showClosestFirst: function (a) {
                            var c =
                                this.features;
                            if (c && c.length) {
                                if (1 < c.length) {
                                    var f, e = Infinity,
                                        g = -1,
                                        m, n = b.getLength,
                                        s, h = a.spatialReference,
                                        k, l;
                                    a = a.normalize();
                                    for (f = c.length - 1; 0 <= f; f--)
                                        if (m = c[f].geometry) {
                                            k = m.spatialReference;
                                            s = 0;
                                            try {
                                                l = "point" === m.type ? m : m.getExtent().getCenter(), l = l.normalize(), h && (k && !h.equals(k) && h._canProject(k)) && (l = h.isWebMercator() ? d.geographicToWebMercator(l) : d.webMercatorToGeographic(l)), s = n(a, l)
                                            } catch (t) {}
                                            0 < s && s < e && (e = s, g = f)
                                        }
                                    0 < g && (c.splice(0, 0, c.splice(g, 1)[0]), this.select(0))
                                }
                            } else this.deferreds && (this._marked =
                                a)
                        },
                        _unbind: function (b) {
                            b = a.indexOf(this.deferreds, b);
                            if (-1 !== b) return this.deferreds.splice(b, 1), !this.deferreds.length ? (this.deferreds = null, 2) : 1
                        },
                        _fireComplete: function (a) {
                            var b = this._marked;
                            b && (this._marked = null, this.showClosestFirst(b));
                            this.onDfdComplete(a)
                        },
                        _updateFeatures: function (b, c) {
                            if (b) {
                                if (this.deferreds) {
                                    var f = this._unbind(b);
                                    if (f)
                                        if (c && c instanceof Error) {
                                            if (this._fireComplete(c), 2 === f) this.onSetFeatures()
                                        } else if (c && c.length)
                                        if (this.features) {
                                            var d = a.filter(c, function (b) {
                                                return -1 ===
                                                    a.indexOf(this.features, b)
                                            }, this);
                                            this.features = this.features.concat(d);
                                            this.count = this.features.length;
                                            this._fireComplete();
                                            if (2 === f) this.onSetFeatures()
                                        } else {
                                            this.features = c;
                                            this.count = c.length;
                                            this.selectedIndex = 0;
                                            this._fireComplete();
                                            if (2 === f) this.onSetFeatures();
                                            this.select(0)
                                        } else if (this._fireComplete(), 2 === f) this.onSetFeatures()
                                }
                            } else this.features = c, this.count = c.length, this.selectedIndex = 0, this.onSetFeatures(), this.select(0)
                        },
                        _getSizeInfo: function (b) {
                            return b ? b.sizeInfo || a.filter(b.visualVariables,
                                u)[0] : null
                        },
                        _resetUpdateEndListeners: function () {
                            this._featureLayers = {};
                            a.forEach(this._updateEndHandles, function (a) {
                                a.remove()
                            });
                            this._updateEndHandles = []
                        },
                        _processFeatures: function () {
                            a.forEach(this.features, function (a) {
                                if ((a = a.getLayer()) && !this._featureLayers[a.id] && (1 === a.currentMode || 0 === a.currentMode && 6 === a.mode) && a.objectIdField && a.hasXYFootprint && a.queryFeatures && ("esriGeometryPolygon" === a.geometryType || "esriGeometryPolyline" === a.geometryType || a.hasXYFootprint())) this._featureLayers[a.id] =
                                    a, a = a.on("update-end", p.hitch(this, this._fLyrUpdateEndHandler)), this._updateEndHandles.push(a)
                            }, this)
                        },
                        _fLyrUpdateEndHandler: function (b) {
                            if (!b.error) {
                                var c = this,
                                    d = b.target,
                                    e = d.getSelectedFeatures(),
                                    g = 0 === d.currentMode && 6 === d.mode,
                                    m = {},
                                    n = [];
                                a.forEach(this.features, function (a) {
                                    if (a.getLayer() === d) {
                                        var b = a.attributes[d.objectIdField];
                                        m[b] = a;
                                        n.push(b)
                                    }
                                });
                                n.length && (b = new f, b.objectIds = n, d.queryFeatures(b, function (b) {
                                    a.forEach(b.features, function (b) {
                                        var c = m[b.attributes[d.objectIdField]],
                                            f = !1;
                                        c.geometry !==
                                            b.geometry ? (c.setGeometry(b.geometry), f = !0) : g && (e && -1 !== a.indexOf(e, b)) && (f = !0);
                                        f && (this._highlighted && c === this.getSelectedFeature()) && this._highlighted.setGeometry(b.geometry)
                                    }, c)
                                }))
                            }
                        }
                    });
                    h("extend-esri") && (k.PopupBase = r);
                    return r
                })
        },
        "esri/graphic": function () {
            define("dojo/_base/declare dojo/_base/lang dojo/has ./kernel ./domUtils ./lang ./InfoTemplate ./geometry/jsonUtils ./symbols/jsonUtils".split(" "), function (r, p, a, g, q, h, k, l, e) {
                r = r(null, {
                    declaredClass: "esri.Graphic",
                    constructor: function (a, b, d,
                        g) {
                        a && !a.declaredClass ? (this.geometry = a.geometry ? l.fromJson(a.geometry) : null, this.symbol = a.symbol ? e.fromJson(a.symbol) : null, this.attributes = a.attributes || null, this.infoTemplate = a.infoTemplate ? new k(a.infoTemplate) : null) : (this.geometry = a, this.symbol = b, this.attributes = d, this.infoTemplate = g)
                    },
                    _shape: null,
                    _graphicsLayer: null,
                    _visible: !0,
                    visible: !0,
                    getDojoShape: function () {
                        return this._shape
                    },
                    getShapes: function () {
                        var a = [];
                        this._shape && a.push(this._shape);
                        this._bgShape && a.push(this._bgShape);
                        return a
                    },
                    getNode: function () {
                        var a =
                            this._shape && this._shape.getNode();
                        return a && a.nodeType ? a : null
                    },
                    getNodes: function () {
                        var a = this.getShapes(),
                            b, d, e = a.length,
                            g = [];
                        for (d = 0; d < e; d++)(b = a[d] && a[d].getNode()) && b.nodeType && g.push(b);
                        return g
                    },
                    getLayer: function () {
                        return this._layer
                    },
                    draw: function () {
                        var a = this._graphicsLayer;
                        a && a._draw(this, !0);
                        return this
                    },
                    setGeometry: function (a) {
                        this.geometry = a;
                        if (a = this._graphicsLayer) a._updateExtent(this), a._draw(this, !0);
                        return this
                    },
                    setSymbol: function (a, b) {
                        var d = this._graphicsLayer,
                            e = this._shape;
                        this.symbol =
                            a;
                        d && (b && e && d._removeShape(this), d._draw(this, !0));
                        return this
                    },
                    setAttributes: function (a) {
                        this.attributes = a;
                        this._clearCache();
                        return this
                    },
                    setInfoTemplate: function (a) {
                        this.infoTemplate = a;
                        return this
                    },
                    getInfoTemplate: function () {
                        return this._getEffInfoTemplate()
                    },
                    _getEffInfoTemplate: function () {
                        var a = this.getLayer();
                        return this.infoTemplate || a && a.infoTemplate
                    },
                    getTitle: function () {
                        var a = this.getInfoTemplate(),
                            b = a && a.title;
                        if (p.isFunction(b)) b = b.call(a, this);
                        else if (p.isString(b)) var d = (a = this.getLayer()) &&
                            a._getDateOpts,
                            b = h.substitute(this.attributes, b, {
                                first: !0,
                                dateFormat: d && d.call(a)
                            });
                        return b
                    },
                    getContent: function () {
                        var a = this.getInfoTemplate(),
                            b = a && a.content;
                        if (p.isFunction(b)) b = b.call(a, this);
                        else if (p.isString(b)) var d = (a = this.getLayer()) && a._getDateOpts,
                            b = h.substitute(this.attributes, b, {
                                dateFormat: d && d.call(a)
                            });
                        return b
                    },
                    attr: function (a, b) {
                        var d = this.getNodes(),
                            e, g = d.length;
                        for (e = 0; e < g; e++) null == b ? d[e].removeAttribute(a) : d[e].setAttribute(a, b);
                        return this
                    },
                    show: function () {
                        this.visible = this._visible = !0;
                        var a, b, d;
                        if (this.getShapes().length) {
                            a = this.getNodes();
                            d = a.length;
                            this.attr("data-hidden");
                            for (b = 0; b < d; b++) q.show(a[b])
                        } else this._graphicsLayer && this._graphicsLayer._draw(this, !0);
                        return this
                    },
                    hide: function () {
                        this.visible = this._visible = !1;
                        var a = this._graphicsLayer,
                            b, d;
                        if (a)
                            if ("canvas-2d" === a.surfaceType) a._removeShape(this);
                            else if (a = this.getNodes(), d = a.length) {
                            this.attr("data-hidden", "");
                            for (b = 0; b < d; b++) q.hide(a[b])
                        }
                        return this
                    },
                    toJson: function () {
                        var a = {};
                        this.geometry && (a.geometry = this.geometry.toJson());
                        this.attributes && (a.attributes = p.mixin({}, this.attributes));
                        this.symbol && (a.symbol = this.symbol.toJson());
                        this.infoTemplate && (a.infoTemplate = this.infoTemplate.toJson());
                        return a
                    },
                    _getView: function (a) {
                        return (a = (a = a || this.getLayer()) && a.getMap()) && a._getView()
                    },
                    _getDataValue: function (a, b, d, e) {
                        var g = this._getCacheItem(a, b);
                        if (void 0 === g.value) {
                            var s = null,
                                n = this.attributes,
                                f = a.field;
                            if (b.hasExpr) s = d.executeFunction(b.compiledFunc, d.createExecContext(this, this._getView(e)));
                            else if (p.isFunction(f)) s = f(this);
                            else if (n && (s = n[f], (a = a.normalizationField) && this._isValidNumber(s))) n = parseFloat(n[a]), s = this._isValidNumber(n) && 0 !== n ? s / n : null;
                            this._isValidNumber(s) || (s = null);
                            g.value = s
                        }
                        return g.value
                    },
                    _isValidNumber: function (a) {
                        return "number" === typeof a && !isNaN(a) && Infinity !== a && -Infinity !== a
                    },
                    _getCacheItem: function (a, b) {
                        var d = this._findCacheItem(a);
                        d ? d.version !== b.version && (d.version = b.version, d.value = void 0) : d = this._createCacheItem(a, b);
                        return d
                    },
                    _findCacheItem: function (a) {
                        var b, d = this._cache;
                        if (d) {
                            var e, g =
                                d.length;
                            for (e = 0; e < g; e++) {
                                var s = d[e];
                                if (s.variable === a) {
                                    b = s;
                                    break
                                }
                            }
                        }
                        return b
                    },
                    _createCacheItem: function (a, b) {
                        var d = this._cache;
                        d || (d = this._cache = []);
                        var e = {
                            variable: a,
                            version: b.version,
                            value: void 0
                        };
                        d.push(e);
                        return e
                    },
                    _clearCache: function () {
                        this._cache = null
                    }
                });
                r.prototype.getShape = r.prototype.getDojoShape;
                a("extend-esri") && (g.Graphic = r);
                return r
            })
        },
        "esri/InfoTemplate": function () {
            define(["dojo/_base/declare", "dojo/_base/lang", "dojo/has", "./kernel", "./lang"], function (r, p, a, g, q) {
                r = r(null, {
                    declaredClass: "esri.InfoTemplate",
                    constructor: function (a, g) {
                        a && p.isObject(a) && !p.isFunction(a) ? p.mixin(this, a) : (this.title = a || "${*}", this.content = g || "${*}")
                    },
                    setTitle: function (a) {
                        this.title = a;
                        return this
                    },
                    setContent: function (a) {
                        this.content = a;
                        return this
                    },
                    toJson: function () {
                        return q.fixJson({
                            title: this.title,
                            content: this.content
                        })
                    }
                });
                a("extend-esri") && (g.InfoTemplate = r);
                return r
            })
        },
        "esri/symbols/jsonUtils": function () {
            define("dojo/_base/lang dojo/has ../kernel ./SimpleMarkerSymbol ./PictureMarkerSymbol ./SimpleLineSymbol ./CartographicLineSymbol ./SimpleFillSymbol ./PictureFillSymbol ./TextSymbol".split(" "),
                function (r, p, a, g, q, h, k, l, e, c) {
                    var b = {
                        fromJson: function (a) {
                            var b = null;
                            switch (a.type) {
                            case "esriSMS":
                                b = new g(a);
                                break;
                            case "esriPMS":
                                b = new q(a);
                                break;
                            case "esriTS":
                                b = new c(a);
                                break;
                            case "esriSLS":
                                b = void 0 !== a.cap ? new k(a) : new h(a);
                                break;
                            case "esriCLS":
                                b = new k(a);
                                break;
                            case "esriSFS":
                                b = new l(a);
                                break;
                            case "esriPFS":
                                b = new e(a)
                            }
                            return b
                        },
                        getShapeDescriptors: function (a) {
                            return a && a.getShapeDescriptors ? a.getShapeDescriptors() : {
                                defaultShape: null,
                                fill: null,
                                stroke: null
                            }
                        }
                    };
                    p("extend-esri") && r.mixin(r.getObject("symbol", !0, a), b);
                    return b
                })
        },
        "esri/symbols/PictureMarkerSymbol": function () {
            define("dojo/_base/declare dojo/_base/lang dojo/sniff dojox/gfx/_base ../kernel ../lang ../urlUtils ./MarkerSymbol".split(" "), function (r, p, a, g, q, h, k, l) {
                var e = {
                    url: "",
                    width: 12,
                    height: 12,
                    angle: 0,
                    xoffset: 0,
                    yoffset: 0
                };
                r = r(l, {
                    declaredClass: "esri.symbol.PictureMarkerSymbol",
                    type: "picturemarkersymbol",
                    constructor: function (c, b, d) {
                        c ? p.isString(c) ? (this.url = c, b && (this.width = b), d && (this.height = d)) : (this.width = g.pt2px(c.width), this.height = g.pt2px(c.height),
                            b = c.imageData, !(9 > a("ie")) && b && (d = this.url, this.url = "data:" + (c.contentType || "image") + ";base64," + b, this.imageData = d)) : (p.mixin(this, e), this.width = g.pt2px(this.width), this.height = g.pt2px(this.height))
                    },
                    getStroke: function () {
                        return null
                    },
                    getFill: function () {
                        return null
                    },
                    setWidth: function (a) {
                        this.width = a;
                        return this
                    },
                    setHeight: function (a) {
                        this.height = a;
                        return this
                    },
                    setUrl: function (a) {
                        a !== this.url && (delete this.imageData, delete this.contentType);
                        this.url = a;
                        return this
                    },
                    getShapeDescriptors: function () {
                        return {
                            defaultShape: {
                                type: "image",
                                x: -Math.round(this.width / 2),
                                y: -Math.round(this.height / 2),
                                width: this.width,
                                height: this.height,
                                src: this.url || ""
                            },
                            fill: null,
                            stroke: null
                        }
                    },
                    toJson: function () {
                        var a = this.url,
                            b = this.imageData;
                        if (0 === a.indexOf("data:")) var d = a,
                            a = b,
                            b = d.indexOf(";base64,") + 8,
                            b = d.substr(b);
                        if (p.isString(a) && (0 === a.indexOf("/") || 0 === a.indexOf("//") || 0 === a.indexOf("./") || 0 === a.indexOf("../"))) a = k.getAbsoluteUrl(a);
                        var d = g.px2pt(this.width),
                            d = isNaN(d) ? void 0 : d,
                            e = g.px2pt(this.height),
                            e = isNaN(e) ? void 0 : e,
                            a = h.fixJson(p.mixin(this.inherited("toJson",
                                arguments), {
                                type: "esriPMS",
                                url: a,
                                imageData: b,
                                contentType: this.contentType,
                                width: d,
                                height: e
                            }));
                        delete a.color;
                        delete a.size;
                        a.imageData || delete a.imageData;
                        return a
                    }
                });
                r.defaultProps = e;
                a("extend-esri") && (p.setObject("symbol.PictureMarkerSymbol", r, q), q.symbol.defaultPictureMarkerSymbol = e);
                return r
            })
        },
        "esri/symbols/CartographicLineSymbol": function () {
            define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./SimpleLineSymbol".split(" "), function (r, p, a, g, q,
                h, k, l) {
                var e = {
                        STYLE_SOLID: "solid",
                        STYLE_DASH: "dash",
                        STYLE_DOT: "dot",
                        STYLE_DASHDOT: "dashdot",
                        STYLE_DASHDOTDOT: "longdashdotdot",
                        STYLE_NULL: "none",
                        STYLE_INSIDE_FRAME: "insideframe",
                        STYLE_SHORTDASH: "shortdash",
                        STYLE_SHORTDOT: "shortdot",
                        STYLE_SHORTDASHDOT: "shortdashdot",
                        STYLE_SHORTDASHDOTDOT: "shortdashdotdot",
                        STYLE_LONGDASH: "longdash",
                        STYLE_LONGDASHDOT: "longdashdot",
                        CAP_BUTT: "butt",
                        CAP_ROUND: "round",
                        CAP_SQUARE: "square",
                        JOIN_MITER: "miter",
                        JOIN_ROUND: "round",
                        JOIN_BEVEL: "bevel"
                    },
                    c = {
                        color: [0, 0, 0, 1],
                        style: e.STYLE_SOLID,
                        width: 1,
                        cap: e.CAP_BUTT,
                        join: e.JOIN_MITER,
                        miterLimit: 10
                    };
                r = r(l, {
                    declaredClass: "esri.symbol.CartographicLineSymbol",
                    type: "cartographiclinesymbol",
                    _caps: {
                        butt: "esriLCSButt",
                        round: "esriLCSRound",
                        square: "esriLCSSquare"
                    },
                    _joins: {
                        miter: "esriLJSMiter",
                        round: "esriLJSRound",
                        bevel: "esriLJSBevel"
                    },
                    constructor: function (b, d, e, g, s, n) {
                        b ? p.isString(b) ? (this.style = b, d && (this.color = d), void 0 !== e && (this.width = e), g && (this.cap = g), s && (this.join = s), void 0 !== n && (this.miterLimit = n)) : (this.cap = k.valueOf(this._caps, b.cap), this.join =
                            k.valueOf(this._joins, b.join), this.width = q.pt2px(b.width), this.miterLimit = q.pt2px(b.miterLimit)) : (p.mixin(this, c), this.color = new a(this.color), this.width = q.pt2px(this.width), this.miterLimit = q.pt2px(this.miterLimit))
                    },
                    setCap: function (a) {
                        this.cap = a;
                        return this
                    },
                    setJoin: function (a) {
                        this.join = a;
                        return this
                    },
                    setMiterLimit: function (a) {
                        this.miterLimit = a;
                        return this
                    },
                    getStroke: function () {
                        return p.mixin(this.inherited("getStroke", arguments), {
                            cap: this.cap,
                            join: this.join === e.JOIN_MITER ? this.miterLimit : this.join
                        })
                    },
                    getFill: function () {
                        return null
                    },
                    getShapeDescriptors: function () {
                        return {
                            defaultShape: {
                                type: "path",
                                path: "M -15,0 L 15,0 E"
                            },
                            fill: null,
                            stroke: this.getStroke()
                        }
                    },
                    toJson: function () {
                        var a = q.px2pt(this.miterLimit),
                            a = isNaN(a) ? void 0 : a;
                        return k.fixJson(p.mixin(this.inherited("toJson", arguments), {
                            type: "esriCLS",
                            cap: this._caps[this.cap],
                            join: this._joins[this.join],
                            miterLimit: a
                        }))
                    }
                });
                p.mixin(r, e);
                r.defaultProps = c;
                g("extend-esri") && (p.setObject("symbol.CartographicLineSymbol", r, h), h.symbol.defaultCartographicLineSymbol =
                    c);
                return r
            })
        },
        "esri/symbols/SimpleFillSymbol": function () {
            define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./FillSymbol ./SimpleLineSymbol require".split(" "), function (r, p, a, g, q, h, k, l, e, c) {
                var b = {
                        STYLE_SOLID: "solid",
                        STYLE_NULL: "none",
                        STYLE_HORIZONTAL: "horizontal",
                        STYLE_VERTICAL: "vertical",
                        STYLE_FORWARD_DIAGONAL: "forwarddiagonal",
                        STYLE_BACKWARD_DIAGONAL: "backwarddiagonal",
                        STYLE_CROSS: "cross",
                        STYLE_DIAGONAL_CROSS: "diagonalcross",
                        STYLE_FORWARDDIAGONAL: "forwarddiagonal",
                        STYLE_BACKWARDDIAGONAL: "backwarddiagonal",
                        STYLE_DIAGONALCROSS: "diagonalcross"
                    },
                    d = {
                        style: b.STYLE_SOLID,
                        color: [0, 0, 0, 0.25]
                    };
                r = r(l, {
                    declaredClass: "esri.symbol.SimpleFillSymbol",
                    type: "simplefillsymbol",
                    _styles: {
                        solid: "esriSFSSolid",
                        none: "esriSFSNull",
                        horizontal: "esriSFSHorizontal",
                        vertical: "esriSFSVertical",
                        forwarddiagonal: "esriSFSForwardDiagonal",
                        backwarddiagonal: "esriSFSBackwardDiagonal",
                        cross: "esriSFSCross",
                        diagonalcross: "esriSFSDiagonalCross"
                    },
                    constructor: function (b, c, g) {
                        b ? p.isString(b) ? (this.style =
                            b, void 0 !== c && (this.outline = c), void 0 !== g && (this.color = g)) : this.style = k.valueOf(this._styles, b.style) : (p.mixin(this, d), this.outline = new e(this.outline), this.color = new a(this.color))
                    },
                    setStyle: function (a) {
                        this.style = a;
                        return this
                    },
                    getStroke: function () {
                        return this.outline && this.outline.getStroke()
                    },
                    getFill: function () {
                        var a = this.style;
                        return a === b.STYLE_NULL ? null : a === b.STYLE_SOLID ? this.color : p.mixin({}, q.defaultPattern, {
                            src: c.toUrl("../images/symbol/sfs/" + a + ".png"),
                            width: 10,
                            height: 10
                        })
                    },
                    getShapeDescriptors: function () {
                        return {
                            defaultShape: {
                                type: "path",
                                path: "M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"
                            },
                            fill: this.getFill(),
                            stroke: this.getStroke()
                        }
                    },
                    toJson: function () {
                        return k.fixJson(p.mixin(this.inherited("toJson", arguments), {
                            type: "esriSFS",
                            style: this._styles[this.style]
                        }))
                    }
                });
                p.mixin(r, b);
                r.defaultProps = d;
                g("extend-esri") && (p.setObject("symbol.SimpleFillSymbol", r, h), h.symbol.defaultSimpleFillSymbol = d);
                return r
            })
        },
        "esri/symbols/FillSymbol": function () {
            define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ./Symbol ./SimpleLineSymbol".split(" "),
                function (r, p, a, g, q, h) {
                    r = r(q, {
                        declaredClass: "esri.symbol.FillSymbol",
                        constructor: function (a) {
                            a && (p.isObject(a) && a.outline) && (this.outline = new h(a.outline))
                        },
                        setOutline: function (a) {
                            this.outline = a;
                            return this
                        },
                        toJson: function () {
                            var a = this.inherited("toJson", arguments);
                            this.outline && (a.outline = this.outline.toJson());
                            return a
                        }
                    });
                    a("extend-esri") && p.setObject("symbol.FillSymbol", r, g);
                    return r
                })
        },
        "esri/symbols/PictureFillSymbol": function () {
            define("dojo/_base/declare dojo/_base/lang dojo/sniff dojox/gfx/_base ../kernel ../lang ../urlUtils ./FillSymbol".split(" "),
                function (r, p, a, g, q, h, k, l) {
                    var e = {
                        xoffset: 0,
                        yoffset: 0,
                        width: 12,
                        height: 12
                    };
                    r = r(l, {
                        declaredClass: "esri.symbol.PictureFillSymbol",
                        type: "picturefillsymbol",
                        xscale: 1,
                        yscale: 1,
                        xoffset: 0,
                        yoffset: 0,
                        constructor: function (c, b, d, m) {
                            c ? p.isString(c) ? (this.url = c, void 0 !== b && (this.outline = b), void 0 !== d && (this.width = d), void 0 !== m && (this.height = m)) : (this.xoffset = g.pt2px(c.xoffset), this.yoffset = g.pt2px(c.yoffset), this.width = g.pt2px(c.width), this.height = g.pt2px(c.height), b = c.imageData, !(9 > a("ie")) && b && (d = this.url, this.url =
                                "data:" + (c.contentType || "image") + ";base64," + b, this.imageData = d)) : (p.mixin(this, e), this.width = g.pt2px(this.width), this.height = g.pt2px(this.height))
                        },
                        setWidth: function (a) {
                            this.width = a;
                            return this
                        },
                        setHeight: function (a) {
                            this.height = a;
                            return this
                        },
                        setOffset: function (a, b) {
                            this.xoffset = a;
                            this.yoffset = b;
                            return this
                        },
                        setUrl: function (a) {
                            a !== this.url && (delete this.imageData, delete this.contentType);
                            this.url = a;
                            return this
                        },
                        setXScale: function (a) {
                            this.xscale = a;
                            return this
                        },
                        setYScale: function (a) {
                            this.yscale = a;
                            return this
                        },
                        getStroke: function () {
                            return this.outline && this.outline.getStroke()
                        },
                        getFill: function () {
                            return p.mixin({}, g.defaultPattern, {
                                src: this.url,
                                width: this.width * this.xscale,
                                height: this.height * this.yscale,
                                x: this.xoffset,
                                y: this.yoffset
                            })
                        },
                        getShapeDescriptors: function () {
                            return {
                                defaultShape: {
                                    type: "path",
                                    path: "M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"
                                },
                                fill: this.getFill(),
                                stroke: this.getStroke()
                            }
                        },
                        toJson: function () {
                            var a = this.url,
                                b = this.imageData;
                            if (0 === a.indexOf("data:")) var d = a,
                                a = b,
                                b = d.indexOf(";base64,") +
                                8,
                                b = d.substr(b);
                            if (p.isString(a) && (0 === a.indexOf("/") || 0 === a.indexOf("//") || 0 === a.indexOf("./") || 0 === a.indexOf("../"))) a = k.getAbsoluteUrl(a);
                            var d = g.px2pt(this.width),
                                d = isNaN(d) ? void 0 : d,
                                e = g.px2pt(this.height),
                                e = isNaN(e) ? void 0 : e,
                                l = g.px2pt(this.xoffset),
                                l = isNaN(l) ? void 0 : l,
                                s = g.px2pt(this.yoffset),
                                s = isNaN(s) ? void 0 : s,
                                a = h.fixJson(p.mixin(this.inherited("toJson", arguments), {
                                    type: "esriPFS",
                                    url: a,
                                    imageData: b,
                                    contentType: this.contentType,
                                    width: d,
                                    height: e,
                                    xoffset: l,
                                    yoffset: s,
                                    xscale: this.xscale,
                                    yscale: this.yscale
                                }));
                            a.imageData || delete a.imageData;
                            return a
                        }
                    });
                    r.defaultProps = e;
                    a("extend-esri") && (p.setObject("symbol.PictureFillSymbol", r, q), q.symbol.defaultPictureFillSymbol = e);
                    return r
                })
        },
        "esri/symbols/TextSymbol": function () {
            define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ../lang ../Color ./Symbol ./Font".split(" "), function (r, p, a, g, q, h, k, l, e) {
                var c = {
                        type: "textsymbol",
                        x: 0,
                        y: 0,
                        text: "",
                        rotated: !1,
                        kerning: !0,
                        color: [0, 0, 0, 1],
                        font: g.defaultFont,
                        angle: 0,
                        xoffset: 0,
                        yoffset: 0,
                        horizontalAlignment: "center"
                    },
                    b = {
                        start: "left",
                        middle: "center",
                        end: "right"
                    },
                    d = {
                        left: "start",
                        center: "middle",
                        right: "end",
                        justify: "start"
                    },
                    m = {
                        top: "text-before-edge",
                        middle: "central",
                        baseline: "alphabetic",
                        bottom: "text-after-edge"
                    },
                    t = document.createElement("canvas");
                r = r(l, {
                    declaredClass: "esri.symbol.TextSymbol",
                    angle: 0,
                    xoffset: 0,
                    yoffset: 0,
                    constructor: function (a, b, f) {
                        p.mixin(this, c);
                        this.font = new e(this.font);
                        this.color = new k(this.color);
                        a && (p.isObject(a) ? (p.mixin(this, a), this.color && h.isDefined(this.color[0]) && (this.color = k.toDojoColor(this.color)),
                            this.type = "textsymbol", this.font = new e(this.font), this.xoffset = g.pt2px(this.xoffset), this.yoffset = g.pt2px(this.yoffset), this.angle && (this.angle *= -1), this.haloSize && (this.haloSize = g.pt2px(this.haloSize)), this.haloColor && (this.haloColor = k.toDojoColor(this.haloColor))) : (this.text = a, b && (this.font = b), f && (this.color = f)));
                        this.setAlign(this.align || this.getSVGAlign())
                    },
                    setFont: function (a) {
                        this.font = a;
                        return this
                    },
                    setSize: function (a) {
                        this.font.size = a;
                        return this
                    },
                    setAngle: function (a) {
                        this.angle = a;
                        return this
                    },
                    setOffset: function (a, b) {
                        this.xoffset = a;
                        this.yoffset = b;
                        return this
                    },
                    setHaloColor: function (a) {
                        this.haloColor = a;
                        return this
                    },
                    setHaloSize: function (a) {
                        this.haloSize = a;
                        return this
                    },
                    setAlign: function (a) {
                        this.align = a;
                        this.setHorizontalAlignment(a && b[a.toLowerCase()] || "center");
                        return this
                    },
                    setHorizontalAlignment: function (a) {
                        this.horizontalAlignment = a;
                        return this
                    },
                    getSVGAlign: function () {
                        var a = this.horizontalAlignment;
                        return a = a && d[a.toLowerCase()] || "middle"
                    },
                    setVerticalAlignment: function (a) {
                        this.verticalAlignment =
                            a;
                        return this
                    },
                    getSVGBaseline: function () {
                        var a = this.verticalAlignment;
                        return a && m[a.toLowerCase()] || "alphabetic"
                    },
                    getSVGBaselineShift: function () {
                        return "bottom" === this.verticalAlignment ? "super" : null
                    },
                    setDecoration: function (a) {
                        this.decoration = a;
                        this.font || this.setFont(new e);
                        this.font.setDecoration(a);
                        return this
                    },
                    setRotated: function (a) {
                        this.rotated = a;
                        return this
                    },
                    setKerning: function (a) {
                        this.kerning = a;
                        return this
                    },
                    setText: function (a) {
                        this.text = a;
                        return this
                    },
                    getStroke: function () {
                        return null
                    },
                    getFill: function () {
                        return this.color
                    },
                    getWidth: function () {
                        var a = t && t.getContext && t.getContext("2d");
                        if (a) {
                            var b = this.font;
                            a.font = (b.style ? b.style : g.defaultFont.style) + " " + (b.weight ? b.weight : g.defaultFont.weight) + " " + (b.size ? b.size : g.defaultFont.size) + "px " + (b.family ? b.family : g.defaultFont.family);
                            return a.measureText(this.text).width
                        }
                        var a = this.getHeight(),
                            b = 0,
                            c, d;
                        for (c = 0; c < this.text.length; c++) d = this.text.charAt(c), b = d == d.toUpperCase() ? b + 0.7 * a : b + 0.5 * a;
                        return b
                    },
                    getHeight: function () {
                        return g.normalizedLength(this.font.size)
                    },
                    getShapeDescriptors: function () {
                        var a =
                            this.font,
                            b;
                        a && (b = {}, a.size && (b.size = a.size), a.style && (b.style = a.style), a.variant && (b.variant = a.variant), a.decoration && (b.decoration = a.decoration), a.weight && (b.weight = a.weight), a.family && (b.family = a.family));
                        return {
                            defaultShape: {
                                type: "text",
                                text: this.text,
                                x: 0,
                                y: this.getHeight() / 4,
                                align: "middle",
                                decoration: this.decoration || a && a.decoration,
                                rotated: this.rotated,
                                kerning: this.kerning
                            },
                            font: b,
                            fill: this.getFill(),
                            stroke: this.getStroke()
                        }
                    },
                    toJson: function () {
                        var a = g.px2pt(this.xoffset),
                            b = g.px2pt(this.yoffset),
                            c = g.px2pt(this.haloSize),
                            a = isNaN(a) ? void 0 : a,
                            b = isNaN(b) ? void 0 : b,
                            c = isNaN(c) ? void 0 : c;
                        return h.fixJson(p.mixin(this.inherited("toJson", arguments), {
                            type: "esriTS",
                            backgroundColor: this.backgroundColor,
                            borderLineColor: this.borderLineColor,
                            borderLineSize: this.borderLineSize,
                            haloSize: c,
                            haloColor: this.haloColor && k.toJsonColor(this.haloColor),
                            verticalAlignment: this.verticalAlignment,
                            horizontalAlignment: this.horizontalAlignment,
                            rightToLeft: this.rightToLeft,
                            width: this.width,
                            angle: this.angle && -1 * this.angle,
                            xoffset: a,
                            yoffset: b,
                            text: this.text,
                            rotated: this.rotated,
                            kerning: this.kerning,
                            font: this.font.toJson()
                        }))
                    }
                });
                p.mixin(r, {
                    ALIGN_START: "start",
                    ALIGN_MIDDLE: "middle",
                    ALIGN_END: "end",
                    DECORATION_NONE: "none",
                    DECORATION_UNDERLINE: "underline",
                    DECORATION_OVERLINE: "overline",
                    DECORATION_LINETHROUGH: "line-through"
                });
                r.defaultProps = c;
                a("extend-esri") && (p.setObject("symbol.TextSymbol", r, q), q.symbol.defaultTextSymbol = c);
                return r
            })
        },
        "esri/symbols/Font": function () {
            define("dojo/_base/declare dojo/_base/lang dojo/sniff dojox/gfx/_base ../kernel ../lang".split(" "),
                function (r, p, a, g, q, h) {
                    r = r(null, {
                        declaredClass: "esri.symbol.Font",
                        constructor: function (h, l, e, c, b) {
                            h ? p.isObject(h) ? p.mixin(this, h) : (this.size = h, parseFloat(this.size) == this.size && (this.size += "px"), void 0 !== l && (this.style = l), void 0 !== e && (this.variant = e), void 0 !== c && (this.weight = c), void 0 !== b && (this.family = b)) : p.mixin(this, g.defaultFont);
                            parseFloat(this.size) == this.size && (this.size += "pt");
                            9 > a("ie") && (this.size && p.isString(this.size) && -1 < this.size.indexOf("em")) && (this.size = g.pt2px(12 * parseFloat(this.size)) +
                                "px");
                            this.size = this._convert2PxSize(this.size)
                        },
                        setSize: function (a) {
                            this.size = this._convert2PxSize(a);
                            return this
                        },
                        _convert2PxSize: function (a) {
                            var h;
                            parseFloat(a) == a ? h = a : p.isString(a) && (-1 < a.indexOf("pt") ? h = g.pt2px(parseFloat(a)) : -1 < a.indexOf("px") ? h = parseFloat(a) : -1 < a.indexOf("em") ? h = g.pt2px(12 * parseFloat(a)) : -1 < a.indexOf("%") && (h = g.pt2px(0.12 * parseFloat(a))));
                            return h
                        },
                        setStyle: function (a) {
                            this.style = a;
                            return this
                        },
                        setVariant: function (a) {
                            this.variant = a;
                            return this
                        },
                        setWeight: function (a) {
                            this.weight =
                                a;
                            return this
                        },
                        setFamily: function (a) {
                            this.family = a;
                            return this
                        },
                        setDecoration: function (a) {
                            this.decoration = a;
                            return this
                        },
                        toJson: function () {
                            return h.fixJson({
                                size: g.px2pt(this.size),
                                style: this.style,
                                variant: this.variant,
                                decoration: this.decoration,
                                weight: this.weight,
                                family: this.family
                            })
                        }
                    });
                    p.mixin(r, {
                        STYLE_NORMAL: "normal",
                        STYLE_ITALIC: "italic",
                        STYLE_OBLIQUE: "oblique",
                        VARIANT_NORMAL: "normal",
                        VARIANT_SMALLCAPS: "small-caps",
                        WEIGHT_NORMAL: "normal",
                        WEIGHT_BOLD: "bold",
                        WEIGHT_BOLDER: "bolder",
                        WEIGHT_LIGHTER: "lighter"
                    });
                    a("extend-esri") && p.setObject("symbol.Font", r, q);
                    return r
                })
        },
        "esri/tasks/query": function () {
            define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/has ../kernel ../geometry/jsonUtils ./SpatialRelationship dojo/has!extend-esri?./QueryTask dojo/has!extend-esri?./RelationshipQuery dojo/has!extend-esri?./StatisticDefinition".split(" "), function (r, p, a, g, q, h, k, l) {
                var e = r(null, {
                    declaredClass: "esri.tasks.Query",
                    constructor: function () {
                        this.spatialRelationship = e.SPATIAL_REL_INTERSECTS
                    },
                    text: null,
                    where: "",
                    geometry: null,
                    groupByFieldsForStatistics: null,
                    objectIds: null,
                    returnGeometry: !1,
                    returnDistinctValues: !1,
                    orderByFields: null,
                    outSpatialReference: null,
                    outFields: null,
                    outStatistics: null,
                    timeExtent: null,
                    relationParam: null,
                    pixelSize: null,
                    distance: null,
                    units: null,
                    resultOffset: null,
                    resultRecordCount: null,
                    resultType: null,
                    sqlFormat: null,
                    quantizationParameters: null,
                    _units: {
                        meters: "esriSRUnit_Meter",
                        kilometers: "esriSRUnit_Kilometer",
                        feet: "esriSRUnit_Foot",
                        miles: "esriSRUnit_StatuteMile",
                        "nautical-miles": "esriSRUnit_NauticalMile",
                        "us-nautical-miles": "esriSRUnit_USNauticalMile"
                    },
                    toJson: function (c) {
                        var b = {
                                text: this.text,
                                where: this.where,
                                returnGeometry: this.returnGeometry,
                                spatialRel: this.spatialRelationship,
                                maxAllowableOffset: this.maxAllowableOffset,
                                geometryPrecision: this.geometryPrecision,
                                sqlFormat: this.sqlFormat
                            },
                            d = c && c.geometry || this.geometry,
                            m = this.objectIds,
                            h = this.outFields,
                            s = this.outSpatialReference,
                            n = this.groupByFieldsForStatistics,
                            f = this.orderByFields,
                            l = this.outStatistics;
                        c = this.distance;
                        d && (b.geometry = d, b.geometryType =
                            k.getJsonType(d), b.inSR = d.spatialReference.wkid || g.toJson(d.spatialReference.toJson()));
                        m && (b.objectIds = m.join(","));
                        h && (b.outFields = h.join(","));
                        this.returnDistinctValues && (b.returnDistinctValues = !0);
                        n && (b.groupByFieldsForStatistics = n.join(","));
                        f && (b.orderByFields = f.join(","));
                        if (l) {
                            var u = [];
                            a.forEach(l, function (a) {
                                u.push(a.toJson())
                            });
                            b.outStatistics = g.toJson(u)
                        }
                        s ? b.outSR = s.wkid || g.toJson(s.toJson()) : d && (b.outSR = d.spatialReference.wkid || g.toJson(d.spatialReference.toJson()));
                        d = this.timeExtent;
                        b.time = d ? d.toJson().join(",") : null;
                        if ((d = this.relationParam) && this.spatialRelationship === e.SPATIAL_REL_RELATION) b.relationParam = d;
                        c && (b.distance = this.distance, this.hasOwnProperty("units") ? b.units = this._units[this.units] || this._units.meters : (console.warn("esri/tasks/query::no distance unit provided, defaulting to meters"), b.units = this._units.meters));
                        this.hasOwnProperty("start") && (b.resultOffset = this.start, b.resultRecordCount = 10, "" === b.where && (b.where = "1\x3d1"));
                        this.hasOwnProperty("num") && (b.resultRecordCount =
                            this.num);
                        b.resultType = this.resultType;
                        b.pixelSize = this.pixelSize ? g.toJson(this.pixelSize.toJson()) : null;
                        b.multipatchOption = this.multipatchOption;
                        this.quantizationParameters && (b.quantizationParameters = g.toJson(this.quantizationParameters));
                        b._ts = this._ts;
                        return b
                    }
                });
                p.mixin(e, l);
                q("extend-esri") && p.setObject("tasks.Query", e, h);
                return e
            })
        },
        "esri/tasks/SpatialRelationship": function () {
            define(["dojo/_base/lang", "dojo/has", "../kernel"], function (r, p, a) {
                var g = {
                    SPATIAL_REL_INTERSECTS: "esriSpatialRelIntersects",
                    SPATIAL_REL_CONTAINS: "esriSpatialRelContains",
                    SPATIAL_REL_CROSSES: "esriSpatialRelCrosses",
                    SPATIAL_REL_ENVELOPEINTERSECTS: "esriSpatialRelEnvelopeIntersects",
                    SPATIAL_REL_INDEXINTERSECTS: "esriSpatialRelIndexIntersects",
                    SPATIAL_REL_OVERLAPS: "esriSpatialRelOverlaps",
                    SPATIAL_REL_TOUCHES: "esriSpatialRelTouches",
                    SPATIAL_REL_WITHIN: "esriSpatialRelWithin",
                    SPATIAL_REL_RELATION: "esriSpatialRelRelation"
                };
                p("extend-esri") && r.setObject("tasks._SpatialRelationship", g, a);
                return g
            })
        },
        "esri/plugins/popupManager": function () {
            define(["../PopupManager"],
                function (r) {
                    return {
                        add: function (p, a) {
                            p.popupManager || (p.popupManager = new r(a), p.popupManager.setMap(p))
                        },
                        remove: function (p) {
                            var a = p.popupManager;
                            a && (a.unsetMap(), p.popupManager = void 0)
                        }
                    }
                })
        },
        "esri/PopupManager": function () {
            define("./geometry/Extent ./geometry/ScreenPoint ./kernel ./layerUtils ./tasks/query dijit/registry dojo/_base/array dojo/_base/declare dojo/_base/Deferred dojo/_base/lang dojo/has dojo/on dojo/promise/all dojo/Stateful require".split(" "), function (r, p, a, g, q, h, k, l, e, c, b, d, m, t, s) {
                var n;
                l = l(t, {
                    declaredClass: "esri.PopupManager",
                    enabled: !1,
                    map: null,
                    _mapClickHandle: null,
                    _featureLayersCache: {},
                    constructor: function (a) {
                        this._mapClickHandler = c.hitch(this, this._mapClickHandler)
                    },
                    setMap: function (a) {
                        if (this.map)
                            if (a !== this.map) this.unsetMap();
                            else return;
                        this.map = a;
                        this._setupClickHandler()
                    },
                    unsetMap: function () {
                        this.map && (this.map = null);
                        this._mapClickHandle && (this._mapClickHandle.remove(), this._mapClickHandle = null)
                    },
                    getMapLayer: function (a) {
                        var b;
                        if (a && (b = a.getLayer()))
                            if (a = b.id, this._featureLayersCache[a]) {
                                var c =
                                    a.lastIndexOf("_"); - 1 < c && (a = a.substring(0, c), b = this.map.getLayer(a))
                            }
                        return b
                    },
                    _enabledSetter: function (a) {
                        this.enabled = a;
                        this._setupClickHandler()
                    },
                    _setupClickHandler: function () {
                        this._mapClickHandle && (this._mapClickHandle.remove(), this._mapClickHandle = null);
                        this.enabled && this.map && (this._mapClickHandle = this.map.on("click", this._mapClickHandler))
                    },
                    _mapClickHandler: function (a) {
                        var b = this.map.infoWindow,
                            c = a.graphic;
                        b && this.map.loaded && (b.clearFeatures && b.setFeatures ? this._showPopup(a) : c && c.getInfoTemplate() &&
                            this._showInfoWindow(c, a.mapPoint))
                    },
                    _showPopup: function (a) {
                        var b = this.map,
                            c = b.infoWindow,
                            d = this,
                            g = [],
                            m = [b.graphics].concat(k.map(b.graphicsLayerIds, b.getLayer, b));
                        k.forEach(m, function (a) {
                            a && (a.loaded && a.infoTemplate && !a.suspended) && g.push(a)
                        });
                        var n = [];
                        k.forEach(b.layerIds, function (a) {
                            (a = b.getLayer(a)) && (a.loaded && !a.suspended) && (d._isImageServiceLayer(a) && a.infoTemplate ? g.push(a) : "esri.layers.WMSLayer" === a.declaredClass && a.getFeatureInfoURL ? g.push(a) : ("esri.layers.ArcGISDynamicMapServiceLayer" ===
                                a.declaredClass || "esri.layers.ArcGISTiledMapServiceLayer" === a.declaredClass) && a.infoTemplates && n.push(a))
                        });
                        this._getSubLayerFeatureLayers(n).then(function (m) {
                            g = g.concat(m);
                            m = null;
                            a.graphic && (a.graphic.getInfoTemplate() && !d._isImageServiceLayer(a.graphic._layer)) && (m = a.graphic);
                            if (g.length || m) {
                                var n = d._calculateClickTolerance(g),
                                    h = a.screenPoint,
                                    s = b.toMap(new p(h.x - n, h.y + n)),
                                    n = b.toMap(new p(h.x + n, h.y - n)),
                                    l = new r(s.x, s.y, n.x, n.y, b.spatialReference);
                                if (l = l.intersects(b.extent)) {
                                    var t = new q,
                                        v = !!m,
                                        x = !0,
                                        s = k.map(g, function (c) {
                                            var g;
                                            t.timeExtent = c.useMapTime ? b.timeExtent : null;
                                            if (d._isImageServiceLayer(c)) t.geometry = a.mapPoint, x = !1, g = c.queryVisibleRasters(t, {
                                                rasterAttributeTableFieldPrefix: "Raster.",
                                                returnDomainValues: !0
                                            }), g.addCallback(function () {
                                                var a = c.getVisibleRasters();
                                                v = v || 0 < a.length;
                                                return a
                                            });
                                            else if ("esri.layers.WMSLayer" === c.declaredClass) {
                                                g = new e;
                                                var m = c._getPopupGraphic(b, a.screenPoint);
                                                m ? (g.resolve([m]), v = !0) : g.resolve([])
                                            } else d._featureLayersCache[c.id] || "function" === typeof c.queryFeatures &&
                                                (0 === c.currentMode || 1 === c.currentMode) ? (t.geometry = l, g = c.queryFeatures(t), g.addCallback(function (a) {
                                                    a = a.features;
                                                    a = k.filter(a, function (a) {
                                                        return a.visible
                                                    });
                                                    v = v || 0 < a.length;
                                                    return a
                                                })) : (g = new e, m = k.filter(c.graphics, function (a) {
                                                    return a && a.visible && l.intersects(a.geometry)
                                                }), v = v || 0 < m.length, g.resolve(m));
                                            return g
                                        });
                                    m && (n = new e, n.resolve([m]), s.unshift(n));
                                    !k.some(s, function (a) {
                                        return !a.isFulfilled()
                                    }) && !v ? (c.hide(), c.clearFeatures()) : (c.setFeatures(s), c.show(a.mapPoint, {
                                        closestFirst: x
                                    }))
                                }
                            }
                        })
                    },
                    _getSubLayerFeatureLayers: function (a,
                        b) {
                        var c = b || new e,
                            h = [],
                            l = a.length,
                            t = Math.floor(this.map.extent.getWidth() / this.map.width),
                            q = this.map.getScale(),
                            p = !1,
                            r = this,
                            H = 0;
                        a: for (; H < l; H++) {
                            var D = a[H],
                                F = D.dynamicLayerInfos || D.layerInfos;
                            if (F) {
                                var E = null;
                                if (D._params && (D._params.layers || D._params.dynamicLayers)) E = D.visibleLayers;
                                for (var E = g._getVisibleLayers(F, E), Q = g._getLayersForScale(q, F), R = F.length, G = 0; G < R; G++) {
                                    var I = F[G],
                                        P = I.id,
                                        K = D.infoTemplates[P];
                                    if (!I.subLayerIds && K && K.infoTemplate && -1 < k.indexOf(E, P) && -1 < k.indexOf(Q, P)) {
                                        if (!n) {
                                            p = !0;
                                            break a
                                        }
                                        var J =
                                            D.id + "_" + P,
                                            O = this._featureLayersCache[J];
                                        if (!O || !O.loadError) O || ((O = K.layerUrl) || (O = I.source ? this._getLayerUrl(D.url, "/dynamicLayer") : this._getLayerUrl(D.url, P)), O = new n(O, {
                                                id: J,
                                                drawMode: !1,
                                                mode: n.MODE_SELECTION,
                                                outFields: this._getOutFields(K.infoTemplate),
                                                resourceInfo: K.resourceInfo,
                                                source: I.source
                                            }), this._featureLayersCache[J] = O), O.setDefinitionExpression(D.layerDefinitions && D.layerDefinitions[P]), O.setGDBVersion(D.gdbVersion), O.setInfoTemplate(K.infoTemplate), O.setMaxAllowableOffset(t), O.setUseMapTime(!!D.useMapTime),
                                            D.layerDrawingOptions && (D.layerDrawingOptions[P] && D.layerDrawingOptions[P].renderer) && O.setRenderer(D.layerDrawingOptions[P].renderer), h.push(O)
                                    }
                                }
                            }
                        }
                        if (p) {
                            var W = new e;
                            s(["./layers/FeatureLayer"], function (a) {
                                n = a;
                                W.resolve()
                            });
                            W.then(function () {
                                r._getSubLayerFeatureLayers(a, c)
                            })
                        } else {
                            var T = [];
                            k.forEach(h, function (a) {
                                if (!a.loaded) {
                                    var b = new e;
                                    d.once(a, "load, error", function () {
                                        b.resolve()
                                    });
                                    T.push(b.promise)
                                }
                            });
                            T.length ? m(T).then(function () {
                                h = k.filter(h, function (a) {
                                    return !a.loadError && a.isVisibleAtScale(q)
                                });
                                c.resolve(h)
                            }) : (h = k.filter(h, function (a) {
                                return a.isVisibleAtScale(q)
                            }), c.resolve(h))
                        }
                        return c.promise
                    },
                    _getLayerUrl: function (a, b) {
                        var c = a.indexOf("?");
                        return -1 === c ? a + "/" + b : a.substring(0, c) + "/" + b + a.substring(c)
                    },
                    _getOutFields: function (a) {
                        var b;
                        a.info && "esri.dijit.PopupTemplate" === a.declaredClass ? (b = [], k.forEach(a.info.fieldInfos, function (a) {
                            var c = a.fieldName && a.fieldName.toLowerCase();
                            c && ("shape" !== c && 0 !== c.indexOf("relationships/")) && b.push(a.fieldName)
                        })) : b = ["*"];
                        return b
                    },
                    _calculateClickTolerance: function (a) {
                        var b =
                            6,
                            c, d;
                        k.forEach(a, function (a) {
                            if (c = a.renderer) "esri.renderer.SimpleRenderer" === c.declaredClass ? ((d = c.symbol) && d.xoffset && (b = Math.max(b, Math.abs(d.xoffset))), d && d.yoffset && (b = Math.max(b, Math.abs(d.yoffset)))) : ("esri.renderer.UniqueValueRenderer" === c.declaredClass || "esri.renderer.ClassBreaksRenderer" === c.declaredClass) && k.forEach(c.infos, function (a) {
                                (d = a.symbol) && d.xoffset && (b = Math.max(b, Math.abs(d.xoffset)));
                                d && d.yoffset && (b = Math.max(b, Math.abs(d.yoffset)))
                            })
                        });
                        return b
                    },
                    _showInfoWindow: function (a,
                        b) {
                        var d = this.map.infoWindow,
                            e = a.geometry,
                            e = e && "point" === e.type ? e : b,
                            g = a.getContent();
                        d.setTitle(a.getTitle());
                        if (g && c.isString(g.id)) {
                            var m = h.byId(g.id);
                            m && (m.set && /_PopupRenderer/.test(m.declaredClass)) && m.set("showTitle", !1)
                        }
                        d.setContent(g);
                        d.show(e)
                    },
                    _isImageServiceLayer: function (a) {
                        return "esri.layers.ArcGISImageServiceLayer" === a.declaredClass || "esri.layers.ArcGISImageServiceVectorLayer" === a.declaredClass
                    }
                });
                b("extend-esri") && (a.PopupManager = l);
                return l
            })
        },
        "esri/layerUtils": function () {
            define(["dojo/_base/lang",
"dojo/_base/array", "dojo/_base/json", "dojo/has", "./kernel"], function (r, p, a, g, q) {
                var h = {
                    _serializeLayerDefinitions: function (g) {
                        var h = [],
                            e = !1,
                            c = /[:;]/;
                        if (g && (p.forEach(g, function (a, b) {
                                a && (h.push([b, a]), !e && c.test(a) && (e = !0))
                            }), 0 < h.length)) {
                            var b;
                            e ? (b = {}, p.forEach(h, function (a) {
                                b[a[0]] = a[1]
                            }), b = a.toJson(b)) : (b = [], p.forEach(h, function (a) {
                                b.push(a[0] + ":" + a[1])
                            }), b = b.join(";"));
                            return b
                        }
                        return null
                    },
                    _serializeTimeOptions: function (g, h) {
                        if (g) {
                            var e = [];
                            p.forEach(g, function (c, b) {
                                if (c) {
                                    var d = c.toJson();
                                    h && -1 !==
                                        p.indexOf(h, b) && (d.useTime = !1);
                                    e.push('"' + b + '":' + a.toJson(d))
                                }
                            });
                            if (e.length) return "{" + e.join(",") + "}"
                        }
                    },
                    _getVisibleLayers: function (a, g) {
                        var e = [],
                            c, b, d;
                        if (!a) return e;
                        if (g) {
                            e = g.concat();
                            for (d = 0; d < a.length; d++) c = a[d], b = p.indexOf(a, c.id), c.subLayerIds && -1 < b && (e.splice(b, 1), e = e.concat(c.subLayerIds))
                        } else e = this._getDefaultVisibleLayers(a);
                        return e
                    },
                    _getDefaultVisibleLayers: function (a) {
                        var g = [],
                            e;
                        if (!a) return g;
                        for (e = 0; e < a.length; e++) 0 <= a[e].parentLayerId && -1 === p.indexOf(g, a[e].parentLayerId) && p.some(a,
                            function (c) {
                                return c.id === a[e].parentLayerId
                            }) || a[e].defaultVisibility && g.push(a[e].id);
                        return g
                    },
                    _getLayersForScale: function (a, g) {
                        var e = [];
                        if (0 < a && g) {
                            var c;
                            for (c = 0; c < g.length; c++)
                                if (!(0 <= g[c].parentLayerId && -1 === p.indexOf(e, g[c].parentLayerId) && p.some(g, function (a) {
                                        return a.id === g[c].parentLayerId
                                    })) && 0 <= g[c].id) {
                                    var b = !0,
                                        d = g[c].maxScale,
                                        m = g[c].minScale;
                                    if (0 < d || 0 < m) 0 < d && 0 < m ? b = d <= a && a <= m : 0 < d ? b = d <= a : 0 < m && (b = a <= m);
                                    b && e.push(g[c].id)
                                }
                        }
                        return e
                    }
                };
                g("extend-esri") && r.mixin(q, h);
                return h
            })
        },
        "esri/MapNavigationManager": function () {
            define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/event dojo/mouse dojo/keys dijit/focus ./kernel ./MouseEvents ./TouchEvents ./PointerEvents ./config ./sniff ./lang ./fx ./graphic ./tileUtils ./geometry/ScreenPoint ./geometry/Extent ./geometry/Rect ./geometry/mathUtils ./symbols/SimpleFillSymbol".split(" "),
                function (r, p, a, g, q, h, k, l, e, c, b, d, m, t, s, n, f, y, u, w, C, x, v) {
                    var A = g.connect,
                        z = g.disconnect,
                        H = t("chrome"),
                        D = t("safari"),
                        F = [k.NUMPAD_PLUS, 61, 187, k.NUMPAD_MINUS, 173, 189, k.UP_ARROW, k.NUMPAD_8, k.RIGHT_ARROW, k.NUMPAD_6, k.DOWN_ARROW, k.NUMPAD_2, k.LEFT_ARROW, k.NUMPAD_4, k.PAGE_UP, k.NUMPAD_9, k.PAGE_DOWN, k.NUMPAD_3, k.END, k.NUMPAD_1, k.HOME, k.NUMPAD_7];
                    r = r(null, {
                        declaredClass: "esri.MapNavigationManager",
                        eventModel: "",
                        constructor: function (a, e) {
                            this.map = a;
                            p.mixin(this, e);
                            var g = a.__container;
                            t("esri-pointer") ? (this.pointerEvents =
                                new d(g, {
                                    map: a
                                }), this.eventModel = "pointer") : t("esri-touch") ? (t("ios") || (this.mouseEvents = new c(g, {
                                map: a
                            })), this.touchEvents = new b(g, {
                                map: a,
                                mouseEvents: this.mouseEvents
                            }), this.eventModel = "touch") : (this.mouseEvents = new c(g, {
                                map: a
                            }), this.eventModel = "mouse");
                            this._zoomRect = new f(null, new v(m.defaults.map.zoomSymbol));
                            this._keyDx = this._keyDy = 0;
                            this._adjustPinch = p.hitch(this, this._adjustPinch);
                            this._adjustPinchEnd = p.hitch(this, this._adjustPinchEnd)
                        },
                        _panInit: function (a) {
                            var b = this.mouseEvents;
                            if (h.isLeft(a) &&
                                (this.map.isPan && !a.shiftKey) && (this._dragOrigin = new u(0, 0), p.mixin(this._dragOrigin, a.screenPoint), z(this._panStartHandle), z(this._panHandle), z(this._panEndHandle), this._panStartHandle = A(b, "onMouseDragStart", this, this._panStart), this._panHandle = A(b, "onMouseDrag", this, this._pan), this._panEndHandle = A(b, "onMouseUp", this, this._panEnd), H || D)) a.preventDefault(), l.curNode && l.curNode.blur()
                        },
                        _panStart: function (a) {
                            this.map.setCursor("move");
                            this.map.__panStart(a.screenPoint.x, a.screenPoint.y)
                        },
                        _pan: function (a) {
                            this.map.__pan(a.screenPoint.x -
                                this._dragOrigin.x, a.screenPoint.y - this._dragOrigin.y)
                        },
                        _panEnd: function (a) {
                            z(this._panStartHandle);
                            z(this._panHandle);
                            z(this._panEndHandle);
                            this._panStartHandle = this._panHandle = this._panEndHandle = null;
                            var b = this.map;
                            b.__panning && (b.__panEnd(a.screenPoint.x - this._dragOrigin.x, a.screenPoint.y - this._dragOrigin.y), b.resetMapCursor())
                        },
                        _zoomInit: function (a) {
                            var b = this.map,
                                c = this.pointerEvents || this.mouseEvents;
                            if ((h.isLeft(a) || a.pointerType) && b.isRubberBandZoom && a.shiftKey) b.setCursor("crosshair"), this._dragOrigin =
                                p.mixin({}, a.screenPoint), this._zoomDir = a.ctrlKey || a.metaKey ? -1 : 1, this.pointerEvents ? (this._zoomHandle = A(c, "onSwipeMove", this, this._zoom), this._zoomEndHandle = A(c, "onSwipeEnd", this, this._zoomEnd)) : (this._zoomHandle = A(c, "onMouseDrag", this, this._zoom), this._zoomEndHandle = A(c, "onMouseUp", this, this._zoomEnd)), H && a.preventDefault()
                        },
                        _zoom: function (a) {
                            var b = this.map,
                                c = this._normalizeRect(a).offset(b.__visibleRect.x, b.__visibleRect.y);
                            a = b.graphics;
                            var f = this._zoomRect;
                            f.geometry || b.setCursor("crosshair");
                            f.geometry && a.remove(f, !0);
                            var d = b.toMap(new u(c.x, c.y)),
                                c = b.toMap(new u(c.x + c.width, c.y + c.height)),
                                c = new C(d.x, d.y, c.x - d.x, d.y - c.y, b.spatialReference);
                            c._originOnly = !0;
                            f.setGeometry(c);
                            a.add(f, !0)
                        },
                        _zoomEnd: function (a) {
                            var b = this._zoomRect,
                                c = this.map,
                                f = c.extent,
                                d = c.spatialReference;
                            z(this._zoomHandle);
                            z(this._zoomEndHandle);
                            this._zoomHandle = this._zoomEndHandle = null;
                            if (c._canZoom(this._zoomDir) && b.getDojoShape()) {
                                c.graphics.remove(b);
                                b.geometry = null;
                                a = this._normalizeRect(a);
                                a.x += c.__visibleRect.x;
                                a.y += c.__visibleRect.y;
                                if (-1 === this._zoomDir) {
                                    var e = f.getWidth();
                                    a = (e * c.width / a.width - e) / 2;
                                    d = new w(f.xmin - a, f.ymin - a, f.xmax + a, f.ymax + a, d)
                                } else f = c.toMap({
                                    x: a.x,
                                    y: a.y + a.height
                                }), a = c.toMap({
                                    x: a.x + a.width,
                                    y: a.y
                                }), d = new w(f.x, f.y, a.x, a.y, d);
                                c._extentUtil(null, null, d)
                            }
                            b.getDojoShape() && c.graphics.remove(b, !0);
                            this._zoomDir = 0;
                            c.resetMapCursor()
                        },
                        _wheelZoom: function (a, b) {
                            var c = this.map;
                            if (!b) {
                                if (c.smartNavigation && !a.shiftKey && !c._isPanningOrZooming()) {
                                    c.disableScrollWheelZoom();
                                    this._setScrollWheelPan(!0);
                                    this._wheelPan(a);
                                    return
                                }
                                var f = a.timeStamp;
                                if (!s.isDefined(f) || 0 >= f) f = (new Date).getTime();
                                if (100 > (this._mwts ? f - this._mwts : f)) return;
                                this._mwts = f
                            }
                            c._canZoom(a.value) && c._extentUtil({
                                numLevels: a.value,
                                mapAnchor: a.mapPoint,
                                screenAnchor: a.screenPoint
                            })
                        },
                        _wheelPan: function (a) {
                            var b = this.map;
                            if (a.shiftKey && !b._isPanningOrZooming()) this._setScrollWheelPan(!1), b.enableScrollWheelZoom(), this._wheelZoom(a);
                            else {
                                var c = 0,
                                    f = 0;
                                t("ff") ? a.axis === a.HORIZONTAL_AXIS ? c = -a.detail : f = -a.detail : (c = a.wheelDeltaX, f = a.wheelDeltaY);
                                b.translate(c, f)
                            }
                        },
                        _setScrollWheelPan: function (a) {
                            this.map.isScrollWheelPan = a;
                            this.mouseEvents.enableMouseWheel(a);
                            z(this._mwMacHandle);
                            this._mwMacHandle = null;
                            a && (this._mwMacHandle = A(this.mouseEvents, "onMouseWheel", this, this._wheelPan))
                        },
                        _recenter: function (a) {
                            a.shiftKey && !this.map._isPanningOrZooming() && this.map.centerAt(a.mapPoint)
                        },
                        _recenterZoom: function (a) {
                            a.shiftKey && !this.map._isPanningOrZooming() && (a.value = a.ctrlKey || a.metaKey ? -1 : 1, this._wheelZoom(a, !0))
                        },
                        _dblClickZoom: function (a) {
                            this.map._isPanningOrZooming() ||
                                (a.value = 1, this._wheelZoom(a, !0))
                        },
                        _twoFingerTap: function (a) {
                            this.map._isPanningOrZooming() || (a.value = -1, this._wheelZoom(a, !0))
                        },
                        _keyDown: function (b) {
                            var c = b.keyCode,
                                f = this.map;
                            if (-1 !== a.indexOf(F, c)) {
                                if (c === k.NUMPAD_PLUS || 61 === c || 187 === c) f._extentUtil({
                                    numLevels: 1
                                });
                                else if (c === k.NUMPAD_MINUS || 173 === c || 189 === c) f._extentUtil({
                                    numLevels: -1
                                });
                                else {
                                    f.__panning || f.__panStart(0, 0);
                                    switch (c) {
                                    case k.UP_ARROW:
                                    case k.NUMPAD_8:
                                        this._keyDy += 10;
                                        break;
                                    case k.RIGHT_ARROW:
                                    case k.NUMPAD_6:
                                        this._keyDx -= 10;
                                        break;
                                    case k.DOWN_ARROW:
                                    case k.NUMPAD_2:
                                        this._keyDy -=
                                            10;
                                        break;
                                    case k.LEFT_ARROW:
                                    case k.NUMPAD_4:
                                        this._keyDx += 10;
                                        break;
                                    case k.PAGE_UP:
                                    case k.NUMPAD_9:
                                        this._keyDx -= 10;
                                        this._keyDy += 10;
                                        break;
                                    case k.PAGE_DOWN:
                                    case k.NUMPAD_3:
                                        this._keyDx -= 10;
                                        this._keyDy -= 10;
                                        break;
                                    case k.END:
                                    case k.NUMPAD_1:
                                        this._keyDx += 10;
                                        this._keyDy -= 10;
                                        break;
                                    case k.HOME:
                                    case k.NUMPAD_7:
                                        this._keyDx += 10;
                                        this._keyDy += 10;
                                        break;
                                    default:
                                        return
                                    }
                                    f.__pan(this._keyDx, this._keyDy)
                                }
                                q.stop(b)
                            }
                        },
                        _keyEnd: function (a) {
                            var b = this.map;
                            b.__panning && a.keyCode !== k.SHIFT && (b.__panEnd(this._keyDx, this._keyDy),
                                this._keyDx = this._keyDy = 0)
                        },
                        _swipeInit: function (a) {
                            var b = this.map,
                                b = b._zoomAnim || b._panAnim;
                            if (a.shiftKey) return !1;
                            b && b._active && (b.stop(), b._fire("onEnd", [b.node]));
                            this._dragOrigin = new u(0, 0);
                            p.mixin(this._dragOrigin, a.screenPoint);
                            z(this._swipeHandle);
                            z(this._swipeEndHandle);
                            this._swipeHandle = A(this.touchEvents || this.pointerEvents, "onSwipeMove", this, this._swipe);
                            this._swipeEndHandle = A(this.touchEvents || this.pointerEvents, "onSwipeEnd", this, this._swipeEnd)
                        },
                        _swipe: function (a) {
                            var b = this.map;
                            b.__panning ?
                                (this._panX = a.screenPoint.x, this._panY = a.screenPoint.y, b.__pan(a.screenPoint.x - this._dragOrigin.x, a.screenPoint.y - this._dragOrigin.y)) : (b.setCursor("move"), b.__panStart(a.screenPoint.x, a.screenPoint.y))
                        },
                        _swipeEnd: function (a) {
                            z(this._swipeHandle);
                            z(this._swipeEndHandle);
                            this._swipeHandle = this._swipeEndHandle = null;
                            var b = this.map;
                            b.__panning && (b.resetMapCursor(), b.__panEnd(a.screenPoint.x - this._dragOrigin.x, a.screenPoint.y - this._dragOrigin.y))
                        },
                        _pinchInit: function (a) {
                            var b = this.map,
                                c = b._zoomAnim || b._panAnim;
                            c && c._active ? (c.stop(), c._fire("onEnd", [c.node])) : b.__panning && (a.screenPoint = new u(this._panX, this._panY), a.mapPoint = b.toMap(a.screenPoint), this._swipeEnd(a));
                            z(this._pinchHandle);
                            z(this._pinchEndHandle);
                            this._pinchHandle = A(this.touchEvents || this.pointerEvents, "onPinchMove", this, this._pinch);
                            this._pinchEndHandle = A(this.touchEvents || this.pointerEvents, "onPinchEnd", this, this._pinchEnd)
                        },
                        _pinch: function (a) {
                            var b = this.map;
                            if (a.screenPoints) {
                                this.currLength = x.getLength(a.screenPoints[0], a.screenPoints[1]);
                                var c;
                                b.__zooming ? (c = this.currLength / this._length, this._zoomStartExtent = this.__scaleExtent(b.extent, c, this._dragOrigin), b.__zoom(this._zoomStartExtent, c, this._dragOrigin)) : (this._dragOrigin = new u((a.screenPoints[0].x + a.screenPoints[1].x) / 2, (a.screenPoints[0].y + a.screenPoints[1].y) / 2), this._length = this.currLength, b.__zoomStart(b.extent, this._dragOrigin));
                                this._pinchScale = c;
                                b._fireOnScale(this.currLength / this._length, this._dragOrigin, !0)
                            }
                        },
                        _pinchEnd: function (a) {
                            a = this.map;
                            z(this._pinchHandle);
                            z(this._pinchEndHandle);
                            this._pinchHandle = this._pinchEndHandle = null;
                            this._pinchScale = 0;
                            if (a.__zooming && null === a._zoomAnim) {
                                var b = this.currLength / this._length,
                                    c = a.extent.getWidth();
                                this._zoomAnimAnchor = a.toMap(this._dragOrigin);
                                this._zoomStartExtent = this.__scaleExtent(a.extent, 1 / b, this._zoomAnimAnchor);
                                if (a.__tileInfo) {
                                    var f = y.getCandidateTileInfo(a, a.__tileInfo, this._zoomStartExtent),
                                        d = a.__getExtentForLevel(f.lod.level, this._zoomAnimAnchor),
                                        e = a.getMinZoom(),
                                        g = a.getMaxZoom(),
                                        h = d.extent,
                                        d = d.lod,
                                        s = c / h.getWidth(),
                                        l = f.lod.level;
                                    1 > b ? s > b && l-- : s < b && l++;
                                    l < e ? l = e : l > g && (l = g);
                                    l !== f.lod.level && (d = a.__getExtentForLevel(l, this._zoomAnimAnchor), h = d.extent, d = d.lod);
                                    this._zoomEndExtent = h;
                                    this._zoomEndLod = d;
                                    a._zoomAnim = n.animateRange({
                                        range: {
                                            start: c / this._zoomStartExtent.getWidth(),
                                            end: s
                                        },
                                        duration: m.defaults.map.zoomDuration,
                                        rate: m.defaults.map.zoomRate,
                                        onAnimate: this._adjustPinch,
                                        onEnd: this._adjustPinchEnd
                                    });
                                    a._zoomAnim.play();
                                    a._fireOnScale(a.extent.getWidth() / this._zoomEndExtent.getWidth(), this._dragOrigin)
                                } else this._zoomEndExtent =
                                    this._zoomStartExtent, a._fireOnScale(a.extent.getWidth() / this._zoomEndExtent.getWidth(), this._dragOrigin), this._adjustPinchEnd()
                            }
                        },
                        _adjustPinch: function (a) {
                            var b = this.__scaleExtent(this.map.extent, a, this._zoomAnimAnchor);
                            this.map.__zoom(b, a, this._dragOrigin)
                        },
                        _adjustPinchEnd: function () {
                            var a = this.map,
                                b = a.extent.getWidth() / this._zoomEndExtent.getWidth(),
                                c = this.__scaleExtent(a.extent, 1 / b, this._zoomAnimAnchor),
                                f = this._dragOrigin,
                                d = this._zoomEndLod;
                            this._zoomStartExtent = this._zoomEndExtent = this._zoomEndLod =
                                this._dragOrigin = a._zoomAnim = this._zoomAnimAnchor = null;
                            a.__zoomEnd(c, b, f, d, !0)
                        },
                        __scaleExtent: function (a, b, c) {
                            c = c || a.getCenter();
                            b = a.expand(b);
                            var f = a.xmin - (b.getWidth() - a.getWidth()) * (c.x - a.xmin) / a.getWidth();
                            c = a.ymax - (b.getHeight() - a.getHeight()) * (c.y - a.ymax) / a.getHeight();
                            return new w(f, c - b.getHeight(), f + b.getWidth(), c, a.spatialReference)
                        },
                        _normalizeRect: function (a) {
                            a = a.screenPoint;
                            var b = this._dragOrigin.x,
                                c = this._dragOrigin.y;
                            a = new C((a.x < b ? a.x : b) - this.map.__visibleRect.x, (a.y < c ? a.y : c) - this.map.__visibleRect.y,
                                Math.abs(a.x - b), Math.abs(a.y - c));
                            delete a.spatialReference;
                            0 === a.width && (a.width = 1);
                            0 === a.height && (a.height = 1);
                            return a
                        },
                        setImmediateClick: function (a) {
                            switch (this.eventModel) {
                            case "mouse":
                                this.mouseEvents.setImmediateClick(a);
                                break;
                            case "touch":
                                this.touchEvents.setImmediateTap(a);
                                this.mouseEvents && this.mouseEvents.setImmediateClick(a);
                                break;
                            case "pointer":
                                this.pointerEvents.setImmediateTap(a)
                            }
                        },
                        enablePan: function () {
                            this.disablePan();
                            switch (this.eventModel) {
                            case "mouse":
                                this._panInitHandle = A(this.mouseEvents,
                                    "onMouseDown", this, this._panInit);
                                break;
                            case "touch":
                                this._panInitHandle = A(this.mouseEvents, "onMouseDown", this, this._panInit);
                                this._swipeInitHandle = A(this.touchEvents, "onSwipeStart", this, this._swipeInit);
                                break;
                            case "pointer":
                                this._swipeInitHandle = A(this.pointerEvents, "onSwipeStart", this, this._swipeInit)
                            }
                        },
                        disablePan: function () {
                            z(this._panInitHandle);
                            this._panInitHandle = null;
                            z(this._swipeInitHandle);
                            this._swipeInitHandle = null
                        },
                        enableRubberBandZoom: function () {
                            this.disableRubberBandZoom();
                            this._zoomInitHandle =
                                this.pointerEvents ? A(this.pointerEvents, "onSwipeStart", this, this._zoomInit) : A(this.mouseEvents, "onMouseDown", this, this._zoomInit)
                        },
                        disableRubberBandZoom: function () {
                            z(this._zoomInitHandle);
                            this._zoomInitHandle = null
                        },
                        enablePinchZoom: function () {
                            this.disablePinchZoom();
                            if ("touch" === this.eventModel || "pointer" === this.eventModel) this._pinchInitHandle = A(this.touchEvents || this.pointerEvents, "onPinchStart", this, this._pinchInit)
                        },
                        disablePinchZoom: function () {
                            z(this._pinchInitHandle);
                            this._pinchInitHandle = null
                        },
                        enableScrollWheelZoom: function () {
                            this.disableScrollWheelZoom();
                            this._wheelHandle = A(this.mouseEvents || this.pointerEvents, "onMouseWheel", this, this._wheelZoom)
                        },
                        disableScrollWheelZoom: function () {
                            z(this._wheelHandle);
                            this._wheelHandle = null
                        },
                        enableDoubleClickZoom: function () {
                            this.disableDoubleClickZoom();
                            switch (this.eventModel) {
                            case "mouse":
                                this._dblClickHandle = A(this.mouseEvents, "onDblClick", this, this._dblClickZoom);
                                break;
                            case "touch":
                                this._dblClickHandle = A(this.mouseEvents, "onDblClick", this, this._dblClickZoom);
                                this._dblTapHandle = A(this.touchEvents, "onDoubleTap", this, this._dblClickZoom);
                                this._zoomOutHandle = A(this.touchEvents, "onTwoFingerTap", this, this._twoFingerTap);
                                break;
                            case "pointer":
                                this._dblTapHandle = A(this.pointerEvents, "onDoubleTap", this, this._dblClickZoom), this._zoomOutHandle = A(this.pointerEvents, "onTwoFingerTap", this, this._twoFingerTap)
                            }
                        },
                        disableDoubleClickZoom: function () {
                            z(this._dblClickHandle);
                            z(this._zoomOutHandle);
                            this._dblTapHandle && z(this._dblTapHandle);
                            this._dblClickHandle = this._zoomOutHandle =
                                this._dblTapHandle = null
                        },
                        enableShiftDoubleClickZoom: function () {
                            this.disableShiftDoubleClickZoom();
                            this._sDblClickHandle = A(this.pointerEvents || this.mouseEvents, "onDblClick", this, this._recenterZoom)
                        },
                        disableShiftDoubleClickZoom: function () {
                            z(this._sDblClickHandle);
                            this._sDblClickHandle = null
                        },
                        enableClickRecenter: function () {
                            this.disableClickRecenter();
                            this._recenterHandle = A(this.pointerEvents || this.mouseEvents, "onClick", this, this._recenter)
                        },
                        disableClickRecenter: function () {
                            z(this._recenterHandle);
                            this._recenterHandle =
                                null
                        },
                        enableKeyboardNavigation: function () {
                            this.disableKeyboardNavigation();
                            this._keyHandle = A(this.pointerEvents || this.mouseEvents, "onKeyDown", this, this._keyDown);
                            this._keyEndHandle = A(this.pointerEvents || this.mouseEvents, "onKeyUp", this, this._keyEnd)
                        },
                        disableKeyboardNavigation: function () {
                            z(this._keyHandle);
                            z(this._keyEndHandle);
                            this._keyHandle = this._keyEndHandle = null
                        },
                        enableNavigation: function () {
                            var a = this.map;
                            a && a.loaded && (a.enableDoubleClickZoom(), a.enableClickRecenter(), a.enablePan(), a.enableRubberBandZoom(),
                                this.enablePinchZoom(), a.enableKeyboardNavigation(), a.smartNavigation ? this._setScrollWheelPan(!0) : a.enableScrollWheelZoom())
                        },
                        disableNavigation: function () {
                            var a = this.map;
                            a && a.loaded && (a.disableDoubleClickZoom(), a.disableClickRecenter(), a.disablePan(), a.disableRubberBandZoom(), this.disablePinchZoom(), a.disableKeyboardNavigation(), a.disableScrollWheelZoom(), a.smartNavigation && this._setScrollWheelPan(!1))
                        },
                        destroy: function () {
                            this.touchEvents && this.touchEvents.destroy();
                            this.mouseEvents && this.mouseEvents.destroy();
                            this.pointerEvents && this.pointerEvents.destroy();
                            var a, b = [this._panInitHandle, this._panStartHandle, this._panHandle, this._panEndHandle, this._zoomInitHandle, this._zoomHandle, this._zoomEndHandle, this._wheelHandle, this._mwMacHandle, this._dblClickHandle, this._zoomOutHandle, this._recenterHandle, this._sDblClickHandle, this._dblTapHandle, this._keyHandle, this._keyEndHandle, this._swipeInitHandle, this._swipeHandle, this._swipeEndHandle, this._pinchInitHandle, this._pinchHandle, this._pinchEndHandle];
                            for (a = 0; a < b.length; a++) z(b[a]);
                            this.map = this.touchEvents = this.mouseEvents = this.eventModel = this.pointerEvents = this._zoomRect = this._dragOrigin = this._panInitHandle = this._panStartHandle = this._panHandle = this._panEndHandle = this._zoomInitHandle = this._zoomHandle = this._zoomEndHandle = this._wheelHandle = this._mwMacHandle = this._dblClickHandle = this._zoomOutHandle = this._recenterHandle = this._sDblClickHandle = this._dblTapHandle = this._keyHandle = this._keyEndHandle = this._swipeInitHandle = this._swipeHandle = this._swipeEndHandle = this._pinchInitHandle =
                                this._pinchHandle = this._pinchEndHandle = null
                        }
                    });
                    t("extend-esri") && (e.MapNavigationManager = r);
                    return r
                })
        },
        "esri/MouseEvents": function () {
            define("dojo/_base/declare dojo/_base/html dojo/_base/lang dojo/_base/sniff dojo/_base/connect dojo/_base/event ./kernel ./Evented ./geometry/Point ./geometry/ScreenPoint".split(" "), function (r, p, a, g, q, h, k, l, e, c) {
                var b = q.connect,
                    d = q.disconnect;
                r = r([l], {
                    declaredClass: "esri.MouseEvents",
                    doubleClickDuration: 300,
                    minWheelValue: 1,
                    maxWheelValue: 1,
                    mozWheelDivisor: -1 !== g("mac") ?
                        1 : 3,
                    wheelDivisor: 2 > g("chrome") ? 360 : 120,
                    preventPageScroll: !0,
                    map: null,
                    constructor: function (c, d) {
                        this.node = c;
                        a.mixin(this, d);
                        var e = function (a) {
                            h.stop(a);
                            return !1
                        };
                        g("mozilla") && p.style(c, "MozUserSelect", "none");
                        this._handles = [b(c, "onselectstart", e), b(c, "ondragstart", e), b(c, "onmouseenter", this, this._onMouseEnterHandler), b(c, "onmouseleave", this, this._onMouseLeaveHandler), b(c, "onmousedown", this, this._onMouseDownHandler), b(c, "onclick", this, this._onClickHandler), b(c, "ondblclick", this, this._onDblClickHandler)];
                        this._onMouseMoveHandler_connect = b(c, "onmousemove", this, this._onMouseMoveHandler);
                        this._onMouseUpHandler_connect = b(c, "onmouseup", this, this._onMouseUpHandler);
                        this._fireClickEvent = a.hitch(this, this._fireClickEvent);
                        this._initialDuration = this.doubleClickDuration;
                        this.preventPageScroll = (e = this.map) ? e.isScrollWheelZoom || e.isScrollWheelPan : this.preventPageScroll;
                        this.enableMouseWheel(!1)
                    },
                    _fire: function (a, b) {
                        if (!this._preventClick || !("onClick" === a || "onDblClick" === a)) {
                            if (this[a]) this[a](b);
                            if (this.map &&
                                this.map[a]) this.map[a](b)
                        }
                    },
                    _processEvent: function (a) {
                        a = h.fix(a, a.target);
                        var b = this.map,
                            d = b && b.position;
                        d && ("DOMMouseScroll" === a.type && 3 > g("ff") ? a.screenPoint = new c(window.scrollX + a.screenX - d.x, window.scrollY + a.screenY - d.y) : a.screenPoint = new c(a.pageX - d.x, a.pageY - d.y), a.mapPoint = b.extent ? b.toMap(a.screenPoint) : new e);
                        a.numPoints = 0;
                        return a
                    },
                    _onMouseEnterHandler: function (a) {
                        d(this._onKeyDown_connect);
                        d(this._onKeyUp_connect);
                        this._onKeyDown_connect = b(document, "onkeydown", this, this._onKeyDownHandler);
                        this._onKeyUp_connect = b(document, "onkeyup", this, this._onKeyUpHandler);
                        this._fire("onMouseOver", this._processEvent(a))
                    },
                    _onMouseLeaveHandler: function (a) {
                        d(this._onKeyDown_connect);
                        d(this._onKeyUp_connect);
                        this._onKeyDown_connect = this._onKeyUp_connect = null;
                        this._fire("onMouseOut", this._processEvent(a))
                    },
                    _onMouseMoveHandler: function (a) {
                        this._dragEnd ? this._dragEnd = !1 : this._fire("onMouseMove", this._processEvent(a))
                    },
                    _onMouseDownHandler: function (a) {
                        d(this._onMouseMoveHandler_connect);
                        this._onMouseMoveHandler_connect =
                            null;
                        this.node.setCapture && this.node.setCapture(!1);
                        d(this._onMouseDragHandler_connect);
                        this._onMouseDragHandler_connect = b(document, "onmousemove", this, this._onMouseDragHandler);
                        this._startX = a.pageX;
                        this._startY = a.pageY;
                        this._fire("onMouseDown", this._processEvent(a))
                    },
                    _onMouseUpHandler: function (a) {
                        var c = this.node;
                        c.releaseCapture && c.releaseCapture();
                        d(this._onMouseDragHandler_connect);
                        this._onMouseDragHandler_connect = null;
                        d(this._onMouseMoveHandler_connect);
                        this._onMouseMoveHandler_connect = b(c, "onmousemove",
                            this, this._onMouseMoveHandler);
                        this._fire("onMouseUp", this._processEvent(a))
                    },
                    _onMouseDragHandler: function (a) {
                        d(this._onMouseDragHandler_connect);
                        this._onMouseDragHandler_connect = b(document, "onmousemove", this, this._onMouseDraggingHandler);
                        d(this._onMouseUpHandler_connect);
                        this._onMouseUpHandler_connect = b(document, "onmouseup", this, this._onDragMouseUpHandler);
                        this._docLeaveConnect = b(document, "onmouseout", this, this._onDocMouseOut);
                        this._fire("onMouseDragStart", this._processEvent(a))
                    },
                    _onMouseDraggingHandler: function (a) {
                        h.stop(a);
                        this._fire("onMouseDrag", this._processEvent(a))
                    },
                    _onDragMouseUpHandler: function (a) {
                        var c = this.node;
                        c.releaseCapture && c.releaseCapture();
                        this._dragEnd = !0;
                        d(this._docLeaveConnect);
                        d(this._onMouseDragHandler_connect);
                        d(this._onMouseUpHandler_connect);
                        this._docLeaveConnect = this._onMouseDragHandler_connect = null;
                        this._onMouseMoveHandler_connect = b(c, "onmousemove", this, this._onMouseMoveHandler);
                        this._onMouseUpHandler_connect = b(c, "onmouseup", this, this._onMouseUpHandler);
                        a = this._processEvent(a);
                        this._fire("onMouseDragEnd",
                            a);
                        this._fire("onMouseUp", a)
                    },
                    _onDocMouseOut: function (a) {
                        var b = 9 > g("ie") ? a.toElement : a.relatedTarget,
                            c = b && b.nodeName.toLowerCase();
                        (!b || g("chrome") && "html" === c) && this._onDragMouseUpHandler(a)
                    },
                    _onClickHandler: function (a) {
                        a = this._processEvent(a);
                        if (!(a.pageX !== this._startX || a.pageY !== this._startY)) {
                            clearTimeout(this._clickTimer);
                            var b = {},
                                c = "movementX" in a,
                                d;
                            for (d in a)
                                if (!c || "webkitMovementX" !== d && "webkitMovementY" !== d) b[d] = a[d];
                            this._clickEvent = b;
                            this._clickTimer = setTimeout(this._fireClickEvent, this.doubleClickDuration)
                        }
                    },
                    _fireClickEvent: function () {
                        clearTimeout(this._clickTimer);
                        9 > g("ie") && (this._clickEvent.graphic = k._ieGraphic, delete k._ieGraphic);
                        this._fire("onClick", this._clickEvent)
                    },
                    _onDblClickHandler: function (a) {
                        clearTimeout(this._clickTimer);
                        this._fire("onDblClick", this._processEvent(a))
                    },
                    _onMouseWheelHandler: function (a) {
                        var b = this.map;
                        (b ? b.isScrollWheelZoom || b.isScrollWheelPan : this.preventPageScroll) && h.stop(a);
                        var b = g("ff") || g("mozilla") ? -a.detail / this.mozWheelDivisor : a.wheelDelta / this.wheelDivisor,
                            c = Math.abs(b),
                            c = c <= this.minWheelValue ? this.minWheelValue : this.maxWheelValue;
                        a.value = 0 > b ? -c : c;
                        this._fire("onMouseWheel", this._processEvent(a))
                    },
                    _onKeyDownHandler: function (a) {
                        this._fire("onKeyDown", a)
                    },
                    _onKeyUpHandler: function (a) {
                        this._fire("onKeyUp", a)
                    },
                    enableMouseWheel: function (a) {
                        d(this._scrollHandle);
                        this._scrollHandle = b(this.node, g("ff") || g("mozilla") ? a ? "MozMousePixelScroll" : "DOMMouseScroll" : "onmousewheel", this, this._onMouseWheelHandler)
                    },
                    setImmediateClick: function (a) {
                        this.doubleClickDuration = a ? 0 : this._initialDuration
                    },
                    preventClickEvents: function (a) {
                        this._preventClick = a
                    },
                    destroy: function () {
                        var a = this._handles.concat([this._onMouseMoveHandler_connect, this._onMouseUpHandler_connect, this._onMouseDragHandler_connect, this._scrollHandle, this._onKeyDown_connect, this._onKeyUp_connect, this._docLeaveConnect]),
                            b;
                        for (b = 0; b < a.length; b++) d(a[b]);
                        clearTimeout(this._clickTimer);
                        this.node = this.map = this._handles = this._clickEvent = this._onMouseMoveHandler_connect = this._onMouseUpHandler_connect = this._onMouseDragHandler_connect = this._scrollHandle =
                            this._onKeyDown_connect = this._onKeyUp_connect = this._docLeaveConnect = null
                    }
                });
                g("extend-esri") && (k.MouseEvents = r);
                return r
            })
        },
        "esri/TouchEvents": function () {
            define("dojo/_base/declare dojo/_base/html dojo/_base/lang dojo/_base/sniff dojo/dom ./kernel ./Evented ./geometry/Point ./geometry/ScreenPoint".split(" "), function (r, p, a, g, q, h, k, l, e) {
                r = r([k], {
                    declaredClass: "esri.TouchEvents",
                    tapRadius: 8,
                    doubleTapRadius: 10,
                    tapStartTolerance: 50,
                    doubleTapDuration: 300,
                    map: null,
                    constructor: function (c, b) {
                        this.node = c;
                        a.mixin(this, b);
                        p.setSelectable(c, !1);
                        this._touchStart = a.hitch(this, this._touchStart);
                        this._touchMove = a.hitch(this, this._touchMove);
                        this._touchEnd = a.hitch(this, this._touchEnd);
                        this._touchCancel = a.hitch(this, this._touchCancel);
                        c.addEventListener("touchstart", this._touchStart, !1);
                        c.addEventListener("touchmove", this._touchMove, !1);
                        c.addEventListener("touchend", this._touchEnd, !1);
                        c.addEventListener("touchcancel", this._touchCancel, !1);
                        this.map && g("ios") && (this._mouseOver = a.hitch(this, this._mouseOver),
                            this._mouseOut = a.hitch(this, this._mouseOut), this._mouseDown = a.hitch(this, this._mouseDown), this._mouseUp = a.hitch(this, this._mouseUp), this._mouseClick = a.hitch(this, this._mouseClick), c.addEventListener("mouseover", this._mouseOver, !1), c.addEventListener("mouseout", this._mouseOut, !1), c.addEventListener("mousedown", this._mouseDown, !1), c.addEventListener("mouseup", this._mouseUp, !1), c.addEventListener("click", this._mouseClick, !1));
                        this._numTouches = 0;
                        this._nodeTouches = [];
                        this._touches = {};
                        this._touchIds = [];
                        this._taps = [];
                        this._immediate = !1
                    },
                    _touchStart: function (a) {
                        var b = this._touches,
                            d, e = a.changedTouches.length,
                            h, s, n, f, l = (new Date).getTime();
                        if (!g("android") || !g("safari") || !(1 === a.targetTouches.length && a.touches.length === a.targetTouches.length && a.targetTouches.length === a.changedTouches.length && 0 === a.changedTouches[0].identifier && b[a.changedTouches[0].identifier])) {
                            this._addTouch(a);
                            for (d = 0; d < e; d++) h = a.changedTouches[d], s = b[h.identifier] = {}, s.startX = h.pageX, s.startY = h.pageY, s.startTS = l, -1 === this._touchIds.indexOf(h.identifier) &&
                                this._touchIds.push(h.identifier);
                            this._swipeActive && (n = this._nodeTouches[0]);
                            this._pinchActive && (f = this._nodeTouches[1]);
                            1 === this._numTouches ? this._swipeActive ? (this._swipeActive = !1, this._fire("onSwipeEnd", this._processTouchEvent(a, n))) : this._pinchActive && (this._pinchActive = !1, this._fire("onPinchEnd", this._processTouchEvent(a, [n, f]))) : 2 === this._numTouches ? this._swipeActive && (n && (s = b[this._touchIds[0]], s.startX = n.pageX, s.startY = n.pageY, s.moved = !1), this._swipeActive = !1, this._fire("onSwipeEnd", this._processTouchEvent(a,
                                n))) : this._swipeActive ? (this._swipeActive = !1, this._fire("onSwipeEnd", this._processTouchEvent(a, n))) : this._pinchActive && (this._pinchActive = !1, this._fire("onPinchEnd", this._processTouchEvent(a, [n, f])))
                        }
                    },
                    _touchMove: function (a) {
                        a.preventDefault();
                        this._updateTouch(a);
                        var b = this._touches,
                            d, e = a.changedTouches.length,
                            h, s, n, f;
                        if (!g("android") || !g("safari") || !(1 === a.targetTouches.length && a.touches.length === a.targetTouches.length && a.targetTouches.length === a.changedTouches.length && 0 === a.changedTouches[0].identifier &&
                                b[a.changedTouches[0].identifier] && 1 < this._touchIds.length)) {
                            for (d = 0; d < e; d++)
                                if (h = a.changedTouches[d], s = b[h.identifier]) {
                                    n = Math.abs(h.pageX - s.startX);
                                    h = Math.abs(h.pageY - s.startY);
                                    if (!s.moved && (n >= this.tapRadius || h >= this.tapRadius)) s.moved = s.absMoved = !0;
                                    f = f ? f : s.moved
                                }
                            1 === this._numTouches ? (d = a.changedTouches[0], this._swipeActive ? this._fire("onSwipeMove", this._processTouchEvent(a, d)) : f && (this._swipeActive = !0, this._fire("onSwipeStart", this._processTouchEvent(a, d)))) : 2 === this._numTouches && (d = this._nodeTouches[0],
                                e = this._nodeTouches[1], this._pinchActive ? this._fire("onPinchMove", this._processTouchEvent(a, [d, e])) : f && (f = b[d.identifier], s = b[e.identifier], b = Math.abs(f.startX - s.startX), f = Math.abs(f.startY - s.startY), b = Math.sqrt(b * b + f * f), f = Math.abs(d.pageX - e.pageX), s = Math.abs(d.pageY - e.pageY), f = Math.sqrt(f * f + s * s), Math.abs(f - b) >= 2 * this.tapRadius && (this._pinchActive = !0, this._fire("onPinchStart", this._processTouchEvent(a, [d, e])))))
                        }
                    },
                    _touchEnd: function (a) {
                        this._removeTouch(a);
                        var b = this._touches,
                            d = a.changedTouches,
                            e,
                            g = d.length,
                            h, n, f = (new Date).getTime(),
                            l = this._touchIds;
                        for (e = 0; e < g; e++)
                            if (n = b[d[e].identifier]) n.absMoved && (h = !0), n.pageX = d[e].pageX, n.pageY = d[e].pageY, n.endTS = f;
                        if (0 === this._numTouches)
                            if (this._touches = {}, this._touchIds = [], this._swipeActive) this._swipeActive = !1, this._fire("onSwipeEnd", this._processTouchEvent(a, d[0]));
                            else if (this._pinchActive) this._pinchActive = !1, this._fire("onPinchEnd", this._processTouchEvent(a, d));
                        else {
                            if (!h) {
                                g = Infinity;
                                h = -Infinity;
                                var f = Infinity,
                                    k = -Infinity,
                                    q = this.tapStartTolerance,
                                    p = [],
                                    r = !0;
                                for (e = 0; e < l.length; e++) n = b[l[e]], p.push(n), n.startTS < g && (g = n.startTS), n.startTS > h && (h = n.startTS), n.endTS < f && (f = n.endTS), n.endTS > k && (k = n.endTS), delete b[l[e]];
                                if (1 === p.length && d[0] && (b = Math.abs(d[0].pageX - p[0].startX), d = Math.abs(d[0].pageY - p[0].startY), b >= this.tapRadius || d >= this.tapRadius)) r = !1;
                                r && (Math.abs(h - g) <= q && Math.abs(k - f) <= q) && this._basicTap(a, p)
                            }
                        } else 1 === this._numTouches && this._pinchActive && (e = this._nodeTouches[0], n = b[e.identifier], n.startX = e.pageX, n.startY = e.pageY, this._pinchActive =
                            n.moved = !1, this._fire("onPinchEnd", this._processTouchEvent(a, [d[0], e])))
                    },
                    _touchCancel: function (a) {
                        this._numTouches && this._touchEnd(a)
                    },
                    _basicTap: function (a, b) {
                        var d = (new Date).getTime(),
                            e = this;
                        a = this._processTouchEvent(a, b);
                        this._taps.push({
                            touchInfos: b,
                            ts: d,
                            event: a
                        });
                        2 < this._taps.length && this._taps.shift();
                        this._fire("onBasicTap", a);
                        clearTimeout(this._tapTimer);
                        this._immediate ? this._analyzeTap(!0) : this._tapTimer = setTimeout(function () {
                                var a = e;
                                e = null;
                                clearTimeout(a._tapTimer);
                                a._analyzeTap()
                            }, 2 ===
                            this._taps.length ? this.doubleTapDuration / 2 : this.doubleTapDuration)
                    },
                    _analyzeTap: function (a) {
                        var b = this._taps,
                            d = b[0],
                            e = b[1],
                            g = d.touchInfos,
                            h = e && e.touchInfos;
                        b.length && (a || (this._taps = []), d && e ? g.length === h.length ? e.ts - d.ts <= this.doubleTapDuration ? (1 === g.length ? (a = Math.abs(g[0].startX - h[0].startX), g = Math.abs(g[0].startY - h[0].startY), g = a <= this.doubleTapRadius && g <= this.doubleTapRadius) : g = !0, g ? this._processedDoubleTap(b) : this._processedTap(e)) : this._processedTap(e) : this._processedTap(e) : this._processedTap(d ||
                            e))
                    },
                    _processedTap: function (a) {
                        var b = a.event;
                        this._fire("onProcessedTap", b);
                        1 === a.touchInfos.length ? this._fire("onTap", this._fixEvent(b)) : 2 === a.touchInfos.length && this._fire("onTwoFingerTap", b)
                    },
                    _processedDoubleTap: function (a) {
                        var b = 1 === a[1].touchInfos.length,
                            d;
                        b && (d = [this._fixEvent(a[0].event), this._fixEvent(a[1].event)], d[1].relatedEvents = d);
                        a = [a[0].event, a[1].event];
                        a[1].relatedEvents = a;
                        this._fire("onProcessedDoubleTap", a[1]);
                        b && (this._fire("onDoubleTap", d[1]), this._fire("onDblClick", d[1]))
                    },
                    _addTouch: function (a) {
                        var b =
                            a.changedTouches,
                            d = this._nodeTouches,
                            e, g, h;
                        this._numTouches += b.length;
                        for (a = 0; a < b.length; a++) {
                            g = d.length;
                            h = !1;
                            for (e = 0; e < g && !(h = d[e].identifier === b[a].identifier); e++);
                            h ? this._numTouches-- : d.push(b[a])
                        }
                        for (a = d.length - 1; 0 <= a; a--) q.isDescendant(d[a].target, document.body) || (d.splice(a, 1), this._numTouches--);
                        0 > this._numTouches && (this._numTouches = 0)
                    },
                    _removeTouch: function (a) {
                        var b = [],
                            d = [],
                            e = a.changedTouches,
                            g = this._nodeTouches;
                        this._numTouches -= e.length;
                        0 > this._numTouches && (this._numTouches = 0);
                        for (a = 0; a <
                            e.length; a++) b.push(e[a].identifier);
                        for (a = g.length - 1; 0 <= a; a--) - 1 !== b.indexOf(g[a].identifier) && d.push(g.splice(a, 1)[0]);
                        return d
                    },
                    _updateTouch: function (a) {
                        var b = [],
                            d, e = a.changedTouches,
                            g = this._nodeTouches;
                        for (a = 0; a < e.length; a++) b.push(e[a].identifier);
                        for (a = 0; a < g.length; a++) d = b.indexOf(g[a].identifier), -1 !== d && g.splice(a, 1, e[d])
                    },
                    _mouseOver: function (a) {
                        this._fire("onMouseOver", this._processMouseEvent(a))
                    },
                    _mouseOut: function (a) {
                        this._fire("onMouseOut", this._processMouseEvent(a))
                    },
                    _mouseDown: function (a) {
                        this._fire("onMouseDown",
                            this._processMouseEvent(a))
                    },
                    _mouseUp: function (a) {
                        this._fire("onMouseUp", this._processMouseEvent(a))
                    },
                    _mouseClick: function (a) {
                        this._fire("onClick", this._processMouseEvent(a))
                    },
                    _fire: function (a, b) {
                        if ("onDblClick" === a && this.mouseEvents) {
                            this.mouseEvents.preventClickEvents(!0);
                            var d = this;
                            setTimeout(function () {
                                d.mouseEvents.preventClickEvents(!1)
                            }, 350)
                        }
                        if (this[a]) this[a](b);
                        if (this.map && this.map[a]) this.map[a](b)
                    },
                    _fixEvent: function (a) {
                        var b = {},
                            d;
                        for (d in a) b[d] = a[d];
                        this.map && (b.screenPoint = b.screenPoints[0],
                            b.mapPoint = b.mapPoints[0]);
                        return b
                    },
                    _processTouchEvent: function (c, b) {
                        var d = this.map,
                            g = d && d.position,
                            h = 0;
                        if (g && b)
                            if (a.isArray(b)) {
                                var s, n;
                                c.screenPoints = [];
                                c.mapPoints = [];
                                for (s = 0; s < b.length; s++) b[s] ? (n = new e(b[s].pageX - g.x, b[s].pageY - g.y), c.screenPoints.push(n), c.mapPoints.push(d.extent ? d.toMap(n) : new l)) : h++
                            } else c.screenPoint = new e(b.pageX - g.x, b.pageY - g.y), c.mapPoint = d.extent ? d.toMap(c.screenPoint) : new l;
                        c.numPoints = b ? a.isArray(b) ? b.length - h : 1 : 0;
                        return c
                    },
                    _processMouseEvent: function (a) {
                        var b = this.map,
                            d = b && b.position;
                        d && (a.screenPoint = new e(a.pageX - d.x, a.pageY - d.y), a.mapPoint = b.extent ? b.toMap(a.screenPoint) : new l);
                        return a
                    },
                    setImmediateTap: function (a) {
                        this._immediate = a
                    },
                    destroy: function () {
                        var a = this.node;
                        a.removeEventListener("touchstart", this._touchStart, !1);
                        a.removeEventListener("touchmove", this._touchMove, !1);
                        a.removeEventListener("touchend", this._touchEnd, !1);
                        a.removeEventListener("touchcancel", this._touchCancel, !1);
                        this.map && (a.removeEventListener("mouseover", this._mouseOver, !1), a.removeEventListener("mouseout",
                            this._mouseOut, !1), a.removeEventListener("mousedown", this._mouseDown, !1), a.removeEventListener("mouseup", this._mouseUp, !1), a.removeEventListener("click", this._mouseClick, !1));
                        p.setSelectable(a, !0);
                        clearTimeout(this._tapTimer);
                        this.node = this.map = this._numTouches = this._nodeTouches = this._touches = this._touchIds = this._taps = null
                    }
                });
                g("extend-esri") && (h.TouchEvents = r);
                return r
            })
        },
        "esri/PointerEvents": function () {
            define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ./kernel ./Evented ./geometry/Point ./geometry/ScreenPoint".split(" "),
                function (r, p, a, g, q, h, k, l) {
                    r = r([h], {
                        declaredClass: "esri.PointerEvents",
                        tapRadius: 8,
                        clickRadius: 2,
                        doubleTapRadius: 10,
                        tapStartTolerance: 50,
                        doubleTapDuration: 300,
                        minWheelValue: 1,
                        maxWheelValue: 1,
                        mozWheelDivisor: -1 !== g("mac") ? 1 : 3,
                        wheelDivisor: 120,
                        preventPageScroll: !0,
                        _dragging: !1,
                        constructor: function (a, c) {
                            this.node = a;
                            p.mixin(this, c);
                            void 0 !== a.style.msTouchAction ? a.style.msTouchAction = "none" : void 0 !== a.style.touchAction && (a.style.touchAction = "none");
                            var b = navigator.msPointerEnabled,
                                d = function (a) {
                                    a.preventDefault()
                                };
                            a.addEventListener("selectstart", d, !1);
                            a.addEventListener("dragstart", d, !1);
                            this._pointerDown = p.hitch(this, this._pointerDown);
                            this._pointerMove = p.hitch(this, this._pointerMove);
                            this._pointerUp = p.hitch(this, this._pointerUp);
                            this._pointerCancel = p.hitch(this, this._pointerCancel);
                            a.addEventListener(b ? "MSPointerDown" : "pointerdown", this._pointerDown, !1);
                            a.addEventListener(b ? "MSPointerMove" : "pointermove", this._pointerMove, !1);
                            a.addEventListener(b ? "MSPointerUp" : "pointerup", this._pointerUp, !1);
                            a.addEventListener(b ?
                                "MSPointerCancel" : "pointercancel", this._pointerCancel, !1);
                            this.map && (this._mouseOver = p.hitch(this, this._mouseOver), this._mouseOut = p.hitch(this, this._mouseOut), this._mouseLeave = p.hitch(this, this._mouseLeave), this._mouseDown = p.hitch(this, this._mouseDown), this._mouseUp = p.hitch(this, this._mouseUp), this._mouseClick = p.hitch(this, this._mouseClick), this._mouseWheel = p.hitch(this, this._mouseWheel), this._mouseMove = p.hitch(this, this._mouseMove), this._mouseEnter = p.hitch(this, this._mouseEnter), this._onKeyDown =
                                p.hitch(this, this._onKeyDown), this._onKeyUp = p.hitch(this, this._onKeyUp), a.addEventListener("mouseover", this._mouseOver, !1), a.addEventListener("mouseout", this._mouseOut, !1), a.addEventListener("mouseleave", this._mouseLeave, !1), a.addEventListener("mousedown", this._mouseDown, !1), a.addEventListener("mouseup", this._mouseUp, !1), a.addEventListener("click", this._mouseClick, !1), a.addEventListener("mousewheel", this._mouseWheel, !1), a.addEventListener("mousemove", this._mouseMove, !1), a.addEventListener("mouseenter",
                                    this._mouseEnter, !1));
                            this._numTouches = 0;
                            this._touches = {};
                            this._touchIds = [];
                            this._taps = [];
                            this._immediate = !1
                        },
                        _pointerDown: function (e) {
                            if (-1 < a.indexOf(this._touchIds, e.pointerId)) this._pointerUp(e);
                            else {
                                var c = this._touches,
                                    b = e.target,
                                    d = e.pointerId,
                                    g = this._touchIds,
                                    h, s = (new Date).getTime();
                                h = c[d] = {};
                                h.pointerId = d;
                                h.startX = h.pageX = e.pageX;
                                h.startY = h.pageY = e.pageY;
                                h.startTS = s;
                                g.push(d);
                                this._numTouches++;
                                b.setPointerCapture ? b.setPointerCapture(d) : b.msSetPointerCapture && b.msSetPointerCapture(d);
                                b = c[g[0]];
                                c = c[g[1]];
                                1 !== this._numTouches && (2 === this._numTouches ? this._swipeActive && (b && (b.startX = b.pageX, b.startY = b.pageY, b.moved = !1), this._swipeActive = !1, this._fire("onSwipeEnd", this._processTouchEvent(e, b))) : this._swipeActive ? (this._swipeActive = !1, this._fire("onSwipeEnd", this._processTouchEvent(e, b))) : this._pinchActive && (this._pinchActive = !1, this._fire("onPinchEnd", this._processTouchEvent(e, [b, c]))))
                            }
                        },
                        _pointerMove: function (a) {
                            var c = this._touches,
                                b = this._touchIds,
                                d, g, h;
                            if ((d = c[a.pointerId]) && !(d.pageX ===
                                    a.pageX && d.pageY === a.pageY)) {
                                d.pageX = a.pageX;
                                d.pageY = a.pageY;
                                g = Math.abs(d.pageX - d.startX);
                                h = Math.abs(d.pageY - d.startY);
                                if (!d.moved && (g >= this.tapRadius || h >= this.tapRadius)) d.moved = d.absMoved = !0;
                                if (1 === this._numTouches) this._swipeActive ? this._fire("onSwipeMove", this._processTouchEvent(a, a)) : d.moved && (this._swipeActive = !0, this._fire("onSwipeStart", this._processTouchEvent(a, a)));
                                else if (2 === this._numTouches)
                                    if (d = c[b[0]], c = c[b[1]], this._pinchActive) this._fire("onPinchMove", this._processTouchEvent(a, [d,
c]));
                                    else if (d.moved || c.moved) b = Math.abs(d.startX - c.startX), g = Math.abs(d.startY - c.startY), b = Math.sqrt(b * b + g * g), g = Math.abs(d.pageX - c.pageX), h = Math.abs(d.pageY - c.pageY), g = Math.sqrt(g * g + h * h), Math.abs(g - b) >= 2 * this.tapRadius && (this._pinchActive = !0, this._fire("onPinchStart", this._processTouchEvent(a, [d, c])))
                            }
                        },
                        _pointerUp: function (e) {
                            var c = this._touches,
                                b, d = this.node,
                                g = e.target,
                                h = e.pointerId,
                                s = this._touchIds,
                                n = s.slice(0),
                                f = a.map(n, function (a) {
                                    return c[a]
                                }),
                                l = (new Date).getTime();
                            if (b = c[h])
                                if (b.pageX = e.pageX,
                                    b.pageY = e.pageY, b.endTS = l, this._numTouches--, g.releasePointerCapture ? g.releasePointerCapture(h) : g.msReleasePointerCapture && g.msReleasePointerCapture(h), 0 === this._numTouches)
                                    if (this._touches = {}, this._touchIds = [], this._swipeActive) this._swipeActive = !1, this._fire("onSwipeEnd", this._processTouchEvent(e, e));
                                    else if (this._pinchActive) this._pinchActive = !1, this._fire("onPinchEnd", this._processTouchEvent(e, e));
                            else {
                                if (!b.absMoved) {
                                    var g = Infinity,
                                        h = -Infinity,
                                        s = Infinity,
                                        l = -Infinity,
                                        k = this.tapStartTolerance,
                                        q;
                                    for (q = 0; q < n.length; q++) b = f[q], b.startTS < g && (g = b.startTS), b.startTS > h && (h = b.startTS), b.endTS < s && (s = b.endTS), b.endTS > l && (l = b.endTS);
                                    Math.abs(h - g) <= k && Math.abs(l - s) <= k && this._basicTap(e, f)
                                }
                            } else 1 === this._numTouches && this._pinchActive && (s.splice(a.indexOf(s, e.pointerId), 1), delete c[e.pointerId], b = c[s[0]], b.startX = b.pageX, b.startY = b.pageY, b.moved = !1, document.msElementsFromPoint && (n = document.msElementsFromPoint(b.pageX, b.pageY), a.some(n, function (a) {
                                return a === d
                            }) || (this._touches = {}, this._touchIds = [],
                                this._numTouches = 0)), this._pinchActive = !1, this._fire("onPinchEnd", this._processTouchEvent(e, [e, b])))
                        },
                        _pointerCancel: function (a) {
                            this._numTouches && this._pointerUp(a)
                        },
                        _basicTap: function (a, c) {
                            var b = (new Date).getTime(),
                                d = this,
                                g = this._immediate;
                            a = this._processTouchEvent(a, c);
                            this._taps.push({
                                touchInfos: c,
                                ts: b,
                                event: a
                            });
                            2 < this._taps.length && this._taps.shift();
                            this._fire("onBasicTap", a);
                            clearTimeout(this._tapTimer);
                            b = 2 === this._taps.length ? this.doubleTapDuration / 2 : this.doubleTapDuration;
                            this._tapTimer =
                                setTimeout(function () {
                                    var a = d;
                                    d = null;
                                    clearTimeout(a._tapTimer);
                                    a._analyzeTap(g)
                                }, g ? 0 : b)
                        },
                        _analyzeTap: function (a) {
                            var c = this._taps,
                                b = c[0],
                                d = c[1],
                                g = b.touchInfos,
                                h = d && d.touchInfos;
                            c.length && (a || (this._taps = []), b && d ? g.length === h.length ? d.ts - b.ts <= this.doubleTapDuration ? (1 === g.length ? (a = Math.abs(g[0].startX - h[0].startX), g = Math.abs(g[0].startY - h[0].startY), g = a <= this.doubleTapRadius && g <= this.doubleTapRadius) : g = !0, g ? this._processedDoubleTap(c) : this._processedTap(d)) : this._processedTap(d) : this._processedTap(d) :
                                this._processedTap(b || d))
                        },
                        _processedTap: function (a) {
                            var c = a.event;
                            this._fire("onProcessedTap", c);
                            1 === a.touchInfos.length ? this._fire("onTap", this._fixEvent(c)) : 2 === a.touchInfos.length && this._fire("onTwoFingerTap", c)
                        },
                        _processedDoubleTap: function (a) {
                            var c = 1 === a[1].touchInfos.length,
                                b;
                            c && (b = [this._fixEvent(a[0].event), this._fixEvent(a[1].event)], b[1].relatedEvents = b);
                            a = [a[0].event, a[1].event];
                            a[1].relatedEvents = a;
                            this._fire("onProcessedDoubleTap", a[1]);
                            c && (this._fire("onDoubleTap", b[1]), this._fire("onDblClick",
                                b[1]))
                        },
                        _mouseOver: function (a) {
                            this._fire("onMouseOver", this._processMouseEvent(a))
                        },
                        _mouseMove: function (a) {
                            this._dragging ? this._fire("onMouseDrag", this._processMouseEvent(a)) : this._fire("onMouseMove", this._processMouseEvent(a))
                        },
                        _mouseOut: function (a) {
                            this._fire("onMouseOut", this._processMouseEvent(a))
                        },
                        _mouseLeave: function (a) {
                            document.removeEventListener("keydown", this._onKeyDown, !1);
                            document.removeEventListener("keyup", this._onKeyUp, !1);
                            this._fire("onMouseOut", this._processMouseEvent(event))
                        },
                        _mouseDown: function (a) {
                            this._downX =
                                a.pageX;
                            this._downY = a.pageY;
                            this._fire("onMouseDown", this._processMouseEvent(a));
                            0 === a.button && (this._dragging = !0, this._fire("onMouseDragStart", this._processMouseEvent(a)))
                        },
                        _mouseUp: function (a) {
                            this._dragging && (this._dragging = !1, this._fire("onMouseDragEnd", this._processMouseEvent(a)));
                            this._fire("onMouseUp", this._processMouseEvent(a))
                        },
                        _mouseClick: function (a) {
                            Math.abs(a.pageX - this._downX) <= this.clickRadius && Math.abs(a.pageY - this._downY) <= this.clickRadius && this._fire("onClick", this._processMouseEvent(a))
                        },
                        _mouseWheel: function (a) {
                            var c = this.map;
                            (c ? c.isScrollWheelZoom || c.isScrollWheelPan : this.preventPageScroll) && a.preventDefault();
                            var c = a.wheelDelta ? a.wheelDelta / this.wheelDivisor : -a.detail / this.mozWheelDivisor,
                                b = Math.abs(c),
                                b = b <= this.minWheelValue ? this.minWheelValue : this.maxWheelValue;
                            a.value = 0 > c ? -b : b;
                            this._fire("onMouseWheel", this._processMouseEvent(a))
                        },
                        _mouseEnter: function (a) {
                            document.removeEventListener("keydown", this._onKeyDown, !1);
                            document.removeEventListener("keyup", this._onKeyUp, !1);
                            document.addEventListener("keydown",
                                this._onKeyDown, !1);
                            document.addEventListener("keyup", this._onKeyUp, !1);
                            this._fire("onMouseEnter", this._processMouseEvent(a))
                        },
                        _onKeyDown: function (a) {
                            this._fire("onKeyDown", a)
                        },
                        _onKeyUp: function (a) {
                            this._fire("onKeyUp", a)
                        },
                        _fire: function (a, c) {
                            if (this[a]) this[a](c);
                            if (this.map && this.map[a]) this.map[a](c)
                        },
                        _fixEvent: function (a) {
                            var c = {},
                                b;
                            for (b in a) c[b] = a[b];
                            c.preventDefault = function () {
                                a.preventDefault()
                            };
                            c.stopPropagation = function () {
                                a.stopPropagation()
                            };
                            this.map && (c.screenPoint = c.screenPoints[0],
                                c.mapPoint = c.mapPoints[0]);
                            return c
                        },
                        _processTouchEvent: function (a, c) {
                            var b = this.map,
                                d = b && b.position,
                                g = 0;
                            if (d && c)
                                if (p.isArray(c)) {
                                    var h, s;
                                    a.screenPoints = [];
                                    a.mapPoints = [];
                                    for (h = 0; h < c.length; h++) c[h] ? (s = new l(c[h].pageX - d.x, c[h].pageY - d.y), a.screenPoints.push(s), a.mapPoints.push(b.extent ? b.toMap(s) : new k)) : g++
                                } else a.screenPoint = new l(c.pageX - d.x, c.pageY - d.y), a.mapPoint = b.extent ? b.toMap(a.screenPoint) : new k;
                            a.numPoints = c ? p.isArray(c) ? c.length - g : 1 : 0;
                            return a
                        },
                        _processMouseEvent: function (a) {
                            var c = this.map,
                                b = c && c.position;
                            b && (a.screenPoint = new l(a.pageX - b.x, a.pageY - b.y), a.mapPoint = c.extent ? c.toMap(a.screenPoint) : new k);
                            return a
                        },
                        setImmediateTap: function (a) {
                            this._immediate = a
                        },
                        destroy: function () {
                            var a = this.node;
                            a.removeEventListener("MSPointerDown", this._pointerDown, !1);
                            a.removeEventListener("MSPointerMove", this._pointerMove, !1);
                            a.removeEventListener("MSPointerUp", this._pointerUp, !1);
                            a.removeEventListener("MSPointerCancel", this._pointerCancel, !1);
                            this.map && (a.removeEventListener("mouseover", this._mouseOver, !1), a.removeEventListener("mousemove", this._mouseMove, !1), a.removeEventListener("mouseout", this._mouseOut, !1), a.removeEventListener("mouseleave", this._mouseLeave, !1), a.removeEventListener("mousedown", this._mouseDown, !1), a.removeEventListener("mouseup", this._mouseUp, !1), a.removeEventListener("click", this._mouseClick, !1), a.removeEventListener("mouseenter", this._mouseEnter, !1));
                            clearTimeout(this._tapTimer);
                            this.node = this.map = this._numTouches = this._touches = this._touchIds = this._taps = null
                        }
                    });
                    g("extend-esri") &&
                        (q.PointerEvents = r);
                    return r
                })
        },
        "esri/geometry": function () {
            define("./units ./SpatialReference ./geometry/Geometry ./geometry/Point ./geometry/ScreenPoint ./geometry/Multipoint ./geometry/Polyline ./geometry/Polygon ./geometry/Extent ./geometry/Rect ./geometry/geodesicUtils ./geometry/jsonUtils ./geometry/mathUtils ./geometry/normalizeUtils ./geometry/scaleUtils ./geometry/screenUtils ./geometry/webMercatorUtils".split(" "), function (r, p, a, g, q, h, k, l, e, c, b, d, m, t, s, n, f) {
                return {
                    units: r,
                    SpatialReference: p,
                    Geometry: a,
                    Point: g,
                    ScreenPoint: q,
                    Multipoint: h,
                    Polyline: k,
                    Polygon: l,
                    Extent: e,
                    Rect: c,
                    geodesicUtils: b,
                    jsonUtils: d,
                    mathUtils: m,
                    normalizeUtils: t,
                    scaleUtils: s,
                    screenUtils: n,
                    webMercatorUtils: f
                }
            })
        },
        "esri/units": function () {
            define(["dojo/has", "./kernel"], function (r, p) {
                var a = {
                    CENTIMETERS: "esriCentimeters",
                    DECIMAL_DEGREES: "esriDecimalDegrees",
                    DEGREE_MINUTE_SECONDS: "esriDegreeMinuteSeconds",
                    DECIMETERS: "esriDecimeters",
                    FEET: "esriFeet",
                    FEET_US: "esriFeetUS",
                    INCHES: "esriInches",
                    KILOMETERS: "esriKilometers",
                    METERS: "esriMeters",
                    MILES: "esriMiles",
                    MILES_US: "esriMilesUS",
                    MILLIMETERS: "esriMillimeters",
                    NAUTICAL_MILES: "esriNauticalMiles",
                    POINTS: "esriPoints",
                    UNKNOWN: "esriUnknownUnits",
                    YARDS: "esriYards",
                    YARDS_US: "esriYardsUS",
                    ACRES: "esriAcres",
                    ACRES_US: "esriAcresUS",
                    ARES: "esriAres",
                    SQUARE_KILOMETERS: "esriSquareKilometers",
                    SQUARE_MILES: "esriSquareMiles",
                    SQUARE_MILES_US: "esriSquareMilesUS",
                    SQUARE_FEET: "esriSquareFeet",
                    SQUARE_FEET_US: "esriSquareFeetUS",
                    SQUARE_METERS: "esriSquareMeters",
                    HECTARES: "esriHectares",
                    SQUARE_YARDS: "esriSquareYards",
                    SQUARE_YARDS_US: "esriSquareYardsUS",
                    SQUARE_INCHES: "esriSquareInches",
                    SQUARE_MILLIMETERS: "esriSquareMillimeters",
                    SQUARE_CENTIMETERS: "esriSquareCentimeters",
                    SQUARE_DECIMETERS: "esriSquareDecimeters",
                    SQUARE_NAUTICAL_MILES: "esriSquareNauticalMiles",
                    METERS_PER_SECOND: "esriMetersPerSecond",
                    KILOMETERS_PER_HOUR: "esriKilometersPerHour",
                    KNOTS: "esriKnots",
                    FEET_PER_SECOND: "esriFeetPerSecond",
                    MILES_PER_HOUR: "esriMilesPerHour",
                    RADIANS: "esriDURadians"
                };
                r("extend-esri") && (p.Units = a);
                return a
            })
        },
        "esri/geometry/geodesicUtils": function () {
            define("dojo/_base/array dojo/_base/lang dojo/has ../kernel ../SpatialReference ./Point ./Polyline ./Polygon".split(" "),
                function (r, p, a, g, q, h, k, l) {
                    function e(a) {
                        var b = Math.PI / 180,
                            c = Math.sin(a.y * b),
                            c = 0.9933056200098026 * (c / (1 - 0.006694379990197414 * c * c) - 6.111035746609262 * Math.log((1 - 0.0818191908429643 * c) / (1 + 0.0818191908429643 * c)));
                        return new h(6378137 * a.x * b, 3189068.5 * c)
                    }

                    function c(a, b, c, d) {
                        var e = 1 / 298.257223563,
                            g = Math.sin(c);
                        c = Math.cos(c);
                        a = (1 - e) * Math.tan(a);
                        var m = 1 / Math.sqrt(1 + a * a),
                            l = a * m,
                            k = Math.atan2(a, c);
                        a = m * g * m * g;
                        for (var t = 1 - a, p = 2.7233160610754688E11 * t / 4.040829998466145E13, r = 1 + p / 16384 * (4096 + p * (-768 + p * (320 - 175 * p))), D =
                                p / 1024 * (256 + p * (-128 + p * (74 - 47 * p))), p = d / (6356752.31424518 * r), F = 2 * Math.PI, E, Q, R, G; 1E-12 < Math.abs(p - F);) R = Math.cos(2 * k + p), E = Math.sin(p), Q = Math.cos(p), G = D * E * (R + D / 4 * (Q * (-1 + 2 * R * R) - D / 6 * R * (-3 + 4 * E * E) * (-3 + 4 * R * R))), F = p, p = d / (6356752.31424518 * r) + G;
                        d = l * E - m * Q * c;
                        d = Math.atan2(l * Q + m * E * c, (1 - e) * Math.sqrt(a + d * d));
                        g = Math.atan2(E * g, m * Q - l * E * c);
                        c = e / 16 * t * (4 + e * (4 - 3 * t));
                        e = g - (1 - c) * e * Math.sqrt(a) * (p + c * E * (R + c * Q * (-1 + 2 * R * R)));
                        return new h((b + e) / (Math.PI / 180), d / (Math.PI / 180), new q({
                            wkid: 4326
                        }))
                    }

                    function b(a, b, c, d) {
                        var e = 1 / 298.257223563,
                            g = d - b,
                            m = Math.atan((1 - e) * Math.tan(a)),
                            h = Math.atan((1 - e) * Math.tan(c)),
                            l = Math.sin(m),
                            m = Math.cos(m),
                            k = Math.sin(h),
                            h = Math.cos(h),
                            q = g,
                            t, p = 1E3,
                            r, E, Q, R, G, I, P;
                        do {
                            Q = Math.sin(q);
                            R = Math.cos(q);
                            E = Math.sqrt(h * Q * h * Q + (m * k - l * h * R) * (m * k - l * h * R));
                            if (0 === E) return 0;
                            R = l * k + m * h * R;
                            G = Math.atan2(E, R);
                            I = m * h * Q / E;
                            r = 1 - I * I;
                            Q = R - 2 * l * k / r;
                            isNaN(Q) && (Q = 0);
                            P = e / 16 * r * (4 + e * (4 - 3 * r));
                            t = q;
                            q = g + (1 - P) * e * I * (G + P * E * (Q + P * R * (-1 + 2 * Q * Q)))
                        } while (1E-12 < Math.abs(q - t) && 0 < --p);
                        if (0 === p) return l = 6371009 * Math.acos(Math.sin(a) * Math.sin(c) + Math.cos(a) * Math.cos(c) *
                            Math.cos(d - b)), k = d - b, m = Math.sin(k) * Math.cos(c), a = Math.cos(a) * Math.sin(c) - Math.sin(a) * Math.cos(c) * Math.cos(k), {
                            azimuth: Math.atan2(m, a),
                            geodesicDistance: l
                        };
                        a = 2.7233160610754688E11 * r / 4.040829998466145E13;
                        c = a / 1024 * (256 + a * (-128 + a * (74 - 47 * a)));
                        a = 6356752.31424518 * (1 + a / 16384 * (4096 + a * (-768 + a * (320 - 175 * a)))) * (G - c * E * (Q + c / 4 * (R * (-1 + 2 * Q * Q) - c / 6 * Q * (-3 + 4 * E * E) * (-3 + 4 * Q * Q))));
                        c = Math.atan2(h * Math.sin(q), m * k - l * h * Math.cos(q));
                        l = Math.atan2(m * Math.sin(q), m * k * Math.cos(q) - l * h);
                        return {
                            azimuth: c,
                            geodesicDistance: a,
                            reverseAzimuth: l
                        }
                    }

                    function d(a, d) {
                        var f = Math.PI / 180;
                        637.100877151506 > d && (d = 637.100877151506);
                        if (!(a instanceof k || a instanceof l)) throw console.error("_geodesicDensify: the input geometry is neither polyline nor polygon"), Error("_geodesicDensify: the input geometry is neither polyline nor polygon");
                        var e = a instanceof k,
                            g = [],
                            m;
                        r.forEach(e ? a.paths : a.rings, function (a) {
                            g.push(m = []);
                            m.push([a[0][0], a[0][1]]);
                            var e, h, l, s, k, q;
                            e = a[0][0] * f;
                            h = a[0][1] * f;
                            for (k = 0; k < a.length - 1; k++)
                                if (l = a[k + 1][0] * f, s = a[k + 1][1] * f, !(e === l && h === s)) {
                                    s =
                                        b(h, e, s, l);
                                    l = s.azimuth;
                                    s = s.geodesicDistance;
                                    var t = s / d;
                                    if (1 < t) {
                                        for (q = 1; q <= t - 1; q++) {
                                            var p = c(h, e, l, q * d);
                                            m.push([p.x, p.y])
                                        }
                                        q = c(h, e, l, (s + Math.floor(t - 1) * d) / 2);
                                        m.push([q.x, q.y])
                                    }
                                    h = c(h, e, l, s);
                                    m.push([h.x, h.y]);
                                    e = h.x * f;
                                    h = h.y * f
                                }
                        });
                        return e ? new k({
                            paths: g,
                            spatialReference: a.spatialReference
                        }) : new l({
                            rings: g,
                            spatialReference: a.spatialReference
                        })
                    }
                    var m = {
                            esriMeters: 1,
                            esriKilometers: 1E3,
                            esriYards: 0.9144,
                            esriFeet: 0.3048,
                            esriMiles: 1609.344,
                            esriNauticalMiles: 1852,
                            esriInches: 0.0254,
                            esriDecimeters: 0.1,
                            esriCentimeters: 0.01,
                            esriMillimeters: 0.0010,
                            esriSquareMeters: 1,
                            esriSquareKilometers: 1E6,
                            esriSquareYards: 0.83612736,
                            esriSquareFeet: 0.09290304,
                            esriSquareMiles: 2589988.110336,
                            esriAcres: 4046.8564224,
                            esriHectares: 1E4,
                            esriAres: 100,
                            esriSquareInches: 6.4516E-4,
                            esriSquareMillimeters: 1E-6,
                            esriSquareCentimeters: 1E-4,
                            esriSquareDecimeters: 0.01
                        },
                        t = {
                            geodesicDensify: d,
                            geodesicLengths: function (a, c) {
                                var f = Math.PI / 180,
                                    d = [];
                                r.forEach(a, function (a, e) {
                                    var g = 0;
                                    r.forEach(a.paths, function (a, c) {
                                        var d = 0,
                                            e, m, n, h, l;
                                        for (e = 1; e < a.length; e++) m = a[e - 1][0] *
                                            f, n = a[e][0] * f, h = a[e - 1][1] * f, l = a[e][1] * f, h === l && m === n || (m = b(h, m, l, n), d += m.geodesicDistance);
                                        g += d
                                    });
                                    g /= m[c];
                                    d.push(g)
                                });
                                return d
                            },
                            geodesicAreas: function (a, b) {
                                var c = [];
                                r.forEach(a, function (a, b) {
                                    var e = d(a, 1E4);
                                    c.push(e)
                                });
                                var g = [],
                                    l, k;
                                r.forEach(c, function (a, c) {
                                    var f = 0;
                                    r.forEach(a.rings, function (a, b) {
                                        l = e(new h(a[0][0], a[0][1]));
                                        k = e(new h(a[a.length - 1][0], a[a.length - 1][1]));
                                        var c = k.x * l.y - l.x * k.y,
                                            d;
                                        for (d = 0; d < a.length - 1; d++) l = e(new h(a[d + 1][0], a[d + 1][1])), k = e(new h(a[d][0], a[d][1])), c += k.x * l.y - l.x * k.y;
                                        f +=
                                            c
                                    });
                                    f /= m[b];
                                    g.push(f / -2)
                                });
                                return g
                            },
                            _unitsDictionary: m,
                            _toEqualAreaPoint: e,
                            _directGeodeticSolver: c,
                            _inverseGeodeticSolver: b
                        };
                    a("extend-esri") && p.mixin(p.getObject("geometry", !0, g), t);
                    return t
                })
        },
        "esri/symbol": function () {
            define("./symbols/Symbol ./symbols/MarkerSymbol ./symbols/SimpleMarkerSymbol ./symbols/PictureMarkerSymbol ./symbols/LineSymbol ./symbols/SimpleLineSymbol ./symbols/CartographicLineSymbol ./symbols/FillSymbol ./symbols/SimpleFillSymbol ./symbols/PictureFillSymbol ./symbols/Font ./symbols/TextSymbol ./symbols/jsonUtils".split(" "),
                function (r, p, a, g, q, h, k, l, e, c, b, d, m) {
                    return {
                        Symbol: r,
                        MarkerSymbol: p,
                        SimpleMarkerSymbol: a,
                        PictureMarkerSymbol: g,
                        LineSymbol: q,
                        SimpleLineSymbol: h,
                        CartographicLineSymbol: k,
                        FillSymbol: l,
                        SimpleFillSymbol: e,
                        PictureFillSymbol: c,
                        Font: b,
                        TextSymbol: d,
                        jsonUtils: m
                    }
                })
        },
        "esri/renderer": function () {
            define("./renderers/Renderer ./renderers/SimpleRenderer ./renderers/UniqueValueRenderer ./renderers/ClassBreaksRenderer ./renderers/TemporalRenderer ./renderers/SymbolAger ./renderers/TimeClassBreaksAger ./renderers/TimeRampAger ./renderers/jsonUtils".split(" "),
                function (r, p, a, g, q, h, k, l, e) {
                    return {
                        Renderer: r,
                        SimpleRenderer: p,
                        UniqueValueRenderer: a,
                        ClassBreaksRenderer: g,
                        TemporalRenderer: q,
                        SymbolAger: h,
                        TimeClassBreaksAger: k,
                        TimeRampAger: l,
                        jsonUtils: e
                    }
                })
        },
        "esri/renderers/Renderer": function () {
            define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has dojox/gfx/_base ../kernel ../Color ./arcadeUtils".split(" "), function (r, p, a, g, q, h, k, l) {
                var e = Math.PI,
                    c = 1;
                r = r(null, {
                    declaredClass: "esri.renderer.Renderer",
                    constructor: function (a) {
                        this._cache = {};
                        if (a && !a.declaredClass) {
                            this.rotationInfo =
                                a.rotationInfo;
                            if (!this.rotationInfo) {
                                var c = a.rotationType,
                                    e = a.rotationExpression;
                                if (c || e) this.rotationInfo = {
                                    type: c,
                                    expression: e
                                }
                            }
                            this.setRotationInfo(this.rotationInfo);
                            this.setSizeInfo(this._readSizeInfo(a.sizeInfo));
                            this.setColorInfo(this._readColorInfo(a.colorInfo));
                            this.setOpacityInfo(this._readOpacityInfo(a.transparencyInfo));
                            this.setVisualVariables(this._readVariables(a.visualVariables));
                            this.setAuthoringInfo(a.authoringInfo)
                        }
                        this.getSymbol = p.hitch(this, this.getSymbol)
                    },
                    getSymbol: function (a) {},
                    _readSizeInfo: function (b) {
                        if (b) {
                            var c = b.minSize,
                                e = b.maxSize;
                            c && (b.minSize = "number" === typeof c ? q.pt2px(c) : this._readSizeInfo(c));
                            e && (b.maxSize = "number" === typeof e ? q.pt2px(e) : this._readSizeInfo(e));
                            b.stops && a.forEach(b.stops, function (a) {
                                a.size && "number" === typeof a.size && (a.size = q.pt2px(a.size))
                            })
                        }
                        return b
                    },
                    _readColorInfo: function (b) {
                        b && (a.forEach(b.colors, function (a, c) {
                            p.isArray(a) && (b.colors[c] = k.toDojoColor(a))
                        }), a.forEach(b.stops, function (a, c) {
                            a.color && p.isArray(a.color) && (b.stops[c].color = k.toDojoColor(a.color))
                        }));
                        return b
                    },
                    _readOpacityInfo: function (b) {
                        var c;
                        b && (c = p.mixin({}, b), c.transparencyValues && (c.opacityValues = a.map(c.transparencyValues, function (a) {
                            return 1 - a / 100
                        }), delete c.transparencyValues), c.stops && (c.stops = a.map(c.stops, function (a) {
                            a = p.mixin({}, a);
                            a.opacity = 1 - a.transparency / 100;
                            delete a.transparency;
                            return a
                        })));
                        return c
                    },
                    _readVariables: function (b) {
                        b && (b = a.map(b, function (a) {
                            "sizeInfo" === a.type ? a = this._readSizeInfo(a) : "colorInfo" === a.type ? a = this._readColorInfo(a) : "transparencyInfo" === a.type && (a = this._readOpacityInfo(a),
                                a.type = "opacityInfo");
                            return a
                        }, this));
                        return b
                    },
                    setAuthoringInfo: function (a) {
                        this.authoringInfo = a
                    },
                    setRotationInfo: function (a) {
                        if (a = this.rotationInfo = "string" === typeof a ? {
                                field: a
                            } : a) {
                            if (a.expression && !p.isFunction(a.expression) && !a.field) {
                                var c = a.expression.match(this.rotationRE);
                                c && c[1] && (a.field = c[1])
                            }
                            a.rotationType = a.type
                        }
                        return this
                    },
                    rotationRE: /^\[([^\]]+)\]$/i,
                    _processRotationInfo: function (a) {
                        return this._createCache(a)
                    },
                    getRotationAngle: function (a, c) {
                        var e = this._getVarInfo(c && c.rotationInfo,
                                "rotationInfo"),
                            g = e.variable,
                            h = this._cache[e.cacheKey],
                            e = "arithmetic" === this._getRotationType(g),
                            g = g.field,
                            h = h && h.compiledFunc,
                            n = a.attributes,
                            f = null;
                        if (g || h) h ? f = l.executeFunction(h, l.createExecContext(a, a._getView())) : p.isFunction(g) ? f = g.apply(this, arguments) : n && (f = n[g] || 0), f = "number" === typeof f && !isNaN(f) ? (f + (e ? -90 : 0)) * (e ? -1 : 1) : null;
                        return f
                    },
                    _getRotationType: function (a) {
                        return a && ("rotationInfo" === a.type ? a.rotationType : a.type)
                    },
                    _getDataValue: function (a, c, e, g, h) {
                        g || (g = this._getVarInfo(c, e), c = g.variable,
                            g = this._cache[g.cacheKey], "sizeInfo" === e && (g = g.root));
                        return a._getDataValue(c, g, l, h)
                    },
                    setVisualVariables: function (b) {
                        var c = this._cache;
                        a.forEach(this.visualVariables, function (a, b) {
                            c.hasOwnProperty(b) && (c[b] = null)
                        }, this);
                        this.visualVariables = b;
                        a.some(b, function (a) {
                            return !!a.target
                        }) && b.sort(function (a, b) {
                            return a.target === b.target ? 0 : a.target ? 1 : -1
                        });
                        a.forEach(b, function (a, b) {
                            "colorInfo" === a.type ? c[b] = this._processColorInfo(a) : "opacityInfo" === a.type ? c[b] = this._processOpacityInfo(a) : "sizeInfo" === a.type ?
                                c[b] = this._processSizeInfo(a) : "rotationInfo" === a.type && (c[b] = this._processRotationInfo(a))
                        }, this);
                        return this
                    },
                    getVisualVariableValues: function (b) {
                        var c = this.visualVariables,
                            e;
                        c && (e = a.map(c, function (a) {
                            var c;
                            switch (a.type) {
                            case "sizeInfo":
                                c = this.getSize(b, {
                                    sizeInfo: a
                                });
                                break;
                            case "colorInfo":
                                c = this.getColor(b, {
                                    colorInfo: a
                                });
                                break;
                            case "opacityInfo":
                                c = this.getOpacity(b, {
                                    opacityInfo: a
                                });
                                break;
                            case "rotationInfo":
                                c = this.getRotationAngle(b, {
                                    rotationInfo: a
                                })
                            }
                            return {
                                variable: a,
                                value: c
                            }
                        }, this));
                        return e
                    },
                    hasVisualVariables: function (a, c) {
                        return a ? !!this.getVisualVariablesForType(a, c) : !(!this.getVisualVariablesForType("sizeInfo", c) && !this.getVisualVariablesForType("colorInfo", c) && !this.getVisualVariablesForType("opacityInfo", c) && !this.getVisualVariablesForType("rotationInfo", c))
                    },
                    getVisualVariablesForType: function (b, c) {
                        var e = this.visualVariables,
                            g;
                        !c && this[b] ? ("rotationInfo" === b && (this[b].rotationType = this[b].type), g = [this[b]]) : e && (g = a.filter(e, function (a) {
                            return a.type === b && ("string" === typeof c ? a.target ===
                                c : !1 === c ? !a.target : !0)
                        })) && 0 === g.length && (g = void 0);
                        return g
                    },
                    setSizeInfo: function (a) {
                        this.sizeInfo = this.proportionalSymbolInfo = a;
                        this._cache.sizeInfo = this._processSizeInfo(a);
                        return this
                    },
                    _processSizeInfo: function (a) {
                        return a && {
                            root: this._createCache(a),
                            minSize: this._createCache(a.minSize),
                            maxSize: this._createCache(a.maxSize)
                        }
                    },
                    _convertExpressionToArcade: function (a) {
                        a && a.expression && (a.valueExpression = "$view.scale")
                    },
                    _getVarInfo: function (b, c) {
                        var e;
                        b && b.type === c ? (e = a.indexOf(this.visualVariables,
                            b), b = this.visualVariables[e]) : (e = c, b = this[c]);
                        return {
                            variable: b,
                            cacheKey: e
                        }
                    },
                    setProportionalSymbolInfo: function (a) {
                        this.setSizeInfo(a);
                        return this
                    },
                    getSize: function (a, c) {
                        var e = this._getVarInfo(c && c.sizeInfo, "sizeInfo"),
                            g = e.variable,
                            e = this._cache[e.cacheKey],
                            h = null;
                        if (g) var n = g.minSize,
                            h = g.maxSize,
                            n = "object" === typeof n && n ? this._getSize(a, n, e && e.minSize, c) : n,
                            h = "object" === typeof h && h ? this._getSize(a, h, e && e.maxSize, c) : h,
                            h = this._getSize(a, g, e && e.root, c, [n, h]);
                        return h
                    },
                    _getSize: function (a, c, g, h, l) {
                        var n =
                            c.stops,
                            f = 0,
                            k = g && g.hasExpr,
                            q = g && g.ipData,
                            p = g && g.isScaleDriven,
                            r = "object" === typeof a && !!a,
                            x = "number" === typeof a ? a : null;
                        if (c.field || p || k) {
                            var v = h && h.scale,
                                k = l ? l[0] : c.minSize;
                            l = l ? l[1] : c.maxSize;
                            var A = c.minDataValue,
                                z = c.maxDataValue,
                                H = c.valueUnit || "unknown",
                                D = c.valueRepresentation,
                                F = c.scaleBy,
                                E = h && h.shape;
                            p ? x = v : "number" !== typeof x && r && (x = this._getDataValue(a, c, null, g));
                            if (null == x) return null;
                            if (n) k = this._lookupData(x, q), x = k[0], l = k[1], x === l ? f = n[x].size : (x = n[x].size, n = n[l].size, f = x + (n - x) * k[2]);
                            else if (null !=
                                k && null != l && null != A && null != z) x <= A ? f = k : x >= z ? f = l : (n = (x - A) / (z - A), "area" === F && E ? (k = (x = "circle" === E) ? e * Math.pow(k / 2, 2) : k * k, l = x ? e * Math.pow(l / 2, 2) : l * l, n = k + n * (l - k), f = x ? 2 * Math.sqrt(n / e) : Math.sqrt(n)) : f = k + n * (l - k));
                            else if ("unknown" === H) null != k && null != A && (k && A ? (n = x / A, f = "circle" === E ? 2 * Math.sqrt(n * Math.pow(k / 2, 2)) : "square" === E || "diamond" === E || "image" === E ? Math.sqrt(n * Math.pow(k, 2)) : n * k) : f = x + (k || A), f = f < k ? k : f, null != l && f > l && (f = l));
                            else {
                                n = (h && h.resolution ? h.resolution : 1) * this._meterIn[H];
                                if ("area" === D) f = Math.sqrt(x /
                                    e) / n, f *= 2;
                                else if (f = x / n, "radius" === D || "distance" === D) f *= 2;
                                null != k && f < k && (f = k);
                                null != l && f > l && (f = l)
                            }
                        } else f = n && n[0] && n[0].size, null == f && (f = c.minSize);
                        return f = isNaN(f) ? 0 : f
                    },
                    getSizeRangeAtScale: function (a, c) {
                        var e, g = this._getVarInfo(a, "sizeInfo"),
                            h = this._cache[g.cacheKey],
                            n = {
                                scale: c
                            };
                        if ((a = g.variable) && c) {
                            var g = a.minSize,
                                f = a.maxSize,
                                l = a.stops;
                            l && l.length ? (g = l[0].size, h = l[l.length - 1].size) : (g = "object" === typeof g && g ? this._getSize({}, g, h && h.minSize, n) : g, h = "object" === typeof f && f ? this._getSize({}, f, h && h.maxSize,
                                n) : f);
                            if (null != g || null != h) g > h && (e = h, h = g, g = e), e = {
                                minSize: g,
                                maxSize: h
                            }
                        }
                        return e
                    },
                    setColorInfo: function (a) {
                        this.colorInfo = a;
                        this._cache.colorInfo = this._processColorInfo(a);
                        return this
                    },
                    prepareForViewChange: function (a) {
                        var d;
                        a = a || this._cache;
                        for (d in a) {
                            var e = a[d];
                            a.hasOwnProperty(d) && (e && "object" === typeof e) && (e.hasOwnProperty("version") ? e.dependsOnView && (e.version = c++) : this.prepareForViewChange(e))
                        }
                    },
                    _viewScaleRE: /^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i,
                    _createCache: function (a) {
                        var d = a && a.valueExpression,
                            e = l.createSyntaxTree(d),
                            g = l.createFunction(e),
                            h = !(!a || !a.expression) || this._viewScaleRE.test(d);
                        return {
                            ipData: this._interpolateData(a),
                            hasExpr: !!d,
                            compiledFunc: g,
                            isScaleDriven: h,
                            dependsOnView: e ? l.dependsOnView(e) : !1,
                            version: c++
                        }
                    },
                    _processColorInfo: function (b) {
                        b && (a.forEach(b.colors, function (a, c) {
                            p.isArray(a) && (b.colors[c] = new k(a))
                        }), a.forEach(b.stops, function (a, c) {
                            a.color && p.isArray(a.color) && (b.stops[c].color = new k(a.color))
                        }));
                        return this._createCache(b)
                    },
                    getColor: function (a, c) {
                        var e = this._getVarInfo(c &&
                            c.colorInfo, "colorInfo");
                        return this._getColorComponent(a, e.variable, this._cache[e.cacheKey])
                    },
                    setOpacityInfo: function (a) {
                        this.opacityInfo = a;
                        this._cache.opacityInfo = this._processOpacityInfo(a);
                        return this
                    },
                    _processOpacityInfo: function (a) {
                        return this._createCache(a)
                    },
                    getOpacity: function (a, c) {
                        var e = this._getVarInfo(c && c.opacityInfo, "opacityInfo");
                        return this._getColorComponent(a, e.variable, this._cache[e.cacheKey], !0)
                    },
                    _getColorComponent: function (a, c, e, g, h) {
                        var n = "object" === typeof a && !!a,
                            f = n ? a.attributes :
                            null,
                            k = c && c.field,
                            q = "number" === typeof a,
                            r = q ? a : null,
                            C = e && e.hasExpr,
                            x = e && e.compiledFunc,
                            v = e && e.ipData,
                            A;
                        if (k || C) {
                            var z = c.normalizationField,
                                H = f ? parseFloat(f[z]) : void 0;
                            "number" !== typeof r && n && (C ? r = l.executeFunction(x, l.createExecContext(a, a._getView())) : p.isFunction(k) ? r = k.apply(this, arguments) : f && (r = f[k]));
                            if (null != r && !isNaN(r) && "number" === typeof r && (!z || q || !isNaN(H) && 0 !== H)) !isNaN(H) && !q && (r /= H), A = g ? this._getOpacity(r, c, v) : this._getColor(r, c, v)
                        } else c && (n = c.stops, g ? (A = n && n[0] && n[0].opacity, null ==
                            A && (A = c.opacityValues && c.opacityValues[0])) : A = n && n[0] && n[0].color || c.colors && c.colors[0]);
                        h && (h.data = r, h.value = A);
                        return h || A
                    },
                    _interpolateData: function (b) {
                        var c;
                        if (b)
                            if (b.colors || b.opacityValues) {
                                var e = (b.colors || b.opacityValues).length,
                                    g = b.minDataValue,
                                    h = (b.maxDataValue - g) / (e - 1);
                                c = [];
                                for (b = 0; b < e; b++) c[b] = g + b * h
                            } else b.stops && (c = a.map(b.stops, function (a) {
                                return a.value
                            }));
                        return c
                    },
                    _getOpacity: function (a, c, e) {
                        a = this._lookupData(a, e);
                        var g;
                        c = c || this.opacityInfo;
                        a && (e = a[0], g = a[1], e === g ? g = this._getOpacValue(c,
                            e) : (e = this._getOpacValue(c, e), c = this._getOpacValue(c, g), g = e + (c - e) * a[2]));
                        return g
                    },
                    _getOpacValue: function (a, c) {
                        return a.opacityValues ? a.opacityValues[c] : a.stops[c].opacity
                    },
                    _getColor: function (a, c, e) {
                        a = this._lookupData(a, e);
                        var g;
                        c = c || this.colorInfo;
                        a && (g = a[0], e = a[1], g = g === e ? this._getColorObj(c, g) : k.blendColors(this._getColorObj(c, g), this._getColorObj(c, e), a[2]));
                        return g
                    },
                    _getColorObj: function (a, c) {
                        return a.colors ? a.colors[c] : a.stops[c].color
                    },
                    _lookupData: function (b, c) {
                        var e;
                        if (c) {
                            var g = 0,
                                h = c.length -
                                1;
                            a.some(c, function (a, c) {
                                if (b < a) return h = c, !0;
                                g = c;
                                return !1
                            });
                            e = [g, h, (b - c[g]) / (c[h] - c[g])]
                        }
                        return e
                    },
                    _meterIn: {
                        inches: 1 / 0.0254,
                        feet: 1 / 0.3048,
                        yards: 1 / 0.9144,
                        miles: 1 / 1609.344,
                        "nautical-miles": 1 / 1852,
                        millimeters: 1E3,
                        centimeters: 100,
                        decimeters: 10,
                        meters: 1,
                        kilometers: 0.0010,
                        "decimal-degrees": 180 / 20015077
                    },
                    _writeSizeInfo: function (b) {
                        if (b) {
                            b = p.mixin({}, b);
                            this._convertExpressionToArcade(b);
                            var c = b.minSize,
                                e = b.maxSize;
                            c && (b.minSize = "number" === typeof c ? q.px2pt(c) : this._writeSizeInfo(c));
                            e && (b.maxSize = "number" ===
                                typeof e ? q.px2pt(e) : this._writeSizeInfo(e));
                            if (c = b.legendOptions)
                                if (b.legendOptions = p.mixin({}, c), c = c.customValues) b.legendOptions.customValues = c.slice(0);
                            b.stops && (b.stops = a.map(b.stops, function (a) {
                                a = p.mixin({}, a);
                                a.size && "number" === typeof a.size && (a.size = q.px2pt(a.size));
                                return a
                            }))
                        }
                        return b
                    },
                    _writeColorInfo: function (b) {
                        b && (b = p.mixin({}, b), b.colors && (b.colors = a.map(b.colors, function (a) {
                            return k.toJsonColor(a)
                        })), b.stops && (b.stops = a.map(b.stops, function (a) {
                            a = p.mixin({}, a);
                            a.color && (a.color = k.toJsonColor(a.color));
                            return a
                        })), b.legendOptions && (b.legendOptions = p.mixin({}, b.legendOptions)));
                        return b
                    },
                    _writeOpacityInfo: function (b) {
                        var c;
                        b && (c = p.mixin({}, b), c.opacityValues && (c.transparencyValues = a.map(c.opacityValues, function (a) {
                            return 100 * (1 - a)
                        }), delete c.opacityValues), c.stops && (c.stops = a.map(c.stops, function (a) {
                            a = p.mixin({}, a);
                            a.transparency = 100 * (1 - a.opacity);
                            delete a.opacity;
                            return a
                        })), c.legendOptions && (c.legendOptions = p.mixin({}, c.legendOptions)));
                        return c
                    },
                    toJson: function () {
                        var b = this.visualVariables,
                            c =
                            p.clone(this.authoringInfo),
                            e = this.getVisualVariablesForType("rotationInfo", !1),
                            g = (e = e && e[0]) && e.field,
                            h;
                        e && e === this.rotationInfo && (h = e.expression || g && (p.isFunction(g) ? g : "[" + g + "]"));
                        b && (b = a.map(b, function (a) {
                            "sizeInfo" === a.type ? a = this._writeSizeInfo(a) : "colorInfo" === a.type ? a = this._writeColorInfo(a) : "opacityInfo" === a.type ? (a = this._writeOpacityInfo(a), a.type = "transparencyInfo") : "rotationInfo" === a.type && (a = p.mixin({}, a));
                            return a
                        }, this));
                        c && a.forEach(c.visualVariables, function (a) {
                            "opacityInfo" === a.type &&
                                (a.type = "transparencyInfo")
                        });
                        return {
                            rotationType: h && (this._getRotationType(e) || "geographic"),
                            rotationExpression: h,
                            colorInfo: this._writeColorInfo(this.colorInfo),
                            transparencyInfo: this._writeOpacityInfo(this.opacityInfo),
                            sizeInfo: this._writeSizeInfo(this.sizeInfo),
                            visualVariables: b,
                            authoringInfo: c
                        }
                    }
                });
                g("extend-esri") && p.setObject("renderer.Renderer", r, h);
                return r
            })
        },
        "esri/renderers/arcadeUtils": function () {
            define(["dojo/_base/lang", "dojo/_base/array", "dojo/has", "../kernel", "../arcade/arcade"], function (r,
                p, a, g, q) {
                var h = {
                        vars: {
                            $feature: "any",
                            $view: "any"
                        }
                    },
                    k = /^\$feature\./i,
                    l = {
                        createSyntaxTree: function (a, c) {
                            c = c || r.clone(h);
                            var b;
                            try {
                                b = a ? q.parseScript(a, c) : null
                            } catch (d) {
                                b = null
                            }
                            return b
                        },
                        createFunction: function (a, c) {
                            c = c || r.clone(h);
                            var b = "string" === typeof a ? l.createSyntaxTree(a, c) : a,
                                d;
                            try {
                                d = b ? q.compileScript(b, c) : null
                            } catch (g) {
                                d = null
                            }
                            return d
                        },
                        createExecContext: function (a, c) {
                            return {
                                vars: {
                                    $feature: q.constructFeature(a),
                                    $view: c
                                }
                            }
                        },
                        evalSyntaxTree: function (a, c) {
                            return q.executeScript(a, c, -1)
                        },
                        executeFunction: function (a,
                            c) {
                            return a ? a(c, -1) : null
                        },
                        extractFieldNames: function (a, c) {
                            var b = "string" === typeof a ? l.createSyntaxTree(a, c) : a,
                                b = q.extractFieldLiterals(b),
                                d = [];
                            p.forEach(b, function (a) {
                                k.test(a) && (a = a.replace(k, ""), d.push(a))
                            });
                            d.sort();
                            return p.filter(d, function (a, b) {
                                return 0 === b || d[b - 1] !== a
                            })
                        },
                        dependsOnView: function (a) {
                            return q.referencesMember(a, "$view")
                        }
                    };
                a("extend-esri") && r.setObject("renderer.arcadeUtils", l, g);
                return l
            })
        },
        "esri/arcade/arcade": function () {
            define("require exports ./arcadeRuntime ./parser ./Feature ./arcadeCompiler dojo/has".split(" "),
                function (r, p, a, g, q, h, k) {
                    p.compileScript = function (g, e) {
                        return k("csp-restrictions") ? function (c, b) {
                            return a.executeScript(g, c, b)
                        } : h.compileScript(g, e)
                    };
                    p.constructFeature = function (a) {
                        return q.fromFeature(a)
                    };
                    p.parseScript = function (a) {
                        return g.parseScript(a)
                    };
                    p.validateScript = function (a, e) {
                        return g.validateScript(a, e, "simple")
                    };
                    p.scriptCheck = function (a, e, c) {
                        return g.scriptCheck(a, e, c, "full")
                    };
                    p.parseAndExecuteScript = function (h, e, c) {
                        return a.executeScript(g.parseScript(h), e, c)
                    };
                    p.executeScript = function (g,
                        e, c) {
                        return a.executeScript(g, e, c)
                    };
                    p.referencesMember = function (g, e) {
                        return a.referencesMember(g, e)
                    };
                    p.referencesFunction = function (g, e) {
                        return a.referencesFunction(g, e)
                    };
                    p.extractFieldLiterals = function (a, e) {
                        void 0 === e && (e = !1);
                        return g.extractFieldLiterals(a, e)
                    }
                })
        },
        "esri/arcade/arcadeRuntime": function () {
            define("require exports ../geometry/Polygon ../graphic ../geometry/Polyline ../geometry/Point ../geometry/Extent ../geometry/Multipoint ../SpatialReference ./languageUtils ./treeAnalysis ./Dictionary ./Feature ./FunctionWrapper ./functions/date ./functions/string ./functions/maths ./functions/geometry ./functions/stats ./ImmutablePathArray ./ImmutablePointArray ../geometry/Geometry".split(" "),
                function (r, p, a, g, q, h, k, l, e, c, b, d, m, t, s, n, f, y, u, w, C, x) {
                    function v(a, b) {
                        for (var c = [], f = 0; f < b.arguments.length; f++) c.push(z(a, b.arguments[f]));
                        return c
                    }

                    function A(a, b, c) {
                        try {
                            return c(a, b, v(a, b))
                        } catch (f) {
                            throw f;
                        }
                    }

                    function z(a, f) {
                        try {
                            switch (f.type) {
                            case "EmptyStatement":
                                return c.voidOperation;
                            case "VariableDeclarator":
                                var e = null === f.init ? null : z(a, f.init);
                                e === c.voidOperation && (e = null);
                                var g = f.id.name.toLowerCase();
                                null !== a.localScope ? a.localScope[g] = {
                                    value: e,
                                    valueset: !0,
                                    node: f.init
                                } : a.globalScope[g] = {
                                    value: e,
                                    valueset: !0,
                                    node: f.init
                                };
                                return c.voidOperation;
                            case "VariableDeclaration":
                                for (var h = 0; h < f.declarations.length; h++) z(a, f.declarations[h]);
                                return c.voidOperation;
                            case "BlockStatement":
                                var n;
                                a: {
                                    for (var l = c.voidOperation, h = 0; h < f.body.length; h++)
                                        if (l = z(a, f.body[h]), l instanceof c.ReturnResult || l === c.breakResult || l === c.continueResult) {
                                            n = l;
                                            break a
                                        }
                                    n = l
                                }
                                return n;
                            case "FunctionDeclaration":
                                var k = f.id.name.toLowerCase();
                                a.globalScope[k] = {
                                    valueset: !0,
                                    node: null,
                                    value: new t(f, a)
                                };
                                return c.voidOperation;
                            case "ReturnStatement":
                                var s;
                                if (null === f.argument) s = new c.ReturnResult(c.voidOperation);
                                else {
                                    var q = z(a, f.argument);
                                    s = new c.ReturnResult(q)
                                }
                                return s;
                            case "IfStatement":
                                var u;
                                if ("AssignmentExpression" === f.test.type || "UpdateExpression" === f.test.type) throw Error(b.nodeErrorMessage(f.test, "RUNTIME", "CANNOT_USE_ASSIGNMENT_IN_CONDITION"));
                                var p = z(a, f.test);
                                if (!0 === p) u = z(a, f.consequent);
                                else if (!1 === p) u = null !== f.alternate ? z(a, f.alternate) : c.voidOperation;
                                else throw Error(b.nodeErrorMessage(f, "RUNTIME", "CANNOT_USE_NONBOOLEAN_IN_CONDITION"));
                                return u;
                            case "ExpressionStatement":
                                var r;
                                if ("AssignmentExpression" === f.expression.type || "UpdateExpression" === f.expression.type) r = z(a, f.expression);
                                else {
                                    var w = z(a, f.expression);
                                    r = w === c.voidOperation ? c.voidOperation : new c.ImplicitResult(w)
                                }
                                return r;
                            case "AssignmentExpression":
                                var y;
                                var v = z(a, f.right),
                                    h = null,
                                    x = "";
                                if ("MemberExpression" === f.left.type) {
                                    h = z(a, f.left.object);
                                    x = !0 === f.left.computed ? z(a, f.left.property) : f.left.property.name;
                                    if (c.isArray(h))
                                        if (c.isNumber(x)) {
                                            0 > x && (x = h.length + x);
                                            if (0 > x || x > h.length) throw Error("Assignment outside of array bounds");
                                            if (x === h.length && "\x3d" !== f.operator) throw Error("Invalid Parameter");
                                            h[x] = D(v, f.operator, h[x], f)
                                        } else throw Error("Invalid Parameter");
                                    else if (h instanceof d) {
                                        if (!1 === c.isString(x)) throw Error("Dictionary accessor must be a string");
                                        if (!0 === h.hasField(x)) h.setField(x, D(v, f.operator, h.field(x), f));
                                        else {
                                            if ("\x3d" !== f.operator) throw Error("Invalid Parameter");
                                            h.setField(x, D(v, f.operator, null, f))
                                        }
                                    } else if (h instanceof m) {
                                        if (!1 === c.isString(x)) throw Error("Feature accessor must be a string");
                                        if (!0 ===
                                            h.hasField(x)) h.setField(x, D(v, f.operator, h.field(x), f));
                                        else {
                                            if ("\x3d" !== f.operator) throw Error("Invalid Parameter");
                                            h.setField(x, D(v, f.operator, null, f))
                                        }
                                    } else {
                                        if (c.isImmutableArray(h)) throw Error("Array is Immutable");
                                        throw Error("Invalid Parameter");
                                    }
                                    y = c.voidOperation
                                } else if (h = f.left.name.toLowerCase(), null !== a.localScope && void 0 !== a.localScope[h]) a.localScope[h] = {
                                    value: D(v, f.operator, a.localScope[h].value, f),
                                    valueset: !0,
                                    node: f.right
                                }, y = c.voidOperation;
                                else if (void 0 !== a.globalScope[h]) a.globalScope[h] = {
                                    value: D(v, f.operator, a.globalScope[h].value, f),
                                    valueset: !0,
                                    node: f.right
                                }, y = c.voidOperation;
                                else throw Error("Variable not recognised");
                                return y;
                            case "UpdateExpression":
                                var C;
                                var A, h = null,
                                    x = "";
                                if ("MemberExpression" === f.argument.type) {
                                    h = z(a, f.argument.object);
                                    x = !0 === f.argument.computed ? z(a, f.argument.property) : f.argument.property.name;
                                    if (c.isArray(h))
                                        if (c.isNumber(x)) {
                                            0 > x && (x = h.length + x);
                                            if (0 > x || x >= h.length) throw Error("Assignment outside of array bounds");
                                            A = c.toNumber(h[x]);
                                            h[x] = "++" === f.operator ?
                                                A + 1 : A - 1
                                        } else throw Error("Invalid Parameter");
                                    else if (h instanceof d) {
                                        if (!1 === c.isString(x)) throw Error("Dictionary accessor must be a string");
                                        if (!0 === h.hasField(x)) A = c.toNumber(h.field(x)), h.setField(x, "++" === f.operator ? A + 1 : A - 1);
                                        else throw Error("Invalid Parameter");
                                    } else if (h instanceof m) {
                                        if (!1 === c.isString(x)) throw Error("Feature accessor must be a string");
                                        if (!0 === h.hasField(x)) A = c.toNumber(h.field(x)), h.setField(x, "++" === f.operator ? A + 1 : A - 1);
                                        else throw Error("Invalid Parameter");
                                    } else {
                                        if (c.isImmutableArray(h)) throw Error("Array is Immutable");
                                        throw Error("Invalid Parameter");
                                    }
                                    C = !1 === f.prefix ? A : "++" === f.operator ? A + 1 : A - 1
                                } else if (h = f.argument.name.toLowerCase(), null !== a.localScope && void 0 !== a.localScope[h]) A = c.toNumber(a.localScope[h].value), a.localScope[h] = {
                                    value: "++" === f.operator ? A + 1 : A - 1,
                                    valueset: !0,
                                    node: f
                                }, C = !1 === f.prefix ? A : "++" === f.operator ? A + 1 : A - 1;
                                else if (void 0 !== a.globalScope[h]) A = c.toNumber(a.globalScope[h].value), a.globalScope[h] = {
                                    value: "++" === f.operator ? A + 1 : A - 1,
                                    valueset: !0,
                                    node: f
                                }, C = !1 === f.prefix ? A : "++" === f.operator ? A + 1 : A - 1;
                                else throw Error("Variable not recognised");
                                return C;
                            case "BreakStatement":
                                return c.breakResult;
                            case "ContinueStatement":
                                return c.continueResult;
                            case "ForStatement":
                                null !== f.init && z(a, f.init);
                                x = {
                                    testResult: !0,
                                    lastAction: c.voidOperation
                                };
                                do b: {
                                    y = a;
                                    v = f;
                                    C = x;
                                    if (null !== v.test) {
                                        C.testResult = z(y, v.test);
                                        if (!1 === C.testResult) break b;
                                        if (!0 !== C.testResult) throw Error(b.nodeErrorMessage(v, "RUNTIME", "CANNOT_USE_NONBOOLEAN_IN_CONDITION"));
                                    }
                                    C.lastAction = z(y, v.body);
                                    C.lastAction === c.breakResult ? C.testResult = !1 : C.lastAction instanceof c.ReturnResult ? C.testResult = !1 : null !== v.update && z(y, v.update)
                                }
                                while (!0 === x.testResult);
                                h = x.lastAction instanceof c.ReturnResult ? x.lastAction : c.voidOperation;
                                return h;
                            case "ForInStatement":
                                return H(a, f);
                            case "Identifier":
                                var F;
                                var J;
                                try {
                                    var O = f.name.toLowerCase();
                                    if (null !== a.localScope && void 0 !== a.localScope[O]) J = a.localScope[O], !0 !== J.valueset && (J.value = z(a, J.node), J.valueset = !0), F = J.value;
                                    else if (void 0 !== a.globalScope[O]) J = a.globalScope[O], !0 !== J.valueset && (J.value = z(a, J.node), J.valueset = !0), F = J.value;
                                    else throw Error(b.nodeErrorMessage(f,
                                        "RUNTIME", "VARIABLENOTFOUND"));
                                } catch (N) {
                                    throw N;
                                }
                                return F;
                            case "MemberExpression":
                                return E(a, f);
                            case "Literal":
                                return f.value;
                            case "ThisExpression":
                                throw Error(b.nodeErrorMessage(f, "RUNTIME", "NOTSUPPORTED"));
                            case "CallExpression":
                                return G(a, f);
                            case "UnaryExpression":
                                return Q(a, f);
                            case "BinaryExpression":
                                return R(a, f);
                            case "LogicalExpression":
                                var T;
                                a: try {
                                    if ("AssignmentExpression" === f.left.type || "UpdateExpression" === f.left.type) throw Error(b.nodeErrorMessage(f.left, "RUNTIME", "CANNOT_USE_ASSIGNMENT_IN_CONDITION"));
                                    if ("AssignmentExpression" === f.right.type || "UpdateExpression" === f.right.type) throw Error(b.nodeErrorMessage(f.right, "RUNTIME", "CANNOT_USE_ASSIGNMENT_IN_CONDITION"));
                                    var I = [z(a, f.left), z(a, f.right)],
                                        P = I[0],
                                        K = I[1];
                                    if (c.isBoolean(P) && c.isBoolean(K)) switch (f.operator) {
                                    case "||":
                                        T = P || K;
                                        break a;
                                    case "\x26\x26":
                                        T = P && K;
                                        break a;
                                    default:
                                        throw Error(b.nodeErrorMessage(f, "RUNTIME", "ONLYORORAND"));
                                    } else throw Error(b.nodeErrorMessage(f, "RUNTIME", "ONLYBOOLEAN"));
                                } catch (W) {
                                    throw W;
                                }
                                return T;
                            case "ConditionalExpression":
                                throw Error(b.nodeErrorMessage(f,
                                    "RUNTIME", "NOTSUPPORTED"));
                            case "ArrayExpression":
                                try {
                                    h = [];
                                    for (x = 0; x < f.elements.length; x++) {
                                        var L = z(a, f.elements[x]);
                                        if (c.isFunctionParameter(L)) throw Error(b.nodeErrorMessage(f, "RUNTIME", "FUNCTIONCONTEXTILLEGAL"));
                                        L === c.voidOperation ? h.push(null) : h.push(L)
                                    }
                                } catch (Y) {
                                    throw Y;
                                }
                                return h;
                            case "ObjectExpression":
                                h = {};
                                for (x = 0; x < f.properties.length; x++) {
                                    var Z = z(a, f.properties[x]);
                                    if (c.isFunctionParameter(Z.value)) throw Error("Illegal Argument");
                                    if (!1 === c.isString(Z.key)) throw Error("Illegal Argument");
                                    h[Z.key.toString()] = Z.value === c.voidOperation ? null : Z.value
                                }
                                var $ = new d(h);
                                $.immutable = !1;
                                return $;
                            case "Property":
                                return {
                                    key: "Identifier" === f.key.type ? f.key.name : z(a, f.key),
                                    value: z(a, f.value)
                                };
                            case "Array":
                                throw Error(b.nodeErrorMessage(f, "RUNTIME", "NOTSUPPORTED"));
                            default:
                                throw Error(b.nodeErrorMessage(f, "RUNTIME", "UNREOGNISED"));
                            }
                        } catch (Ka) {
                            throw Ka;
                        }
                    }

                    function H(a, f) {
                        var e = z(a, f.right);
                        "VariableDeclaration" === f.left.type && z(a, f.left);
                        var g = null,
                            h = "VariableDeclaration" === f.left.type ? f.left.declarations[0].id.name :
                            f.left.name;
                        null !== a.localScope && void 0 !== a.localScope[h] && (g = a.localScope[h]);
                        null === g && void 0 !== a.globalScope[h] && (g = a.globalScope[h]);
                        if (null === g) throw Error(b.nodeErrorMessage(f, "RUNTIME", "VARIABLENOTDECLARED"));
                        if (c.isArray(e) || c.isString(e)) {
                            for (var e = e.length, n = 0; n < e && !(g.value = n, h = z(a, f.body), h === c.breakResult); n++)
                                if (h instanceof c.ReturnResult) return h;
                            return c.voidOperation
                        }
                        if (c.isImmutableArray(e)) {
                            for (n = 0; n < e.length() && !(g.value = n, h = z(a, f.body), h === c.breakResult); n++)
                                if (h instanceof c.ReturnResult) return h;
                            return c.voidOperation
                        }
                        if (e instanceof d || e instanceof m) {
                            e = e.keys();
                            for (n = 0; n < e.length && !(g.value = e[n], h = z(a, f.body), h === c.breakResult); n++)
                                if (h instanceof c.ReturnResult) return h
                        } else return c.voidOperation
                    }

                    function D(a, f, d, e) {
                        switch (f) {
                        case "\x3d":
                            return a === c.voidOperation ? null : a;
                        case "/\x3d":
                            return c.toNumber(d) / c.toNumber(a);
                        case "*\x3d":
                            return c.toNumber(d) * c.toNumber(a);
                        case "-\x3d":
                            return c.toNumber(d) - c.toNumber(a);
                        case "+\x3d":
                            return c.isString(d) || c.isString(a) ? c.toString(d) + c.toString(a) :
                                c.toNumber(d) + c.toNumber(a);
                        case "%\x3d":
                            return c.toNumber(d) % c.toNumber(a);
                        default:
                            throw Error(b.nodeErrorMessage(e, "RUNTIME", "OPERATORNOTRECOGNISED"));
                        }
                    }

                    function F(a, f, e, g) {
                        f = f.toLowerCase();
                        switch (f) {
                        case "hasz":
                            return a = a.hasZ, void 0 === a ? !1 : a;
                        case "hasm":
                            return a = a.hasM, void 0 === a ? !1 : a;
                        case "spatialreference":
                            return f = a.spatialReference._arcadeCacheId, void 0 === f && (e = !0, Object.freeze && Object.isFrozen(a.spatialReference) && (e = !1), e && (Y++, f = a.spatialReference._arcadeCacheId = Y)), a = new d({
                                wkt: a.spatialReference.wkt,
                                wkid: a.spatialReference.wkid
                            }), void 0 !== f && (a._arcadeCacheId = "SPREF" + f.toString()), a
                        }
                        switch (a.type) {
                        case "extent":
                            switch (f) {
                            case "xmin":
                            case "xmax":
                            case "ymin":
                            case "ymax":
                            case "zmin":
                            case "zmax":
                            case "mmin":
                            case "mmax":
                                return a = a[f], void 0 !== a ? a : null;
                            case "type":
                                return "Extent"
                            }
                            break;
                        case "polygon":
                            switch (f) {
                            case "rings":
                                return f = c.isVersion4 ? a.cache._arcadeCacheId : a.getCacheValue("_arcadeCacheId"), void 0 === f && (Y++, f = Y, c.isVersion4 ? a.cache._arcadeCacheId = f : a.setCacheValue("_arcadeCacheId", f)), a = new w(a.rings,
                                    a.spatialReference, !0 === a.hasZ, !0 === a.hasM, f);
                            case "type":
                                return "Polygon"
                            }
                            break;
                        case "point":
                            switch (f) {
                            case "x":
                            case "y":
                            case "z":
                            case "m":
                                return void 0 !== a[f] ? a[f] : null;
                            case "type":
                                return "Point"
                            }
                            break;
                        case "polyline":
                            switch (f) {
                            case "paths":
                                return f = c.isVersion4 ? a.cache._arcadeCacheId : a.getCacheValue("_arcadeCacheId"), void 0 === f && (Y++, f = Y, c.isVersion4 ? a.cache._arcadeCacheId = f : a.setCacheValue("_arcadeCacheId", f)), a = new w(a.paths, a.spatialReference, !0 === a.hasZ, !0 === a.hasM, f);
                            case "type":
                                return "Polyline"
                            }
                            break;
                        case "multipoint":
                            switch (f) {
                            case "points":
                                return f = c.isVersion4 ? a.cache._arcadeCacheId : a.getCacheValue("_arcadeCacheId"), void 0 === f && (Y++, f = Y, c.isVersion4 ? a.cache._arcadeCacheId = f : a.setCacheValue("_arcadeCacheId", f)), a = new C(a.points, a.spatialReference, !0 === a.hasZ, !0 === a.hasM, f, 1);
                            case "type":
                                return "Multipoint"
                            }
                        }
                        throw Error(b.nodeErrorMessage(g, "RUNTIME", "PROPERTYNOTFOUND"));
                    }

                    function E(a, f) {
                        try {
                            var e = z(a, f.object);
                            if (null === e) throw Error(b.nodeErrorMessage(f, "RUNTIME", "NOTFOUND"));
                            if (!1 === f.computed) {
                                if (e instanceof d || e instanceof m) return e.field(f.property.name);
                                if (e instanceof x) return F(e, f.property.name, a, f);
                                throw Error(b.nodeErrorMessage(f, "RUNTIME", "INVALIDTYPE"));
                            }
                            var g = z(a, f.property);
                            if (e instanceof d || e instanceof m) {
                                if (c.isString(g)) return e.field(g)
                            } else if (e instanceof x) {
                                if (c.isString(g)) return F(e, g, a, f)
                            } else if (c.isArray(e)) {
                                if (c.isNumber(g) && isFinite(g) && Math.floor(g) === g) {
                                    0 > g && (g = e.length + g);
                                    if (g >= e.length || 0 > g) throw Error(b.nodeErrorMessage(f, "RUNTIME", "OUTOFBOUNDS"));
                                    return e[g]
                                }
                            } else if (c.isString(e)) {
                                if (c.isNumber(g) &&
                                    isFinite(g) && Math.floor(g) === g) {
                                    0 > g && (g = e.length + g);
                                    if (g >= e.length || 0 > g) throw Error(b.nodeErrorMessage(f, "RUNTIME", "OUTOFBOUNDS"));
                                    return e[g]
                                }
                            } else if (c.isImmutableArray(e) && c.isNumber(g) && isFinite(g) && Math.floor(g) === g) {
                                0 > g && (g = e.length() + g);
                                if (g >= e.length() || 0 > g) throw Error(b.nodeErrorMessage(f, "RUNTIME", "OUTOFBOUNDS"));
                                return e.get(g)
                            }
                            throw Error(b.nodeErrorMessage(f, "RUNTIME", "INVALIDTYPE"));
                        } catch (h) {
                            throw h;
                        }
                    }

                    function Q(a, f) {
                        try {
                            var d = z(a, f.argument);
                            if (c.isBoolean(d)) {
                                if ("!" === f.operator) return !d;
                                if ("-" === f.operator) return -1 * c.toNumber(d);
                                if ("+" === f.operator) return 1 * c.toNumber(d);
                                throw Error(b.nodeErrorMessage(f, "RUNTIME", "NOTSUPPORTEDUNARYOPERATOR"));
                            }
                            if ("-" === f.operator) return -1 * c.toNumber(d);
                            if ("+" === f.operator) return 1 * c.toNumber(d);
                            throw Error(b.nodeErrorMessage(f, "RUNTIME", "NOTSUPPORTEDUNARYOPERATOR"));
                        } catch (e) {
                            throw e;
                        }
                    }

                    function R(a, f) {
                        try {
                            var d = [z(a, f.left), z(a, f.right)],
                                e = d[0],
                                g = d[1];
                            switch (f.operator) {
                            case "\x3d\x3d":
                                return c.equalityTest(e, g);
                            case "\x3d":
                                return c.equalityTest(e,
                                    g);
                            case "!\x3d":
                                return !c.equalityTest(e, g);
                            case "\x3c":
                                return c.greaterThanLessThan(e, g, f.operator);
                            case "\x3e":
                                return c.greaterThanLessThan(e, g, f.operator);
                            case "\x3c\x3d":
                                return c.greaterThanLessThan(e, g, f.operator);
                            case "\x3e\x3d":
                                return c.greaterThanLessThan(e, g, f.operator);
                            case "+":
                                return c.isString(e) || c.isString(g) ? c.toString(e) + c.toString(g) : c.toNumber(e) + c.toNumber(g);
                            case "-":
                                return c.toNumber(e) - c.toNumber(g);
                            case "*":
                                return c.toNumber(e) * c.toNumber(g);
                            case "/":
                                return c.toNumber(e) / c.toNumber(g);
                            case "%":
                                return c.toNumber(e) % c.toNumber(g);
                            default:
                                throw Error(b.nodeErrorMessage(f, "RUNTIME", "OPERATORNOTRECOGNISED"));
                            }
                        } catch (h) {
                            throw h;
                        }
                    }

                    function G(a, f) {
                        try {
                            if ("Identifier" !== f.callee.type) throw Error(b.nodeErrorMessage(f, "RUNTIME", "ONLYNODESSUPPORTED"));
                            if (null !== a.localScope && void 0 !== a.localScope[f.callee.name.toLowerCase()]) {
                                var d = a.localScope[f.callee.name.toLowerCase()];
                                if (d.value instanceof c.NativeFunction) return d.value.fn(a, f);
                                if (d.value instanceof t) return W(a, f, d.value.definition);
                                throw Error(b.nodeErrorMessage(f, "RUNTIME", "NOTAFUNCTION"));
                            }
                            if (void 0 !== a.globalScope[f.callee.name.toLowerCase()]) {
                                d = a.globalScope[f.callee.name.toLowerCase()];
                                if (d.value instanceof c.NativeFunction) return d.value.fn(a, f);
                                if (d.value instanceof t) return W(a, f, d.value.definition);
                                throw Error(b.nodeErrorMessage(f, "RUNTIME", "NOTAFUNCTION"));
                            }
                            throw Error(b.nodeErrorMessage(f, "RUNTIME", "NOTFOUND"));
                        } catch (e) {
                            throw e;
                        }
                    }

                    function I(b) {
                        return null == b ? "" : c.isArray(b) || c.isImmutableArray(b) ? "Array" : c.isDate(b) ?
                            "Date" : c.isString(b) ? "String" : c.isBoolean(b) ? "Boolean" : c.isNumber(b) ? "Number" : b instanceof d ? "Dictionary" : b instanceof m ? "Feature" : b instanceof h ? "Point" : b instanceof a ? "Polygon" : b instanceof q ? "Polyline" : b instanceof l ? "Multipoint" : b instanceof k ? "Extent" : c.isFunctionParameter(b) ? "Function" : b === c.voidOperation ? "" : "number" === typeof b && isNaN(b) ? "Number" : "Unrecognised Type"
                    }

                    function P(a, b, f, d) {
                        try {
                            var e = z(a, b.arguments[f]);
                            if (c.equalityTest(e, d)) return z(a, b.arguments[f + 1]);
                            var g = b.arguments.length -
                                f;
                            return 1 === g ? z(a, b.arguments[f]) : 2 === g ? null : P(a, b, f + 2, d)
                        } catch (h) {
                            throw h;
                        }
                    }

                    function K(a, b, f, d) {
                        try {
                            if (!0 === d) return z(a, b.arguments[f + 1]);
                            if (3 === b.arguments.length - f) return z(a, b.arguments[f + 2]);
                            var e = z(a, b.arguments[f + 2]);
                            if (!1 === c.isBoolean(e)) throw Error("WHEN needs boolean test conditions");
                            return K(a, b, f + 2, e)
                        } catch (g) {
                            throw g;
                        }
                    }

                    function J(a, b) {
                        var c = a.length,
                            f = Math.floor(c / 2);
                        if (0 === c) return [];
                        if (1 === c) return [a[0]];
                        for (var d = J(a.slice(0, f), b), c = J(a.slice(f, c), b), f = []; 0 < d.length || 0 < c.length;)
                            if (0 <
                                d.length && 0 < c.length) {
                                var e = b(d[0], c[0]);
                                isNaN(e) && (e = 0);
                                0 >= e ? (f.push(d[0]), d = d.slice(1)) : (f.push(c[0]), c = c.slice(1))
                            } else 0 < d.length ? (f.push(d[0]), d = d.slice(1)) : 0 < c.length && (f.push(c[0]), c = c.slice(1));
                        return f
                    }

                    function O(a, b, f) {
                        try {
                            var d = a.body;
                            if (f.length !== a.params.length) throw Error("Invalid Parameter calls to function.");
                            for (var e = 0; e < f.length; e++) b.localScope[a.params[e].name.toLowerCase()] = {
                                d: null,
                                value: f[e],
                                valueset: !0,
                                node: null
                            };
                            var g = z(b, d);
                            if (g instanceof c.ReturnResult) return g.value;
                            if (g === c.breakResult) throw Error("Cannot Break from a Function");
                            if (g === c.continueResult) throw Error("Cannot Continue from a Function");
                            return g instanceof c.ImplicitResult ? g.value : g
                        } catch (h) {
                            throw h;
                        }
                    }

                    function W(a, b, c) {
                        return A(a, b, function (b, f, d) {
                            b = {
                                spatialReference: a.spatialReference,
                                applicationCache: void 0 === a.applicationCache ? null : a.applicationCache,
                                globalScope: a.globalScope,
                                depthCounter: a.depthCounter + 1,
                                console: a.console,
                                localScope: {}
                            };
                            if (64 < b.depthCounter) throw Error("Exceeded maximum function depth");
                            return O(c, b, d)
                        })
                    }

                    function T(a) {
                        return function () {
                            var b = {
                                applicationCache: void 0 === a.context.applicationCache ? null : a.context.applicationCache,
                                spatialReference: a.context.spatialReference,
                                console: a.context.console,
                                localScope: {},
                                depthCounter: a.context.depthCounter + 1,
                                globalScope: a.context.globalScope
                            };
                            if (64 < b.depthCounter) throw Error("Exceeded maximum function depth");
                            return O(a.definition, b, arguments)
                        }
                    }

                    function N(a) {
                        console.log(a)
                    }
                    var Y = 0,
                        Z = {};
                    s.registerFunctions(Z, A);
                    n.registerFunctions(Z, A);
                    f.registerFunctions(Z,
                        A);
                    y.registerFunctions(Z, A);
                    u.registerFunctions(Z, A);
                    Z["typeof"] = function (a, b) {
                        return A(a, b, function (a, b, f) {
                            c.pcCheck(f, 1, 1);
                            a = I(f[0]);
                            if ("Unrecognised Type" === a) throw Error("Unrecognised Type");
                            return a
                        })
                    };
                    Z.iif = function (a, b) {
                        try {
                            c.pcCheck(null === b.arguments ? [] : b.arguments, 3, 3);
                            var f = z(a, b.arguments[0]);
                            if (!1 === c.isBoolean(f)) throw Error("IF Function must have a boolean test condition");
                            return !0 === f ? z(a, b.arguments[1]) : z(a, b.arguments[2])
                        } catch (d) {
                            throw d;
                        }
                    };
                    Z.decode = function (a, b) {
                        try {
                            if (2 > b.arguments.length) throw Error("Missing Parameters");
                            if (2 === b.arguments.length) return z(a, b.arguments[1]);
                            if (0 === (b.arguments.length - 1) % 2) throw Error("Must have a default value result.");
                            var c = z(a, b.arguments[0]);
                            return P(a, b, 1, c)
                        } catch (f) {
                            throw f;
                        }
                    };
                    Z.when = function (a, b) {
                        try {
                            if (3 > b.arguments.length) throw Error("Missing Parameters");
                            if (0 === b.arguments.length % 2) throw Error("Must have a default value result.");
                            var f = z(a, b.arguments[0]);
                            if (!1 === c.isBoolean(f)) throw Error("WHEN needs boolean test conditions");
                            return K(a, b, 0, f)
                        } catch (d) {
                            throw d;
                        }
                    };
                    Z.top =
                        function (a, b) {
                            return A(a, b, function (a, b, f) {
                                c.pcCheck(f, 2, 2);
                                if (c.isArray(f[0])) return c.toNumber(f[1]) >= f[0].length ? f[0].slice(0) : f[0].slice(0, c.toNumber(f[1]));
                                if (c.isImmutableArray(f[0])) return c.toNumber(f[1]) >= f[0].length() ? f[0].slice(0) : f[0].slice(0, c.toNumber(f[1]));
                                throw Error("Top cannot accept this parameter type");
                            })
                        };
                    Z.first = function (a, b) {
                        return A(a, b, function (a, b, f) {
                            c.pcCheck(f, 1, 1);
                            return c.isArray(f[0]) ? 0 === f[0].length ? null : f[0][0] : c.isImmutableArray(f[0]) ? 0 === f[0].length() ? null : f[0].get(0) :
                                null
                        })
                    };
                    Z.sort = function (a, b) {
                        return A(a, b, function (a, b, f) {
                            c.pcCheck(f, 1, 2);
                            a = f[0];
                            c.isImmutableArray(a) && (a = a.toArray());
                            if (!1 === c.isArray(a)) throw Error("Illegal Argument");
                            if (1 < f.length) {
                                if (!1 === c.isFunctionParameter(f[1])) throw Error("Illegal Argument");
                                var d = T(f[1]);
                                a = J(a, function (a, b) {
                                    return d(a, b)
                                })
                            } else {
                                if (0 === a.length) return [];
                                f = {};
                                for (b = 0; b < a.length; b++) {
                                    var e = I(a[b]);
                                    "" !== e && (f[e] = !0)
                                }
                                if (!0 === f.Array || !0 === f.Dictionary || !0 === f.Feature || !0 === f.Point || !0 === f.Polygon || !0 === f.Polyline || !0 ===
                                    f.Multipoint || !0 === f.Extent || !0 === f.Function) return a.slice(0);
                                b = 0;
                                var e = "",
                                    g;
                                for (g in f) b++, e = g;
                                a = 1 < b || "String" === e ? J(a, function (a, b) {
                                    if (null === a || void 0 === a || a === c.voidOperation) return null === b || void 0 === b || b === c.voidOperation ? 0 : 1;
                                    if (null === b || void 0 === b || b === c.voidOperation) return -1;
                                    var f = c.toString(a),
                                        d = c.toString(b);
                                    return f < d ? -1 : f === d ? 0 : 1
                                }) : "Number" === e ? J(a, function (a, b) {
                                    return a - b
                                }) : "Boolean" === e ? J(a, function (a, b) {
                                    return a === b ? 0 : b ? -1 : 1
                                }) : "Date" === e ? J(a, function (a, b) {
                                    return b - a
                                }) : a.slice(0)
                            }
                            return a
                        })
                    };
                    p.functionHelper = {
                        fixSpatialReference: c.fixSpatialReference,
                        parseArguments: v,
                        standardFunction: A
                    };
                    p.executeScript = function (a, b, f) {
                        f || (f = new e(102100));
                        var h = b.vars,
                            n = b.customfunctions,
                            l = {};
                        h || (h = {});
                        n || (n = {});
                        var k = new d({
                            newline: "\n",
                            tab: "\t",
                            singlequote: "'",
                            doublequote: '"',
                            forwardslash: "/",
                            backwardslash: "\\"
                        });
                        k.immutable = !1;
                        l.textformatting = {
                            value: k,
                            valueset: !0,
                            node: null
                        };
                        l.infinity = {
                            value: Number.POSITIVE_INFINITY,
                            valueset: !0,
                            node: null
                        };
                        l.pi = {
                            value: Math.PI,
                            valueset: !0,
                            node: null
                        };
                        for (var s in Z) l[s] = {
                            value: new c.NativeFunction(Z[s]),
                            valueset: !0,
                            node: null
                        };
                        for (s in n) l[s] = {
                            value: new c.NativeFunction(n[s]),
                            "native": !0,
                            valueset: !0,
                            node: null
                        };
                        for (s in h) l[s] = h[s] instanceof g ? {
                            value: new m(h[s]),
                            valueset: !0,
                            node: null
                        } : {
                            value: h[s],
                            valueset: !0,
                            node: null
                        };
                        a = z({
                            spatialReference: f,
                            globalScope: l,
                            localScope: null,
                            console: !b.console ? N : b.console,
                            depthCounter: 1,
                            applicationCache: void 0 === b.applicationCache ? null : b.applicationCache
                        }, a.body[0].body);
                        a instanceof c.ReturnResult && (a = a.value);
                        a instanceof c.ImplicitResult &&
                            (a = a.value);
                        a === c.voidOperation && (a = null);
                        if (a === c.breakResult) throw Error("Cannot return BREAK");
                        if (a === c.continueResult) throw Error("Cannot return CONTINUE");
                        if (a instanceof t) throw Error("Cannot return FUNCTION");
                        if (a instanceof c.NativeFunction) throw Error("Cannot return FUNCTION");
                        return a
                    };
                    p.extractFieldLiterals = function (a, c) {
                        void 0 === c && (c = !1);
                        return b.findFieldLiterals(a, c)
                    };
                    p.validateScript = function (a, c) {
                        return b.validateScript(a, c, "simple")
                    };
                    p.referencesMember = function (a, c) {
                        return b.referencesMember(a,
                            c)
                    };
                    p.referencesFunction = function (a, c) {
                        return b.referencesFunction(a, c)
                    }
                })
        },
        "esri/arcade/treeAnalysis": function () {
            define(["require", "exports"], function (r, p) {
                function a(a, b, c, d) {
                    void 0 !== a.fmin && (a.min = a.fmin);
                    void 0 !== a.fmax && (a.max = a.fmax);
                    return "0" !== a.min && c.length < Number(a.min) || "*" !== a.max && c.length > Number(a.max) ? -2 : 1
                }

                function g(b, c, d) {
                    if (null !== d.localScope && void 0 !== d.localScope[b.toLowerCase()]) {
                        var e = d.localScope[b.toLowerCase()];
                        if ("FormulaFunction" === e.type || "any" === e.type) return void 0 ===
                            e.signature && (e.signature = {
                                min: "0",
                                max: "*"
                            }), a(e.signature, b, c, d)
                    }
                    return void 0 !== d.globalScope[b.toLowerCase()] && (e = d.globalScope[b.toLowerCase()], "FormulaFunction" === e.type || "any" === e.type) ? (void 0 === e.signature && (e.signature = {
                        min: "0",
                        max: "*"
                    }), a(e.signature, b, c, d)) : -1
                }

                function q(a, b) {
                    void 0 === b && (b = !0);
                    var c = m(a, "SYNTAX", "UNREOGNISED");
                    try {
                        switch (a.type) {
                        case "VariableDeclarator":
                            return null !== a.init && "FunctionExpression" === a.init.type ? m(a, "SYNTAX", "FUNCTIONVARIABLEDECLARATOR") : "Identifier" !==
                                a.id.type ? m(a, "SYNTAX", "VARIABLEMUSTHAVEIDENTIFIER") : null !== a.init ? q(a.init, !1) : "";
                        case "VariableDeclaration":
                            for (var d = 0; d < a.declarations.length; d++)
                                if (c = q(a.declarations[d], b), "" !== c) return c;
                            return "";
                        case "ForInStatement":
                            c = q(a.left, b);
                            if ("" !== c) break;
                            if ("VariableDeclaration" === a.left.type) {
                                if (1 < a.left.declarations.length) return m(a, "SYNTAX", "ONLY1VAR");
                                if (null !== a.left.declarations[0].init) return m(a, "SYNTAX", "CANNOTDECLAREVAL")
                            } else if ("Identifier" !== a.left.type) return m(a, "SYNTAX", "LEFTNOTVAR");
                            c = q(a.right, b);
                            if ("" !== c) break;
                            c = q(a.body, b);
                            if ("" !== c) break;
                            return "";
                        case "ForStatement":
                            if (null !== a.test && (c = q(a.test, b), "" !== c)) break;
                            if (null !== a.init && (c = q(a.init, b), "" !== c)) break;
                            if (null !== a.update && (c = q(a.update, b), "" !== c)) break;
                            if (null !== a.body && (c = q(a.body, b), "" !== c)) break;
                            return "";
                        case "ContinueStatement":
                            return "";
                        case "EmptyStatement":
                            return "";
                        case "BreakStatement":
                            return "";
                        case "IfStatement":
                            c = q(a.test, b);
                            if ("" !== c) break;
                            if (null !== a.consequent && (c = q(a.consequent, !1), "" !== c)) break;
                            if (null !==
                                a.alternate && (c = q(a.alternate, !1), "" !== c)) break;
                            return "";
                        case "BlockStatement":
                            for (var e = [], d = 0; d < a.body.length; d++) "EmptyStatement" !== a.body[d].type && e.push(a.body[d]);
                            a.body = e;
                            for (d = 0; d < a.body.length; d++)
                                if (c = q(a.body[d], b), "" !== c) return c;
                            return "";
                        case "FunctionDeclaration":
                            return !1 === b ? m(a, "SYNTAX", "GLOBALFUNCTIONSONLY") : "Identifier" !== a.id.type ? m(a, "SYNTAX", "FUNCTIONMUSTHAVEIDENTIFIER") : q(a.body, !1);
                        case "ReturnStatement":
                            return null !== a.argument ? q(a.argument, b) : "";
                        case "UpdateExpression":
                            return "Identifier" !==
                                a.argument.type && "MemberExpression" !== a.argument.type ? m(a, "SYNTAX", "ASSIGNMENTTOVARSONLY") : q(a.argument, b);
                        case "AssignmentExpression":
                            if ("Identifier" !== a.left.type && "MemberExpression" !== a.left.type) return m(a, "SYNTAX", "ASSIGNMENTTOVARSONLY");
                            c = q(a.left, b);
                            if ("" !== c) break;
                            switch (a.operator) {
                            case "\x3d":
                            case "/\x3d":
                            case "*\x3d":
                            case "%\x3d":
                            case "+\x3d":
                            case "-\x3d":
                                break;
                            default:
                                return m(a, "SYNTAX", "OPERATORNOTRECOGNISED")
                            }
                            return q(a.right, !1);
                        case "ExpressionStatement":
                            return q(a.expression, !1);
                        case "Identifier":
                            c = "";
                            break;
                        case "MemberExpression":
                            c = q(a.object, b);
                            if ("" !== c) break;
                            return !0 === a.computed ? q(a.property, b) : "";
                        case "Literal":
                            return "";
                        case "ThisExpression":
                            return m(a, "SYNTAX", "NOTSUPPORTED");
                        case "CallExpression":
                            if ("Identifier" !== a.callee.type) return m(a, "SYNTAX", "ONLYNODESSUPPORTED");
                            c = "";
                            for (d = 0; d < a.arguments.length; d++)
                                if (c = q(a.arguments[d], b), "" !== c) return c;
                            return "";
                        case "UnaryExpression":
                            c = q(a.argument, b);
                            break;
                        case "BinaryExpression":
                            c = q(a.left, b);
                            if ("" !== c) break;
                            c = q(a.right,
                                b);
                            if ("" !== c) break;
                            switch (a.operator) {
                            case "\x3d\x3d":
                            case "!\x3d":
                            case "\x3c":
                            case "\x3c\x3d":
                            case "\x3e":
                            case "\x3e\x3d":
                            case "+":
                            case "-":
                            case "*":
                            case "/":
                            case "%":
                                break;
                            default:
                                return m(a, "SYNTAX", "OPERATORNOTRECOGNISED")
                            }
                            return "";
                        case "LogicalExpression":
                            c = q(a.left, b);
                            if ("" !== c) break;
                            c = q(a.right);
                            if ("" !== c) break;
                            switch (a.operator) {
                            case "\x26\x26":
                            case "||":
                                break;
                            default:
                                return m(a, "SYNTAX", "OPERATORNOTRECOGNISED")
                            }
                            return "";
                        case "ConditionalExpression":
                            return m(a, "SYNTAX", "NOTSUPPORTED");
                        case "ArrayExpression":
                            c =
                                "";
                            for (d = 0; d < a.elements.length && !(c = q(a.elements[d], b), "" !== c); d++);
                            break;
                        case "Array":
                            return m(a, "SYNTAX", "NOTSUPPORTED");
                        case "ObjectExpression":
                            c = "";
                            for (d = 0; d < a.properties.length && !(c = "", null !== a.properties[d].key && ("Literal" !== a.properties[d].key.type && "Identifier" !== a.properties[d].key.type && (c = m(a, "SYNTAX", "OBJECTPROPERTYMUSTBESTRING")), "Literal" === a.properties[d].key.type && (e = a.properties[d].key.value, "string" === typeof e || e instanceof String || (c = m(a, "SYNTAX", "OBJECTPROPERTYMUSTBESTRING")))),
                                    "" === c && (c = q(a.properties[d], b)), "" !== c); d++);
                            break;
                        case "Property":
                            if ("Literal" !== a.key.type && "Identifier" !== a.key.type) return m(a, "SYNTAX", "ONLYLITERAL");
                            if ("Identifier" !== a.key.type && (c = q(a.key, b), "" !== c)) break;
                            c = q(a.value, b)
                        }
                        return c
                    } catch (g) {
                        throw g;
                    }
                }

                function h(a, d) {
                    var e = m(a, "SYNTAX", "UNREOGNISED"),
                        n = null,
                        l = "";
                    try {
                        switch (a.type) {
                        case "VariableDeclarator":
                            if (null !== a.init && "FunctionExpression" === a.init.type) return m(a, "SYNTAX", "FUNCTIONVARIABLEDECLARATOR");
                            null !== d.localScope ? void 0 !== d.localScope[a.id.name.toLowerCase()] &&
                                a.id.name.toLowerCase() : void 0 !== d.globalScope[a.id.name.toLowerCase()] && a.id.name.toLowerCase();
                            var k = null === a.init ? "" : h(a.init, d);
                            if ("" !== k) return k;
                            null === d.localScope ? d.globalScope[a.id.name.toLowerCase()] = {
                                type: "any"
                            } : d.localScope[a.id.name.toLowerCase()] = {
                                type: "any"
                            };
                            return "";
                        case "FunctionDeclaration":
                            n = c(a.id.name.toLowerCase(), a, d);
                            l = b(a, d);
                            if ("" !== l) return l;
                            if (null !== d.localScope) return m(a, "SYNTAX", "GLOBALFUNCTIONSONLY");
                            n.isnative = !1;
                            d.globalScope[a.id.name.toLowerCase()] = {
                                type: "FormulaFunction",
                                signature: [n]
                            };
                            return "";
                        case "VariableDeclaration":
                            for (var e = "", s = 0; s < a.declarations.length && !(e = h(a.declarations[s], d), "" !== e); s++);
                            break;
                        case "IfStatement":
                            e = h(a.test, d);
                            if ("" !== e) break;
                            if ("AssignmentExpression" === a.test.type || "UpdateExpression" === a.test.type) return m(a.test, "SYNTAX", "CANNOT_USE_ASSIGNMENT_IN_CONDITION");
                            if (null !== a.consequent && (e = h(a.consequent, d), "" !== e)) break;
                            if (null !== a.alternate && (e = h(a.alternate, d), "" !== e)) break;
                            return "";
                        case "EmptyStatement":
                            return "";
                        case "BlockStatement":
                            for (s =
                                0; s < a.body.length; s++)
                                if (e = h(a.body[s], d), "" !== e) return e;
                            return "";
                        case "ReturnStatement":
                            return null !== a.argument ? h(a.argument, d) : "";
                        case "ForInStatement":
                            if ("VariableDeclaration" === a.left.type) {
                                if (1 < a.left.declarations.length) return m(a, "SYNTAX", "ONLY1VAR");
                                if (null !== a.left.declarations[0].init) return m(a, "SYNTAX", "CANNOTDECLAREVAL")
                            } else if ("Identifier" !== a.left.type) return m(a, "SYNTAX", "LEFTNOTVAR");
                            e = h(a.left, d);
                            if ("" !== e) break;
                            e = h(a.right, d);
                            if ("" !== e) break;
                            e = h(a.body, d);
                            if ("" !== e) break;
                            return "";
                        case "ForStatement":
                            if (null !== a.init && (e = h(a.init, d), "" !== e)) break;
                            if (null !== a.test && (e = h(a.test, d), "" !== e)) break;
                            if (null !== a.body && (e = h(a.body, d), "" !== e)) break;
                            if (null !== a.update && (e = h(a.update, d), "" !== e)) break;
                            return "";
                        case "BreakStatement":
                            return "";
                        case "ContinueStatement":
                            return "";
                        case "UpdateExpression":
                            if ("Identifier" !== a.argument.type && "MemberExpression" !== a.argument.type) return m(a, "SYNTAX", "ASSIGNMENTTOVARSONLY");
                            var q = !1;
                            if ("MemberExpression" === a.argument.type) return h(a.argument, d);
                            null !==
                                d.localScope && void 0 !== d.localScope[a.argument.name.toLowerCase()] && (q = !0);
                            void 0 !== d.globalScope[a.argument.name.toLowerCase()] && (q = !0);
                            return !1 === q ? "Identifier " + a.argument.name + " has not been declared." : "";
                        case "AssignmentExpression":
                            if ("Identifier" !== a.left.type && "MemberExpression" !== a.left.type) return m(a, "SYNTAX", "ASSIGNMENTTOVARSONLY");
                            var p = h(a.right, d);
                            if ("" !== p) return p;
                            q = !1;
                            if ("MemberExpression" === a.left.type) return p = h(a.left, d), "" !== p ? p : "";
                            null !== d.localScope && void 0 !== d.localScope[a.left.name.toLowerCase()] &&
                                (q = !0);
                            void 0 !== d.globalScope[a.left.name.toLowerCase()] && (q = !0);
                            return !1 === q ? "Identifier " + a.left.name + " has not been declared." : "";
                        case "ExpressionStatement":
                            return h(a.expression, d);
                        case "Identifier":
                            var t = a.name.toLowerCase();
                            if (null !== d.localScope && void 0 !== d.localScope[t]) return "";
                            e = void 0 !== d.globalScope[t] ? "" : m(a, "SYNTAX", "VARIABLENOTFOUND");
                            break;
                        case "MemberExpression":
                            e = h(a.object, d);
                            if ("" !== e) break;
                            return !0 === a.computed ? h(a.property, d) : "";
                        case "Literal":
                            return "";
                        case "ThisExpression":
                            e =
                                m(a, "SYNTAX", "NOTSUPPORTED");
                            break;
                        case "CallExpression":
                            if ("Identifier" !== a.callee.type) return m(a, "SYNTAX", "ONLYNODESSUPPORTED");
                            e = "";
                            for (s = 0; s < a.arguments.length; s++)
                                if (e = h(a.arguments[s], d), "" !== e) return e;
                            var r = g(a.callee.name, a.arguments, d); - 1 === r && (e = m(a, "SYNTAX", "NOTFOUND")); - 2 === r && (e = m(a, "SYNTAX", "WRONGSIGNATURE"));
                            break;
                        case "UnaryExpression":
                            e = h(a.argument, d);
                            break;
                        case "BinaryExpression":
                            e = h(a.left, d);
                            if ("" !== e) break;
                            e = h(a.right, d);
                            if ("" !== e) break;
                            return "";
                        case "LogicalExpression":
                            e =
                                h(a.left, d);
                            if ("" !== e) break;
                            if ("AssignmentExpression" === a.left.type || "UpdateExpression" === a.left.type) return m(a.left, "SYNTAX", "CANNOT_USE_ASSIGNMENT_IN_CONDITION");
                            e = h(a.right, d);
                            if ("" !== e) break;
                            return "AssignmentExpression" === a.right.type || "UpdateExpression" === a.right.type ? m(a.right, "SYNTAX", "CANNOT_USE_ASSIGNMENT_IN_CONDITION") : "";
                        case "ConditionalExpression":
                            return m(a, "SYNTAX", "NOTSUPPORTED");
                        case "ArrayExpression":
                            e = "";
                            for (s = 0; s < a.elements.length && !(e = h(a.elements[s], d), "" !== e); s++);
                            break;
                        case "ObjectExpression":
                            e =
                                "";
                            for (s = 0; s < a.properties.length; s++) {
                                e = "";
                                if (null !== a.properties[s].key && ("Literal" !== a.properties[s].key.type && "Identifier" !== a.properties[s].key.type && (e = m(a, "SYNTAX", "OBJECTPROPERTYMUSTBESTRING")), "Literal" === a.properties[s].key.type)) {
                                    var F = a.properties[s].key.value;
                                    "string" === typeof F || F instanceof String || (e = m(a, "SYNTAX", "OBJECTPROPERTYMUSTBESTRING"))
                                }
                                "" === e && (e = h(a.properties[s], d));
                                if ("" !== e) break
                            }
                            break;
                        case "Property":
                            if ("Literal" !== a.key.type && "Identifier" !== a.key.type) return m(a, "SYNTAX",
                                "ONLYLITERAL");
                            if ("Identifier" !== a.key.type && (e = h(a.key, d), "" !== e)) break;
                            e = h(a.value, d);
                            break;
                        case "Array":
                            return m(a, "SYNTAX", "NOTSUPPORTED")
                        }
                        return e
                    } catch (E) {
                        throw E;
                    }
                }

                function k(a, b) {
                    var c = !1;
                    try {
                        switch (a.type) {
                        case "VariableDeclarator":
                            return null !== a.init ? k(a.init, b) : c;
                        case "FunctionDeclaration":
                            return k(a.body, b);
                        case "VariableDeclaration":
                            for (var d = 0; d < a.declarations.length; d++)
                                if (k(a.declarations[d], b)) return !0;
                            return c;
                        case "IfStatement":
                            return k(a.test, b) || null !== a.consequent && k(a.consequent,
                                b) || null !== a.alternate && k(a.alternate, b) ? !0 : c;
                        case "EmptyStatement":
                            return c;
                        case "BlockStatement":
                            for (d = 0; d < a.body.length; d++)
                                if (k(a.body[d], b)) return !0;
                            return c;
                        case "ReturnStatement":
                            return null !== a.argument ? k(a.argument, b) : c;
                        case "UpdateExpression":
                            return k(a.argument, b);
                        case "AssignmentExpression":
                            return (c = k(a.right, b)) ? c : k(a.left, b);
                        case "ExpressionStatement":
                            return k(a.expression, b);
                        case "ForInStatement":
                            return (c = k(a.left, b)) || (c = k(a.right, b)) ? c : c = k(a.body, b);
                        case "ForStatement":
                            if (null !==
                                a.init && (c = k(a.init, b)) || null !== a.test && (c = k(a.test, b)) || null !== a.body && (c = k(a.body, b))) return c;
                            null !== a.update && (c = k(a.update, b));
                            return c;
                        case "BreakStatement":
                            return c;
                        case "ContinueStatement":
                            return c;
                        case "Compound":
                            return c;
                        case "Identifier":
                            return b.toLowerCase() === a.name.toLowerCase();
                        case "MemberExpression":
                            if (c = k(a.object, b)) return c;
                            !0 === a.computed && (c = k(a.property, b));
                            return c;
                        case "Literal":
                            return c;
                        case "ThisExpression":
                            return c;
                        case "CallExpression":
                            for (d = 0; d < a.arguments.length; d++) k(a.arguments[d],
                                b) && (c = !0);
                            return c;
                        case "ArrayExpression":
                            for (d = 0; d < a.elements.length; d++) k(a.elements[d], b) && (c = !0);
                            return c;
                        case "UnaryExpression":
                            return k(a.argument, b);
                        case "BinaryExpression":
                            return (c = k(a.left, b)) ? c : c = k(a.right, b);
                        case "LogicalExpression":
                            return (c = k(a.left, b)) ? c : c = k(a.right, b);
                        case "ObjectExpression":
                            for (d = 0; d < a.properties.length; d++) k(a.properties[d], b) && (c = !0);
                            return c;
                        case "Property":
                            return c = k(a.value, b);
                        case "ConditionalExpression":
                            return c;
                        case "Array":
                            return c;
                        default:
                            return c
                        }
                    } catch (e) {
                        throw e;
                    }
                }

                function l(a, b) {
                    var c = !1;
                    try {
                        switch (a.type) {
                        case "VariableDeclarator":
                            return null !== a.init ? l(a.init, b) : c;
                        case "FunctionDeclaration":
                            return l(a.body, b);
                        case "VariableDeclaration":
                            for (var d = 0; d < a.declarations.length; d++)
                                if (l(a.declarations[d], b)) return !0;
                            return c;
                        case "IfStatement":
                            return l(a.test, b) || null !== a.consequent && l(a.consequent, b) || null !== a.alternate && l(a.alternate, b) ? !0 : c;
                        case "EmptyStatement":
                            return c;
                        case "BlockStatement":
                            for (d = 0; d < a.body.length; d++)
                                if (l(a.body[d], b)) return !0;
                            return c;
                        case "ReturnStatement":
                            return null !== a.argument ? l(a.argument, b) : c;
                        case "UpdateExpression":
                            return l(a.argument, b);
                        case "AssignmentExpression":
                            return l(a.left, b) ? !0 : l(a.right, b);
                        case "ExpressionStatement":
                            return l(a.expression, b);
                        case "ForInStatement":
                            return (c = l(a.left, b)) || (c = l(a.right, b)) ? c : c = l(a.body, b);
                        case "ForStatement":
                            if (null !== a.init && (c = l(a.init, b)) || null !== a.test && (c = l(a.test, b)) || null !== a.body && (c = l(a.body, b))) return c;
                            null !== a.update && (c = l(a.update, b));
                            return c;
                        case "BreakStatement":
                            return c;
                        case "ContinueStatement":
                            return c;
                        case "Compound":
                            return c;
                        case "Identifier":
                            return c;
                        case "MemberExpression":
                            if (c = l(a.object, b)) return c;
                            !0 === a.computed && (c = l(a.property, b));
                            return c;
                        case "Literal":
                            return c;
                        case "ThisExpression":
                            return c;
                        case "CallExpression":
                            if (a.callee.name.toLowerCase() === b.toLowerCase()) return !0;
                            for (d = 0; d < a.arguments.length; d++) l(a.arguments[d], b) && (c = !0);
                            return c;
                        case "ArrayExpression":
                            for (d = 0; d < a.elements.length; d++) l(a.elements[d], b) && (c = !0);
                            return c;
                        case "UnaryExpression":
                            return l(a.argument,
                                b);
                        case "BinaryExpression":
                            return (c = l(a.left, b)) ? c : c = l(a.right, b);
                        case "LogicalExpression":
                            return (c = l(a.left, b)) ? c : c = l(a.right, b);
                        case "ConditionalExpression":
                            return c;
                        case "ObjectExpression":
                            for (d = 0; d < a.properties.length; d++) l(a.properties[d], b) && (c = !0);
                            return c;
                        case "Property":
                            return c = l(a.value, b);
                        case "Array":
                            return c;
                        default:
                            return c
                        }
                    } catch (e) {
                        throw e;
                    }
                }

                function e(a, b) {
                    var c = [],
                        d;
                    try {
                        switch (a.type) {
                        case "VariableDeclarator":
                            return null !== a.init ? e(a.init, b) : c;
                        case "FunctionDeclaration":
                            return e(a.body,
                                b);
                        case "VariableDeclaration":
                            for (var g = 0; g < a.declarations.length; g++) d = e(a.declarations[g], b), c = c.concat(d);
                            return c;
                        case "ForInStatement":
                            return d = e(a.left, b), c = c.concat(d), d = e(a.right, b), c = c.concat(d), d = e(a.body, b), c = c.concat(d);
                        case "ForStatement":
                            return null !== a.init && (d = e(a.init, b), c = c.concat(d)), null !== a.test && (d = e(a.test, b), c = c.concat(d)), null !== a.body && (d = e(a.body, b), c = c.concat(d)), null !== a.update && (d = e(a.update, b), c = c.concat(d)), c;
                        case "IfStatement":
                            return d = e(a.test, b), c = c.concat(d), null !==
                                a.consequent && (d = e(a.consequent, b), c = c.concat(d)), null !== a.alternate && (d = e(a.alternate, b), c = c.concat(d)), c;
                        case "EmptyStatement":
                            return c;
                        case "BlockStatement":
                            for (g = 0; g < a.body.length; g++) d = e(a.body[g], b), c = c.concat(d);
                            return c;
                        case "ReturnStatement":
                            return null !== a.argument ? e(a.argument, b) : c;
                        case "UpdateExpression":
                            return e(a.argument, b);
                        case "AssignmentExpression":
                            return c = e(a.left, b), c = c.concat(e(a.right, b));
                        case "ExpressionStatement":
                            return e(a.expression, b);
                        case "BreakStatement":
                            return c;
                        case "ContinueStatement":
                            return c;
                        case "Compound":
                            return c;
                        case "Identifier":
                            return c;
                        case "MemberExpression":
                            if ("Identifier" !== a.object.type) return c;
                            if (!1 === a.computed) c.push(a.object.name.toLowerCase() + "." + a.property.name.toLowerCase());
                            else try {
                                "Literal" === a.property.type && "string" === typeof a.property.value && c.push(a.object.name.toLowerCase() + "." + a.property.value.toString().toLowerCase())
                            } catch (h) {}
                            return c;
                        case "Literal":
                            return c;
                        case "ThisExpression":
                            return c;
                        case "CallExpression":
                            for (g = 0; g < a.arguments.length; g++) d = e(a.arguments[g],
                                b), c = c.concat(d);
                            return c;
                        case "ArrayExpression":
                            for (g = 0; g < a.elements.length; g++) d = e(a.elements[g], b), c = c.concat(d);
                            return c;
                        case "UnaryExpression":
                            return e(a.argument, b);
                        case "ObjectExpression":
                            for (g = 0; g < a.properties.length; g++) d = e(a.properties[g], b), c = c.concat(d);
                            return c;
                        case "Property":
                            return e(a.value, b);
                        case "BinaryExpression":
                            return d = e(a.left, b), c = c.concat(d), d = e(a.right, b), c = c.concat(d);
                        case "LogicalExpression":
                            return d = e(a.left, b), c = c.concat(d), d = e(a.right, b), c = c.concat(d);
                        case "ConditionalExpression":
                            return c;
                        case "Array":
                            return c;
                        default:
                            return c
                        }
                    } catch (n) {
                        throw n;
                    }
                }

                function c(a, b, c) {
                    c = [];
                    if (void 0 !== b.params && null !== b.params)
                        for (var d = 0; d < b.params.length; d++) c.push("any");
                    return {
                        name: a,
                        "return": "any",
                        params: c
                    }
                }

                function b(a, b) {
                    for (var c = {
                            globalScope: b.globalScope,
                            localScope: {}
                        }, d = 0; d < a.params.length; d++) c.localScope[a.params[d].name.toLowerCase()] = {
                        type: "any"
                    };
                    return h(a.body, c)
                }

                function d(a, b, c, d) {
                    var e = {};
                    if (void 0 === a || null === a) a = {};
                    if (void 0 === c || null === c) c = {};
                    e.infinity = {
                        type: "any"
                    };
                    e.textformatting = {
                        type: "any"
                    };
                    e.pi = {
                        type: "any"
                    };
                    for (var g in b)
                        if ("simple" !== d || "simple" === d && "a" === b[g].av) e[g] = {
                            type: "FormulaFunction",
                            signature: b[g]
                        };
                    for (b = 0; b < c.length; b++) g = c[b], e[g.name] = {
                        type: "FormulaFunction",
                        signature: g
                    };
                    for (g in a) e[g] = a[g], e[g].type = "any";
                    return e
                }

                function m(a, b, c) {
                    var d = "";
                    switch (b) {
                    case "SYNTAX":
                        d = "Syntax Error: ";
                        break;
                    case "RUNTIME":
                        d = "Runtime Error: ";
                        break;
                    default:
                        d = "Syntax Error: "
                    }
                    try {
                        switch (a.type) {
                        case "IfStatement":
                            switch (c) {
                            case "CANNOT_USE_ASSIGNMENT_IN_CONDITION":
                                d += " Assignments not be made in logical tests";
                                break;
                            case "CANNOT_USE_NONBOOLEAN_IN_CONDITION":
                                d += " Non Boolean used as Condition"
                            }
                            break;
                        case "UpdateExpression":
                        case "AssignmentExpression":
                            switch (c) {
                            case "CANNOT_USE_ASSIGNMENT_IN_CONDITION":
                                d += " Assignments not be made in logical tests";
                                break;
                            case "ASSIGNMENTTOVARSONLY":
                                d += " Assignments can only be made to identifiers"
                            }
                            break;
                        case "ExpressionStatement":
                            d += " Assignments can only be made to identifiers";
                            break;
                        case "FunctionDeclaration":
                            switch (c) {
                            case "GLOBALFUNCTIONSONLY":
                                d += " Functions cannot be declared as variables";
                                break;
                            case "FUNCTIONMUSTHAVEIDENTIFIER":
                                d += " Function Definition must have an identifier"
                            }
                            break;
                        case "VariableDeclaration":
                            d += " Only 1 variable can be declared at a time";
                            break;
                        case "VariableDeclarator":
                            switch (c) {
                            case "FUNCTIONVARIABLEDECLARATOR":
                                d += " Functions cannot be declared as variables";
                                break;
                            case "VARIABLEMUSTHAVEIDENTIFIER":
                                d += " Variable Definition must have an identifier"
                            }
                            break;
                        case "Identifier":
                            d += " Identifier Not Found. ";
                            d += a.name;
                            break;
                        case "ObjectExpression":
                            switch (c) {
                            case "OBJECTPROPERTYMUSTBESTRING":
                                d +=
                                    " Property name must be a string"
                            }
                            break;
                        case "ForStatement":
                            switch (c) {
                            case "CANNOT_USE_NONBOOLEAN_IN_CONDITION":
                                d += " Non Boolean used as Condition"
                            }
                            break;
                        case "ForInStatement":
                            switch (c) {
                            case "ONLY1VAR":
                                d += " Can only declare 1 var for use with IN";
                                break;
                            case "CANNOTDECLAREVAL":
                                d += " Can only declare value for use with IN";
                                break;
                            case "LEFTNOVAR":
                                d += "Must provide a variable to iterate with.";
                                break;
                            case "VARIABLENOTDECLARED":
                                d += "Variable must be declared before it is used..";
                                break;
                            case "CANNOTITERATETHISTYPE":
                                d +=
                                    "This type cannot be used in an IN loop"
                            }
                            break;
                        case "MemberExpression":
                            switch (c) {
                            case "PROPERTYNOTFOUND":
                                d += "Cannot find member property. ";
                                d += !1 === a.computed ? a.property.name : "";
                                break;
                            case "OUTOFBOUNDS":
                                d += "Out of Bounds. ";
                                d += !1 === a.computed ? a.property.name : "";
                                break;
                            case "NOTFOUND":
                                d += "Cannot call member method on null. ";
                                d += !1 === a.computed ? a.property.name : "";
                                break;
                            case "INVALIDTYPE":
                                d += "Cannot call member property on object of this type. ", d += !1 === a.computed ? a.property.name : ""
                            }
                            break;
                        case "Property":
                            switch (c) {
                            case "ONLYLITERAL":
                                d +=
                                    "Property names must be literals or identifiers"
                            }
                            break;
                        case "Literal":
                            break;
                        case "ThisExpression":
                            d += "THIS construct is not supported.";
                        case "CallExpression":
                            switch (c) {
                            case "WRONGSIGNATURE":
                                d += "Function signature does not match: ";
                                d += a.callee.name;
                                break;
                            case "ONLYNODESUPPORTED":
                                d += "Functions must be declared.";
                                d += a.callee.name;
                                break;
                            case "NOTAFUNCTION":
                                d += "Not a Function: ";
                                d += a.callee.name;
                                break;
                            case "NOTFOUND":
                                d += "Function Not Found: " + a.callee.name
                            }
                            break;
                        case "UnaryExpression":
                            switch (c) {
                            case "NOTSUPPORTEDUNARYOPERATOR":
                                d +=
                                    "Operator " + a.operator + " not allowed in this context. Only ! can be used with boolean, and - with a number";
                                break;
                            case "NOTSUPPORTEDTYPE":
                                d += "Unary operator " + a.operator + " cannot be used with this argument.";
                                break
                            }
                        case "BinaryExpression":
                            switch (c) {
                            case "OPERATORNOTRECOGNISED":
                                d += "Binary Operator not recognised " + a.operator
                            }
                            break;
                        case "LogicalExpression":
                            return "";
                        case "ConditionalExpression":
                            d += "Conditional statements not supported.";
                            break;
                        case "ArrayExpression":
                            switch (c) {
                            case "FUNCTIONCONTEXTILLEGAL":
                                d +=
                                    " Cannot Put Function inside Array."
                            }
                            break;
                        case "Array":
                            d += "Expression contains unrecognised array structure.";
                            break;
                        default:
                            d += "Expression contains unrecognised code structures."
                        }
                    } catch (e) {
                        throw e;
                    }
                    return d
                }

                function t(a, b, c) {
                    return {
                        line: a.loc.start.line,
                        character: a.loc.start.column,
                        reason: m(a, b, c)
                    }
                }

                function s(a, b, c, d, e) {
                    b = {
                        globalScope: b.globalScope,
                        localScope: {}
                    };
                    for (e = 0; e < a.params.length; e++) b.localScope[a.params[e].name.toLowerCase()] = {
                        type: "any"
                    };
                    n(a.body, b, c, d, !1)
                }

                function n(a, b, d, e, h) {
                    void 0 ===
                        h && (h = !0);
                    if (null === a) throw Error("Unnexpexted Expression Syntax");
                    m(a, "SYNTAX", "UNREOGNISED");
                    var l = null;
                    try {
                        switch (a.type) {
                        case "VariableDeclarator":
                            if (null !== a.init && "FunctionExpression" === a.init.type) {
                                e.push(t(a, "SYNTAX", "FUNCTIONVARIABLEDECLARATOR"));
                                break
                            }
                            "Identifier" !== a.id.type ? e.push(t(a, "SYNTAX", "VARIABLEMUSTHAVEIDENTIFIER")) : (null !== b.localScope ? void 0 !== b.localScope[a.id.name.toLowerCase()] && a.id.name.toLowerCase() : void 0 !== b.globalScope[a.id.name.toLowerCase()] && a.id.name.toLowerCase(),
                                null === b.localScope ? b.globalScope[a.id.name.toLowerCase()] = {
                                    type: "any"
                                } : b.localScope[a.id.name.toLowerCase()] = {
                                    type: "any"
                                });
                            null === a.init ? "" : n(a.init, b, d, e, h);
                            break;
                        case "FunctionDeclaration":
                            !1 === h && e.push(t(a, "SYNTAX", "GLOBALFUNCTIONSONLY"));
                            "Identifier" !== a.id.type && e.push(t(a, "SYNTAX", "FUNCTIONMUSTHAVEIDENTIFIER"));
                            l = c("", a, b);
                            s(a, b, d, e, h);
                            null !== b.localScope && e.push(t(a, "SYNTAX", "GLOBALFUNCTIONSONLY"));
                            l.isnative = !1;
                            "Identifier" === a.id.type && (b.globalScope[a.id.name.toLowerCase()] = {
                                type: "FormulaFunction",
                                signature: [l]
                            });
                            break;
                        case "VariableDeclaration":
                            for (var k = 0; k < a.declarations.length; k++) n(a.declarations[k], b, d, e, h);
                            break;
                        case "IfStatement":
                            null !== a.test && (n(a.test, b, d, e, h), ("AssignmentExpression" === a.test.type || "UpdateExpression" === a.test.type) && e.push(t(a.test, "SYNTAX", "CANNOT_USE_ASSIGNMENT_IN_CONDITION")));
                            null !== a.consequent && n(a.consequent, b, d, e, h);
                            null !== a.alternate && n(a.alternate, b, d, e, h);
                            break;
                        case "EmptyStatement":
                            break;
                        case "BlockStatement":
                            if (null !== a.body)
                                for (k = 0; k < a.body.length; k++) n(a.body[k],
                                    b, d, e, h);
                            break;
                        case "ReturnStatement":
                            null !== a.argument && n(a.argument, b, d, e, h);
                            break;
                        case "ForInStatement":
                            "VariableDeclaration" === a.left.type ? (1 < a.left.declarations.length && e.push(t(a, "SYNTAX", "ONLY1VAR")), null !== a.left.declarations[0].init && e.push(t(a, "SYNTAX", "CANNOTDECLAREVAL"))) : "Identifier" !== a.left.type && e.push(t(a, "SYNTAX", "LEFTNOTVAR"));
                            n(a.left, b, d, e, h);
                            n(a.right, b, d, e, h);
                            n(a.body, b, d, e, h);
                            break;
                        case "ForStatement":
                            null !== a.init && n(a.init, b, d, e, h);
                            null !== a.test && n(a.test, b, d, e, h);
                            null !==
                                a.body && n(a.body, b, d, e, h);
                            null !== a.update && n(a.update, b, d, e, h);
                            break;
                        case "BreakStatement":
                            break;
                        case "ContinueStatement":
                            break;
                        case "UpdateExpression":
                            "Identifier" !== a.argument.type && "MemberExpression" !== a.argument.type ? e.push(t(a, "SYNTAX", "ASSIGNMENTTOVARSONLY")) : ("Identifier" === a.argument.type && (l = !1, !1 === d && (null !== b.localScope && void 0 !== b.localScope[a.argument.name.toLowerCase()] && (l = !0), void 0 !== b.globalScope[a.argument.name.toLowerCase()] && (l = !0), !1 === l && e.push({
                                line: null === a ? 0 : a.loc.start.line,
                                character: null === a ? 0 : a.loc.start.column,
                                reason: "Identifier " + a.argument.name + " has not been declared."
                            }))), "MemberExpression" === a.argument.type && n(a.argument, b, d, e, h));
                            break;
                        case "AssignmentExpression":
                            "Identifier" !== a.left.type && "MemberExpression" !== a.left.type && e.push(t(a, "SYNTAX", "ASSIGNMENTTOVARSONLY"));
                            switch (a.operator) {
                            case "\x3d":
                            case "/\x3d":
                            case "*\x3d":
                            case "%\x3d":
                            case "+\x3d":
                            case "-\x3d":
                                break;
                            default:
                                e.push(t(a, "SYNTAX", "OPERATORNOTRECOGNISED"))
                            }
                            n(a.right, b, d, e, h);
                            l = !1;
                            "Identifier" ===
                            a.left.type && (null !== b.localScope && void 0 !== b.localScope[a.left.name.toLowerCase()] && (l = !0), void 0 !== b.globalScope[a.left.name.toLowerCase()] && (l = !0), !1 === d && !1 === l && e.push({
                                line: null === a ? 0 : a.loc.start.line,
                                character: null === a ? 0 : a.loc.start.column,
                                reason: "Identifier " + a.argument.name + " has not been declared."
                            }));
                            "MemberExpression" === a.left.type && n(a.left, b, d, e, h);
                            break;
                        case "ExpressionStatement":
                            n(a.expression, b, d, e, h);
                            break;
                        case "Identifier":
                            var q = a.name.toLowerCase();
                            if (null !== b.localScope && void 0 !==
                                b.localScope[q]) break;
                            if (void 0 !== b.globalScope[q]) break;
                            else !1 === d && e.push(t(a, "SYNTAX", "VARIABLENOTFOUND"));
                            break;
                        case "MemberExpression":
                            n(a.object, b, d, e, h);
                            !0 === a.computed && n(a.property, b, d, e, h);
                            break;
                        case "Literal":
                            return "";
                        case "ThisExpression":
                            e.push(t(a, "SYNTAX", "NOTSUPPORTED"));
                            break;
                        case "CallExpression":
                            "Identifier" !== a.callee.type && e.push(t(a, "SYNTAX", "ONLYNODESSUPPORTED"));
                            for (k = 0; k < a.arguments.length; k++) n(a.arguments[k], b, d, e, h);
                            var p = g(a.callee.name, a.arguments, b);
                            !1 === d && -1 === p &&
                                e.push(t(a, "SYNTAX", "NOTFOUND")); - 2 === p && e.push(t(a, "SYNTAX", "WRONGSIGNATURE"));
                            break;
                        case "UnaryExpression":
                            n(a.argument, b, d, e, h);
                            break;
                        case "BinaryExpression":
                            n(a.left, b, d, e, h);
                            n(a.right, b, d, e, h);
                            switch (a.operator) {
                            case "\x3d\x3d":
                            case "!\x3d":
                            case "\x3c":
                            case "\x3c\x3d":
                            case "\x3e":
                            case "\x3e\x3d":
                            case "+":
                            case "-":
                            case "*":
                            case "/":
                            case "%":
                                break;
                            default:
                                e.push(t(a, "SYNTAX", "OPERATORNOTRECOGNISED"))
                            }
                            break;
                        case "LogicalExpression":
                            switch (a.operator) {
                            case "\x26\x26":
                            case "||":
                                break;
                            default:
                                e.push(t(a,
                                    "SYNTAX", "OPERATORNOTRECOGNISED"))
                            }
                            n(a.left, b, d, e, h);
                            ("AssignmentExpression" === a.left.type || "UpdateExpression" === a.left.type) && e.push(t(a, "SYNTAX", "CANNOT_USE_ASSIGNMENT_IN_CONDITION"));
                            n(a.right, b, d, e, h);
                            ("AssignmentExpression" === a.right.type || "UpdateExpression" === a.right.type) && e.push(t(a, "SYNTAX", "CANNOT_USE_ASSIGNMENT_IN_CONDITION"));
                            break;
                        case "ConditionalExpression":
                            e.push(t(a, "SYNTAX", "NOTSUPPORTED"));
                            break;
                        case "ArrayExpression":
                            for (k = 0; k < a.elements.length; k++) n(a.elements[k], b, d, e, h);
                            break;
                        case "Array":
                            e.push(t(a, "SYNTAX", "NOTSUPPORTED"));
                        case "ObjectExpression":
                            for (k = 0; k < a.properties.length; k++) n(a.properties[k], b, d, e, h);
                            break;
                        case "Property":
                            "Literal" !== a.key.type && "Identifier" !== a.key.type && e.push(t(a, "SYNTAX", "ONLYLITERAL"));
                            "Literal" === a.key.type && n(a.key, b, d, e, h);
                            n(a.value, b, d, e, h);
                            break;
                        default:
                            e.push(t(a, "SYNTAX", "UNRECOGNISED"))
                        }
                    } catch (r) {
                        e.push({
                            line: null === a ? 0 : a.loc.start.line,
                            character: null === a ? 0 : a.loc.start.column,
                            reason: "Unnexpected Syntax"
                        })
                    }
                }
                p.functionDecls = {
                    concatenate: {
                        min: "0",
                        max: "*",
                        av: "a"
                    },
                    split: {
                        min: "2",
                        max: "4",
                        av: "a"
                    },
                    guid: {
                        min: "0",
                        max: "1",
                        av: "a"
                    },
                    today: {
                        min: "0",
                        max: "0",
                        av: "a"
                    },
                    now: {
                        min: "0",
                        max: "0",
                        av: "a"
                    },
                    timestamp: {
                        min: "0",
                        max: "0",
                        av: "a"
                    },
                    day: {
                        min: "1",
                        max: "1",
                        av: "a"
                    },
                    month: {
                        min: "1",
                        max: "1",
                        av: "a"
                    },
                    year: {
                        min: "1",
                        max: "1",
                        av: "a"
                    },
                    hour: {
                        min: "1",
                        max: "1",
                        av: "a"
                    },
                    second: {
                        min: "1",
                        max: "1",
                        av: "a"
                    },
                    millisecond: {
                        min: "1",
                        max: "1",
                        av: "a"
                    },
                    minute: {
                        min: "1",
                        max: "1",
                        av: "a"
                    },
                    weekday: {
                        min: "1",
                        max: "1",
                        av: "a"
                    },
                    toutc: {
                        min: "1",
                        max: "1",
                        av: "a"
                    },
                    tolocal: {
                        min: "1",
                        max: "1",
                        av: "a"
                    },
                    date: {
                        min: "0",
                        max: "7",
                        av: "a"
                    },
                    datediff: {
                        min: "2",
                        max: "3",
                        av: "a"
                    },
                    dateadd: {
                        min: "2",
                        max: "3",
                        av: "a"
                    },
                    trim: {
                        min: "1",
                        max: "1",
                        av: "a"
                    },
                    text: {
                        min: "1",
                        max: "2",
                        av: "a"
                    },
                    left: {
                        min: "2",
                        max: "2",
                        av: "a"
                    },
                    right: {
                        min: "2",
                        max: "2",
                        av: "a"
                    },
                    mid: {
                        min: "2",
                        max: "3",
                        av: "a"
                    },
                    upper: {
                        min: "1",
                        max: "1",
                        av: "a"
                    },
                    proper: {
                        min: "1",
                        max: "2",
                        av: "a"
                    },
                    lower: {
                        min: "1",
                        max: "1",
                        av: "a"
                    },
                    find: {
                        min: "2",
                        max: "3",
                        av: "a"
                    },
                    iif: {
                        min: "3",
                        max: "3",
                        av: "a"
                    },
                    decode: {
                        min: "2",
                        max: "*",
                        av: "a"
                    },
                    when: {
                        min: "2",
                        max: "*",
                        av: "a"
                    },
                    defaultvalue: {
                        min: "2",
                        max: "2",
                        av: "a"
                    },
                    isempty: {
                        min: "1",
                        max: "1",
                        av: "a"
                    },
                    maplayer: {
                        min: "2",
                        max: "3",
                        av: "f"
                    },
                    domaincode: {
                        min: "3",
                        max: "4",
                        av: "a"
                    },
                    domainname: {
                        min: "2",
                        max: "4",
                        av: "a"
                    },
                    polygon: {
                        min: "1",
                        max: "1",
                        av: "a"
                    },
                    point: {
                        min: "1",
                        max: "1",
                        av: "a"
                    },
                    polyline: {
                        min: "1",
                        max: "1",
                        av: "a"
                    },
                    extent: {
                        min: "1",
                        max: "1",
                        av: "a"
                    },
                    multipoint: {
                        min: "1",
                        max: "1",
                        av: "a"
                    },
                    geometry: {
                        min: "1",
                        max: "1",
                        av: "a"
                    },
                    featurelayer: {
                        min: "1",
                        max: "3",
                        av: "f"
                    },
                    featurecollection: {
                        min: "1",
                        max: "1",
                        av: "f"
                    },
                    buffer: {
                        min: "2",
                        max: "4",
                        av: "f"
                    },
                    area: {
                        min: "1",
                        max: "2",
                        av: "f"
                    },
                    sumarea: {
                        min: "1",
                        max: "2",
                        av: "f"
                    },
                    length: {
                        min: "1",
                        max: "2",
                        av: "f"
                    },
                    sumlength: {
                        min: "1",
                        max: "2",
                        av: "f"
                    },
                    count: {
                        min: "0",
                        max: "*",
                        av: "a"
                    },
                    filter: {
                        min: "2",
                        max: "2",
                        av: "f"
                    },
                    envelopeintersects: {
                        min: "2",
                        max: "2",
                        av: "f"
                    },
                    intersects: {
                        min: "2",
                        max: "2",
                        av: "f"
                    },
                    contains: {
                        min: "2",
                        max: "2",
                        av: "f"
                    },
                    overlaps: {
                        min: "2",
                        max: "2",
                        av: "f"
                    },
                    within: {
                        min: "2",
                        max: "2",
                        av: "f"
                    },
                    touches: {
                        min: "2",
                        max: "2",
                        av: "f"
                    },
                    crosses: {
                        min: "2",
                        max: "2",
                        av: "f"
                    },
                    union: {
                        min: "1",
                        max: "2",
                        av: "f",
                        fmin: 1
                    },
                    difference: {
                        min: "2",
                        max: "2",
                        av: "f",
                        fmin: 2,
                        fmax: 3
                    },
                    intersection: {
                        min: "2",
                        max: "2",
                        av: "f",
                        fmin: 2,
                        fmax: 3
                    },
                    symmetricdifference: {
                        min: "2",
                        max: "2",
                        av: "f",
                        fmin: 2,
                        fmax: 3
                    },
                    number: {
                        min: "1",
                        max: "2",
                        av: "a"
                    },
                    acos: {
                        min: "1",
                        max: "1",
                        av: "a"
                    },
                    asin: {
                        min: "1",
                        max: "1",
                        av: "a"
                    },
                    atan: {
                        min: "1",
                        max: "1",
                        av: "a"
                    },
                    atan2: {
                        min: "2",
                        max: "2",
                        av: "a"
                    },
                    ceil: {
                        min: "1",
                        max: "2",
                        av: "a"
                    },
                    floor: {
                        min: "1",
                        max: "2",
                        av: "a"
                    },
                    round: {
                        min: "1",
                        max: "2",
                        av: "a"
                    },
                    cos: {
                        min: "1",
                        max: "1",
                        av: "a"
                    },
                    exp: {
                        min: "1",
                        max: "1",
                        av: "a"
                    },
                    log: {
                        min: "1",
                        max: "1",
                        av: "a"
                    },
                    min: {
                        min: "0",
                        max: "*",
                        av: "a"
                    },
                    console: {
                        min: "0",
                        max: "*",
                        av: "a"
                    },
                    max: {
                        min: "0",
                        max: "*",
                        av: "a"
                    },
                    pow: {
                        min: "2",
                        max: "2",
                        av: "a"
                    },
                    random: {
                        min: "0",
                        max: "0",
                        av: "a"
                    },
                    sqrt: {
                        min: "1",
                        max: "1",
                        av: "a"
                    },
                    sin: {
                        min: "1",
                        max: "1",
                        av: "a"
                    },
                    tan: {
                        min: "1",
                        max: "1",
                        av: "a"
                    },
                    abs: {
                        min: "1",
                        max: "1",
                        av: "a"
                    },
                    isnan: {
                        min: "1",
                        max: "1",
                        av: "a"
                    },
                    stdev: {
                        min: "0",
                        max: "*",
                        av: "a"
                    },
                    average: {
                        min: "0",
                        max: "*",
                        av: "a"
                    },
                    mean: {
                        min: "0",
                        max: "*",
                        av: "a"
                    },
                    sum: {
                        min: "0",
                        max: "*",
                        av: "a"
                    },
                    variance: {
                        min: "0",
                        max: "*",
                        av: "a"
                    },
                    distinct: {
                        min: "0",
                        max: "*",
                        av: "a"
                    },
                    addfield: {
                        min: "3",
                        max: "3",
                        av: "f"
                    },
                    removefield: {
                        min: "2",
                        max: "2",
                        av: "f"
                    },
                    aggregate: {
                        min: "3",
                        max: "3",
                        av: "f"
                    },
                    dissolve: {
                        min: "2",
                        max: "3",
                        av: "f"
                    },
                    changeshape: {
                        min: "2",
                        max: "4",
                        av: "f"
                    },
                    first: {
                        min: "1",
                        max: "1",
                        av: "a"
                    },
                    top: {
                        min: "2",
                        max: "2",
                        av: "a"
                    },
                    orderby: {
                        min: "2",
                        max: "2",
                        av: "f"
                    },
                    "boolean": {
                        min: "1",
                        max: "1",
                        av: "a"
                    },
                    dictionary: {
                        min: "0",
                        max: "*",
                        av: "a"
                    },
                    servicearea: {
                        min: "2",
                        max: "*",
                        av: "f"
                    },
                    equals: {
                        min: "2",
                        max: "2",
                        av: "a"
                    },
                    "typeof": {
                        min: "1",
                        max: "1",
                        av: "a"
                    },
                    reverse: {
                        min: "1",
                        max: "1",
                        av: "a"
                    },
                    replace: {
                        min: "3",
                        max: "4",
                        av: "a"
                    },
                    sort: {
                        min: "1",
                        max: "2",
                        av: "a"
                    },
                    feature: {
                        min: "1",
                        max: "*",
                        av: "a"
                    },
                    haskey: {
                        min: "2",
                        max: "2",
                        av: "a"
                    },
                    indexof: {
                        min: "2",
                        max: "2",
                        av: "a"
                    },
                    centroid: {
                        min: "1",
                        max: "1",
                        av: "f"
                    },
                    multiparttosinglepart: {
                        min: "1",
                        max: "1",
                        av: "f"
                    }
                };
                p.checkFunctionSignature = a;
                p.findFunction = g;
                p.validateLanguageNode = q;
                p.testValidityOfExpression = h;
                p.referencesMemberImpl = k;
                p.referencesMember = function (a, b) {
                    return !0 === k(a.body[0].body, b.toLowerCase()) ? !0 : !1
                };
                p.referencesFunctionImpl = l;
                p.referencesFunction = function (a, b) {
                    return !0 === l(a.body[0].body, b) ? !0 : !1
                };
                p.findFieldLiteralsImpl = e;
                p.findFieldLiterals = function (a, b) {
                    return e(a.body[0].body, b)
                };
                p.extractFunctionDeclaration = c;
                p.validateFunction =
                    b;
                p.constructGlobalScope = d;
                p.validateScript = function (a, b, c) {
                    void 0 === c && (c = "full");
                    b = {
                        globalScope: d(b.vars, p.functionDecls, b.customFunctions, c),
                        localScope: null
                    };
                    return h(a.body[0].body, b)
                };
                p.validateLanguage = function (a) {
                    return "BlockStatement" !== a.body[0].body.type ? "Invalid formula content." : q(a.body[0].body)
                };
                p.nodeErrorMessage = m;
                p.makeError = t;
                p.extractAllIssuesInFunction = s;
                p.extractAllIssues = n;
                p.checkScript = function (a, b, c, e) {
                    void 0 === e && (e = "full");
                    var g = [];
                    if ("BlockStatement" !== a.body[0].body.type) return [{
                        line: 0,
                        character: 0,
                        reason: "Invalid Body"
                    }];
                    if (null === b || void 0 === b) b = {
                        vars: {},
                        customFunctions: []
                    };
                    b = {
                        globalScope: d(b.vars, p.functionDecls, b.customFunctions, e),
                        localScope: null
                    };
                    try {
                        n(a.body[0].body, b, c, g)
                    } catch (h) {}
                    return g
                }
            })
        },
        "esri/arcade/Feature": function () {
            define("require exports dojo/_base/lang ../geometry/Geometry ../graphic ../geometry/jsonUtils ./Dictionary ./languageUtils ./ImmutableArray ../geometry/Point".split(" "), function (r, p, a, g, q, h, k, l, e, c) {
                return function () {
                    function b(a, c, e) {
                        this._layer =
                            this.attributes = this.geometry = null;
                        this.immutable = this._datesfixed = !0;
                        a instanceof b ? (this.attributes = a.attributes, this.geometry = a.geometry, a._layer && (this._layer = a._layer)) : a instanceof q ? (this.geometry = a.geometry, this.attributes = void 0 === a.attributes ? {} : null === a.attributes ? {} : a.attributes, a._layer ? (this._layer = a._layer, this._datesfixed = !1) : a.layer && (this._layer = a.layer, this._datesfixed = !1)) : a instanceof k ? (this.attributes = a.field("attributes"), null !== this.attributes && (this.attributes = this.attributes instanceof k ? this.attributes.attributes : null), this.geometry = a.field("geometry"), null !== this.geometry && (this.geometry instanceof k ? this.geometry = b.parseGeometryFromDictionary(this.geometry) : this.geometry instanceof g || (this.geometry = null))) : (c instanceof g || null === c ? (this.geometry = c, this.attributes = void 0 === a ? {} : null === a ? {} : a) : "string" === typeof a ? (a = JSON.parse(a), null !== a.geometry && void 0 !== a.geometry && (this.geometry = h.fromJson(a.geometry)), this.attributes = void 0 === a.attributes ? {} : null === a.attributes ? {} : a.attributes) :
                            (void 0 === a ? this.attributes = {} : null === a && (this.attributes = {}), this.geometry = null), void 0 !== e && (this._layer = e))
                    }
                    b.prototype.castToText = function () {
                        var a = "",
                            b;
                        for (b in this.attributes) {
                            "" !== a && (a += ",");
                            var c = this.attributes[b];
                            null != c && (l.isBoolean(c) || l.isNumber(c) || l.isString(c) ? a += JSON.stringify(b) + ":" + JSON.stringify(c) : c instanceof g ? a += JSON.stringify(b) + ":" + l.toStringExplicit(c) : c instanceof e ? a += JSON.stringify(b) + ":" + l.toStringExplicit(c) : c instanceof Array ? a += JSON.stringify(b) + ":" + l.toStringExplicit(c) :
                                c instanceof Date ? a += JSON.stringify(b) + ":" + JSON.stringify(c) : null !== c && "object" === typeof c && void 0 !== c.castToText && (a += JSON.stringify(b) + ":" + c.castToText()))
                        }
                        return '{"geometry":' + (null === this.geometry ? "null" : l.toStringExplicit(this.geometry)) + ',"attributes":{' + a + "}}"
                    };
                    b.prototype._fixDates = function () {
                        for (var a = [], b = 0; b < this._layer.fields.length; b++) {
                            var c = this._layer.fields[b];
                            ("date" === c.type || "esriFieldTypeDate" === c.type) && a.push(c.name)
                        }
                        0 < a.length && this._fixDateFields(a);
                        this._datesfixed = !0
                    };
                    b.prototype._fixDateFields =
                        function (b) {
                            this.attributes = a.mixin({}, this.attributes);
                            for (var c = 0; c < b.length; c++) {
                                var e = this.attributes[b[c]];
                                if (null !== e)
                                    if (void 0 === e)
                                        for (var g in this.attributes) {
                                            if (g.toLowerCase() === b[c]) {
                                                e = this.attributes[g];
                                                null !== e && !(e instanceof Date) && (this.attributes[g] = new Date(e));
                                                break
                                            }
                                        } else e instanceof Date || (this.attributes[b[c]] = new Date(e))
                            }
                        };
                    b.prototype.field = function (a) {
                        !1 === this._datesfixed && this._fixDates();
                        var b = a.toLowerCase();
                        a = this.attributes[a];
                        if (void 0 !== a) return a;
                        for (var c in this.attributes)
                            if (c.toLowerCase() ===
                                b) return this.attributes[c];
                        if (this._hasFieldDefinition(b)) return null;
                        throw Error("Field not Found");
                    };
                    b.prototype._hasFieldDefinition = function (a) {
                        if (null === this._layer) return !1;
                        for (var b = 0; b < this._layer.fields.length; b++)
                            if (this._layer.fields[b].name.toLowerCase() === a) return !0;
                        return !1
                    };
                    b.prototype._field = function (a) {
                        !1 === this._datesfixed && this._fixDates();
                        var b = a.toLowerCase();
                        a = this.attributes[a];
                        if (void 0 !== a) return a;
                        for (var c in this.attributes)
                            if (c.toLowerCase() === b) return this.attributes[c];
                        return null
                    };
                    b.prototype.setField = function (a, b) {
                        if (this.immutable) throw Error("Feature is Immutable");
                        if (!1 === l.isSimpleType(b)) throw Error("Illegal Value Assignment to Feature");
                        var c = a.toLowerCase();
                        if (void 0 === this.attributes[a])
                            for (var e in this.attributes)
                                if (e.toLowerCase() === c) {
                                    this.attributes[e] = b;
                                    return
                                }
                        this.attributes[a] = b
                    };
                    b.prototype.hasField = function (a) {
                        var b = a.toLowerCase();
                        if (void 0 !== this.attributes[a]) return !0;
                        for (var c in this.attributes)
                            if (c.toLowerCase() === b) return !0;
                        return this._hasFieldDefinition(b) ?
                            !0 : !1
                    };
                    b.prototype.keys = function () {
                        var a = [],
                            b = {},
                            c;
                        for (c in this.attributes) a.push(c), b[c.toLowerCase()] = 1;
                        if (null !== this._layer)
                            for (c = 0; c < this._layer.fields.length; c++) {
                                var e = this._layer.fields[c];
                                1 !== b[e.name.toLowerCase()] && a.push(e.name)
                            }
                        return a = a.sort()
                    };
                    b.fromFeature = function (a) {
                        return new b(a)
                    };
                    b.parseGeometryFromDictionary = function (a) {
                        a = b.convertDictionaryToJson(a, !0);
                        void 0 !== a.spatialreference && (a.spatialReference = a.spatialreference, delete a.spatialreference);
                        void 0 !== a.rings && (a.rings =
                            this.fixPathArrays(a.rings, !0 === a.hasZ, !0 === a.hasM));
                        void 0 !== a.paths && (a.paths = this.fixPathArrays(a.paths, !0 === a.hasZ, !0 === a.hasM));
                        void 0 !== a.points && (a.points = this.fixPointArrays(a.points, !0 === a.hasZ, !0 === a.hasM));
                        return h.fromJson(a)
                    };
                    b.fixPathArrays = function (a, b, c) {
                        var g = [];
                        if (a instanceof Array)
                            for (var h = 0; h < a.length; h++) g.push(this.fixPointArrays(a[h], b, c));
                        else if (a instanceof e)
                            for (h = 0; h < a.length(); h++) g.push(this.fixPointArrays(a.get(h), b, c));
                        return g
                    };
                    b.fixPointArrays = function (a, b, g) {
                        var h = [];
                        if (a instanceof Array)
                            for (var n = 0; n < a.length; n++) {
                                var f = a[n];
                                f instanceof c ? b && g ? h.push([f.x, f.y, f.z, f.m]) : b ? h.push([f.x, f.y, f.z]) : g ? h.push([f.x, f.y, f.m]) : h.push([f.x, f.y]) : h.push(f)
                            } else if (a instanceof e)
                                for (n = 0; n < a.length(); n++) f = a.get(n), f instanceof c ? b && g ? h.push([f.x, f.y, f.z, f.m]) : b ? h.push([f.x, f.y, f.z]) : g ? h.push([f.x, f.y, f.m]) : h.push([f.x, f.y]) : h.push(f);
                        return h
                    };
                    b.convertDictionaryToJson = function (a, c) {
                        void 0 === c && (c = !1);
                        var e = {},
                            g;
                        for (g in a.attributes) {
                            var h = a.attributes[g];
                            h instanceof
                            k && (h = b.convertDictionaryToJson(h));
                            c ? e[g.toLowerCase()] = h : e[g] = h
                        }
                        return e
                    };
                    b.parseAttributesFromDictionary = function (a) {
                        var b = {},
                            c;
                        for (c in a.attributes) {
                            var e = a.attributes[c];
                            if (l.isSimpleType(e)) b[c] = e;
                            else throw Error("Illegal Argument");
                        }
                        return b
                    };
                    b.fromJson = function (a) {
                        var c = null;
                        null !== a.geometry && void 0 !== a.geometry && (c = h.fromJson(a.geometry));
                        var e = {};
                        if (null !== a.attributes && void 0 !== a.attributes)
                            for (var g in a.attributes) {
                                var n = a.attributes[g];
                                if (l.isString(n) || l.isNumber(n) || l.isBoolean(n) ||
                                    l.isDate(n)) e[g] = n;
                                else throw Error("Illegal Argument");
                            }
                        return new b(e, c)
                    };
                    b.prototype.domainValueLookup = function (a, b, c) {
                        if (null === this._layer || !this._layer.fields) return null;
                        c = l.getDomain(a, this._layer, this, c);
                        if (void 0 === b) try {
                            b = this.field(a)
                        } catch (e) {
                            return null
                        }
                        return l.getDomainValue(c, b)
                    };
                    b.prototype.domainCodeLookup = function (a, b, c) {
                        if (null === this._layer || !this._layer.fields) return null;
                        a = l.getDomain(a, this._layer, this, c);
                        return l.getDomainCode(a, b)
                    };
                    return b
                }()
            })
        },
        "esri/arcade/functions/date": function () {
            define(["require",
"exports", "../../moment", "../languageUtils"], function (r, p, a, g) {
                function q(a) {
                    return null === a ? a : isNaN(a.getTime()) ? null : a
                }
                p.registerFunctions = function (h, k) {
                    h.today = function (a, e) {
                        return k(a, e, function (a, b, d) {
                            g.pcCheck(d, 0, 0);
                            a = new Date;
                            a.setHours(0, 0, 0, 0);
                            return a
                        })
                    };
                    h.now = function (a, e) {
                        return k(a, e, function (a, b, d) {
                            g.pcCheck(d, 0, 0);
                            return new Date
                        })
                    };
                    h.timestamp = function (a, e) {
                        return k(a, e, function (a, b, d) {
                            g.pcCheck(d, 0, 0);
                            a = new Date;
                            return a = new Date(a.getUTCFullYear(), a.getUTCMonth(), a.getUTCDate(),
                                a.getUTCHours(), a.getUTCMinutes(), a.getUTCSeconds(), a.getUTCMilliseconds())
                        })
                    };
                    h.toutc = function (a, e) {
                        return k(a, e, function (a, b, d) {
                            g.pcCheck(d, 1, 1);
                            a = g.toDate(d[0]);
                            return null === a ? null : new Date(a.getUTCFullYear(), a.getUTCMonth(), a.getUTCDate(), a.getUTCHours(), a.getUTCMinutes(), a.getUTCSeconds(), a.getUTCMilliseconds())
                        })
                    };
                    h.tolocal = function (h, e) {
                        return k(h, e, function (c, b, d) {
                            g.pcCheck(d, 1, 1);
                            c = g.toDate(d[0]);
                            return null === c ? null : a.utc([c.getFullYear(), c.getMonth(), c.getDate(), c.getHours(), c.getMinutes(),
c.getSeconds(), c.getMilliseconds()]).toDate()
                        })
                    };
                    h.day = function (a, e) {
                        return k(a, e, function (a, b, d) {
                            g.pcCheck(d, 1, 1);
                            a = g.toDate(d[0]);
                            return null === a ? NaN : a.getDate()
                        })
                    };
                    h.month = function (a, e) {
                        return k(a, e, function (a, b, d) {
                            g.pcCheck(d, 1, 1);
                            a = g.toDate(d[0]);
                            return null === a ? NaN : a.getMonth()
                        })
                    };
                    h.year = function (a, e) {
                        return k(a, e, function (a, b, d) {
                            g.pcCheck(d, 1, 1);
                            a = g.toDate(d[0]);
                            return null === a ? NaN : a.getFullYear()
                        })
                    };
                    h.hour = function (a, e) {
                        return k(a, e, function (a, b, d) {
                            g.pcCheck(d, 1, 1);
                            a = g.toDate(d[0]);
                            return null ===
                                a ? NaN : a.getHours()
                        })
                    };
                    h.second = function (a, e) {
                        return k(a, e, function (a, b, d) {
                            g.pcCheck(d, 1, 1);
                            a = g.toDate(d[0]);
                            return null === a ? NaN : a.getSeconds()
                        })
                    };
                    h.millisecond = function (a, e) {
                        return k(a, e, function (a, b, d) {
                            g.pcCheck(d, 1, 1);
                            a = g.toDate(d[0]);
                            return null === a ? NaN : a.getMilliseconds()
                        })
                    };
                    h.minute = function (a, e) {
                        return k(a, e, function (a, b, d) {
                            g.pcCheck(d, 1, 1);
                            a = g.toDate(d[0]);
                            return null === a ? NaN : a.getMinutes()
                        })
                    };
                    h.weekday = function (a, e) {
                        return k(a, e, function (a, b, d) {
                            g.pcCheck(d, 1, 1);
                            a = g.toDate(d[0]);
                            return null ===
                                a ? NaN : a.getDay()
                        })
                    };
                    h.date = function (h, e) {
                        return k(h, e, function (c, b, d) {
                            g.pcCheck(d, 0, 7);
                            if (3 === d.length) return q(new Date(g.toNumber(d[0]), g.toNumber(d[1]), g.toNumber(d[2]), 0, 0, 0, 0));
                            if (4 === d.length) return q(new Date(g.toNumber(d[0]), g.toNumber(d[1]), g.toNumber(d[2]), g.toNumber(d[3]), 0, 0, 0));
                            if (5 === d.length) return q(new Date(g.toNumber(d[0]), g.toNumber(d[1]), g.toNumber(d[2]), g.toNumber(d[3]), g.toNumber(d[4]), 0, 0));
                            if (6 === d.length) return q(new Date(g.toNumber(d[0]), g.toNumber(d[1]), g.toNumber(d[2]),
                                g.toNumber(d[3]), g.toNumber(d[4]), g.toNumber(d[5]), 0));
                            if (7 === d.length) return q(new Date(g.toNumber(d[0]), g.toNumber(d[1]), g.toNumber(d[2]), g.toNumber(d[3]), g.toNumber(d[4]), g.toNumber(d[5]), g.toNumber(d[6])));
                            if (2 === d.length) {
                                c = g.toString(d[1]);
                                if ("" === c) return null;
                                c = g.standardiseDateFormat(c);
                                d = a(g.toString(d[0]), c, !0);
                                return !0 === d.isValid() ? d.toDate() : null
                            }
                            if (1 === d.length) {
                                if (g.isString(d[0]) && "" === d[0].replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g, "")) return null;
                                c = g.toNumber(d[0]);
                                return !1 ===
                                    isNaN(c) ? q(new Date(c)) : g.toDate(d[0])
                            }
                            if (0 === d.length) return new Date
                        })
                    };
                    h.datediff = function (a, e) {
                        return k(a, e, function (a, b, d) {
                            g.pcCheck(d, 2, 3);
                            a = g.toDateM(d[0]);
                            b = g.toDateM(d[1]);
                            if (null === a || null === b) return NaN;
                            switch (g.toString(d[2]).toLowerCase()) {
                            case "days":
                            case "day":
                            case "d":
                                return a.diff(b, "days", !0);
                            case "months":
                            case "month":
                                return a.diff(b, "months", !0);
                            case "minutes":
                            case "minute":
                            case "m":
                                return "M" === d[2] ? a.diff(b, "months", !0) : a.diff(b, "minutes", !0);
                            case "seconds":
                            case "second":
                            case "s":
                                return a.diff(b,
                                    "seconds", !0);
                            case "milliseconds":
                            case "millisecond":
                            case "ms":
                                return a.diff(b);
                            case "hours":
                            case "hour":
                            case "h":
                                return a.diff(b, "hours", !0);
                            case "years":
                            case "year":
                            case "y":
                                return a.diff(b, "years", !0);
                            default:
                                return a.diff(b)
                            }
                        })
                    };
                    h.dateadd = function (a, e) {
                        return k(a, e, function (a, b, d) {
                            g.pcCheck(d, 2, 3);
                            a = g.toDateM(d[0]);
                            if (null === a) return null;
                            b = "milliseconds";
                            switch (g.toString(d[2]).toLowerCase()) {
                            case "days":
                            case "day":
                            case "d":
                                b = "days";
                                break;
                            case "months":
                            case "month":
                                b = "months";
                                break;
                            case "minutes":
                            case "minute":
                            case "m":
                                b =
                                    "M" === d[2] ? "months" : "minutes";
                                break;
                            case "seconds":
                            case "second":
                            case "s":
                                b = "seconds";
                                break;
                            case "milliseconds":
                            case "millisecond":
                            case "ms":
                                b = "milliseconds";
                                break;
                            case "hours":
                            case "hour":
                            case "h":
                                b = "hours";
                                break;
                            case "years":
                            case "year":
                            case "y":
                                b = "years"
                            }
                            a.add(g.toNumber(d[1]), b);
                            return a.toDate()
                        })
                    }
                }
            })
        },
        "esri/arcade/functions/string": function () {
            define(["require", "exports", "../languageUtils", "../Feature"], function (r, p, a, g) {
                p.registerFunctions = function (q, h) {
                    q.trim = function (g, l) {
                        return h(g, l, function (e,
                            c, b) {
                            a.pcCheck(b, 1, 1);
                            return a.toString(b[0]).trim()
                        })
                    };
                    q.upper = function (g, l) {
                        return h(g, l, function (e, c, b) {
                            a.pcCheck(b, 1, 1);
                            return a.toString(b[0]).toUpperCase()
                        })
                    };
                    q.proper = function (g, l) {
                        return h(g, l, function (e, c, b) {
                            a.pcCheck(b, 1, 2);
                            e = 1;
                            2 === b.length && "firstword" === a.toString(b[1]).toLowerCase() && (e = 2);
                            c = /\s/;
                            b = a.toString(b[0]);
                            for (var d = "", g = !0, h = 0; h < b.length; h++) {
                                var l = b[h];
                                c.test(l) ? 1 === e && (g = !0) : l.toUpperCase() !== l.toLowerCase() && (g ? (l = l.toUpperCase(), g = !1) : l = l.toLowerCase());
                                d += l
                            }
                            return d
                        })
                    };
                    q.lower = function (g, l) {
                        return h(g, l, function (e, c, b) {
                            a.pcCheck(b, 1, 1);
                            return a.toString(b[0]).toLowerCase()
                        })
                    };
                    q.guid = function (g, l) {
                        return h(g, l, function (e, c, b) {
                            a.pcCheck(b, 0, 1);
                            if (0 < b.length) switch (a.toString(b[0]).toLowerCase()) {
                            case "digits":
                                return a.generateUUID().replace("-", "").replace("-", "").replace("-", "").replace("-", "");
                            case "digits-hyphen":
                                return a.generateUUID();
                            case "digits-hyphen-parentheses":
                                return "(" + a.generateUUID() + ")"
                            }
                            return "{" + a.generateUUID() + "}"
                        })
                    };
                    q.console = function (g, l) {
                        return h(g,
                            l,
                            function (e, c, b) {
                                0 !== b.length && (1 === b.length ? g.console(a.toString(b[0])) : g.console(a.toString(b)));
                                return a.voidOperation
                            })
                    };
                    q.mid = function (g, l) {
                        return h(g, l, function (e, c, b) {
                            a.pcCheck(b, 2, 3);
                            e = a.toNumber(b[1]);
                            if (isNaN(e)) return "";
                            0 > e && (e = 0);
                            if (2 === b.length) return a.toString(b[0]).substr(e);
                            c = a.toNumber(b[2]);
                            if (isNaN(c)) return "";
                            0 > c && (c = 0);
                            return a.toString(b[0]).substr(e, c)
                        })
                    };
                    q.find = function (g, l) {
                        return h(g, l, function (e, c, b) {
                            a.pcCheck(b, 2, 3);
                            e = 0;
                            if (2 < b.length) {
                                e = a.toNumber(a.defaultUndefined(b[2],
                                    0));
                                if (isNaN(e)) return -1;
                                0 > e && (e = 0)
                            }
                            return a.toString(b[1]).indexOf(a.toString(b[0]), e)
                        })
                    };
                    q.left = function (g, l) {
                        return h(g, l, function (e, c, b) {
                            a.pcCheck(b, 2, 2);
                            e = a.toNumber(b[1]);
                            if (isNaN(e)) return "";
                            0 > e && (e = 0);
                            return a.toString(b[0]).substr(0, e)
                        })
                    };
                    q.right = function (g, l) {
                        return h(g, l, function (e, c, b) {
                            a.pcCheck(b, 2, 2);
                            e = a.toNumber(b[1]);
                            if (isNaN(e)) return "";
                            0 > e && (e = 0);
                            return a.toString(b[0]).substr(-1 * e, e)
                        })
                    };
                    q.split = function (g, l) {
                        return h(g, l, function (e, c, b) {
                            a.pcCheck(b, 2, 4);
                            e = a.toNumber(a.defaultUndefined(b[2], -1));
                            c = a.toBoolean(a.defaultUndefined(b[3], !1)); - 1 === e || null === e || !0 === c ? b = a.toString(b[0]).split(a.toString(b[1])) : (isNaN(e) && (e = -1), -1 > e && (e = -1), b = a.toString(b[0]).split(a.toString(b[1]), e));
                            if (!1 === c) return b;
                            c = [];
                            for (var d = 0; d < b.length && !(-1 !== e && c.length >= e); d++) "" !== b[d] && void 0 !== b[d] && c.push(b[d]);
                            return c
                        })
                    };
                    q.text = function (g, l) {
                        return h(g, l, function (e, c, b) {
                            a.pcCheck(b, 1, 2);
                            return a.toStringExplicit(b[0], b[1])
                        })
                    };
                    q.concatenate = function (g, l) {
                        return h(g, l, function (e, c, b) {
                            e = [];
                            if (1 > b.length) return "";
                            if (a.isArray(b[0])) {
                                c = a.defaultUndefined(b[2], "");
                                for (var d = 0; d < b[0].length; d++) e[d] = a.toStringExplicit(b[0][d], c);
                                return 1 < b.length ? e.join(b[1]) : e.join("")
                            }
                            if (a.isImmutableArray(b[0])) {
                                c = a.defaultUndefined(b[2], "");
                                for (d = 0; d < b[0].length(); d++) e[d] = a.toStringExplicit(b[0].get(d), c);
                                return 1 < b.length ? e.join(b[1]) : e.join("")
                            }
                            for (d = 0; d < b.length; d++) e[d] = a.toStringExplicit(b[d]);
                            return e.join("")
                        })
                    };
                    q.reverse = function (g, l) {
                        return h(g, l, function (e, c, b) {
                            a.pcCheck(b, 1, 1);
                            if (a.isArray(b[0])) return e = b[0].slice(0),
                                e.reverse(), e;
                            if (a.isImmutableArray(b[0])) return e = b[0].toArray().slice(0), e.reverse(), e;
                            throw Error("Invalid Parameter");
                        })
                    };
                    q.replace = function (g, l) {
                        return h(g, l, function (e, c, b) {
                            a.pcCheck(b, 3, 4);
                            e = a.toString(b[0]);
                            c = a.toString(b[1]);
                            var d = a.toString(b[2]);
                            return (4 === b.length ? a.toBoolean(b[3]) : 1) ? a.multiReplace(e, c, d) : e.replace(c, d)
                        })
                    };
                    q.domainname = function (k, l) {
                        return h(k, l, function (e, c, b) {
                            a.pcCheck(b, 2, 4);
                            if (b[0] instanceof g) return b[0].domainValueLookup(a.toString(b[1]), b[2], void 0 === b[3] ? void 0 :
                                a.toNumber(b[3]));
                            throw Error("Invalid Parameter");
                        })
                    };
                    q.domaincode = function (k, l) {
                        return h(k, l, function (e, c, b) {
                            a.pcCheck(b, 3, 4);
                            if (b[0] instanceof g) return b[0].domainCodeLookup(a.toString(b[1]), b[2], void 0 === b[3] ? void 0 : a.toNumber(b[3]));
                            throw Error("Invalid Parameter");
                        })
                    }
                }
            })
        },
        "esri/arcade/functions/maths": function () {
            define(["require", "exports", "../languageUtils", "dojo/number"], function (r, p, a, g) {
                function q(a, g, l) {
                    if ("undefined" === typeof l || 0 === +l) return Math[a](g);
                    g = +g;
                    l = +l;
                    if (isNaN(g) || !("number" ===
                            typeof l && 0 === l % 1)) return NaN;
                    g = g.toString().split("e");
                    g = Math[a](+(g[0] + "e" + (g[1] ? +g[1] - l : -l)));
                    g = g.toString().split("e");
                    return +(g[0] + "e" + (g[1] ? +g[1] + l : l))
                }
                p.registerFunctions = function (h, k) {
                    h.number = function (h, e) {
                        return k(h, e, function (c, b, d) {
                            a.pcCheck(d, 1, 2);
                            c = d[0];
                            return a.isNumber(c) ? c : null === c ? 0 : a.isDate(c) || a.isBoolean(c) || "" === c || void 0 === c ? Number(c) : a.isString(c) ? void 0 !== d[1] ? (d = a.multiReplace(d[1], "\u2030", ""), d = a.multiReplace(d, "\u00a4", ""), g.parse(c, {
                                pattern: d
                            })) : Number(c.trim()) : Number(c)
                        })
                    };
                    h.abs = function (g, e) {
                        return k(g, e, function (c, b, d) {
                            a.pcCheck(d, 1, 1);
                            return Math.abs(a.toNumber(d[0]))
                        })
                    };
                    h.acos = function (g, e) {
                        return k(g, e, function (c, b, d) {
                            a.pcCheck(d, 1, 1);
                            return Math.acos(a.toNumber(d[0]))
                        })
                    };
                    h.asin = function (g, e) {
                        return k(g, e, function (c, b, d) {
                            a.pcCheck(d, 1, 1);
                            return Math.asin(a.toNumber(d[0]))
                        })
                    };
                    h.atan = function (g, e) {
                        return k(g, e, function (c, b, d) {
                            a.pcCheck(d, 1, 1);
                            return Math.atan(a.toNumber(d[0]))
                        })
                    };
                    h.atan2 = function (g, e) {
                        return k(g, e, function (c, b, d) {
                            a.pcCheck(d, 2, 2);
                            return Math.atan2(a.toNumber(d[0]),
                                a.toNumber(d[1]))
                        })
                    };
                    h.ceil = function (g, e) {
                        return k(g, e, function (c, b, d) {
                            a.pcCheck(d, 1, 2);
                            return 2 === d.length ? (c = a.toNumber(d[1]), isNaN(c) && (c = 0), q("ceil", a.toNumber(d[0]), -1 * c)) : Math.ceil(a.toNumber(d[0]))
                        })
                    };
                    h.round = function (g, e) {
                        return k(g, e, function (c, b, d) {
                            a.pcCheck(d, 1, 2);
                            return 2 === d.length ? (c = a.toNumber(d[1]), isNaN(c) && (c = 0), q("round", a.toNumber(d[0]), -1 * c)) : Math.round(a.toNumber(d[0]))
                        })
                    };
                    h.floor = function (g, e) {
                        return k(g, e, function (c, b, d) {
                            a.pcCheck(d, 1, 2);
                            return 2 === d.length ? (c = a.toNumber(d[1]),
                                isNaN(c) && (c = 0), q("floor", a.toNumber(d[0]), -1 * c)) : Math.floor(a.toNumber(d[0]))
                        })
                    };
                    h.cos = function (g, e) {
                        return k(g, e, function (c, b, d) {
                            a.pcCheck(d, 1, 1);
                            return Math.cos(a.toNumber(d[0]))
                        })
                    };
                    h.isnan = function (g, e) {
                        return k(g, e, function (c, b, d) {
                            a.pcCheck(d, 1, 1);
                            return "number" === typeof d[0] && isNaN(d[0])
                        })
                    };
                    h.exp = function (g, e) {
                        return k(g, e, function (c, b, d) {
                            a.pcCheck(d, 1, 1);
                            return Math.exp(a.toNumber(d[0]))
                        })
                    };
                    h.log = function (g, e) {
                        return k(g, e, function (c, b, d) {
                            a.pcCheck(d, 1, 1);
                            return Math.log(a.toNumber(d[0]))
                        })
                    };
                    h.pow = function (g, e) {
                        return k(g, e, function (c, b, d) {
                            a.pcCheck(d, 2, 2);
                            return Math.pow(a.toNumber(d[0]), a.toNumber(d[1]))
                        })
                    };
                    h.random = function (g, e) {
                        return k(g, e, function (c, b, d) {
                            a.pcCheck(d, 0, 0);
                            return Math.random()
                        })
                    };
                    h.sin = function (g, e) {
                        return k(g, e, function (c, b, d) {
                            a.pcCheck(d, 1, 1);
                            return Math.sin(a.toNumber(d[0]))
                        })
                    };
                    h.sqrt = function (g, e) {
                        return k(g, e, function (c, b, d) {
                            a.pcCheck(d, 1, 1);
                            return Math.sqrt(a.toNumber(d[0]))
                        })
                    };
                    h.tan = function (g, e) {
                        return k(g, e, function (c, b, d) {
                            a.pcCheck(d, 1, 1);
                            return Math.tan(a.toNumber(d[0]))
                        })
                    };
                    h.defaultvalue = function (g, e) {
                        return k(g, e, function (c, b, d) {
                            a.pcCheck(d, 2, 2);
                            return null === d[0] || "" === d[0] || void 0 === d[0] ? d[1] : d[0]
                        })
                    };
                    h.isempty = function (g, e) {
                        return k(g, e, function (c, b, d) {
                            a.pcCheck(d, 1, 1);
                            return null === d[0] || "" === d[0] || void 0 === d[0] ? !0 : !1
                        })
                    };
                    h["boolean"] = function (g, e) {
                        return k(g, e, function (c, b, d) {
                            a.pcCheck(d, 1, 1);
                            return a.toBoolean(d[0])
                        })
                    }
                }
            })
        },
        "esri/arcade/functions/geometry": function () {
            define("require exports ../../geometry/Geometry ../../geometry/Polygon ../../geometry/Polyline ../../geometry/Point ../../geometry/Extent ../../geometry/Multipoint ../../geometry/jsonUtils ../languageUtils ../Dictionary ../Feature".split(" "),
                function (r, p, a, g, q, h, k, l, e, c, b, d) {
                    p.registerFunctions = function (m, p) {
                        m.polygon = function (a, h) {
                            return p(a, h, function (f, h, n) {
                                c.pcCheck(n, 1, 1);
                                f = null;
                                if (n[0] instanceof b) {
                                    if (f = c.fixSpatialReference(d.parseGeometryFromDictionary(n[0]), a.spatialReference), !1 === f instanceof g) throw Error("Illegal Parameter");
                                } else f = n[0] instanceof g ? e.fromJson(n[0].toJson()) : c.fixSpatialReference(new g(JSON.parse(n[0])), a.spatialReference);
                                if (null !== f && !1 === f.spatialReference.equals(a.spatialReference)) throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");
                                return f
                            })
                        };
                        m.polyline = function (a, g) {
                            return p(a, g, function (f, g, h) {
                                c.pcCheck(h, 1, 1);
                                f = null;
                                if (h[0] instanceof b) {
                                    if (f = c.fixSpatialReference(d.parseGeometryFromDictionary(h[0]), a.spatialReference), !1 === f instanceof q) throw Error("Illegal Parameter");
                                } else f = h[0] instanceof q ? e.fromJson(h[0].toJson()) : c.fixSpatialReference(new q(JSON.parse(h[0])), a.spatialReference);
                                if (null !== f && !1 === f.spatialReference.equals(a.spatialReference)) throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");
                                return f
                            })
                        };
                        m.point = function (a, g) {
                            return p(a, g, function (f, g, n) {
                                c.pcCheck(n, 1, 1);
                                f = null;
                                if (n[0] instanceof b) {
                                    if (f = c.fixSpatialReference(d.parseGeometryFromDictionary(n[0]), a.spatialReference), !1 === f instanceof h) throw Error("Illegal Parameter");
                                } else f = n[0] instanceof h ? e.fromJson(n[0].toJson()) : c.fixSpatialReference(new h(JSON.parse(n[0])), a.spatialReference);
                                if (null !== f && !1 === f.spatialReference.equals(a.spatialReference)) throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");
                                return f
                            })
                        };
                        m.multipoint = function (a, g) {
                            return p(a, g, function (f, g, h) {
                                c.pcCheck(h, 1, 1);
                                f = null;
                                if (h[0] instanceof b) {
                                    if (f = c.fixSpatialReference(d.parseGeometryFromDictionary(h[0]), a.spatialReference), !1 === f instanceof l) throw Error("Illegal Parameter");
                                } else f = h[0] instanceof l ? e.fromJson(h[0].toJson()) : c.fixSpatialReference(new l(JSON.parse(h[0])), a.spatialReference);
                                if (null !== f && !1 === f.spatialReference.equals(a.spatialReference)) throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");
                                return f
                            })
                        };
                        m.extent = function (a, n) {
                            return p(a, n, function (f, n, m) {
                                c.pcCheck(m, 1, 1);
                                f = null;
                                m[0] instanceof b ? f = c.fixSpatialReference(d.parseGeometryFromDictionary(m[0]), a.spatialReference) : m[0] instanceof h ? (f = {
                                        xmin: m[0].x,
                                        ymin: m[0].y,
                                        xmax: m[0].x,
                                        ymax: m[0].y,
                                        spatialReference: m[0].spatialReference.toJson()
                                    }, m[0].hasZ ? (f.zmin = m[0].z, f.zmax = m[0].z) : m[0].hasM && (f.mmin = m[0].m, f.mmax = m[0].m), f = e.fromJson(f)) : f = m[0] instanceof g ? e.fromJson(m[0].getExtent().toJson()) : m[0] instanceof q ? e.fromJson(m[0].getExtent().toJson()) :
                                    m[0] instanceof l ? e.fromJson(m[0].getExtent().toJson()) : m[0] instanceof k ? e.fromJson(m[0].toJson()) : c.fixSpatialReference(new k(JSON.parse(m[0])), a.spatialReference);
                                if (null !== f && !1 === f.spatialReference.equals(a.spatialReference)) throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");
                                return f
                            })
                        };
                        m.geometry = function (a, g) {
                            return p(a, g, function (f, g, h) {
                                c.pcCheck(h, 1, 1);
                                f = null;
                                f = h[0] instanceof d ? c.fixSpatialReference(h[0].geometry, a.spatialReference) :
                                    h[0] instanceof b ? c.fixSpatialReference(d.parseGeometryFromDictionary(h[0]), a.spatialReference) : c.fixSpatialReference(e.fromJson(JSON.parse(h[0])), a.spatialReference);
                                if (null !== f && !1 === f.spatialReference.equals(a.spatialReference)) throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");
                                return f
                            })
                        };
                        m.feature = function (e, g) {
                            return p(e, g, function (f, g, h) {
                                if (0 === h.length) throw Error("Missing Parameters");
                                f = null;
                                if (1 === h.length)
                                    if (c.isString(h[0])) f =
                                        d.fromJson(JSON.parse(h[0]));
                                    else if (h[0] instanceof d) f = new d(h[0]);
                                else if (h[0] instanceof a) f = new d(null, h[0]);
                                else if (h[0] instanceof b) f = h[0].hasField("geometry") ? h[0].field("geometry") : null, g = h[0].hasField("attributes") ? h[0].field("attributes") : null, null !== f && f instanceof b && (f = d.parseGeometryFromDictionary(f)), null !== g && (g = d.parseAttributesFromDictionary(g)), f = new d(g, f);
                                else throw Error("Illegal Argument");
                                else {
                                    if (2 === h.length) {
                                        g = f = null;
                                        if (null !== h[0])
                                            if (h[0] instanceof a) f = h[0];
                                            else if (f instanceof b) f = d.parseGeometryFromDictionary(h[0]);
                                        else throw Error("Illegal Argument");
                                        if (null !== h[1])
                                            if (h[1] instanceof b) g = d.parseAttributesFromDictionary(h[1]);
                                            else throw Error("Illegal Argument");
                                    } else {
                                        f = null;
                                        g = {};
                                        if (null !== h[0])
                                            if (h[0] instanceof a) f = h[0];
                                            else if (f instanceof b) f = d.parseGeometryFromDictionary(h[0]);
                                        else throw Error("Illegal Argument");
                                        for (var n = 1; n < h.length; n += 2) {
                                            var m = c.toString(h[n]),
                                                l = h[n + 1];
                                            if (null === l || void 0 === l || c.isString(l) || isNaN(l) || c.isDate(l) || c.isNumber(l) || c.isBoolean(l)) {
                                                if (c.isFunctionParameter(l) ||
                                                    !1 === c.isSimpleType(l)) throw Error("Illegal Argument");
                                                g[m] = l === c.voidOperation ? null : l
                                            } else throw Error("Illegal Argument");
                                        }
                                    }
                                    f = new d(g, f)
                                }
                                f.geometry = c.fixSpatialReference(f.geometry, e.spatialReference);
                                f.immutable = !1;
                                return f
                            })
                        };
                        m.dictionary = function (a, d) {
                            return p(a, d, function (a, d, e) {
                                if (0 === e.length) throw Error("Missing Parameters");
                                if (0 !== e.length % 2) throw Error("Missing Parameters");
                                a = {};
                                for (d = 0; d < e.length; d += 2) {
                                    var g = c.toString(e[d]),
                                        h = e[d + 1];
                                    if (null === h || void 0 === h || c.isString(h) || isNaN(h) || c.isDate(h) ||
                                        c.isNumber(h) || c.isBoolean(h)) {
                                        if (c.isFunctionParameter(h)) throw Error("Illegal Argument");
                                        a[g] = h === c.voidOperation ? null : h
                                    } else throw Error("Illegal Argument");
                                }
                                e = new b(a);
                                e.immutable = !1;
                                return e
                            })
                        };
                        m.haskey = function (a, e) {
                            return p(a, e, function (a, e, g) {
                                c.pcCheck(g, 2, 2);
                                a = c.toString(g[1]);
                                if (g[0] instanceof d || g[0] instanceof b) return g[0].hasField(a);
                                throw Error("Illegal Argument");
                            })
                        };
                        m.indexof = function (a, b) {
                            return p(a, b, function (a, b, d) {
                                c.pcCheck(d, 2, 2);
                                a = d[1];
                                if (c.isArray(d[0])) {
                                    for (b = 0; b < d[0].length; b++)
                                        if (c.equalityTest(a,
                                                d[0][b])) return b;
                                    return -1
                                }
                                if (c.isImmutableArray(d[0])) {
                                    var e = d[0].length();
                                    for (b = 0; b < e; b++)
                                        if (c.equalityTest(a, d[0].get(b))) return b;
                                    return -1
                                }
                                throw Error("Illegal Argument");
                            })
                        }
                    }
                })
        },
        "esri/arcade/functions/stats": function () {
            define(["require", "exports", "../languageUtils", "./fieldStats"], function (r, p, a, g) {
                function q(h, k, l, e) {
                    if (1 === e.length) {
                        if (a.isArray(e[0])) return g.calculateStat(h, e[0], -1);
                        if (a.isImmutableArray(e[0])) return g.calculateStat(h, e[0].toArray(), -1)
                    }
                    return g.calculateStat(h, e, -1)
                }
                p.registerFunctions =
                    function (g, k) {
                        g.stdev = function (a, e) {
                            return k(a, e, function (a, b, d) {
                                return q("stdev", a, b, d)
                            })
                        };
                        g.variance = function (a, e) {
                            return k(a, e, function (a, b, d) {
                                return q("variance", a, b, d)
                            })
                        };
                        g.average = function (a, e) {
                            return k(a, e, function (a, b, d) {
                                return q("mean", a, b, d)
                            })
                        };
                        g.mean = function (a, e) {
                            return k(a, e, function (a, b, d) {
                                return q("mean", a, b, d)
                            })
                        };
                        g.sum = function (a, e) {
                            return k(a, e, function (a, b, d) {
                                return q("sum", a, b, d)
                            })
                        };
                        g.min = function (a, e) {
                            return k(a, e, function (a, b, d) {
                                return q("min", a, b, d)
                            })
                        };
                        g.max = function (a, e) {
                            return k(a,
                                e,
                                function (a, b, d) {
                                    return q("max", a, b, d)
                                })
                        };
                        g.distinct = function (a, e) {
                            return k(a, e, function (a, b, d) {
                                return q("distinct", a, b, d)
                            })
                        };
                        g.count = function (g, e) {
                            return k(g, e, function (c, b, d) {
                                a.pcCheck(d, 1, 1);
                                if (a.isArray(d[0]) || a.isString(d[0])) return d[0].length;
                                if (a.isImmutableArray(d[0])) return d[0].length();
                                throw Error("Invalid Parameters for Count");
                            })
                        }
                    }
            })
        },
        "esri/arcade/functions/fieldStats": function () {
            define(["require", "exports", "../languageUtils"], function (r, p, a) {
                function g(a) {
                    for (var g = 0, l = 0; l < a.length; l++) g +=
                        a[l];
                    return g / a.length
                }

                function q(a) {
                    for (var k = g(a), l = 0, e = 0; e < a.length; e++) l += Math.pow(k - a[e], 2);
                    return l / a.length
                }
                p.decodeStatType = function (a) {
                    switch (a.toLowerCase()) {
                    case "distinct":
                        return "distinct";
                    case "avg":
                    case "mean":
                        return "avg";
                    case "min":
                        return "min";
                    case "sum":
                        return "sum";
                    case "max":
                        return "max";
                    case "stdev":
                    case "stddev":
                        return "stddev";
                    case "var":
                    case "variance":
                        return "var";
                    case "count":
                        return "count"
                    }
                    return ""
                };
                p.calculateStat = function (h, k, l) {
                    void 0 === l && (l = 1E3);
                    switch (h.toLowerCase()) {
                    case "distinct":
                        a: {
                            h =
                                l;
                            l = [];
                            for (var e = {}, c = [], b = 0; b < k.length; b++) {
                                if (void 0 !== k[b] && null !== k[b] && k[b] !== a.voidOperation) {
                                    var d = k[b];
                                    if (a.isNumber(d) || a.isString(d)) void 0 === e[d] && (l.push(d), e[d] = 1);
                                    else {
                                        for (var m = !1, p = 0; p < c.length; p++) !0 === a.equalityTest(c[p], d) && (m = !0);
                                        !1 === m && (c.push(d), l.push(d))
                                    }
                                }
                                if (l.length >= h && -1 !== h) {
                                    k = l;
                                    break a
                                }
                            }
                            k = l
                        }
                        return k;
                    case "avg":
                    case "mean":
                        return g(a.toNumberArray(k));
                    case "min":
                        return Math.min.apply(Math, a.toNumberArray(k));
                    case "sum":
                        k = a.toNumberArray(k);
                        for (l = h = 0; l < k.length; l++) h +=
                            k[l];
                        return h;
                    case "max":
                        return Math.max.apply(Math, a.toNumberArray(k));
                    case "stdev":
                    case "stddev":
                        return Math.sqrt(q(a.toNumberArray(k)));
                    case "var":
                    case "variance":
                        return q(a.toNumberArray(k));
                    case "count":
                        return k.length
                    }
                    return 0
                }
            })
        },
        "esri/arcade/parser": function () {
            define(["require", "exports", "./treeAnalysis", "./lib/esprima"], function (r, p, a, g) {
                p.parseScript = function (q) {
                    q = g.parse("function _() { " + q + "\n}");
                    if (null === q.body || void 0 === q.body) throw Error("No formula provided.");
                    if (0 === q.body.length) throw Error("No formula provided.");
                    if (0 === q.body.length) throw Error("No formula provided.");
                    if ("BlockStatement" !== q.body[0].body.type) throw Error("Invalid formula content.");
                    var h = a.validateLanguage(q);
                    if ("" !== h) throw Error(h);
                    return q
                };
                p.scriptCheck = function (q, h, k, l) {
                    var e = [];
                    try {
                        var c = g.parse("function _() { " + q + "\n}", {
                                tolerant: !0,
                                loc: !0
                            }),
                            b = c.errors;
                        if (0 < b.length)
                            for (var d = 0; d < b.length; d++) e.push({
                                line: b[d].lineNumber,
                                character: b[d].column,
                                reason: b[d].description
                            });
                        var m = a.checkScript(c, h, k, l);
                        for (h = 0; h < m.length; h++) e.push(m[h])
                    } catch (p) {
                        try {
                            "Unexpected token }" ===
                            p.description && (p.index = ("function _() { " + q + "\n}").length - 1) ? e.push({
                                line: p.lineNumber,
                                character: p.column,
                                reason: "Unexpected end of script"
                            }) : e.push({
                                line: p.lineNumber,
                                character: p.column,
                                reason: p.description
                            })
                        } catch (s) {}
                    }
                    return e
                };
                p.extractFieldLiterals = function (g, h) {
                    void 0 === h && (h = !1);
                    return a.findFieldLiterals(g, h)
                };
                p.validateScript = function (g, h, k) {
                    void 0 === k && (k = "full");
                    return a.validateScript(g, h, k)
                };
                p.referencesMember = function (g, h) {
                    return a.referencesMember(g, h)
                };
                p.referencesFunction = function (g,
                    h) {
                    return a.referencesFunction(g, h)
                }
            })
        },
        "esri/arcade/lib/esprima": function () {
            (function (r, p) {
                "function" === typeof define && define.amd ? define(["exports"], p) : "undefined" !== typeof exports ? p(exports) : p(r.esprima = {})
            })(this, function (r) {
                function p(a, b) {
                    if (!a) throw Error("ASSERT: " + b);
                }

                function a(a) {
                    return 48 <= a && 57 >= a
                }

                function g(a) {
                    return 0 <= "0123456789abcdefABCDEF".indexOf(a)
                }

                function q(a) {
                    return 0 <= "01234567".indexOf(a)
                }

                function h(a) {
                    return 10 === a || 13 === a || 8232 === a || 8233 === a
                }

                function k(a) {
                    return 36 === a ||
                        95 === a || 65 <= a && 90 >= a || 97 <= a && 122 >= a || 92 === a || 128 <= a && sa.NonAsciiIdentifierStart.test(String.fromCharCode(a))
                }

                function l(a) {
                    return 36 === a || 95 === a || 65 <= a && 90 >= a || 97 <= a && 122 >= a || 48 <= a && 57 >= a || 92 === a || 128 <= a && sa.NonAsciiIdentifierPart.test(String.fromCharCode(a))
                }

                function e(a) {
                    switch (a) {
                        default: return !1
                    }
                }

                function c(a) {
                    if (fa && e(a)) return !0;
                    a = a.toLowerCase();
                    switch (a.length) {
                    case 2:
                        return "if" === a || "in" === a;
                    case 3:
                        return "var" === a || "for" === a;
                    case 4:
                        return "else" === a;
                    case 5:
                        return "break" === a;
                    case 6:
                        return "return" ===
                            a;
                    case 8:
                        return "function" === a.toLowerCase() || "continue" === a;
                    default:
                        return !1
                    }
                }

                function b(a, b, c, d, f) {
                    p("number" === typeof c, "Comment must have valid position");
                    X.lastCommentStart >= c || (X.lastCommentStart = c, a = {
                        type: a,
                        value: b
                    }, M.range && (a.range = [c, d]), M.loc && (a.loc = f), M.comments.push(a), M.attachComment && (M.leadingComments.push(a), M.trailingComments.push(a)))
                }

                function d(a) {
                    var c, d, f;
                    c = B - a;
                    for (d = {
                            start: {
                                line: ba,
                                column: B - da - a
                            }
                        }; B < ka;)
                        if (f = S.charCodeAt(B), ++B, h(f)) {
                            M.comments && (a = S.slice(c + a, B - 1), d.end = {
                                line: ba,
                                column: B - da - 1
                            }, b("Line", a, c, B - 1, d));
                            13 === f && 10 === S.charCodeAt(B) && ++B;
                            ++ba;
                            da = B;
                            return
                        }
                    M.comments && (a = S.slice(c + a, B), d.end = {
                        line: ba,
                        column: B - da
                    }, b("Line", a, c, B, d))
                }

                function m() {
                    var a, c;
                    for (c = 0 === B; B < ka;)
                        if (a = S.charCodeAt(B), 32 === a || 9 === a || 11 === a || 12 === a || 160 === a || 5760 <= a && 0 <= [5760, 6158, 8192, 8193, 8194, 8195, 8196, 8197, 8198, 8199, 8200, 8201, 8202, 8239, 8287, 12288, 65279].indexOf(a)) ++B;
                        else if (h(a)) ++B, 13 === a && 10 === S.charCodeAt(B) && ++B, ++ba, da = B, c = !0;
                    else if (47 === a)
                        if (a = S.charCodeAt(B + 1), 47 === a) ++B, ++B, d(2),
                            c = !0;
                        else if (42 === a) {
                        ++B;
                        ++B;
                        a: {
                            var f = a = void 0,
                                e = void 0,
                                e = void 0;
                            M.comments && (a = B - 2, f = {
                                start: {
                                    line: ba,
                                    column: B - da - 2
                                }
                            });
                            for (; B < ka;)
                                if (e = S.charCodeAt(B), h(e)) 13 === e && 10 === S.charCodeAt(B + 1) && ++B, ++ba, ++B, da = B, B >= ka && K();
                                else {
                                    if (42 === e && 47 === S.charCodeAt(B + 1)) {
                                        ++B;
                                        ++B;
                                        M.comments && (e = S.slice(a + 2, B - 2), f.end = {
                                            line: ba,
                                            column: B - da
                                        }, b("Block", e, a, B, f));
                                        break a
                                    }++B
                                }
                            K()
                        }
                    } else break;
                    else if (c && 45 === a)
                        if (45 === S.charCodeAt(B + 1) && 62 === S.charCodeAt(B + 2)) B += 3, d(3);
                        else break;
                    else if (60 === a)
                        if ("!--" === S.slice(B + 1, B +
                                4)) ++B, ++B, ++B, ++B, d(4);
                        else break;
                    else break
                }

                function t(a) {
                    var b, c, d = 0;
                    b = "u" === a ? 4 : 2;
                    for (a = 0; a < b; ++a)
                        if (B < ka && g(S[B])) c = S[B++], d = 16 * d + "0123456789abcdef".indexOf(c.toLowerCase());
                        else return "";
                    return String.fromCharCode(d)
                }

                function s() {
                    var a, b;
                    a = S.charCodeAt(B++);
                    b = String.fromCharCode(a);
                    92 === a && (117 !== S.charCodeAt(B) && K(), ++B, a = t("u"), (!a || "\\" === a || !k(a.charCodeAt(0))) && K(), b = a);
                    for (; B < ka;) {
                        a = S.charCodeAt(B);
                        if (!l(a)) break;
                        ++B;
                        b += String.fromCharCode(a);
                        92 === a && (b = b.substr(0, b.length - 1), 117 !== S.charCodeAt(B) &&
                            K(), ++B, a = t("u"), (!a || "\\" === a || !l(a.charCodeAt(0))) && K(), b += a)
                    }
                    return b
                }

                function n() {
                    var a = B,
                        b = S.charCodeAt(B),
                        c, d = S[B];
                    switch (b) {
                    case 46:
                    case 40:
                    case 41:
                    case 59:
                    case 44:
                    case 123:
                    case 125:
                    case 91:
                    case 93:
                    case 58:
                    case 63:
                    case 126:
                        return ++B, M.tokenize && (40 === b ? M.openParenToken = M.tokens.length : 123 === b && (M.openCurlyToken = M.tokens.length)), {
                            type: L.Punctuator,
                            value: String.fromCharCode(b),
                            lineNumber: ba,
                            lineStart: da,
                            start: a,
                            end: B
                        };
                    default:
                        if (c = S.charCodeAt(B + 1), 61 === c) switch (b) {
                        case 43:
                        case 45:
                        case 47:
                        case 60:
                        case 62:
                        case 94:
                        case 124:
                        case 37:
                        case 38:
                        case 42:
                            return B +=
                                2, {
                                    type: L.Punctuator,
                                    value: String.fromCharCode(b) + String.fromCharCode(c),
                                    lineNumber: ba,
                                    lineStart: da,
                                    start: a,
                                    end: B
                                };
                        case 33:
                        case 61:
                            return B += 2, 61 === S.charCodeAt(B) && ++B, {
                                type: L.Punctuator,
                                value: S.slice(a, B),
                                lineNumber: ba,
                                lineStart: da,
                                start: a,
                                end: B
                            }
                        }
                    }
                    b = S.substr(B, 4);
                    if ("\x3e\x3e\x3e\x3d" === b) return B += 4, {
                        type: L.Punctuator,
                        value: b,
                        lineNumber: ba,
                        lineStart: da,
                        start: a,
                        end: B
                    };
                    b = b.substr(0, 3);
                    if ("\x3e\x3e\x3e" === b || "\x3c\x3c\x3d" === b || "\x3e\x3e\x3d" === b) return B += 3, {
                        type: L.Punctuator,
                        value: b,
                        lineNumber: ba,
                        lineStart: da,
                        start: a,
                        end: B
                    };
                    b = b.substr(0, 2);
                    if (d === b[1] && 0 <= "+-\x3c\x3e\x26|".indexOf(d) || "\x3d\x3e" === b) return B += 2, {
                        type: L.Punctuator,
                        value: b,
                        lineNumber: ba,
                        lineStart: da,
                        start: a,
                        end: B
                    };
                    if (0 <= "\x3c\x3e\x3d!+-*%\x26|^/".indexOf(d)) return ++B, {
                        type: L.Punctuator,
                        value: d,
                        lineNumber: ba,
                        lineStart: da,
                        start: a,
                        end: B
                    };
                    K()
                }

                function f() {
                    var b, c, d;
                    d = S[B];
                    p(a(d.charCodeAt(0)) || "." === d, "Numeric literal must start with a decimal digit or a decimal point");
                    c = B;
                    b = "";
                    if ("." !== d) {
                        b = S[B++];
                        d = S[B];
                        if ("0" === b) {
                            if ("x" ===
                                d || "X" === d) {
                                ++B;
                                for (b = ""; B < ka && g(S[B]);) b += S[B++];
                                0 === b.length && K();
                                k(S.charCodeAt(B)) && K();
                                return {
                                    type: L.NumericLiteral,
                                    value: parseInt("0x" + b, 16),
                                    lineNumber: ba,
                                    lineStart: da,
                                    start: c,
                                    end: B
                                }
                            }
                            if ("b" === d || "B" === d) {
                                ++B;
                                for (d = ""; B < ka;) {
                                    b = S[B];
                                    if ("0" !== b && "1" !== b) break;
                                    d += S[B++]
                                }
                                0 === d.length && K();
                                B < ka && (b = S.charCodeAt(B), (k(b) || a(b)) && K());
                                return {
                                    type: L.NumericLiteral,
                                    value: parseInt(d, 2),
                                    lineNumber: ba,
                                    lineStart: da,
                                    start: c,
                                    end: B
                                }
                            }
                            if ("o" === d || "O" === d || q(d)) {
                                q(d) ? (d = !0, b = "0" + S[B++]) : (d = !1, ++B, b = "");
                                for (; B <
                                    ka && q(S[B]);) b += S[B++];
                                !d && 0 === b.length && K();
                                (k(S.charCodeAt(B)) || a(S.charCodeAt(B))) && K();
                                return {
                                    type: L.NumericLiteral,
                                    value: parseInt(b, 8),
                                    octal: d,
                                    lineNumber: ba,
                                    lineStart: da,
                                    start: c,
                                    end: B
                                }
                            }
                            d && a(d.charCodeAt(0)) && K()
                        }
                        for (; a(S.charCodeAt(B));) b += S[B++];
                        d = S[B]
                    }
                    if ("." === d) {
                        for (b += S[B++]; a(S.charCodeAt(B));) b += S[B++];
                        d = S[B]
                    }
                    if ("e" === d || "E" === d) {
                        b += S[B++];
                        d = S[B];
                        if ("+" === d || "-" === d) b += S[B++];
                        if (a(S.charCodeAt(B)))
                            for (; a(S.charCodeAt(B));) b += S[B++];
                        else K()
                    }
                    k(S.charCodeAt(B)) && K();
                    return {
                        type: L.NumericLiteral,
                        value: parseFloat(b),
                        lineNumber: ba,
                        lineStart: da,
                        start: c,
                        end: B
                    }
                }

                function y() {
                    V = null;
                    m();
                    G("Regular Expression language structures not supported")
                }

                function u() {
                    m();
                    y()
                }

                function w() {
                    var a;
                    a = M.tokens[M.tokens.length - 1];
                    if (!a) return u();
                    if ("Punctuator" === a.type) {
                        if ("]" === a.value) return n();
                        if (")" === a.value) return (a = M.tokens[M.openParenToken - 1]) && "Keyword" === a.type && ("if" === a.value.toLowerCase() || "while" === a.value.toLowerCase() || "for" === a.value.toLowerCase() || "with" === a.value.toLowerCase()) ? u() : n();
                        if ("}" ===
                            a.value) {
                            if (M.tokens[M.openCurlyToken - 3] && "Keyword" === M.tokens[M.openCurlyToken - 3].type) {
                                if (a = M.tokens[M.openCurlyToken - 4], !a) return n()
                            } else if (M.tokens[M.openCurlyToken - 4] && "Keyword" === M.tokens[M.openCurlyToken - 4].type) {
                                if (a = M.tokens[M.openCurlyToken - 5], !a) return u()
                            } else return n();
                            if (0 <= $a.indexOf(a.value)) return n()
                        }
                        return u()
                    }
                    return "Keyword" === a.type && "this" !== a.value ? u() : n()
                }

                function C() {
                    var b;
                    m();
                    if (B >= ka) return {
                        type: L.EOF,
                        lineNumber: ba,
                        lineStart: da,
                        start: B,
                        end: B
                    };
                    b = S.charCodeAt(B);
                    if (k(b)) {
                        var d;
                        b = B;
                        if (92 === S.charCodeAt(B)) d = s();
                        else a: {
                            var e;
                            for (d = B++; B < ka;) {
                                e = S.charCodeAt(B);
                                if (92 === e) {
                                    B = d;
                                    d = s();
                                    break a
                                }
                                if (l(e)) ++B;
                                else break
                            }
                            d = S.slice(d, B)
                        }
                        return {
                            type: 1 === d.length ? L.Identifier : c(d) ? L.Keyword : "null" === d.toLowerCase() ? L.NullLiteral : "true" === d.toLowerCase() || "false" === d.toLowerCase() ? L.BooleanLiteral : L.Identifier,
                            value: d,
                            lineNumber: ba,
                            lineStart: da,
                            start: b,
                            end: B
                        }
                    }
                    if (40 === b || 41 === b || 59 === b) return n();
                    if (39 === b || 34 === b) {
                        var r = "",
                            u, y, x;
                        e = !1;
                        var v, D;
                        v = ba;
                        D = da;
                        b = S[B];
                        p("'" === b || '"' === b, "String literal must starts with a quote");
                        d = B;
                        for (++B; B < ka;)
                            if (u = S[B++], u === b) {
                                b = "";
                                break
                            } else if ("\\" === u)
                            if (u = S[B++], !u || !h(u.charCodeAt(0))) switch (u) {
                            case "u":
                            case "x":
                                if ("{" === S[B]) {
                                    ++B;
                                    y = u = y = void 0;
                                    y = S[B];
                                    u = 0;
                                    for ("}" === y && K(); B < ka;) {
                                        y = S[B++];
                                        if (!g(y)) break;
                                        u = 16 * u + "0123456789abcdef".indexOf(y.toLowerCase())
                                    }(1114111 < u || "}" !== y) && K();
                                    65535 >= u ? u = String.fromCharCode(u) : (y = (u - 65536 >> 10) + 55296, u = String.fromCharCode(y, (u - 65536 & 1023) + 56320));
                                    r += u
                                } else x = B, (y = t(u)) ? r += y : (B = x, r += u);
                                break;
                            case "n":
                                r += "\n";
                                break;
                            case "r":
                                r += "\r";
                                break;
                            case "t":
                                r +=
                                    "\t";
                                break;
                            case "b":
                                r += "\b";
                                break;
                            case "f":
                                r += "\f";
                                break;
                            case "v":
                                r += "\x0B";
                                break;
                            default:
                                q(u) ? (y = "01234567".indexOf(u), 0 !== y && (e = !0), B < ka && q(S[B]) && (e = !0, y = 8 * y + "01234567".indexOf(S[B++]), 0 <= "0123".indexOf(u) && (B < ka && q(S[B])) && (y = 8 * y + "01234567".indexOf(S[B++]))), r += String.fromCharCode(y)) : r += u
                            } else ++ba, "\r" === u && "\n" === S[B] && ++B, da = B;
                            else if (h(u.charCodeAt(0))) break;
                        else r += u;
                        "" !== b && K();
                        return {
                            type: L.StringLiteral,
                            value: r,
                            octal: e,
                            startLineNumber: v,
                            startLineStart: D,
                            lineNumber: ba,
                            lineStart: da,
                            start: d,
                            end: B
                        }
                    }
                    return 46 === b ? a(S.charCodeAt(B + 1)) ? f() : n() : a(b) ? f() : M.tokenize && 47 === b ? w() : n()
                }

                function x() {
                    var a, b, c;
                    m();
                    a = {
                        start: {
                            line: ba,
                            column: B - da
                        }
                    };
                    b = C();
                    a.end = {
                        line: ba,
                        column: B - da
                    };
                    b.type !== L.EOF && (c = S.slice(b.start, b.end), a = {
                        type: Fa[b.type],
                        value: c,
                        range: [b.start, b.end],
                        loc: a
                    }, b.regex && (a.regex = {
                        pattern: b.regex.pattern,
                        flags: b.regex.flags
                    }), M.tokens.push(a));
                    return b
                }

                function v() {
                    var a;
                    a = V;
                    B = a.end;
                    ba = a.lineNumber;
                    da = a.lineStart;
                    V = "undefined" !== typeof M.tokens ? x() : C();
                    B = a.end;
                    ba = a.lineNumber;
                    da = a.lineStart;
                    return a
                }

                function A() {
                    var a, b, c;
                    a = B;
                    b = ba;
                    c = da;
                    V = "undefined" !== typeof M.tokens ? x() : C();
                    B = a;
                    ba = b;
                    da = c
                }

                function z() {
                    this.line = ba;
                    this.column = B - da
                }

                function H() {
                    this.start = new z;
                    this.end = null
                }

                function D(a) {
                    this.start = a.type === L.StringLiteral ? {
                        line: a.startLineNumber,
                        column: a.start - a.startLineStart
                    } : {
                        line: a.lineNumber,
                        column: a.start - a.lineStart
                    };
                    this.end = null
                }

                function F() {
                    B = V.start;
                    V.type === L.StringLiteral ? (ba = V.startLineNumber, da = V.startLineStart) : (ba = V.lineNumber, da = V.lineStart);
                    M.range && (this.range = [B,
0]);
                    M.loc && (this.loc = new H)
                }

                function E(a) {
                    M.range && (this.range = [a.start, 0]);
                    M.loc && (this.loc = new D(a))
                }

                function Q() {
                    var a, b, c, d;
                    a = B;
                    b = ba;
                    c = da;
                    m();
                    d = ba !== b;
                    B = a;
                    ba = b;
                    da = c;
                    return d
                }

                function R(a, b, c) {
                    var d = Error("Line " + a + ": " + c);
                    d.index = b;
                    d.lineNumber = a;
                    d.column = b - da + 1;
                    d.description = c;
                    return d
                }

                function G(a) {
                    var b, c;
                    b = Array.prototype.slice.call(arguments, 1);
                    c = a.replace(/%(\d)/g, function (a, c) {
                        p(c < b.length, "Message reference must be in range");
                        return b[c]
                    });
                    throw R(ba, B, c);
                }

                function I(a) {
                    var b, c;
                    b = Array.prototype.slice.call(arguments,
                        1);
                    c = a.replace(/%(\d)/g, function (a, c) {
                        p(c < b.length, "Message reference must be in range");
                        return b[c]
                    });
                    c = R(ba, B, c);
                    if (M.errors) M.errors.push(c);
                    else throw c;
                }

                function P(a, b) {
                    var c = ca.UnexpectedToken;
                    a && (c = b ? b : a.type === L.EOF ? ca.UnexpectedEOS : a.type === L.Identifier ? ca.UnexpectedIdentifier : a.type === L.NumericLiteral ? ca.UnexpectedNumber : a.type === L.StringLiteral ? ca.UnexpectedString : ca.UnexpectedToken, a.type === L.Keyword && fa && e(a.value) && (c = ca.StrictReservedWord));
                    c = c.replace("%0", a ? a.value : "ILLEGAL");
                    return a &&
                        "number" === typeof a.lineNumber ? R(a.lineNumber, a.start, c) : R(ba, B, c)
                }

                function K(a, b) {
                    throw P(a, b);
                }

                function J(a, b) {
                    var c = P(a, b);
                    if (M.errors) M.errors.push(c);
                    else throw c;
                }

                function O(a) {
                    var b = v();
                    (b.type !== L.Punctuator || b.value !== a) && K(b)
                }

                function W() {
                    var a;
                    M.errors ? (a = V, a.type === L.Punctuator && "," === a.value ? v() : a.type === L.Punctuator && ";" === a.value ? (v(), J(a)) : J(a, ca.UnexpectedToken)) : O(",")
                }

                function T(a) {
                    var b = v();
                    (b.type !== L.Keyword || b.value.toLowerCase() !== a.toLowerCase()) && K(b)
                }

                function N(a) {
                    return V.type ===
                        L.Punctuator && V.value === a
                }

                function Y(a) {
                    return V.type === L.Keyword && V.value.toLowerCase() === a.toLowerCase()
                }

                function Z() {
                    var a;
                    59 === S.charCodeAt(B) || N(";") ? v() : (a = ba, m(), ba === a && V.type !== L.EOF && !N("}") && K(V))
                }

                function ga(a) {
                    return a.type === $.Identifier || a.type === $.MemberExpression
                }

                function aa(a, b) {
                    var c, d, f = new F;
                    c = fa;
                    d = Oa();
                    fa = c;
                    return f.finishFunctionExpression(null, a, [], d)
                }

                function ea() {
                    var a, b;
                    a = fa;
                    fa = !0;
                    b = jb();
                    b = aa(b.params);
                    fa = a;
                    return b
                }

                function ua() {
                    var a, b = new F;
                    a = v();
                    return a.type === L.StringLiteral ||
                        a.type === L.NumericLiteral ? (fa && a.octal && J(a, ca.StrictOctalLiteral), b.finishLiteral(a)) : b.finishIdentifier(a.value)
                }

                function xa() {
                    var a, b, c, d = new F;
                    a = V;
                    if (a.type === L.Identifier) return b = ua(), "get" === a.value && !N(":") && !N("(") ? (b = ua(), O("("), O(")"), a = aa([]), d.finishProperty("get", b, a, !1, !1)) : "set" === a.value && !N(":") && !N("(") ? (b = ua(), O("("), a = V, a.type !== L.Identifier ? (O(")"), J(a), a = aa([])) : (c = [Ca()], O(")"), a = aa(c, a)), d.finishProperty("set", b, a, !1, !1)) : N(":") ? (v(), a = wa(), d.finishProperty("init", b, a, !1, !1)) : N("(") ? (a = ea(), d.finishProperty("init", b, a, !0, !1)) : d.finishProperty("init", b, b, !1, !0);
                    if (a.type === L.EOF || a.type === L.Punctuator) K(a);
                    else {
                        b = ua();
                        if (N(":")) return v(), a = wa(), d.finishProperty("init", b, a, !1, !1);
                        if (N("(")) return a = ea(), d.finishProperty("init", b, a, !0, !1);
                        K(v())
                    }
                }

                function ha(a) {
                    var b = [],
                        c, d, f = {},
                        e = String,
                        g = new F;
                    for (!0 !== a && O("{"); !N("}");) a = xa(), c = a.key.type === $.Identifier ? a.key.name : e(a.key.value), d = "init" === a.kind ? La.Data : "get" === a.kind ? La.Get : La.Set, c = "$" + c, Object.prototype.hasOwnProperty.call(f,
                        c) ? (f[c] === La.Data ? fa && d === La.Data ? I(ca.StrictDuplicateProperty) : d !== La.Data && I(ca.AccessorDataProperty) : d === La.Data ? I(ca.AccessorDataProperty) : f[c] & d && I(ca.AccessorGetSet), f[c] |= d) : f[c] = d, b.push(a), N("}") || W();
                    O("}");
                    return g.finishObjectExpression(b)
                }

                function pa() {
                    var a, b, c, d;
                    if (N("(")) return O("("), N(")") ? (v(), b = Ka.ArrowParameterPlaceHolder) : (++X.parenthesisCount, b = ja(), O(")")), b;
                    if (N("[")) {
                        b = [];
                        var f = new F;
                        for (O("["); !N("]");) N(",") ? (v(), b.push(null)) : (b.push(wa()), N("]") || O(","));
                        v();
                        return f.finishArrayExpression(b)
                    }
                    if (N("{")) return ha();
                    a = V.type;
                    d = new F;
                    if (a === L.Identifier) c = d.finishIdentifier(v().value);
                    else if (a === L.StringLiteral || a === L.NumericLiteral) fa && V.octal && J(V, ca.StrictOctalLiteral), c = d.finishLiteral(v());
                    else if (a === L.Keyword) {
                        if (Y("function")) {
                            d = null;
                            var g, h = [],
                                n = [],
                                m;
                            a = new F;
                            T("function");
                            N("(") || (c = V, d = Ca(), !fa && e(c.value) && (b = c, f = ca.StrictReservedWord));
                            g = jb(b);
                            h = g.params;
                            n = g.defaults;
                            c = g.stricted;
                            b = g.firstRestricted;
                            g.message && (f = g.message);
                            m = fa;
                            g = Oa();
                            fa && b && K(b, f);
                            fa && c && J(c, f);
                            fa = m;
                            return a.finishFunctionExpression(d,
                                h, n, g)
                        }
                        Y("this") ? (v(), c = d.finishThisExpression()) : K(v())
                    } else a === L.BooleanLiteral ? (b = v(), b.value = "true" === b.value.toLowerCase(), c = d.finishLiteral(b)) : a === L.NullLiteral ? (b = v(), b.value = null, c = d.finishLiteral(b)) : N("/") || N("/\x3d") ? (c = "undefined" !== typeof M.tokens ? d.finishLiteral(u()) : d.finishLiteral(y()), A()) : K(v());
                    return c
                }

                function oa() {
                    var a = [];
                    O("(");
                    if (!N(")"))
                        for (; B < ka;) {
                            a.push(wa());
                            if (N(")")) break;
                            W()
                        }
                    O(")");
                    return a
                }

                function na() {
                    O(".");
                    var a, b = new F;
                    a = v();
                    a.type === L.Identifier || (a.type ===
                        L.Keyword || a.type === L.BooleanLiteral || a.type === L.NullLiteral) || K(a);
                    return b.finishIdentifier(a.value)
                }

                function ia() {
                    var a;
                    O("[");
                    a = ja();
                    O("]");
                    return a
                }

                function ma() {
                    var a, b, c = new F;
                    T("new");
                    var d;
                    p(X.allowIn, "callee of new expression always allow in keyword.");
                    d = V;
                    for (a = Y("new") ? ma() : pa();;)
                        if (N("[")) b = ia(), a = (new E(d)).finishMemberExpression("[", a, b);
                        else if (N(".")) b = na(), a = (new E(d)).finishMemberExpression(".", a, b);
                    else break;
                    b = N("(") ? oa() : [];
                    return c.finishNewExpression(a, b)
                }

                function ya() {
                    var a,
                        b, c = V,
                        d, f = X.allowIn;
                    b = V;
                    X.allowIn = !0;
                    for (a = Y("new") ? ma() : pa();;)
                        if (N(".")) d = na(), a = (new E(b)).finishMemberExpression(".", a, d);
                        else if (N("(")) d = oa(), a = (new E(b)).finishCallExpression(a, d);
                    else if (N("[")) d = ia(), a = (new E(b)).finishMemberExpression("[", a, d);
                    else break;
                    X.allowIn = f;
                    if (V.type === L.Punctuator && (N("++") || N("--")) && !Q()) ga(a) || I(ca.InvalidLHSInAssignment), b = v(), a = (new E(c)).finishPostfixExpression(b.value, a);
                    return a
                }

                function va() {
                    var a, b, c;
                    V.type !== L.Punctuator && V.type !== L.Keyword ? b = ya() : N("++") ||
                        N("--") ? (c = V, a = v(), b = va(), ga(b) || I(ca.InvalidLHSInAssignment), b = (new E(c)).finishUnaryExpression(a.value, b)) : N("+") || N("-") || N("~") || N("!") ? (c = V, a = v(), b = va(), b = (new E(c)).finishUnaryExpression(a.value, b)) : Y("delete") || Y("void") || Y("typeof") ? (c = V, a = v(), b = va(), b = (new E(c)).finishUnaryExpression(a.value, b), fa && ("delete" === b.operator && b.argument.type === $.Identifier) && I(ca.StrictDelete)) : b = ya();
                    return b
                }

                function Ba(a, b) {
                    var c = 0;
                    if (a.type !== L.Punctuator && a.type !== L.Keyword) return 0;
                    switch (a.value) {
                    case "||":
                        c =
                            1;
                        break;
                    case "\x26\x26":
                        c = 2;
                        break;
                    case "|":
                        c = 3;
                        break;
                    case "^":
                        c = 4;
                        break;
                    case "\x26":
                        c = 5;
                        break;
                    case "\x3d\x3d":
                    case "!\x3d":
                    case "\x3d\x3d\x3d":
                    case "!\x3d\x3d":
                        c = 6;
                        break;
                    case "\x3c":
                    case "\x3e":
                    case "\x3c\x3d":
                    case "\x3e\x3d":
                    case "instanceof":
                        c = 7;
                        break;
                    case "in":
                        c = b ? 7 : 0;
                        break;
                    case "\x3c\x3c":
                    case "\x3e\x3e":
                    case "\x3e\x3e\x3e":
                        c = 8;
                        break;
                    case "+":
                    case "-":
                        c = 9;
                        break;
                    case "*":
                    case "/":
                    case "%":
                        c = 11
                    }
                    return c
                }

                function Ja() {
                    var a, b, c, d, f, e;
                    a = V;
                    b = va();
                    if (b === Ka.ArrowParameterPlaceHolder) return b;
                    c = V;
                    d =
                        Ba(c, X.allowIn);
                    if (0 === d) return b;
                    c.prec = d;
                    v();
                    a = [a, V];
                    e = va();
                    for (f = [b, c, e]; 0 < (d = Ba(V, X.allowIn));) {
                        for (; 2 < f.length && d <= f[f.length - 2].prec;) e = f.pop(), c = f.pop().value, b = f.pop(), a.pop(), b = (new E(a[a.length - 1])).finishBinaryExpression(c, b, e), f.push(b);
                        c = v();
                        c.prec = d;
                        f.push(c);
                        a.push(V);
                        b = va();
                        f.push(b)
                    }
                    d = f.length - 1;
                    b = f[d];
                    for (a.pop(); 1 < d;) b = (new E(a.pop())).finishBinaryExpression(f[d - 1].value, f[d - 2], b), d -= 2;
                    return b
                }

                function qa(a) {
                    var b, c, d, f, e, g, h;
                    f = [];
                    e = [];
                    g = 0;
                    h = {
                        paramSet: {}
                    };
                    b = 0;
                    for (c = a.length; b <
                        c; b += 1)
                        if (d = a[b], d.type === $.Identifier) f.push(d), e.push(null), Va(h, d, d.name);
                        else if (d.type === $.AssignmentExpression) f.push(d.left), e.push(d.right), ++g, Va(h, d.left, d.left.name);
                    else return null;
                    h.message === ca.StrictParamDupe && (a = fa ? h.stricted : h.firstRestricted, K(a, h.message));
                    0 === g && (e = []);
                    return {
                        params: f,
                        defaults: e,
                        rest: null,
                        stricted: h.stricted,
                        firstRestricted: h.firstRestricted,
                        message: h.message
                    }
                }

                function wa() {
                    var a, b, c, d;
                    a = X.parenthesisCount;
                    d = V;
                    var f, e, g;
                    g = V;
                    b = Ja();
                    b !== Ka.ArrowParameterPlaceHolder &&
                        N("?") && (v(), f = X.allowIn, X.allowIn = !0, e = wa(), X.allowIn = f, O(":"), f = wa(), b = (new E(g)).finishConditionalExpression(b, e, f));
                    if (b === Ka.ArrowParameterPlaceHolder || N("\x3d\x3e"))
                        if (X.parenthesisCount === a || X.parenthesisCount === a + 1)
                            if (b.type === $.Identifier ? c = qa([b]) : b.type === $.AssignmentExpression ? c = qa([b]) : b.type === $.SequenceExpression ? c = qa(b.expressions) : b === Ka.ArrowParameterPlaceHolder && (c = qa([])), c) return a = c, d = new E(d), O("\x3d\x3e"), c = fa, b = N("{") ? Oa() : wa(), fa && a.firstRestricted && K(a.firstRestricted, a.message),
                                fa && a.stricted && J(a.stricted, a.message), fa = c, d.finishArrowFunctionExpression(a.params, a.defaults, b, b.type !== $.BlockStatement);
                    V.type !== L.Punctuator ? a = !1 : (a = V.value, a = "\x3d" === a || "*\x3d" === a || "/\x3d" === a || "%\x3d" === a || "+\x3d" === a || "-\x3d" === a || "\x3c\x3c\x3d" === a || "\x3e\x3e\x3d" === a || "\x3e\x3e\x3e\x3d" === a || "\x26\x3d" === a || "^\x3d" === a || "|\x3d" === a);
                    a && (ga(b) || I(ca.InvalidLHSInAssignment), a = v(), c = wa(), b = (new E(d)).finishAssignmentExpression(a.value, b, c));
                    return b
                }

                function ja() {
                    var a, b = V;
                    a = wa();
                    if (N(",")) {
                        for (a = [a]; B < ka && N(",");) v(), a.push(wa());
                        a = (new E(b)).finishSequenceExpression(a)
                    }
                    return a
                }

                function Ca() {
                    var a, b = new F;
                    a = v();
                    a.type !== L.Identifier && (fa && a.type === L.Keyword && e(a.value) ? J(a, ca.StrictReservedWord) : K(a));
                    return b.finishIdentifier(a.value)
                }

                function Ma(a) {
                    var b = null,
                        c, d = new F;
                    c = Ca();
                    "const" === a ? (O("\x3d"), b = wa()) : N("\x3d") && (v(), b = wa());
                    return d.finishVariableDeclarator(c, b)
                }

                function Pa(a) {
                    var b = [];
                    do {
                        b.push(Ma(a));
                        if (!N(",")) break;
                        v()
                    } while (B < ka);
                    return b
                }

                function Ha(a) {
                    var b = V.type,
                        c, d;
                    b ===
                        L.EOF && K(V);
                    if (b === L.Punctuator && "{" === V.value) {
                        if (a) {
                            O("{");
                            var f = V;
                            a = B;
                            c = ba;
                            d = da;
                            v();
                            b = N(":");
                            V = f;
                            B = a;
                            ba = c;
                            da = d;
                            if ((V.type === L.Identifier || V.type === L.StringLiteral) && b) return ha(!0);
                            a = new F;
                            for (c = []; B < ka && !N("}");) {
                                d = Za();
                                if ("undefined" === typeof d) break;
                                c.push(d)
                            }
                            O("}");
                            return a.finishBlockStatement(c)
                        }
                        return ha()
                    }
                    a = new F;
                    if (b === L.Punctuator) switch (V.value) {
                        case ";":
                            return a = new F, O(";"), a.finishEmptyStatement();
                        case "(":
                            return c = ja(), Z(), a.finishExpressionStatement(c)
                        } else if (b === L.Keyword) switch (V.value.toLowerCase()) {
                        case "break":
                            return c =
                                null, T("break"), 59 === S.charCodeAt(B) ? (v(), !X.inIteration && !X.inSwitch && G(ca.IllegalBreak), a = a.finishBreakStatement(null)) : Q() ? (!X.inIteration && !X.inSwitch && G(ca.IllegalBreak), a = a.finishBreakStatement(null)) : (V.type === L.Identifier && (c = Ca(), d = "$" + c.name, Object.prototype.hasOwnProperty.call(X.labelSet, d) || G(ca.UnknownLabel, c.name)), Z(), null === c && (!X.inIteration && !X.inSwitch) && G(ca.IllegalBreak), a = a.finishBreakStatement(c)), a;
                        case "continue":
                            return c = null, T("continue"), 59 === S.charCodeAt(B) ? (v(), X.inIteration ||
                                G(ca.IllegalContinue), a = a.finishContinueStatement(null)) : Q() ? (X.inIteration || G(ca.IllegalContinue), a = a.finishContinueStatement(null)) : (V.type === L.Identifier && (c = Ca(), d = "$" + c.name, Object.prototype.hasOwnProperty.call(X.labelSet, d) || G(ca.UnknownLabel, c.name)), Z(), null === c && !X.inIteration && G(ca.IllegalContinue), a = a.finishContinueStatement(c)), a;
                        case "for":
                            var e, g, h;
                            g = X.allowIn;
                            e = b = f = null;
                            T("for");
                            O("(");
                            if (N(";")) v();
                            else {
                                if (Y("var")) {
                                    X.allowIn = !1;
                                    var n = new F;
                                    e = v();
                                    h = Pa();
                                    e = n.finishVariableDeclaration(h,
                                        e.value);
                                    X.allowIn = g;
                                    1 === e.declarations.length && Y("in") && (v(), c = e, d = ja(), e = null)
                                } else X.allowIn = !1, e = ja(), X.allowIn = g, Y("in") && (ga(e) || I(ca.InvalidLHSInForIn), v(), c = e, d = ja(), e = null);
                                "undefined" === typeof c && O(";")
                            }
                            "undefined" === typeof c && (N(";") || (b = ja()), O(";"), N(")") || (f = ja()));
                            O(")");
                            h = X.inIteration;
                            X.inIteration = !0;
                            g = Ha(!0);
                            X.inIteration = h;
                            return "undefined" === typeof c ? a.finishForStatement(e, b, f, g) : a.finishForInStatement(c, d, g);
                        case "function":
                            return Ya(a);
                        case "if":
                            return T("if"), O("("), c = ja(),
                                O(")"), d = Ha(!0), Y("else") ? (v(), b = Ha(!0)) : b = null, a.finishIfStatement(c, d, b);
                        case "return":
                            return c = null, T("return"), X.inFunctionBody || I(ca.IllegalReturn), 32 === S.charCodeAt(B) && k(S.charCodeAt(B + 1)) ? (c = ja(), Z(), a = a.finishReturnStatement(c)) : Q() ? a = a.finishReturnStatement(null) : (N(";") || !N("}") && V.type !== L.EOF && (c = ja()), Z(), a = a.finishReturnStatement(c)), a;
                        case "var":
                            return T("var"), c = Pa(), Z(), a.finishVariableDeclaration(c, "var")
                        }
                        c = ja();
                    if (c.type === $.Identifier && N(":")) return v(), b = "$" + c.name, Object.prototype.hasOwnProperty.call(X.labelSet,
                        b) && G(ca.Redeclaration, "Label", c.name), X.labelSet[b] = !0, d = Ha(!1), delete X.labelSet[b], a.finishLabeledStatement(c, d);
                    Z();
                    return a.finishExpressionStatement(c)
                }

                function Oa() {
                    var a, b = [],
                        c, d, f, e, g, h = new F;
                    for (O("{"); B < ka && V.type === L.StringLiteral;) {
                        c = V;
                        a = Za();
                        b.push(a);
                        if (a.expression.type !== $.Literal) break;
                        a = S.slice(c.start + 1, c.end - 1);
                        "use strict" === a ? (fa = !0, d && J(d, ca.StrictOctalLiteral)) : !d && c.octal && (d = c)
                    }
                    c = X.labelSet;
                    d = X.inIteration;
                    f = X.inSwitch;
                    e = X.inFunctionBody;
                    g = X.parenthesizedCount;
                    X.labelSet = {};
                    X.inIteration = !1;
                    X.inSwitch = !1;
                    X.inFunctionBody = !0;
                    for (X.parenthesizedCount = 0; B < ka && !N("}");) {
                        a = Za();
                        if ("undefined" === typeof a) break;
                        b.push(a)
                    }
                    O("}");
                    X.labelSet = c;
                    X.inIteration = d;
                    X.inSwitch = f;
                    X.inFunctionBody = e;
                    X.parenthesizedCount = g;
                    return h.finishBlockStatement(b)
                }

                function Va(a, b, c) {
                    var d = "$" + c;
                    fa ? Object.prototype.hasOwnProperty.call(a.paramSet, d) && (a.stricted = b, a.message = ca.StrictParamDupe) : a.firstRestricted || (e(c) ? (a.firstRestricted = b, a.message = ca.StrictReservedWord) : Object.prototype.hasOwnProperty.call(a.paramSet,
                        d) && (a.firstRestricted = b, a.message = ca.StrictParamDupe));
                    a.paramSet[d] = !0
                }

                function jb(a) {
                    a = {
                        params: [],
                        defaultCount: 0,
                        defaults: [],
                        firstRestricted: a
                    };
                    O("(");
                    if (!N(")"))
                        for (a.paramSet = {}; B < ka;) {
                            var b = a,
                                c = void 0,
                                d = void 0,
                                f = void 0,
                                c = V,
                                d = Ca();
                            Va(b, c, c.value);
                            N("\x3d") && (v(), f = wa(), ++b.defaultCount);
                            b.params.push(d);
                            b.defaults.push(f);
                            if (N(")")) break;
                            O(",")
                        }
                    O(")");
                    0 === a.defaultCount && (a.defaults = []);
                    return {
                        params: a.params,
                        defaults: a.defaults,
                        stricted: a.stricted,
                        firstRestricted: a.firstRestricted,
                        message: a.message
                    }
                }

                function Ya() {
                    var a, b = [],
                        c = [],
                        d, f, g, h, n, m = new F;
                    T("function");
                    b = V;
                    a = Ca();
                    !fa && e(b.value) && (g = b, h = ca.StrictReservedWord);
                    d = jb(g);
                    b = d.params;
                    c = d.defaults;
                    f = d.stricted;
                    g = d.firstRestricted;
                    d.message && (h = d.message);
                    n = fa;
                    d = Oa();
                    fa && g && K(g, h);
                    fa && f && J(f, h);
                    fa = n;
                    return m.finishFunctionDeclaration(a, b, c, d)
                }

                function Za() {
                    if (V.type === L.Keyword) switch (V.value) {
                        default: return "function" === V.value.toLowerCase() ? Ya() : Ha(!1)
                    }
                    if (V.type !== L.EOF) return Ha(!1)
                }

                function Ia() {
                    var a, b, c, d = [];
                    for (a = 0; a < M.tokens.length; ++a) b =
                        M.tokens[a], c = {
                            type: b.type,
                            value: b.value
                        }, b.regex && (c.regex = {
                            pattern: b.regex.pattern,
                            flags: b.regex.flags
                        }), M.range && (c.range = b.range), M.loc && (c.loc = b.loc), d.push(c);
                    M.tokens = d
                }
                var L, Fa, $a, $, Ka, La, ca, sa, S, fa, B, ba, da, ka, V, X, M;
                L = {
                    BooleanLiteral: 1,
                    EOF: 2,
                    Identifier: 3,
                    Keyword: 4,
                    NullLiteral: 5,
                    NumericLiteral: 6,
                    Punctuator: 7,
                    StringLiteral: 8,
                    RegularExpression: 9
                };
                Fa = {};
                Fa[L.BooleanLiteral] = "Boolean";
                Fa[L.EOF] = "\x3cend\x3e";
                Fa[L.Identifier] = "Identifier";
                Fa[L.Keyword] = "Keyword";
                Fa[L.NullLiteral] = "Null";
                Fa[L.NumericLiteral] =
                    "Numeric";
                Fa[L.Punctuator] = "Punctuator";
                Fa[L.StringLiteral] = "String";
                Fa[L.RegularExpression] = "RegularExpression";
                $a = "( { [ in typeof instanceof new return case delete throw void \x3d +\x3d -\x3d *\x3d /\x3d %\x3d \x3c\x3c\x3d \x3e\x3e\x3d \x3e\x3e\x3e\x3d \x26\x3d |\x3d ^\x3d , + - * / % ++ -- \x3c\x3c \x3e\x3e \x3e\x3e\x3e \x26 | ^ ! ~ \x26\x26 || ? : \x3d\x3d\x3d \x3d\x3d \x3e\x3d \x3c\x3d \x3c \x3e !\x3d !\x3d\x3d".split(" ");
                $ = {
                    AssignmentExpression: "AssignmentExpression",
                    ArrayExpression: "ArrayExpression",
                    BlockStatement: "BlockStatement",
                    BinaryExpression: "BinaryExpression",
                    BreakStatement: "BreakStatement",
                    CallExpression: "CallExpression",
                    ConditionalExpression: "ConditionalExpression",
                    ContinueStatement: "ContinueStatement",
                    DoWhileStatement: "DoWhileStatement",
                    EmptyStatement: "EmptyStatement",
                    ExpressionStatement: "ExpressionStatement",
                    ForStatement: "ForStatement",
                    ForInStatement: "ForInStatement",
                    FunctionDeclaration: "FunctionDeclaration",
                    FunctionExpression: "FunctionExpression",
                    Identifier: "Identifier",
                    IfStatement: "IfStatement",
                    Literal: "Literal",
                    LogicalExpression: "LogicalExpression",
                    MemberExpression: "MemberExpression",
                    ObjectExpression: "ObjectExpression",
                    Program: "Program",
                    Property: "Property",
                    ReturnStatement: "ReturnStatement",
                    UnaryExpression: "UnaryExpression",
                    UpdateExpression: "UpdateExpression",
                    VariableDeclaration: "VariableDeclaration",
                    VariableDeclarator: "VariableDeclarator"
                };
                Ka = {
                    ArrowParameterPlaceHolder: {
                        type: "ArrowParameterPlaceHolder"
                    }
                };
                La = {
                    Data: 1,
                    Get: 2,
                    Set: 4
                };
                ca = {
                    UnexpectedToken: "Unexpected token %0",
                    UnexpectedNumber: "Unexpected number",
                    UnexpectedString: "Unexpected string",
                    UnexpectedIdentifier: "Unexpected identifier",
                    UnexpectedReserved: "Unexpected reserved word",
                    UnexpectedEOS: "Unexpected end of input",
                    NewlineAfterThrow: "Illegal newline after throw",
                    InvalidRegExp: "Invalid regular expression",
                    UnterminatedRegExp: "Invalid regular expression: missing /",
                    InvalidLHSInAssignment: "Invalid left-hand side in assignment",
                    InvalidLHSInForIn: "Invalid left-hand side in for-in",
                    MultipleDefaultsInSwitch: "More than one default clause in switch statement",
                    NoCatchOrFinally: "Missing catch or finally after try",
                    UnknownLabel: "Undefined label '%0'",
                    Redeclaration: "%0 '%1' has already been declared",
                    IllegalContinue: "Illegal continue statement",
                    IllegalBreak: "Illegal break statement",
                    IllegalReturn: "Illegal return statement",
                    StrictModeWith: "Strict mode code may not include a with statement",
                    StrictCatchVariable: "Catch variable may not be eval or arguments in strict mode",
                    StrictVarName: "Variable name may not be eval or arguments in strict mode",
                    StrictParamName: "Parameter name eval or arguments is not allowed in strict mode",
                    StrictParamDupe: "Strict mode function may not have duplicate parameter names",
                    StrictFunctionName: "Function name may not be eval or arguments in strict mode",
                    StrictOctalLiteral: "Octal literals are not allowed in strict mode.",
                    StrictDelete: "Delete of an unqualified identifier in strict mode.",
                    StrictDuplicateProperty: "Duplicate data property in object literal not allowed in strict mode",
                    AccessorDataProperty: "Object literal may not have data and accessor property with the same name",
                    AccessorGetSet: "Object literal may not have multiple get/set accessors with the same name",
                    StrictLHSAssignment: "Assignment to eval or arguments is not allowed in strict mode",
                    StrictLHSPostfix: "Postfix increment/decrement may not have eval or arguments operand in strict mode",
                    StrictLHSPrefix: "Prefix increment/decrement may not have eval or arguments operand in strict mode",
                    StrictReservedWord: "Use of future reserved word in strict mode"
                };
                sa = {
                    NonAsciiIdentifierStart: RegExp("[\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0-\u08b2\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua7ad\ua7b0\ua7b1\ua7f7-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab5f\uab64\uab65\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]"),
                    NonAsciiIdentifierPart: RegExp("[\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0300-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u0483-\u0487\u048a-\u052f\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u05d0-\u05ea\u05f0-\u05f2\u0610-\u061a\u0620-\u0669\u066e-\u06d3\u06d5-\u06dc\u06df-\u06e8\u06ea-\u06fc\u06ff\u0710-\u074a\u074d-\u07b1\u07c0-\u07f5\u07fa\u0800-\u082d\u0840-\u085b\u08a0-\u08b2\u08e4-\u0963\u0966-\u096f\u0971-\u0983\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bc-\u09c4\u09c7\u09c8\u09cb-\u09ce\u09d7\u09dc\u09dd\u09df-\u09e3\u09e6-\u09f1\u0a01-\u0a03\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a59-\u0a5c\u0a5e\u0a66-\u0a75\u0a81-\u0a83\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abc-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ad0\u0ae0-\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3c-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b5c\u0b5d\u0b5f-\u0b63\u0b66-\u0b6f\u0b71\u0b82\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd0\u0bd7\u0be6-\u0bef\u0c00-\u0c03\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c58\u0c59\u0c60-\u0c63\u0c66-\u0c6f\u0c81-\u0c83\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbc-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0cde\u0ce0-\u0ce3\u0ce6-\u0cef\u0cf1\u0cf2\u0d01-\u0d03\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d-\u0d44\u0d46-\u0d48\u0d4a-\u0d4e\u0d57\u0d60-\u0d63\u0d66-\u0d6f\u0d7a-\u0d7f\u0d82\u0d83\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0de6-\u0def\u0df2\u0df3\u0e01-\u0e3a\u0e40-\u0e4e\u0e50-\u0e59\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb9\u0ebb-\u0ebd\u0ec0-\u0ec4\u0ec6\u0ec8-\u0ecd\u0ed0-\u0ed9\u0edc-\u0edf\u0f00\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e-\u0f47\u0f49-\u0f6c\u0f71-\u0f84\u0f86-\u0f97\u0f99-\u0fbc\u0fc6\u1000-\u1049\u1050-\u109d\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u135d-\u135f\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176c\u176e-\u1770\u1772\u1773\u1780-\u17d3\u17d7\u17dc\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u1820-\u1877\u1880-\u18aa\u18b0-\u18f5\u1900-\u191e\u1920-\u192b\u1930-\u193b\u1946-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u19d0-\u19d9\u1a00-\u1a1b\u1a20-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1aa7\u1ab0-\u1abd\u1b00-\u1b4b\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1bf3\u1c00-\u1c37\u1c40-\u1c49\u1c4d-\u1c7d\u1cd0-\u1cd2\u1cd4-\u1cf6\u1cf8\u1cf9\u1d00-\u1df5\u1dfc-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u200c\u200d\u203f\u2040\u2054\u2071\u207f\u2090-\u209c\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d7f-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2de0-\u2dff\u2e2f\u3005-\u3007\u3021-\u302f\u3031-\u3035\u3038-\u303c\u3041-\u3096\u3099\u309a\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua62b\ua640-\ua66f\ua674-\ua67d\ua67f-\ua69d\ua69f-\ua6f1\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua7ad\ua7b0\ua7b1\ua7f7-\ua827\ua840-\ua873\ua880-\ua8c4\ua8d0-\ua8d9\ua8e0-\ua8f7\ua8fb\ua900-\ua92d\ua930-\ua953\ua960-\ua97c\ua980-\ua9c0\ua9cf-\ua9d9\ua9e0-\ua9fe\uaa00-\uaa36\uaa40-\uaa4d\uaa50-\uaa59\uaa60-\uaa76\uaa7a-\uaac2\uaadb-\uaadd\uaae0-\uaaef\uaaf2-\uaaf6\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab5f\uab64\uab65\uabc0-\uabea\uabec\uabed\uabf0-\uabf9\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe00-\ufe0f\ufe20-\ufe2d\ufe33\ufe34\ufe4d-\ufe4f\ufe70-\ufe74\ufe76-\ufefc\uff10-\uff19\uff21-\uff3a\uff3f\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]")
                };
                E.prototype = F.prototype = {
                    processComment: function () {
                        var a, b, c, d = M.bottomRightStack,
                            f, e, g = d[d.length - 1];
                        if (!(this.type === $.Program && 0 < this.body.length)) {
                            if (0 < M.trailingComments.length) {
                                c = [];
                                for (f = M.trailingComments.length - 1; 0 <= f; --f) e = M.trailingComments[f], e.range[0] >= this.range[1] && (c.unshift(e), M.trailingComments.splice(f, 1));
                                M.trailingComments = []
                            } else g && (g.trailingComments && g.trailingComments[0].range[0] >= this.range[1]) && (c = g.trailingComments, delete g.trailingComments);
                            if (g)
                                for (; g && g.range[0] >=
                                    this.range[0];) a = g, g = d.pop();
                            if (a) a.leadingComments && a.leadingComments[a.leadingComments.length - 1].range[1] <= this.range[0] && (this.leadingComments = a.leadingComments, a.leadingComments = void 0);
                            else if (0 < M.leadingComments.length) {
                                b = [];
                                for (f = M.leadingComments.length - 1; 0 <= f; --f) e = M.leadingComments[f], e.range[1] <= this.range[0] && (b.unshift(e), M.leadingComments.splice(f, 1))
                            }
                            b && 0 < b.length && (this.leadingComments = b);
                            c && 0 < c.length && (this.trailingComments = c);
                            d.push(this)
                        }
                    },
                    finish: function () {
                        M.range && (this.range[1] =
                            B);
                        M.loc && (this.loc.end = new z, M.source && (this.loc.source = M.source));
                        M.attachComment && this.processComment()
                    },
                    finishArrayExpression: function (a) {
                        this.type = $.ArrayExpression;
                        this.elements = a;
                        this.finish();
                        return this
                    },
                    finishAssignmentExpression: function (a, b, c) {
                        this.type = $.AssignmentExpression;
                        this.operator = a;
                        this.left = b;
                        this.right = c;
                        this.finish();
                        return this
                    },
                    finishBinaryExpression: function (a, b, c) {
                        this.type = "||" === a || "\x26\x26" === a ? $.LogicalExpression : $.BinaryExpression;
                        this.operator = a;
                        this.left = b;
                        this.right =
                            c;
                        this.finish();
                        return this
                    },
                    finishBlockStatement: function (a) {
                        this.type = $.BlockStatement;
                        this.body = a;
                        this.finish();
                        return this
                    },
                    finishBreakStatement: function (a) {
                        this.type = $.BreakStatement;
                        this.label = a;
                        this.finish();
                        return this
                    },
                    finishCallExpression: function (a, b) {
                        this.type = $.CallExpression;
                        this.callee = a;
                        this.arguments = b;
                        this.finish();
                        return this
                    },
                    finishConditionalExpression: function (a, b, c) {
                        this.type = $.ConditionalExpression;
                        this.test = a;
                        this.consequent = b;
                        this.alternate = c;
                        this.finish();
                        return this
                    },
                    finishContinueStatement: function (a) {
                        this.type =
                            $.ContinueStatement;
                        this.label = a;
                        this.finish();
                        return this
                    },
                    finishEmptyStatement: function () {
                        this.type = $.EmptyStatement;
                        this.finish();
                        return this
                    },
                    finishExpressionStatement: function (a) {
                        this.type = $.ExpressionStatement;
                        this.expression = a;
                        this.finish();
                        return this
                    },
                    finishForStatement: function (a, b, c, d) {
                        this.type = $.ForStatement;
                        this.init = a;
                        this.test = b;
                        this.update = c;
                        this.body = d;
                        this.finish();
                        return this
                    },
                    finishForInStatement: function (a, b, c) {
                        this.type = $.ForInStatement;
                        this.left = a;
                        this.right = b;
                        this.body = c;
                        this.each = !1;
                        this.finish();
                        return this
                    },
                    finishFunctionDeclaration: function (a, b, c, d) {
                        this.type = $.FunctionDeclaration;
                        this.id = a;
                        this.params = b;
                        this.defaults = c;
                        this.body = d;
                        this.rest = null;
                        this.expression = this.generator = !1;
                        this.finish();
                        return this
                    },
                    finishFunctionExpression: function (a, b, c, d) {
                        this.type = $.FunctionExpression;
                        this.id = a;
                        this.params = b;
                        this.defaults = c;
                        this.body = d;
                        this.rest = null;
                        this.expression = this.generator = !1;
                        this.finish();
                        return this
                    },
                    finishIdentifier: function (a) {
                        this.type = $.Identifier;
                        this.name =
                            a;
                        this.finish();
                        return this
                    },
                    finishIfStatement: function (a, b, c) {
                        this.type = $.IfStatement;
                        this.test = a;
                        this.consequent = b;
                        this.alternate = c;
                        this.finish();
                        return this
                    },
                    finishLiteral: function (a) {
                        this.type = $.Literal;
                        this.value = a.value;
                        this.raw = S.slice(a.start, a.end);
                        a.regex && (this.regex = a.regex);
                        this.finish();
                        return this
                    },
                    finishMemberExpression: function (a, b, c) {
                        this.type = $.MemberExpression;
                        this.computed = "[" === a;
                        this.object = b;
                        this.property = c;
                        this.finish();
                        return this
                    },
                    finishObjectExpression: function (a) {
                        this.type =
                            $.ObjectExpression;
                        this.properties = a;
                        this.finish();
                        return this
                    },
                    finishPostfixExpression: function (a, b) {
                        this.type = $.UpdateExpression;
                        this.operator = a;
                        this.argument = b;
                        this.prefix = !1;
                        this.finish();
                        return this
                    },
                    finishProgram: function (a) {
                        this.type = $.Program;
                        this.body = a;
                        this.finish();
                        return this
                    },
                    finishProperty: function (a, b, c, d, f) {
                        this.type = $.Property;
                        this.key = b;
                        this.value = c;
                        this.kind = a;
                        this.method = d;
                        this.shorthand = f;
                        this.finish();
                        return this
                    },
                    finishReturnStatement: function (a) {
                        this.type = $.ReturnStatement;
                        this.argument = a;
                        this.finish();
                        return this
                    },
                    finishUnaryExpression: function (a, b) {
                        this.type = "++" === a || "--" === a ? $.UpdateExpression : $.UnaryExpression;
                        this.operator = a;
                        this.argument = b;
                        this.prefix = !0;
                        this.finish();
                        return this
                    },
                    finishVariableDeclaration: function (a, b) {
                        this.type = $.VariableDeclaration;
                        this.declarations = a;
                        this.kind = b;
                        this.finish();
                        return this
                    },
                    finishVariableDeclarator: function (a, b) {
                        this.type = $.VariableDeclarator;
                        this.id = a;
                        this.init = b;
                        this.finish();
                        return this
                    }
                };
                r.version = "2.0.0-dev";
                r.tokenize =
                    function (a, b) {
                        var c, d;
                        c = String;
                        "string" !== typeof a && !(a instanceof String) && (a = c(a));
                        S = a;
                        B = 0;
                        ba = 0 < S.length ? 1 : 0;
                        da = 0;
                        ka = S.length;
                        V = null;
                        X = {
                            allowIn: !0,
                            labelSet: {},
                            inFunctionBody: !1,
                            inIteration: !1,
                            inSwitch: !1,
                            lastCommentStart: -1
                        };
                        M = {};
                        b = b || {};
                        b.tokens = !0;
                        M.tokens = [];
                        M.tokenize = !0;
                        M.openParenToken = -1;
                        M.openCurlyToken = -1;
                        M.range = "boolean" === typeof b.range && b.range;
                        M.loc = "boolean" === typeof b.loc && b.loc;
                        "boolean" === typeof b.comment && b.comment && (M.comments = []);
                        "boolean" === typeof b.tolerant && b.tolerant && (M.errors = []);
                        try {
                            A();
                            if (V.type === L.EOF) return M.tokens;
                            for (v(); V.type !== L.EOF;) try {
                                v()
                            } catch (f) {
                                if (M.errors) {
                                    M.errors.push(f);
                                    break
                                } else throw f;
                            }
                            Ia();
                            d = M.tokens;
                            "undefined" !== typeof M.comments && (d.comments = M.comments);
                            "undefined" !== typeof M.errors && (d.errors = M.errors)
                        } catch (e) {
                            throw e;
                        } finally {
                            M = {}
                        }
                        return d
                    };
                r.parse = function (a, b) {
                    var c, d;
                    d = String;
                    "string" !== typeof a && !(a instanceof String) && (a = d(a));
                    S = a;
                    B = 0;
                    ba = 0 < S.length ? 1 : 0;
                    da = 0;
                    ka = S.length;
                    V = null;
                    X = {
                        allowIn: !0,
                        labelSet: {},
                        parenthesisCount: 0,
                        inFunctionBody: !1,
                        inIteration: !1,
                        inSwitch: !1,
                        lastCommentStart: -1
                    };
                    M = {};
                    "undefined" !== typeof b && (M.range = "boolean" === typeof b.range && b.range, M.loc = "boolean" === typeof b.loc && b.loc, M.attachComment = "boolean" === typeof b.attachComment && b.attachComment, M.loc && (null !== b.source && void 0 !== b.source) && (M.source = d(b.source)), "boolean" === typeof b.tokens && b.tokens && (M.tokens = []), "boolean" === typeof b.comment && b.comment && (M.comments = []), "boolean" === typeof b.tolerant && b.tolerant && (M.errors = []), M.attachComment && (M.range = !0, M.comments = [], M.bottomRightStack = [], M.trailingComments = [], M.leadingComments = []));
                    try {
                        var f;
                        m();
                        A();
                        f = new F;
                        fa = !1;
                        var e;
                        d = [];
                        for (var g, h, n; B < ka;) {
                            g = V;
                            if (g.type !== L.StringLiteral) break;
                            e = Za();
                            d.push(e);
                            if (e.expression.type !== $.Literal) break;
                            h = S.slice(g.start + 1, g.end - 1);
                            "use strict" === h ? (fa = !0, n && J(n, ca.StrictOctalLiteral)) : !n && g.octal && (n = g)
                        }
                        for (; B < ka;) {
                            e = Za();
                            if ("undefined" === typeof e) break;
                            d.push(e)
                        }
                        c = f.finishProgram(d);
                        "undefined" !== typeof M.comments && (c.comments = M.comments);
                        "undefined" !== typeof M.tokens &&
                            (Ia(), c.tokens = M.tokens);
                        "undefined" !== typeof M.errors && (c.errors = M.errors)
                    } catch (l) {
                        throw l;
                    } finally {
                        M = {}
                    }
                    return c
                };
                r.Syntax = function () {
                    var a, b = {};
                    "function" === typeof Object.create && (b = Object.create(null));
                    for (a in $) $.hasOwnProperty(a) && (b[a] = $[a]);
                    "function" === typeof Object.freeze && Object.freeze(b);
                    return b
                }()
            })
        },
        "esri/arcade/arcadeCompiler": function () {
            define("require exports ../geometry/Polygon ../graphic ../geometry/Polyline ../geometry/Point ../geometry/Extent ../geometry/Multipoint ../SpatialReference ./languageUtils ./treeAnalysis ./Dictionary ./Feature ./functions/date ./functions/string ./functions/maths ./functions/geometry ./functions/stats ./ImmutablePathArray ./ImmutablePointArray ../geometry/Geometry".split(" "),
                function (r, p, a, g, q, h, k, l, e, c, b, d, m, t, s, n, f, y, u, w, C) {
                    function x(a, b, c) {
                        try {
                            return c(a, null, b)
                        } catch (d) {
                            throw d;
                        }
                    }

                    function v(a, c) {
                        try {
                            switch (c.type) {
                            case "EmptyStatement":
                                return "lc.voidOperation";
                            case "VariableDeclarator":
                                return F(a, c);
                            case "VariableDeclaration":
                                for (var d = [], f = 0; f < c.declarations.length; f++) d.push(v(a, c.declarations[f]));
                                return d.join("\n") + " \n lastStatement\x3d  lc.voidOperation; \n";
                            case "BlockStatement":
                                return D(a, c);
                            case "FunctionDeclaration":
                                var e = c.id.name.toLowerCase(),
                                    g = {
                                        applicationCache: void 0 ===
                                            a.applicationCache ? null : a.applicationCache,
                                        spatialReference: a.spatialReference,
                                        console: a.console,
                                        symbols: a.symbols,
                                        localScope: {
                                            _SymbolsMap: {}
                                        },
                                        depthCounter: a.depthCounter + 1,
                                        globalScope: a.globalScope
                                    };
                                if (64 < g.depthCounter) throw Error("Exceeded maximum function depth");
                                for (var d = "new lc.SizzleFunction( lang.functionDepthchecker(function() { var lastStatement \x3d lc.voidOperation; var lscope \x3d [];\n ", h = 0; h < c.params.length; h++) {
                                    var n = c.params[h].name.toLowerCase(),
                                        m = K(n, a);
                                    g.localScope._SymbolsMap[n] =
                                        m;
                                    d += "lscope['" + m + "']\x3darguments[" + h.toString() + "];\n"
                                }
                                d += D(g, c.body) + "\n return lastStatement; }, runtimeCtx))";
                                d += "\n lastStatement \x3d lc.voidOperation; \n";
                                void 0 !== a.globalScope[e] ? f = "gscope['" + e + "']\x3d" + d : void 0 !== a.globalScope._SymbolsMap[e] ? f = "gscope['" + a.globalScope._SymbolsMap[e] + "']\x3d" + d : (m = K(e, a), a.globalScope._SymbolsMap[e] = m, f = "gscope['" + m + "']\x3d" + d);
                                return f;
                            case "ReturnStatement":
                                var l;
                                l = null === c.argument ? "return lc.voidOperation;" : "return " + v(a, c.argument) + ";";
                                return l;
                            case "IfStatement":
                                if ("AssignmentExpression" ===
                                    c.test.type || "UpdateExpression" === c.test.type) throw Error(b.nodeErrorMessage(c.test, "RUNTIME", "CANNOT_USE_ASSIGNMENT_IN_CONDITION"));
                                var k = v(a, c.test),
                                    s = J(a),
                                    q = "var " + s + " \x3d " + k + ";\n if (" + s + " \x3d\x3d\x3d true) {\n" + H(a, c.consequent) + "\n }\n",
                                    q = null !== c.alternate ? q + ("else if (" + s + "\x3d\x3d\x3dfalse)   { \n" + H(a, c.alternate) + "}\n") : q + ("else if (" + s + "\x3d\x3d\x3dfalse) { \n lastStatement \x3d lc.voidOperation;\n }\n");
                                return q += "else { lang.error({type: '" + c.type + "'},'RUNTIME','CANNOT_USE_NONBOOLEAN_IN_CONDITION'); \n}\n";
                            case "ExpressionStatement":
                                var p;
                                p = "AssignmentExpression" === c.expression.type ? "lastStatement \x3d lc.voidOperation; " + v(a, c.expression) + " \n " : "lastStatement \x3d " + v(a, c.expression) + ";";
                                return p;
                            case "AssignmentExpression":
                                return z(a, c);
                            case "UpdateExpression":
                                return A(a, c);
                            case "BreakStatement":
                                return "break;";
                            case "ContinueStatement":
                                return "continue;";
                            case "ForStatement":
                                d = "lastStatement \x3d lc.voidOperation; \n";
                                null !== c.init && (d += v(a, c.init));
                                var r = J(a),
                                    t = J(a),
                                    d = d + ("var " + r + " \x3d true;"),
                                    d =
                                    d + "\n do { ";
                                null !== c.update && (d += " if (" + r + "\x3d\x3d\x3dfalse) {\n " + v(a, c.update) + "  \n}\n " + r + "\x3dfalse; \n");
                                null !== c.test && (d += "var " + t + " \x3d " + v(a, c.test) + ";", d += "if (" + t + "\x3d\x3d\x3dfalse) { break; } else if (" + t + "!\x3d\x3dtrue) { lang.error({type: '" + c.type + "'},'RUNTIME','CANNOT_USE_NONBOOLEAN_IN_CONDITION');   }\n");
                                d += v(a, c.body);
                                null !== c.update && (d += "\n " + v(a, c.update));
                                return d + ("\n" + r + " \x3d true; \n} while(true);  lastStatement \x3d lc.voidOperation;");
                            case "ForInStatement":
                                var u =
                                    J(a),
                                    w = J(a),
                                    y = J(a),
                                    x = "var " + u + " \x3d " + v(a, c.right) + ";\n";
                                "VariableDeclaration" === c.left.type && (x += v(a, c.left));
                                var C = "VariableDeclaration" === c.left.type ? c.left.declarations[0].id.name : c.left.name,
                                    C = C.toLowerCase(),
                                    d = "";
                                null !== a.localScope && (void 0 !== a.localScope[C] ? d = "lscope['" + C + "']" : void 0 !== a.localScope._SymbolsMap[C] && (d = "lscope['" + a.localScope._SymbolsMap[C] + "']"));
                                "" === d && (void 0 !== a.globalScope[C] ? d = "gscope['" + C + "']" : void 0 !== a.globalScope._SymbolsMap[C] && (d = "gscope['" + a.globalScope._SymbolsMap[C] +
                                    "']"));
                                x += "if (" + u + "\x3d\x3d\x3dnull) {  lastStatement \x3d lc.voidOperation; }\n ";
                                x += "else if (lc.isArray(" + u + ") || lc.isString(" + u + ")) {";
                                x += "var " + w + "\x3d" + u + ".length; \n";
                                x += "for(var " + y + "\x3d0; " + y + "\x3c" + w + "; " + y + "++) {\n";
                                x += d + "\x3d" + y + ";\n";
                                x += v(a, c.body);
                                x += "\n}\n";
                                x += " lastStatement \x3d lc.voidOperation; \n";
                                x += " \n}\n";
                                x += "else if (lc.isImmutableArray(" + u + ")) {";
                                x += "var " + w + "\x3d" + u + ".length(); \n";
                                x += "for(var " + y + "\x3d0; " + y + "\x3c" + w + "; " + y + "++) {\n";
                                x += d + "\x3d" + y + ";\n";
                                x += v(a, c.body);
                                x += "\n}\n";
                                x += " lastStatement \x3d lc.voidOperation; \n";
                                x += " \n}\n";
                                x += "else if (( " + u + " instanceof lang.Dictionary) || ( " + u + " instanceof lang.Feature)) {";
                                x += "var " + w + "\x3d" + u + ".keys(); \n";
                                x += "for(var " + y + "\x3d0; " + y + "\x3c" + w + ".length; " + y + "++) {\n";
                                x += d + "\x3d" + w + "[" + y + "];\n";
                                x += v(a, c.body);
                                x += "\n}\n";
                                x += " lastStatement \x3d lc.voidOperation; \n";
                                x += " \n}\n";
                                return x + "else { lastStatement \x3d lc.voidOperation; } \n";
                            case "Identifier":
                                return Q(a, c);
                            case "MemberExpression":
                                var E;
                                try {
                                    d = void 0, d = !0 === c.computed ? v(a, c.property) : "'" + c.property.name + "'", E = "lang.member(" + v(a, c.object) + "," + d + ")"
                                } catch (R) {
                                    throw R;
                                }
                                return E;
                            case "Literal":
                                return null === c.value || void 0 === c.value ? "null" : JSON.stringify(c.value);
                            case "ThisExpression":
                                throw Error(b.nodeErrorMessage(c, "RUNTIME", "NOTSUPPORTED"));
                            case "CallExpression":
                                try {
                                    if ("Identifier" !== c.callee.type) throw Error(b.nodeErrorMessage(c, "RUNTIME", "ONLYNODESSUPPORTED"));
                                    var O = c.callee.name.toLowerCase(),
                                        f = "";
                                    null !== a.localScope && (void 0 !== a.localScope[O] ?
                                        f = "lscope['" + O + "']" : void 0 !== a.localScope._SymbolsMap[O] && (f = "lscope['" + a.localScope._SymbolsMap[O] + "']"));
                                    "" === f && (void 0 !== a.globalScope[O] ? f = "gscope['" + O + "']" : void 0 !== a.globalScope._SymbolsMap[O] && (f = "gscope['" + a.globalScope._SymbolsMap[O] + "']"));
                                    if ("" !== f) {
                                        e = "[";
                                        for (g = 0; g < c.arguments.length; g++) 0 < g && (e += ", "), e += v(a, c.arguments[g]);
                                        d = "lang.callfunc(" + f + "," + (e + "]") + ",runtimeCtx)"
                                    } else throw Error(b.nodeErrorMessage(c, "RUNTIME", "NOTFOUND"));
                                } catch (G) {
                                    throw G;
                                }
                                return d;
                            case "UnaryExpression":
                                var N;
                                try {
                                    N = "lang.unary(" + v(a, c.argument) + ",'" + c.operator + "')"
                                } catch (T) {
                                    throw T;
                                }
                                return N;
                            case "BinaryExpression":
                                var I;
                                try {
                                    I = "lang.binary(" + v(a, c.left) + "," + v(a, c.right) + ",'" + c.operator + "')"
                                } catch (P) {
                                    throw P;
                                }
                                return I;
                            case "LogicalExpression":
                                var W;
                                try {
                                    if ("AssignmentExpression" === c.left.type || "UpdateExpression" === c.left.type) throw Error(b.nodeErrorMessage(c.left, "RUNTIME", "CANNOT_USE_ASSIGNMENT_IN_CONDITION"));
                                    if ("AssignmentExpression" === c.right.type || "UpdateExpression" === c.right.type) throw Error(b.nodeErrorMessage(c.right,
                                        "RUNTIME", "CANNOT_USE_ASSIGNMENT_IN_CONDITION"));
                                    W = "lang.logical(" + v(a, c.left) + "," + v(a, c.right) + ",'" + c.operator + "')"
                                } catch (Z) {
                                    throw Z;
                                }
                                return W;
                            case "ConditionalExpression":
                                throw Error(b.nodeErrorMessage(c, "RUNTIME", "NOTSUPPORTED"));
                            case "ArrayExpression":
                                try {
                                    d = [];
                                    for (f = 0; f < c.elements.length; f++) "Literal" === c.elements[f].type ? d.push(v(a, c.elements[f])) : d.push("lang.aCheck(" + v(a, c.elements[f]) + ",'ArrayExpression')");
                                    h = "[" + d.join(",") + "]"
                                } catch (Y) {
                                    throw Y;
                                }
                                return h;
                            case "ObjectExpression":
                                d = "lang.dictionary([";
                                for (f = 0; f < c.properties.length; f++) {
                                    var ga = c.properties[f],
                                        ca = "Identifier" === ga.key.type ? "'" + ga.key.name + "'" : v(a, ga.key),
                                        sa = v(a, ga.value);
                                    0 < f && (d += ",");
                                    d += "lang.strCheck(" + ca + ",'ObjectExpression'),lang.aCheck(" + sa + ", 'ObjectExpression')"
                                }
                                return d + "])";
                            case "Property":
                                throw Error("Should not get here");
                            case "Array":
                                throw Error(b.nodeErrorMessage(c, "RUNTIME", "NOTSUPPORTED"));
                            default:
                                throw Error(b.nodeErrorMessage(c, "RUNTIME", "UNREOGNISED"));
                            }
                        } catch (S) {
                            throw S;
                        }
                    }

                    function A(a, b) {
                        var c = null,
                            d = "";
                        if ("MemberExpression" ===
                            b.argument.type) return c = v(a, b.argument.object), d = !0 === b.argument.computed ? v(a, b.argument.property) : "'" + b.argument.property.name + "'", "lang.memberupdate(" + c + "," + d + ",'" + b.operator + "'," + b.prefix + ")";
                        c = b.argument.name.toLowerCase();
                        if (null !== a.localScope) {
                            if (void 0 !== a.localScope[c]) return "lang.update(lscope, '" + c + "','" + b.operator + "'," + b.prefix + ")";
                            if (void 0 !== a.localScope._SymbolsMap[c]) return "lang.update(lscope, '" + a.localScope._SymbolsMap[c] + "','" + b.operator + "'," + b.prefix + ")"
                        }
                        if (void 0 !== a.globalScope[c]) return "lang.update(gscope, '" +
                            c + "','" + b.operator + "'," + b.prefix + ")";
                        if (void 0 !== a.globalScope._SymbolsMap[c]) return "lang.update(gscope, '" + a.globalScope._SymbolsMap[c] + "','" + b.operator + "'," + b.prefix + ")";
                        throw Error("Variable not recognised");
                    }

                    function z(a, b) {
                        var c = v(a, b.right),
                            d = null,
                            f = "";
                        if ("MemberExpression" === b.left.type) return d = v(a, b.left.object), f = !0 === b.left.computed ? v(a, b.left.property) : "'" + b.left.property.name + "'", "lang.assignmember(" + d + "," + f + ",'" + b.operator + "'," + c + ");";
                        d = b.left.name.toLowerCase();
                        if (null !== a.localScope) {
                            if (void 0 !==
                                a.localScope[d]) return "lscope['" + d + "']\x3dlang.assign(" + c + ",'" + b.operator + "', lscope['" + d + "']); ";
                            if (void 0 !== a.localScope._SymbolsMap[d]) return "lscope['" + a.localScope._SymbolsMap[d] + "']\x3dlang.assign(" + c + ",'" + b.operator + "', lscope['" + a.localScope._SymbolsMap[d] + "']); "
                        }
                        if (void 0 !== a.globalScope[d]) return "gscope['" + d + "']\x3dlang.assign(" + c + ",'" + b.operator + "', gscope['" + d + "']); ";
                        if (void 0 !== a.globalScope._SymbolsMap[d]) return "gscope['" + a.globalScope._SymbolsMap[d] + "']\x3dlang.assign(" + c + ",'" + b.operator +
                            "', gscope['" + a.globalScope._SymbolsMap[d] + "']); ";
                        throw Error("Variable not recognised");
                    }

                    function H(a, b) {
                        return "BlockStatement" === b.type ? v(a, b) : "ReturnStatement" === b.type ? v(a, b) : "BreakStatement" === b.type ? v(a, b) : "ContinueStatement" === b.type ? v(a, b) : "UpdateExpression" === b.type ? "lastStatement \x3d " + v(a, b) + ";" : "ExpressionStatement" === b.type ? v(a, b) : "ObjectExpression" === b.type ? "lastStatement \x3d " + v(a, b) + ";" : v(a, b)
                    }

                    function D(a, b) {
                        for (var c = "", d = 0; d < b.body.length; d++) c = "ReturnStatement" === b.body[d].type ?
                            c + (v(a, b.body[d]) + " \n") : "BreakStatement" === b.body[d].type ? c + (v(a, b.body[d]) + " \n") : "ContinueStatement" === b.body[d].type ? c + (v(a, b.body[d]) + " \n") : "UpdateExpression" === b.body[d].type ? c + ("lastStatement \x3d " + v(a, b.body[d]) + "; \n") : "ObjectExpression" === b.body[d].type ? c + ("lastStatement \x3d " + v(a, b.body[d]) + "; \n") : c + (v(a, b.body[d]) + " \n");
                        return c
                    }

                    function F(a, b) {
                        var d = null === b.init ? null : v(a, b.init);
                        d === c.voidOperation && (d = null);
                        var f = b.id.name.toLowerCase();
                        if (null !== a.localScope) {
                            if (void 0 !== a.localScope[f]) return "lscope['" +
                                f + "']\x3d" + d + ";";
                            if (void 0 !== a.localScope._SymbolsMap[f]) return "lscope['" + a.localScope._SymbolsMap[f] + "']\x3d" + d + ";";
                            var e = K(f, a);
                            a.localScope._SymbolsMap[f] = e;
                            return "lscope['" + e + "']\x3d" + d + ";"
                        }
                        if (void 0 !== a.globalScope[f]) return "gscope['" + f + "']\x3d" + d + ";";
                        if (void 0 !== a.globalScope._SymbolsMap[f]) return "gscope['" + a.globalScope._SymbolsMap[f] + "']\x3d" + d + ";";
                        e = K(f, a);
                        a.globalScope._SymbolsMap[f] = e;
                        return "gscope['" + e + "']\x3d" + d + ";"
                    }

                    function E(a, f, e) {
                        f = f.toLowerCase();
                        switch (f) {
                        case "hasz":
                            return a = a.hasZ,
                                void 0 === a ? !1 : a;
                        case "hasm":
                            return a = a.hasM, void 0 === a ? !1 : a;
                        case "spatialreference":
                            return f = a.spatialReference._arcadeCacheId, void 0 === f && (e = !0, Object.freeze && Object.isFrozen(a.spatialReference) && (e = !1), e && (T++, f = a.spatialReference._arcadeCacheId = T)), a = new d({
                                wkt: a.spatialReference.wkt,
                                wkid: a.spatialReference.wkid
                            }), void 0 !== f && (a._arcadeCacheId = "SPREF" + f.toString()), a
                        }
                        switch (a.type) {
                        case "extent":
                            switch (f) {
                            case "xmin":
                            case "xmax":
                            case "ymin":
                            case "ymax":
                            case "zmin":
                            case "zmax":
                            case "mmin":
                            case "mmax":
                                return a =
                                    a[f], void 0 !== a ? a : null;
                            case "type":
                                return "Extent"
                            }
                            break;
                        case "polygon":
                            switch (f) {
                            case "rings":
                                return f = c.isVersion4 ? a.cache._arcadeCacheId : a.getCacheValue("_arcadeCacheId"), void 0 === f && (T++, f = T, c.isVersion4 ? a.cache._arcadeCacheId = f : a.setCacheValue("_arcadeCacheId", f)), a = new u(a.rings, a.spatialReference, !0 === a.hasZ, !0 === a.hasM, f);
                            case "type":
                                return "Polygon"
                            }
                            break;
                        case "point":
                            switch (f) {
                            case "x":
                            case "y":
                            case "z":
                            case "m":
                                return void 0 !== a[f] ? a[f] : null;
                            case "type":
                                return "Point"
                            }
                            break;
                        case "polyline":
                            switch (f) {
                            case "paths":
                                return f =
                                    c.isVersion4 ? a.cache._arcadeCacheId : a.getCacheValue("_arcadeCacheId"), void 0 === f && (T++, f = T, c.isVersion4 ? a.cache._arcadeCacheId = f : a.setCacheValue("_arcadeCacheId", f)), a = new u(a.paths, a.spatialReference, !0 === a.hasZ, !0 === a.hasM, f);
                            case "type":
                                return "Polyline"
                            }
                            break;
                        case "multipoint":
                            switch (f) {
                            case "points":
                                return f = c.isVersion4 ? a.cache._arcadeCacheId : a.getCacheValue("_arcadeCacheId"), void 0 === f && (T++, f = T, c.isVersion4 ? a.cache._arcadeCacheId = f : a.setCacheValue("_arcadeCacheId", f)), a = new w(a.points, a.spatialReference, !0 === a.hasZ, !0 === a.hasM, f, 1);
                            case "type":
                                return "Multipoint"
                            }
                        }
                        throw Error(b.nodeErrorMessage(e, "RUNTIME", "PROPERTYNOTFOUND"));
                    }

                    function Q(a, c) {
                        try {
                            var d = c.name.toLowerCase();
                            if (null !== a.localScope) {
                                if (void 0 !== a.localScope[d]) return "lscope['" + d + "']";
                                if (void 0 !== a.localScope._SymbolsMap[d]) return "lscope['" + a.localScope._SymbolsMap[d] + "']"
                            }
                            if (void 0 !== a.globalScope[d]) return "gscope['" + d + "']";
                            if (void 0 !== a.globalScope._SymbolsMap[d]) return "gscope['" + a.globalScope._SymbolsMap[d] + "']";
                            throw Error(b.nodeErrorMessage(c,
                                "RUNTIME", "VARIABLENOTFOUND"));
                        } catch (f) {
                            throw f;
                        }
                    }

                    function R(b) {
                        return null === b ? "" : c.isArray(b) || c.isImmutableArray(b) ? "Array" : c.isDate(b) ? "Date" : c.isString(b) ? "String" : c.isBoolean(b) ? "Boolean" : c.isNumber(b) ? "Number" : b instanceof d ? "Dictionary" : b instanceof m ? "Feature" : b instanceof h ? "Point" : b instanceof a ? "Polygon" : b instanceof q ? "Polyline" : b instanceof l ? "Multipoint" : b instanceof k ? "Extent" : c.isFunctionParameter(b) ? "Function" : b === c.voidOperation ? "" : "number" === typeof b && isNaN(b) ? "Number" : "Unrecognised Type"
                    }

                    function G(a, b, d, f) {
                        try {
                            if (c.equalityTest(b[d], f)) return b[d + 1];
                            var e = b.length - d;
                            return 1 === e ? b[d] : 2 === e ? null : G(a, b, d + 2, f)
                        } catch (g) {
                            throw g;
                        }
                    }

                    function I(a, b, d, f) {
                        try {
                            if (!0 === f) return b[d + 1];
                            if (3 === b.length - d) return b[d + 2];
                            var e = b[d + 2];
                            if (!1 === c.isBoolean(e)) throw Error("WHEN needs boolean test conditions");
                            return I(a, b, d + 2, e)
                        } catch (g) {
                            throw g;
                        }
                    }

                    function P(a, b) {
                        var c = a.length,
                            d = Math.floor(c / 2);
                        if (0 === c) return [];
                        if (1 === c) return [a[0]];
                        for (var f = P(a.slice(0, d), b), c = P(a.slice(d, c), b), d = []; 0 < f.length ||
                            0 < c.length;)
                            if (0 < f.length && 0 < c.length) {
                                var e = b(f[0], c[0]);
                                isNaN(e) && (e = 0);
                                0 >= e ? (d.push(f[0]), f = f.slice(1)) : (d.push(c[0]), c = c.slice(1))
                            } else 0 < f.length ? (d.push(f[0]), f = f.slice(1)) : 0 < c.length && (d.push(c[0]), c = c.slice(1));
                        return d
                    }

                    function K(a, b) {
                        b.symbols.symbolCounter++;
                        return "_T" + b.symbols.symbolCounter.toString()
                    }

                    function J(a) {
                        a.symbols.symbolCounter++;
                        return "_Tvar" + a.symbols.symbolCounter.toString()
                    }

                    function O(a, b, c) {
                        var d = {};
                        a || (a = {});
                        c || (c = {});
                        d._SymbolsMap = {};
                        d.textformatting = 1;
                        d.infinity = 1;
                        d.pi = 1;
                        for (var f in b) d[f] = 1;
                        for (f in c) d[f] = 1;
                        for (f in a) d[f] = 1;
                        return d
                    }

                    function W(a) {
                        console.log(a)
                    }
                    var T = 0,
                        N = {};
                    t.registerFunctions(N, x);
                    s.registerFunctions(N, x);
                    n.registerFunctions(N, x);
                    f.registerFunctions(N, x);
                    y.registerFunctions(N, x);
                    N["typeof"] = function (a, b) {
                        return x(a, b, function (a, b, d) {
                            c.pcCheck(d, 1, 1);
                            a = R(d[0]);
                            if ("Unrecognised Type" === a) throw Error("Unrecognised Type");
                            return a
                        })
                    };
                    N.iif = function (a, b) {
                        try {
                            return x(a, b, function (a, b, d) {
                                c.pcCheck(d, 3, 3);
                                if (!1 === c.isBoolean(d[0])) throw Error("IF Function must have a boolean test condition");
                                return d[0] ? d[1] : d[2]
                            })
                        } catch (d) {
                            throw d;
                        }
                    };
                    N.decode = function (a, b) {
                        try {
                            return x(a, b, function (b, c, d) {
                                if (2 > d.length) throw Error("Missing Parameters");
                                if (2 === d.length) return d[1];
                                if (0 === (d.length - 1) % 2) throw Error("Must have a default value result.");
                                return G(a, d, 1, d[0])
                            })
                        } catch (c) {
                            throw c;
                        }
                    };
                    N.when = function (a, b) {
                        try {
                            return x(a, b, function (b, d, f) {
                                if (3 > f.length) throw Error("Missing Parameters");
                                if (0 === f.length % 2) throw Error("Must have a default value result.");
                                b = f[0];
                                if (!1 === c.isBoolean(b)) throw Error("WHEN needs boolean test conditions");
                                return I(a, f, 0, b)
                            })
                        } catch (d) {
                            throw d;
                        }
                    };
                    N.top = function (a, b) {
                        return x(a, b, function (a, b, d) {
                            c.pcCheck(d, 2, 2);
                            if (c.isArray(d[0])) return c.toNumber(d[1]) >= d[0].length ? d[0].slice(0) : d[0].slice(0, c.toNumber(d[1]));
                            if (c.isImmutableArray(d[0])) return c.toNumber(d[1]) >= d[0].length() ? d[0].slice(0) : d[0].slice(0, c.toNumber(d[1]));
                            throw Error("Top cannot accept this parameter type");
                        })
                    };
                    N.first = function (a, b) {
                        return x(a, b, function (a, b, d) {
                            c.pcCheck(d, 1, 1);
                            return c.isArray(d[0]) ? 0 === d[0].length ? null : d[0][0] : c.isImmutableArray(d[0]) ?
                                0 === d[0].length() ? null : d[0].get(0) : null
                        })
                    };
                    N.sort = function (a, b) {
                        return x(a, b, function (a, b, d) {
                            c.pcCheck(d, 1, 2);
                            b = d[0];
                            c.isImmutableArray(b) && (b = b.toArray());
                            if (!1 === c.isArray(b)) throw Error("Illegal Argument");
                            if (1 < d.length) {
                                if (!1 === c.isFunctionParameter(d[1])) throw Error("Illegal Argument");
                                b = P(b, function (b, c) {
                                    return ga.callfunc(d[1], [b, c], a)
                                })
                            } else {
                                if (0 === b.length) return [];
                                for (var f = {}, e = 0; e < b.length; e++) {
                                    var g = R(b[e]);
                                    "" !== g && (f[g] = !0)
                                }
                                if (!0 === f.Array || !0 === f.Dictionary || !0 === f.Feature || !0 === f.Point ||
                                    !0 === f.Polygon || !0 === f.Polyline || !0 === f.Multipoint || !0 === f.Extent || !0 === f.Function) return b.slice(0);
                                var e = 0,
                                    g = "",
                                    h;
                                for (h in f) e++, g = h;
                                b = 1 < e || "String" === g ? P(b, function (a, b) {
                                    if (null === a || void 0 === a || a === c.voidOperation) return null === b || void 0 === b || b === c.voidOperation ? 0 : 1;
                                    if (null === b || void 0 === b || b === c.voidOperation) return -1;
                                    var d = c.toString(a),
                                        f = c.toString(b);
                                    return d < f ? -1 : d === f ? 0 : 1
                                }) : "Number" === g ? P(b, function (a, b) {
                                    return a - b
                                }) : "Boolean" === g ? P(b, function (a, b) {
                                    return a === b ? 0 : b ? -1 : 1
                                }) : "Date" === g ? P(b,
                                    function (a, b) {
                                        return b - a
                                    }) : b.slice(0)
                            }
                            return b
                        })
                    };
                    for (var Y in N) N[Y] = new c.NativeFunction(N[Y]);
                    var Z = function () {};
                    Z.prototype = N;
                    p.functionHelper = {
                        fixSpatialReference: c.fixSpatialReference,
                        parseArguments: function (a, b) {
                            for (var c = [], d = 0; d < b.arguments.length; d++) c.push(v(a, b.arguments[d]));
                            return c
                        },
                        standardFunction: x
                    };
                    p.executeScript = function (a, b, c) {
                        return a(b, c)
                    };
                    p.extractFieldLiterals = function (a, c) {
                        void 0 === c && (c = !1);
                        return b.findFieldLiterals(a, c)
                    };
                    p.validateScript = function (a, c) {
                        return b.validateScript(a,
                            c, "simple")
                    };
                    p.referencesMember = function (a, c) {
                        return b.referencesMember(a, c)
                    };
                    p.referencesFunction = function (a, c) {
                        return b.referencesFunction(a, c)
                    };
                    var ga = {
                        error: function (a, c, d) {
                            throw Error(b.nodeErrorMessage(a, c, d));
                        },
                        functionDepthchecker: function (a, b) {
                            return function () {
                                b.depthCounte++;
                                if (64 < b.depthCounter) throw Error("Exceeded maximum function depth");
                                var c = a.apply(this, arguments);
                                b.depthCounte--;
                                return c
                            }
                        },
                        aCheck: function (a, d) {
                            if (c.isFunctionParameter(a)) throw Error(b.nodeErrorMessage({
                                    type: d
                                },
                                "RUNTIME", "FUNCTIONCONTEXTILLEGAL"));
                            return a === c.voidOperation ? null : a
                        },
                        Dictionary: d,
                        Feature: m,
                        dictionary: function (a) {
                            for (var b = {}, f = 0; f < a.length; f += 2) {
                                if (c.isFunctionParameter(a[f + 1])) throw Error("Illegal Argument");
                                if (!1 === c.isString(a[f])) throw Error("Illegal Argument");
                                b[a[f].toString()] = a[f + 1] === c.voidOperation ? null : a[f + 1]
                            }
                            a = new d(b);
                            a.immutable = !1;
                            return a
                        },
                        strCheck: function (a, b) {
                            if (!1 === c.isString(a)) throw Error("Illegal Argument");
                            return a
                        },
                        unary: function (a, d) {
                            if (c.isBoolean(a)) {
                                if ("!" ===
                                    d) return !a;
                                if ("-" === d) return -1 * c.toNumber(a);
                                if ("+" === d) return 1 * c.toNumber(a);
                                throw Error(b.nodeErrorMessage({
                                    type: "UnaryExpression"
                                }, "RUNTIME", "NOTSUPPORTEDUNARYOPERATOR"));
                            }
                            if ("-" === d) return -1 * c.toNumber(a);
                            if ("+" === d) return 1 * c.toNumber(a);
                            throw Error(b.nodeErrorMessage({
                                type: "UnaryExpression"
                            }, "RUNTIME", "NOTSUPPORTEDUNARYOPERATOR"));
                        },
                        logical: function (a, d, f) {
                            if (c.isBoolean(a) && c.isBoolean(d)) switch (f) {
                            case "||":
                                return a || d;
                            case "\x26\x26":
                                return a && d;
                            default:
                                throw Error(b.nodeErrorMessage("LogicalExpression",
                                    "RUNTIME", "ONLYORORAND"));
                            } else throw Error(b.nodeErrorMessage("LogicalExpression", "RUNTIME", "ONLYORORAND"));
                        },
                        binary: function (a, d, f) {
                            switch (f) {
                            case "\x3d\x3d":
                                return c.equalityTest(a, d);
                            case "\x3d":
                                return c.equalityTest(a, d);
                            case "!\x3d":
                                return !c.equalityTest(a, d);
                            case "\x3c":
                                return c.greaterThanLessThan(a, d, f);
                            case "\x3e":
                                return c.greaterThanLessThan(a, d, f);
                            case "\x3c\x3d":
                                return c.greaterThanLessThan(a, d, f);
                            case "\x3e\x3d":
                                return c.greaterThanLessThan(a, d, f);
                            case "+":
                                return c.isString(a) || c.isString(d) ?
                                    c.toString(a) + c.toString(d) : c.toNumber(a) + c.toNumber(d);
                            case "-":
                                return c.toNumber(a) - c.toNumber(d);
                            case "*":
                                return c.toNumber(a) * c.toNumber(d);
                            case "/":
                                return c.toNumber(a) / c.toNumber(d);
                            case "%":
                                return c.toNumber(a) % c.toNumber(d);
                            default:
                                throw Error(b.nodeErrorMessage({
                                    type: "BinaryExpression"
                                }, "RUNTIME", "OPERATORNOTRECOGNISED"));
                            }
                        },
                        assign: function (a, d, f) {
                            switch (d) {
                            case "\x3d":
                                return a === c.voidOperation ? null : a;
                            case "/\x3d":
                                return c.toNumber(f) / c.toNumber(a);
                            case "*\x3d":
                                return c.toNumber(f) * c.toNumber(a);
                            case "-\x3d":
                                return c.toNumber(f) - c.toNumber(a);
                            case "+\x3d":
                                return c.isString(f) || c.isString(a) ? c.toString(f) + c.toString(a) : c.toNumber(f) + c.toNumber(a);
                            case "%\x3d":
                                return c.toNumber(f) % c.toNumber(a);
                            default:
                                throw Error(b.nodeErrorMessage("AssignmentExpression", "RUNTIME", "OPERATORNOTRECOGNISED"));
                            }
                        },
                        update: function (a, b, d, f) {
                            var e = c.toNumber(a[b]);
                            a[b] = "++" === d ? e + 1 : e - 1;
                            return !1 === f ? e : "++" === d ? e + 1 : e - 1
                        },
                        memberupdate: function (a, b, f, e) {
                            var g;
                            if (c.isArray(a))
                                if (c.isNumber(b)) {
                                    0 > b && (b = a.length + b);
                                    if (0 >
                                        b || b >= a.length) throw Error("Assignment outside of array bounds");
                                    g = c.toNumber(a[b]);
                                    a[b] = "++" === f ? g + 1 : g - 1
                                } else throw Error("Invalid Parameter");
                            else if (a instanceof d) {
                                if (!1 === c.isString(b)) throw Error("Dictionary accessor must be a string");
                                if (!0 === a.hasField(b)) g = c.toNumber(a.field(b)), a.setField(b, "++" === f ? g + 1 : g - 1);
                                else throw Error("Invalid Parameter");
                            } else if (a instanceof m) {
                                if (!1 === c.isString(b)) throw Error("Feature accessor must be a string");
                                if (!0 === a.hasField(b)) g = c.toNumber(a.field(b)),
                                    a.setField(b, "++" === f ? g + 1 : g - 1);
                                else throw Error("Invalid Parameter");
                            } else {
                                if (c.isImmutableArray(a)) throw Error("Array is Immutable");
                                throw Error("Invalid Parameter");
                            }
                            return !1 === e ? g : "++" === f ? g + 1 : g - 1
                        },
                        assignmember: function (a, b, f, e) {
                            if (c.isArray(a))
                                if (c.isNumber(b)) {
                                    0 > b && (b = a.length + b);
                                    if (0 > b || b > a.length) throw Error("Assignment outside of array bounds");
                                    if (b === a.length && "\x3d" !== f) throw Error("Invalid Parameter");
                                    a[b] = this.assign(e, f, a[b])
                                } else throw Error("Invalid Parameter");
                            else if (a instanceof d) {
                                if (!1 === c.isString(b)) throw Error("Dictionary accessor must be a string");
                                if (!0 === a.hasField(b)) a.setField(b, this.assign(e, f, a.field(b)));
                                else {
                                    if ("\x3d" !== f) throw Error("Invalid Parameter");
                                    a.setField(b, this.assign(e, f, null))
                                }
                            } else if (a instanceof m) {
                                if (!1 === c.isString(b)) throw Error("Feature accessor must be a string");
                                if (!0 === a.hasField(b)) a.setField(b, this.assign(e, f, a.field(b)));
                                else {
                                    if ("\x3d" !== f) throw Error("Invalid Parameter");
                                    a.setField(b, this.assign(e, f, null))
                                }
                            } else {
                                if (c.isImmutableArray(a)) throw Error("Array is Immutable");
                                throw Error("Invalid Parameter");
                            }
                        },
                        member: function (a, f) {
                            if (null === a) throw Error(b.nodeErrorMessage("MemberExpression", "RUNTIME", "NOTFOUND"));
                            if (a instanceof d || a instanceof m) {
                                if (c.isString(f)) return a.field(f)
                            } else if (a instanceof C) {
                                if (c.isString(f)) return E(a, f, "MemberExpression")
                            } else if (c.isArray(a)) {
                                if (c.isNumber(f) && isFinite(f) && Math.floor(f) === f) {
                                    0 > f && (f = a.length + f);
                                    if (f >= a.length || 0 > f) throw Error(b.nodeErrorMessage("MemberExpression", "RUNTIME", "OUTOFBOUNDS"));
                                    return a[f]
                                }
                            } else if (c.isString(a)) {
                                if (c.isNumber(f) &&
                                    isFinite(f) && Math.floor(f) === f) {
                                    0 > f && (f = a.length + f);
                                    if (f >= a.length || 0 > f) throw Error(b.nodeErrorMessage("MemberExpression", "RUNTIME", "OUTOFBOUNDS"));
                                    return a[f]
                                }
                            } else if (c.isImmutableArray(a) && c.isNumber(f) && isFinite(f) && Math.floor(f) === f) {
                                0 > f && (f = a.length() + f);
                                if (f >= a.length() || 0 > f) throw Error(b.nodeErrorMessage("MemberExpression", "RUNTIME", "OUTOFBOUNDS"));
                                return a.get(f)
                            }
                            throw Error(b.nodeErrorMessage("MemberExpression", "RUNTIME", "INVALIDTYPE"));
                        },
                        callfunc: function (a, b, d) {
                            return a instanceof c.NativeFunction ?
                                a.fn(d, b) : a instanceof c.SizzleFunction ? a.fn.apply(this, b) : a.apply(this, b)
                        }
                    };
                    p.compileScript = function (a, b) {
                        void 0 === b && (b = null);
                        null === b && (b = {
                            vars: {},
                            customfunctions: {}
                        });
                        var f = {
                                globalScope: O(b.vars, N, b.customfunctions),
                                localScope: null,
                                console: W,
                                symbols: {
                                    symbolCounter: 0
                                }
                            },
                            f = v(f, a.body[0].body);
                        "" === f && (f = "lc.voidOperation;");
                        var h = {
                            lc: c,
                            lang: ga,
                            postProcess: function (a) {
                                a instanceof c.ReturnResult && (a = a.value);
                                a instanceof c.ImplicitResult && (a = a.value);
                                a === c.voidOperation && (a = null);
                                if (a === c.breakResult) throw Error("Cannot return BREAK");
                                if (a === c.continueResult) throw Error("Cannot return CONTINUE");
                                if (c.isFunctionParameter(a)) throw Error("Cannot return FUNCTION");
                                return a
                            },
                            prepare: function (a, b) {
                                b || (b = new e(102100));
                                var c = a.vars,
                                    f = a.customfunctions,
                                    h = new Z;
                                c || (c = {});
                                f || (f = {});
                                var n = new d({
                                    newline: "\n",
                                    tab: "\t",
                                    singlequote: "'",
                                    doublequote: '"',
                                    forwardslash: "/",
                                    backwardslash: "\\"
                                });
                                n.immutable = !1;
                                h._SymbolsMap = {
                                    textformatting: 1,
                                    infinity: 1,
                                    pi: 1
                                };
                                h.textformatting = n;
                                h.infinity = Number.POSITIVE_INFINITY;
                                h.pi = Math.PI;
                                for (var l in f) h[l] = f[l],
                                    h._SymbolsMap[l] = 1;
                                for (l in c) h._SymbolsMap[l] = 1, h[l] = c[l] instanceof g ? new m(c[l]) : c[l];
                                return {
                                    spatialReference: b,
                                    globalScope: h,
                                    localScope: null,
                                    console: !a.console ? W : a.console,
                                    symbols: {
                                        symbolCounter: 0
                                    },
                                    depthCounter: 1,
                                    applicationCache: void 0 === a.applicationCache ? null : a.applicationCache
                                }
                            }
                        };
                        return (new Function("context", "spatialReference", "var runtimeCtx\x3dthis.prepare(context, spatialReference);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n " +
                            f + "\n return lastStatement; } \n return this.postProcess(mainBody());")).bind(h)
                    }
                })
        },
        "esri/renderers/SimpleRenderer": function () {
            define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../symbols/jsonUtils ./Renderer".split(" "), function (r, p, a, g, q, h, k) {
                r = r(k, {
                    declaredClass: "esri.renderer.SimpleRenderer",
                    constructor: function (a) {
                        if (a && !a.declaredClass) {
                            var e = a;
                            this.symbol = (a = e.symbol) && (a.declaredClass ? a : h.fromJson(a));
                            this.label = e.label;
                            this.description = e.description
                        } else this.symbol =
                            a
                    },
                    getSymbol: function (a) {
                        return this.symbol
                    },
                    toJson: function () {
                        var a = p.mixin(this.inherited(arguments), {
                            type: "simple",
                            label: this.label,
                            description: this.description,
                            symbol: this.symbol && this.symbol.toJson()
                        });
                        return q.fixJson(a)
                    }
                });
                a("extend-esri") && p.setObject("renderer.SimpleRenderer", r, g);
                return r
            })
        },
        "esri/renderers/UniqueValueRenderer": function () {
            define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../symbols/jsonUtils ./Renderer ./arcadeUtils".split(" "), function (r,
                p, a, g, q, h, k, l, e) {
                r = r(l, {
                    declaredClass: "esri.renderer.UniqueValueRenderer",
                    constructor: function (a, b, d, e, g) {
                        this.values = [];
                        this._symbols = {};
                        this.infos = [];
                        a && !a.declaredClass ? (b = a, this.defaultSymbol = (a = b.defaultSymbol) && (a.declaredClass ? a : k.fromJson(a)), this.attributeField = b.field1, this.attributeField2 = b.field2, this.attributeField3 = b.field3, this.fieldDelimiter = b.fieldDelimiter, this.defaultLabel = b.defaultLabel, this.setValueExpression(b.valueExpression), this.valueExpressionTitle = b.valueExpressionTitle,
                            this.legendOptions = b.legendOptions, b.backgroundFillSymbol && (this.backgroundFillSymbol = k.fromJson(b.backgroundFillSymbol)), p.forEach(b.uniqueValueInfos, this._addValueInfo, this)) : (this.defaultSymbol = a, this.attributeField = b, this.attributeField2 = d, this.attributeField3 = e, this.fieldDelimiter = g);
                        this._multiple = !!this.attributeField2
                    },
                    addValue: function (c, b) {
                        var d = a.isObject(c) ? c : {
                            value: c,
                            symbol: b
                        };
                        this._addValueInfo(d)
                    },
                    removeValue: function (a) {
                        var b = p.indexOf(this.values, a); - 1 !== b && (this.values.splice(b,
                            1), delete this._symbols[a], this.infos.splice(b, 1))
                    },
                    getUniqueValueInfo: function (c) {
                        var b = this.attributeField,
                            d = c.attributes,
                            g, h;
                        this._compiledFunc ? b = e.executeFunction(this._compiledFunc, e.createExecContext(c, c._getView())) : this._multiple ? (c = this.attributeField2, g = this.attributeField3, h = [], b && h.push(d[b]), c && h.push(d[c]), g && h.push(d[g]), b = h.join(this.fieldDelimiter || "")) : b = a.isFunction(b) ? b(c) : d[b];
                        return this._symbols[b]
                    },
                    setValueExpression: function (a) {
                        this.valueExpression = a;
                        this._compiledFunc = e.createFunction(a)
                    },
                    getSymbol: function (a) {
                        return (a = this.getUniqueValueInfo(a)) && a.symbol || this.defaultSymbol
                    },
                    _addValueInfo: function (a) {
                        var b = a.value;
                        this.values.push(b);
                        this.infos.push(a);
                        var d = a.symbol;
                        d && !d.declaredClass && (a.symbol = k.fromJson(d));
                        this._symbols[b] = a
                    },
                    toJson: function () {
                        var c = h.fixJson,
                            b;
                        b = {
                            type: "uniqueValue",
                            field1: this.attributeField,
                            field2: this.attributeField2,
                            field3: this.attributeField3,
                            fieldDelimiter: this.fieldDelimiter,
                            valueExpression: this.valueExpression,
                            valueExpressionTitle: this.valueExpressionTitle,
                            legendOptions: a.clone(this.legendOptions),
                            defaultSymbol: this.defaultSymbol && this.defaultSymbol.toJson(),
                            defaultLabel: this.defaultLabel,
                            uniqueValueInfos: p.map(this.infos || [], function (b) {
                                b = a.mixin({}, b);
                                b.symbol = b.symbol && b.symbol.toJson();
                                b.value += "";
                                return c(b)
                            })
                        };
                        this.backgroundFillSymbol && (b.backgroundFillSymbol = this.backgroundFillSymbol.toJson());
                        b = a.mixin(this.inherited(arguments), b);
                        return c(b)
                    }
                });
                g("extend-esri") && a.setObject("renderer.UniqueValueRenderer", r, q);
                return r
            })
        },
        "esri/renderers/ClassBreaksRenderer": function () {
            define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../symbols/jsonUtils ./Renderer ./arcadeUtils".split(" "),
                function (r, p, a, g, q, h, k, l, e) {
                    r = r(l, {
                        declaredClass: "esri.renderer.ClassBreaksRenderer",
                        constructor: function (a, b) {
                            this.breaks = [];
                            this._symbols = {};
                            this.infos = [];
                            this.isMaxInclusive = !0;
                            if (a && !a.declaredClass) {
                                var d = a;
                                this.attributeField = d.field;
                                this.setValueExpression(d.valueExpression);
                                this.valueExpressionTitle = d.valueExpressionTitle;
                                this.legendOptions = d.legendOptions;
                                this.defaultSymbol = (a = d.defaultSymbol) && (a.declaredClass ? a : k.fromJson(a));
                                this.backgroundFillSymbol = (a = d.backgroundFillSymbol) && (a.declaredClass ?
                                    a : k.fromJson(a));
                                this._copy(["defaultLabel", "classificationMethod:rest", "normalizationType:rest", "normalizationField", "normalizationTotal"], d, this);
                                var e = d.minValue;
                                (d = d.classBreakInfos) && (d[0] && h.isDefined(d[0].classMaxValue)) && p.forEach(d, function (a) {
                                    var b = a.classMaxValue;
                                    a.minValue = e;
                                    e = a.maxValue = b
                                }, this);
                                p.forEach(d, this._addBreakInfo, this)
                            } else this.defaultSymbol = a, this.attributeField = b
                        },
                        addBreak: function (c, b, d) {
                            c = a.isObject(c) ? c : {
                                minValue: c,
                                maxValue: b,
                                symbol: d
                            };
                            this._addBreakInfo(c)
                        },
                        removeBreak: function (a,
                            b) {
                            var d, e = this.breaks,
                                g, h = e.length,
                                n = this._symbols;
                            for (g = 0; g < h; g++)
                                if (d = e[g], d[0] == a && d[1] == b) {
                                    e.splice(g, 1);
                                    delete n[a + "-" + b];
                                    this.infos.splice(g, 1);
                                    break
                                }
                        },
                        clearBreaks: function () {
                            this.breaks = [];
                            this._symbols = {};
                            this.infos = []
                        },
                        getBreakIndex: function (c) {
                            var b = this.attributeField,
                                d = c.attributes,
                                g = this.breaks,
                                h = g.length,
                                l = this.isMaxInclusive;
                            if (this._compiledFunc) c = e.executeFunction(this._compiledFunc, e.createExecContext(c, c._getView()));
                            else if (a.isFunction(b)) c = b(c);
                            else {
                                c = parseFloat(d[b]);
                                var b =
                                    this.normalizationType,
                                    n;
                                if (b)
                                    if (n = parseFloat(this.normalizationTotal), d = parseFloat(d[this.normalizationField]), "log" === b) c = Math.log(c) * Math.LOG10E;
                                    else if ("percent-of-total" === b && !isNaN(n)) c = 100 * (c / n);
                                else if ("field" === b)
                                    if (!isNaN(c) && !isNaN(d)) c /= d;
                                    else return -1
                            }
                            if (null != c && !isNaN(c) && "number" === typeof c)
                                for (d = 0; d < h; d++)
                                    if (b = g[d], b[0] <= c && (l ? c <= b[1] : c < b[1])) return d;
                            return -1
                        },
                        getBreakInfo: function (a) {
                            a = this.getBreakIndex(a);
                            return -1 !== a ? this.infos[a] : null
                        },
                        getSymbol: function (a) {
                            return (a = this.breaks[this.getBreakIndex(a)]) ?
                                this._symbols[a[0] + "-" + a[1]] : this.defaultSymbol
                        },
                        setMaxInclusive: function (a) {
                            this.isMaxInclusive = a
                        },
                        setValueExpression: function (a) {
                            this.valueExpression = a;
                            this._compiledFunc = e.createFunction(a)
                        },
                        _normalizationTypeEnums: [["field", "esriNormalizeByField"], ["log", "esriNormalizeByLog"], ["percent-of-total", "esriNormalizeByPercentOfTotal"]],
                        _classificationMethodEnums: [["natural-breaks", "esriClassifyNaturalBreaks"], ["equal-interval", "esriClassifyEqualInterval"], ["quantile", "esriClassifyQuantile"], ["standard-deviation",
"esriClassifyStandardDeviation"], ["geometrical-interval", "esriClassifyGeometricalInterval"]],
                        _copy: function (a, b, d) {
                            p.forEach(a, function (a) {
                                var c = a.split(":"),
                                    e, g, f;
                                1 < c.length && (a = c[0], e = this["_" + a + "Enums"], "rest" === c[1] ? (g = "1", f = "0") : "sdk" === c[1] && (g = "0", f = "1"));
                                c = b[a];
                                if (void 0 !== c && (d[a] = c, e && g)) {
                                    var h, l = e.length;
                                    for (h = 0; h < l; h++)
                                        if (e[h][g] === c) {
                                            d[a] = e[h][f];
                                            break
                                        }
                                }
                            }, this)
                        },
                        _addBreakInfo: function (a) {
                            var b = a.minValue,
                                d = a.maxValue;
                            this.breaks.push([b, d]);
                            this.infos.push(a);
                            var e = a.symbol;
                            e && !e.declaredClass &&
                                (a.symbol = k.fromJson(e));
                            this._symbols[b + "-" + d] = a.symbol
                        },
                        toJson: function () {
                            var c = this.infos || [],
                                b = h.fixJson,
                                d = c[0] && c[0].minValue,
                                e = this.backgroundFillSymbol,
                                c = a.mixin(this.inherited(arguments), {
                                    type: "classBreaks",
                                    field: this.attributeField,
                                    valueExpression: this.valueExpression,
                                    valueExpressionTitle: this.valueExpressionTitle,
                                    legendOptions: a.clone(this.legendOptions),
                                    defaultSymbol: this.defaultSymbol && this.defaultSymbol.toJson(),
                                    backgroundFillSymbol: e && e.toJson(),
                                    minValue: -Infinity === d ? -Number.MAX_VALUE : d,
                                    classBreakInfos: p.map(c, function (c) {
                                        c = a.mixin({}, c);
                                        c.symbol = c.symbol && c.symbol.toJson();
                                        c.classMaxValue = Infinity === c.maxValue ? Number.MAX_VALUE : c.maxValue;
                                        delete c.minValue;
                                        delete c.maxValue;
                                        return b(c)
                                    })
                                });
                            this._copy(["defaultLabel", "classificationMethod:sdk", "normalizationType:sdk", "normalizationField", "normalizationTotal"], this, c);
                            c.hasOwnProperty("normalizationType") && !c.normalizationType && delete c.normalizationType;
                            c.hasOwnProperty("classificationMethod") && !c.classificationMethod && delete c.classificationMethod;
                            return b(c)
                        }
                    });
                    g("extend-esri") && a.setObject("renderer.ClassBreaksRenderer", r, q);
                    return r
                })
        },
        "esri/renderers/TemporalRenderer": function () {
            define(["dojo/_base/declare", "dojo/_base/lang", "dojo/has", "../kernel", "./Renderer"], function (r, p, a, g, q) {
                r = r(q, {
                    declaredClass: "esri.renderer.TemporalRenderer",
                    constructor: function (a, g, l, e) {
                        this.observationRenderer = a;
                        this.latestObservationRenderer = g;
                        this.trackRenderer = l;
                        this.observationAger = e
                    },
                    getSymbol: function (a) {
                        var g = a.getLayer(),
                            l = this.getObservationRenderer(a),
                            e = l && l.getSymbol(a),
                            c = this.observationAger;
                        g.timeInfo && (g._map.timeExtent && l === this.observationRenderer && c && e) && (e = c.getAgedSymbol(e, a));
                        return e
                    },
                    getObservationRenderer: function (a) {
                        return 0 === a.getLayer()._getKind(a) ? this.observationRenderer : this.latestObservationRenderer || this.observationRenderer
                    },
                    toJson: function () {
                        var a = {
                            type: "temporal"
                        };
                        a.observationRenderer = this.observationRenderer.toJson();
                        this.latestObservationRenderer && (a.latestObservationRenderer = this.latestObservationRenderer.toJson());
                        this.trackRenderer && (a.trackRenderer = this.trackRenderer.toJson());
                        this.observationAger && (a.observationAger = this.observationAger.toJson());
                        return a
                    }
                });
                a("extend-esri") && p.setObject("renderer.TemporalRenderer", r, g);
                return r
            })
        },
        "esri/renderers/SymbolAger": function () {
            define(["dojo/_base/declare", "dojo/_base/lang", "dojo/has", "../kernel"], function (r, p, a, g) {
                r = r(null, {
                    declaredClass: "esri.renderer.SymbolAger",
                    getAgedSymbol: function (a, g) {},
                    _setSymbolSize: function (a, g) {
                        switch (a.type) {
                        case "simplemarkersymbol":
                            a.setSize(g);
                            break;
                        case "picturemarkersymbol":
                            a.setWidth(g);
                            a.setHeight(g);
                            break;
                        case "simplelinesymbol":
                        case "cartographiclinesymbol":
                            a.setWidth(g);
                            break;
                        case "simplefillsymbol":
                        case "picturefillsymbol":
                            a.outline && a.outline.setWidth(g)
                        }
                    }
                });
                a("extend-esri") && p.setObject("renderer.SymbolAger", r, g);
                return r
            })
        },
        "esri/renderers/TimeClassBreaksAger": function () {
            define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has dojo/date ../kernel ../lang ../symbols/jsonUtils ../Color ./SymbolAger".split(" "), function (r,
                p, a, g, q, h, k, l, e, c) {
                var b = r(c, {
                    declaredClass: "esri.renderer.TimeClassBreaksAger",
                    constructor: function (a, b) {
                        this.infos = a;
                        this.timeUnits = b || "day";
                        a.sort(function (a, b) {
                            return a.minAge < b.minAge ? -1 : a.minAge > b.minAge ? 1 : 0
                        })
                    },
                    getAgedSymbol: function (a, b) {
                        var c = b.getLayer(),
                            e = b.attributes,
                            g = k.isDefined;
                        a = l.fromJson(a.toJson());
                        var f = c._map.timeExtent.endTime;
                        if (!f) return a;
                        var h = q.difference(new Date(e[c._startTimeField]), f, this.timeUnits);
                        p.some(this.infos, function (b) {
                            if (h >= b.minAge && h <= b.maxAge) {
                                var c = b.color,
                                    f = b.size;
                                b = b.alpha;
                                c && a.setColor(c);
                                g(f) && this._setSymbolSize(a, f);
                                g(b) && a.color && (a.color.a = b);
                                return !0
                            }
                        }, this);
                        return a
                    },
                    toJson: function () {
                        var a = {
                                agerClassBreakInfos: []
                            },
                            b, c, g;
                        a.timeUnits = this._getRestUnits(this.timeUnits);
                        for (b = 0; b < this.infos.length; b += 1) c = this.infos[b], g = {}, g.oldestAge = Infinity === c.maxAge ? null : c.maxAge, g.size = c.size, c.color && (g.color = e.toJsonColor(c.color)), c.alpha && (g.alpha = Math.round(255 * c.alpha)), a.agerClassBreakInfos[b] = g;
                        return a
                    },
                    _getRestUnits: function (a) {
                        var c = "esriTimeUnitsDays";
                        switch (a) {
                        case b.UNIT_SECONDS:
                            c = "esriTimeUnitsSeconds";
                            break;
                        case b.UNIT_MILLISECONDS:
                            c = "esriTimeUnitsMilliseconds";
                            break;
                        case b.UNIT_HOURS:
                            c = "esriTimeUnitsHours";
                            break;
                        case b.UNIT_MINUTES:
                            c = "esriTimeUnitsMinutes";
                            break;
                        case b.UNIT_MONTHS:
                            c = "esriTimeUnitsMonths";
                            break;
                        case b.UNIT_WEEKS:
                            c = "esriTimeUnitsWeeks";
                            break;
                        case b.UNIT_YEARS:
                            c = "esriTimeUnitsYears"
                        }
                        return c
                    }
                });
                a.mixin(b, {
                    UNIT_DAYS: "day",
                    UNIT_HOURS: "hour",
                    UNIT_MILLISECONDS: "millisecond",
                    UNIT_MINUTES: "minute",
                    UNIT_MONTHS: "month",
                    UNIT_SECONDS: "second",
                    UNIT_WEEKS: "week",
                    UNIT_YEARS: "year"
                });
                g("extend-esri") && a.setObject("renderer.TimeClassBreaksAger", b, h);
                return b
            })
        },
        "esri/renderers/TimeRampAger": function () {
            define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has ../kernel ../symbols/jsonUtils ../Color ./SymbolAger".split(" "), function (r, p, a, g, q, h, k, l) {
                r = r(l, {
                    declaredClass: "esri.renderer.TimeRampAger",
                    constructor: function (a, c, b) {
                        this.colorRange = a;
                        this.sizeRange = c;
                        this.alphaRange = b
                    },
                    getAgedSymbol: function (e, c) {
                        var b = c.getLayer(),
                            d = c.attributes;
                        e = h.fromJson(e.toJson());
                        var g = b._map.timeExtent,
                            l = g.startTime,
                            g = g.endTime;
                        if (!l || !g) return e;
                        l = l.getTime();
                        g = g.getTime();
                        b = new Date(d[b._startTimeField]);
                        b = b.getTime();
                        b < l && (b = l);
                        l = g === l ? 1 : (b - l) / (g - l);
                        if (b = this.sizeRange) d = b[0], g = b[1], b = Math.abs(g - d) * l, this._setSymbolSize(e, d < g ? d + b : d - b);
                        if (b = this.colorRange) {
                            var g = b[0],
                                k = b[1],
                                n = Math.round,
                                d = new a,
                                f = g.r,
                                q = k.r,
                                b = Math.abs(q - f) * l;
                            d.r = n(f < q ? f + b : f - b);
                            f = g.g;
                            q = k.g;
                            b = Math.abs(q - f) * l;
                            d.g = n(f < q ? f + b : f - b);
                            f = g.b;
                            q = k.b;
                            b = Math.abs(q - f) * l;
                            d.b = n(f < q ? f + b : f - b);
                            g = g.a;
                            k = k.a;
                            b = Math.abs(k - g) * l;
                            d.a = g < k ? g + b : g - b;
                            e.setColor(d)
                        }
                        d = e.color;
                        if ((b = this.alphaRange) && d) g = b[0], k = b[1], b = Math.abs(k - g) * l, d.a = g < k ? g + b : g - b;
                        return e
                    },
                    toJson: function () {
                        var a = {};
                        this.sizeRange && (a.sizeRange = this.sizeRange);
                        this.colorRange && (a.colorRange = [k.toJsonColor(this.colorRange[0]), k.toJsonColor(this.colorRange[1])]);
                        this.alphaRange && (a.alphaRange = [Math.round(255 * this.alphaRange[0]), Math.round(255 * this.alphaRange[1])]);
                        return a
                    }
                });
                g("extend-esri") && p.setObject("renderer.TimeRampAger", r, q);
                return r
            })
        },
        "esri/renderers/jsonUtils": function () {
            define("dojo/_base/array dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ../Color ../symbols/jsonUtils ./SimpleRenderer ./UniqueValueRenderer ./ClassBreaksRenderer ./VectorFieldRenderer ./DotDensityRenderer ./ScaleDependentRenderer ./TimeClassBreaksAger ./TimeRampAger ./TemporalRenderer ./HeatmapRenderer".split(" "), function (r, p, a, g, q, h, k, l, e, c, b, d, m, t, s, n, f) {
                var y = {
                    fromJson: function (a) {
                        var d;
                        switch (a.type || "") {
                        case "simple":
                            d = new l(a);
                            break;
                        case "uniqueValue":
                            d =
                                new e(a);
                            break;
                        case "classBreaks":
                            d = new c(a);
                            break;
                        case "vectorField":
                            d = new b(a);
                            break;
                        case "scaleDependent":
                            d = this._scaleDependentFromJson(a);
                            break;
                        case "dotDensity":
                            d = this._dotDensityFromJson(a);
                            break;
                        case "temporal":
                            d = this._temporalFromJson(a);
                            break;
                        case "heatmap":
                            d = this._heatmapFromJson(a)
                        }
                        return d
                    },
                    _scaleDependentFromJson: function (a) {
                        var b = {},
                            c = a.minScale;
                        b.rendererInfos = r.map(a.rendererInfos, function (a) {
                            var b = a.maxScale;
                            a = {
                                minScale: c,
                                maxScale: b,
                                renderer: a.renderer && this.fromJson(a.renderer)
                            };
                            c = b;
                            return a
                        }, this);
                        return new m(b)
                    },
                    _dotDensityFromJson: function (a) {
                        a.backgroundColor && p.isArray(a.backgroundColor) && (a.backgroundColor = h.toDojoColor(a.backgroundColor));
                        0 < a.dotSize && (a.dotSize = g.pt2px(a.dotSize));
                        a.fields && r.forEach(a.fields, function (a) {
                            a && p.isArray(a.color) && (a.color = h.toDojoColor(a.color))
                        });
                        a.legendOptions && (a.legendOptions.backgroundColor && p.isArray(a.legendOptions.backgroundColor) && (a.legendOptions.backgroundColor = h.toDojoColor(a.legendOptions.backgroundColor)), a.legendOptions.outline &&
                            (a.legendOptions.outline = k.fromJson(a.legendOptions.outline)));
                        a.outline && (a.outline = k.fromJson(a.outline));
                        return new d(a)
                    },
                    _temporalFromJson: function (a) {
                        var b, c, d;
                        a = a || {};
                        b = this.fromJson(a.observationRenderer);
                        c = a.latestObservationRenderer ? this.fromJson(a.latestObservationRenderer) : null;
                        d = a.trackRenderer ? this.fromJson(a.trackRenderer) : null;
                        a = this._agerFromJson(a.observationAger);
                        return new n(b, c, d, a)
                    },
                    _agerFromJson: function (a) {
                        var b;
                        a = a || {};
                        a.colorRange || a.sizeRange || a.alphaRange ? b = this._timeRampFromJson(a) :
                            a.agerClassBreakInfos && (b = this._timeClassBreaksFromJson(a));
                        return b
                    },
                    _timeRampFromJson: function (a) {
                        var b, c, d;
                        a.colorRange && 1 < a.colorRange.length && (b = [h.toDojoColor(a.colorRange[0]), h.toDojoColor(a.colorRange[1])]);
                        a.sizeRange && 1 < a.sizeRange.length && (c = [a.sizeRange[0], a.sizeRange[1]]);
                        a.alphaRange && 1 < a.alphaRange.length && (d = [a.alphaRange[0] / 255, a.alphaRange[1] / 255]);
                        return new s(b, c, d)
                    },
                    _timeClassBreaksFromJson: function (a) {
                        var b = a.agerClassBreakInfos,
                            c, d, f = [],
                            e;
                        c = t.UNIT_DAYS;
                        switch (a.timeUnits) {
                        case "esriTimeUnitsSeconds":
                            c =
                                t.UNIT_SECONDS;
                            break;
                        case "esriTimeUnitsMilliseconds":
                            c = t.UNIT_MILLISECONDS;
                            break;
                        case "esriTimeUnitsHours":
                            c = t.UNIT_HOURS;
                            break;
                        case "esriTimeUnitsMinutes":
                            c = t.UNIT_MINUTES;
                            break;
                        case "esriTimeUnitsMonths":
                            c = t.UNIT_MONTHS;
                            break;
                        case "esriTimeUnitsWeeks":
                            c = t.UNIT_WEEKS;
                            break;
                        case "esriTimeUnitsYears":
                            c = t.UNIT_YEARS
                        }
                        for (e = 0; e < b.length; e += 1) a = b[e], d = {
                            minAge: 0,
                            maxAge: a.oldestAge || Infinity
                        }, a.color && (d.color = h.toDojoColor(a.color)), a.alpha && (d.alpha = a.alpha / 255), d.size = a.size, f[e] = d;
                        return new t(f, c)
                    },
                    _heatmapFromJson: function (a) {
                        var b = a.colorStops;
                        b && b instanceof Array && r.forEach(b, function (a) {
                            a.color = h.toDojoColor(a.color)
                        });
                        return new f(a)
                    }
                };
                a("extend-esri") && p.mixin(p.getObject("renderer", !0, q), y);
                return y
            })
        },
        "esri/renderers/VectorFieldRenderer": function () {
            define("dojo/_base/declare dojo/_base/lang dojo/has dojo/_base/array ../kernel ../lang ../Color ./Renderer ./ClassBreaksRenderer ../symbols/SimpleMarkerSymbol ../symbols/PictureMarkerSymbol ../symbols/SimpleLineSymbol ../symbols/jsonUtils require".split(" "),
                function (r, p, a, g, q, h, k, l, e, c, b, d, m, t) {
                    var s = r(l, {
                        declaredClass: "esri.renderer.VectorFieldRenderer",
                        iconFolderPath: "../images/symbol/sfs/",
                        constructor: function (a) {
                            h.isDefined(a) || (a = {});
                            a.attributeField = a.attributeField || "Magnitude";
                            a.rotationInfo = a.rotationInfo || this._getRotationInfo(a);
                            r.safeMixin(this, a);
                            this.style = this.style || s.STYLE_SINGLE_ARROW;
                            this.singleArrowSymbol && (this.singleArrowSymbol = this.singleArrowSymbol.declaredClass ? this.singleArrowSymbol : m.fromJson(this.singleArrowSymbol));
                            this.renderer =
                                new e(this._getDefaultSymbol(), a.attributeField);
                            this._updateRenderer(this.style);
                            this.flowRepresentation = this.flowRepresentation || this.FLOW_FROM
                        },
                        getSymbol: function (a) {
                            return this.renderer && this.renderer.getSymbol(a)
                        },
                        setVisualVariables: function (a) {
                            a = g.filter(a, function (a) {
                                if ("sizeInfo" === a.type) return h.isDefined(this._updateSizeInfo(a))
                            }, this);
                            this.inherited(arguments);
                            return this
                        },
                        setSizeInfo: function (a) {
                            this._updateSizeInfo(a);
                            this.inherited(arguments);
                            return this
                        },
                        setProportionalSymbolInfo: function (a) {
                            this.setSizeInfo(a);
                            return this
                        },
                        setColorInfo: function (a) {
                            return this
                        },
                        _updateRenderer: function (a) {
                            return !h.isDefined(this.renderer) ? Error("Invalid Renderer!") : a === s.STYLE_SINGLE_ARROW ? this._createSingleArrowRenderer() : a === s.STYLE_BEAUFORT_KN ? this._createBeaufortKnotsRenderer() : a === s.STYLE_BEAUFORT_METER ? this._createBeaufortMeterRenderer() : a === s.STYLE_BEAUFORT_FEET ? this._createBeaufortFeetRenderer() : a === s.STYLE_BEAUFORT_MILE ? this._createBeaufortMilesRenderer() : a === s.STYLE_BEAUFORT_KM ? this._createBeaufortKilometersRenderer() :
                                a === s.STYLE_OCEAN_CURRENT_M ? this._createCurrentMeterRenderer() : a === s.STYLE_OCEAN_CURRENT_KN ? this._createCurrentKnotsRenderer() : a === s.STYLE_SCALAR ? this._createSimpleScalarRenderer() : a === s.STYLE_WIND_BARBS ? this._createWindBarbsRenderer() : this._createClassifiedArrowRenderer()
                        },
                        _updateSizeInfo: function (a) {
                            return a && h.isDefined(a.minSize) && h.isDefined(a.maxSize) && h.isDefined(a.minDataValue) && h.isDefined(a.maxDataValue) ? (this.style === s.STYLE_WIND_BARBS && (a.minSize = a.maxSize), a.field = a.field || "Magnitude",
                                a.type = "sizeInfo", a) : null
                        },
                        _createClassifiedArrowRenderer: function () {
                            this.renderer.defaultSymbol = this._getDefaultSymbol(new k([56, 168, 0]));
                            var a = [0, 1E-6, 3.5, 7, 10.5, 14];
                            if (h.isDefined(this.minDataValue) && h.isDefined(this.maxDataValue)) {
                                var b = (this.maxDataValue - this.minDataValue) / 5,
                                    a = [],
                                    c, d;
                                d = this.minDataValue;
                                for (c = 0; 6 > c; c++) a[c] = d, d += b
                            }
                            this._addBreaks(a, [[56, 168, 0], [139, 309, 0], [255, 255, 0], [255, 128, 0], [255, 0, 0]])
                        },
                        _createSingleArrowRenderer: function () {
                            this.renderer.defaultSymbol = this.singleArrowSymbol ||
                                this._getDefaultSymbol()
                        },
                        _createBeaufortMeterRenderer: function () {
                            this.renderer.defaultSymbol = this._getDefaultSymbol(new k([214, 47, 39]));
                            this._addBreaks([0, 0.2, 1.8, 3.3, 5.4, 8.5, 11, 14.1, 17.2, 20.8, 24.4, 28.6, 32.7], [[69, 117, 181], [101, 137, 184], [132, 158, 186], [162, 180, 189], [192, 204, 190], [222, 227, 191], [255, 255, 191], [255, 220, 161], [250, 185, 132], [245, 152, 105], [237, 117, 81], [232, 21, 21]])
                        },
                        _createBeaufortKnotsRenderer: function () {
                            this.renderer.defaultSymbol = this._getDefaultSymbol(new k([214, 47, 39]));
                            this._addBreaks([0,
1, 3, 6, 10, 16, 21, 27, 33, 40, 47, 55, 63], [[40, 146, 199], [89, 162, 186], [129, 179, 171], [160, 194, 155], [191, 212, 138], [218, 230, 119], [250, 250, 100], [252, 213, 83], [252, 179, 102], [250, 141, 52], [247, 110, 42], [240, 71, 29]])
                        },
                        _createBeaufortFeetRenderer: function () {
                            var a = [0, 0.2, 1.8, 3.3, 5.4, 8.5, 11, 14.1, 17.2, 20.8, 24.4, 28.6, 32.7];
                            g.forEach(a, function (b, c) {
                                a[c] *= 3.28084
                            });
                            this.renderer.defaultSymbol = this._getDefaultSymbol(new k([214, 47, 39]));
                            this._addBreaks(a, [[69, 117, 181], [101, 137, 184], [132, 158, 186], [162, 180, 189], [192, 204, 190],
[222, 227, 191], [255, 255, 191], [255, 220, 161], [250, 185, 132], [245, 152, 105], [237, 117, 81], [232, 21, 21]])
                        },
                        _createBeaufortMilesRenderer: function () {
                            var a = [0, 0.2, 1.8, 3.3, 5.4, 8.5, 11, 14.1, 17.2, 20.8, 24.4, 28.6, 32.7];
                            g.forEach(a, function (b, c) {
                                a[c] *= 2.23694
                            });
                            this.renderer.defaultSymbol = this._getDefaultSymbol(new k([214, 47, 39]));
                            this._addBreaks(a, [[69, 117, 181], [101, 137, 184], [132, 158, 186], [162, 180, 189], [192, 204, 190], [222, 227, 191], [255, 255, 191], [255, 220, 161], [250, 185, 132], [245, 152, 105], [237, 117, 81], [232, 21, 21]])
                        },
                        _createBeaufortKilometersRenderer: function () {
                            var a = [0, 0.2, 1.8, 3.3, 5.4, 8.5, 11, 14.1, 17.2, 20.8, 24.4, 28.6, 32.7];
                            g.forEach(a, function (b, c) {
                                a[c] *= 3.6
                            });
                            this.renderer.defaultSymbol = this._getDefaultSymbol(new k([214, 47, 39]));
                            this._addBreaks(a, [[69, 117, 181], [101, 137, 184], [132, 158, 186], [162, 180, 189], [192, 204, 190], [222, 227, 191], [255, 255, 191], [255, 220, 161], [250, 185, 132], [245, 152, 105], [237, 117, 81], [232, 21, 21]])
                        },
                        _createCurrentMeterRenderer: function () {
                            this.renderer.defaultSymbol = this._getDefaultSymbol(new k([177, 177, 177]));
                            this._addBreaks([0, 0.5, 1, 1.5, 2], [[78,
26, 153], [179, 27, 26], [202, 128, 26], [177, 177, 177]])
                        },
                        _createCurrentKnotsRenderer: function () {
                            this.renderer.defaultSymbol = this._getDefaultSymbol(new k([177, 177, 177]));
                            this._addBreaks([0, 0.25, 0.5, 1, 1.5, 2, 2.5, 3, 3.5, 4], [[0, 0, 0], [0, 37, 100], [78, 26, 153], [151, 0, 100], [179, 27, 26], [177, 78, 26], [202, 128, 26], [177, 179, 52], [177, 177, 177]])
                        },
                        _createSimpleScalarRenderer: function () {
                            this.renderer.defaultSymbol = new b({
                                url: t.toUrl(this.iconFolderPath + "scalar.png"),
                                height: 20,
                                width: 20,
                                type: "esriPMS",
                                angle: 0
                            })
                        },
                        _createWindBarbsRenderer: function () {
                            var a = [],
                                f, e;
                            for (f = 0; 150 >= f; f += 5) a.push(f);
                            e = "M20 20 M5 20 A15 15 0 1 0 35 20 A15 15 0 1 0 5 20 M20 20 M10 20 A10 10 0 1 0 30 20 A10 10 0 1 0 10 20;M25 0 L25 40 M25 35 L17.5 37.5;M25 0 L25 40 L10 45 L25 40;M25 0 L25 40 L10 45 L25 40 M25 35 L17.5 37.5;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L17.5 32.5;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5;M25 0 L25 40 L10 40 L25 35;M25 0 L25 40 L10 40 L25 35 M25 30 L17.5 32.5;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L17.5 17.5;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20 L25 15 M25 10 L17.5 12.5;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L17.5 27.5;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L17.5 22.5;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L17.5 17.5;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L10 15;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L10 15 M25 10 M25 5 L17.5 7.5".split(";");
                            var g = new b({
                                url: t.toUrl(this.iconFolderPath + "windbarb.png"),
                                height: 20,
                                width: 20,
                                type: "esriPMS",
                                angle: 0
                            });
                            this.renderer.defaultSymbol = g;
                            for (f = 0; f < a.length - 1; f++) 0 == f ? this.renderer.addBreak({
                                minValue: a[f],
                                maxValue: a[f + 1],
                                symbol: g
                            }) : this.renderer.addBreak({
                                minValue: a[f],
                                maxValue: a[f + 1],
                                symbol: (new c).setPath(e[f]).setOutline((new d).setWidth(1.5)).setSize(20).setColor(new k([0, 0, 0, 255]))
                            })
                        },
                        _getDefaultSymbol: function (a) {
                            return (new c).setPath("M14,32 14,18 9,23 16,3 22,23 17,18 17,32 z").setOutline((new d).setWidth(0)).setSize(20).setColor(a ||
                                new k([0, 92, 230]))
                        },
                        _getRotationInfo: function (a) {
                            var b = a && a.flowRepresentation || s.FLOW_FROM,
                                c = a && a.rotationField || "Direction",
                                d = s.FLOW_FROM;
                            return {
                                field: function (a) {
                                    a = a.attributes[c];
                                    return b === d ? a : a + 180
                                },
                                type: "geographic"
                            }
                        },
                        _addBreaks: function (a, b) {
                            if (!h.isDefined(this.renderer)) return Error("Invalid Renderer!");
                            if (!a || !b || !a.length || !b.length || !(a.length >= b.length)) return Error("AddBreaks: Input arguments break values and colors not valid");
                            var c;
                            for (c = 0; c < b.length; c++) this.renderer.addBreak({
                                minValue: a[c],
                                maxValue: a[c + 1],
                                symbol: this._getDefaultSymbol(new k(b[c]))
                            })
                        },
                        toJson: function () {
                            var a = p.mixin(this.inherited(arguments), {
                                type: "vectorField",
                                style: this.style,
                                attributeField: this.attributeField,
                                flowRepresentation: this.flowRepresentation
                            });
                            this.renderer && (this.renderer.defaultSymbol && this.style === s.STYLE_SINGLE_ARROW) && (a.singleArrowSymbol = this.renderer.defaultSymbol.toJson());
                            return h.fixJson(a)
                        }
                    });
                    p.mixin(s, {
                        STYLE_WIND_BARBS: "wind_speed",
                        STYLE_SINGLE_ARROW: "single_arrow",
                        STYLE_CLASSIFIED_ARROW: "classified_arrow",
                        STYLE_BEAUFORT_KN: "beaufort_kn",
                        STYLE_BEAUFORT_METER: "beaufort_m",
                        STYLE_BEAUFORT_MILE: "beaufort_mi",
                        STYLE_BEAUFORT_FEET: "beaufort_ft",
                        STYLE_BEAUFORT_KM: "beaufort_km",
                        STYLE_OCEAN_CURRENT_M: "ocean_current_m",
                        STYLE_OCEAN_CURRENT_KN: "ocean_current_kn",
                        STYLE_SCALAR: "simple_scalar"
                    }, {
                        FLOW_FROM: "flow_from",
                        FLOW_TO: "flow_to"
                    });
                    a("extend-esri") && p.setObject("renderer.VectorFieldRenderer", s, q);
                    return s
                })
        },
        "esri/renderers/DotDensityRenderer": function () {
            define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/dom-construct dojo/has dojox/gfx/_base ../kernel ../lang ../Color ./Renderer ../symbols/PictureFillSymbol ../geometry/ScreenPoint ../geometry/Point".split(" "),
                function (r, p, a, g, q, h, k, l, e, c, b, d, m) {
                    r = r(c, {
                        declaredClass: "esri.renderer.DotDensityRenderer",
                        constructor: function (a) {
                            this.dotSize = a.dotSize || 3;
                            this.dotValue = a.dotValue;
                            this.fields = a.fields;
                            this.outline = a.outline;
                            this.backgroundColor = a.backgroundColor;
                            this.exactCount = a.exactCount || !0;
                            this.dotShape = a.dotShape || "square";
                            this.legendOptions = a.legendOptions;
                            this._exactCountMinArea = 1E4;
                            this._currentMapScale = this._map = this._canvas = null;
                            this._symbolMap = {};
                            this._currentGraphic = this._currentResolution = this._objectIdField =
                                null;
                            this._supportsCanvas = window.CanvasRenderingContext2D ? !0 : !1;
                            window.CanvasRenderingContext2D || console.log("The DotDensityRenderer requires a Canvas enabled Browser.  IE8 and less does not support Canvas.")
                        },
                        getSymbol: function (a) {
                            var c, d;
                            this._currentGraphic = a;
                            if (!this._supportsCanvas) return null;
                            this._map || (this._map = a.getLayer()._map, this._objectIdField = a.getLayer().objectIdField, this._currentMapScale = this._map.getScale(), this._currentResolution = this._map.extent.getWidth() / this._map.width, this._map.on("zoom-end",
                                p.hitch(this, function (a) {
                                    this._currentMapScale = this._map.getScale();
                                    this._currentResolution = a.extent.getWidth() / this._map.width;
                                    this._symbolMap[this._currentMapScale] = {}
                                })));
                            if (this._symbolMap[this._currentMapScale] && this._symbolMap[this._currentMapScale][a.attributes[this._objectIdField]]) return c = this._symbolMap[this._currentMapScale][a.attributes[this._objectIdField]], d = this._getShapeProperties(a), c.setOffset(d.dx, d.dy), c;
                            c = this._generateFieldsCount(this.fields, a.attributes, this.dotValue);
                            d = this._getShapeProperties(a);
                            c = new b(this._generateImageSrc(d.width, d.height, c, d.minXY, d.maxXY), this.outline, d.width, d.height);
                            c.setOffset(d.dx, d.dy);
                            this._symbolMap[this._currentMapScale] || (this._symbolMap[this._currentMapScale] = {});
                            return this._symbolMap[this._currentMapScale][a.attributes[this._objectIdField]] = c
                        },
                        _generateFieldsCount: function (a, b, c) {
                            var d, e;
                            for (e = a.length - 1; 0 <= e; e--) d = b[a[e].name] / c, a[e].numPoints = Math.round(d);
                            return a
                        },
                        _getShapeProperties: function (a) {
                            var b, c, d, e;
                            b = a.geometry.getExtent();
                            b.contains(this._map.extent) &&
                                (b = this._map.extent);
                            d = Math.ceil(b.getWidth() / this._currentResolution);
                            e = Math.ceil(b.getHeight() / this._currentResolution);
                            c = this._map.toScreen(new m(b.xmin, b.ymin, b.spatialReference));
                            b = this._map.toScreen(new m(b.xmax, b.ymax, b.spatialReference));
                            a = a.getLayer().getNode().getCTM();
                            return {
                                minXY: c,
                                maxXY: b,
                                dx: (c.x - a.e) % d,
                                dy: (b.y - a.f) % e,
                                width: d,
                                height: e
                            }
                        },
                        _generateImageSrc: function (a, b, c, d, e, g) {
                            var h = this.dotSize,
                                m, l, k;
                            this._canvas ? (this._canvas.width = a, this._canvas.height = b) : this._canvas = this._initCanvas(a,
                                b);
                            m = this._canvas.getContext("2d");
                            if (g = g || this.backgroundColor) m.fillStyle = g.toCss(!0), m.fillRect(0, 0, a, b), m.fill();
                            for (g = c.length - 1; 0 <= g; g--) {
                                m.fillStyle = c[g].color.toCss(!0);
                                for (l = c[g].numPoints - 1; 0 <= l; l--) k = this._getRandomPoint(a, b, d, e), "square" === this.dotShape ? m.fillRect(k.x, k.y, h, h) : "circle" === this.dotShape && (m.beginPath(), m.arc(k.x, k.y, h / 2, 0, 2 * Math.PI, !0)), m.fill()
                            }
                            return this._canvas.toDataURL()
                        },
                        _initCanvas: function (a, b) {
                            var c = g.create("canvas", {
                                    id: "canvas",
                                    width: a + "px",
                                    height: b + "px",
                                    style: "position: absolute; left: -10000px; top: 0px;"
                                },
                                null);
                            document.body.appendChild(c);
                            return c
                        },
                        _getRandomInt: function (a, b) {
                            return Math.floor(Math.random() * (b - a + 1) + a)
                        },
                        _getRandomPoint: function (a, b, c, f) {
                            var e = {},
                                g = this.outline && this.outline.width ? this.outline.width : 0;
                            if (!0 === this.exactCount && a * b > this._exactCountMinArea) {
                                do e.x = this._getRandomInt(c.x, f.x), e.y = this._getRandomInt(f.y, c.y), a = new d(e.x, e.y), a = this._checkPointShapeBounds(a, this.dotSize + g, this._currentGraphic.geometry), !0 === a && (e.x -= c.x, e.y -= f.y); while (!1 === a)
                            } else e.x = this._getRandomInt(0,
                                a), e.y = this._getRandomInt(0, b);
                            return e
                        },
                        _checkPointShapeBounds: function (a, b, c) {
                            var d = null,
                                d = !1,
                                e = !0,
                                g = 0;
                            do {
                                switch (g) {
                                case 1:
                                    a.x += b;
                                    break;
                                case 2:
                                    a.y += b;
                                    break;
                                case 3:
                                    a.x -= b
                                }
                                d = this._map.toMap(a);
                                d = c.contains(d);
                                !1 === d && (e = !1);
                                g += 1
                            } while (3 >= g && !0 === e);
                            return d
                        },
                        setDotSize: function (a) {
                            0 < a && (this.dotSize = a)
                        },
                        setDotValue: function (a) {
                            0 < a && (this.dotValue = a)
                        },
                        setOutline: function (a) {
                            this.outline = a
                        },
                        setBackgroundColor: function (a) {
                            this.backgroundColor = a
                        },
                        toJson: function () {
                            var b = p.mixin(this.inherited(arguments), {
                                type: "dotDensity",
                                backgroundColor: e.toJsonColor(this.backgroundColor),
                                dotShape: this.dotShape,
                                dotSize: 0 < this.dotSize ? h.px2pt(this.dotSize) : 0,
                                dotValue: this.dotValue,
                                fields: a.map(this.fields, function (a) {
                                    return l.fixJson({
                                        color: e.toJsonColor(a.color),
                                        name: a.name
                                    })
                                }),
                                legendOptions: this.legendOptions && l.fixJson({
                                    backgroundColor: e.toJsonColor(this.legendOptions.backgroundColor),
                                    dotCoverage: this.legendOptions.dotCoverage,
                                    outline: this.legendOptions.outline && this.legendOptions.outline.toJson(),
                                    valueUnit: this.legendOptions.valueUnit
                                }),
                                outline: this.outline && this.outline.toJson()
                            });
                            return l.fixJson(b)
                        }
                    });
                    q("extend-esri") && p.setObject("renderer.DotDensityRenderer", r, k);
                    return r
                })
        },
        "esri/renderers/ScaleDependentRenderer": function () {
            define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ./Renderer".split(" "), function (r, p, a, g, q, h, k) {
                r = r(k, {
                    declaredClass: "esri.renderer.ScaleDependentRenderer",
                    constructor: function (a) {
                        this.setRendererInfos(a && a.rendererInfos || [])
                    },
                    setRendererInfos: function (a) {
                        this.rendererInfos =
                            a;
                        this._setRangeType();
                        return this
                    },
                    getSymbol: function (a) {
                        var e = this.getRendererInfo(a);
                        return e && e.renderer && e.renderer.getSymbol(a)
                    },
                    getRendererInfo: function (a) {
                        a = a.getLayer().getMap();
                        return "zoom" === this.rangeType ? this.getRendererInfoByZoom(a.getZoom()) : this.getRendererInfoByScale(a.getScale())
                    },
                    getRendererInfoByZoom: function (a) {
                        var e, c = this.rendererInfos,
                            b, d = 0;
                        do e = c[d], a >= e.minZoom && a <= e.maxZoom && (b = e), d++; while (!b && d < c.length);
                        return b
                    },
                    getRendererInfoByScale: function (a) {
                        var e, c = this.rendererInfos,
                            b, d = 0,
                            g, h, k, n;
                        do e = c[d], g = e.minScale, h = e.maxScale, k = !g, n = !h, !k && a <= g && (k = !0), !n && a >= h && (n = !0), k && n && (b = e), d++; while (!b && d < c.length);
                        return b
                    },
                    addRendererInfo: function (a) {
                        var e, c = 0,
                            b, d = this.rendererInfos,
                            g = a.hasOwnProperty("minZoom") ? "minZoom" : "minScale",
                            h = d.length;
                        do {
                            b = d[c];
                            if (h === c || a[g] < b[g]) d.splice(c, 0, a), this._setRangeType(), e = !0;
                            c++
                        } while (!e && c < h);
                        return this
                    },
                    _setRangeType: function () {
                        var a = this.rendererInfos;
                        if (a = a && a[0]) this.rangeType = a.hasOwnProperty("minZoom") ? "zoom" : a.hasOwnProperty("minScale") ?
                            "scale" : ""
                    },
                    toJson: function () {
                        if ("zoom" === this.rangeType) return null;
                        var g = this.rendererInfos || [],
                            e = g[0] && g[0].minScale,
                            g = a.mixin(this.inherited(arguments), {
                                type: "scaleDependent",
                                minScale: 0 < e ? e : 0,
                                rendererInfos: p.map(g, function (a) {
                                    return h.fixJson({
                                        maxScale: 0 < a.maxScale ? a.maxScale : 0,
                                        renderer: a.renderer && a.renderer.toJson()
                                    })
                                })
                            });
                        return h.fixJson(g)
                    }
                });
                g("extend-esri") && a.setObject("renderer.ScaleDependentRenderer", r, q);
                return r
            })
        },
        "esri/renderers/HeatmapRenderer": function () {
            define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/dom-construct ../sniff ../kernel ../lang ../symbols/PictureMarkerSymbol ../Color ./Renderer".split(" "),
                function (r, p, a, g, q, h, k, l, e, c) {
                    r = r([c], {
                        declaredClass: "esri.renderer.HeatmapRenderer",
                        colors: null,
                        blurRadius: 10,
                        maxPixelIntensity: 100,
                        minPixelIntensity: 0,
                        field: null,
                        fieldOffset: null,
                        colorStops: null,
                        constructor: function (a) {
                            (this._supportsCanvas = window.CanvasRenderingContext2D ? !0 : !1) ? ("string" == typeof a && (a = JSON.parse(a)), p.mixin(this, a), this._canvas = null, !this.colors && !this.colorStops && (this.colorStops = [{
                                    ratio: 0,
                                    color: "rgba(255, 140, 0, 0)"
                                }, {
                                    ratio: 0.75,
                                    color: "rgba(255, 140, 0, 1)"
                                }, {
                                    ratio: 0.9,
                                    color: "rgba(255, 0,   0, 1)"
                                }]),
                                this.gradient = this._generateGradient(this.colorStops || this.colors)) : console.log("The HeatmapRenderer requires a Canvas enabled Browser.  IE8 and less does not support Canvas.")
                        },
                        getSymbol: function (a) {
                            if (!this._supportsCanvas) return !1;
                            var c = a.attributes.imageData;
                            a = a.attributes.size;
                            if (!a) return null;
                            var e = this._getContext(a[0], a[1]),
                                g = e.getImageData(0, 0, a[0], a[1]);
                            window.ArrayBuffer && c instanceof ArrayBuffer ? c = window.Uint8ClampedArray ? new Uint8ClampedArray(c) : new Uint8Array(c) : c.BYTES_PER_ELEMENT &&
                                1 !== c.BYTES_PER_ELEMENT && (c = window.Uint8ClampedArray ? new Uint8ClampedArray(c.buffer) : new Uint8Array(c.buffer));
                            if (window.CanvasPixelArray && g.data instanceof window.CanvasPixelArray)
                                for (var h = g.data, n = h.length; n--;) h[n] = c[n];
                            else g.data.set(c);
                            e.putImageData(g, 0, 0);
                            return new l(e.canvas.toDataURL(), a[0], a[1])
                        },
                        setColors: function (a) {
                            if (a && (a instanceof Array || a.colors)) this.gradient = this._generateGradient(a.colors || a), this.colors = a;
                            return this
                        },
                        setColorStops: function (a) {
                            if (a && (a instanceof Array || a.colorStops)) this.gradient =
                                this._generateGradient(a.colorStops || a), this.colorStops = a;
                            return this
                        },
                        setMaxPixelIntensity: function (a) {
                            this.maxPixelIntensity = a;
                            return this
                        },
                        setMinPixelIntensity: function (a) {
                            this.minPixelIntensity = a;
                            return this
                        },
                        setField: function (a) {
                            this.field = a;
                            return this
                        },
                        setFieldOffset: function (a) {
                            this.fieldOffset = a;
                            return this
                        },
                        setBlurRadius: function (a) {
                            this.blurRadius = a;
                            return this
                        },
                        getStats: function () {},
                        getHistogramData: function () {},
                        toJson: function () {
                            var b = p.mixin(this.inherited(arguments), {
                                type: "heatmap",
                                blurRadius: this.blurRadius,
                                colorStops: this._colorsToStops(this.colorStops || this.colors),
                                maxPixelIntensity: this.maxPixelIntensity,
                                minPixelIntensity: this.minPixelIntensity,
                                field: this.field
                            });
                            null != this.fieldOffset && (b.fieldOffset = this.fieldOffset);
                            a.forEach(b.colorStops, function (a) {
                                a.color = e.toJsonColor(a.color)
                            });
                            return k.fixJson(b)
                        },
                        _getContext: function (a, c) {
                            this._canvas ? (this._canvas.width = a, this._canvas.height = c) : this._canvas = this._initCanvas(a, c);
                            return this._canvas.getContext("2d")
                        },
                        _initCanvas: function (a,
                            c) {
                            var e = g.create("canvas", {
                                id: "hm_canvas-" + Math.floor(1E3 * Math.random()),
                                style: "position: absolute; left: 0px; top: -10000px;"
                            }, null);
                            e.width = a;
                            e.height = c;
                            document.body.appendChild(e);
                            return e
                        },
                        _generateGradient: function (a, c) {
                            c || (c = 512);
                            for (var e = this._colorsToStops(a), g = this._getContext(1, c || 512), h = g.createLinearGradient(0, 0, 0, c), n = 0, f; n < e.length; n++) f = e[n], h.addColorStop(f.ratio, f.color.toCss(!0));
                            g.fillStyle = h;
                            g.fillRect(0, 0, 1, c);
                            return g.getImageData(0, 0, 1, c).data
                        },
                        _colorsToStops: function (b) {
                            var c = [];
                            if (!b[0]) return c;
                            if (null != b[0].ratio) c = a.map(b, function (a) {
                                return {
                                    ratio: a.ratio,
                                    color: this._toColor(a.color)
                                }
                            }, this);
                            else if (null != b[0].value) {
                                var e = Infinity,
                                    c = -Infinity,
                                    g = 0,
                                    h;
                                for (h = 0; h < b.length; h++) {
                                    var n = b[h].value;
                                    n < e && (e = n);
                                    n > c && (c = n)
                                }
                                g = c - e;
                                this.maxPixelIntensity = c;
                                this.minPixelIntensity = e;
                                c = a.map(b, function (a) {
                                    var b = a.value;
                                    a = this._toColor(a.color);
                                    return {
                                        value: b,
                                        ratio: (b - e) / g,
                                        color: a
                                    }
                                }, this)
                            } else var f = b.length - 1,
                                c = a.map(b, function (a, b) {
                                    return {
                                        color: this._toColor(a),
                                        ratio: b / f
                                    }
                                }, this);
                            return c
                        },
                        _toColor: function (a) {
                            !a.toRgba && !a.declaredClass && (a = new e(a));
                            return a
                        }
                    });
                    q("extend-esri") && p.setObject("renderer.HeatmapRenderer", r, h);
                    return r
                })
        },
        "esri/utils": function () {
            define("./domUtils ./lang ./urlUtils ./request ./tileUtils ./graphicsUtils ./deferredUtils ./layerUtils ./geometry/normalizeUtils".split(" "), function () {
                return {}
            })
        },
        "esri/graphicsUtils": function () {
            define(["dojo/_base/lang", "dojo/_base/array", "dojo/has", "./kernel", "./geometry/Extent"], function (r, p, a, g, q) {
                var h = {
                    graphicsExtent: function (a) {
                        if (!a ||
                            !a.length) return null;
                        var g = a[0].geometry,
                            e = g.getExtent(),
                            c, b, d = a.length;
                        null === e && (e = new q(g.x, g.y, g.x, g.y, g.spatialReference));
                        for (b = 1; b < d; b++) c = (g = a[b].geometry).getExtent(), null === c && (c = new q(g.x, g.y, g.x, g.y, g.spatialReference)), e = e.union(c);
                        return 0 > e.getWidth() && 0 > e.getHeight() ? null : e
                    },
                    getGeometries: function (a) {
                        return p.map(a, function (a) {
                            return a.geometry
                        })
                    },
                    _encodeGraphics: function (a, g) {
                        var e = [],
                            c, b, d;
                        p.forEach(a, function (a, h) {
                            c = a.toJson();
                            b = {};
                            c.geometry && (d = g && g[h], b.geometry = d && d.toJson() ||
                                c.geometry);
                            c.attributes && (b.attributes = c.attributes);
                            e[h] = b
                        });
                        return e
                    }
                };
                a("extend-esri") && r.mixin(g, h);
                return h
            })
        },
        "esri/IdentityManager": function () {
            define(["./IdentityManagerDialog", "./kernel", "./OAuthSignInHandler", "dojo/_base/declare"], function (r, p, a, g) {
                r = new r;
                p.id = g.safeMixin(r, a);
                return p.id
            })
        },
        "esri/IdentityManagerDialog": function () {
            define("dojo/_base/kernel dojo/_base/declare dojo/_base/config dojo/_base/Deferred dojo/_base/lang dojo/has dojo/dom-attr dojo/keys dijit/registry dijit/Dialog ./kernel ./lang ./domUtils ./Credential ./IdentityManagerBase dojo/i18n!./nls/jsapi dojo/query dijit/form/Button dijit/form/Form dijit/form/ValidationTextBox".split(" "),
                function (r, p, a, g, q, h, k, l, e, c, b, d, m, t, s, n) {
                    p = p([s], {
                        declaredClass: "esri.IdentityManager",
                        _eventMap: {
                            "dialog-cancel": ["info"]
                        },
                        constructor: function (a) {
                            q.mixin(this, a);
                            this.registerConnectEvents()
                        },
                        _dialogContent: "\x3cdiv data-dojo-type\x3d'dijit.form.Form' data-dojo-props\x3d'\"class\":\"esriIdForm\"'\x3e\x3cdiv class\x3d'dijitDialogPaneContentArea'\x3e\x3cdiv style\x3d'padding-bottom: 5px; word-wrap: break-word;'\x3e${info}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'esriErrorMsg' style\x3d'display: none; color: white; background-color: #D46464; text-align: center; padding-top: 3px; padding-bottom: 3px;'\x3e${invalidUser}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3ctable style\x3d'width: 100%;'\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel\x3e${lblUser}\x3c/label\x3e\x3cbr/\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' data-dojo-props\x3d'type:\"text\", \"class\":\"esriIdUser\", required:true, trim:true, style:\"width: 100%;\", autocapitalize:\"none\", autocorrect:\"off\", spellcheck:false' /\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel\x3e${lblPwd}\x3c/label\x3e\x3cbr/\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' data-dojo-props\x3d'type:\"password\", \"class\":\"esriIdPwd\", required:true, style:\"width: 100%;\"' /\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\x3c/div\x3e\x3cdiv class\x3d'dijitDialogPaneActionBar'\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdSubmit\"'\x3e${lblOk}\x3c/button\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdCancel\"'\x3e${lblCancel}\x3c/button\x3e\x3c/div\x3e\x3c/div\x3e",
                        onDialogCreate: function () {},
                        onDialogCancel: function () {},
                        signIn: function (b, c, d) {
                            this._nls || (this._nls = n.identity);
                            this._loginDialog || (this._loginDialog = this.dialog = this._createLoginDialog(), this.onDialogCreate());
                            var e = this._loginDialog,
                                h = d && d.error,
                                l = d && d.token,
                                q = new g(function () {
                                    e.onCancel()
                                });
                            if (e.open) return b = Error("BUSY"), b.code = "IdentityManager.1", b.log = a.isDebug, q.errback(b), q;
                            m.hide(e.errMsg_);
                            h && (403 == h.code && l) && (k.set(e.errMsg_, "innerHTML", this._nls.forbidden), m.show(e.errMsg_));
                            e.dfd_ =
                                q;
                            e.serverInfo_ = c;
                            e.resUrl_ = b;
                            e.admin_ = d && d.isAdmin;
                            k.set(e.resLink_, {
                                title: b,
                                innerHTML: "(" + (this.getResourceName(b) || this._nls.lblItem) + ")"
                            });
                            k.set(e.serverLink_, {
                                title: c.server,
                                innerHTML: (-1 !== c.server.toLowerCase().indexOf("arcgis.com") ? "ArcGIS Online" : c.server) + " "
                            });
                            e.txtPwd_.set("value", "");
                            e.show();
                            return q
                        },
                        _createLoginDialog: function () {
                            var f = this._nls,
                                g = d.substitute(f, this._dialogContent),
                                g = d.substitute({
                                    resource: "\x3cspan class\x3d'resLink' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e",
                                    server: "\x3cspan class\x3d'serverLink' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e"
                                }, g),
                                h = new c({
                                    title: f.title,
                                    content: g,
                                    "class": "esriSignInDialog",
                                    style: "width: 18em;",
                                    esriIdMgr_: this,
                                    keypressed_: function (a) {
                                        a.charOrCode === l.ENTER && this.execute_()
                                    },
                                    execute_: function () {
                                        var a = this.txtUser_.get("value"),
                                            e = this.txtPwd_.get("value"),
                                            g = this.dfd_,
                                            h = this;
                                        if (this.form_.validate() && a && e) {
                                            this.btnSubmit_.set("label", f.lblSigning);
                                            var n = b.id.findCredential(h.resUrl_, a),
                                                l = function (b) {
                                                    h.btnSubmit_.set("label",
                                                        f.lblOk);
                                                    h.btnSubmit_.set("disabled", !1);
                                                    m.hide(h.errMsg_);
                                                    h.hide();
                                                    c._DialogLevelManager.hide(h);
                                                    var e = h.serverInfo_;
                                                    h.dfd_ = h.serverInfo_ = h.generateDfd_ = h.resUrl_ = null;
                                                    var k, l, q = n,
                                                        p;
                                                    b && (k = b.token, l = d.isDefined(b.expires) ? Number(b.expires) : null, p = !!b.ssl, q ? (q.userId = a, q.token = k, q.expires = l, q.validity = b.validity, q.ssl = p, q.creationTime = (new Date).getTime()) : q = new t({
                                                        userId: a,
                                                        server: e.server,
                                                        token: k,
                                                        expires: l,
                                                        ssl: p,
                                                        isAdmin: h.admin_,
                                                        validity: b.validity
                                                    }));
                                                    g.callback(q)
                                                };
                                            n && !n._enqueued ? l() : (h.btnSubmit_.set("disabled", !0), h.generateDfd_ = b.id.generateToken(this.serverInfo_, {
                                                username: a,
                                                password: e
                                            }, {
                                                isAdmin: this.admin_
                                            }).addCallback(l).addErrback(function (a) {
                                                h.btnSubmit_.set("disabled", !1);
                                                h.generateDfd_ = null;
                                                h.btnSubmit_.set("label", f.lblOk);
                                                k.set(h.errMsg_, "innerHTML", a && a.code ? f.invalidUser : f.noAuthService);
                                                m.show(h.errMsg_)
                                            }))
                                        }
                                    },
                                    cancel_: function () {
                                        h.generateDfd_ && h.generateDfd_.cancel();
                                        var b = h.dfd_,
                                            d = h.resUrl_,
                                            f = h.serverInfo_;
                                        h.btnSubmit_.set("disabled", !1);
                                        h.dfd_ = h.serverInfo_ = h.generateDfd_ = h.resUrl_ = null;
                                        m.hide(h.errMsg_);
                                        c._DialogLevelManager.hide(h);
                                        h.esriIdMgr_.onDialogCancel({
                                            resourceUrl: d,
                                            serverInfo: f
                                        });
                                        d = Error("ABORTED");
                                        d.code = "IdentityManager.2";
                                        d.log = a.isDebug;
                                        b.errback(d)
                                    }
                                }),
                                g = h.domNode;
                            h.form_ = e.byNode(r.query(".esriIdForm", g)[0]);
                            h.txtUser_ = e.byNode(r.query(".esriIdUser", g)[0]);
                            h.txtPwd_ = e.byNode(r.query(".esriIdPwd", g)[0]);
                            h.btnSubmit_ = e.byNode(r.query(".esriIdSubmit", g)[0]);
                            h.btnCancel_ = e.byNode(r.query(".esriIdCancel", g)[0]);
                            h.resLink_ = r.query(".resLink", g)[0];
                            h.serverLink_ = r.query(".serverLink",
                                g)[0];
                            h.errMsg_ = r.query(".esriErrorMsg", g)[0];
                            h.connect(h.txtUser_, "onKeyPress", h.keypressed_);
                            h.connect(h.txtPwd_, "onKeyPress", h.keypressed_);
                            h.connect(h.btnSubmit_, "onClick", h.execute_);
                            h.connect(h.btnCancel_, "onClick", h.onCancel);
                            h.connect(h, "onCancel", h.cancel_);
                            return h
                        }
                    });
                    h("extend-esri") && (b.IdentityManagerDialog = b.IdentityManager = p);
                    return p
                })
        },
        "dijit/Dialog": function () {
            define("require dojo/_base/array dojo/aspect dojo/_base/declare dojo/Deferred dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/fx dojo/i18n dojo/keys dojo/_base/lang dojo/on dojo/ready dojo/sniff dojo/window dojo/dnd/Moveable dojo/dnd/TimedMoveable ./focus ./_base/manager ./_Widget ./_TemplatedMixin ./_CssStateMixin ./form/_FormMixin ./_DialogMixin ./DialogUnderlay ./layout/ContentPane ./layout/utils dojo/text!./templates/Dialog.html ./a11yclick dojo/i18n!./nls/common".split(" "),
                function (r, p, a, g, q, h, k, l, e, c, b, d, m, t, s, n, f, y, u, w, C, x, v, A, z, H, D, F, E, Q) {
                    function R() {}
                    var G = new q;
                    G.resolve(!0);
                    C = g("dijit._DialogBase" + (n("dojo-bidi") ? "_NoBidi" : ""), [v, z, H, A], {
                        templateString: Q,
                        baseClass: "dijitDialog",
                        cssStateNodes: {
                            closeButtonNode: "dijitDialogCloseIcon"
                        },
                        _setTitleAttr: {
                            node: "titleNode",
                            type: "innerHTML"
                        },
                        open: !1,
                        duration: C.defaultDuration,
                        refocus: !0,
                        autofocus: !0,
                        _firstFocusItem: null,
                        _lastFocusItem: null,
                        draggable: !0,
                        _setDraggableAttr: function (a) {
                            this._set("draggable", a)
                        },
                        maxRatio: 0.9,
                        closable: !0,
                        _setClosableAttr: function (a) {
                            this.closeButtonNode.style.display = a ? "" : "none";
                            this._set("closable", a)
                        },
                        postMixInProperties: function () {
                            var a = b.getLocalization("dijit", "common");
                            m.mixin(this, a);
                            this.inherited(arguments)
                        },
                        postCreate: function () {
                            e.set(this.domNode, {
                                display: "none",
                                position: "absolute"
                            });
                            this.ownerDocumentBody.appendChild(this.domNode);
                            this.inherited(arguments);
                            a.after(this, "onExecute", m.hitch(this, "hide"), !0);
                            a.after(this, "onCancel", m.hitch(this, "hide"), !0);
                            this._modalconnects = []
                        },
                        onLoad: function () {
                            this.resize();
                            this._position();
                            this.autofocus && P.isTop(this) && (this._getFocusItems(), w.focus(this._firstFocusItem));
                            this.inherited(arguments)
                        },
                        focus: function () {
                            this._getFocusItems();
                            w.focus(this._firstFocusItem)
                        },
                        _endDrag: function () {
                            var a = l.position(this.domNode),
                                b = f.getBox(this.ownerDocument);
                            a.y = Math.min(Math.max(a.y, 0), b.h - a.h);
                            a.x = Math.min(Math.max(a.x, 0), b.w - a.w);
                            this._relativePosition = a;
                            this._position()
                        },
                        _setup: function () {
                            var b = this.domNode;
                            this.titleBar && this.draggable ?
                                (this._moveable = new(6 == n("ie") ? u : y)(b, {
                                    handle: this.titleBar
                                }), a.after(this._moveable, "onMoveStop", m.hitch(this, "_endDrag"), !0)) : k.add(b, "dijitDialogFixed");
                            this.underlayAttrs = {
                                dialogId: this.id,
                                "class": p.map(this["class"].split(/\s/), function (a) {
                                    return a + "_underlay"
                                }).join(" "),
                                _onKeyDown: m.hitch(this, "_onKey"),
                                ownerDocument: this.ownerDocument
                            }
                        },
                        _size: function () {
                            this.resize()
                        },
                        _position: function () {
                            if (!k.contains(this.ownerDocumentBody, "dojoMove")) {
                                var a = this.domNode,
                                    b = f.getBox(this.ownerDocument),
                                    c = this._relativePosition,
                                    d = l.position(a),
                                    g = Math.floor(b.l + (c ? Math.min(c.x, b.w - d.w) : (b.w - d.w) / 2)),
                                    b = Math.floor(b.t + (c ? Math.min(c.y, b.h - d.h) : (b.h - d.h) / 2));
                                e.set(a, {
                                    left: g + "px",
                                    top: b + "px"
                                })
                            }
                        },
                        _onKey: function (a) {
                            if (a.keyCode == d.TAB) {
                                this._getFocusItems();
                                var b = a.target;
                                this._firstFocusItem == this._lastFocusItem ? (a.stopPropagation(), a.preventDefault()) : b == this._firstFocusItem && a.shiftKey ? (w.focus(this._lastFocusItem), a.stopPropagation(), a.preventDefault()) : b == this._lastFocusItem && !a.shiftKey && (w.focus(this._firstFocusItem),
                                    a.stopPropagation(), a.preventDefault())
                            } else this.closable && a.keyCode == d.ESCAPE && (this.onCancel(), a.stopPropagation(), a.preventDefault())
                        },
                        show: function () {
                            if (this.open) return G.promise;
                            this._started || this.startup();
                            this._alreadyInitialized || (this._setup(), this._alreadyInitialized = !0);
                            this._fadeOutDeferred && (this._fadeOutDeferred.cancel(), P.hide(this));
                            var a = f.get(this.ownerDocument);
                            this._modalconnects.push(t(a, "scroll", m.hitch(this, "resize", null)));
                            this._modalconnects.push(t(this.domNode, "keydown",
                                m.hitch(this, "_onKey")));
                            e.set(this.domNode, {
                                opacity: 0,
                                display: ""
                            });
                            this._set("open", !0);
                            this._onShow();
                            this.resize();
                            this._position();
                            var b;
                            this._fadeInDeferred = new q(m.hitch(this, function () {
                                b.stop();
                                delete this._fadeInDeferred
                            }));
                            this._fadeInDeferred.then(void 0, R);
                            a = this._fadeInDeferred.promise;
                            b = c.fadeIn({
                                node: this.domNode,
                                duration: this.duration,
                                beforeBegin: m.hitch(this, function () {
                                    P.show(this, this.underlayAttrs)
                                }),
                                onEnd: m.hitch(this, function () {
                                    this.autofocus && P.isTop(this) && (this._getFocusItems(),
                                        w.focus(this._firstFocusItem));
                                    this._fadeInDeferred.resolve(!0);
                                    delete this._fadeInDeferred
                                })
                            }).play();
                            return a
                        },
                        hide: function () {
                            if (!this._alreadyInitialized || !this.open) return G.promise;
                            this._fadeInDeferred && this._fadeInDeferred.cancel();
                            var a;
                            this._fadeOutDeferred = new q(m.hitch(this, function () {
                                a.stop();
                                delete this._fadeOutDeferred
                            }));
                            this._fadeOutDeferred.then(void 0, R);
                            this._fadeOutDeferred.then(m.hitch(this, "onHide"));
                            var b = this._fadeOutDeferred.promise;
                            a = c.fadeOut({
                                node: this.domNode,
                                duration: this.duration,
                                onEnd: m.hitch(this, function () {
                                    this.domNode.style.display = "none";
                                    P.hide(this);
                                    this._fadeOutDeferred.resolve(!0);
                                    delete this._fadeOutDeferred
                                })
                            }).play();
                            this._scrollConnected && (this._scrollConnected = !1);
                            for (var d; d = this._modalconnects.pop();) d.remove();
                            this._relativePosition && delete this._relativePosition;
                            this._set("open", !1);
                            return b
                        },
                        resize: function (a) {
                            if ("none" != this.domNode.style.display) {
                                this._checkIfSingleChild();
                                if (!a) {
                                    this._shrunk && (this._singleChild && "undefined" != typeof this._singleChildOriginalStyle &&
                                        (this._singleChild.domNode.style.cssText = this._singleChildOriginalStyle, delete this._singleChildOriginalStyle), p.forEach([this.domNode, this.containerNode, this.titleBar, this.actionBarNode], function (a) {
                                            a && e.set(a, {
                                                position: "static",
                                                width: "auto",
                                                height: "auto"
                                            })
                                        }), this.domNode.style.position = "absolute");
                                    var b = f.getBox(this.ownerDocument);
                                    b.w *= this.maxRatio;
                                    b.h *= this.maxRatio;
                                    var c = l.position(this.domNode);
                                    c.w >= b.w || c.h >= b.h ? (a = {
                                        w: Math.min(c.w, b.w),
                                        h: Math.min(c.h, b.h)
                                    }, this._shrunk = !0) : this._shrunk = !1
                                }
                                if (a) {
                                    l.setMarginBox(this.domNode,
                                        a);
                                    b = [];
                                    this.titleBar && b.push({
                                        domNode: this.titleBar,
                                        region: "top"
                                    });
                                    this.actionBarNode && b.push({
                                        domNode: this.actionBarNode,
                                        region: "bottom"
                                    });
                                    c = {
                                        domNode: this.containerNode,
                                        region: "center"
                                    };
                                    b.push(c);
                                    var d = E.marginBox2contentBox(this.domNode, a);
                                    E.layoutChildren(this.domNode, d, b);
                                    this._singleChild ? (b = E.marginBox2contentBox(this.containerNode, c), this._singleChild.resize({
                                        w: b.w,
                                        h: b.h
                                    })) : (this.containerNode.style.overflow = "auto", this._layoutChildren())
                                } else this._layoutChildren();
                                !n("touch") && !a && this._position()
                            }
                        },
                        _layoutChildren: function () {
                            p.forEach(this.getChildren(), function (a) {
                                a.resize && a.resize()
                            })
                        },
                        destroy: function () {
                            this._fadeInDeferred && this._fadeInDeferred.cancel();
                            this._fadeOutDeferred && this._fadeOutDeferred.cancel();
                            this._moveable && this._moveable.destroy();
                            for (var a; a = this._modalconnects.pop();) a.remove();
                            P.hide(this);
                            this.inherited(arguments)
                        }
                    });
                    n("dojo-bidi") && (C = g("dijit._DialogBase", C, {
                        _setTitleAttr: function (a) {
                            this._set("title", a);
                            this.titleNode.innerHTML = a;
                            this.applyTextDir(this.titleNode)
                        },
                        _setTextDirAttr: function (a) {
                            this._created && this.textDir != a && (this._set("textDir", a), this.set("title", this.title))
                        }
                    }));
                    var I = g("dijit.Dialog", [F, C], {});
                    I._DialogBase = C;
                    var P = I._DialogLevelManager = {
                            _beginZIndex: 950,
                            show: function (a, b) {
                                K[K.length - 1].focus = w.curNode;
                                var c = K[K.length - 1].dialog ? K[K.length - 1].zIndex + 2 : I._DialogLevelManager._beginZIndex;
                                e.set(a.domNode, "zIndex", c);
                                D.show(b, c - 1);
                                K.push({
                                    dialog: a,
                                    underlayAttrs: b,
                                    zIndex: c
                                })
                            },
                            hide: function (a) {
                                if (K[K.length - 1].dialog == a) {
                                    K.pop();
                                    var b = K[K.length -
                                        1];
                                    1 == K.length ? D.hide() : D.show(b.underlayAttrs, b.zIndex - 1);
                                    if (a.refocus) {
                                        a = b.focus;
                                        if (b.dialog && (!a || !h.isDescendant(a, b.dialog.domNode))) b.dialog._getFocusItems(), a = b.dialog._firstFocusItem;
                                        if (a) try {
                                            a.focus()
                                        } catch (c) {}
                                    }
                                } else b = p.indexOf(p.map(K, function (a) {
                                    return a.dialog
                                }), a), -1 != b && K.splice(b, 1)
                            },
                            isTop: function (a) {
                                return K[K.length - 1].dialog == a
                            }
                        },
                        K = I._dialogStack = [{
                            dialog: null,
                            focus: null,
                            underlayAttrs: null
                        }];
                    w.watch("curNode", function (a, b, c) {
                        a = K[K.length - 1].dialog;
                        if (c && a && !a._fadeOutDeferred &&
                            c.ownerDocument == a.ownerDocument) {
                            do
                                if (c == a.domNode || k.contains(c, "dijitPopup")) return;
                            while (c = c.parentNode);
                            a.focus()
                        }
                    });
                    n("dijit-legacy-requires") && s(0, function () {
                        r(["dijit/TooltipDialog"])
                    });
                    return I
                })
        },
        "dojo/dnd/Moveable": function () {
            define("../_base/array ../_base/declare ../_base/lang ../dom ../dom-class ../Evented ../on ../topic ../touch ./common ./Mover ../_base/window".split(" "), function (r, p, a, g, q, h, k, l, e, c, b, d) {
                return p("dojo.dnd.Moveable", [h], {
                    handle: "",
                    delay: 0,
                    skip: !1,
                    constructor: function (c,
                        d) {
                        this.node = g.byId(c);
                        d || (d = {});
                        this.handle = d.handle ? g.byId(d.handle) : null;
                        this.handle || (this.handle = this.node);
                        this.delay = 0 < d.delay ? d.delay : 0;
                        this.skip = d.skip;
                        this.mover = d.mover ? d.mover : b;
                        this.events = [k(this.handle, e.press, a.hitch(this, "onMouseDown")), k(this.handle, "dragstart", a.hitch(this, "onSelectStart")), k(this.handle, "selectstart", a.hitch(this, "onSelectStart"))]
                    },
                    markupFactory: function (a, b, c) {
                        return new c(b, a)
                    },
                    destroy: function () {
                        r.forEach(this.events, function (a) {
                            a.remove()
                        });
                        this.events = this.node =
                            this.handle = null
                    },
                    onMouseDown: function (b) {
                        if (!this.skip || !c.isFormElement(b)) {
                            if (this.delay) this.events.push(k(this.handle, e.move, a.hitch(this, "onMouseMove")), k(this.handle.ownerDocument, e.release, a.hitch(this, "onMouseUp"))), this._lastX = b.pageX, this._lastY = b.pageY;
                            else this.onDragDetected(b);
                            b.stopPropagation();
                            b.preventDefault()
                        }
                    },
                    onMouseMove: function (a) {
                        if (Math.abs(a.pageX - this._lastX) > this.delay || Math.abs(a.pageY - this._lastY) > this.delay) this.onMouseUp(a), this.onDragDetected(a);
                        a.stopPropagation();
                        a.preventDefault()
                    },
                    onMouseUp: function (a) {
                        for (var b = 0; 2 > b; ++b) this.events.pop().remove();
                        a.stopPropagation();
                        a.preventDefault()
                    },
                    onSelectStart: function (a) {
                        if (!this.skip || !c.isFormElement(a)) a.stopPropagation(), a.preventDefault()
                    },
                    onDragDetected: function (a) {
                        new this.mover(this.node, a, this)
                    },
                    onMoveStart: function (a) {
                        l.publish("/dnd/move/start", a);
                        q.add(d.body(), "dojoMove");
                        q.add(this.node, "dojoMoveItem")
                    },
                    onMoveStop: function (a) {
                        l.publish("/dnd/move/stop", a);
                        q.remove(d.body(), "dojoMove");
                        q.remove(this.node,
                            "dojoMoveItem")
                    },
                    onFirstMove: function () {},
                    onMove: function (a, b) {
                        this.onMoving(a, b);
                        var c = a.node.style;
                        c.left = b.l + "px";
                        c.top = b.t + "px";
                        this.onMoved(a, b)
                    },
                    onMoving: function () {},
                    onMoved: function () {}
                })
            })
        },
        "dojo/dnd/common": function () {
            define(["../sniff", "../_base/kernel", "../_base/lang", "../dom"], function (r, p, a, g) {
                var q = a.getObject("dojo.dnd", !0);
                q.getCopyKeyState = function (a) {
                    return a[r("mac") ? "metaKey" : "ctrlKey"]
                };
                q._uniqueId = 0;
                q.getUniqueId = function () {
                    var a;
                    do a = p._scopeName + "Unique" + ++q._uniqueId; while (g.byId(a));
                    return a
                };
                q._empty = {};
                q.isFormElement = function (a) {
                    a = a.target;
                    3 == a.nodeType && (a = a.parentNode);
                    return 0 <= " a button textarea input select option ".indexOf(" " + a.tagName.toLowerCase() + " ")
                };
                return q
            })
        },
        "dojo/dnd/Mover": function () {
            define("../_base/array ../_base/declare ../_base/lang ../sniff ../_base/window ../dom ../dom-geometry ../dom-style ../Evented ../on ../touch ./common ./autoscroll".split(" "), function (r, p, a, g, q, h, k, l, e, c, b, d, m) {
                return p("dojo.dnd.Mover", [e], {
                    constructor: function (d, e, g) {
                        function f(a) {
                            a.preventDefault();
                            a.stopPropagation()
                        }
                        this.node = h.byId(d);
                        this.marginBox = {
                            l: e.pageX,
                            t: e.pageY
                        };
                        this.mouseButton = e.button;
                        e = this.host = g;
                        d = d.ownerDocument;
                        this.events = [c(d, b.move, a.hitch(this, "onFirstMove")), c(d, b.move, a.hitch(this, "onMouseMove")), c(d, b.release, a.hitch(this, "onMouseUp")), c(d, "dragstart", f), c(d.body, "selectstart", f)];
                        m.autoScrollStart(d);
                        if (e && e.onMoveStart) e.onMoveStart(this)
                    },
                    onMouseMove: function (a) {
                        m.autoScroll(a);
                        var b = this.marginBox;
                        this.host.onMove(this, {
                            l: b.l + a.pageX,
                            t: b.t + a.pageY
                        }, a);
                        a.preventDefault();
                        a.stopPropagation()
                    },
                    onMouseUp: function (a) {
                        (g("webkit") && g("mac") && 2 == this.mouseButton ? 0 == a.button : this.mouseButton == a.button) && this.destroy();
                        a.preventDefault();
                        a.stopPropagation()
                    },
                    onFirstMove: function (a) {
                        var b = this.node.style,
                            c, d = this.host;
                        switch (b.position) {
                        case "relative":
                        case "absolute":
                            c = Math.round(parseFloat(b.left)) || 0;
                            b = Math.round(parseFloat(b.top)) || 0;
                            break;
                        default:
                            b.position = "absolute";
                            b = k.getMarginBox(this.node);
                            c = q.doc.body;
                            var e = l.getComputedStyle(c),
                                g = k.getMarginBox(c, e),
                                e = k.getContentBox(c,
                                    e);
                            c = b.l - (e.l - g.l);
                            b = b.t - (e.t - g.t)
                        }
                        this.marginBox.l = c - this.marginBox.l;
                        this.marginBox.t = b - this.marginBox.t;
                        if (d && d.onFirstMove) d.onFirstMove(this, a);
                        this.events.shift().remove()
                    },
                    destroy: function () {
                        r.forEach(this.events, function (a) {
                            a.remove()
                        });
                        var a = this.host;
                        if (a && a.onMoveStop) a.onMoveStop(this);
                        this.events = this.node = this.host = null
                    }
                })
            })
        },
        "dojo/dnd/autoscroll": function () {
            define("../_base/lang ../sniff ../_base/window ../dom-geometry ../dom-style ../window".split(" "), function (r, p, a, g, q, h) {
                var k = {};
                r.setObject("dojo.dnd.autoscroll", k);
                k.getViewport = h.getBox;
                k.V_TRIGGER_AUTOSCROLL = 32;
                k.H_TRIGGER_AUTOSCROLL = 32;
                k.V_AUTOSCROLL_VALUE = 16;
                k.H_AUTOSCROLL_VALUE = 16;
                var l, e = a.doc,
                    c = Infinity,
                    b = Infinity;
                k.autoScrollStart = function (d) {
                    e = d;
                    l = h.getBox(e);
                    d = a.body(e).parentNode;
                    c = Math.max(d.scrollHeight - l.h, 0);
                    b = Math.max(d.scrollWidth - l.w, 0)
                };
                k.autoScroll = function (d) {
                    var g = l || h.getBox(e),
                        q = a.body(e).parentNode,
                        p = 0,
                        n = 0;
                    d.clientX < k.H_TRIGGER_AUTOSCROLL ? p = -k.H_AUTOSCROLL_VALUE : d.clientX > g.w - k.H_TRIGGER_AUTOSCROLL &&
                        (p = Math.min(k.H_AUTOSCROLL_VALUE, b - q.scrollLeft));
                    d.clientY < k.V_TRIGGER_AUTOSCROLL ? n = -k.V_AUTOSCROLL_VALUE : d.clientY > g.h - k.V_TRIGGER_AUTOSCROLL && (n = Math.min(k.V_AUTOSCROLL_VALUE, c - q.scrollTop));
                    window.scrollBy(p, n)
                };
                k._validNodes = {
                    div: 1,
                    p: 1,
                    td: 1
                };
                k._validOverflow = {
                    auto: 1,
                    scroll: 1
                };
                k.autoScrollNodes = function (b) {
                    for (var c, e, h, n, f, l, r = 0, w = 0, C = b.target; C;) {
                        if (1 == C.nodeType && C.tagName.toLowerCase() in k._validNodes) {
                            h = q.getComputedStyle(C);
                            n = h.overflow.toLowerCase() in k._validOverflow;
                            f = h.overflowX.toLowerCase() in
                                k._validOverflow;
                            l = h.overflowY.toLowerCase() in k._validOverflow;
                            if (n || f || l) c = g.getContentBox(C, h), e = g.position(C, !0);
                            if (n || f) {
                                h = Math.min(k.H_TRIGGER_AUTOSCROLL, c.w / 2);
                                f = b.pageX - e.x;
                                if (p("webkit") || p("opera")) f += a.body().scrollLeft;
                                r = 0;
                                0 < f && f < c.w && (f < h ? r = -h : f > c.w - h && (r = h), C.scrollLeft += r)
                            }
                            if (n || l) {
                                n = Math.min(k.V_TRIGGER_AUTOSCROLL, c.h / 2);
                                l = b.pageY - e.y;
                                if (p("webkit") || p("opera")) l += a.body().scrollTop;
                                w = 0;
                                0 < l && l < c.h && (l < n ? w = -n : l > c.h - n && (w = n), C.scrollTop += w)
                            }
                            if (r || w) return
                        }
                        try {
                            C = C.parentNode
                        } catch (x) {
                            C =
                                null
                        }
                    }
                    k.autoScroll(b)
                };
                return k
            })
        },
        "dojo/dnd/TimedMoveable": function () {
            define(["../_base/declare", "./Moveable"], function (r, p) {
                var a = p.prototype.onMove;
                return r("dojo.dnd.TimedMoveable", p, {
                    timeout: 40,
                    constructor: function (a, q) {
                        q || (q = {});
                        q.timeout && ("number" == typeof q.timeout && 0 <= q.timeout) && (this.timeout = q.timeout)
                    },
                    onMoveStop: function (g) {
                        g._timer && (clearTimeout(g._timer), a.call(this, g, g._leftTop));
                        p.prototype.onMoveStop.apply(this, arguments)
                    },
                    onMove: function (g, q) {
                        g._leftTop = q;
                        if (!g._timer) {
                            var h = this;
                            g._timer = setTimeout(function () {
                                g._timer = null;
                                a.call(h, g, g._leftTop)
                            }, this.timeout)
                        }
                    }
                })
            })
        },
        "dijit/DialogUnderlay": function () {
            define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-attr dojo/dom-style dojo/on dojo/window ./_Widget ./_TemplatedMixin ./BackgroundIframe ./Viewport ./main".split(" "), function (r, p, a, g, q, h, k, l, e, c, b, d) {
                var m = r("dijit.DialogUnderlay", [l, e], {
                    templateString: "\x3cdiv class\x3d'dijitDialogUnderlayWrapper'\x3e\x3cdiv class\x3d'dijitDialogUnderlay' tabIndex\x3d'-1' data-dojo-attach-point\x3d'node'\x3e\x3c/div\x3e\x3c/div\x3e",
                    dialogId: "",
                    "class": "",
                    _modalConnects: [],
                    _setDialogIdAttr: function (a) {
                        g.set(this.node, "id", a + "_underlay");
                        this._set("dialogId", a)
                    },
                    _setClassAttr: function (a) {
                        this.node.className = "dijitDialogUnderlay " + a;
                        this._set("class", a)
                    },
                    postCreate: function () {
                        this.ownerDocumentBody.appendChild(this.domNode);
                        this.own(h(this.domNode, "keydown", p.hitch(this, "_onKeyDown")));
                        this.inherited(arguments)
                    },
                    layout: function () {
                        var a = this.node.style,
                            b = this.domNode.style;
                        b.display = "none";
                        var c = k.getBox(this.ownerDocument);
                        b.top =
                            c.t + "px";
                        b.left = c.l + "px";
                        a.width = c.w + "px";
                        a.height = c.h + "px";
                        b.display = "block"
                    },
                    show: function () {
                        this.domNode.style.display = "block";
                        this.open = !0;
                        this.layout();
                        this.bgIframe = new c(this.domNode);
                        var a = k.get(this.ownerDocument);
                        this._modalConnects = [b.on("resize", p.hitch(this, "layout")), h(a, "scroll", p.hitch(this, "layout"))]
                    },
                    hide: function () {
                        this.bgIframe.destroy();
                        delete this.bgIframe;
                        for (this.domNode.style.display = "none"; this._modalConnects.length;) this._modalConnects.pop().remove();
                        this.open = !1
                    },
                    destroy: function () {
                        for (; this._modalConnects.length;) this._modalConnects.pop().remove();
                        this.inherited(arguments)
                    },
                    _onKeyDown: function () {}
                });
                m.show = function (a, b) {
                    var c = m._singleton;
                    !c || c._destroyed ? c = d._underlay = m._singleton = new m(a) : a && c.set(a);
                    q.set(c.domNode, "zIndex", b);
                    c.open || c.show()
                };
                m.hide = function () {
                    var a = m._singleton;
                    a && !a._destroyed && a.hide()
                };
                return m
            })
        },
        "esri/Credential": function () {
            define(["dojo/_base/declare", "dojo/has", "./kernel", "./IdentityManagerBase"], function (r, p, a, g) {
                r = r(g.Credential, {});
                p("extend-esri") && (a.Credential = r);
                return r
            })
        },
        "esri/IdentityManagerBase": function () {
            define("dojo/_base/declare dojo/_base/config dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/_base/json dojo/_base/url dojo/sniff dojo/cookie dojo/io-query dojo/regexp ./kernel ./config ./lang ./ServerInfo ./urlUtils ./deferredUtils ./request ./Evented ./OAuthCredential ./arcgis/OAuthInfo".split(" "),
                function (r, p, a, g, q, h, k, l, e, c, b, d, m, t, s, n, f, y, u, w, C) {
                    var x = {},
                        v = function (a) {
                            var b = (new k(a.owningSystemUrl)).host;
                            a = (new k(a.server)).host;
                            var c = /.+\.arcgis\.com$/i;
                            return c.test(b) && c.test(a)
                        },
                        A = function (a, b) {
                            return !(!v(a) || !b || !g.some(b, function (b) {
                                return b.test(a.server)
                            }))
                        },
                        z, H = r(u, {
                            declaredClass: "esri.IdentityManagerBase",
                            constructor: function () {
                                this._portalConfig = a.getObject("esriGeowConfig");
                                this.serverInfos = [];
                                this.oAuthInfos = [];
                                this.credentials = [];
                                this._soReqs = [];
                                this._xoReqs = [];
                                this._portals = [];
                                this._getOAuthHash()
                            },
                            defaultOAuthInfo: null,
                            defaultTokenValidity: 60,
                            tokenValidity: null,
                            signInPage: null,
                            useSignInPage: !0,
                            normalizeWebTierAuth: !1,
                            _busy: null,
                            _oAuthHash: null,
                            _gwTokenUrl: "/sharing/generateToken",
                            _agsRest: "/rest/services",
                            _agsPortal: /\/sharing(\/|$)/i,
                            _agsAdmin: /https?:\/\/[^\/]+\/[^\/]+\/admin\/?(\/.*)?$/i,
                            _adminSvcs: /\/admin\/services(\/|$)/i,
                            _agolSuffix: ".arcgis.com",
                            _gwDomains: [{
                                    regex: /https?:\/\/www\.arcgis\.com/i,
                                    tokenServiceUrl: "https://www.arcgis.com/sharing/generateToken"
                                },
                                {
                                    regex: /https?:\/\/dev\.arcgis\.com/i,
                                    tokenServiceUrl: "https://dev.arcgis.com/sharing/generateToken"
                                }, {
                                    regex: /https?:\/\/.*dev[^.]*\.arcgis\.com/i,
                                    tokenServiceUrl: "https://devext.arcgis.com/sharing/generateToken"
                                }, {
                                    regex: /https?:\/\/.*qa[^.]*\.arcgis\.com/i,
                                    tokenServiceUrl: "https://qaext.arcgis.com/sharing/generateToken"
                                }, {
                                    regex: /https?:\/\/.*.arcgis\.com/i,
                                    tokenServiceUrl: "https://www.arcgis.com/sharing/generateToken"
                                }],
                            _legacyFed: [],
                            _regexSDirUrl: /http.+\/rest\/services\/?/ig,
                            _regexServerType: /(\/(MapServer|GeocodeServer|GPServer|GeometryServer|ImageServer|NAServer|FeatureServer|GeoDataServer|GlobeServer|MobileServer|GeoenrichmentServer|VectorTileServer)).*/ig,
                            _gwUser: /http.+\/users\/([^\/]+)\/?.*/i,
                            _gwItem: /http.+\/items\/([^\/]+)\/?.*/i,
                            _gwGroup: /http.+\/groups\/([^\/]+)\/?.*/i,
                            _errorCodes: [499, 498, 403, 401],
                            _rePortalTokenSvc: /\/sharing(\/rest)?\/generatetoken/i,
                            _publicUrls: [/\/arcgis\/tokens/i, /\/sharing(\/rest)?\/generatetoken/i, /\/rest\/info/i],
                            _createDefaultOAuthInfo: !0,
                            _hasTestedIfAppIsOnPortal: !1,
                            registerServers: function (a) {
                                var b = this.serverInfos;
                                b ? (a = g.filter(a, function (a) {
                                        return !this.findServerInfo(a.server)
                                    }, this), this.serverInfos = b.concat(a)) :
                                    this.serverInfos = a;
                                g.forEach(a, function (a) {
                                    a.owningSystemUrl && this._portals.push(a.owningSystemUrl);
                                    if (a.hasPortal) {
                                        this._portals.push(a.server);
                                        var b = m.defaults.io.corsEnabledServers,
                                            c = this._getOrigin(a.tokenServiceUrl);
                                        n.canUseXhr(a.server) || b.push(a.server.replace(/^https?:\/\//i, ""));
                                        n.canUseXhr(c) || b.push(c.replace(/^https?:\/\//i, ""))
                                    }
                                }, this)
                            },
                            registerOAuthInfos: function (a) {
                                var b = this.oAuthInfos;
                                b ? (a = g.filter(a, function (a) {
                                        return !this.findOAuthInfo(a.portalUrl)
                                    }, this), this.oAuthInfos = b.concat(a)) :
                                    this.oAuthInfos = a
                            },
                            registerToken: function (b) {
                                var c = this._sanitizeUrl(b.server),
                                    d = this.findServerInfo(c),
                                    f = !0,
                                    e;
                                d || (d = new s, d.server = this._getServerInstanceRoot(c), d.tokenServiceUrl = this._getTokenSvcUrl(c), d.hasPortal = !0, this.registerServers([d]));
                                (e = this.findCredential(c, b.userId)) ? (a.mixin(e, b), f = !1) : (e = new z({
                                    userId: b.userId,
                                    server: d.server,
                                    token: b.token,
                                    expires: b.expires,
                                    ssl: b.ssl,
                                    scope: this._isServerRsrc(c) ? "server" : "portal"
                                }), e.resources = [c], this.credentials.push(e));
                                e.onTokenChange(!1);
                                f || e.refreshServerTokens()
                            },
                            toJson: function () {
                                return t.fixJson({
                                    serverInfos: g.map(this.serverInfos, function (a) {
                                        return a.toJson()
                                    }),
                                    oAuthInfos: g.map(this.oAuthInfos, function (a) {
                                        return a.toJson()
                                    }),
                                    credentials: g.map(this.credentials, function (a) {
                                        return a.toJson()
                                    })
                                })
                            },
                            initialize: function (b) {
                                if (b) {
                                    a.isString(b) && (b = h.fromJson(b));
                                    var c = b.serverInfos,
                                        d = b.oAuthInfos;
                                    b = b.credentials;
                                    if (c) {
                                        var f = [];
                                        g.forEach(c, function (a) {
                                            a.server && a.tokenServiceUrl && f.push(a.declaredClass ? a : new s(a))
                                        });
                                        f.length && this.registerServers(f)
                                    }
                                    if (d) {
                                        var e = [];
                                        g.forEach(d, function (a) {
                                            a.appId && e.push(a.declaredClass ? a : new C(a))
                                        });
                                        e.length && this.registerOAuthInfos(e)
                                    }
                                    b && g.forEach(b, function (a) {
                                        a.userId && (a.server && a.token && a.expires && a.expires > (new Date).getTime()) && (a = a.declaredClass ? a : new z(a), a.onTokenChange(), this.credentials.push(a))
                                    }, this)
                                }
                            },
                            findServerInfo: function (a) {
                                var b;
                                a = this._sanitizeUrl(a);
                                g.some(this.serverInfos, function (c) {
                                    this._hasSameServerInstance(c.server, a) && (b = c);
                                    return !!b
                                }, this);
                                return b
                            },
                            findOAuthInfo: function (a) {
                                var b;
                                a = this._sanitizeUrl(a);
                                g.some(this.oAuthInfos, function (c) {
                                    this._hasSameServerInstance(c.portalUrl, a) && (b = c);
                                    return !!b
                                }, this);
                                return b
                            },
                            findCredential: function (a, b) {
                                var c, d;
                                a = this._sanitizeUrl(a);
                                d = this._isServerRsrc(a) ? "server" : "portal";
                                b ? g.some(this.credentials, function (f) {
                                    this._hasSameServerInstance(f.server, a) && (b === f.userId && f.scope === d) && (c = f);
                                    return !!c
                                }, this) : g.some(this.credentials, function (b) {
                                    this._hasSameServerInstance(b.server, a) && (-1 !== this._getIdenticalSvcIdx(a, b) && b.scope === d) && (c = b);
                                    return !!c
                                }, this);
                                return c
                            },
                            getCredential: function (b, c) {
                                var d, e, g = !0;
                                t.isDefined(c) && (a.isObject(c) ? (d = !!c.token, e = c.error, g = !1 !== c.prompt) : d = c);
                                b = this._sanitizeUrl(b);
                                var h = new q(f._dfdCanceller),
                                    n = this._isAdminResource(b),
                                    m = d && this._doPortalSignIn(b) ? this._getEsriAuthCookie() : null;
                                d = d ? this.findCredential(b) : null;
                                if (m || d) return g = Error("You are currently signed in as: '" + (m && m.email || d && d.userId) + "'. You do not have access to this resource: " + b), g.code = "IdentityManagerBase.1", g.httpCode = e && e.httpCode, g.messageCode = e ? e.messageCode :
                                    null, g.subcode = e ? e.subcode : null, g.details = e ? e.details : null, g.log = p.isDebug, h.errback(g), h;
                                if (e = this._findCredential(b, c)) return h.callback(e), h;
                                if (e = this.findServerInfo(b)) !e.hasServer && this._isServerRsrc(b) && (e._restInfoDfd = this._getTokenSvcUrl(b, !0), e.hasServer = !0);
                                else {
                                    m = this._getTokenSvcUrl(b);
                                    if (!m) return g = Error("Unknown resource - could not find token service endpoint."), g.code = "IdentityManagerBase.2", g.log = p.isDebug, h.errback(g), h;
                                    e = new s;
                                    e.server = this._getServerInstanceRoot(b);
                                    a.isString(m) ?
                                        (e.tokenServiceUrl = m, e.hasPortal = !0) : (e._restInfoDfd = m, e.hasServer = !0);
                                    this.registerServers([e])
                                }
                                g && (e.hasPortal && void 0 === e._selfReq && !this._findOAuthInfo(b)) && (e._selfReq = {
                                    owningTenant: c && c.owningTenant,
                                    selfDfd: this._getPortalSelf(e.tokenServiceUrl.replace(this._rePortalTokenSvc, "/sharing/rest/portals/self"), b)
                                });
                                return this._enqueue(b, e, c, h, n)
                            },
                            getResourceName: function (a) {
                                return this._isRESTService(a) ? a.replace(this._regexSDirUrl, "").replace(this._regexServerType, "") || "" : this._gwUser.test(a) &&
                                    a.replace(this._gwUser, "$1") || this._gwItem.test(a) && a.replace(this._gwItem, "$1") || this._gwGroup.test(a) && a.replace(this._gwGroup, "$1") || ""
                            },
                            generateToken: function (b, c, f) {
                                var e, g, h, m, l, q, s = this._rePortalTokenSvc.test(b.tokenServiceUrl),
                                    r = new k(window.location.href.toLowerCase()),
                                    t = this._getEsriAuthCookie(),
                                    u, w = !c;
                                m = b.shortLivedTokenValidity;
                                var v;
                                c && (v = d.id.tokenValidity || m || d.id.defaultTokenValidity, v > m && (v = m));
                                f && (e = f.isAdmin, g = f.serverUrl, h = f.token, q = f.ssl, b.customParameters = f.customParameters);
                                if (e) m = b.adminTokenServiceUrl;
                                else {
                                    m = b.tokenServiceUrl;
                                    l = new k(m.toLowerCase());
                                    t && (u = (u = t.auth_tier) && u.toLowerCase());
                                    if (("web" === u || b.webTierAuth) && f && f.serverUrl && !q && "http" === r.scheme && (n.hasSameOrigin(r.uri, m, !0) || "https" === l.scheme && r.host === l.host && "7080" === r.port && "7443" === l.port)) m = m.replace(/^https:/i, "http:").replace(/:7443/i, ":7080");
                                    w && s && (m = m.replace(/\/rest/i, ""))
                                }
                                e = a.mixin({
                                    url: m,
                                    content: a.mixin({
                                        request: "getToken",
                                        username: c && c.username,
                                        password: c && c.password,
                                        serverUrl: g,
                                        token: h,
                                        expiration: v,
                                        referer: e || s ? window.location.host : null,
                                        client: e ? "referer" : null,
                                        f: "json"
                                    }, b.customParameters),
                                    handleAs: "json",
                                    callbackParamName: w ? "callback" : void 0
                                }, f && f.ioArgs);
                                f = {
                                    usePost: !w,
                                    disableIdentityLookup: !0,
                                    useProxy: this._useProxy(b, f)
                                };
                                s || (e.withCredentials = !1);
                                s = y(e, f);
                                s.addCallback(function (a) {
                                    if (!a || !a.token) return a = Error("Unable to generate token"), a.code = "IdentityManagerBase.3", a.log = p.isDebug, a;
                                    var d = b.server;
                                    x[d] || (x[d] = {});
                                    c && (x[d][c.username] = c.password);
                                    a.validity = v;
                                    return a
                                });
                                s.addErrback(function (a) {});
                                return s
                            },
                            isBusy: function () {
                                return !!this._busy
                            },
                            checkSignInStatus: function (a) {
                                return this.getCredential(a, {
                                    prompt: !1
                                })
                            },
                            setRedirectionHandler: function (a) {
                                this._redirectFunc = a
                            },
                            setProtocolErrorHandler: function (a) {
                                this._protocolFunc = a
                            },
                            signIn: function () {},
                            oAuthSignIn: function () {},
                            onCredentialCreate: function () {},
                            onCredentialsDestroy: function () {},
                            destroyCredentials: function () {
                                if (this.credentials) {
                                    var a = this.credentials.slice();
                                    g.forEach(a, function (a) {
                                        a.destroy()
                                    })
                                }
                                this.onCredentialsDestroy()
                            },
                            _getOAuthHash: function () {
                                var a =
                                    window.location.hash;
                                if (a) {
                                    "#" === a.charAt(0) && (a = a.substring(1));
                                    var a = c.queryToObject(a),
                                        b = !1;
                                    a.access_token && a.expires_in && a.state && a.hasOwnProperty("username") ? (a.state = h.fromJson(a.state), this._oAuthHash = a, b = !0) : a.error && a.error_description && (console.log("IdentityManager OAuth Error: ", a.error, " - ", a.error_description), "access_denied" === a.error && (b = !0));
                                    if (b && (!l("ie") || 8 < l("ie"))) window.location.hash = ""
                                }
                            },
                            _findCredential: function (a, b) {
                                var c = -1,
                                    d, f, e, h, n = b && b.token;
                                d = b && b.resource;
                                var m = this._isServerRsrc(a) ?
                                    "server" : "portal",
                                    k = g.filter(this.credentials, function (b) {
                                        return this._hasSameServerInstance(b.server, a) && b.scope === m
                                    }, this);
                                a = d || a;
                                if (k.length)
                                    if (1 === k.length)
                                        if (d = k[0], e = (f = (h = this.findServerInfo(d.server)) && h.owningSystemUrl) && this.findCredential(f, d.userId), c = this._getIdenticalSvcIdx(a, d), n) - 1 !== c && (d.resources.splice(c, 1), this._removeResource(a, e));
                                        else return -1 === c && d.resources.push(a), this._addResource(a, e), d;
                                else {
                                    var l, q;
                                    g.some(k, function (b) {
                                        q = this._getIdenticalSvcIdx(a, b);
                                        return -1 !== q ? (l =
                                            b, e = (f = (h = this.findServerInfo(l.server)) && h.owningSystemUrl) && this.findCredential(f, l.userId), c = q, !0) : !1
                                    }, this);
                                    if (n) l && (l.resources.splice(c, 1), this._removeResource(a, e));
                                    else if (l) return this._addResource(a, e), l
                                }
                            },
                            _findOAuthInfo: function (a) {
                                var b = this.findOAuthInfo(a);
                                b || g.some(this.oAuthInfos, function (c) {
                                    this._isIdProvider(c.portalUrl, a) && (b = c);
                                    return !!b
                                }, this);
                                return b
                            },
                            _addResource: function (a, b) {
                                b && -1 === this._getIdenticalSvcIdx(a, b) && b.resources.push(a)
                            },
                            _removeResource: function (a, b) {
                                var c = -1;
                                b && (c = this._getIdenticalSvcIdx(a, b), -1 < c && b.resources.splice(c, 1))
                            },
                            _useProxy: function (a, b) {
                                return b && b.isAdmin && !n.hasSameOrigin(a.adminTokenServiceUrl, window.location.href) || !this._isPortalDomain(a.tokenServiceUrl) && 10.1 == a.currentVersion && !n.hasSameOrigin(a.tokenServiceUrl, window.location.href)
                            },
                            _getOrigin: function (a) {
                                a = new k(a);
                                return a.scheme + "://" + a.host + (t.isDefined(a.port) ? ":" + a.port : "")
                            },
                            _getServerInstanceRoot: function (a) {
                                var b = a.toLowerCase(),
                                    c = b.indexOf(this._agsRest); - 1 === c && this._isAdminResource(a) &&
                                    (c = b.indexOf("/admin")); - 1 === c && (c = b.indexOf("/sharing")); - 1 === c && "/" === b.substr(-1) && (c = b.length - 1);
                                return -1 < c ? a.substring(0, c) : a
                            },
                            _hasSameServerInstance: function (a, b) {
                                a = a.toLowerCase();
                                b = this._getServerInstanceRoot(b).toLowerCase();
                                a = a.substr(a.indexOf(":"));
                                b = b.substr(b.indexOf(":"));
                                return a === b
                            },
                            _sanitizeUrl: function (b) {
                                b = n.fixUrl(a.trim(b));
                                var c = (m.defaults.io.proxyUrl || "").toLowerCase(),
                                    d = c ? b.toLowerCase().indexOf(c + "?") : -1; - 1 !== d && (b = b.substring(d + c.length + 1));
                                return n.urlToObject(b).path
                            },
                            _isRESTService: function (a) {
                                return -1 < a.indexOf(this._agsRest)
                            },
                            _isAdminResource: function (a) {
                                return this._agsAdmin.test(a) || this._adminSvcs.test(a)
                            },
                            _isServerRsrc: function (a) {
                                return this._isRESTService(a) || this._isAdminResource(a)
                            },
                            _isIdenticalService: function (a, b) {
                                var c;
                                if (this._isRESTService(a) && this._isRESTService(b)) {
                                    var d = this._getSuffix(a).toLowerCase(),
                                        f = this._getSuffix(b).toLowerCase();
                                    c = d === f;
                                    c || (c = /(.*)\/(MapServer|FeatureServer).*/ig, c = d.replace(c, "$1") === f.replace(c, "$1"))
                                } else this._isAdminResource(a) &&
                                    this._isAdminResource(b) ? c = !0 : !this._isServerRsrc(a) && (!this._isServerRsrc(b) && this._isPortalDomain(a)) && (c = !0);
                                return c
                            },
                            _isPortalDomain: function (b) {
                                b = b.toLowerCase();
                                var c = (new k(b)).authority,
                                    d = this._portalConfig,
                                    f = -1 !== c.indexOf(this._agolSuffix);
                                !f && d && (f = this._hasSameServerInstance(this._getServerInstanceRoot(d.restBaseUrl), b));
                                if (!f) {
                                    if (!this._arcgisUrl && (d = a.getObject("esri.arcgis.utils.arcgisUrl"))) this._arcgisUrl = (new k(d)).authority;
                                    this._arcgisUrl && (f = this._arcgisUrl.toLowerCase() === c)
                                }
                                f ||
                                    (f = g.some(this._portals, function (a) {
                                        return this._hasSameServerInstance(a, b)
                                    }, this));
                                return f = f || this._agsPortal.test(b)
                            },
                            _isIdProvider: function (a, b) {
                                var c = -1,
                                    d = -1;
                                g.forEach(this._gwDomains, function (f, e) {
                                    -1 === c && f.regex.test(a) && (c = e); - 1 === d && f.regex.test(b) && (d = e)
                                });
                                var f = !1;
                                if (-1 < c && -1 < d)
                                    if (0 === c || 4 === c) {
                                        if (0 === d || 4 === d) f = !0
                                    } else if (1 === c) {
                                    if (1 === d || 2 === d) f = !0
                                } else 2 === c ? 2 === d && (f = !0) : 3 === c && 3 === d && (f = !0);
                                if (!f) {
                                    var e = this.findServerInfo(b),
                                        h = e && e.owningSystemUrl;
                                    h && (v(e) && this._isPortalDomain(h) &&
                                        this._isIdProvider(a, h)) && (f = !0)
                                }
                                return f
                            },
                            _isPublic: function (a) {
                                a = this._sanitizeUrl(a);
                                return g.some(this._publicUrls, function (b) {
                                    return b.test(a)
                                })
                            },
                            _getIdenticalSvcIdx: function (a, b) {
                                var c = -1;
                                g.some(b.resources, function (b, d) {
                                    return this._isIdenticalService(a, b) ? (c = d, !0) : !1
                                }, this);
                                return c
                            },
                            _getSuffix: function (a) {
                                return a.replace(this._regexSDirUrl, "").replace(this._regexServerType, "$1")
                            },
                            _getTokenSvcUrl: function (a) {
                                var b, c;
                                if ((b = this._isRESTService(a)) || this._isAdminResource(a)) return c = a.toLowerCase().indexOf(b ?
                                    this._agsRest : "/admin/"), b = a.substring(0, c) + "/admin/generateToken", a = a.substring(0, c) + "/rest/info", c = y({
                                    url: a,
                                    content: {
                                        f: "json"
                                    },
                                    handleAs: "json",
                                    callbackParamName: "callback"
                                }), c.adminUrl_ = b, c;
                                if (this._isPortalDomain(a)) {
                                    var d = "";
                                    g.some(this._gwDomains, function (b) {
                                        b.regex.test(a) && (d = b.tokenServiceUrl);
                                        return !!d
                                    });
                                    d || g.some(this._portals, function (b) {
                                        this._hasSameServerInstance(b, a) && (d = b + this._gwTokenUrl);
                                        return !!d
                                    }, this);
                                    d || (c = a.toLowerCase().indexOf("/sharing"), -1 !== c && (d = a.substring(0, c) + this._gwTokenUrl));
                                    d || (d = this._getOrigin(a) + this._gwTokenUrl);
                                    d && (b = (new k(a)).port, /^http:\/\//i.test(a) && "7080" === b && (d = d.replace(/:7080/i, ":7443")), d = d.replace(/http:/i, "https:"));
                                    return d
                                }
                                if (-1 !== a.toLowerCase().indexOf("premium.arcgisonline.com")) return "https://premium.arcgisonline.com/server/tokens"
                            },
                            _getPortalSelf: function (a, b) {
                                "https:" === window.location.protocol ? a = a.replace(/^http:/i, "https:").replace(/:7080/i, ":7443") : /^http:/i.test(b) && (a = a.replace(/^https:/i, "http:").replace(/:7443/i, ":7080"));
                                return y({
                                    url: a,
                                    content: {
                                        f: "json"
                                    },
                                    handleAs: "json",
                                    callbackParamName: "callback"
                                }, {
                                    crossOrigin: !1,
                                    disableIdentityLookup: !0
                                })
                            },
                            _hasPortalSession: function () {
                                return !!this._getEsriAuthCookie()
                            },
                            _getEsriAuthCookie: function () {
                                var a;
                                if (e.isSupported()) {
                                    var b = this._getAllCookies("esri_auth"),
                                        c;
                                    for (c = 0; c < b.length; c++) {
                                        var d = h.fromJson(b[c]);
                                        if (d.portalApp) {
                                            a = d;
                                            break
                                        }
                                    }
                                }
                                return a
                            },
                            _getAllCookies: function (a) {
                                var c = [],
                                    d = document.cookie.match(RegExp("(?:^|; )" + b.escapeString(a) + "\x3d([^;]*)", "g"));
                                if (d)
                                    for (a = 0; a < d.length; a++) {
                                        var f =
                                            d[a],
                                            e = f.indexOf("\x3d"); - 1 < e && (f = f.substring(e + 1), c.push(decodeURIComponent(f)))
                                    }
                                return c
                            },
                            _doPortalSignIn: function (a) {
                                if (e.isSupported()) {
                                    var b = this._getEsriAuthCookie(),
                                        c = this._portalConfig,
                                        d = window.location.href,
                                        f = this.findServerInfo(a);
                                    if (this.useSignInPage && (c || this._isPortalDomain(d) || b) && (f ? f.hasPortal || f.owningSystemUrl && this._isPortalDomain(f.owningSystemUrl) : this._isPortalDomain(a)) && (this._isIdProvider(d, a) || c && (this._hasSameServerInstance(this._getServerInstanceRoot(c.restBaseUrl), a) ||
                                            this._isIdProvider(c.restBaseUrl, a)) || n.hasSameOrigin(d, a, !0))) return !0
                                }
                                return !1
                            },
                            _checkProtocol: function (b, c, d, f) {
                                var e = !0;
                                f = f ? c.adminTokenServiceUrl : c.tokenServiceUrl;
                                if (0 === a.trim(f).toLowerCase().indexOf("https:") && 0 !== window.location.href.toLowerCase().indexOf("https:") && (!m.defaults.io.useCors || !n.canUseXhr(f) && !n.canUseXhr(n.getProxyUrl(!0).path))) e = this._protocolFunc ? !!this._protocolFunc({
                                    resourceUrl: b,
                                    serverInfo: c
                                }) : !1, e || (b = Error("Aborted the Sign-In process to avoid sending password over insecure connection."),
                                    b.code = "IdentityManagerBase.4", b.log = p.isDebug, console.log(b.message), d(b));
                                return e
                            },
                            _enqueue: function (a, b, c, d, e, g) {
                                d || (d = new q(f._dfdCanceller));
                                d.resUrl_ = a;
                                d.sinfo_ = b;
                                d.options_ = c;
                                d.admin_ = e;
                                d.refresh_ = g;
                                this._busy ? this._hasSameServerInstance(this._getServerInstanceRoot(a), this._busy.resUrl_) ? (this._oAuthDfd && this._oAuthDfd.oAuthWin_ && this._oAuthDfd.oAuthWin_.focus(), this._soReqs.push(d)) : this._xoReqs.push(d) : this._doSignIn(d);
                                return d
                            },
                            _doSignIn: function (b) {
                                this._busy = b;
                                var c = this,
                                    d = function (a) {
                                        var d =
                                            b.options_ && b.options_.resource,
                                            f = b.resUrl_,
                                            e = b.refresh_,
                                            h = !1; - 1 === g.indexOf(c.credentials, a) && (e && -1 !== g.indexOf(c.credentials, e) ? (e.userId = a.userId, e.token = a.token, e.expires = a.expires, e.validity = a.validity, e.ssl = a.ssl, e.creationTime = a.creationTime, h = !0, a = e) : c.credentials.push(a));
                                        a.resources || (a.resources = []);
                                        a.resources.push(d || f);
                                        a.scope = c._isServerRsrc(f) ? "server" : "portal";
                                        a.onTokenChange();
                                        var d = c._soReqs,
                                            n = {};
                                        c._soReqs = [];
                                        g.forEach(d, function (b) {
                                            if (!this._isIdenticalService(f, b.resUrl_)) {
                                                var c =
                                                    this._getSuffix(b.resUrl_);
                                                n[c] || (n[c] = !0, a.resources.push(b.resUrl_))
                                            }
                                        }, c);
                                        b.callback(a);
                                        g.forEach(d, function (b) {
                                            b.callback(a)
                                        });
                                        c._busy = b.resUrl_ = b.sinfo_ = b.refresh_ = null;
                                        if (!h) c.onCredentialCreate({
                                            credential: a
                                        });
                                        c._soReqs.length && c._doSignIn(c._soReqs.shift());
                                        c._xoReqs.length && c._doSignIn(c._xoReqs.shift())
                                    },
                                    f = function (a) {
                                        b.errback(a);
                                        c._busy = b.resUrl_ = b.sinfo_ = b.refresh_ = null;
                                        c._soReqs.length && c._doSignIn(c._soReqs.shift());
                                        c._xoReqs.length && c._doSignIn(c._xoReqs.shift())
                                    },
                                    e = function (a, e, g,
                                        h) {
                                        var n = b.sinfo_,
                                            m = !b.options_ || !1 !== b.options_.prompt,
                                            k = n.hasPortal && c._findOAuthInfo(b.resUrl_);
                                        c._doPortalSignIn(b.resUrl_) ? (a = c._getEsriAuthCookie(), k = c._portalConfig, a ? d(new z({
                                            userId: a.email,
                                            server: n.server,
                                            token: a.token,
                                            expires: null
                                        })) : m ? (m = "", a = window.location.href, m = c.signInPage ? c.signInPage : k ? k.baseUrl + k.signin : c._isIdProvider(a, b.resUrl_) ? c._getOrigin(a) + "/home/signin.html" : n.tokenServiceUrl.replace(c._rePortalTokenSvc, "") + "/home/signin.html", m = m.replace(/http:/i, "https:"), k && !1 === k.useSSL &&
                                            (m = m.replace(/https:/i, "http:")), 0 === a.toLowerCase().replace("https", "http").indexOf(m.toLowerCase().replace("https", "http")) ? (n = Error("Cannot redirect to Sign-In page from within Sign-In page. URL of the resource that triggered this workflow: " + b.resUrl_), n.code = "IdentityManagerBase.5", n.log = p.isDebug, f(n)) : c._redirectFunc ? c._redirectFunc({
                                                signInPage: m,
                                                returnUrlParamName: "returnUrl",
                                                returnUrl: a,
                                                resourceUrl: b.resUrl_,
                                                serverInfo: n
                                            }) : window.location = m + "?returnUrl\x3d" + window.escape(a)) : (n = Error("User is not signed in."),
                                            n.code = "IdentityManagerBase.6", n.log = p.isDebug, f(n))) : a ? d(new z({
                                            userId: a,
                                            server: n.server,
                                            token: g,
                                            expires: t.isDefined(h) ? Number(h) : null,
                                            ssl: !!e
                                        })) : k ? (a = k._oAuthCred, a || (e = new w(k, window.localStorage), g = new w(k, window.sessionStorage), e.isValid() && g.isValid() ? e.expires > g.expires ? (a = e, g.destroy()) : (a = g, e.destroy()) : a = e.isValid() ? e : g, k._oAuthCred = a), a.isValid() ? d(new z({
                                                userId: a.userId,
                                                server: n.server,
                                                token: a.token,
                                                expires: a.expires,
                                                ssl: a.ssl,
                                                _oAuthCred: a
                                            })) : c._oAuthHash && c._oAuthHash.state.portalUrl ===
                                            k.portalUrl ? (m = c._oAuthHash, n = new z({
                                                userId: m.username,
                                                server: n.server,
                                                token: m.access_token,
                                                expires: (new Date).getTime() + 1E3 * Number(m.expires_in),
                                                ssl: "true" === m.ssl,
                                                oAuthState: m.state,
                                                _oAuthCred: a
                                            }), a.storage = m.persist ? window.localStorage : window.sessionStorage, a.token = n.token, a.expires = n.expires, a.userId = n.userId, a.ssl = n.ssl, a.save(), c._oAuthHash = null, d(n)) : m ? b._pendingDfd = c.oAuthSignIn(b.resUrl_, n, k, b.options_).addCallbacks(d, f) : (n = Error("User is not signed in."), n.code = "IdentityManagerBase.6", n.log =
                                                p.isDebug, f(n))) : m ? c._checkProtocol(b.resUrl_, n, f, b.admin_) && (m = b.options_, b.admin_ && (m = m || {}, m.isAdmin = !0), b._pendingDfd = c.signIn(b.resUrl_, n, m).addCallbacks(d, f)) : (n = Error("User is not signed in."), n.code = "IdentityManagerBase.6", n.log = p.isDebug, f(n))
                                    },
                                    h = function () {
                                        var a = b.sinfo_,
                                            e = a.owningSystemUrl,
                                            h = b.options_,
                                            n, m, k, l;
                                        h && (n = h.token, m = h.error, k = h.prompt);
                                        l = c._findCredential(e, {
                                            token: n,
                                            resource: b.resUrl_
                                        });
                                        !l && v(a) && g.some(c.credentials, function (a) {
                                                this._isIdProvider(e, a.server) && (l = a);
                                                return !!l
                                            },
                                            c);
                                        l ? (h = c.findCredential(b.resUrl_, l.userId)) ? d(h) : A(a, c._legacyFed) ? (h = l.toJson(), h.server = a.server, h.resources = null, d(new z(h))) : (b._pendingDfd = c.generateToken(c.findServerInfo(l.server), null, {
                                            serverUrl: b.resUrl_,
                                            token: l.token,
                                            ssl: l.ssl
                                        })).addCallbacks(function (c) {
                                            d(new z({
                                                userId: l.userId,
                                                server: a.server,
                                                token: c.token,
                                                expires: t.isDefined(c.expires) ? Number(c.expires) : null,
                                                ssl: !!c.ssl,
                                                isAdmin: b.admin_,
                                                validity: c.validity
                                            }))
                                        }, f) : (c._busy = null, n && (b.options_.token = null), (b._pendingDfd = c.getCredential(e.replace(/\/?$/,
                                            "/sharing"), {
                                            resource: b.resUrl_,
                                            owningTenant: a.owningTenant,
                                            token: n,
                                            error: m,
                                            prompt: k
                                        })).addCallbacks(function (a) {
                                            c._enqueue(b.resUrl_, b.sinfo_, b.options_, b, b.admin_)
                                        }, function (a) {
                                            f(a)
                                        }))
                                    },
                                    n = b.sinfo_.owningSystemUrl,
                                    m = this._isServerRsrc(b.resUrl_),
                                    k = b.sinfo_._restInfoDfd;
                                k ? k.addCallbacks(function (d) {
                                    var f = b.sinfo_;
                                    f.adminTokenServiceUrl = f._restInfoDfd.adminUrl_;
                                    f._restInfoDfd = null;
                                    f.tokenServiceUrl = a.getObject("authInfo.tokenServicesUrl", !1, d) || a.getObject("authInfo.tokenServiceUrl", !1, d) || a.getObject("tokenServiceUrl", !1, d);
                                    f.shortLivedTokenValidity = a.getObject("authInfo.shortLivedTokenValidity", !1, d);
                                    f.currentVersion = d.currentVersion;
                                    f.owningTenant = d.owningTenant;
                                    (d = f.owningSystemUrl = d.owningSystemUrl) && c._portals.push(d);
                                    m && d ? h() : e()
                                }, function () {
                                    b.sinfo_._restInfoDfd = null;
                                    var a = Error("Unknown resource - could not find token service endpoint.");
                                    a.code = "IdentityManagerBase.2";
                                    a.log = p.isDebug;
                                    f(a)
                                }) : m && n ? h() : b.sinfo_._selfReq ? b.sinfo_._selfReq.selfDfd.then(function (a) {
                                    var d = {},
                                        f, e, g, h;
                                    a && (f = a.user && a.user.username,
                                        d.username = f, d.allSSL = a.allSSL, e = a.supportsOAuth, g = a.currentVersion, "multitenant" === a.portalMode && (h = a.customBaseUrl));
                                    b.sinfo_.webTierAuth = !!f;
                                    return f && c.normalizeWebTierAuth ? c.generateToken(b.sinfo_, null, {
                                            ssl: d.allSSL
                                        }).always(function (a) {
                                            d.portalToken = a && a.token;
                                            d.tokenExpiration = a && a.expires;
                                            return d
                                        }) : !f && e && 4.4 <= parseFloat(g) && !c._doPortalSignIn(b.resUrl_) ? c._generateOAuthInfo({
                                            portalUrl: b.sinfo_.server,
                                            customBaseUrl: h,
                                            owningTenant: b.sinfo_._selfReq.owningTenant
                                        }).always(function () {
                                            return d
                                        }) :
                                        d
                                }).always(function (a) {
                                    b.sinfo_._selfReq = null;
                                    a ? e(a.username, a.allSSL, a.portalToken, a.tokenExpiration) : e()
                                }) : e()
                            },
                            _generateOAuthInfo: function (a) {
                                var b = this,
                                    c, d = a.portalUrl,
                                    f = a.customBaseUrl,
                                    e = a.owningTenant;
                                if (a = !this.defaultOAuthInfo && this._createDefaultOAuthInfo && !this._hasTestedIfAppIsOnPortal) {
                                    c = window.location.href;
                                    var g = c.indexOf("?"); - 1 < g && (c = c.slice(0, g));
                                    g = c.search(/\/(apps|home)\//);
                                    c = -1 < g ? c.slice(0, g) : null
                                }
                                a && c ? (this._hasTestedIfAppIsOnPortal = !0, a = y({
                                    url: c + "/sharing/rest",
                                    content: {
                                        f: "json"
                                    },
                                    handleAs: "json"
                                }).then(function () {
                                    b.defaultOAuthInfo = new C({
                                        appId: "arcgisonline",
                                        popup: !0,
                                        popupCallbackUrl: c + "/home/oauth-callback.html"
                                    })
                                })) : (a = new q, a.resolve(), a = a.promise);
                                return a.then(function () {
                                    if (b.defaultOAuthInfo) return d = d.replace(/^http:/i, "https:"), y({
                                        url: d + "/sharing/rest/oauth2/validateRedirectUri",
                                        content: {
                                            accountId: e,
                                            client_id: b.defaultOAuthInfo.appId,
                                            redirect_uri: n.getAbsoluteUrl(b.defaultOAuthInfo.popupCallbackUrl),
                                            f: "json"
                                        },
                                        handleAs: "json",
                                        callbackParamName: "callback"
                                    }).then(function (a) {
                                        if (a.valid) {
                                            var c =
                                                b.defaultOAuthInfo.clone();
                                            c.portalUrl = a.urlKey && f ? "https://" + a.urlKey + "." + f : d;
                                            b.oAuthInfos.push(c)
                                        }
                                    })
                                })
                            }
                        });
                    z = r(u, {
                        declaredClass: "esri.Credential",
                        tokenRefreshBuffer: 2,
                        constructor: function (b) {
                            a.mixin(this, b);
                            this.resources = this.resources || [];
                            t.isDefined(this.creationTime) || (this.creationTime = (new Date).getTime())
                        },
                        _oAuthCred: null,
                        refreshToken: function () {
                            var a = this,
                                b = this.resources && this.resources[0],
                                c = d.id.findServerInfo(this.server),
                                f = c && c.owningSystemUrl,
                                e = !!f && "server" === this.scope,
                                h = e && A(c, d.id._legacyFed),
                                n = e && d.id.findServerInfo(f),
                                m, k = (m = c.webTierAuth) && d.id.normalizeWebTierAuth,
                                l = x[this.server],
                                l = l && l[this.userId],
                                q = {
                                    username: this.userId,
                                    password: l
                                },
                                p;
                            if (!m || k)
                                if (e && !n && g.some(d.id.serverInfos, function (a) {
                                        d.id._isIdProvider(f, a.server) && (n = a);
                                        return !!n
                                    }), m = n && d.id.findCredential(n.server, this.userId), !e || m)
                                    if (h) m.refreshToken();
                                    else {
                                        if (e) p = {
                                            serverUrl: b,
                                            token: m && m.token,
                                            ssl: m && m.ssl
                                        };
                                        else if (k) q = null, p = {
                                            ssl: this.ssl
                                        };
                                        else if (l) this.isAdmin && (p = {
                                            isAdmin: !0
                                        });
                                        else {
                                            var s;
                                            b && (b = d.id._sanitizeUrl(b),
                                                this._enqueued = 1, s = d.id._enqueue(b, c, null, null, this.isAdmin, this), s.addCallback(function () {
                                                    a._enqueued = 0;
                                                    a.refreshServerTokens()
                                                }).addErrback(function () {
                                                    a._enqueued = 0
                                                }));
                                            return s
                                        }
                                        return d.id.generateToken(e ? n : c, e ? null : q, p).addCallback(function (b) {
                                            a.token = b.token;
                                            a.expires = t.isDefined(b.expires) ? Number(b.expires) : null;
                                            a.creationTime = (new Date).getTime();
                                            a.validity = b.validity;
                                            a.onTokenChange();
                                            a.refreshServerTokens()
                                        }).addErrback(function () {})
                                    }
                        },
                        refreshServerTokens: function () {
                            "portal" === this.scope &&
                                g.forEach(d.id.credentials, function (a) {
                                    var b = d.id.findServerInfo(a.server),
                                        c = b && b.owningSystemUrl;
                                    if (a !== this && a.userId === this.userId && c && "server" === a.scope && (d.id._hasSameServerInstance(this.server, c) || d.id._isIdProvider(c, this.server))) A(b, d.id._legacyFed) ? (a.token = this.token, a.expires = this.expires, a.creationTime = this.creationTime, a.validity = this.validity, a.onTokenChange()) : a.refreshToken()
                                }, this)
                        },
                        onTokenChange: function (a) {
                            clearTimeout(this._refreshTimer);
                            var b = this.server && d.id.findServerInfo(this.server),
                                c = (b = b && b.owningSystemUrl) && d.id.findServerInfo(b);
                            !1 !== a && ((!b || "portal" === this.scope || c && c.webTierAuth && !d.id.normalizeWebTierAuth) && (t.isDefined(this.expires) || t.isDefined(this.validity))) && this._startRefreshTimer()
                        },
                        onDestroy: function () {},
                        destroy: function () {
                            this.userId = this.server = this.token = this.expires = this.validity = this.resources = this.creationTime = null;
                            this._oAuthCred && (this._oAuthCred.destroy(), this._oAuthCred = null);
                            var a = g.indexOf(d.id.credentials, this); - 1 < a && d.id.credentials.splice(a, 1);
                            this.onTokenChange();
                            this.onDestroy()
                        },
                        toJson: function () {
                            return this._toJson()
                        },
                        _toJson: function () {
                            var a = t.fixJson({
                                    userId: this.userId,
                                    server: this.server,
                                    token: this.token,
                                    expires: this.expires,
                                    validity: this.validity,
                                    ssl: this.ssl,
                                    isAdmin: this.isAdmin,
                                    creationTime: this.creationTime,
                                    scope: this.scope
                                }),
                                b = this.resources;
                            b && 0 < b.length && (a.resources = b);
                            return a
                        },
                        _startRefreshTimer: function () {
                            clearTimeout(this._refreshTimer);
                            var b = 6E4 * this.tokenRefreshBuffer,
                                c = (this.validity ? this.creationTime + 6E4 * this.validity :
                                    this.expires) - (new Date).getTime();
                            0 > c && (c = 0);
                            this._refreshTimer = setTimeout(a.hitch(this, this.refreshToken), c > b ? c - b : c)
                        }
                    });
                    H.Credential = z;
                    l("extend-esri") && (d.IdentityManagerBase = H);
                    return H
                })
        },
        "dojo/cookie": function () {
            define(["./_base/kernel", "./regexp"], function (r, p) {
                r.cookie = function (a, g, q) {
                    var h = document.cookie,
                        k;
                    if (1 == arguments.length) k = (k = h.match(RegExp("(?:^|; )" + p.escapeString(a) + "\x3d([^;]*)"))) ? decodeURIComponent(k[1]) : void 0;
                    else {
                        q = q || {};
                        h = q.expires;
                        if ("number" == typeof h) {
                            var l = new Date;
                            l.setTime(l.getTime() + 864E5 * h);
                            h = q.expires = l
                        }
                        h && h.toUTCString && (q.expires = h.toUTCString());
                        g = encodeURIComponent(g);
                        var h = a + "\x3d" + g,
                            e;
                        for (e in q) h += "; " + e, l = q[e], !0 !== l && (h += "\x3d" + l);
                        document.cookie = h
                    }
                    return k
                };
                r.cookie.isSupported = function () {
                    "cookieEnabled" in navigator || (this("__djCookieTest__", "CookiesAllowed"), navigator.cookieEnabled = "CookiesAllowed" == this("__djCookieTest__"), navigator.cookieEnabled && this("__djCookieTest__", "", {
                        expires: -1
                    }));
                    return navigator.cookieEnabled
                };
                return r.cookie
            })
        },
        "esri/ServerInfo": function () {
            define(["dojo/_base/declare", "dojo/_base/lang", "dojo/has", "./kernel", "./lang"], function (r, p, a, g, q) {
                r = r(null, {
                    declaredClass: "esri.ServerInfo",
                    constructor: function (a) {
                        p.mixin(this, a)
                    },
                    toJson: function () {
                        return q.fixJson({
                            server: this.server,
                            tokenServiceUrl: this.tokenServiceUrl,
                            adminTokenServiceUrl: this.adminTokenServiceUrl,
                            shortLivedTokenValidity: this.shortLivedTokenValidity,
                            owningSystemUrl: this.owningSystemUrl,
                            owningTenant: this.owningTenant,
                            currentVersion: this.currentVersion,
                            hasPortal: this.hasPortal,
                            hasServer: this.hasServer,
                            webTierAuth: this.webTierAuth
                        })
                    }
                });
                a("extend-esri") && (g.ServerInfo = r);
                return r
            })
        },
        "esri/OAuthCredential": function () {
            define(["./kernel", "dojo/_base/declare", "dojo/has", "dojo/json"], function (r, p, a, g) {
                p = p(null, {
                    declaredClass: "esri.OAuthCredential",
                    oAuthInfo: null,
                    storage: null,
                    expires: null,
                    ssl: null,
                    token: null,
                    userId: null,
                    constructor: function (a, g) {
                        this.oAuthInfo = a;
                        this.storage = g;
                        this._init()
                    },
                    isValid: function () {
                        var a = !1;
                        if (this.oAuthInfo && this.token && this.userId) {
                            var g =
                                (new Date).getTime();
                            this.expires > g && (this.expires - g) / 1E3 > 60 * this.oAuthInfo.minTimeUntilExpiration && (a = !0)
                        }
                        return a
                    },
                    save: function () {
                        if (this.storage) {
                            var a = this._load(),
                                h = this.oAuthInfo;
                            if (h && h.authNamespace && h.portalUrl) {
                                var k = a[h.authNamespace];
                                k || (k = a[h.authNamespace] = {});
                                k[h.portalUrl] = {
                                    expires: this.expires,
                                    ssl: this.ssl,
                                    token: this.token,
                                    userId: this.userId
                                };
                                try {
                                    this.storage.setItem("esriJSAPIOAuth", g.stringify(a))
                                } catch (l) {
                                    console.log(l)
                                }
                            }
                        }
                    },
                    destroy: function () {
                        var a = this._load(),
                            h = this.oAuthInfo;
                        if (h && h.authNamespace && h.portalUrl && this.storage) {
                            var k = a[h.authNamespace];
                            if (k) {
                                delete k[h.portalUrl];
                                try {
                                    this.storage.setItem("esriJSAPIOAuth", g.stringify(a))
                                } catch (l) {
                                    console.log(l)
                                }
                            }
                        }
                        h && (this.oAuthInfo = h._oAuthCred = null)
                    },
                    _init: function () {
                        var a = this._load(),
                            g = this.oAuthInfo;
                        if (g && (g.authNamespace && g.portalUrl) && (a = a[g.authNamespace]))
                            if (a = a[g.portalUrl]) this.expires = a.expires, this.ssl = a.ssl, this.token = a.token, this.userId = a.userId
                    },
                    _load: function () {
                        var a = {};
                        if (this.storage) {
                            var h = this.storage.getItem("esriJSAPIOAuth");
                            if (h) try {
                                a = g.parse(h)
                            } catch (k) {
                                console.log(k)
                            }
                        }
                        return a
                    }
                });
                a("extend-esri") && (r.OAuthCredential = p);
                return p
            })
        },
        "esri/arcgis/OAuthInfo": function () {
            define(["../kernel", "../lang", "dojo/_base/declare", "dojo/_base/lang", "dojo/has"], function (r, p, a, g, q) {
                var h = a(null, {
                    declaredClass: "esri.arcgis.OAuthInfo",
                    constructor: function (a) {
                        g.mixin(this, {
                            expiration: 20160,
                            minTimeUntilExpiration: 30,
                            portalUrl: "https://www.arcgis.com",
                            authNamespace: "/",
                            forceLogin: !1,
                            showSocialLogins: !1,
                            popup: !1,
                            popupCallbackUrl: "oauth-callback.html",
                            popupWindowFeatures: "height\x3d480,width\x3d800,location,resizable,scrollbars,status"
                        }, a)
                    },
                    _oAuthCred: null,
                    toJson: function () {
                        return p.fixJson({
                            appId: this.appId,
                            expiration: this.expiration,
                            locale: this.locale,
                            minTimeUntilExpiration: this.minTimeUntilExpiration,
                            portalUrl: this.portalUrl,
                            authNamespace: this.authNamespace,
                            forceLogin: this.forceLogin,
                            showSocialLogins: this.showSocialLogins,
                            popup: this.popup,
                            popupCallbackUrl: this.popupCallbackUrl,
                            popupWindowFeatures: this.popupWindowFeatures
                        })
                    },
                    clone: function () {
                        return new h(this.toJson())
                    }
                });
                q("extend-esri") && g.setObject("arcgis.OAuthInfo", h, r);
                return h
            })
        },
        "dijit/form/Form": function () {
            define("dojo/_base/declare dojo/dom-attr dojo/_base/kernel dojo/sniff ../_Widget ../_TemplatedMixin ./_FormMixin ../layout/_ContentPaneResizeMixin".split(" "), function (r, p, a, g, q, h, k, l) {
                return r("dijit.form.Form", [q, h, k, l], {
                    name: "",
                    action: "",
                    method: "",
                    encType: "",
                    "accept-charset": "",
                    accept: "",
                    target: "",
                    templateString: "\x3cform data-dojo-attach-point\x3d'containerNode' data-dojo-attach-event\x3d'onreset:_onReset,onsubmit:_onSubmit' ${!nameAttrSetting}\x3e\x3c/form\x3e",
                    postMixInProperties: function () {
                        this.nameAttrSetting = this.name ? "name\x3d'" + this.name + "'" : "";
                        this.inherited(arguments)
                    },
                    execute: function () {},
                    onExecute: function () {},
                    _setEncTypeAttr: function (a) {
                        p.set(this.domNode, "encType", a);
                        g("ie") && (this.domNode.encoding = a);
                        this._set("encType", a)
                    },
                    reset: function (a) {
                        var c = {
                            returnValue: !0,
                            preventDefault: function () {
                                this.returnValue = !1
                            },
                            stopPropagation: function () {},
                            currentTarget: a ? a.target : this.domNode,
                            target: a ? a.target : this.domNode
                        };
                        !1 !== this.onReset(c) && c.returnValue &&
                            this.inherited(arguments, [])
                    },
                    onReset: function () {
                        return !0
                    },
                    _onReset: function (a) {
                        this.reset(a);
                        a.stopPropagation();
                        a.preventDefault();
                        return !1
                    },
                    _onSubmit: function (e) {
                        var c = this.constructor.prototype;
                        if (this.execute != c.execute || this.onExecute != c.onExecute) a.deprecated("dijit.form.Form:execute()/onExecute() are deprecated. Use onSubmit() instead.", "", "2.0"), this.onExecute(), this.execute(this.getValues());
                        !1 === this.onSubmit(e) && (e.stopPropagation(), e.preventDefault())
                    },
                    onSubmit: function () {
                        return this.isValid()
                    },
                    submit: function () {
                        !1 !== this.onSubmit() && this.containerNode.submit()
                    }
                })
            })
        },
        "dijit/form/ValidationTextBox": function () {
            define("dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/i18n ./TextBox ../Tooltip dojo/text!./templates/ValidationTextBox.html dojo/i18n!./nls/validate".split(" "), function (r, p, a, g, q, h, k) {
                var l = r("dijit.form.ValidationTextBox", q, {
                    templateString: k,
                    required: !1,
                    promptMessage: "",
                    invalidMessage: "$_unset_$",
                    missingMessage: "$_unset_$",
                    message: "",
                    constraints: {},
                    pattern: ".*",
                    regExp: "",
                    regExpGen: function () {},
                    state: "",
                    tooltipPosition: [],
                    _deprecateRegExp: function (a, c) {
                        c != l.prototype[a] && (p.deprecated("ValidationTextBox id\x3d" + this.id + ", set('" + a + "', ...) is deprecated.  Use set('pattern', ...) instead.", "", "2.0"), this.set("pattern", c))
                    },
                    _setRegExpGenAttr: function (a) {
                        this._deprecateRegExp("regExpGen", a);
                        this._set("regExpGen", this._computeRegexp)
                    },
                    _setRegExpAttr: function (a) {
                        this._deprecateRegExp("regExp", a)
                    },
                    _setValueAttr: function () {
                        this.inherited(arguments);
                        this._refreshState()
                    },
                    validator: function (a, c) {
                        return RegExp("^(?:" + this._computeRegexp(c) + ")" + (this.required ? "" : "?") + "$").test(a) && (!this.required || !this._isEmpty(a)) && (this._isEmpty(a) || void 0 !== this.parse(a, c))
                    },
                    _isValidSubset: function () {
                        return 0 == this.textbox.value.search(this._partialre)
                    },
                    isValid: function () {
                        return this.validator(this.textbox.value, this.get("constraints"))
                    },
                    _isEmpty: function (a) {
                        return (this.trim ? /^\s*$/ : /^$/).test(a)
                    },
                    getErrorMessage: function () {
                        var a = "$_unset_$" == this.invalidMessage ? this.messages.invalidMessage :
                            !this.invalidMessage ? this.promptMessage : this.invalidMessage,
                            c = "$_unset_$" == this.missingMessage ? this.messages.missingMessage : !this.missingMessage ? a : this.missingMessage;
                        return this.required && this._isEmpty(this.textbox.value) ? c : a
                    },
                    getPromptMessage: function () {
                        return this.promptMessage
                    },
                    _maskValidSubsetError: !0,
                    validate: function (a) {
                        var c = "",
                            b = this.disabled || this.isValid(a);
                        b && (this._maskValidSubsetError = !0);
                        var d = this._isEmpty(this.textbox.value),
                            g = !b && a && this._isValidSubset();
                        this._set("state", b ? "" : ((!this._hasBeenBlurred ||
                            a) && d || g) && (this._maskValidSubsetError || g && !this._hasBeenBlurred && a) ? "Incomplete" : "Error");
                        this.focusNode.setAttribute("aria-invalid", "Error" == this.state ? "true" : "false");
                        "Error" == this.state ? (this._maskValidSubsetError = a && g, c = this.getErrorMessage(a)) : "Incomplete" == this.state ? (c = this.getPromptMessage(a), this._maskValidSubsetError = !this._hasBeenBlurred || a) : d && (c = this.getPromptMessage(a));
                        this.set("message", c);
                        return b
                    },
                    displayMessage: function (a) {
                        a && this.focused ? h.show(a, this.domNode, this.tooltipPosition, !this.isLeftToRight()) : h.hide(this.domNode)
                    },
                    _refreshState: function () {
                        this._created && this.validate(this.focused);
                        this.inherited(arguments)
                    },
                    constructor: function (e) {
                        this.constraints = a.clone(this.constraints);
                        this.baseClass += " dijitValidationTextBox"
                    },
                    startup: function () {
                        this.inherited(arguments);
                        this._refreshState()
                    },
                    _setConstraintsAttr: function (a) {
                        !a.locale && this.lang && (a.locale = this.lang);
                        this._set("constraints", a);
                        this._refreshState()
                    },
                    _setPatternAttr: function (a) {
                        this._set("pattern", a);
                        this._refreshState()
                    },
                    _computeRegexp: function (a) {
                        var c = this.pattern;
                        "function" == typeof c && (c = c.call(this, a));
                        if (c != this._lastRegExp) {
                            var b = "";
                            this._lastRegExp = c;
                            ".*" != c && c.replace(/\\.|\[\]|\[.*?[^\\]{1}\]|\{.*?\}|\(\?[=:!]|./g, function (a) {
                                switch (a.charAt(0)) {
                                case "{":
                                case "+":
                                case "?":
                                case "*":
                                case "^":
                                case "$":
                                case "|":
                                case "(":
                                    b += a;
                                    break;
                                case ")":
                                    b += "|$)";
                                    break;
                                default:
                                    b += "(?:" + a + "|$)"
                                }
                            });
                            try {
                                "".search(b)
                            } catch (d) {
                                b = this.pattern, console.warn("RegExp error in " + this.declaredClass + ": " + this.pattern)
                            }
                            this._partialre = "^(?:" +
                                b + ")$"
                        }
                        return c
                    },
                    postMixInProperties: function () {
                        this.inherited(arguments);
                        this.messages = g.getLocalization("dijit.form", "validate", this.lang);
                        this._setConstraintsAttr(this.constraints)
                    },
                    _setDisabledAttr: function (a) {
                        this.inherited(arguments);
                        this._refreshState()
                    },
                    _setRequiredAttr: function (a) {
                        this._set("required", a);
                        this.focusNode.setAttribute("aria-required", a);
                        this._refreshState()
                    },
                    _setMessageAttr: function (a) {
                        this._set("message", a);
                        this.displayMessage(a)
                    },
                    reset: function () {
                        this._maskValidSubsetError = !0;
                        this.inherited(arguments)
                    },
                    _onBlur: function () {
                        this.displayMessage("");
                        this.inherited(arguments)
                    },
                    destroy: function () {
                        h.hide(this.domNode);
                        this.inherited(arguments)
                    }
                });
                return l
            })
        },
        "dijit/form/TextBox": function () {
            define("dojo/_base/declare dojo/dom-construct dojo/dom-style dojo/_base/kernel dojo/_base/lang dojo/on dojo/sniff ./_FormValueWidget ./_TextBoxMixin dojo/text!./templates/TextBox.html ../main".split(" "), function (r, p, a, g, q, h, k, l, e, c, b) {
                l = r("dijit.form.TextBox" + (k("dojo-bidi") ? "_NoBidi" : ""), [l, e], {
                    templateString: c,
                    _singleNodeTemplate: '\x3cinput class\x3d"dijit dijitReset dijitLeft dijitInputField" data-dojo-attach-point\x3d"textbox,focusNode" autocomplete\x3d"off" type\x3d"${type}" ${!nameAttrSetting} /\x3e',
                    _buttonInputDisabled: k("ie") ? "disabled" : "",
                    baseClass: "dijitTextBox",
                    postMixInProperties: function () {
                        var a = this.type.toLowerCase();
                        if (this.templateString && "input" == this.templateString.toLowerCase() || ("hidden" == a || "file" == a) && this.templateString == this.constructor.prototype.templateString) this.templateString =
                            this._singleNodeTemplate;
                        this.inherited(arguments)
                    },
                    postCreate: function () {
                        this.inherited(arguments);
                        9 > k("ie") && this.defer(function () {
                            try {
                                var b = a.getComputedStyle(this.domNode);
                                if (b) {
                                    var c = b.fontFamily;
                                    if (c) {
                                        var e = this.domNode.getElementsByTagName("INPUT");
                                        if (e)
                                            for (b = 0; b < e.length; b++) e[b].style.fontFamily = c
                                    }
                                }
                            } catch (g) {}
                        })
                    },
                    _setPlaceHolderAttr: function (a) {
                        this._set("placeHolder", a);
                        this._phspan || (this._attachPoints.push("_phspan"), this._phspan = p.create("span", {
                                className: "dijitPlaceHolder dijitInputField"
                            },
                            this.textbox, "after"), this.own(h(this._phspan, "mousedown", function (a) {
                            a.preventDefault()
                        }), h(this._phspan, "touchend, pointerup, MSPointerUp", q.hitch(this, function () {
                            this.focus()
                        }))));
                        this._phspan.innerHTML = "";
                        this._phspan.appendChild(this._phspan.ownerDocument.createTextNode(a));
                        this._updatePlaceHolder()
                    },
                    _onInput: function (a) {
                        this.inherited(arguments);
                        this._updatePlaceHolder()
                    },
                    _updatePlaceHolder: function () {
                        this._phspan && (this._phspan.style.display = this.placeHolder && !this.textbox.value ? "" : "none")
                    },
                    _setValueAttr: function (a, b, c) {
                        this.inherited(arguments);
                        this._updatePlaceHolder()
                    },
                    getDisplayedValue: function () {
                        g.deprecated(this.declaredClass + "::getDisplayedValue() is deprecated. Use get('displayedValue') instead.", "", "2.0");
                        return this.get("displayedValue")
                    },
                    setDisplayedValue: function (a) {
                        g.deprecated(this.declaredClass + "::setDisplayedValue() is deprecated. Use set('displayedValue', ...) instead.", "", "2.0");
                        this.set("displayedValue", a)
                    },
                    _onBlur: function (a) {
                        this.disabled || (this.inherited(arguments),
                            this._updatePlaceHolder(), k("mozilla") && this.selectOnClick && (this.textbox.selectionStart = this.textbox.selectionEnd = void 0))
                    },
                    _onFocus: function (a) {
                        !this.disabled && !this.readOnly && (this.inherited(arguments), this._updatePlaceHolder())
                    }
                });
                9 > k("ie") && (l.prototype._isTextSelected = function () {
                    var a = this.ownerDocument.selection.createRange();
                    return a.parentElement() == this.textbox && 0 < a.text.length
                }, b._setSelectionRange = e._setSelectionRange = function (a, b, c) {
                    a.createTextRange && (a = a.createTextRange(), a.collapse(!0),
                        a.moveStart("character", -99999), a.moveStart("character", b), a.moveEnd("character", c - b), a.select())
                });
                k("dojo-bidi") && (l = r("dijit.form.TextBox", l, {
                    _setPlaceHolderAttr: function (a) {
                        this.inherited(arguments);
                        this.applyTextDir(this._phspan)
                    }
                }));
                return l
            })
        },
        "dijit/form/_FormValueWidget": function () {
            define(["dojo/_base/declare", "dojo/sniff", "./_FormWidget", "./_FormValueMixin"], function (r, p, a, g) {
                return r("dijit.form._FormValueWidget", [a, g], {
                    _layoutHackIE7: function () {
                        if (7 == p("ie"))
                            for (var a = this.domNode, g = a.parentNode,
                                    k = a.firstChild || a, l = k.style.filter, e = this; g && 0 == g.clientHeight;)(function () {
                                var a = e.connect(g, "onscroll", function () {
                                    e.disconnect(a);
                                    k.style.filter = (new Date).getMilliseconds();
                                    e.defer(function () {
                                        k.style.filter = l
                                    })
                                })
                            })(), g = g.parentNode
                    }
                })
            })
        },
        "dijit/form/_FormValueMixin": function () {
            define("dojo/_base/declare dojo/dom-attr dojo/keys dojo/_base/lang dojo/on ./_FormWidgetMixin".split(" "), function (r, p, a, g, q, h) {
                return r("dijit.form._FormValueMixin", h, {
                    readOnly: !1,
                    _setReadOnlyAttr: function (a) {
                        p.set(this.focusNode,
                            "readOnly", a);
                        this._set("readOnly", a)
                    },
                    postCreate: function () {
                        this.inherited(arguments);
                        void 0 === this._resetValue && (this._lastValueReported = this._resetValue = this.value)
                    },
                    _setValueAttr: function (a, g) {
                        this._handleOnChange(a, g)
                    },
                    _handleOnChange: function (a, g) {
                        this._set("value", a);
                        this.inherited(arguments)
                    },
                    undo: function () {
                        this._setValueAttr(this._lastValueReported, !1)
                    },
                    reset: function () {
                        this._hasBeenBlurred = !1;
                        this._setValueAttr(this._resetValue, !0)
                    }
                })
            })
        },
        "dijit/form/_TextBoxMixin": function () {
            define("dojo/_base/array dojo/_base/declare dojo/dom dojo/sniff dojo/keys dojo/_base/lang dojo/on ../main".split(" "),
                function (r, p, a, g, q, h, k, l) {
                    var e = p("dijit.form._TextBoxMixin" + (g("dojo-bidi") ? "_NoBidi" : ""), null, {
                        trim: !1,
                        uppercase: !1,
                        lowercase: !1,
                        propercase: !1,
                        maxLength: "",
                        selectOnClick: !1,
                        placeHolder: "",
                        _getValueAttr: function () {
                            return this.parse(this.get("displayedValue"), this.constraints)
                        },
                        _setValueAttr: function (a, b, d) {
                            var e;
                            void 0 !== a && (e = this.filter(a), "string" != typeof d && (d = null !== e && ("number" != typeof e || !isNaN(e)) ? this.filter(this.format(e, this.constraints)) : "", 0 != this.compare(e, this.filter(this.parse(d,
                                this.constraints))) && (d = null)));
                            if (null != d && ("number" != typeof d || !isNaN(d)) && this.textbox.value != d) this.textbox.value = d, this._set("displayedValue", this.get("displayedValue"));
                            this.inherited(arguments, [e, b])
                        },
                        displayedValue: "",
                        _getDisplayedValueAttr: function () {
                            return this.filter(this.textbox.value)
                        },
                        _setDisplayedValueAttr: function (a) {
                            null == a ? a = "" : "string" != typeof a && (a = String(a));
                            this.textbox.value = a;
                            this._setValueAttr(this.get("value"), void 0);
                            this._set("displayedValue", this.get("displayedValue"))
                        },
                        format: function (a) {
                            return null == a ? "" : a.toString ? a.toString() : a
                        },
                        parse: function (a) {
                            return a
                        },
                        _refreshState: function () {},
                        onInput: function () {},
                        _onInput: function (a) {
                            this._lastInputEventValue = this.textbox.value;
                            this._processInput(this._lastInputProducingEvent || a);
                            delete this._lastInputProducingEvent;
                            this.intermediateChanges && this._handleOnChange(this.get("value"), !1)
                        },
                        _processInput: function () {
                            this._refreshState();
                            this._set("displayedValue", this.get("displayedValue"))
                        },
                        postCreate: function () {
                            this.textbox.setAttribute("value",
                                this.textbox.value);
                            this.inherited(arguments);
                            this.own(k(this.textbox, "keydown, keypress, paste, cut, compositionend", h.hitch(this, function (a) {
                                var b;
                                if ("keydown" == a.type && 229 != a.keyCode) {
                                    b = a.keyCode;
                                    switch (b) {
                                    case q.SHIFT:
                                    case q.ALT:
                                    case q.CTRL:
                                    case q.META:
                                    case q.CAPS_LOCK:
                                    case q.NUM_LOCK:
                                    case q.SCROLL_LOCK:
                                        return
                                    }
                                    if (!a.ctrlKey && !a.metaKey && !a.altKey) {
                                        switch (b) {
                                        case q.NUMPAD_0:
                                        case q.NUMPAD_1:
                                        case q.NUMPAD_2:
                                        case q.NUMPAD_3:
                                        case q.NUMPAD_4:
                                        case q.NUMPAD_5:
                                        case q.NUMPAD_6:
                                        case q.NUMPAD_7:
                                        case q.NUMPAD_8:
                                        case q.NUMPAD_9:
                                        case q.NUMPAD_MULTIPLY:
                                        case q.NUMPAD_PLUS:
                                        case q.NUMPAD_ENTER:
                                        case q.NUMPAD_MINUS:
                                        case q.NUMPAD_PERIOD:
                                        case q.NUMPAD_DIVIDE:
                                            return
                                        }
                                        if (65 <=
                                            b && 90 >= b || 48 <= b && 57 >= b || b == q.SPACE) return;
                                        b = !1;
                                        for (var d in q)
                                            if (q[d] === a.keyCode) {
                                                b = !0;
                                                break
                                            }
                                        if (!b) return
                                    }
                                }(b = 32 <= a.charCode ? String.fromCharCode(a.charCode) : a.charCode) || (b = 65 <= a.keyCode && 90 >= a.keyCode || 48 <= a.keyCode && 57 >= a.keyCode || a.keyCode == q.SPACE ? String.fromCharCode(a.keyCode) : a.keyCode);
                                b || (b = 229);
                                if ("keypress" == a.type) {
                                    if ("string" != typeof b) return;
                                    if ("a" <= b && "z" >= b || "A" <= b && "Z" >= b || "0" <= b && "9" >= b || " " === b)
                                        if (a.ctrlKey || a.metaKey || a.altKey) return
                                }
                                var e = {
                                        faux: !0
                                    },
                                    l;
                                for (l in a) /^(layer[XY]|returnValue|keyLocation)$/.test(l) ||
                                    (d = a[l], "function" != typeof d && "undefined" != typeof d && (e[l] = d));
                                h.mixin(e, {
                                    charOrCode: b,
                                    _wasConsumed: !1,
                                    preventDefault: function () {
                                        e._wasConsumed = !0;
                                        a.preventDefault()
                                    },
                                    stopPropagation: function () {
                                        a.stopPropagation()
                                    }
                                });
                                this._lastInputProducingEvent = e;
                                !1 === this.onInput(e) && (e.preventDefault(), e.stopPropagation());
                                if (!e._wasConsumed && 9 >= g("ie")) switch (a.keyCode) {
                                case q.TAB:
                                case q.ESCAPE:
                                case q.DOWN_ARROW:
                                case q.UP_ARROW:
                                case q.LEFT_ARROW:
                                case q.RIGHT_ARROW:
                                    break;
                                default:
                                    if (a.keyCode == q.ENTER && "textarea" !=
                                        this.textbox.tagName.toLowerCase()) break;
                                    this.defer(function () {
                                        this.textbox.value !== this._lastInputEventValue && k.emit(this.textbox, "input", {
                                            bubbles: !0
                                        })
                                    })
                                }
                            })), k(this.textbox, "input", h.hitch(this, "_onInput")), k(this.domNode, "keypress", function (a) {
                                a.stopPropagation()
                            }))
                        },
                        _blankValue: "",
                        filter: function (a) {
                            if (null === a) return this._blankValue;
                            if ("string" != typeof a) return a;
                            this.trim && (a = h.trim(a));
                            this.uppercase && (a = a.toUpperCase());
                            this.lowercase && (a = a.toLowerCase());
                            this.propercase && (a = a.replace(/[^\s]+/g,
                                function (a) {
                                    return a.substring(0, 1).toUpperCase() + a.substring(1)
                                }));
                            return a
                        },
                        _setBlurValue: function () {
                            this._setValueAttr(this.get("value"), !0)
                        },
                        _onBlur: function (a) {
                            this.disabled || (this._setBlurValue(), this.inherited(arguments))
                        },
                        _isTextSelected: function () {
                            return this.textbox.selectionStart != this.textbox.selectionEnd
                        },
                        _onFocus: function (a) {
                            !this.disabled && !this.readOnly && (this.selectOnClick && "mouse" == a && (this._selectOnClickHandle = k.once(this.domNode, "mouseup, touchend", h.hitch(this, function (a) {
                                this._isTextSelected() ||
                                    e.selectInputText(this.textbox)
                            })), this.own(this._selectOnClickHandle), this.defer(function () {
                                this._selectOnClickHandle && (this._selectOnClickHandle.remove(), this._selectOnClickHandle = null)
                            }, 500)), this.inherited(arguments), this._refreshState())
                        },
                        reset: function () {
                            this.textbox.value = "";
                            this.inherited(arguments)
                        }
                    });
                    g("dojo-bidi") && (e = p("dijit.form._TextBoxMixin", e, {
                        _setValueAttr: function () {
                            this.inherited(arguments);
                            this.applyTextDir(this.focusNode)
                        },
                        _setDisplayedValueAttr: function () {
                            this.inherited(arguments);
                            this.applyTextDir(this.focusNode)
                        },
                        _onInput: function () {
                            this.applyTextDir(this.focusNode);
                            this.inherited(arguments)
                        }
                    }));
                    e._setSelectionRange = l._setSelectionRange = function (a, b, d) {
                        a.setSelectionRange && a.setSelectionRange(b, d)
                    };
                    e.selectInputText = l.selectInputText = function (c, b, d) {
                        c = a.byId(c);
                        isNaN(b) && (b = 0);
                        isNaN(d) && (d = c.value ? c.value.length : 0);
                        try {
                            c.focus(), e._setSelectionRange(c, b, d)
                        } catch (g) {}
                    };
                    return e
                })
        },
        "dijit/Tooltip": function () {
            define("dojo/_base/array dojo/_base/declare dojo/_base/fx dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/lang dojo/mouse dojo/on dojo/sniff ./_base/manager ./place ./_Widget ./_TemplatedMixin ./BackgroundIframe dojo/text!./templates/Tooltip.html ./main".split(" "),
                function (r, p, a, g, q, h, k, l, e, c, b, d, m, t, s, n, f, y) {
                    function u() {}
                    var w = p("dijit._MasterTooltip", [t, s], {
                        duration: d.defaultDuration,
                        templateString: f,
                        postCreate: function () {
                            this.ownerDocumentBody.appendChild(this.domNode);
                            this.bgIframe = new n(this.domNode);
                            this.fadeIn = a.fadeIn({
                                node: this.domNode,
                                duration: this.duration,
                                onEnd: l.hitch(this, "_onShow")
                            });
                            this.fadeOut = a.fadeOut({
                                node: this.domNode,
                                duration: this.duration,
                                onEnd: l.hitch(this, "_onHide")
                            })
                        },
                        show: function (a, b, c, d, f, e, g) {
                            if (!this.aroundNode || !(this.aroundNode ===
                                    b && this.containerNode.innerHTML == a))
                                if ("playing" == this.fadeOut.status()) this._onDeck = arguments;
                                else {
                                    this.containerNode.innerHTML = a;
                                    f && this.set("textDir", f);
                                    this.containerNode.align = d ? "right" : "left";
                                    var h = m.around(this.domNode, b, c && c.length ? c : C.defaultPosition, !d, l.hitch(this, "orient")),
                                        n = h.aroundNodePos;
                                    "M" == h.corner.charAt(0) && "M" == h.aroundCorner.charAt(0) ? (this.connectorNode.style.top = n.y + (n.h - this.connectorNode.offsetHeight >> 1) - h.y + "px", this.connectorNode.style.left = "") : "M" == h.corner.charAt(1) &&
                                        "M" == h.aroundCorner.charAt(1) ? this.connectorNode.style.left = n.x + (n.w - this.connectorNode.offsetWidth >> 1) - h.x + "px" : (this.connectorNode.style.left = "", this.connectorNode.style.top = "");
                                    k.set(this.domNode, "opacity", 0);
                                    this.fadeIn.play();
                                    this.isShowingNow = !0;
                                    this.aroundNode = b;
                                    this.onMouseEnter = e || u;
                                    this.onMouseLeave = g || u
                                }
                        },
                        orient: function (a, c, d, f, e) {
                            this.connectorNode.style.top = "";
                            var g = f.h;
                            f = f.w;
                            a.className = "dijitTooltip " + {
                                "MR-ML": "dijitTooltipRight",
                                "ML-MR": "dijitTooltipLeft",
                                "TM-BM": "dijitTooltipAbove",
                                "BM-TM": "dijitTooltipBelow",
                                "BL-TL": "dijitTooltipBelow dijitTooltipABLeft",
                                "TL-BL": "dijitTooltipAbove dijitTooltipABLeft",
                                "BR-TR": "dijitTooltipBelow dijitTooltipABRight",
                                "TR-BR": "dijitTooltipAbove dijitTooltipABRight",
                                "BR-BL": "dijitTooltipRight",
                                "BL-BR": "dijitTooltipLeft"
                            }[c + "-" + d];
                            this.domNode.style.width = "auto";
                            var n = h.position(this.domNode);
                            if (b("ie") || b("trident")) n.w += 2;
                            var m = Math.min(Math.max(f, 1), n.w);
                            h.setMarginBox(this.domNode, {
                                w: m
                            });
                            "B" == d.charAt(0) && "B" == c.charAt(0) ? (a = h.position(a), c =
                                this.connectorNode.offsetHeight, a.h > g ? (this.connectorNode.style.top = g - (e.h + c >> 1) + "px", this.connectorNode.style.bottom = "") : (this.connectorNode.style.bottom = Math.min(Math.max(e.h / 2 - c / 2, 0), a.h - c) + "px", this.connectorNode.style.top = "")) : (this.connectorNode.style.top = "", this.connectorNode.style.bottom = "");
                            return Math.max(0, n.w - f)
                        },
                        _onShow: function () {
                            b("ie") && (this.domNode.style.filter = "")
                        },
                        hide: function (a) {
                            this._onDeck && this._onDeck[1] == a ? this._onDeck = null : this.aroundNode === a && (this.fadeIn.stop(), this.isShowingNow = !1, this.aroundNode = null, this.fadeOut.play());
                            this.onMouseEnter = this.onMouseLeave = u
                        },
                        _onHide: function () {
                            this.domNode.style.cssText = "";
                            this.containerNode.innerHTML = "";
                            this._onDeck && (this.show.apply(this, this._onDeck), this._onDeck = null)
                        }
                    });
                    b("dojo-bidi") && w.extend({
                        _setAutoTextDir: function (a) {
                            this.applyTextDir(a);
                            r.forEach(a.children, function (a) {
                                this._setAutoTextDir(a)
                            }, this)
                        },
                        _setTextDirAttr: function (a) {
                            this._set("textDir", a);
                            "auto" == a ? this._setAutoTextDir(this.containerNode) : this.containerNode.dir =
                                this.textDir
                        }
                    });
                    y.showTooltip = function (a, b, c, d, f, e, g) {
                        c && (c = r.map(c, function (a) {
                            return {
                                after: "after-centered",
                                before: "before-centered"
                            }[a] || a
                        }));
                        C._masterTT || (y._masterTT = C._masterTT = new w);
                        return C._masterTT.show(a, b, c, d, f, e, g)
                    };
                    y.hideTooltip = function (a) {
                        return C._masterTT && C._masterTT.hide(a)
                    };
                    var C = p("dijit.Tooltip", t, {
                        label: "",
                        showDelay: 400,
                        hideDelay: 400,
                        connectId: [],
                        position: [],
                        selector: "",
                        _setConnectIdAttr: function (a) {
                            r.forEach(this._connections || [], function (a) {
                                    r.forEach(a, function (a) {
                                        a.remove()
                                    })
                                },
                                this);
                            this._connectIds = r.filter(l.isArrayLike(a) ? a : a ? [a] : [], function (a) {
                                return g.byId(a, this.ownerDocument)
                            }, this);
                            this._connections = r.map(this._connectIds, function (a) {
                                a = g.byId(a, this.ownerDocument);
                                var b = this.selector,
                                    d = b ? function (a) {
                                        return c.selector(b, a)
                                    } : function (a) {
                                        return a
                                    },
                                    f = this;
                                return [c(a, d(e.enter), function () {
                                    f._onHover(this)
                                }), c(a, d("focusin"), function () {
                                    f._onHover(this)
                                }), c(a, d(e.leave), l.hitch(f, "_onUnHover")), c(a, d("focusout"), l.hitch(f, "set", "state", "DORMANT"))]
                            }, this);
                            this._set("connectId",
                                a)
                        },
                        addTarget: function (a) {
                            a = a.id || a; - 1 == r.indexOf(this._connectIds, a) && this.set("connectId", this._connectIds.concat(a))
                        },
                        removeTarget: function (a) {
                            a = r.indexOf(this._connectIds, a.id || a);
                            0 <= a && (this._connectIds.splice(a, 1), this.set("connectId", this._connectIds))
                        },
                        buildRendering: function () {
                            this.inherited(arguments);
                            q.add(this.domNode, "dijitTooltipData")
                        },
                        startup: function () {
                            this.inherited(arguments);
                            var a = this.connectId;
                            r.forEach(l.isArrayLike(a) ? a : [a], this.addTarget, this)
                        },
                        getContent: function (a) {
                            return this.label ||
                                this.domNode.innerHTML
                        },
                        state: "DORMANT",
                        _setStateAttr: function (a) {
                            if (!(this.state == a || "SHOW TIMER" == a && "SHOWING" == this.state || "HIDE TIMER" == a && "DORMANT" == this.state)) {
                                this._hideTimer && (this._hideTimer.remove(), delete this._hideTimer);
                                this._showTimer && (this._showTimer.remove(), delete this._showTimer);
                                switch (a) {
                                case "DORMANT":
                                    this._connectNode && (C.hide(this._connectNode), delete this._connectNode, this.onHide());
                                    break;
                                case "SHOW TIMER":
                                    "SHOWING" != this.state && (this._showTimer = this.defer(function () {
                                        this.set("state",
                                            "SHOWING")
                                    }, this.showDelay));
                                    break;
                                case "SHOWING":
                                    var b = this.getContent(this._connectNode);
                                    if (!b) {
                                        this.set("state", "DORMANT");
                                        return
                                    }
                                    C.show(b, this._connectNode, this.position, !this.isLeftToRight(), this.textDir, l.hitch(this, "set", "state", "SHOWING"), l.hitch(this, "set", "state", "HIDE TIMER"));
                                    this.onShow(this._connectNode, this.position);
                                    break;
                                case "HIDE TIMER":
                                    this._hideTimer = this.defer(function () {
                                        this.set("state", "DORMANT")
                                    }, this.hideDelay)
                                }
                                this._set("state", a)
                            }
                        },
                        _onHover: function (a) {
                            this._connectNode &&
                                a != this._connectNode && this.set("state", "DORMANT");
                            this._connectNode = a;
                            this.set("state", "SHOW TIMER")
                        },
                        _onUnHover: function (a) {
                            this.set("state", "HIDE TIMER")
                        },
                        open: function (a) {
                            this.set("state", "DORMANT");
                            this._connectNode = a;
                            this.set("state", "SHOWING")
                        },
                        close: function () {
                            this.set("state", "DORMANT")
                        },
                        onShow: function () {},
                        onHide: function () {},
                        destroy: function () {
                            this.set("state", "DORMANT");
                            r.forEach(this._connections || [], function (a) {
                                r.forEach(a, function (a) {
                                    a.remove()
                                })
                            }, this);
                            this.inherited(arguments)
                        }
                    });
                    C._MasterTooltip = w;
                    C.show = y.showTooltip;
                    C.hide = y.hideTooltip;
                    C.defaultPosition = ["after-centered", "before-centered"];
                    return C
                })
        },
        "esri/OAuthSignInHandler": function () {
            define("./Credential ./domUtils ./lang ./urlUtils dijit/Dialog dijit/registry dojo/_base/config dojo/_base/Deferred dojo/_base/kernel dojo/dom-attr dojo/i18n!./nls/jsapi dojo/io-query dojo/sniff dojo/json dijit/form/Button dojo/query".split(" "), function (r, p, a, g, q, h, k, l, e, c, b, d, m, t) {
                return {
                    _oAuthDfd: null,
                    _oAuthIntervalId: 0,
                    _oAuthDialogContent: "\x3cdiv class\x3d'dijitDialogPaneContentArea'\x3e\x3cdiv style\x3d'padding-bottom: 5px; word-wrap: break-word;'\x3e${oAuthInfo}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'esriErrorMsg' style\x3d'display: none; color: white; background-color: #D46464; text-align: center; padding-top: 3px; padding-bottom: 3px;'\x3e${invalidUser}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'dijitDialogPaneActionBar'\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdSubmit\"'\x3e${lblOk}\x3c/button\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdCancel\"'\x3e${lblCancel}\x3c/button\x3e\x3c/div\x3e",
                    setOAuthRedirectionHandler: function (a) {
                        this._oAuthRedirectFunc = a
                    },
                    oAuthSignIn: function (a, d, f, e) {
                        var g = this._oAuthDfd = new l;
                        g.resUrl_ = a;
                        g.sinfo_ = d;
                        g.oinfo_ = f;
                        var h = !e || !1 !== e.oAuthPopupConfirmation;
                        if (!f.popup || !h) return this._doOAuthSignIn(a, d, f), g;
                        this._nls || (this._nls = b.identity);
                        this.oAuthDialog || (this.oAuthDialog = this._createOAuthDialog());
                        a = this.oAuthDialog;
                        d = e && e.error;
                        e = e && e.token;
                        p.hide(a.errMsg_);
                        d && (403 == d.code && e) && (c.set(a.errMsg_, "innerHTML", this._nls.forbidden), p.show(a.errMsg_));
                        a.show();
                        return g
                    },
                    setOAuthResponseHash: function (a) {
                        var b = this._oAuthDfd;
                        this._oAuthDfd = null;
                        if (b && a)
                            if (clearInterval(this._oAuthIntervalId), "#" === a.charAt(0) && (a = a.substring(1)), a = d.queryToObject(a), a.error) a = Error("access_denied" === a.error ? "ABORTED" : "OAuth: " + a.error + " - " + a.error_description), a.code = "IdentityManagerBase.2", a.log = k.isDebug, b.errback(a);
                            else {
                                var c = b.oinfo_._oAuthCred,
                                    e = new r({
                                        userId: a.username,
                                        server: b.sinfo_.server,
                                        token: a.access_token,
                                        expires: (new Date).getTime() + 1E3 * Number(a.expires_in),
                                        ssl: "true" === a.ssl,
                                        _oAuthCred: c
                                    });
                                c.storage = a.persist ? window.localStorage : window.sessionStorage;
                                c.token = e.token;
                                c.expires = e.expires;
                                c.userId = e.userId;
                                c.ssl = e.ssl;
                                c.save();
                                b.callback(e)
                            }
                    },
                    _createOAuthDialog: function () {
                        var b = this._nls,
                            c = a.substitute(b, this._oAuthDialogContent),
                            d = new q({
                                title: b.title,
                                content: c,
                                "class": "esriOAuthSignInDialog",
                                style: "min-width: 18em;",
                                esriIdMgr_: this,
                                execute_: function () {
                                    var a = d.esriIdMgr_._oAuthDfd;
                                    d.hide_();
                                    d.esriIdMgr_._doOAuthSignIn(a.resUrl_, a.sinfo_, a.oinfo_)
                                },
                                cancel_: function () {
                                    var a =
                                        d.esriIdMgr_._oAuthDfd;
                                    d.esriIdMgr_._oAuthDfd = null;
                                    d.hide_();
                                    var b = Error("ABORTED");
                                    b.code = "IdentityManager.2";
                                    b.log = k.isDebug;
                                    a.errback(b)
                                },
                                hide_: function () {
                                    p.hide(d.errMsg_);
                                    d.hide();
                                    q._DialogLevelManager.hide(d)
                                }
                            }),
                            b = d.domNode;
                        d.btnSubmit_ = h.byNode(e.query(".esriIdSubmit", b)[0]);
                        d.btnCancel_ = h.byNode(e.query(".esriIdCancel", b)[0]);
                        d.errMsg_ = e.query(".esriErrorMsg", b)[0];
                        d.connect(d.btnSubmit_, "onClick", d.execute_);
                        d.connect(d.btnCancel_, "onClick", d.onCancel);
                        d.connect(d, "onCancel", d.cancel_);
                        return d
                    },
                    _doOAuthSignIn: function (a, b, c) {
                        var e = this,
                            h = {
                                client_id: c.appId,
                                response_type: "token",
                                state: t.stringify({
                                    portalUrl: c.portalUrl
                                }),
                                expiration: c.expiration,
                                locale: c.locale,
                                redirect_uri: c.popup ? g.getAbsoluteUrl(c.popupCallbackUrl) : window.location.href.replace(/#.*$/, "")
                            };
                        c.forceLogin && (h.force_login = !0);
                        c.showSocialLogins && (h.showSocialLogins = !0);
                        var l = c.portalUrl.replace(/^http:/i, "https:") + "/sharing/oauth2/authorize",
                            q = l + "?" + d.objectToQuery(h);
                        if (c.popup) {
                            var p;
                            7 === m("ie") ? (p = window.open(c.popupCallbackUrl,
                                "esriJSAPIOAuth", c.popupWindowFeatures), p.location = q) : p = window.open(q, "esriJSAPIOAuth", c.popupWindowFeatures);
                            p ? (p.focus(), this._oAuthDfd.oAuthWin_ = p, this._oAuthIntervalId = setInterval(function () {
                                if (p.closed) {
                                    clearInterval(e._oAuthIntervalId);
                                    var a = e._oAuthDfd;
                                    if (a) {
                                        var b = Error("ABORTED");
                                        b.code = "IdentityManager.2";
                                        b.log = k.isDebug;
                                        a.errback(b)
                                    }
                                }
                            }, 500)) : (a = Error("ABORTED"), a.code = "IdentityManager.2", a.log = k.isDebug, this._oAuthDfd.errback(a))
                        } else this._oAuthRedirectFunc ? this._oAuthRedirectFunc({
                            authorizeParams: h,
                            authorizeUrl: l,
                            resourceUrl: a,
                            serverInfo: b,
                            oAuthInfo: c
                        }) : window.location = q
                    }
                }
            })
        },
        "esri/layers/graphics": function () {
            define(["./GraphicsLayer", "../graphic", "../renderer"], function () {
                return {}
            })
        },
        "esri/layers/agstiled": function () {
            define(["./agscommon", "./ArcGISTiledMapServiceLayer"], function () {
                return {}
            })
        },
        "esri/layers/agscommon": function () {
            define("./ArcGISMapServiceLayer ./LayerInfo ./TimeInfo ./LayerTimeOptions ./TimeReference ./Field ./Domain ./RangeDomain ./CodedValueDomain ./InheritedDomain ./LayerSource ./LayerMapSource ./LayerDataSource ./DataSource ./TableDataSource ./QueryDataSource ./JoinDataSource ./RasterDataSource ./DynamicLayerInfo ./LayerDrawingOptions ../geometry ../utils".split(" "),
                function () {
                    return {}
                })
        },
        "esri/layers/Field": function () {
            define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ./RangeDomain ./CodedValueDomain".split(" "), function (r, p, a, g, q, h) {
                r = r(null, {
                    declaredClass: "esri.layers.Field",
                    constructor: function (a) {
                        if (a && p.isObject(a) && (this.name = a.name, this.type = a.type, this.alias = a.alias, this.length = a.length, this.editable = a.editable, this.nullable = a.nullable, (a = a.domain) && p.isObject(a))) switch (a.type) {
                        case "range":
                            this.domain = new q(a);
                            break;
                        case "codedValue":
                            this.domain =
                                new h(a)
                        }
                    }
                });
                a("extend-esri") && p.setObject("layers.Field", r, g);
                return r
            })
        },
        "esri/layers/RangeDomain": function () {
            define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./Domain".split(" "), function (r, p, a, g, q, h) {
                r = r([h], {
                    declaredClass: "esri.layers.RangeDomain",
                    constructor: function (a) {
                        a && p.isObject(a) && (this.minValue = a.range[0], this.maxValue = a.range[1])
                    },
                    toJson: function () {
                        var a = this.inherited(arguments);
                        a.range = [this.minValue, this.maxValue];
                        return q.fixJson(a)
                    }
                });
                a("extend-esri") && p.setObject("layers.RangeDomain",
                    r, g);
                return r
            })
        },
        "esri/layers/Domain": function () {
            define(["dojo/_base/declare", "dojo/_base/lang", "dojo/has", "../kernel", "../lang"], function (r, p, a, g, q) {
                r = r(null, {
                    declaredClass: "esri.layers.Domain",
                    constructor: function (a) {
                        a && p.isObject(a) && (this.name = a.name, this.type = a.type)
                    },
                    toJson: function () {
                        return q.fixJson({
                            name: this.name,
                            type: this.type
                        })
                    }
                });
                a("extend-esri") && p.setObject("layers.Domain", r, g);
                return r
            })
        },
        "esri/layers/CodedValueDomain": function () {
            define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ./Domain".split(" "),
                function (r, p, a, g, q, h, k) {
                    r = r([k], {
                        declaredClass: "esri.layers.CodedValueDomain",
                        constructor: function (a) {
                            a && p.isObject(a) && (this.codedValues = a.codedValues)
                        },
                        getName: function (g) {
                            var e;
                            a.some(this.codedValues, function (a) {
                                a.code == g && (e = a.name);
                                return !!e
                            });
                            return e
                        },
                        toJson: function () {
                            var a = this.inherited(arguments);
                            a.codedValues = p.clone(this.codedValues);
                            return h.fixJson(a)
                        }
                    });
                    g("extend-esri") && p.setObject("layers.CodedValueDomain", r, q);
                    return r
                })
        },
        "esri/layers/InheritedDomain": function () {
            define(["dojo/_base/declare",
"dojo/_base/lang", "dojo/has", "../kernel", "./Domain"], function (r, p, a, g, q) {
                r = r([q], {
                    declaredClass: "esri.layers.InheritedDomain"
                });
                a("extend-esri") && p.setObject("layers.InheritedDomain", r, g);
                return r
            })
        },
        "esri/layers/LayerSource": function () {
            define(["dojo/_base/declare", "dojo/_base/lang", "dojo/has", "../kernel"], function (r, p, a, g) {
                r = r(null, {
                    declaredClass: "esri.layers.LayerSource",
                    type: null,
                    constructor: function (a) {
                        a && p.mixin(this, a)
                    },
                    toJson: function () {}
                });
                a("extend-esri") && p.setObject("layers.LayerSource",
                    r, g);
                return r
            })
        },
        "esri/layers/LayerMapSource": function () {
            define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./LayerSource".split(" "), function (r, p, a, g, q, h) {
                r = r(h, {
                    declaredClass: "esri.layers.LayerMapSource",
                    type: "mapLayer",
                    toJson: function () {
                        return q.fixJson({
                            type: "mapLayer",
                            mapLayerId: this.mapLayerId,
                            gdbVersion: this.gdbVersion
                        })
                    }
                });
                a("extend-esri") && p.setObject("layers.LayerMapSource", r, g);
                return r
            })
        },
        "esri/layers/LayerDataSource": function () {
            define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./LayerSource ./TableDataSource ./QueryDataSource ./JoinDataSource ./RasterDataSource".split(" "),
                function (r, p, a, g, q, h, k, l, e, c) {
                    r = r(h, {
                        declaredClass: "esri.layers.LayerDataSource",
                        type: "dataLayer",
                        constructor: function (a) {
                            if (a && a.dataSource) {
                                switch (a.dataSource.type) {
                                case "table":
                                    a = new k(a.dataSource);
                                    break;
                                case "queryTable":
                                    a = new l(a.dataSource);
                                    break;
                                case "joinTable":
                                    a = new e(a.dataSource);
                                    break;
                                case "raster":
                                    a = new c(a.dataSource);
                                    break;
                                default:
                                    a = a.dataSource
                                }
                                this.dataSource = a
                            }
                        },
                        toJson: function () {
                            var a = {
                                type: "dataLayer",
                                dataSource: this.dataSource && this.dataSource.toJson()
                            };
                            return q.fixJson(a)
                        }
                    });
                    a("extend-esri") && p.setObject("layers.LayerDataSource", r, g);
                    return r
                })
        },
        "esri/layers/TableDataSource": function () {
            define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./DataSource".split(" "), function (r, p, a, g, q, h) {
                r = r(h, {
                    declaredClass: "esri.layers.TableDataSource",
                    toJson: function () {
                        return q.fixJson({
                            type: "table",
                            workspaceId: this.workspaceId,
                            dataSourceName: this.dataSourceName,
                            gdbVersion: this.gdbVersion
                        })
                    }
                });
                a("extend-esri") && p.setObject("layers.TableDataSource", r, g);
                return r
            })
        },
        "esri/layers/DataSource": function () {
            define(["dojo/_base/declare",
"dojo/_base/lang", "dojo/has", "../kernel"], function (r, p, a, g) {
                r = r(null, {
                    declaredClass: "esri.layers.DataSource",
                    constructor: function (a) {
                        a && p.mixin(this, a)
                    },
                    toJson: function () {}
                });
                a("extend-esri") && p.setObject("layers.DataSource", r, g);
                return r
            })
        },
        "esri/layers/QueryDataSource": function () {
            define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./DataSource ../SpatialReference".split(" "), function (r, p, a, g, q, h, k) {
                r = r(h, {
                    declaredClass: "esri.layers.QueryDataSource",
                    constructor: function (a) {
                        a && (a.oidFields &&
                            p.isString(a.oidFields) && (this.oidFields = a.oidFields.split(",")), a.spatialReference && (this.spatialReference = new k(a.spatialReference)))
                    },
                    toJson: function () {
                        var a = {
                            type: "queryTable",
                            workspaceId: this.workspaceId,
                            query: this.query,
                            oidFields: this.oidFields && this.oidFields.join(),
                            spatialReference: this.spatialReference && this.spatialReference.toJson()
                        };
                        if (this.geometryType) {
                            var e;
                            e = "point" === this.geometryType.toLowerCase() ? "esriGeometryPoint" : "multipoint" === this.geometryType.toLowerCase() ? "esriGeometryMultipoint" :
                                "polyline" === this.geometryType.toLowerCase() ? "esriGeometryPolyline" : "polygon" === this.geometryType.toLowerCase() ? "esriGeometryPolygon" : this.geometryType;
                            a.geometryType = e
                        }
                        return q.fixJson(a)
                    }
                });
                a("extend-esri") && p.setObject("layers.QueryDataSource", r, g);
                return r
            })
        },
        "esri/layers/JoinDataSource": function () {
            define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./DataSource ./LayerMapSource ./TableDataSource ./QueryDataSource ./RasterDataSource".split(" "), function (r, p, a, g, q, h, k, l, e, c) {
                var b =
                    r(h, {
                        declaredClass: "esri.layers.JoinDataSource",
                        constructor: function (a) {
                            a && (a.leftTableSource && (this.leftTableSource = this._createLayerSource(a.leftTableSource)), a.rightTableSource && (this.rightTableSource = this._createLayerSource(a.rightTableSource)))
                        },
                        _createLayerSource: function (a) {
                            var g;
                            if ("mapLayer" === a.type) g = new k(a);
                            else {
                                g = {
                                    type: "dataLayer"
                                };
                                var h;
                                switch (a.dataSource.type) {
                                case "table":
                                    h = new l(a.dataSource);
                                    break;
                                case "queryTable":
                                    h = new e(a.dataSource);
                                    break;
                                case "joinTable":
                                    h = new b(a.dataSource);
                                    break;
                                case "raster":
                                    h = new c(a.dataSource);
                                    break;
                                default:
                                    h = a.dataSource
                                }
                                g.dataSource = h;
                                g.toJson = function () {
                                    var a = {
                                        type: "dataLayer",
                                        dataSource: h.toJson()
                                    };
                                    return q.fixJson(a)
                                }
                            }
                            return g
                        },
                        toJson: function () {
                            var a = {
                                    type: "joinTable",
                                    leftTableSource: this.leftTableSource && this.leftTableSource.toJson(),
                                    rightTableSource: this.rightTableSource && this.rightTableSource.toJson(),
                                    leftTableKey: this.leftTableKey,
                                    rightTableKey: this.rightTableKey
                                },
                                b;
                            b = "left-outer-join" === this.joinType.toLowerCase() ? "esriLeftOuterJoin" :
                                "left-inner-join" === this.joinType.toLowerCase() ? "esriLeftInnerJoin" : this.joinType;
                            a.joinType = b;
                            return q.fixJson(a)
                        }
                    });
                a("extend-esri") && p.setObject("layers.JoinDataSource", b, g);
                return b
            })
        },
        "esri/layers/RasterDataSource": function () {
            define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./DataSource".split(" "), function (r, p, a, g, q, h) {
                r = r(h, {
                    declaredClass: "esri.layers.RasterDataSource",
                    toJson: function () {
                        return q.fixJson({
                            type: "raster",
                            workspaceId: this.workspaceId,
                            dataSourceName: this.dataSourceName
                        })
                    }
                });
                a("extend-esri") && p.setObject("layers.RasterDataSource", r, g);
                return r
            })
        },
        "esri/layers/DynamicLayerInfo": function () {
            define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./LayerInfo ./LayerMapSource ./LayerDataSource".split(" "), function (r, p, a, g, q, h, k, l) {
                r = r(h, {
                    declaredClass: "esri.layers.DynamicLayerInfo",
                    defaultVisibility: !0,
                    parentLayerId: -1,
                    maxScale: 0,
                    minScale: 0,
                    constructor: function (a) {
                        a && (a.source ? a = "mapLayer" === a.source.type ? new k(a.source) : new l(a.source) : (a = new k, a.mapLayerId =
                            this.id), this.source = a)
                    },
                    toJson: function () {
                        var a = this.inherited(arguments);
                        a.source = this.source && this.source.toJson();
                        return q.fixJson(a)
                    }
                });
                a("extend-esri") && p.setObject("layers.DynamicLayerInfo", r, g);
                return r
            })
        },
        "esri/layers/LayerDrawingOptions": function () {
            define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../renderers/jsonUtils ./LabelClass".split(" "), function (r, p, a, g, q, h, k, l) {
                r = r(null, {
                    declaredClass: "esri.layers.LayerDrawingOptions",
                    constructor: function (e) {
                        if (e &&
                            (p.mixin(this, e), e.renderer && (this.renderer = k.fromJson(e.renderer)), e.labelingInfo && 0 < e.labelingInfo.length)) {
                            this.labelingInfo = [];
                            var c;
                            a.forEach(e.labelingInfo, function (a) {
                                c = new l(a);
                                this.labelingInfo.push(c)
                            }, this)
                        }
                    },
                    toJson: function () {
                        var e = {
                            renderer: this.renderer && this.renderer.toJson(),
                            transparency: this.transparency,
                            scaleSymbols: this.scaleSymbols,
                            showLabels: this.showLabels
                        };
                        this.labelingInfo && 0 < this.labelingInfo.length && (e.labelingInfo = [], a.forEach(this.labelingInfo, function (a) {
                            e.labelingInfo.push(a.toJson())
                        }));
                        return h.fixJson(e)
                    }
                });
                g("extend-esri") && p.setObject("layers.LayerDrawingOptions", r, q);
                return r
            })
        },
        "esri/layers/LabelClass": function () {
            define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ../lang ../symbols/TextSymbol ../symbols/ShieldLabelSymbol".split(" "), function (r, p, a, g, q, h, k, l) {
                var e = RegExp("__begin__", "ig"),
                    c = RegExp("__end__", "ig"),
                    b = /^__begin__/i,
                    d = /__end__$/i;
                r = r(null, {
                    declaredClass: "esri.layers.LabelClass",
                    labelPlacement: null,
                    labelExpression: null,
                    format: null,
                    fieldInfos: null,
                    useCodedValues: null,
                    symbol: null,
                    maxScale: 0,
                    minScale: 0,
                    where: null,
                    sizeInfo: null,
                    _labelPlacementLookup: {
                        "above-center": "esriServerPointLabelPlacementAboveCenter",
                        "above-left": "esriServerPointLabelPlacementAboveLeft",
                        "above-right": "esriServerPointLabelPlacementAboveRight",
                        "below-center": "esriServerPointLabelPlacementBelowCenter",
                        "below-left": "esriServerPointLabelPlacementBelowLeft",
                        "below-right": "esriServerPointLabelPlacementBelowRight",
                        "center-center": "esriServerPointLabelPlacementCenterCenter",
                        "center-left": "esriServerPointLabelPlacementCenterLeft",
                        "center-right": "esriServerPointLabelPlacementCenterRight",
                        "above-after": "esriServerLinePlacementAboveAfter",
                        "above-along": "esriServerLinePlacementAboveAlong",
                        "above-before": "esriServerLinePlacementAboveBefore",
                        "above-start": "esriServerLinePlacementAboveStart",
                        "above-end": "esriServerLinePlacementAboveEnd",
                        "below-after": "esriServerLinePlacementBelowAfter",
                        "below-along": "esriServerLinePlacementBelowAlong",
                        "below-before": "esriServerLinePlacementBelowBefore",
                        "below-start": "esriServerLinePlacementBelowStart",
                        "below-end": "esriServerLinePlacementBelowEnd",
                        "center-after": "esriServerLinePlacementCenterAfter",
                        "center-along": "esriServerLinePlacementCenterAlong",
                        "center-before": "esriServerLinePlacementCenterBefore",
                        "center-start": "esriServerLinePlacementCenterStart",
                        "center-end": "esriServerLinePlacementCenterEnd",
                        "always-horizontal": "esriServerPolygonPlacementAlwaysHorizontal"
                    },
                    constructor: function (a) {
                        if (a && (p.mixin(this, a), this._labelPlacementLookup.hasOwnProperty(this.labelPlacement) || (this.labelPlacement =
                                h.valueOf(this._labelPlacementLookup, a.labelPlacement)), a.format && (this.format = a.format), a.fieldInfos && (this.fieldInfos = a.fieldInfos), a.symbol && (this.symbol = "esriSHD" === a.symbol.type ? new l(a.symbol) : new k(a.symbol)), a = this.sizeInfo)) a.minSize && (a.minSize = g.pt2px(a.minSize)), a.maxSize && (a.maxSize = g.pt2px(a.maxSize))
                    },
                    getSymbol: function () {
                        return this.symbol
                    },
                    toJson: function () {
                        var a = this.sizeInfo;
                        a && (a = p.mixin({}, a), a.minSize && (a.minSize = g.px2pt(a.minSize)), a.maxSize && (a.maxSize = g.px2pt(a.maxSize)));
                        var b = h.fixJson(this.labelExpressionInfo && p.clone(this.labelExpressionInfo));
                        this._processLabelExpressionInfo(b);
                        a = {
                            name: this.name,
                            labelExpression: this.labelExpression,
                            labelExpressionInfo: b,
                            format: this.format || void 0,
                            fieldInfos: this.fieldInfos || void 0,
                            useCodedValues: this.useCodedValues,
                            maxScale: this.maxScale,
                            minScale: this.minScale,
                            where: this.where,
                            sizeInfo: a || void 0,
                            labelPlacement: this._labelPlacementLookup.hasOwnProperty(this.labelPlacement) ? this._labelPlacementLookup[this.labelPlacement] : this.labelPlacement,
                            symbol: this.symbol && this.symbol.toJson()
                        };
                        return h.fixJson(a)
                    },
                    _processLabelExpressionInfo: function (a) {
                        a && a.value && (a.expression = this._convertTemplatedStringToArcade(a.value))
                    },
                    _convertTemplatedStringToArcade: function (a) {
                        var g;
                        a && (g = p.replace(a, function (a, b) {
                            return '__begin__$feature["' + b + '"]__end__'
                        }), g = b.test(g) ? g.replace(b, "") : '"' + g, g = d.test(g) ? g.replace(d, "") : g + '"', g = g.replace(e, '" + ').replace(c, ' + "'));
                        return g
                    }
                });
                a("extend-esri") && p.setObject("layers.LabelClass", r, q);
                return r
            })
        },
        "esri/symbols/ShieldLabelSymbol": function () {
            define("dojo/_base/declare dojo/_base/lang dojo/sniff dojox/gfx/_base ../kernel ../lang ../urlUtils ./MarkerSymbol ./Font".split(" "),
                function (r, p, a, g, q, h, k, l, e) {
                    var c = {
                        url: "",
                        width: 12,
                        height: 12,
                        angle: 0,
                        xoffset: 0,
                        yoffset: 0
                    };
                    r = r(l, {
                        declaredClass: "esri.symbol.ShieldLabelSymbol",
                        type: "shieldlabelsymbol",
                        color: [255, 255, 255, 1],
                        width: 32,
                        height: 32,
                        font: g.defaultFont,
                        constructor: function (b, d, e, h, l) {
                            b ? p.isString(b) ? (this.url = b, d && (this.color = d), e && (this.width = e), h && (this.height = h), void 0 !== l && (this.font = l)) : (this.width = g.pt2px(b.width), this.height = g.pt2px(b.height), d = b.imageData, !(9 > a("ie")) && d && (e = this.url, this.url = "data:" + (b.contentType ||
                                "image") + ";base64," + d, this.imageData = e)) : p.mixin(this, c)
                        },
                        getStroke: function () {
                            return null
                        },
                        getFill: function () {
                            return this.color
                        },
                        setWidth: function (a) {
                            this.width = a;
                            return this
                        },
                        setHeight: function (a) {
                            this.height = a;
                            return this
                        },
                        setUrl: function (a) {
                            a !== this.url && (delete this.imageData, delete this.contentType);
                            this.url = a;
                            return this
                        },
                        setFont: function (a) {
                            this.font = a;
                            return this
                        },
                        setText: function (a) {
                            this.text = a;
                            return this
                        },
                        getWidth: function () {
                            return this.width
                        },
                        getHeight: function () {
                            return this.height
                        },
                        getShapeDescriptors: function () {
                            return {
                                defaultShape: {
                                    type: "image",
                                    x: -Math.round(this.width / 2),
                                    y: -Math.round(this.height / 2),
                                    width: this.width,
                                    height: this.height,
                                    src: this.url || ""
                                },
                                fill: null,
                                stroke: null
                            }
                        },
                        toJson: function () {
                            var a = this.url,
                                c = this.imageData;
                            if (0 === a.indexOf("data:")) var l = a,
                                a = c,
                                c = l.indexOf(";base64,") + 8,
                                c = l.substr(c);
                            var a = k.getAbsoluteUrl(a),
                                l = g.px2pt(this.width),
                                l = isNaN(l) ? void 0 : l,
                                q = g.px2pt(this.height),
                                q = isNaN(q) ? void 0 : q,
                                a = h.fixJson(p.mixin(this.inherited("toJson", arguments), {
                                    type: "esriSHD",
                                    url: a,
                                    imageData: c,
                                    contentType: this.contentType,
                                    width: l,
                                    height: q
                                }));
                            this.font ? (c = new e(this.font), a.font = c.toJson()) : a.font = null;
                            delete a.size;
                            a.imageData || delete a.imageData;
                            return a
                        }
                    });
                    r.defaultProps = c;
                    a("extend-esri") && (p.setObject("symbol.ShieldLabelSymbol", r, q), q.symbol.defaultShieldLabelSymbol = c);
                    return r
                })
        },
        "esri/layers/agsdynamic": function () {
            define(["./agscommon", "./ArcGISDynamicMapServiceLayer", "../_time"], function () {
                return {}
            })
        },
        "esri/layers/ArcGISDynamicMapServiceLayer": function () {
            define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/sniff dojo/io-query ../kernel ../config ../request ../urlUtils ../layerUtils ../geometry/scaleUtils ./DynamicMapServiceLayer ./ArcGISMapServiceLayer ./TimeInfo ./LayerTimeOptions ./ImageParameters ./DynamicLayerInfo ./LayerMapSource".split(" "),
                function (r, p, a, g, q, h, k, l, e, c, b, d, m, t, s, n, f, y, u) {
                    r = r([m, t], {
                        declaredClass: "esri.layers.ArcGISDynamicMapServiceLayer",
                        _eventMap: {
                            "visible-layers-change": ["visibleLayers"]
                        },
                        constructor: function (a, b, c) {
                            a = b && b.imageParameters;
                            var d = p.hitch;
                            if (a) {
                                var e = a.layerDefinitions;
                                e && this.setLayerDefinitions(e);
                                a.layerOption === f.LAYER_OPTION_SHOW && (this.visibleLayers = [].concat(a.layerIds), this.onVisibleLayersChange(this.visibleLayers))
                            }
                            this._setIsPNG32 = d(this, this._setIsPNG32);
                            this.dpi = a && a.dpi || 96;
                            this.imageFormat =
                                a && a.format || "png8";
                            this.imageTransparency = a && !1 === a.transparent ? !1 : !0;
                            this._setIsPNG32();
                            this.gdbVersion = b && b.gdbVersion;
                            this._params.gdbVersion = this.gdbVersion;
                            p.mixin(this._params, this._url.query, {
                                dpi: this.dpi,
                                transparent: this.imageTransparency,
                                format: this.imageFormat
                            }, a ? a.toJson() : {});
                            this.getImageUrl = d(this, this.getImageUrl);
                            this._initLayer = d(this, this._initLayer);
                            this._load = d(this, this._load);
                            this.useMapImage = b ? b.useMapImage : !1;
                            this._loadCallback = b && b.loadCallback;
                            (b = b && b.resourceInfo) ? this._initLayer(b):
                                (void 0 === c || !1 === c) && this._load();
                            this.registerConnectEvents()
                        },
                        disableClientCaching: !1,
                        layerDefinitions: null,
                        _initLayer: function (a, b) {
                            this.inherited(arguments);
                            a.timeInfo && (this.timeInfo = new s(a.timeInfo));
                            this.loaded = !0;
                            this.onLoad(this);
                            var c = this._loadCallback;
                            c && (delete this._loadCallback, c(this))
                        },
                        getImageUrl: function (a, b, d, f) {
                            var n = this._url.path + "/export?",
                                k = this._params,
                                m = a.spatialReference.wkid || g.toJson(a.spatialReference.toJson()),
                                q = this._errorHandler;
                            delete k._ts;
                            p.mixin(k, {
                                bbox: a.xmin +
                                    "," + a.ymin + "," + a.xmax + "," + a.ymax,
                                bboxSR: m,
                                imageSR: m,
                                size: b + "," + d
                            }, this.disableClientCaching ? {
                                _ts: (new Date).getTime()
                            } : {});
                            k.layerDefs && (a = k.layerDefs, delete k.layerDefs, p.mixin(k, {
                                layerDefs: a
                            }));
                            var r = k.token = this._getToken();
                            a = c.addProxy(n + h.objectToQuery(p.mixin({}, k, {
                                f: "image"
                            })));
                            a.length > l.defaults.io.postLength || this.useMapImage ? this._jsonRequest = e({
                                url: n,
                                content: p.mixin(k, {
                                    f: "json"
                                }),
                                callbackParamName: "callback",
                                load: function (a) {
                                    a = a.href;
                                    r && (a += -1 === a.indexOf("?") ? "?token\x3d" + r : "\x26token\x3d" +
                                        r);
                                    f(c.addProxy(a))
                                },
                                error: q
                            }) : f(a)
                        },
                        _setIsPNG32: function () {
                            var a = this.imageFormat.toLowerCase(),
                                b = q("ie");
                            this.isPNG32 = b && 6 === b && ("png32" === a || "png24" === a) && this.imageTransparency
                        },
                        _setTime: function (c) {
                            var d = this.timeInfo;
                            c = this._params.time = c ? c.toJson().join(",") : null;
                            if (10.02 > this.version && d)
                                if (c) this._params.layerTimeOptions = b._serializeTimeOptions(this.layerTimeOptions);
                                else {
                                    var f = this.layerInfos;
                                    if (f) {
                                        var e = this.layerTimeOptions,
                                            g = e ? e.slice(0) : [],
                                            h = [];
                                        a.forEach(f, function (a) {
                                            a.subLayerIds ||
                                                h.push(a.id)
                                        });
                                        h.length && (a.forEach(h, function (a) {
                                            if (!g[a]) {
                                                var b = new n;
                                                b.useTime = !1;
                                                g[a] = b
                                            }
                                        }), this._params.layerTimeOptions = b._serializeTimeOptions(g, h))
                                    }
                                }
                            10.02 <= this.version && d && (!c && !d.hasLiveData) && (this._params.time = "null,null")
                        },
                        setDPI: function (a, b) {
                            this.dpi = this._params.dpi = a;
                            b || this.refresh(!0)
                        },
                        setImageFormat: function (a, b) {
                            this.imageFormat = this._params.format = a;
                            this._setIsPNG32();
                            b || this.refresh(!0)
                        },
                        setImageTransparency: function (a, b) {
                            this.imageTransparency = this._params.transparent = a;
                            this._setIsPNG32();
                            b || this.refresh(!0)
                        },
                        setVisibleLayers: function (a, b) {
                            this.visibleLayers = a;
                            this._params.layers = f.LAYER_OPTION_SHOW + ":" + (a.length ? a.join() : "-1");
                            this._updateDynamicLayers();
                            b || this.refresh(!0);
                            this.onVisibleLayersChange(this.visibleLayers)
                        },
                        onVisibleLayersChange: function () {},
                        setDefaultVisibleLayers: function (a) {
                            this.visibleLayers = this._defaultVisibleLayers;
                            this._params.layers = null;
                            this._updateDynamicLayers();
                            a || this.refresh(!0);
                            this.onVisibleLayersChange(this.visibleLayers)
                        },
                        setLayerDefinitions: function (a,
                            c) {
                            this.layerDefinitions = a;
                            this._params.layerDefs = b._serializeLayerDefinitions(a);
                            this._updateDynamicLayers();
                            c || this.refresh(!0)
                        },
                        setDefaultLayerDefinitions: function (a) {
                            this.layerDefinitions = this._params.layerDefs = null;
                            this._updateDynamicLayers();
                            a || this.refresh(!0)
                        },
                        setDisableClientCaching: function (a) {
                            this.disableClientCaching = a
                        },
                        setLayerTimeOptions: function (a, c) {
                            this.layerTimeOptions = a;
                            this._params.layerTimeOptions = b._serializeTimeOptions(a);
                            this._updateDynamicLayers();
                            c || this.refresh(!0)
                        },
                        refresh: function (a) {
                            if (a) this.inherited(arguments);
                            else {
                                var b = this.disableClientCaching;
                                this.disableClientCaching = !0;
                                this.inherited(arguments);
                                this.disableClientCaching = b
                            }
                        },
                        setLayerDrawingOptions: function (a, b) {
                            this.layerDrawingOptions = a;
                            this._updateDynamicLayers();
                            b || this.refresh(!0)
                        },
                        setDynamicLayerInfos: function (a, c) {
                            a && 0 < a.length ? (this.dynamicLayerInfos = a, this.visibleLayers = b._getDefaultVisibleLayers(a), this.onVisibleLayersChange(this.visibleLayers)) : this.dynamicLayerInfos = this.layerDrawingOptions = null;
                            this._updateDynamicLayers();
                            c || this.refresh(!0)
                        },
                        createDynamicLayerInfosFromLayerInfos: function () {
                            var b = [],
                                c;
                            a.forEach(this.layerInfos, function (a) {
                                c = new y(a.toJson());
                                c.source = new u({
                                    mapLayerId: a.id
                                });
                                b.push(c)
                            });
                            return b
                        },
                        _onDynamicLayersChange: function () {},
                        _updateDynamicLayers: function () {
                            if (this.dynamicLayerInfos && 0 < this.dynamicLayerInfos.length || this.layerDrawingOptions && 0 < this.layerDrawingOptions.length) {
                                if (!this.dynamicLayerInfos || 0 === this.dynamicLayerInfos.length) this.dynamicLayerInfos = this.createDynamicLayerInfosFromLayerInfos();
                                var c;
                                c =
                                    this.dynamicLayerInfos;
                                var f = [],
                                    e = this._map && d.getScale(this._map),
                                    h = this.visibleLayers,
                                    n = e ? b._getLayersForScale(e, c) : h;
                                a.forEach(c, function (b) {
                                    if (!b.subLayerIds) {
                                        var c, d = b.id;
                                        if (-1 !== a.indexOf(h, d) && -1 !== a.indexOf(n, d)) {
                                            c = {
                                                id: d,
                                                name: b.name
                                            };
                                            c.source = b.source && b.source.toJson();
                                            var e;
                                            this.layerDefinitions && this.layerDefinitions[d] && (e = this.layerDefinitions[d]);
                                            e && (c.definitionExpression = e);
                                            var g;
                                            this.layerDrawingOptions && this.layerDrawingOptions[d] && (g = this.layerDrawingOptions[d]);
                                            g && (c.drawingInfo =
                                                g.toJson());
                                            var l;
                                            this.layerTimeOptions && this.layerTimeOptions[d] && (l = this.layerTimeOptions[d]);
                                            l && (c.layerTimeOptions = l.toJson());
                                            c.minScale = b.minScale || 0;
                                            c.maxScale = b.maxScale || 0;
                                            f.push(c)
                                        }
                                    }
                                }, this);
                                c = g.toJson(f);
                                if (!this._params.dynamicLayers || this._params.dynamicLayers.length !== c.length || this._params.dynamicLayers !== c) this._params.dynamicLayers = c, this._onDynamicLayersChange(this._params.dynamicLayers)
                            } else this._params.dynamicLayers ? (this._params.dynamicLayers = null, this._onDynamicLayersChange(null)) :
                                this._params.dynamicLayers = null
                        },
                        _onExtentChangeHandler: function (a, b, c) {
                            c && this._updateDynamicLayers();
                            this.inherited(arguments)
                        },
                        _setMap: function (a, b, c) {
                            this._map = a;
                            this._updateDynamicLayers();
                            return this.inherited(arguments)
                        },
                        onGDBVersionChange: function () {},
                        setGDBVersion: function (a, b) {
                            this.gdbVersion = a;
                            this._params.gdbVersion = a;
                            this.onGDBVersionChange();
                            b || this.refresh(!0)
                        },
                        exportMapImage: function (a, b) {
                            var c = l.defaults.map,
                                c = p.mixin({
                                    size: c.width + "," + c.height
                                }, this._params, a ? a.toJson(this.normalization) : {}, {
                                    f: "json"
                                });
                            delete c._ts;
                            if (c.layerDefs) {
                                var d = c.layerDefs;
                                delete c.layerDefs;
                                p.mixin(c, {
                                    layerDefs: d
                                })
                            }
                            this._exportMapImage(this._url.path + "/export", c, b)
                        }
                    });
                    q("extend-esri") && p.setObject("layers.ArcGISDynamicMapServiceLayer", r, k);
                    return r
                })
        },
        "esri/layers/DynamicMapServiceLayer": function () {
            define("dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/dom-construct dojo/dom-style dojox/gfx/matrix ../kernel ../config ../sniff ../request ../domUtils ./layer ./MapImage".split(" "), function (r, p,
                a, g, q, h, k, l, e, c, b, d, m) {
                var t = l.defaults.map.zoomDuration;
                r = r(d, {
                    declaredClass: "esri.layers.DynamicMapServiceLayer",
                    _eventMap: {
                        "map-image-export": ["mapImage"]
                    },
                    constructor: function (b, c) {
                        this.useMapTime = c && c.hasOwnProperty("useMapTime") ? !!c.useMapTime : !0;
                        this.extentProcessor = c && c.extentProcessor;
                        var d = a.hitch;
                        this._exportMapImageHandler = d(this, this._exportMapImageHandler);
                        this._imgSrcFunc = d(this, this._imgSrcFunc);
                        this._divAlphaImageFunc = d(this, this._divAlphaImageFunc);
                        this._tileLoadHandler = d(this, this._tileLoadHandler);
                        this._tileErrorHandler = d(this, this._tileErrorHandler);
                        this.registerConnectEvents()
                    },
                    opacity: 1,
                    isPNG32: !1,
                    _setMap: function (a, b, c) {
                        this.inherited(arguments);
                        this._map = a;
                        var d = this._div = g.create("div", null, b),
                            h = k._css.names,
                            l = {
                                position: "absolute",
                                width: a.width + "px",
                                height: a.height + "px",
                                overflow: "visible",
                                opacity: this.opacity
                            },
                            m = e("ie"),
                            r = p.connect,
                            t = a.__visibleDelta;
                        8 === m && delete l.opacity;
                        "css-transforms" === a.navigationMode ? (this._isChildLayer || (l[h.transform] = k._css.translate(t.x, t.y), q.set(d, l)),
                            this._left = t.x, this._top = t.y) : (l.left = "0px", l.top = "0px", q.set(d, l), this._left = this._top = 0);
                        q.set(d, l);
                        this._onResizeHandler_connect = r(a, "onResize", this, "_onResizeHandler");
                        this._opacityChangeHandler_connect = r(this, "onOpacityChange", this, "_opacityChangeHandler");
                        this._img_loading = null;
                        this._dragOrigin = {
                            x: 0,
                            y: 0
                        };
                        this.evaluateSuspension();
                        if (this.suspended && !a.loaded) var A = p.connect(a, "onLoad", this, function () {
                            p.disconnect(A);
                            A = null;
                            this.evaluateSuspension()
                        });
                        this.extentProcessor && (this._panEndEvalHandle =
                            p.connect(a, "onPanEnd", this, this.evaluateSuspension), this._zoomEndEvalHandle = p.connect(a, "onZoomEnd", this, this.evaluateSuspension));
                        return d
                    },
                    _unsetMap: function (a, b) {
                        this._img && this._clearEventListeners(this._img);
                        this._img_loading && this._clearEventListeners(this._img_loading);
                        g.destroy(this._div);
                        this._map = this._div = this._img = this._img_loading = null;
                        var c = p.disconnect;
                        c(this._onResizeHandler_connect);
                        c(this._opacityChangeHandler_connect);
                        c(this._panEndEvalHandle);
                        c(this._zoomEndEvalHandle);
                        this._panEndEvalHandle =
                            this._zoomEndEvalHandle = this._onResizeHandler_connect = this._opacityChangeHandler_connect = null;
                        this._fireUpdateEnd();
                        this._toggleTime();
                        clearTimeout(this._wakeTimer);
                        this._wakeTimer = null;
                        this._disableDrawConnectors();
                        this.inherited(arguments)
                    },
                    _onResizeHandler: function (a, b, c) {
                        q.set(this._div, {
                            width: b + "px",
                            height: c + "px"
                        });
                        this._onExtentChangeHandler(a)
                    },
                    onSuspend: function () {
                        this.inherited(arguments);
                        this._fireUpdateEnd();
                        this._toggleTime();
                        b.hide(this._div);
                        clearTimeout(this._wakeTimer);
                        this._wakeTimer =
                            null;
                        this._disableDrawConnectors()
                    },
                    onResume: function () {
                        this.inherited(arguments);
                        var b = this._map;
                        this._toggleTime();
                        "css-transforms" === b.navigationMode && (b = b.__visibleDelta, this._left = b.x, this._top = b.y, this._isChildLayer || q.set(this._div, k._css.names.transform, k._css.translate(this._left, this._top)));
                        this._enableDrawConnectors();
                        this._wakeTimer = this._wakeTimer || setTimeout(a.hitch(this, function () {
                            this.suspended || this._onExtentChangeHandler(this._map.extent, null, !0)
                        }), 0)
                    },
                    canResume: function () {
                        var a =
                            this.inherited(arguments);
                        if (a) {
                            var b = this._map.extent;
                            this.extentProcessor && b && (a = !!this.extentProcessor({
                                layer: this,
                                extent: b,
                                width: this._map.width
                            }).extent)
                        }
                        return a
                    },
                    _enableDrawConnectors: function () {
                        var a = p.connect,
                            b = this._map;
                        b && (this._onPanHandler_connect = a(b, "onPan", this, "_onPanHandler"), this._onExtentChangeHandler_connect = a(b, "onExtentChange", this, "_onExtentChangeHandler"), "css-transforms" === b.navigationMode ? this._onScaleHandler_connect = a(b, "onScale", this, this._onScaleHandler) : this._onZoomHandler_connect =
                            a(b, "onZoom", this, "_onZoomHandler"))
                    },
                    _disableDrawConnectors: function () {
                        var a = p.disconnect;
                        a(this._onPanHandler_connect);
                        a(this._onExtentChangeHandler_connect);
                        a(this._onZoomHandler_connect);
                        a(this._onScaleHandler_connect);
                        this._onPanHandler_connect = this._onExtentChangeHandler_connect = this._onZoomHandler_connect = this._onScaleHandler_connect = null
                    },
                    _toggleTime: function () {
                        var a = this._map;
                        this.timeInfo && this.useMapTime && a && !this.suspended ? (this._timeConnect || (this._timeConnect = p.connect(a, "onTimeExtentChange",
                            this, this._onTimeExtentChangeHandler)), this._setTime(a.timeExtent)) : (p.disconnect(this._timeConnect), this._timeConnect = null, this._setTime(null))
                    },
                    _setTime: function (a) {
                        this._params && (this._params.time = a ? a.toJson().join(",") : null)
                    },
                    _onPanHandler: function (a, b) {
                        this._panDx = b.x;
                        this._panDy = b.y;
                        var c = this._dragOrigin,
                            d = this._map.__visibleDelta,
                            e = this._img;
                        e && ("css-transforms" === this._map.navigationMode ? (this._left = d.x + b.x, this._top = d.y + b.y, this._isChildLayer || q.set(this._div, k._css.names.transform, k._css.translate(this._left,
                            this._top))) : q.set(e, {
                            left: c.x + b.x + "px",
                            top: c.y + b.y + "px"
                        }))
                    },
                    _onExtentChangeHandler: function (a, b, c) {
                        if (!this.suspended) {
                            clearTimeout(this._wakeTimer);
                            this._wakeTimer = null;
                            var d = this._map,
                                l = this._img,
                                m = l && l.style,
                                r = this._dragOrigin;
                            if (b && !c && l && (b.x !== this._panDx || b.y !== this._panDy)) "css-transforms" === d.navigationMode ? (b = d.__visibleDelta, this._left = b.x, this._top = b.y, this._isChildLayer || q.set(this._div, k._css.names.transform, k._css.translate(this._left, this._top))) : q.set(l, {
                                left: r.x + b.x + "px",
                                top: r.y +
                                    b.y + "px"
                            });
                            l ? (r.x = parseInt(m.left, 10), r.y = parseInt(m.top, 10)) : r.x = r.y = 0;
                            "css-transforms" === d.navigationMode && (c && l) && (q.set(l, k._css.names.transition, "none"), l._multiply = l._multiply ? h.multiply(l._matrix, l._multiply) : l._matrix);
                            this._fireUpdateStart();
                            if (c = this._img_loading)
                                if (this._clearEventListeners(c), g.destroy(c), this._img_loading = null, c = this._jsonRequest) {
                                    try {
                                        c.cancel()
                                    } catch (x) {}
                                    this._jsonRequest = null
                                }
                            var v = d.width;
                            c = d.height;
                            b = v;
                            var A = 0;
                            10 <= this.version && d.wrapAround180 && (a = a._normalize(!0));
                            this.extentProcessor && (A = this.extentProcessor({
                                layer: this,
                                extent: a,
                                width: b
                            }), a = A.extent, b = A.width, A = A.marginLeft || 0);
                            if (this.isPNG32) l = this._img_loading = g.create("div"), l.id = d.id + "_" + this.id + "_" + (new Date).getTime(), q.set(l, {
                                position: "absolute",
                                left: "0px",
                                top: "0px",
                                width: b + "px",
                                height: c + "px"
                            }), d = l.appendChild(g.create("div")), q.set(d, {
                                opacity: 0,
                                width: b + "px",
                                height: c + "px"
                            }), this.getImageUrl(a, b, c, this._divAlphaImageFunc);
                            else {
                                var z = this._img_loading = g.create("img"),
                                    H = k._css.names,
                                    D = e("ie"),
                                    F = {
                                        position: "absolute",
                                        width: b + "px",
                                        height: c + "px"
                                    };
                                8 === D && (F.opacity = this.opacity);
                                null != A && 0 !== A && (F.marginLeft = A + "px");
                                "css-transforms" === d.navigationMode ? (F[H.transform] = k._css.translate(-this._left, -this._top), z._tdx = -this._left, z._tdy = -this._top, F[H.transition] = H.transformName + " " + t + "ms ease", this.extentProcessor && (F[H.origin] = v / 2 - A + "px " + c / 2 + "px")) : (F.left = "0px", F.top = "0px");
                                z.id = d.id + "_" + this.id + "_" + (new Date).getTime();
                                q.set(z, F);
                                z._onload_connect = p.connect(z, "onload", this, "_onLoadHandler");
                                z._onerror_connect = p.connect(z,
                                    "onerror", this, "_onErrorHandler");
                                z._onabort_connect = p.connect(z, "onabort", this, "_onErrorHandler");
                                this._startRect = {
                                    left: r.x,
                                    top: r.y,
                                    width: l ? parseInt(m.width, 10) : b,
                                    height: l ? parseInt(m.height, 10) : c,
                                    marginLeft: l ? parseInt(m.marginLeft || "0", 10) : A,
                                    zoom: m && m.zoom ? parseFloat(m.zoom) : 1
                                };
                                this.getImageUrl(a, b, c, this._imgSrcFunc)
                            }
                        }
                    },
                    _onTimeExtentChangeHandler: function (a) {
                        this.suspended || (this._setTime(a), this.refresh(!0))
                    },
                    getImageUrl: function (a, b, c, d) {},
                    _imgSrcFunc: function (a) {
                        this._img_loading.src = a
                    },
                    _divAlphaImageFunc: function (a) {
                        q.set(this._img_loading,
                            "filter", "progid:DXImageTransform.Microsoft.AlphaImageLoader(src\x3d'" + a + "', sizingMethod\x3d'scale')");
                        this._onLoadHandler({
                            currentTarget: this._img_loading
                        })
                    },
                    _onLoadHandler: function (a) {
                        a = a.currentTarget;
                        var c = this._map;
                        this._clearEventListeners(a);
                        !c || c.__panning || c.__zooming ? g.destroy(a) : (this._img && this._div.removeChild(this._img), this._img = a, c = a.style, this._startRect = {
                                left: 0,
                                top: 0,
                                width: parseInt(c.width, 10),
                                height: parseInt(c.height, 10),
                                marginLeft: parseInt(c.marginLeft || "0", 10),
                                zoom: 1
                            }, this._div.appendChild(a),
                            this.suspended || b.show(this._div), this._img_loading = null, a = this._dragOrigin, a.x = a.y = 0, this.onUpdate());
                        this._fireUpdateEnd()
                    },
                    _onErrorHandler: function (a) {
                        a = a.currentTarget;
                        q.set(a, "visibility", "hidden");
                        this._clearEventListeners(a);
                        a = Error("Unable to load image: " + a.src);
                        this.onError(a);
                        this._fireUpdateEnd(a)
                    },
                    _clearEventListeners: function (a) {
                        p.disconnect(a._onload_connect);
                        p.disconnect(a._onerror_connect);
                        p.disconnect(a._onabort_connect);
                        a._onload_connect = a._onerror_connect = a._onabort_connect = null
                    },
                    setUseMapTime: function (a, b) {
                        this.useMapTime = a;
                        this._toggleTime();
                        b || this.refresh(!0)
                    },
                    refresh: function () {
                        this._map && this._onExtentChangeHandler(this._map.extent)
                    },
                    _onScaleHandler: function (a, b) {
                        var c = {},
                            d = k._css.names,
                            e = this._img;
                        if (e) {
                            q.set(e, d.transition, b ? "none" : d.transformName + " " + t + "ms ease");
                            e._matrix = a;
                            a = e._multiply ? h.multiply(a, e._multiply) : a;
                            if (e._tdx || e._tdy) a = h.multiply(a, {
                                xx: 1,
                                xy: 0,
                                yx: 0,
                                yy: 1,
                                dx: e._tdx,
                                dy: e._tdy
                            });
                            c[d.transform] = k._css.matrix(a);
                            q.set(e, c)
                        }
                    },
                    _onZoomHandler: function (a, b,
                        c) {
                        a = this._startRect;
                        var d = a.width * b,
                            g = a.height * b,
                            h = a.marginLeft * b,
                            l = this._img,
                            m = e("ie");
                        l && (m && 8 > m ? q.set(l, {
                            left: a.left - (d - a.width) * (c.x - a.left) / a.width + "px",
                            top: a.top - (g - a.height) * (c.y - a.top) / a.height + "px",
                            zoom: b * a.zoom
                        }) : q.set(l, {
                            left: a.left - (d - a.width) * (c.x - a.left) / a.width + "px",
                            top: a.top - (g - a.height) * (c.y - a.top) / a.height + "px",
                            width: d + "px",
                            height: g + "px"
                        }), null != h && 0 !== h && q.set(l, {
                            marginLeft: h + "px"
                        }))
                    },
                    _exportMapImage: function (a, b, d) {
                        var e = this._exportMapImageHandler;
                        b.token = this._getToken();
                        c({
                            url: a,
                            content: b,
                            callbackParamName: "callback",
                            load: function (a, b) {
                                e(a, b, d)
                            },
                            error: l.defaults.io.errorHandler
                        })
                    },
                    _exportMapImageHandler: function (a, b, c) {
                        a = new m(a);
                        this.onMapImageExport(a);
                        c && c(a)
                    },
                    onMapImageExport: function () {},
                    setOpacity: function (a) {
                        if (this.opacity != a) this.onOpacityChange(this.opacity = a)
                    },
                    onOpacityChange: function () {},
                    _opacityChangeHandler: function (a) {
                        var b = 8 === e("ie") ? this._img : this._div;
                        q.set(b, "opacity", a)
                    }
                });
                e("extend-esri") && a.setObject("layers.DynamicMapServiceLayer", r, k);
                return r
            })
        },
        "esri/layers/MapImage": function () {
            define("dojo/_base/declare dojo/_base/lang dojo/dom-style dojo/has ../kernel ../domUtils ../geometry/Extent".split(" "), function (r, p, a, g, q, h, k) {
                r = r(null, {
                    declaredClass: "esri.layers.MapImage",
                    constructor: function (a) {
                        p.mixin(this, a);
                        this.extent = new k(this.extent)
                    },
                    visible: !0,
                    opacity: 1,
                    getLayer: function () {
                        return this._layer
                    },
                    getNode: function () {
                        return this._node
                    },
                    show: function () {
                        if (!this.visible) {
                            this.visible = !0;
                            var a = this._node,
                                e = this._layer,
                                c;
                            if (a) {
                                if (c = e && e._div) e.suspended ||
                                    e._setPos(a, c._left, c._top), (e._active || c).appendChild(a);
                                h.show(a)
                            }
                        }
                    },
                    hide: function () {
                        if (this.visible) {
                            this.visible = !1;
                            var a = this._node;
                            a && (h.hide(a), a.parentNode && a.parentNode.removeChild(a))
                        }
                    },
                    setOpacity: function (g) {
                        var e = this._node;
                        this.opacity = g;
                        e && a.set(e, "opacity", g)
                    }
                });
                g("extend-esri") && p.setObject("layers.MapImage", r, q);
                return r
            })
        },
        "esri/layers/ImageParameters": function () {
            define("dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/has ../kernel ../lang ../layerUtils".split(" "),
                function (r, p, a, g, q, h, k, l) {
                    p = p(null, {
                        declaredClass: "esri.layers.ImageParameters",
                        constructor: function () {
                            this.layerDefinitions = []
                        },
                        bbox: null,
                        extent: null,
                        width: null,
                        height: null,
                        dpi: null,
                        format: null,
                        imageSpatialReference: null,
                        layerOption: null,
                        layerIds: null,
                        transparent: null,
                        timeExtent: null,
                        layerTimeOptions: null,
                        toJson: function (a) {
                            this.bbox && r.deprecated(this.declaredClass + " : Property 'bbox' deprecated. Use property 'extent'.");
                            var c = this.bbox || this.extent,
                                c = c && a && c._normalize(!0);
                            a = this.layerOption;
                            var b =
                                c ? c.spatialReference.wkid || g.toJson(c.spatialReference.toJson()) : null,
                                d = this.imageSpatialReference,
                                c = {
                                    dpi: this.dpi,
                                    format: this.format,
                                    transparent: this.transparent,
                                    size: null !== this.width && null !== this.height ? this.width + "," + this.height : null,
                                    bbox: c ? c.xmin + "," + c.ymin + "," + c.xmax + "," + c.ymax : null,
                                    bboxSR: b,
                                    layers: a ? a + ":" + this.layerIds.join(",") : null,
                                    imageSR: d ? d.wkid || g.toJson(d.toJson()) : b
                                };
                            c.layerDefs = l._serializeLayerDefinitions(this.layerDefinitions);
                            a = this.timeExtent;
                            c.time = a ? a.toJson().join(",") : null;
                            c.layerTimeOptions = l._serializeTimeOptions(this.layerTimeOptions);
                            return k.filter(c, function (a) {
                                if (null !== a) return !0
                            })
                        }
                    });
                    a.mixin(p, {
                        LAYER_OPTION_SHOW: "show",
                        LAYER_OPTION_HIDE: "hide",
                        LAYER_OPTION_INCLUDE: "include",
                        LAYER_OPTION_EXCLUDE: "exclude"
                    });
                    q("extend-esri") && a.setObject("layers.ImageParameters", p, h);
                    return p
                })
        },
        "esri/_time": function () {
            define(["./TimeExtent"], function () {
                return {}
            })
        },
        "esri/layers/FeatureLayer": function () {
            define("require module dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/json dojo/_base/Deferred dojo/date/locale dojo/sniff dojo/io-query dojo/dom-construct dojo/i18n dojo/when dojo/promise/all ../kernel ../lang ../request ../config ../deferredUtils ../SpatialReference ../symbols/SimpleMarkerSymbol ../symbols/SimpleLineSymbol ../symbols/SimpleFillSymbol ../symbols/jsonUtils ../renderers/SimpleRenderer ../renderers/UniqueValueRenderer ../renderers/jsonUtils ../tasks/QueryTask ../tasks/query ../tasks/FeatureSet ../tasks/StatisticDefinition ../geometry/Extent ../geometry/jsonUtils ../geometry/normalizeUtils ../geometry/scaleUtils ./GraphicsLayer ./Field ./TimeInfo ./FeatureType ./FeatureTemplate ./FeatureEditResult ./LabelClass ./SnapshotMode ./OnDemandMode ./SelectionMode ./StreamMode ./TrackManager ./HeatmapManager dojo/i18n!../nls/jsapi dojo/has!extend-esri?./agscommon".split(" "),
                function (r, p, a, g, q, h, k, l, e, c, b, d, m, t, s, n, f, y, u, w, C, x, v, A, z, H, D, F, E, Q, R, G, I, P, K, J, O, W, T, N, Y, Z, ga, aa, ea, ua, xa, ha, pa, oa) {
                    var na = u.defaults,
                        ia = a(O, {
                            declaredClass: "esri.layers.FeatureLayer",
                            invalidParams: "query contains one or more unsupported parameters",
                            reHostedFS: /(https?:)?\/\/services.*\.arcgis\.com/i,
                            maxPointCountForAuto: 4E3,
                            maxRecordCountForAuto: 2E3,
                            maxVertexCountForAuto: 25E4,
                            generalizeForScale: 4E3,
                            _eventMap: {
                                "add-attachment-complete": ["result"],
                                "before-apply-edits": ["adds", "updates", "deletes"],
                                "delete-attachments-complete": ["results"],
                                "edits-complete": ["adds", "updates", "deletes"],
                                "query-attachment-infos-complete": ["results"],
                                "query-count-complete": ["count"],
                                "query-features-complete": ["featureSet"],
                                "query-ids-complete": ["objectIds"],
                                "query-related-features-complete": ["featureSets"],
                                "selection-complete": ["features", "method"],
                                "update-end": ["error", "info"]
                            },
                            constructor: function (a, b) {
                                this._preventInit || this._initFeatureLayer(a, b)
                            },
                            _initFeatureLayer: function (a, b) {
                                this.i18n = oa;
                                b = b || {};
                                this.showLabels =
                                    null != b.showLabels ? b.showLabels : !0;
                                this._outFields = b.outFields;
                                this._defnExpr = b.definitionExpression;
                                this._loadCallback = b.loadCallback;
                                var c = b._usePatch;
                                this._usePatch = null === c || void 0 === c ? !0 : c;
                                this._trackIdField = b.trackIdField;
                                this.objectIdField = b.objectIdField;
                                this._maxOffset = null != b.maxAllowableOffset ? b.maxAllowableOffset : this.maxAllowableOffset;
                                this.quantize = null != b.quantize ? b.quantize : !0;
                                this._optEditable = b.editable;
                                this._optAutoGen = b.autoGeneralize;
                                this.editSummaryCallback = b.editSummaryCallback;
                                this.userId = b.userId;
                                this.userIsAdmin = b.userIsAdmin;
                                this.useMapTime = b.hasOwnProperty("useMapTime") ? !!b.useMapTime : !0;
                                this.source = b.source;
                                this.gdbVersion = b.gdbVersion;
                                this.orderByFields = b.orderByFields;
                                this.maxPointCountForAuto = null != b.maxPointCountForAuto ? b.maxPointCountForAuto : this.maxPointCountForAuto;
                                this.maxRecordCountForAuto = null != b.maxRecordCountForAuto ? b.maxRecordCountForAuto : this.maxRecordCountForAuto;
                                this.maxVertexCountForAuto = null != b.maxVertexCountForAuto ? b.maxVertexCountForAuto : this.maxVertexCountForAuto;
                                this.generalizeForScale = null != b.generalizeForScale ? b.generalizeForScale : this.generalizeForScale;
                                this.queryPagination = null != b.queryPagination ? b.queryPagination : this.url ? this.reHostedFS.test(this.url) : !1;
                                this.multipatchOption = b.multipatchOption;
                                this._selectedFeatures = {};
                                this._selectedFeaturesArr = [];
                                this._newFeatures = [];
                                this._deletedFeatures = {};
                                this._ulid = this._getUniqueId();
                                var d = ia,
                                    c = this.mode = f.isDefined(b.mode) ? b.mode : d.MODE_ONDEMAND;
                                this._isStream && (this.mode = c = d.MODE_STREAM);
                                switch (c) {
                                case d.MODE_SNAPSHOT:
                                    this.currentMode =
                                        d.MODE_SNAPSHOT;
                                    this._mode = new aa(this);
                                    this._isSnapshot = !0;
                                    break;
                                case d.MODE_ONDEMAND:
                                case d.MODE_AUTO:
                                    this.currentMode = d.MODE_ONDEMAND;
                                    this._tileWidth = b.tileWidth || 512;
                                    this._tileHeight = b.tileHeight || 512;
                                    this._mode = new ea(this);
                                    this.latticeTiling = b.latticeTiling;
                                    break;
                                case d.MODE_SELECTION:
                                    this.currentMode = d.MODE_SELECTION;
                                    this._mode = new ua(this);
                                    this._isSelOnly = !0;
                                    break;
                                case d.MODE_STREAM:
                                    this.currentMode = d.MODE_STREAM, this._mode = new xa(this), this._isStream = !0
                                }
                                this._initLayer = q.hitch(this, this._initLayer);
                                this._selectHandler = q.hitch(this, this._selectHandler);
                                this._editable = !1;
                                if (q.isObject(a) && a.layerDefinition) return this._collection = !0, this.mode = this._isStream ? d.MODE_STREAM : d.MODE_SNAPSHOT, this._initLayer(a), this;
                                this._task = new E(this.url, {
                                    source: this.source,
                                    gdbVersion: this.gdbVersion
                                });
                                c = this._url.path;
                                this._fserver = !1; - 1 !== c.search(/\/FeatureServer\//i) && (this._fserver = !0);
                                this.mode === d.MODE_AUTO && this.reHostedFS.test(this.url) && this._queryLimit();
                                (d = b.resourceInfo) ? this._initLayer(d): (this.source &&
                                    (d = {
                                        source: this.source.toJson()
                                    }, this._url.query = q.mixin(this._url.query, {
                                        layer: k.toJson(d)
                                    })), this.gdbVersion && (this._url.query = q.mixin(this._url.query, {
                                        gdbVersion: this.gdbVersion
                                    })), y({
                                        url: c,
                                        content: q.mixin({
                                            f: "json"
                                        }, this._url.query),
                                        callbackParamName: "callback",
                                        load: this._initLayer,
                                        error: this._errorHandler
                                    }));
                                this.registerConnectEvents()
                            },
                            _initLayer: function (a, b) {
                                if (a || b) {
                                    this._json = a;
                                    this._findCredential();
                                    if (this.credential && this.credential.ssl || a && a._ssl) this._useSSL(), this._task._useSSL();
                                    this.version = a.currentVersion;
                                    this.version || (this.version = "capabilities" in a || "drawingInfo" in a || "hasAttachments" in a || "htmlPopupType" in a || "relationships" in a || "timeInfo" in a || "typeIdField" in a || "types" in a ? 10 : 9.3);
                                    this._collection && (this._isStream || (this.currentMode = ia.MODE_SNAPSHOT, this._mode = new aa(this)), this._isSnapshot = !0, this._featureSet = a.featureSet, this._nextId = a.nextObjectId, a = a.layerDefinition);
                                    this.geometryType = a.geometryType;
                                    "string" !== typeof this.multipatchOption && "esriGeometryMultiPatch" ===
                                        this.geometryType && (this.multipatchOption = "xyFootprint");
                                    if (a.hasOwnProperty("capabilities")) {
                                        var d = this.capabilities = a.capabilities;
                                        d && -1 !== d.toLowerCase().indexOf("editing") ? this._editable = !0 : this._editable = !1
                                    } else this._collection || (this._editable = this._fserver);
                                    f.isDefined(this._optEditable) ? (this._editable = this._optEditable, delete this._optEditable) : "esriGeometryMultiPatch" === this.geometryType && (this._editable = !1);
                                    this._json = k.toJson(this._json);
                                    if (this.isEditable()) this._setMaxOffset(null);
                                    else if (this.mode !== ia.MODE_SNAPSHOT && ("esriGeometryPolyline" === this.geometryType || "esriGeometryPolygon" === this.geometryType || this.hasXYFootprint())) this._autoGeneralize = f.isDefined(this._optAutoGen) ? this._optAutoGen : this.mode === ia.MODE_ONDEMAND || this.mode === ia.MODE_AUTO, delete this._optAutoGen;
                                    var d = a.effectiveMinScale || a.minScale,
                                        e = a.effectiveMaxScale || a.maxScale;
                                    !this._hasMin && d && this.setMinScale(d);
                                    !this._hasMax && e && this.setMaxScale(e);
                                    this.layerId = a.id;
                                    this.name = a.name;
                                    this.description = a.description;
                                    this.copyright = a.copyrightText;
                                    this.type = a.type;
                                    this.displayField = a.displayField;
                                    this.defaultDefinitionExpression = a.definitionExpression;
                                    this.fullExtent = new I(a.extent);
                                    this.initialExtent = new I(this.fullExtent.toJson());
                                    this.fullExtent.spatialReference && (this.spatialReference = new C(this.fullExtent.spatialReference.toJson()));
                                    this.defaultVisibility = a.defaultVisibility;
                                    if ("esriGeometryPoint" === this.geometryType || "esriGeometryMultipoint" === this.geometryType) this.latticeTiling = !1;
                                    this.hasM = a.hasM || !1;
                                    this.hasZ = a.hasZ || !1;
                                    this.indexedFields = a.indexedFields;
                                    this.maxRecordCount = a.maxRecordCount;
                                    this.canModifyLayer = a.canModifyLayer;
                                    this.supportsStatistics = a.supportsStatistics;
                                    this.supportsAdvancedQueries = this._collection ? !1 : a.supportsAdvancedQueries;
                                    this.supportsCalculate = a.supportsCalculate;
                                    this.supportsAttachmentsByUploadId = a.supportsAttachmentsByUploadId;
                                    this.supportsCoordinatesQuantization = a.supportsCoordinatesQuantization;
                                    this.quantize = this.quantize && this.supportsCoordinatesQuantization;
                                    this.hasLabels =
                                        a.hasLabels;
                                    this.canScaleSymbols = a.canScaleSymbols;
                                    this.supportsRollbackOnFailureParameter = this.supportsRollbackOnFailure = a.supportsRollbackOnFailure;
                                    this.syncCanReturnChanges = a.syncCanReturnChanges;
                                    this.isDataVersioned = a.isDataVersioned;
                                    this.editFieldsInfo = a.editFieldsInfo;
                                    this.ownershipBasedAccessControlForFeatures = a.ownershipBasedAccessControlForFeatures;
                                    this.editFieldsInfo && this.ownershipBasedAccessControlForFeatures && (this.creatorField = this.editFieldsInfo.creatorField);
                                    this.relationships = a.relationships;
                                    this.allowGeometryUpdates = f.isDefined(a.allowGeometryUpdates) ? a.allowGeometryUpdates : !0;
                                    this.allowUpdateWithoutMValues = !!a.allowUpdateWithoutMValues;
                                    this.advancedQueryCapabilities = a.advancedQueryCapabilities || {
                                        supportsStatistics: this.supportsStatistics,
                                        supportsOrderBy: this.supportsAdvancedQueries,
                                        supportsDistinct: this.supportsAdvancedQueries
                                    };
                                    this.useStandardizedQueries = a.useStandardizedQueries;
                                    this.tileMaxRecordCount = a.tileMaxRecordCount;
                                    this.standardMaxRecordCount = a.standardMaxRecordCount;
                                    this._setMaxOffset(this._maxOffset, !0);
                                    this._isTable = "Table" === this.type;
                                    for (var g = this.fields = [], e = a.fields, d = 0; d < e.length; d++) g.push(new W(e[d]));
                                    if (!this.objectIdField) {
                                        this.objectIdField = a.objectIdField;
                                        if (!this.objectIdField) {
                                            e = a.fields;
                                            for (d = 0; d < e.length; d++)
                                                if (g = e[d], "esriFieldTypeOID" === g.type) {
                                                    this.objectIdField = g.name;
                                                    break
                                                }
                                        }!this.objectIdField && !this._isStream && console.debug("esri.layers.FeatureLayer: " + f.substitute({
                                            url: this.url
                                        }, "objectIdField is not set [url: ${url}]"))
                                    }
                                    if (!f.isDefined(this._nextId)) {
                                        e = this.objectIdField;
                                        g = -1;
                                        if (this._collection && e)
                                            for (var n = (d = this._featureSet) && d.features, l = n ? n.length : 0, m, d = 0; d < l; d++) m = (m = n[d].attributes) && m[e], m > g && (g = m);
                                        this._nextId = g + 1
                                    }
                                    this.globalIdField = a.globalIdField;
                                    if (d = this.typeIdField = a.typeIdField)
                                        if (d = !this._getField(d) && this._getField(d, !0)) this.typeIdField = d.name;
                                    this.visibilityField = a.visibilityField;
                                    if (e = a.defaultSymbol) this.defaultSymbol = z.fromJson(e);
                                    var p = this.types = [],
                                        r = a.types,
                                        s, t, g = (d = this.editFieldsInfo) && d.creatorField,
                                        n = d && d.editorField;
                                    m = g || n;
                                    l = [];
                                    if (r)
                                        for (d =
                                            0; d < r.length; d++) s = new N(r[d]), t = s.templates, m && (t && t.length) && (l = l.concat(t)), p.push(s);
                                    r = a.templates;
                                    s = this.templates = [];
                                    if (r)
                                        for (d = 0; d < r.length; d++) p = new Y(r[d]), m && l.push(p), s.push(p);
                                    for (d = 0; d < l.length; d++)
                                        if (m = q.getObject("prototype.attributes", !1, l[d])) g && delete m[g], n && delete m[n];
                                    if (d = a.timeInfo) this.timeInfo = new T(d), this._startTimeField = d.startTimeField, this._endTimeField = d.endTimeField, this._startTimeField && this._endTimeField && (this._twoTimeFields = !0), this._trackIdField ? d.trackIdField =
                                        this._trackIdField : this._trackIdField = d.trackIdField;
                                    this.hasAttachments = !this._collection && a.hasAttachments ? !0 : !1;
                                    this.htmlPopupType = a.htmlPopupType;
                                    var d = a.drawingInfo,
                                        u;
                                    if ((g = d && d.labelingInfo) && !this.labelingInfo) this.labelingInfo = h.map(g, function (a) {
                                        return new ga(a)
                                    }), this._fixLabelExpr();
                                    if (!this.renderer)
                                        if (d && d.renderer) {
                                            if (u = d.renderer, this.setRenderer(F.fromJson(u)), "classBreaks" === u.type && this.renderer.setMaxInclusive(!0), !this._collection) {
                                                var w = u.type,
                                                    e = [];
                                                u = this.renderer;
                                                switch (w) {
                                                case "simple":
                                                    e.push(u.symbol);
                                                    break;
                                                case "uniqueValue":
                                                case "classBreaks":
                                                    e.push(u.defaultSymbol), e = e.concat(h.map(u.infos, function (a) {
                                                        return a.symbol
                                                    }))
                                                }
                                                var e = h.filter(e, f.isDefined),
                                                    y = this._url.path + "/images/",
                                                    E = this._getToken();
                                                h.forEach(e, function (a) {
                                                    var b = a.url;
                                                    b && (-1 === b.search(/https?\:/) && -1 === b.indexOf("data:") && (a.url = y + b), E && -1 !== a.url.search(/https?\:/) && (a.url += "?token\x3d" + E))
                                                })
                                            }
                                        } else if (e) r = this.types, 0 < r.length ? (u = new D(this.defaultSymbol, this.typeIdField), h.forEach(r, function (a) {
                                            u.addValue(a.id, a.symbol)
                                        })) : u =
                                        new H(this.defaultSymbol), this.setRenderer(u);
                                    else if (!this._isTable) {
                                        switch (this.geometryType) {
                                        case "esriGeometryPoint":
                                        case "esriGeometryMultipoint":
                                            w = new x;
                                            break;
                                        case "esriGeometryPolyline":
                                            w = new v;
                                            break;
                                        case "esriGeometryPolygon":
                                            w = new A;
                                            break;
                                        default:
                                            this.hasXYFootprint() && (w = new A)
                                        }
                                        this.setRenderer(w ? new H(w) : null)
                                    }
                                    w = d && d.transparency || 0;
                                    !this.hasOwnProperty("opacity") && 0 < w && (this.opacity = 1 - w / 100);
                                    if ((c("ie") || 7 <= c("trident") || c("safari")) && this.isEditable() && 10.02 > this.version) this._ts = !0;
                                    this.statistics = a.statistics;
                                    this._fixRendererFields();
                                    this._checkFields();
                                    this._updateCaps();
                                    var G = function () {
                                        this.currentMode !== ia.MODE_SNAPSHOT && (this.queryPagination = !1);
                                        null != this._maxOffset && !this._isFractionalOffsetAllowed() && this._setMaxOffset(this._maxOffset);
                                        this.loaded = !0;
                                        this.onLoad(this);
                                        var a = this._loadCallback;
                                        a && (delete this._loadCallback, a(this))
                                    };
                                    this._collection ? (w = this._featureSet, this._featureSet = null, this._mode._drawFeatures(new R(w)), this._fcAdded = !0, G.call(this)) : this._forceIdentity(this._limitPromise ?
                                        function () {
                                            var a = this;
                                            this._limitPromise.then(function (b) {
                                                a._checkMode(b)
                                            });
                                            this._limitPromise.always(function () {
                                                a._limitPromise = null;
                                                G.call(a)
                                            })
                                        } : G)
                                }
                            },
                            setShowLabels: function (a) {
                                this.showLabels = a;
                                this.onShowLabelsChange()
                            },
                            onShowLabelsChange: function () {},
                            onRendererChange: function (a) {
                                this.inherited(arguments);
                                var b = this._map;
                                this._ager = !(!a || !a.observationAger || !a.observationRenderer);
                                a && "colors" in a && "blurRadius" in a && "maxPixelIntensity" in a ? "esriGeometryPoint" == this.geometryType && (!this._heatmapManager &&
                                    b) && (this._heatmapManager = new pa(this), this._heatmapManager.initialize(b)) : this.renderer && this.renderer.getRendererInfo ? h.some(this.renderer.rendererInfos, function (a) {
                                    return a.renderer && "colors" in a.renderer && "blurRadius" in a.renderer
                                }) || (this._heatmapManager = null) : this._heatmapManager = null;
                                if (a) {
                                    var c = [],
                                        b = h.filter([a, a.observationRenderer, a.latestObservationRenderer, a.trackRenderer], f.isDefined),
                                        d = function (a) {
                                            return null != a && "function" != typeof a && a
                                        };
                                    h.forEach(b, function (a) {
                                        var b = d(a.attributeField),
                                            f = d(a.attributeField2);
                                        a = d(a.attributeField3);
                                        !1 !== b && c.push(b);
                                        !1 !== f && c.push(f);
                                        !1 !== a && c.push(a)
                                    });
                                    this._rendererFields = c
                                } else this._rendererFields = [];
                                this.loaded && (this._fixRendererFields(), this._checkFields(this._rendererFields), this._collection && (this._typesDirty = !0))
                            },
                            redraw: function () {
                                this.inherited(arguments);
                                this._trackManager && this._trackManager.container && this._trackManager.container.redraw()
                            },
                            _evalSDRenderer: function () {
                                this.inherited(arguments);
                                var a = this._getRenderer();
                                this._ager = !(!a ||
                                    !a.observationAger || !a.observationRenderer);
                                this._trackManager && this._trackManager.container && this._trackManager.container.setRenderer(a && a.trackRenderer)
                            },
                            _setMap: function (a) {
                                var b = this.inherited(arguments),
                                    c = this._mode,
                                    d = this;
                                c && c.initialize(a);
                                this.geometryType && this.attr("data-geometry-type", this.geometryType.replace(/esriGeometry/i, "").toLowerCase());
                                this._addHandle = this.on("graphic-node-add", function (a) {
                                    a = a.graphic.attributes;
                                    (a = d._selectedFeatures[a && a[d.objectIdField]]) && a.attr("data-selected",
                                        "")
                                });
                                return b
                            },
                            _unsetMap: function (a) {
                                var b = this._mode;
                                b && b.suspend();
                                this._trackManager && (this._trackManager.destroy(), this._trackManager = null);
                                g.disconnect(this._zoomConnect);
                                g.disconnect(this._addHandle);
                                this._zoomConnect = this._addHandle = null;
                                this._toggleTime(!1);
                                this.inherited("_unsetMap", arguments)
                            },
                            refresh: function () {
                                this._needsRefresh = !1;
                                var a = this._mode;
                                a && a.refresh()
                            },
                            hasXYFootprint: function () {
                                return "esriGeometryMultiPatch" === this.geometryType && "xyFootprint" === this.multipatchOption
                            },
                            getOutFields: function () {
                                return h.filter(this._getOutFields(),
                                    function (a) {
                                        return "*" === a || !!this._getField(a)
                                    }, this)
                            },
                            getField: function (a) {
                                return this._getField(a, !0)
                            },
                            getFieldLabel: function (a) {
                                var b = this.infoTemplate,
                                    b = b && b.getFieldInfo && b.getFieldInfo(a);
                                a = q.isFunction(a) ? null : this.getField(a);
                                var c = b || a,
                                    d = "";
                                c && (d = b && b.label || a && a.alias || c.name || c.fieldName);
                                return d
                            },
                            getDomain: function (a, b) {
                                var c, d, f = b && b.feature,
                                    e = f && this.typeIdField && f.attributes && f.attributes[this.typeIdField];
                                null != e && h.some(this.types, function (b) {
                                    if (b.id == e) {
                                        if ((c = b.domains && b.domains[a]) &&
                                            "inherited" === c.type) c = this._getLayerDomain(a), d = !0;
                                        return !0
                                    }
                                    return !1
                                }, this);
                                !d && !c && (c = this._getLayerDomain(a));
                                return c
                            },
                            _getLayerDomain: function (a) {
                                var b;
                                h.some(this.fields, function (c) {
                                    c.name === a && (b = c.domain);
                                    return !!b
                                });
                                return b
                            },
                            getType: function (a) {
                                var b, c = a && this.typeIdField && a.attributes && a.attributes[this.typeIdField];
                                h.some(this.types, function (a) {
                                    a.id == c && (b = a);
                                    return !!b
                                });
                                return b
                            },
                            setEditable: function (a) {
                                if (!this._collection) return console.log("FeatureLayer:setEditable - this functionality is not yet supported for layer in a feature service"),
                                    this;
                                if (!this.loaded) return this._optEditable = a, this;
                                var b = this._editable;
                                this._editable = a;
                                this._updateCaps();
                                if (b !== a) this.onCapabilitiesChange();
                                return this
                            },
                            getEditCapabilities: function (a) {
                                var b = {
                                    canCreate: !1,
                                    canUpdate: !1,
                                    canDelete: !1
                                };
                                if (!this.loaded || !this.isEditable()) return b;
                                var c = a && a.feature;
                                a = a && a.userId || this.getUserId();
                                var d = h.map(this.capabilities ? this.capabilities.toLowerCase().split(",") : [], q.trim),
                                    f = (b = -1 < h.indexOf(d, "editing")) && -1 < h.indexOf(d, "create"),
                                    e = b && -1 < h.indexOf(d, "update"),
                                    d = b && -1 < h.indexOf(d, "delete"),
                                    g = this.ownershipBasedAccessControlForFeatures,
                                    n = this.editFieldsInfo,
                                    l = n && n.creatorField,
                                    n = n && n.realm,
                                    c = (c = c && c.attributes) && l ? c[l] : void 0,
                                    m = !!this.userIsAdmin,
                                    l = !g || m || !(!g.allowOthersToUpdate && !g.allowUpdateToOthers),
                                    k = !g || m || !(!g.allowOthersToDelete && !g.allowDeleteToOthers),
                                    p = !g || m || !g.hasOwnProperty("allowAnonymousToUpdate") || g.allowAnonymousToUpdate,
                                    g = !g || m || !g.hasOwnProperty("allowAnonymousToDelete") || g.allowAnonymousToDelete;
                                a && n && (a = a + "@" + n);
                                if (m || b && !f && !e && !d) f =
                                    e = d = !0;
                                b = {
                                    canCreate: f,
                                    canUpdate: e,
                                    canDelete: d
                                };
                                a || (b.canUpdate = b.canUpdate && p, b.canDelete = b.canDelete && g);
                                null === c ? (b.canUpdate = b.canUpdate && l, b.canDelete = b.canDelete && k) : "" !== c && (c && a.toLowerCase() !== c.toLowerCase()) && (b.canUpdate = b.canUpdate && l, b.canDelete = b.canDelete && k);
                                return b
                            },
                            getUserId: function () {
                                var a;
                                this.loaded && (a = this.credential && this.credential.userId || this.userId || "");
                                return a
                            },
                            setUserIsAdmin: function (a) {
                                this.userIsAdmin = a
                            },
                            setEditSummaryCallback: function (a) {
                                this.editSummaryCallback =
                                    a
                            },
                            getEditSummary: function (a, b, c) {
                                c = f.isDefined(c) ? c : (new Date).getTime();
                                var d = "";
                                c = this.getEditInfo(a, b, c);
                                (b = b && b.callback || this.editSummaryCallback) && (c = b(a, c) || "");
                                if (q.isString(c)) d = c;
                                else {
                                    if (c) {
                                        a = c.action;
                                        b = c.userId;
                                        var e = c.timeValue,
                                            g = 0;
                                        a && g++;
                                        b && g++;
                                        f.isDefined(e) && g++;
                                        1 < g && (d = ("edit" === a ? "edit" : "create") + (b ? "User" : "") + (f.isDefined(e) ? c.displayPattern : ""))
                                    }
                                    d = d && f.substitute(c, this.i18n.layers.FeatureLayer[d])
                                }
                                return d
                            },
                            getEditInfo: function (a, b, c) {
                                if (this.loaded) {
                                    c = f.isDefined(c) ? c : (new Date).getTime();
                                    b = b && b.action || "last";
                                    var d = this.editFieldsInfo,
                                        e = d && d.creatorField,
                                        g = d && d.creationDateField,
                                        h = d && d.editorField,
                                        d = d && d.editDateField,
                                        h = (a = a && a.attributes) && h ? a[h] : void 0,
                                        d = a && d ? a[d] : null,
                                        e = this._getEditData(a && e ? a[e] : void 0, a && g ? a[g] : null, c);
                                    c = this._getEditData(h, d, c);
                                    var n;
                                    switch (b) {
                                    case "creation":
                                        n = e;
                                        break;
                                    case "edit":
                                        n = c;
                                        break;
                                    case "last":
                                        n = c || e
                                    }
                                    n && (n.action = n === c ? "edit" : "creation");
                                    return n
                                }
                            },
                            _getEditData: function (a, b, c) {
                                var d, g, h;
                                f.isDefined(b) && (g = c - b, h = 0 > g ? "Full" : 6E4 > g ? "Seconds" : 12E4 > g ? "Minute" :
                                    36E5 > g ? "Minutes" : 72E5 > g ? "Hour" : 864E5 > g ? "Hours" : 6048E5 > g ? "WeekDay" : "Full");
                                if (void 0 !== a || h) d = d || {}, d.userId = a, h && (a = e.format, c = new Date(b), d.minutes = Math.floor(g / 6E4), d.hours = Math.floor(g / 36E5), d.weekDay = a(c, {
                                    datePattern: "EEEE",
                                    selector: "date"
                                }), d.formattedDate = a(c, {
                                    selector: "date"
                                }), d.formattedTime = a(c, {
                                    selector: "time"
                                }), d.displayPattern = h, d.timeValue = b);
                                return d
                            },
                            isEditable: function () {
                                return !(!this._editable && !this.userIsAdmin)
                            },
                            setMaxAllowableOffset: function (a) {
                                this.isEditable() || this._setMaxOffset(a, !0);
                                return this
                            },
                            getMaxAllowableOffset: function () {
                                var a = this._quantizationParameters ? this._quantizationParameters.tolerance : void 0;
                                return null != this._maxOffset ? this._maxOffset : a
                            },
                            _setMaxOffset: function (a, b) {
                                if (null == a) return delete this._maxOffset, delete this._quantizationParameters, this;
                                if (this.quantize && this.supportsCoordinatesQuantization) "esriGeometryPolyline" === this.geometryType ? this._maxOffset = a : delete this._maxOffset, this._quantizationParameters = {
                                    mode: "view",
                                    originPosition: "upperLeft",
                                    tolerance: a,
                                    extent: this.fullExtent
                                };
                                else {
                                    if (!this._isFractionalOffsetAllowed() || !b) a = Math.floor(a);
                                    isNaN(a) || 0 === a ? delete this._maxOffset : this._maxOffset = a;
                                    delete this._quantizationParameters
                                }
                                return this
                            },
                            _isFractionalOffsetAllowed: function () {
                                return null == this.version || 10.1 <= this.version || navigator.languages && this._isLangWithDot(navigator.languages[0])
                            },
                            _isLangWithDot: function (a) {
                                a = (a = a && a.split("-")) && a[0] && a[0].toLowerCase();
                                return -1 !== h.indexOf(this._langsWithDot, a)
                            },
                            _langsWithDot: "ar en et fr he ja ko th vi zh".split(" "),
                            setAutoGeneralize: function (a) {
                                if (this.loaded) {
                                    if (!this.isEditable() && this.mode !== ia.MODE_SNAPSHOT && ("esriGeometryPolyline" === this.geometryType || "esriGeometryPolygon" === this.geometryType || this.hasXYFootprint()))(this._autoGeneralize = a) ? (this._autoSnapshot && (this._prevScale = null), this._updateMaxOffset()) : this._setMaxOffset(null)
                                } else this._optAutoGen = a;
                                return this
                            },
                            setGDBVersion: function (a) {
                                if (!this._collection && a !== this.gdbVersion && (a || this.gdbVersion)) this.gdbVersion = a, this._task.gdbVersion = a, this._url.query =
                                    q.mixin(this._url.query, {
                                        gdbVersion: a
                                    }), this.loaded && (this.clearSelection(), this._map && this.refresh()), this.onGDBVersionChange();
                                return this
                            },
                            hasAllFeatures: function () {
                                return this._mode ? this._mode.hasAllFeatures() : !0
                            },
                            setDefinitionExpression: function (a) {
                                this._defnExpr = a;
                                (a = this._mode) && a.propertyChangeHandler(1);
                                return this
                            },
                            getDefinitionExpression: function () {
                                return this._defnExpr
                            },
                            setTimeDefinition: function (a) {
                                this._isSnapshot ? (this._timeDefn = a, (a = this._mode) && a.propertyChangeHandler(2)) : console.log("FeatureLayer.setTimeDefinition: layer in on-demand or selection mode does not support time definitions. Layer id \x3d " +
                                    this.id + ", Layer URL \x3d " + this.url);
                                return this
                            },
                            getTimeDefinition: function () {
                                return this._timeDefn
                            },
                            setTimeOffset: function (a, b) {
                                this._timeOffset = a;
                                this._timeOffsetUnits = b;
                                var c = this._mode;
                                c && c.propertyChangeHandler(0);
                                return this
                            },
                            setUseMapTime: function (a) {
                                this.useMapTime = a;
                                this._toggleTime(!this.suspended);
                                (a = this._mode) && a.propertyChangeHandler(0)
                            },
                            selectFeatures: function (a, b, c, d) {
                                b = b || ia.SELECTION_NEW;
                                this._hasPartialSelectedFeatures = !1;
                                a = this._getShallowClone(a);
                                var f = this._map,
                                    e, g = this,
                                    h =
                                    w._fixDfd(new l(w._dfdCanceller));
                                a.outFields = this.getOutFields();
                                a.returnGeometry = !0;
                                a.multipatchOption = this.multipatchOption;
                                f && (a.outSpatialReference = new C(f.spatialReference.toJson()));
                                if (!this._applyQueryFilters(a, !0)) return e = {
                                    features: []
                                }, this._selectHandler(e, b, c, d, h), h;
                                if (f = this._canDoClientSideQuery(a)) h._pendingDfd = t(this._doQuery(a, f)), h._pendingDfd.then(function (a) {
                                    e = {
                                        features: a
                                    };
                                    g._selectHandler(e, b, c, d, h)
                                });
                                else {
                                    if (this._collection) return this._resolve([Error("FeatureLayer::selectFeatures - " +
                                        this.invalidParams)], null, d, h, !0), h;
                                    var n = this;
                                    this._ts && (a._ts = (new Date).getTime());
                                    (h._pendingDfd = this._task.execute(a)).addCallbacks(function (a) {
                                        n._selectHandler(a, b, c, d, h)
                                    }, function (a) {
                                        n._hasPartialSelectedFeatures = !0;
                                        n._resolve([a], null, d, h, !0)
                                    })
                                }
                                return h
                            },
                            getSelectedFeatures: function () {
                                var a = this._selectedFeatures,
                                    b = [],
                                    c;
                                for (c in a) a.hasOwnProperty(c) && b.push(a[c]);
                                return b
                            },
                            clearSelection: function (a) {
                                var b = this._selectedFeatures,
                                    c = this._mode,
                                    d;
                                for (d in b) b.hasOwnProperty(d) && (this._unSelectFeatureIIf(d,
                                    c), c._removeFeatureIIf(d));
                                this._selectedFeatures = {};
                                this._isSelOnly && c._applyTimeFilter(!0);
                                if (!a) this.onSelectionClear();
                                return this
                            },
                            setSelectionSymbol: function (a) {
                                if (this._selectionSymbol = a) {
                                    var b = this._selectedFeatures,
                                        c;
                                    for (c in b) b.hasOwnProperty(c) && b[c].setSymbol(a)
                                }
                                return this
                            },
                            getSelectionSymbol: function () {
                                return this._selectionSymbol
                            },
                            setLabelingInfo: function (a) {
                                a ? (this.labelingInfo = a, this._fixLabelExpr()) : delete this.labelingInfo;
                                this._collection && (this._typesDirty = !0);
                                this.onLabelingInfoChange()
                            },
                            _fixLabelExpr: function () {
                                var a = /\[([^\[\]]+)\]/ig,
                                    b, c = this,
                                    d = function (a, b) {
                                        var d = c._getField(b, !0);
                                        return "[" + (d && d.name || b) + "]"
                                    };
                                h.forEach(this.labelingInfo, function (c) {
                                    if (b = c.labelExpression) c.labelExpression = b.replace(a, d)
                                })
                            },
                            __msigns: [{
                                n: "applyEdits",
                                c: 5,
                                a: [{
                                    i: 0
                                }, {
                                    i: 1
                                }],
                                e: 4,
                                f: 1
                            }],
                            applyEdits: function (a, b, c, d, f, e) {
                                var g = e.assembly,
                                    n = e.dfd;
                                this._applyNormalized(a, g && g[0]);
                                this._applyNormalized(b, g && g[1]);
                                this.onBeforeApplyEdits(a, b, c);
                                var l = {},
                                    m = this.objectIdField,
                                    g = {
                                        f: "json"
                                    },
                                    k = !1;
                                if (this._collection) e = {}, e.addResults = a ? h.map(a, function () {
                                    k = !0;
                                    return {
                                        objectId: this._nextId++,
                                        success: !0
                                    }
                                }, this) : null, e.updateResults = b ? h.map(b, function (a) {
                                    k = !0;
                                    var b = a.attributes[m];
                                    l[b] = a;
                                    return {
                                        objectId: b,
                                        success: !0
                                    }
                                }, this) : null, e.deleteResults = c ? h.map(c, function (a) {
                                    k = !0;
                                    return {
                                        objectId: a.attributes[m],
                                        success: !0
                                    }
                                }, this) : null, k ? this._editHandler(e, a, l, d, f, n) : this._resolve([e.addResults, e.updateResults, e.deleteResults], null, d, n);
                                else {
                                    a && 0 < a.length && (g.adds = this._convertFeaturesToJson(a, 0, 1), k = !0);
                                    if (b && 0 < b.length) {
                                        for (e =
                                            0; e < b.length; e++) {
                                            var p = b[e];
                                            l[p.attributes[m]] = p
                                        }
                                        g.updates = this._convertFeaturesToJson(b, 0, 0, 1);
                                        k = !0
                                    }
                                    if (c && 0 < c.length) {
                                        b = [];
                                        for (e = 0; e < c.length; e++) b.push(c[e].attributes[m]);
                                        g.deletes = b.join(",");
                                        k = !0
                                    }
                                    if (k) {
                                        var r = this;
                                        return y({
                                            url: this._url.path + "/applyEdits",
                                            content: q.mixin(g, this._url.query),
                                            callbackParamName: "callback",
                                            load: function (b) {
                                                r._editHandler(b, a, l, d, f, n)
                                            },
                                            error: function (a) {
                                                r._resolve([a], null, f, n, !0)
                                            }
                                        }, {
                                            usePost: !0
                                        })
                                    }
                                    this._resolve([], null, d, n)
                                }
                            },
                            queryFeatures: function (a, b, c) {
                                return this._query("execute",
                                    "onQueryFeaturesComplete", a, b, c)
                            },
                            queryRelatedFeatures: function (a, b, c) {
                                return this._query("executeRelationshipQuery", "onQueryRelatedFeaturesComplete", a, b, c)
                            },
                            queryIds: function (a, b, c) {
                                return this._query("executeForIds", "onQueryIdsComplete", a, b, c)
                            },
                            queryCount: function (a, b, c) {
                                return this._query("executeForCount", "onQueryCountComplete", a, b, c)
                            },
                            queryExtent: function (a, b, c) {
                                return this._query("executeForExtent", "onQueryExtentComplete", a, b, c)
                            },
                            queryAttachmentInfos: function (a, c, d) {
                                var f = this._url.path + "/" +
                                    a + "/attachments",
                                    e = new l(w._dfdCanceller),
                                    g = this;
                                e._pendingDfd = y({
                                    url: f,
                                    content: q.mixin({
                                        f: "json"
                                    }, this._url.query),
                                    callbackParamName: "callback",
                                    load: function (d) {
                                        d = d.attachmentInfos;
                                        var n;
                                        h.forEach(d, function (c) {
                                            n = b.objectToQuery({
                                                gdbVersion: g._url.query && g._url.query.gdbVersion,
                                                layer: g._url.query && g._url.query.layer,
                                                token: g._getToken()
                                            });
                                            c.url = f + "/" + c.id + (n ? "?" + n : "");
                                            c.objectId = a
                                        });
                                        g._resolve([d], "onQueryAttachmentInfosComplete", c, e)
                                    },
                                    error: function (a) {
                                        g._resolve([a], null, d, e, !0)
                                    }
                                });
                                return e
                            },
                            addAttachment: function (a,
                                b, c, d) {
                                return this._sendAttachment("add", a, b, c, d)
                            },
                            updateAttachment: function (a, b, c, f, e) {
                                c.appendChild(d.create("input", {
                                    type: "hidden",
                                    name: "attachmentId",
                                    value: b
                                }));
                                return this._sendAttachment("update", a, c, f, e)
                            },
                            deleteAttachments: function (a, b, c, d) {
                                var f = this._url.path + "/" + a + "/deleteAttachments",
                                    e = new l(w._dfdCanceller),
                                    g = this;
                                b = {
                                    f: "json",
                                    attachmentIds: b.join(",")
                                };
                                e._pendingDfd = y({
                                    url: f,
                                    content: q.mixin(b, this._url.query),
                                    callbackParamName: "callback",
                                    load: q.hitch(this, function (b) {
                                        b = b.deleteAttachmentResults;
                                        b = h.map(b, function (b) {
                                            b = new Z(b);
                                            b.attachmentId = b.objectId;
                                            b.objectId = a;
                                            return b
                                        });
                                        g._resolve([b], "onDeleteAttachmentsComplete", c, e)
                                    }),
                                    error: function (a) {
                                        g._resolve([a], null, d, e, !0)
                                    }
                                }, {
                                    usePost: !0
                                });
                                return e
                            },
                            addType: function (a) {
                                var b = this.types;
                                if (b) {
                                    if (h.some(b, function (b) {
                                            return b.id == a.id ? !0 : !1
                                        })) return !1;
                                    b.push(a)
                                } else this.types = [a];
                                return this._typesDirty = !0
                            },
                            deleteType: function (a) {
                                if (this._collection) {
                                    var b = this.types;
                                    if (b) {
                                        var c = -1;
                                        h.some(b, function (b, d) {
                                            return b.id == a ? (c = d, !0) : !1
                                        });
                                        if (-1 <
                                            c) return this._typesDirty = !0, b.splice(c, 1)[0]
                                    }
                                }
                            },
                            toJson: function () {
                                var a = this._json;
                                if (a = q.isString(a) ? k.fromJson(a) : q.clone(a)) {
                                    var a = a.layerDefinition ? a : {
                                            layerDefinition: a
                                        },
                                        b = a.layerDefinition,
                                        c = this._collection;
                                    if (c && this._typesDirty) {
                                        b.types = h.map(this.types || [], function (a) {
                                            return a.toJson()
                                        });
                                        var d = this.renderer,
                                            f = this.labelingInfo,
                                            e = b.drawingInfo;
                                        if ((d || f) && !e) e = b.drawingInfo = {};
                                        e && (d && -1 === d.declaredClass.indexOf("TemporalRenderer")) && (e.renderer = d.toJson());
                                        f && (e.labelingInfo = h.map(f, function (a) {
                                            return a.toJson()
                                        }))
                                    }
                                    d =
                                        null;
                                    if (!c || this._fcAdded) d = {
                                        geometryType: b.geometryType,
                                        features: this._convertFeaturesToJson(this.graphics, !0)
                                    };
                                    a.featureSet = q.mixin({}, a.featureSet || {}, d);
                                    a.featureSet.transform && (f = a.featureSet.transform, delete a.featureSet.transform, d = new R(a.featureSet), d.quantize(f), a.featureSet = d.toJson());
                                    c && (a.nextObjectId = this._nextId, b.capabilities = this.capabilities);
                                    return a
                                }
                            },
                            onSelectionComplete: function () {},
                            onSelectionClear: function () {},
                            onBeforeApplyEdits: function () {},
                            onEditsComplete: function () {},
                            onQueryFeaturesComplete: function () {},
                            onQueryRelatedFeaturesComplete: function () {},
                            onQueryIdsComplete: function () {},
                            onQueryCountComplete: function () {},
                            onQueryExtentComplete: function () {},
                            onQueryAttachmentInfosComplete: function () {},
                            onAddAttachmentComplete: function () {},
                            onUpdateAttachmentComplete: function () {},
                            onDeleteAttachmentsComplete: function () {},
                            onCapabilitiesChange: function () {},
                            onGDBVersionChange: function () {},
                            onQueryLimitExceeded: function () {},
                            onLabelingInfoChange: function () {},
                            _forceIdentity: function (a) {
                                var b = this,
                                    c, d = this._url && this._url.path;
                                c = d && d.toLowerCase().indexOf("/rest/services");
                                var f = this.editFieldsInfo,
                                    f = f && (f.creatorField || f.editorField);
                                (this.userIsAdmin || f) && !this._getToken() && -1 < c && n.id ? (c = d.substring(0, c) + "/rest/info", y({
                                    url: c,
                                    content: {
                                        f: "json"
                                    },
                                    handleAs: "json",
                                    callbackParamName: "callback"
                                }).then(function (a) {
                                    if (a.owningSystemUrl) return n.id.checkSignInStatus(a.owningSystemUrl + "/sharing")
                                }).then(function (a) {
                                    if (a) return n.id.getCredential(d)
                                }).then(function (a) {
                                    a && b._findCredential()
                                }).always(function () {
                                    a.call(b)
                                })) : a.call(this)
                            },
                            _checkMode: function (a) {
                                var b = this.geometryType,
                                    c = this.maxRecordCount;
                                a = (a = a && a.features && a.features[0]) && a.attributes && a.attributes.exceedslimit;
                                if (this.mode === ia.MODE_AUTO && !this.isEditable() && 0 === a && (this.queryPagination || ("esriGeometryPolyline" === b || "esriGeometryPolygon" === b || "esriGeometryMultipoint" === b || this.hasXYFootprint()) && c >= this.maxRecordCountForAuto || "esriGeometryPoint" === b && c >= this.maxPointCountForAuto)) this.currentMode = ia.MODE_SNAPSHOT, this._mode = new aa(this), this._isSnapshot = this._autoSnapshot = !0
                            },
                            _queryLimit: function () {
                                var a = this,
                                    b = new l;
                                this._limitPromise = b.promise;
                                setTimeout(function () {
                                    var c = new Q,
                                        d = new G;
                                    d.statisticType = "exceedslimit";
                                    d.maxPointCount = a.maxPointCountForAuto;
                                    d.maxRecordCount = a.maxRecordCountForAuto;
                                    d.maxVertexCount = a.maxVertexCountForAuto;
                                    d.outStatisticFieldName = "exceedslimit";
                                    c.outStatistics = [d];
                                    a.queryFeatures(c).promise.then(function (a) {
                                        b.resolve(a)
                                    }, function (a) {
                                        b.reject(a)
                                    })
                                }, 0)
                            },
                            _updateCaps: function () {
                                var a = this._editable,
                                    b = q.trim(this.capabilities || ""),
                                    c = h.map(b ?
                                        b.split(",") : [], q.trim),
                                    d = h.map(b ? b.toLowerCase().split(",") : [], q.trim),
                                    b = h.indexOf(d, "editing"),
                                    f, d = {
                                        Create: h.indexOf(d, "create"),
                                        Update: h.indexOf(d, "update"),
                                        Delete: h.indexOf(d, "delete")
                                    };
                                if (a && -1 === b) c.push("Editing");
                                else if (!a && -1 < b) {
                                    a = [b];
                                    for (f in d) - 1 < d[f] && a.push(d[f]);
                                    a.sort();
                                    for (f = a.length - 1; 0 <= f; f--) c.splice(a[f], 1)
                                }
                                this.capabilities = c.join(",")
                            },
                            _counter: {
                                value: 0
                            },
                            _getUniqueId: function () {
                                return this._counter.value++
                            },
                            onSuspend: function () {
                                this.inherited(arguments);
                                this._toggleTime(!1);
                                var a = this._mode;
                                a && a.suspend()
                            },
                            onResume: function (a) {
                                this.inherited(arguments);
                                this._toggleTime(!0);
                                var b = this._mode,
                                    c = this._map,
                                    d = this._getRenderer();
                                if (a.firstOccurrence) {
                                    this._fixRendererFields();
                                    this._checkFields();
                                    this.clearSelection();
                                    if (this.timeInfo && !this._trackManager && (this._trackIdField || d && (d.latestObservationRenderer || d.trackRenderer))) this._trackManager = new ha(this), this._trackManager.initialize(c), this._childLayer = this._trackManager.container;
                                    d && ("colors" in d && "blurRadius" in d && "maxPixelIntensity" in
                                        d) && ("esriGeometryPoint" == this.geometryType && !this._heatmapManager) && (this._heatmapManager = new pa(this), this._heatmapManager.initialize(c));
                                    if (this._autoSnapshot && this._autoGeneralize && ("esriGeometryPolyline" === this.geometryType || "esriGeometryPolygon" === this.geometryType || this.hasXYFootprint()) && !this.isEditable() && null == this.getMaxAllowableOffset()) d = this.generalizeForScale, this._calculatedScale = d = this.maxScale ? this.maxScale : this.minScale ? Math.min(d, this.minScale) : Math.min(d, J.getScale(c, this.initialExtent)),
                                        this._calcMaxOffset = c.extent.getWidth() / c.width / c.getScale() * d;
                                    this._zoomConnect = g.connect(c, "onZoomEnd", this, this._zoomEndHandler);
                                    this._updateMaxOffset();
                                    this._needsRefresh = !1;
                                    b && b.startup()
                                } else this._zoomEndHandler(), b && b.resume()
                            },
                            _zoomEndHandler: function () {
                                var a = this._map;
                                this._updateMaxOffset();
                                this._prevScale = a.getScale();
                                !this.suspended && this._needsRefresh && this.refresh()
                            },
                            _updateMaxOffset: function () {
                                var a = this._map;
                                a && a.loaded && this._autoGeneralize && (this._autoSnapshot ? (a = this.getMaxAllowableOffset(),
                                    this._setMaxOffset(this._getMaxOffsetForScale(), !0), this._needsRefresh || (this._needsRefresh = a != this.getMaxAllowableOffset())) : this._setMaxOffset(a.extent.getWidth() / a.width, !a.extent.spatialReference.isWebMercator()))
                            },
                            _getMaxOffsetForScale: function () {
                                if (this._map) {
                                    var a = this._map.getScale(),
                                        b = this._calculatedScale,
                                        c = this._calcMaxOffset,
                                        d = this._prevScale;
                                    return a >= b && (null == d || d < b) ? c : a < b && (null == d || d >= b) ? null : this.getMaxAllowableOffset()
                                }
                            },
                            _toggleTime: function (a) {
                                var b = this._map;
                                a && this.timeInfo &&
                                    this.useMapTime && b ? (this._mapTimeExtent = b.timeExtent, this._timeConnect || (this._timeConnect = g.connect(b, "onTimeExtentChange", this, this._timeChangeHandler))) : (this._mapTimeExtent = null, g.disconnect(this._timeConnect), this._timeConnect = null)
                            },
                            _timeChangeHandler: function (a) {
                                this._mapTimeExtent = a;
                                (a = this._mode) && a.propertyChangeHandler(0)
                            },
                            _getOffsettedTE: function (a) {
                                var b = this._timeOffset,
                                    c = this._timeOffsetUnits;
                                return a && b && c ? a.offset(-1 * b, c) : a
                            },
                            _getTimeOverlap: function (a, b) {
                                return a && b ? a.intersection(b) :
                                    a || b
                            },
                            _getTimeFilter: function (a) {
                                var b = this.getTimeDefinition(),
                                    c;
                                if (b && (c = this._getTimeOverlap(b, null), !c)) return [!1];
                                if (a) {
                                    if (a = c ? this._getTimeOverlap(a, c) : a, !a) return [!1]
                                } else a = c;
                                return [!0, a]
                            },
                            _getAttributeFilter: function (a) {
                                var b = this.getDefinitionExpression();
                                return a ? b ? "(" + b + ") AND (" + a + ")" : a : b
                            },
                            _applyQueryFilters: function (a, b) {
                                a.where = this._getAttributeFilter(a.where);
                                a.maxAllowableOffset || (a.maxAllowableOffset = this._maxOffset);
                                a.quantizationParameters = this._quantizationParameters;
                                b && this.supportsAdvancedQueries &&
                                    (a.orderByFields = a.orderByFields || this.getOrderByFields());
                                if (this.timeInfo) {
                                    var c = this._getTimeFilter(a.timeExtent);
                                    if (c[0]) a.timeExtent = c[1];
                                    else return !1
                                }
                                return !0
                            },
                            _add: function (a) {
                                var b = this._selectionSymbol,
                                    c = a.attributes,
                                    d = this.visibilityField;
                                b && this._isSelOnly && a.setSymbol(b);
                                if (d && c && c.hasOwnProperty(d)) a[c[d] ? "show" : "hide"]();
                                return this.add.apply(this, arguments)
                            },
                            _remove: function () {
                                return this.remove.apply(this, arguments)
                            },
                            _canDoClientSideQuery: function (a) {
                                var b = [],
                                    c = this._map,
                                    d;
                                if (!(this._isTable ||
                                        !c && !this._collection))
                                    if (!a.text && !(a.where && a.where !== this.getDefinitionExpression() || a.orderByFields && a.orderByFields.length && (d = this.getOrderByFields() || []) && a.orderByFields.join() !== d.join() || a.outStatistics || a.returnDistinctValues)) {
                                        d = this._isSnapshot;
                                        var f = this._isSelOnly,
                                            e = a.geometry;
                                        if (e)
                                            if (!f && a.spatialRelationship === Q.SPATIAL_REL_INTERSECTS && "extent" === e.type && (d || c.extent.contains(e))) b.push(1);
                                            else return;
                                        if (c = a.objectIds)
                                            if (d) b.push(2);
                                            else {
                                                var e = c.length,
                                                    g = this._mode,
                                                    n = 0,
                                                    l;
                                                for (l = 0; l <
                                                    e; l++) g._getFeature(c[l]) && n++;
                                                if (n === e) b.push(2);
                                                else return
                                            }
                                        if (this.timeInfo)
                                            if (a = a.timeExtent, c = this._mapTimeExtent, d) a && b.push(3);
                                            else if (f) {
                                            if (a) return
                                        } else if (c)
                                            if (-1 !== h.indexOf(b, 2)) a && b.push(3);
                                            else if (-1 !== h.indexOf(b, 1)) a == c && b.push(3);
                                        else return;
                                        else if (0 < b.length) a && b.push(3);
                                        else if (a) return;
                                        return 0 < b.length ? b : null
                                    }
                            },
                            _getAbsMid: function (a) {
                                return r.toAbsMid ? r.toAbsMid(a) : p.id.replace(/\/[^\/]*$/ig, "/") + a
                            },
                            _doQuery: function (a, b, c) {
                                var d = [],
                                    f = this.objectIdField,
                                    e = this,
                                    g = new l,
                                    n = new l,
                                    m = this.graphics;
                                if (-1 !== h.indexOf(b, 1)) {
                                    var k = this.spatialIndex || this._map && this._map.spatialIndex,
                                        p, r = a.geometry._normalize(null, !0);
                                    null == k && na.autoSpatialIndexing ? p = (this._map || this).addPlugin(this._getAbsMid("../plugins/spatialIndex")).then(q.hitch(this, q.partial(this._getFromIndex, r, k)), function (a) {
                                        n.resolve(q.hitch(this, q.partial(this._filterByExtent, m, r)))
                                    }) : k && (p = this._getFromIndex(r, k));
                                    p ? p.then(function (a) {
                                            for (var b = 0; b < a.length; b++) a[b].results && (d = d.concat(a[b].results));
                                            n.resolve(d)
                                        }).otherwise(function (a) {
                                            n.reject(a)
                                        }) :
                                        n.resolve(this._filterByExtent(m, r))
                                } else n.resolve(m);
                                n.then(function (n) {
                                    d = n;
                                    if (-1 !== h.indexOf(b, 2)) {
                                        var l = a.objectIds;
                                        d = h.filter(d, function (a) {
                                            return -1 < h.indexOf(l, a.attributes[f])
                                        })
                                    } - 1 !== h.indexOf(b, 3) && e.timeInfo && (n = a.timeExtent, d = e._filterByTime(d, n.startTime, n.endTime).match);
                                    c && (d = h.map(d, function (a) {
                                        return a.attributes[f]
                                    }, this));
                                    g.resolve(d)
                                });
                                return g
                            },
                            _getFromIndex: function (a, b) {
                                b = b || this.spatialIndex || this._map.spatialIndex;
                                a instanceof Array || (a = [a]);
                                var c = this.id;
                                return s(h.map(a, function (a) {
                                    return b.intersects(a,
                                        c)
                                }))
                            },
                            _filterByExtent: function (a, b) {
                                for (var c = [], d = 0, f = a.length; d < f; d++) {
                                    var e = a[d],
                                        g = e.geometry;
                                    g && (this.normalization && b.length ? (b[0].intersects(g) || b[1].intersects(g)) && c.push(e) : b.intersects(g) && c.push(e))
                                }
                                return c
                            },
                            _filterByTime: function (a, b, c) {
                                var d = this._startTimeField,
                                    e = this._endTimeField,
                                    g;
                                this._twoTimeFields || (g = d || e);
                                var h = f.isDefined,
                                    n = [],
                                    l = [],
                                    m, k = a.length,
                                    p, q;
                                b = b ? b.getTime() : -Infinity;
                                c = c ? c.getTime() : Infinity;
                                if (g)
                                    for (m = 0; m < k; m++) p = a[m], q = p.attributes, d = q[g], d >= b && d <= c ? n.push(p) : l.push(p);
                                else
                                    for (m = 0; m < k; m++) p = a[m], q = p.attributes, g = q[d], q = q[e], g = h(g) ? g : -Infinity, q = h(q) ? q : Infinity, g >= b && g <= c || q >= b && q <= c || b >= g && c <= q ? n.push(p) : l.push(p);
                                return {
                                    match: n,
                                    noMatch: l
                                }
                            },
                            _getSizeVariables: function (a) {
                                return a && h.filter(a.getVisualVariablesForType("sizeInfo", !1), function (a) {
                                    return !(!a.field && !a.valueExpression)
                                })
                            },
                            _needClientSideSorting: function (a) {
                                return this._collection ? !(!a || !a.length) : h.some(a, function (a) {
                                    return !!a.valueExpression
                                })
                            },
                            _sortFeatures: function (a) {
                                var b = this.renderer,
                                    c = this._getSizeVariables(b);
                                if (a && 1 < a.length && this._needClientSideSorting(c)) {
                                    var d = c[0],
                                        f = this;
                                    a.sort(function (a, c) {
                                        var e = b._getDataValue(a, d, "sizeInfo", null, f),
                                            g = b._getDataValue(c, d, "sizeInfo", null, f);
                                        return null == e ? -1 : null == g ? 1 : g - e
                                    })
                                }
                                return a
                            },
                            _resolve: function (a, b, c, d, f) {
                                b && this[b].apply(this, a);
                                c && c.apply(null, a);
                                d && w._resDfd(d, a, f)
                            },
                            _getShallowClone: function (a) {
                                var b = new Q,
                                    c;
                                for (c in a) a.hasOwnProperty(c) && (b[c] = a[c]);
                                return b
                            },
                            _query: function (a, b, c, d, f) {
                                var e = this,
                                    g = this._map,
                                    n = new l(w._dfdCanceller),
                                    m = c,
                                    k, p;
                                if ("executeRelationshipQuery" !==
                                    a) {
                                    var m = this._getShallowClone(c),
                                        q = this.getOutFields();
                                    m.outFields || (m.outFields = q);
                                    m.outFields && m.outFields.length && (p = -1 < h.indexOf(q, "*") ? !1 : !h.every(m.outFields, function (a) {
                                        return -1 < h.indexOf(q, a)
                                    }));
                                    m.returnGeometry = c.hasOwnProperty("returnGeometry") ? c.returnGeometry : !c.outStatistics;
                                    m.returnGeometry && (m.multipatchOption = this.multipatchOption);
                                    var r;
                                    g && (c = g && g.spatialReference, (g = m.outSpatialReference) ? k = !g.equals(c) : m.outSpatialReference = new C(c.toJson()));
                                    if (!this._applyQueryFilters(m, "execute" ===
                                            a && !m.outStatistics)) {
                                        switch (a) {
                                        case "execute":
                                            r = new R({
                                                features: []
                                            });
                                            break;
                                        case "executeForIds":
                                            r = [];
                                            break;
                                        case "executeForCount":
                                            r = 0;
                                            break;
                                        case "executeForExtent":
                                            r = {}
                                        }
                                        this._resolve([r], b, d, n);
                                        return n
                                    }
                                    if (c = "executeForExtent" !== a && !k && !p && this._canDoClientSideQuery(m)) return n._pendingDfd = t(this._doQuery(m, c, "executeForIds" === a || "executeForCount" === a)), n._pendingDfd.then(function (c) {
                                        switch (a) {
                                        case "execute":
                                            r = new R;
                                            r.features = c;
                                            break;
                                        case "executeForIds":
                                            r = c;
                                            break;
                                        case "executeForCount":
                                            r = c.length
                                        }
                                        e._resolve([r],
                                            b, d, n)
                                    }), n
                                }
                                if (this._collection) return this._resolve([Error("FeatureLayer::_query - " + this.invalidParams)], null, f, n, !0), n;
                                this._ts && (m._ts = (new Date).getTime());
                                (n._pendingDfd = this._task[a](m)).addCallbacks(function (c) {
                                    var f = !!m.outStatistics || k || p;
                                    if ("execute" === a || "executeRelationshipQuery" === a) {
                                        var g, h;
                                        if ("execute" === a) {
                                            g = c.features;
                                            h = g.length;
                                            for (h -= 1; 0 <= h; h--)
                                                if (g[h]._layer = e, !f && !e._isTable) {
                                                    var l = e._mode._getFeature(g[h].attributes[e.objectIdField]);
                                                    l && g.splice(h, 1, l)
                                                }
                                        } else
                                            for (l in c)
                                                if (c.hasOwnProperty(l)) {
                                                    g =
                                                        c[l].features;
                                                    h = g.length;
                                                    for (h -= 1; 0 <= h; h--) g[h]._layer = e
                                                }
                                    }
                                    e._resolve([c], b, d, n)
                                }, function (a) {
                                    e._resolve([a], null, f, n, !0)
                                });
                                return n
                            },
                            _convertFeaturesToJson: function (a, b, c, d) {
                                var f = [],
                                    e = this._selectionSymbol,
                                    g = this.visibilityField,
                                    n, l = this.objectIdField;
                                if (this.loaded && (c || d)) n = h.filter(this.fields, function (a) {
                                    return !1 === a.editable && (!d || a.name !== l)
                                });
                                for (c = 0; c < a.length; c++) {
                                    var m = a[c],
                                        p = {},
                                        r = m.geometry,
                                        s = m.attributes,
                                        t = m.symbol;
                                    if (r && (!d || !this.loaded || this.allowGeometryUpdates)) p.geometry = r.toJson();
                                    g ? (p.attributes = s = q.mixin({}, s), s[g] = m.visible ? 1 : 0) : s && (p.attributes = q.mixin({}, s));
                                    p.attributes && (n && n.length) && h.forEach(n, function (a) {
                                        delete p.attributes[a.name]
                                    });
                                    t && t !== e && (p.symbol = t.toJson());
                                    f.push(p)
                                }
                                return b ? f : k.toJson(f)
                            },
                            _selectHandler: function (a, b, c, d, f) {
                                var e;
                                d = ia;
                                switch (b) {
                                case d.SELECTION_NEW:
                                    this.clearSelection(!0);
                                    e = !0;
                                    break;
                                case d.SELECTION_ADD:
                                    e = !0;
                                    break;
                                case d.SELECTION_SUBTRACT:
                                    e = !1
                                }
                                d = a.features;
                                var g = this._mode,
                                    h = [],
                                    n = this.objectIdField,
                                    l, m;
                                if (e)
                                    for (e = 0; e < d.length; e++) l = d[e],
                                        m = l.attributes[n], l = g._addFeatureIIf(m, l), h.push(l), this._selectFeatureIIf(m, l, g);
                                else
                                    for (e = 0; e < d.length; e++) l = d[e], m = l.attributes[n], this._unSelectFeatureIIf(m, g), m = g._removeFeatureIIf(m), h.push(m || l);
                                this._isSelOnly && g._applyTimeFilter(!0);
                                this._hasPartialSelectedFeatures = !!a.exceededTransferLimit;
                                this._resolve([h, b, a.exceededTransferLimit ? {
                                    queryLimitExceeded: !0
                                } : null], "onSelectionComplete", c, f);
                                if (a.exceededTransferLimit) this.onQueryLimitExceeded()
                            },
                            _selectFeatureIIf: function (a, b, c) {
                                var d = this._selectedFeatures,
                                    f = d[a];
                                f || (c._incRefCount(a), d[a] = b, this._isTable || (this._setSelectSymbol(b), b.attr("data-selected", "")));
                                return f || b
                            },
                            _unSelectFeatureIIf: function (a, b) {
                                var c = this._selectedFeatures[a];
                                c && (b._decRefCount(a), delete this._selectedFeatures[a], this._isTable || (this._setUnSelectSymbol(c), c.attr("data-selected")));
                                return c
                            },
                            _isSelected: function (a) {},
                            _setSelectSymbol: function (a) {
                                var b = this._selectionSymbol;
                                b && !this._isSelOnly && a.setSymbol(b)
                            },
                            _setUnSelectSymbol: function (a) {
                                var b = this._selectionSymbol;
                                b &&
                                    !this._isSelOnly && b === a.symbol && a.setSymbol(null, !0)
                            },
                            _getOutFields: function () {
                                var a = [this.objectIdField, this.typeIdField, this.creatorField, this._startTimeField, this._endTimeField, this._trackIdField].concat(this._rendererFields).concat(this.dataAttributes),
                                    a = h.filter(a, function (a, b, c) {
                                        return !!a && h.indexOf(c, a) === b
                                    }),
                                    b = q.clone(this._outFields);
                                if (b) {
                                    if (-1 !== h.indexOf(b, "*")) return b;
                                    h.forEach(a, function (a) {
                                        -1 === h.indexOf(b, a) && b.push(a)
                                    });
                                    return b
                                }
                                return a
                            },
                            _checkFields: function (a) {
                                var b = a || this._getOutFields();
                                h.forEach(b, function (a) {
                                    "*" !== a && (this._getField(a) || console.debug("esri.layers.FeatureLayer: " + f.substitute({
                                        url: this.url,
                                        field: a
                                    }, "unable to find '${field}' field in the layer 'fields' information [url: ${url}]")))
                                }, this);
                                !a && (!this._isTable && !this._fserver && !this._collection && !this._isStream) && (h.some(this.fields, function (a) {
                                    return a && "esriFieldTypeGeometry" === a.type ? !0 : !1
                                }) || console.debug("esri.layers.FeatureLayer: " + f.substitute({
                                    url: this.url
                                }, "unable to find a field of type 'esriFieldTypeGeometry' in the layer 'fields' information. If you are using a map service layer, features will not have geometry [url: ${url}]")))
                            },
                            _fixFieldCase: function (a, b, c) {
                                var d = a && a[b],
                                    f;
                                if (d && !q.isFunction(d)) {
                                    if (f = !this._getField(d) && this._getField(d, !0)) d = a[b] = f.name;
                                    c && c.push(d)
                                }
                                return d
                            },
                            _fixRendererFields: function () {
                                var a = this.renderer;
                                this._orderBy = null;
                                if (a && 0 < this.fields.length) {
                                    var b = [],
                                        c, a = h.filter([a, a.observationRenderer, a.latestObservationRenderer, a.trackRenderer], f.isDefined),
                                        d = [].concat(a);
                                    h.forEach(a, function (a) {
                                        h.forEach(a.rendererInfos, function (a) {
                                            a.renderer && d.push(a.renderer)
                                        })
                                    });
                                    h.forEach(d, function (a) {
                                        this._fixFieldCase(a,
                                            "attributeField", b);
                                        this._fixFieldCase(a, "attributeField2", b);
                                        this._fixFieldCase(a, "attributeField3", b);
                                        this._fixFieldCase(a.rotationInfo, "field", b);
                                        if ((c = this._fixFieldCase(a.sizeInfo, "field", b)) && !this._orderBy) this._orderBy = [c + " DESC"];
                                        this._fixFieldCase(a.sizeInfo, "normalizationField", b);
                                        this._fixFieldCase(a.colorInfo, "field", b);
                                        this._fixFieldCase(a.colorInfo, "normalizationField", b);
                                        this._fixFieldCase(a.field, "field", b);
                                        this._fixFieldCase(a.opacityInfo, "field", b);
                                        this._fixFieldCase(a.opacityInfo,
                                            "normalizationField", b);
                                        h.forEach(a.visualVariables, function (a) {
                                            c = this._fixFieldCase(a, "field", b);
                                            "sizeInfo" === a.type && (c && !this._orderBy) && (this._orderBy = [c + " DESC"]);
                                            this._fixFieldCase(a, "normalizationField", b)
                                        }, this);
                                        if (!this._orderBy && a.addBreak && !q.isFunction(a.attributeField) && (a.backgroundFillSymbol || this._hasSizeDiff(a))) this._orderBy = [a.attributeField + " DESC"]
                                    }, this);
                                    this._rendererFields = h.filter(b, f.isDefined)
                                }
                            },
                            _hasSizeDiff: function (a) {
                                var b = Number.MAX_VALUE,
                                    c = -Number.MAX_VALUE,
                                    d, f;
                                h.forEach(a.infos,
                                    function (a) {
                                        if (f = a.symbol) {
                                            d = 0;
                                            switch (f.type) {
                                            case "simplemarkersymbol":
                                                d = f.size;
                                                break;
                                            case "picturemarkersymbol":
                                                d = (f.width + f.height) / 2;
                                                break;
                                            case "simplelinesymbol":
                                            case "cartographiclinesymbol":
                                                d = f.width;
                                                break;
                                            case "simplefillsymbol":
                                            case "picturefillsymbol":
                                                d = f.outline && f.outline.width
                                            }
                                            d && (b = Math.min(b, d), c = Math.max(c, d))
                                        }
                                    });
                                return b !== Number.MAX_VALUE && c !== -Number.MAX_VALUE && 1 < Math.abs(c - b)
                            },
                            getOrderByFields: function () {
                                var a = this.orderByFields || this._orderBy;
                                return this.supportsAdvancedQueries &&
                                    a ? h.filter(a, function (a) {
                                        a = a.split(" ")[0];
                                        return !!this._getField(a, !0)
                                    }, this) : null
                            },
                            _getField: function (a, b) {
                                var c = this.fields;
                                if (!c || 0 === c.length) return null;
                                var d;
                                b && (a = a.toLowerCase());
                                h.some(c, function (c) {
                                    var f = !1;
                                    (f = b ? c && c.name.toLowerCase() === a ? !0 : !1 : c && c.name === a ? !0 : !1) && (d = c);
                                    return f
                                });
                                return d
                            },
                            _getDateOpts: function () {
                                this._dtOpts || (this._dtOpts = {
                                    properties: h.map(h.filter(this.fields, function (a) {
                                        return !!(a && "esriFieldTypeDate" === a.type)
                                    }), function (a) {
                                        return a.name
                                    })
                                });
                                return this._dtOpts
                            },
                            _applyNormalized: function (a, b) {
                                a && b && h.forEach(a, function (a, c) {
                                    a && b[c] && a.setGeometry(b[c])
                                })
                            },
                            _editHandler: function (a, b, c, d, f, e) {
                                f = a.addResults;
                                var g = a.updateResults;
                                a = a.deleteResults;
                                var n, l, m, k, p = this.objectIdField,
                                    r = this._mode,
                                    s = this._isTable;
                                n = this.editFieldsInfo;
                                var t = this.getOutFields() || [],
                                    u = n && n.creatorField,
                                    w = n && n.creationDateField,
                                    x = n && n.editorField,
                                    v = n && n.editDateField;
                                n = n && n.realm; - 1 === h.indexOf(t, "*") && (u && -1 === h.indexOf(t, u) && (u = null), w && -1 === h.indexOf(t, w) && (w = null), x && -1 === h.indexOf(t,
                                    x) && (x = null), v && -1 === h.indexOf(t, v) && (v = null));
                                var t = w || v ? (new Date).getTime() : null,
                                    y = u || x ? this.getUserId() : void 0;
                                y && n && (y = y + "@" + n);
                                if (f)
                                    for (n = 0; n < f.length; n++) f[n] = new Z(f[n]), s || (l = f[n], l.success && (l = l.objectId, m = b[n], (k = m._graphicsLayer) && k !== this && k.remove(m), k = m.attributes || {}, k[p] = l, u && (k[u] = y), x && (k[x] = y), w && (k[w] = t), v && (k[v] = t), m.setAttributes(k), r._init && r.drawFeature(m)));
                                if (g)
                                    for (n = 0; n < g.length; n++)
                                        if (g[n] = new Z(g[n]), !s && (l = g[n], l.success)) {
                                            l = l.objectId;
                                            m = c[l];
                                            if (b = r._getFeature(l)) b.geometry !==
                                                m.geometry && m.geometry && b.setGeometry(P.fromJson(m.geometry.toJson())), b.attributes !== m.attributes && m.attributes && b.setAttributes(q.mixin(b.attributes, m.attributes)), this._repaint(b, l);
                                            m = b || m;
                                            k = m.attributes || {};
                                            x && (k[x] = y);
                                            v && (k[v] = t);
                                            m.setAttributes(k)
                                        }
                                if (a) {
                                    c = [];
                                    for (n = 0; n < a.length; n++)
                                        if (a[n] = new Z(a[n]), !s && (l = a[n], l.success && (l = l.objectId, m = r._getFeature(l)))) this._unSelectFeatureIIf(l, r) && c.push(m), m._count = 0, r._removeFeatureIIf(l);
                                    if (0 < c.length) this.onSelectionComplete(c, ia.SELECTION_SUBTRACT)
                                }
                                this._resolve([f,
g, a], "onEditsComplete", d, e)
                            },
                            _sendAttachment: function (a, b, c, d, f) {
                                var e = this;
                                return y({
                                    url: this._url.path + "/" + b + "/" + ("add" === a ? "addAttachment" : "updateAttachment"),
                                    form: c,
                                    content: q.mixin(this._url.query, {
                                        f: "json",
                                        token: this._getToken() || void 0
                                    }),
                                    callbackParamName: "callback.html",
                                    handleAs: "json"
                                }).addCallback(function (c) {
                                    var f = "add" === a ? "onAddAttachmentComplete" : "onUpdateAttachmentComplete";
                                    c = new Z(c["add" === a ? "addAttachmentResult" : "updateAttachmentResult"]);
                                    c.attachmentId = c.objectId;
                                    c.objectId = b;
                                    e._resolve([c],
                                        f, d);
                                    return c
                                }).addErrback(function (a) {
                                    e._resolve([a], null, f, null, !0)
                                })
                            },
                            _repaint: function (a, b, c) {
                                b = f.isDefined(b) ? b : a.attributes[this.objectIdField];
                                (!(b in this._selectedFeatures) || !this._selectionSymbol) && a.setSymbol(a.symbol, c)
                            },
                            _getKind: function (a) {
                                var b = this._trackManager;
                                return b ? b.isLatestObservation(a) ? 1 : 0 : 0
                            }
                        });
                    q.mixin(ia, {
                        MODE_SNAPSHOT: 0,
                        MODE_ONDEMAND: 1,
                        MODE_SELECTION: 2,
                        SELECTION_NEW: 3,
                        SELECTION_ADD: 4,
                        SELECTION_SUBTRACT: 5,
                        MODE_AUTO: 6,
                        MODE_STREAM: 7,
                        POPUP_NONE: "esriServerHTMLPopupTypeNone",
                        POPUP_HTML_TEXT: "esriServerHTMLPopupTypeAsHTMLText",
                        POPUP_URL: "esriServerHTMLPopupTypeAsURL"
                    });
                    K._createWrappers(ia);
                    c("extend-esri") && q.setObject("layers.FeatureLayer", ia, n);
                    return ia
                })
        },
        "esri/tasks/QueryTask": function () {
            define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/_base/json dojo/has ../kernel ../request ../deferredUtils ../geometry/Extent ../geometry/normalizeUtils ./Task ./FeatureSet".split(" "), function (r, p, a, g, q, h, k, l, e, c, b, d, m) {
                r = r(d, {
                    declaredClass: "esri.tasks.QueryTask",
                    _eventMap: {
                        complete: ["featureSet"],
                        "execute-for-count-complete": ["count"],
                        "execute-for-ids-complete": ["objectIds"],
                        "execute-relationship-query-complete": ["featureSets"]
                    },
                    constructor: function (a, b) {
                        this._handler = p.hitch(this, this._handler);
                        this._relationshipQueryHandler = p.hitch(this, this._relationshipQueryHandler);
                        this._executeForIdsHandler = p.hitch(this, this._executeForIdsHandler);
                        this._countHandler = p.hitch(this, this._countHandler);
                        this._extentHandler = p.hitch(this, this._extentHandler);
                        this.source = b &&
                            b.source;
                        this.gdbVersion = b && b.gdbVersion;
                        this.registerConnectEvents()
                    },
                    __msigns: [{
                        n: "execute",
                        c: 4,
                        a: [{
                            i: 0,
                            p: ["geometry"]
                        }],
                        e: 2
                    }, {
                        n: "executeForIds",
                        c: 3,
                        a: [{
                            i: 0,
                            p: ["geometry"]
                        }],
                        e: 2
                    }, {
                        n: "executeForCount",
                        c: 3,
                        a: [{
                            i: 0,
                            p: ["geometry"]
                        }],
                        e: 2
                    }, {
                        n: "executeForExtent",
                        c: 3,
                        a: [{
                            i: 0,
                            p: ["geometry"]
                        }],
                        e: 2
                    }],
                    onComplete: function () {},
                    onExecuteRelationshipQueryComplete: function () {},
                    onExecuteForIdsComplete: function () {},
                    onExecuteForCountComplete: function () {},
                    onExecuteForExtentComplete: function () {},
                    execute: function (a, b,
                        c, d, e) {
                        var g = e.assembly;
                        a = this._encode(p.mixin({}, this._url.query, {
                            f: "json"
                        }, a.toJson(g && g[0])));
                        var h = this._handler,
                            m = this._errorHandler;
                        this.source && (g = {
                            source: this.source.toJson()
                        }, a.layer = q.toJson(g));
                        this.gdbVersion && (a.gdbVersion = this.gdbVersion);
                        return l({
                            url: this._url.path + "/query",
                            content: a,
                            callbackParamName: "callback",
                            load: function (a, d) {
                                h(a, d, b, c, e.dfd)
                            },
                            error: function (a) {
                                m(a, c, e.dfd)
                            },
                            callbackSuffix: d
                        }, this.requestOptions)
                    },
                    executeRelationshipQuery: function (a, b, c) {
                        a = this._encode(p.mixin({},
                            this._url.query, {
                                f: "json"
                            }, a.toJson()));
                        var d = this._relationshipQueryHandler,
                            h = this._errorHandler;
                        this.gdbVersion && (a.gdbVersion = this.gdbVersion);
                        var m = new g(e._dfdCanceller);
                        m._pendingDfd = l({
                            url: this._url.path + "/queryRelatedRecords",
                            content: a,
                            callbackParamName: "callback",
                            load: function (a, e) {
                                d(a, e, b, c, m)
                            },
                            error: function (a) {
                                h(a, c, m)
                            }
                        }, this.requestOptions);
                        return m
                    },
                    executeForIds: function (a, b, c, d) {
                        var e = d.assembly;
                        a = this._encode(p.mixin({}, this._url.query, {
                            f: "json",
                            returnIdsOnly: !0
                        }, a.toJson(e && e[0])));
                        var g = this._executeForIdsHandler,
                            h = this._errorHandler;
                        this.source && (e = {
                            source: this.source.toJson()
                        }, a.layer = q.toJson(e));
                        this.gdbVersion && (a.gdbVersion = this.gdbVersion);
                        return l({
                            url: this._url.path + "/query",
                            content: a,
                            callbackParamName: "callback",
                            load: function (a, e) {
                                g(a, e, b, c, d.dfd)
                            },
                            error: function (a) {
                                h(a, c, d.dfd)
                            }
                        }, this.requestOptions)
                    },
                    executeForCount: function (a, b, c, d) {
                        var e = d.assembly;
                        a = this._encode(p.mixin({}, this._url.query, {
                            f: "json",
                            returnIdsOnly: !0,
                            returnCountOnly: !0
                        }, a.toJson(e && e[0])));
                        var g =
                            this._countHandler,
                            h = this._errorHandler;
                        this.source && (e = {
                            source: this.source.toJson()
                        }, a.layer = q.toJson(e));
                        this.gdbVersion && (a.gdbVersion = this.gdbVersion);
                        return l({
                            url: this._url.path + "/query",
                            content: a,
                            callbackParamName: "callback",
                            load: function (a, e) {
                                g(a, e, b, c, d.dfd)
                            },
                            error: function (a) {
                                h(a, c, d.dfd)
                            }
                        }, this.requestOptions)
                    },
                    executeForExtent: function (a, b, c, d) {
                        var e = d.assembly;
                        a = this._encode(p.mixin({}, this._url.query, {
                            f: "json",
                            returnExtentOnly: !0,
                            returnCountOnly: !0
                        }, a.toJson(e && e[0])));
                        var g = this._extentHandler,
                            h = this._errorHandler;
                        this.source && (e = {
                            source: this.source.toJson()
                        }, a.layer = q.toJson(e));
                        this.gdbVersion && (a.gdbVersion = this.gdbVersion);
                        return l({
                            url: this._url.path + "/query",
                            content: a,
                            callbackParamName: "callback",
                            load: function (a, e) {
                                g(a, e, b, c, d.dfd)
                            },
                            error: function (a) {
                                h(a, c, d.dfd)
                            }
                        }, this.requestOptions)
                    },
                    _handler: function (a, b, c, d, e) {
                        try {
                            var g = new m(a);
                            this._successHandler([g], "onComplete", c, e)
                        } catch (h) {
                            this._errorHandler(h, d, e)
                        }
                    },
                    _relationshipQueryHandler: function (b, c, d, f, e) {
                        try {
                            var g = b.geometryType,
                                h = b.spatialReference,
                                l = {};
                            a.forEach(b.relatedRecordGroups, function (a) {
                                var b = {};
                                b.geometryType = g;
                                b.spatialReference = h;
                                b.features = a.relatedRecords;
                                b = new m(b);
                                if (null != a.objectId) l[a.objectId] = b;
                                else
                                    for (var c in a) a.hasOwnProperty(c) && "relatedRecords" !== c && (l[a[c]] = b)
                            });
                            this._successHandler([l], "onExecuteRelationshipQueryComplete", d, e)
                        } catch (k) {
                            this._errorHandler(k, f, e)
                        }
                    },
                    _executeForIdsHandler: function (a, b, c, d, e) {
                        try {
                            this._successHandler([a.objectIds], "onExecuteForIdsComplete", c, e)
                        } catch (g) {
                            this._errorHandler(g,
                                d, e)
                        }
                    },
                    _countHandler: function (a, b, c, d, e) {
                        try {
                            var g, h = a.features,
                                l = a.objectIds;
                            if (l) g = l.length;
                            else {
                                if (h) throw Error("Unable to perform query. Please check your parameters.");
                                g = a.count
                            }
                            this._successHandler([g], "onExecuteForCountComplete", c, e)
                        } catch (m) {
                            this._errorHandler(m, d, e)
                        }
                    },
                    _extentHandler: function (a, b, d, f, e) {
                        try {
                            a.extent && (a.extent = new c(a.extent)), this._successHandler([a], "onExecuteForExtentComplete", d, e)
                        } catch (g) {
                            this._errorHandler(g, f, e)
                        }
                    }
                });
                b._createWrappers(r);
                h("extend-esri") && p.setObject("tasks.QueryTask",
                    r, k);
                return r
            })
        },
        "esri/tasks/Task": function () {
            define("dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/has ../kernel ../deferredUtils ../urlUtils ../Evented".split(" "), function (r, p, a, g, q, h, k, l) {
                r = r(l, {
                    declaredClass: "esri.tasks._Task",
                    _eventMap: {
                        error: ["error"],
                        complete: ["result"]
                    },
                    constructor: function (a, c) {
                        a && p.isString(a) && (this._url = k.urlToObject(this.url = a));
                        c && c.requestOptions && (this.requestOptions = c.requestOptions);
                        this.normalization = !0;
                        this._errorHandler = p.hitch(this, this._errorHandler);
                        this.registerConnectEvents()
                    },
                    _useSSL: function () {
                        var a = this._url,
                            c = /^http:/i;
                        this.url && (this.url = this.url.replace(c, "https:"));
                        a && a.path && (a.path = a.path.replace(c, "https:"))
                    },
                    _encode: function (e, c, b) {
                        var d, g, h = {},
                            l, n;
                        for (l in e)
                            if ("declaredClass" !== l && (d = e[l], g = typeof d, null !== d && void 0 !== d && "function" !== g))
                                if (p.isArray(d)) {
                                    h[l] = [];
                                    n = d.length;
                                    for (g = 0; g < n; g++) h[l][g] = this._encode(d[g])
                                } else "object" === g ? d.toJson && (g = d.toJson(b && b[l]), "esri.tasks.FeatureSet" === d.declaredClass && g.spatialReference && (g.sr =
                                    g.spatialReference, delete g.spatialReference), h[l] = c ? g : a.toJson(g)) : h[l] = d;
                        return h
                    },
                    _successHandler: function (a, c, b, d) {
                        c && this[c].apply(this, a);
                        b && b.apply(null, a);
                        d && h._resDfd(d, a)
                    },
                    _errorHandler: function (a, c, b) {
                        this.onError(a);
                        c && c(a);
                        b && b.errback(a)
                    },
                    setNormalization: function (a) {
                        this.normalization = a
                    },
                    onError: function () {}
                });
                g("extend-esri") && (q.Task = r);
                return r
            })
        },
        "esri/tasks/FeatureSet": function () {
            define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../graphic ../SpatialReference ../graphicsUtils ../geometry/jsonUtils ../symbols/jsonUtils".split(" "),
                function (r, p, a, g, q, h, k, l, e, c, b) {
                    r = r(null, {
                        declaredClass: "esri.tasks.FeatureSet",
                        constructor: function (d) {
                            if (d) {
                                p.mixin(this, d);
                                var e = this.features,
                                    g = d.spatialReference,
                                    h = c.getGeometryType(d.geometryType),
                                    g = this.spatialReference = new l(g);
                                this.geometryType = d.geometryType;
                                d.fields && (this.fields = d.fields);
                                a.forEach(e, function (a, c) {
                                    var d = a.geometry && a.geometry.spatialReference;
                                    e[c] = new k(h && a.geometry ? new h(a.geometry) : null, a.symbol && b.fromJson(a.symbol), a.attributes);
                                    e[c].geometry && !d && e[c].geometry.setSpatialReference(g)
                                });
                                this._hydrate()
                            } else this.features = []
                        },
                        displayFieldName: null,
                        geometryType: null,
                        spatialReference: null,
                        fieldAliases: null,
                        toJson: function (a) {
                            var b = {};
                            this.displayFieldName && (b.displayFieldName = this.displayFieldName);
                            this.fields && (b.fields = this.fields);
                            this.spatialReference ? b.spatialReference = this.spatialReference.toJson() : this.features[0] && this.features[0].geometry && (b.spatialReference = this.features[0].geometry.spatialReference.toJson());
                            this.features[0] && (this.features[0].geometry && (b.geometryType =
                                c.getJsonType(this.features[0].geometry)), b.features = e._encodeGraphics(this.features, a));
                            b.exceededTransferLimit = this.exceededTransferLimit;
                            b.transform = this.transform;
                            return h.fixJson(b)
                        },
                        _hydrate: function () {
                            var a = this.transform,
                                b = this.geometryType;
                            if (a && b)
                                for (var c = this.features, e = a.translate[0], g = a.translate[1], f = a.scale[0], h = a.scale[1], l = function (a, b, c) {
                                        if ("esriGeometryPoint" === a) return function (a) {
                                            a.x = b(a.x);
                                            a.y = c(a.y)
                                        };
                                        if ("esriGeometryPolyline" === a || "esriGeometryPolygon" === a) return function (a) {
                                            a =
                                                a.rings || a.paths;
                                            var d, f, e, g, h, n, l, m;
                                            d = 0;
                                            for (f = a.length; d < f; d++) {
                                                h = a[d];
                                                e = 0;
                                                for (g = h.length; e < g; e++) n = h[e], 0 < e ? (l += n[0], m += n[1]) : (l = n[0], m = n[1]), n[0] = b(l), n[1] = c(m)
                                            }
                                        };
                                        if ("esriGeometryEnvelope" === a) return function (a) {
                                            a.xmin = b(a.xmin);
                                            a.ymin = c(a.ymin);
                                            a.xmax = b(a.xmax);
                                            a.ymax = c(a.ymax)
                                        };
                                        if ("esriGeometryMultipoint" === a) return function (a) {
                                            a = a.points;
                                            var d, f, e, g, h;
                                            d = 0;
                                            for (f = a.length; d < f; d++) e = a[d], 0 < d ? (g += e[0], h += e[1]) : (g = e[0], h = e[1]), e[0] = b(g), e[1] = c(h)
                                        }
                                    }(b, function (a) {
                                        return a * f + e
                                    }, function (a) {
                                        return g -
                                            a * h
                                    }), a = 0, b = c.length; a < b; a++) c[a].geometry && l(c[a].geometry);
                            this.transform = null
                        },
                        quantize: function (a) {
                            if (!this.geometryType) return this.transform = null, this;
                            var b = a.translate[0],
                                c = a.translate[1],
                                e = a.scale[0],
                                g = a.scale[1],
                                f = this.features,
                                h = function (a, b, c) {
                                    var d, f, e, g, h, n, l = [];
                                    d = 0;
                                    for (f = a.length; d < f; d++)
                                        if (e = a[d], 0 < d) {
                                            if (n = b(e[0]), e = c(e[1]), n !== g || e !== h) l.push([n - g, e - h]), g = n, h = e
                                        } else g = b(e[0]), h = c(e[1]), l.push([g, h]);
                                    return 0 < l.length ? l : null
                                },
                                l = function (a, b, c) {
                                    if ("esriGeometryPoint" === a) return function (a) {
                                        a.x =
                                            b(a.x);
                                        a.y = c(a.y);
                                        return a
                                    };
                                    if ("esriGeometryPolyline" === a || "esriGeometryPolygon" === a) return function (a) {
                                        var d, f, e, g, n;
                                        e = a.rings || a.paths;
                                        n = [];
                                        d = 0;
                                        for (f = e.length; d < f; d++) g = e[d], (g = h(g, b, c)) && n.push(g);
                                        return 0 < n.length ? (a.rings ? a.rings = n : a.paths = n, a) : null
                                    };
                                    if ("esriGeometryMultipoint" === a) return function (a) {
                                        var d;
                                        d = h(a.points, b, c);
                                        return 0 < d.length ? (a.points = d, a) : null
                                    };
                                    if ("esriGeometryEnvelope" === a) return function (a) {
                                        return a
                                    }
                                }(this.geometryType, function (a) {
                                    return Math.round((a - b) / e)
                                }, function (a) {
                                    return Math.round((c -
                                        a) / g)
                                }),
                                k, p;
                            k = 0;
                            for (p = f.length; k < p; k++) f[k].geometry && (l(f[k].geometry) || f[k].setGeometry(null));
                            this.transform = a;
                            return this
                        }
                    });
                    g("extend-esri") && p.setObject("tasks.FeatureSet", r, q);
                    return r
                })
        },
        "esri/tasks/StatisticDefinition": function () {
            define(["dojo/_base/declare", "dojo/_base/lang", "dojo/has", "../kernel"], function (r, p, a, g) {
                r = r(null, {
                    declaredClass: "esri.tasks.StatisticDefinition",
                    toJson: function () {
                        return {
                            statisticType: this.statisticType,
                            onStatisticField: this.onStatisticField,
                            outStatisticFieldName: this.outStatisticFieldName,
                            maxPointCount: this.maxPointCount,
                            maxRecordCount: this.maxRecordCount,
                            maxVertexCount: this.maxVertexCount
                        }
                    }
                });
                a("extend-esri") && p.setObject("tasks.StatisticDefinition", r, g);
                return r
            })
        },
        "esri/layers/FeatureType": function () {
            define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../symbols/jsonUtils ./RangeDomain ./CodedValueDomain ./InheritedDomain ./FeatureTemplate".split(" "), function (r, p, a, g, q, h, k, l, e, c, b) {
                r = r(null, {
                    declaredClass: "esri.layers.FeatureType",
                    constructor: function (a) {
                        if (a &&
                            p.isObject(a)) {
                            this.id = a.id;
                            this.name = a.name;
                            var g = a.symbol;
                            g && (this.symbol = k.fromJson(g));
                            var g = a.domains,
                                h, q = this.domains = {};
                            for (h in g)
                                if (g.hasOwnProperty(h)) {
                                    var n = g[h];
                                    switch (n.type) {
                                    case "range":
                                        q[h] = new l(n);
                                        break;
                                    case "codedValue":
                                        q[h] = new e(n);
                                        break;
                                    case "inherited":
                                        q[h] = new c(n)
                                    }
                                }
                            if (h = a.templates) {
                                g = this.templates = [];
                                for (a = 0; a < h.length; a++) g.push(new b(h[a]))
                            }
                        }
                    },
                    toJson: function () {
                        var b = {
                                id: this.id,
                                name: this.name,
                                symbol: this.symbol && this.symbol.toJson()
                            },
                            c, e = this.domains,
                            g = this.templates,
                            n = h.fixJson;
                        if (e) {
                            var f = b.domains = {};
                            for (c in e) e.hasOwnProperty(c) && (f[c] = e[c] && e[c].toJson());
                            n(f)
                        }
                        g && (b.templates = a.map(g, function (a) {
                            return a.toJson()
                        }));
                        return n(b)
                    }
                });
                g("extend-esri") && p.setObject("layers.FeatureType", r, q);
                return r
            })
        },
        "esri/layers/FeatureTemplate": function () {
            define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../graphic".split(" "), function (r, p, a, g, q, h) {
                r = r(null, {
                    declaredClass: "esri.layers.FeatureTemplate",
                    constructor: function (a) {
                        a && p.isObject(a) && (this.name =
                            a.name, this.description = a.description, this.drawingTool = a.drawingTool, this.thumbnail = a.thumbnail, a = a.prototype, this.prototype = new h(a.geometry, null, a.attributes))
                    },
                    toJson: function () {
                        return q.fixJson({
                            name: this.name,
                            description: this.description,
                            drawingTool: this.drawingTool,
                            thumbnail: q.fixJson(p.clone(this.thumbnail)),
                            prototype: this.prototype && this.prototype.toJson()
                        })
                    }
                });
                p.mixin(r, {
                    TOOL_AUTO_COMPLETE_POLYGON: "esriFeatureEditToolAutoCompletePolygon",
                    TOOL_CIRCLE: "esriFeatureEditToolCircle",
                    TOOL_ELLIPSE: "esriFeatureEditToolEllipse",
                    TOOL_FREEHAND: "esriFeatureEditToolFreehand",
                    TOOL_LINE: "esriFeatureEditToolLine",
                    TOOL_NONE: "esriFeatureEditToolNone",
                    TOOL_POINT: "esriFeatureEditToolPoint",
                    TOOL_POLYGON: "esriFeatureEditToolPolygon",
                    TOOL_RECTANGLE: "esriFeatureEditToolRectangle",
                    TOOL_ARROW: "esriFeatureEditToolArrow",
                    TOOL_TRIANGLE: "esriFeatureEditToolTriangle",
                    TOOL_LEFT_ARROW: "esriFeatureEditToolLeftArrow",
                    TOOL_RIGHT_ARROW: "esriFeatureEditToolRightArrow",
                    TOOL_UP_ARROW: "esriFeatureEditToolUpArrow",
                    TOOL_DOWN_ARROW: "esriFeatureEditToolDownArrow"
                });
                a("extend-esri") && p.setObject("layers.FeatureTemplate", r, g);
                return r
            })
        },
        "esri/layers/FeatureEditResult": function () {
            define(["dojo/_base/declare", "dojo/_base/lang", "dojo/has", "../kernel"], function (r, p, a, g) {
                r = r(null, {
                    declaredClass: "esri.layers.FeatureEditResult",
                    constructor: function (a) {
                        a && p.isObject(a) && (this.objectId = a.objectId, this.success = a.success, a.success || (a = a.error, this.error = Error(), this.error.code = a.code, this.error.message = a.description))
                    }
                });
                a("extend-esri") && p.setObject("layers.FeatureEditResult",
                    r, g);
                return r
            })
        },
        "esri/layers/SnapshotMode": function () {
            define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../SpatialReference ../tasks/query ./RenderMode".split(" "), function (r, p, a, g, q, h, k) {
                r = r([k], {
                    declaredClass: "esri.layers._SnapshotMode",
                    constructor: function (a) {
                        this.featureLayer = a;
                        this.pagination = a.queryPagination;
                        this._featureMap = {};
                        this._hasPartialFeatures = !1;
                        this._drawFeatures = p.hitch(this, this._drawFeatures);
                        this._queryErrorHandler = p.hitch(this, this._queryErrorHandler)
                    },
                    startup: function () {
                        this.pagination =
                            this.pagination && null != this.featureLayer.maxRecordCount;
                        this.featureLayer._collection ? this._applyTimeFilter() : this._fetchAll()
                    },
                    propertyChangeHandler: function (a) {
                        this._init && (a ? this.featureLayer._collection ? console.log("FeatureLayer: layer created by value (from a feature collection) does not support definition expressions and time definitions. Layer id \x3d " + this.featureLayer.id) : this._fetchAll() : this._applyTimeFilter())
                    },
                    drawFeature: function (a) {
                        var e = a.attributes[this.featureLayer.objectIdField];
                        this._addFeatureIIf(e, a);
                        this._incRefCount(e)
                    },
                    resume: function () {
                        this.propertyChangeHandler(0)
                    },
                    refresh: function () {
                        var a = this.featureLayer;
                        a._collection ? (a._fireUpdateStart(), a._refresh(!0), a._fireUpdateEnd()) : this._fetchAll()
                    },
                    hasAllFeatures: function () {
                        return !this._hasPartialFeatures
                    },
                    _getRequestId: function (a) {
                        return ("_" + a.name + a.layerId + a._ulid).replace(/[^a-zA-Z0-9\_]+/g, "_")
                    },
                    _fetchAll: function () {
                        var a = this.featureLayer;
                        !a._collection && !a.suspended && (a._fireUpdateStart(), this._clearIIf(), this._hasPartialFeatures = !1, this._sendRequest())
                    },
                    _sendRequest: function (a) {
                        var e = this.map,
                            c = this.featureLayer,
                            b = c.getDefinitionExpression(),
                            d = new h;
                        d.outFields = c.getOutFields();
                        d.where = b || "1\x3d1";
                        d.returnGeometry = !0;
                        d.outSpatialReference = new q(e.spatialReference.toJson());
                        d.timeExtent = c.getTimeDefinition();
                        d.maxAllowableOffset = c._maxOffset;
                        d.quantizationParameters = c._quantizationParameters;
                        c._ts && (d._ts = (new Date).getTime());
                        d.orderByFields = c.supportsAdvancedQueries ? c.getOrderByFields() : null;
                        d.multipatchOption = c.multipatchOption;
                        this.pagination && (this._start = d.start = null == a ? 0 : a, d.num = c.maxRecordCount);
                        var g;
                        c._usePatch && (g = this._getRequestId(c), this._cancelPendingRequest(null, g));
                        c._task.execute(d, this._drawFeatures, this._queryErrorHandler, g)
                    },
                    _drawFeatures: function (a) {
                        this._purgeRequests();
                        var e = a.features,
                            c = this.featureLayer,
                            b = c.objectIdField,
                            d, g = e.length,
                            h = a.exceededTransferLimit && !c._collection,
                            k = c._selectedFeatures,
                            n = c.mode === c.constructor.MODE_AUTO,
                            f, p, q;
                        c._fireUpdateStart();
                        c._sortFeatures(e);
                        for (d = 0; d < g; d++) p = e[d],
                            q = p.attributes[b], f = this._addFeatureIIf(q, p), this._incRefCount(q), n && (f !== p && k[q]) && (f.setGeometry(p.geometry), f.setAttributes(p.attributes));
                        this._applyTimeFilter(!0);
                        if (!this.pagination || !h) this._hasPartialFeatures = !!a.exceededTransferLimit, c._fireUpdateEnd(null, a.exceededTransferLimit ? {
                            queryLimitExceeded: !0
                        } : null);
                        h && (this.pagination && this._sendRequest(this._start + c.maxRecordCount), c.onQueryLimitExceeded())
                    },
                    _queryErrorHandler: function (a) {
                        this._purgeRequests();
                        this._hasPartialFeatures = !0;
                        var e =
                            this.featureLayer;
                        e._errorHandler(a);
                        e._fireUpdateEnd(a)
                    }
                });
                a("extend-esri") && p.setObject("layers._SnapshotMode", r, g);
                return r
            })
        },
        "esri/layers/RenderMode": function () {
            define("dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has dojo/io/script ../kernel".split(" "), function (r, p, a, g, q, h, k) {
                p = p(null, {
                    declaredClass: "esri.layers._RenderMode",
                    constructor: function () {
                        this._prefix = "jsonp_" + (r._scopeName || "dojo") + "IoScript"
                    },
                    initialize: function (a) {
                        this.map = a;
                        this._init = !0
                    },
                    startup: function () {},
                    propertyChangeHandler: function (a) {},
                    destroy: function () {
                        this._init = !1
                    },
                    drawFeature: function (a) {},
                    suspend: function () {},
                    resume: function () {},
                    refresh: function () {},
                    hasAllFeatures: function () {
                        return !0
                    },
                    _incRefCount: function (a) {
                        (a = this._featureMap[a]) && a._count++
                    },
                    _decRefCount: function (a) {
                        (a = this._featureMap[a]) && a._count--
                    },
                    _getFeature: function (a) {
                        return this._featureMap[a]
                    },
                    _addFeatureIIf: function (a, e) {
                        var c = this._featureMap,
                            b = c[a],
                            d = this.featureLayer;
                        b || (c[a] = e, d._add(e), e._count = 0);
                        return b || e
                    },
                    _removeFeatureIIf: function (a) {
                        var e =
                            this._featureMap[a],
                            c = this.featureLayer;
                        if (e) {
                            if (e._count) return;
                            delete this._featureMap[a];
                            c._remove(e)
                        }
                        return e
                    },
                    _clearIIf: function () {
                        var a;
                        a = this.featureLayer;
                        var e = a.graphics,
                            c = a._selectedFeatures,
                            b = a.getSelectedFeatures().length,
                            d = a.objectIdField;
                        if (b)
                            for (a = e.length - 1; 0 <= a; a--) {
                                var b = e[a],
                                    g = b.attributes[d];
                                g in c ? b._count = 1 : (b._count = 0, this._removeFeatureIIf(g))
                            } else a.clear(), this._featureMap = {}
                    },
                    _isPending: function (a) {
                        return h[this._prefix + a] ? !0 : !1
                    },
                    _cancelPendingRequest: function (a, e) {
                        if (a =
                            a || h[this._prefix + e]) try {
                            a.cancel(), h._validCheck(a)
                        } catch (c) {}
                    },
                    _purgeRequests: function () {
                        h._validCheck(null)
                    },
                    _toggleVisibility: function (a) {
                        var e = this.featureLayer,
                            c = e.graphics,
                            b = a ? "show" : "hide",
                            d, g = c.length;
                        a = a && e._ager;
                        for (d = 0; d < g; d++) {
                            var h = c[d];
                            h[b]();
                            a && e._repaint(h)
                        }
                    },
                    _applyTimeFilter: function (a) {
                        var e = this.featureLayer;
                        if (e.timeInfo && !e.suspended) {
                            a || e._fireUpdateStart();
                            var c = e._trackManager;
                            c && c.clearTracks();
                            var b = e.getTimeDefinition(),
                                d = e._getOffsettedTE(e._mapTimeExtent);
                            d ? (d = e._getTimeOverlap(b,
                                d)) ? (b = e._filterByTime(e.graphics, d.startTime, d.endTime), c && c.addFeatures(b.match), g.forEach(b.match, function (a) {
                                var b = a._shape;
                                a.visible || (a.show(), (b = a._shape) && b._moveToFront());
                                e._ager && b && e._repaint(a)
                            }), g.forEach(b.noMatch, function (a) {
                                a.visible && a.hide()
                            })) : this._toggleVisibility(!1) : (c && c.addFeatures(e.graphics), this._toggleVisibility(!0));
                            c && (c.moveLatestToFront(), c.drawTracks());
                            a || e._fireUpdateEnd()
                        }
                    }
                });
                q("extend-esri") && a.setObject("layers._RenderMode", p, k);
                return p
            })
        },
        "esri/layers/OnDemandMode": function () {
            define("dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/has ../kernel ../geometry/Point ../tasks/query ./RenderMode ./GridLayout".split(" "),
                function (r, p, a, g, q, h, k, l, e, c) {
                    r = r([e], {
                        declaredClass: "esri.layers._OnDemandMode",
                        constructor: function (b) {
                            this.featureLayer = b;
                            this._featureMap = {};
                            this._hasPartialFeatures = !1;
                            this._queryErrorHandler = a.hitch(this, this._queryErrorHandler)
                        },
                        initialize: function (a) {
                            this.inherited(arguments);
                            var d = this.featureLayer,
                                e = d._srInfo;
                            this._gridLayer = new c(new k(e ? e.valid[0] : a.extent.xmin, e ? e.valid[1] : a.extent.ymax, a.spatialReference), {
                                width: d._tileWidth,
                                height: d._tileHeight
                            }, {
                                width: a.width,
                                height: a.height
                            }, e);
                            this._cellMap = {};
                            this._gridLayer.setResolution(a.extent)
                        },
                        startup: function () {
                            this._ioQueue = [];
                            this.featureLayer.suspended || (this._zoomHandler(), this._enableConnectors())
                        },
                        propertyChangeHandler: function (a) {
                            this._init && (2 > a ? this._zoomHandler() : console.log("FeatureLayer: layer in on-demand mode does not support time definitions. Layer id \x3d " + this.featureLayer.id + ", Layer URL \x3d " + this.featureLayer.url))
                        },
                        destroy: function () {
                            this._disableConnectors();
                            this.inherited(arguments)
                        },
                        drawFeature: function (a) {
                            var c = this._gridLayer,
                                e = a.geometry,
                                g = [];
                            if (e)
                                for (var g = c.getCellsInExtent("point" === e.type ? {
                                        xmin: e.x,
                                        ymin: e.y,
                                        xmax: e.x,
                                        ymax: e.y
                                    } : e.getExtent(), !1).cells, c = this._cellMap, h, n = a.attributes[this.featureLayer.objectIdField], f, l, k, e = 0; e < g.length; e++) h = g[e], f = h.latticeID, l = h.row, k = h.col, f ? h = c[f] = c[f] || h : (c[l] = c[l] || {}, h = c[l][k] = c[l][k] || h), h.features = h.features || [], h.features.push(a), this._addFeatureIIf(n, a), this._incRefCount(n)
                        },
                        suspend: function () {
                            this._init && this._disableConnectors()
                        },
                        resume: function () {
                            this._init && (this._enableConnectors(),
                                this._zoomHandler())
                        },
                        refresh: function () {
                            this._zoomHandler()
                        },
                        hasAllFeatures: function () {
                            if (this._hasPartialFeatures) return !0;
                            var a = !1,
                                c = this._getCurrentCells(),
                                e;
                            for (e = 0; e < c.length; e++)
                                if (c[e].hasPartialFeatures) {
                                    a = !0;
                                    break
                                }
                            return !a
                        },
                        _enableConnectors: function () {
                            var a = this.map;
                            this._zoomConnect = p.connect(a, "onZoomEnd", this, this._zoomHandler);
                            this._panConnect = p.connect(a, "onPanEnd", this, this._panHandler);
                            this._resizeConnect = p.connect(a, "onResize", this, this._panHandler)
                        },
                        _disableConnectors: function () {
                            p.disconnect(this._zoomConnect);
                            p.disconnect(this._panConnect);
                            p.disconnect(this._resizeConnect)
                        },
                        _zoomHandler: function () {
                            this._processIOQueue(!0);
                            var a = this.featureLayer,
                                c = this.map;
                            a.suspended || (a._fireUpdateStart(), this._clearIIf(), this._hasPartialFeatures = !1, (a = a._trackManager) && a.clearTracks(), this._cellMap = {}, this._gridLayer.setResolution(c.extent), this._sendRequest())
                        },
                        _panHandler: function (a) {
                            this.featureLayer._fireUpdateStart();
                            var c = this.featureLayer._resized;
                            a = c ? a : null;
                            c && this._gridLayer.setMapState(a, this.map.width, this.map.height);
                            this._sendRequest(a)
                        },
                        _getRequestId: function (a, c) {
                            return ("_" + a.name + a.layerId + a._ulid + "_" + c.resolution + "_" + (c.latticeID || c.row + "_" + c.col)).replace(/[^a-zA-Z0-9\_]+/g, "_")
                        },
                        _sendRequest: function (a) {
                            this._exceeds = !1;
                            var c = this.featureLayer,
                                e = this.map;
                            a = a || e.extent;
                            e = this._gridLayer.getCellsInExtent(a, c.latticeTiling).cells;
                            if (!c.isEditable()) var h = this._cellMap,
                                e = g.filter(e, function (a) {
                                    if (a.lattice) {
                                        if (h[a.latticeID]) return !1
                                    } else if (h[a.row] && h[a.row][a.col]) return !1;
                                    return !0
                                });
                            var k = c.getOutFields(),
                                n = c.getDefinitionExpression(),
                                f = c._getOffsettedTE(c._mapTimeExtent),
                                p = c.supportsAdvancedQueries ? c.getOrderByFields() : null,
                                q = c._usePatch,
                                r = this._ioQueue,
                                C, x = this,
                                v = this._drawFeatures,
                                A, z, H;
                            this._pending = this._pending || 0;
                            for (C = 0; C < e.length; C++) {
                                A = e[C];
                                z = new l;
                                z.geometry = A.extent || A.lattice;
                                z.outFields = k;
                                z.where = n;
                                c.latticeTiling && A.extent && (z.spatialRelationship = l.SPATIAL_REL_CONTAINS);
                                z.returnGeometry = !0;
                                z.timeExtent = f;
                                c._ts && (z._ts = (new Date).getTime());
                                z.orderByFields = p;
                                z.multipatchOption = c.multipatchOption;
                                z.maxAllowableOffset = c._maxOffset;
                                z.quantizationParameters = c._quantizationParameters;
                                if ((H = c.advancedQueryCapabilities) && H.supportsQueryWithResultType) z.resultType = "tile";
                                H = null;
                                if (q && (H = this._getRequestId(c, A), this._isPending(H))) continue;
                                this._pending++;
                                r.push(c._task.execute(z, function () {
                                    var a = A;
                                    return function (b) {
                                        v.apply(x, [b, a])
                                    }
                                }.call(this), this._queryErrorHandler, H))
                            }
                            this._removeOldCells(a);
                            this._endCheck()
                        },
                        _drawFeatures: function (a, c) {
                            c.hasPartialFeatures = !!a.exceededTransferLimit;
                            this._exceeds =
                                this._exceeds || a.exceededTransferLimit;
                            this._finalizeIO();
                            var e = this.featureLayer,
                                g = this.map.extent,
                                h = c.extent,
                                n = c.row,
                                f = c.col,
                                l = e.objectIdField,
                                k = a.features,
                                p = this._gridLayer,
                                q = this._cellMap,
                                r = c.latticeID,
                                v = r ? q[r] : q[n] && q[n][f];
                            if (c.resolution != p._resolution || (r ? r !== p.getLatticeID(g) : !p.intersects(h, g))) v && this._removeCell(n, f, r);
                            else if (v) e._sortFeatures(k), this._updateCell(v, k);
                            else {
                                e._sortFeatures(k);
                                c.features = k;
                                r ? q[r] = c : (q[n] = q[n] || {}, q[n][f] = c);
                                g = k.length;
                                for (e = 0; e < g; e++) h = k[e], n = h.attributes[l],
                                    this._addFeatureIIf(n, h), this._incRefCount(n)
                            }
                            this._endCheck()
                        },
                        _queryErrorHandler: function (a) {
                            this._finalizeIO();
                            this._hasPartialFeatures = !0;
                            this.featureLayer._errorHandler(a);
                            this._endCheck(!0)
                        },
                        _finalizeIO: function () {
                            this._purgeRequests();
                            this._pending--
                        },
                        _endCheck: function (a) {
                            if (0 === this._pending) {
                                this._processIOQueue();
                                var c = this.featureLayer,
                                    e = c._trackManager;
                                e && (e.clearTracks(), e.addFeatures(c.graphics), c._ager && g.forEach(c.graphics, function (a) {
                                        a._shape && c._repaint(a)
                                    }), e.moveLatestToFront(),
                                    e.drawTracks());
                                this.featureLayer._fireUpdateEnd(a && Error("FeatureLayer: an error occurred while updating the layer"), this._exceeds ? {
                                    queryLimitExceeded: !0
                                } : null);
                                if (this._exceeds) c.onQueryLimitExceeded()
                            }
                        },
                        _processIOQueue: function (a) {
                            this._ioQueue = g.filter(this._ioQueue, function (a) {
                                return -1 < a.fired ? !1 : !0
                            });
                            a && g.forEach(this._ioQueue, this._cancelPendingRequest)
                        },
                        _getCurrentCells: function (a) {
                            var c = [];
                            a = a || this._cellMap;
                            for (var e in a)
                                if (a.hasOwnProperty(e)) {
                                    var g = a[e];
                                    g && (g.hasOwnProperty("row") || g.hasOwnProperty("latticeID") ?
                                        c.push(g) : "object" === typeof g && c.push.apply(c, this._getCurrentCells(g)))
                                }
                            return c
                        },
                        _removeOldCells: function (a) {
                            var c = this._cellMap,
                                e = this._gridLayer,
                                g, h;
                            for (g in c)
                                if (c[g]) {
                                    var n = c[g],
                                        f = n.latticeID,
                                        l = 0,
                                        k = 0;
                                    if (f) l++, f !== e.getLatticeID(a) && (this._removeCell(null, null, f), k++);
                                    else
                                        for (h in n) n[h] && (l++, e.intersects(n[h].extent, a) || (this._removeCell(g, h), k++));
                                    k === l && delete c[g]
                                }
                        },
                        _updateCell: function (a, c) {
                            var e = this.featureLayer,
                                g = e.objectIdField,
                                e = e._selectedFeatures,
                                h, n = c.length;
                            a.features = a.features || [];
                            for (h = 0; h < n; h++) {
                                var f = c[h],
                                    l = f.attributes[g],
                                    k = this._addFeatureIIf(l, f);
                                k === f ? (this._incRefCount(l), a.features.push(k)) : l in e || (k.setGeometry(f.geometry), k.setAttributes(f.attributes))
                            }
                        },
                        _removeCell: function (a, c, e) {
                            var g = this._cellMap,
                                h = this.featureLayer,
                                n = h.objectIdField,
                                f = e ? g[e] : g[a] && g[a][c];
                            if (f) {
                                e ? delete g[e] : delete g[a][c];
                                a = f.features;
                                for (c = 0; c < a.length; c++) e = a[c].attributes[n], this._decRefCount(e), e in h._selectedFeatures || this._removeFeatureIIf(e)
                            }
                        }
                    });
                    q("extend-esri") && a.setObject("layers._OnDemandMode",
                        r, h);
                    return r
                })
        },
        "esri/layers/GridLayout": function () {
            define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../SpatialReference ../geometry/Extent ../geometry/Polyline".split(" "), function (r, p, a, g, q, h, k, l) {
                r = r(null, {
                    declaredClass: "esri.layers._GridLayout",
                    constructor: function (a, c, b, d) {
                        this.origin = a;
                        this.cellWidth = c.width;
                        this.cellHeight = c.height;
                        this.mapWidth = b.width;
                        this.mapHeight = b.height;
                        this.srInfo = d
                    },
                    setResolution: function (a) {
                        this._resolution = (a.xmax - a.xmin) / this.mapWidth;
                        this.srInfo && (a = Math.round(2 * this.srInfo.valid[1] / this._resolution), a = Math.round(a / this.cellWidth), this._frameStats = [a, 0, a - 1])
                    },
                    setMapState: function (a, c, b) {
                        this.mapWidth = c;
                        this.mapHeight = b;
                        this.setResolution(a)
                    },
                    getCellCoordinates: function (a) {
                        var c = this._resolution,
                            b = this.origin;
                        return {
                            row: Math.floor((b.y - a.y) / (this.cellHeight * c)),
                            col: Math.floor((a.x - b.x) / (this.cellWidth * c))
                        }
                    },
                    normalize: function (a) {
                        var c = this._frameStats;
                        if (c) {
                            var b = c[0],
                                d = c[1],
                                c = c[2];
                            a < d ? (a %= b, a = a < d ? a + b : a) : a > c && (a %= b)
                        }
                        return a
                    },
                    intersects: function (e, c) {
                        var b = this.srInfo;
                        return b ? a.some(c._getParts(b), function (a) {
                            return e.intersects(a.extent)
                        }) : e.intersects(c)
                    },
                    getCellExtent: function (a, c) {
                        var b = this._resolution,
                            d = this.origin,
                            g = this.cellWidth,
                            l = this.cellHeight;
                        return new k(c * g * b + d.x, d.y - (a + 1) * l * b, (c + 1) * g * b + d.x, d.y - a * l * b, new h(d.spatialReference.toJson()))
                    },
                    getLatticeID: function (a) {
                        var c = this.getCellCoordinates({
                                x: a.xmin,
                                y: a.ymax
                            }),
                            b = this.getCellCoordinates({
                                x: a.xmax,
                                y: a.ymin
                            });
                        a = c.row;
                        var d = b.row,
                            c = this.normalize(c.col),
                            b =
                            this.normalize(b.col);
                        return a + "_" + d + "_" + c + "_" + b
                    },
                    sorter: function (a, c) {
                        return a < c ? -1 : 1
                    },
                    getCellsInExtent: function (e, c) {
                        var b = this.getCellCoordinates({
                                x: e.xmin,
                                y: e.ymax
                            }),
                            d = this.getCellCoordinates({
                                x: e.xmax,
                                y: e.ymin
                            }),
                            g = b.row,
                            h = d.row,
                            b = b.col,
                            d = d.col,
                            k = [],
                            n, f, p, q = [],
                            r = [],
                            C, x, v, A, z = [];
                        for (n = g; n <= h; n++)
                            for (f = b; f <= d; f++) p = this.normalize(f), e = this.getCellExtent(n, p), a.some(k, function (a) {
                                return a.row === n && a.col === p
                            }) || k.push({
                                row: n,
                                col: p,
                                extent: e,
                                resolution: this._resolution
                            }), c && (q.push(e.xmin, e.xmax), r.push(e.ymin,
                                e.ymax));
                        b = this.normalize(b);
                        d = this.normalize(d);
                        q.sort(this.sorter);
                        r.sort(this.sorter);
                        f = q.length;
                        for (n = f - 1; 0 <= n; n--) n < f - 1 && q[n] === q[n + 1] && q.splice(n, 1);
                        f = r.length;
                        for (n = f - 1; 0 <= n; n--) n < f - 1 && r[n] === r[n + 1] && r.splice(n, 1);
                        if (q.length && r.length) {
                            C = q[0];
                            x = q[q.length - 1];
                            v = r[0];
                            A = r[r.length - 1];
                            f = q.length;
                            for (n = 0; n < f; n++) z.push([[q[n], A], [q[n], v]]);
                            f = r.length;
                            for (n = 0; n < f; n++) z.push([[C, r[n]], [x, r[n]]]);
                            q = new l({
                                paths: z,
                                spatialReference: this.origin.spatialReference.toJson()
                            });
                            k.push({
                                latticeID: g + "_" + h + "_" +
                                    b + "_" + d,
                                lattice: q,
                                resolution: this._resolution
                            })
                        }
                        return {
                            minRow: g,
                            maxRow: h,
                            minCol: b,
                            maxCol: d,
                            cells: k
                        }
                    }
                });
                g("extend-esri") && p.setObject("layers._GridLayout", r, q);
                return r
            })
        },
        "esri/layers/SelectionMode": function () {
            define(["dojo/_base/declare", "dojo/_base/lang", "dojo/has", "../kernel", "./RenderMode"], function (r, p, a, g, q) {
                r = r([q], {
                    declaredClass: "esri.layers._SelectionMode",
                    constructor: function (a) {
                        this.featureLayer = a;
                        this._featureMap = {}
                    },
                    propertyChangeHandler: function (a) {
                        this._init && 0 === a && this._applyTimeFilter()
                    },
                    resume: function () {
                        this.propertyChangeHandler(0)
                    },
                    hasAllFeatures: function () {
                        return !this.featureLayer._hasPartialSelectedFeatures
                    }
                });
                a("extend-esri") && p.setObject("layers._SelectionMode", r, g);
                return r
            })
        },
        "esri/layers/StreamMode": function () {
            define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../SpatialReference ../tasks/query ../tasks/QueryTask ../geometry/jsonUtils ./RenderMode".split(" "), function (r, p, a, g, q, h, k, l, e, c) {
                r = r([c], {
                    declaredClass: "esri.layers._StreamMode",
                    constructor: function (a,
                        c) {
                        this.featureLayer = a;
                        this._featureMap = {};
                        this._setRefreshRate();
                        this._drawBuffer = {
                            adds: [],
                            updates: []
                        };
                        this._timeoutId = null;
                        this._flushDrawBuffer = p.hitch(this, this._flushDrawBuffer);
                        this._featuresByTime = {};
                        this._lastEndTimeCheck = null;
                        this._maxFeatureAge = 0;
                        a.purgeOptions && (a.purgeOptions.age && "number" === typeof a.purgeOptions.age) && (this._maxFeatureAge = 1E3 * Math.ceil(60 * a.purgeOptions.age));
                        this._drawFeatures = p.hitch(this, this._drawFeatures);
                        this._queryErrorHandler = p.hitch(this, this._queryErrorHandler)
                    },
                    startup: function () {},
                    propertyChangeHandler: function (a) {
                        this._init && (0 === a ? this._applyTimeFilter() : 3 === a ? this._redrawAllTracks() : console.debug("StreamLayer: Stream Layer only supports changing map time or maximumTrackPoints. Layer id \x3d " + this.featureLayer.id))
                    },
                    destroy: function () {
                        this.inherited(arguments);
                        clearTimeout(this._timeoutId);
                        this._featuresByTime = this._drawBuffer = this._featureMap = null
                    },
                    drawFeature: function (a) {
                        var c = this.featureLayer,
                            e = c.objectIdField;
                        this._timeoutId || (this._timeoutId = setTimeout(this._flushDrawBuffer,
                            this._refreshRate));
                        c._joinField && this._getFeature(a.attributes[e]) ? this._drawBuffer.updates.push({
                            oid: a.attributes[e],
                            updates: a
                        }) : this._drawBuffer.adds.push(a)
                    },
                    resume: function () {
                        this.propertyChangeHandler(0)
                    },
                    refresh: function () {
                        var a = this.featureLayer;
                        a && (!a._relatedUrl && !a._keepLatestUrl ? (a._fireUpdateStart(), a.clear(), a._fireUpdateEnd()) : (a._fireUpdateStart(), a._refreshing = !0, a.disconnect(), a.clear(), a._relatedQueried = !1, a._keepLatestQueried = !1, a.connect()))
                    },
                    _drawFeatures: function (a, c) {
                        this._purgeRequests();
                        var e = this.featureLayer;
                        e._create(a.features || []);
                        e._fireUpdateEnd(null, c)
                    },
                    _applyTimeFilter: function (a) {
                        this.inherited(arguments);
                        this._redrawAllTracks()
                    },
                    _removeFeatures: function (b) {
                        var c = this.featureLayer,
                            e = c.objectIdField;
                        b && a.forEach(b, function (a) {
                            a = a.attributes[e];
                            c._unSelectFeatureIIf(a, this);
                            this._decRefCount(a);
                            this._removeFeatureIIf(a)
                        }, this)
                    },
                    _addFeatures: function (b) {
                        var c = this.featureLayer,
                            e = c._endTimeField,
                            g = c._startTimeField,
                            h, n, f, l = [],
                            k = [],
                            p = [];
                        h = c._trackManager;
                        n = c.objectIdField;
                        if (h)
                            for (f in b =
                                h.addFeatures(b), b) b.hasOwnProperty(f) && (l.push(f), b[f].adds && (k = k.concat(b[f].adds)), b[f].deletes && (p = p.concat(b[f].deletes)));
                        else k = b;
                        a.forEach(k, function (a) {
                            var b = a.attributes[n],
                                c;
                            c = e && a.attributes[e];
                            !c && this._maxFeatureAge && (c = g && a.attributes[g] ? a.attributes[g] + this._maxFeatureAge : Date.now() + this._maxFeatureAge);
                            c && (c = 1E3 * Math.ceil(c / 1E3), this._featuresByTime[c] ? this._featuresByTime[c].push(b) : this._featuresByTime[c] = [b]);
                            this._addFeatureIIf(b, a);
                            this._incRefCount(b)
                        }, this);
                        p.length && this._removeFeatures(p);
                        h && h.refreshTracks(l)
                    },
                    _updateFeatures: function (b) {
                        var c = this.featureLayer,
                            e, g, h = [];
                        e = c._trackManager;
                        g = c._trackIdField;
                        a.forEach(b, function (a) {
                            var b = a.updates;
                            a = this._getFeature(a.oid);
                            var l;
                            if (a) {
                                b.geometry && a.setGeometry(b.geometry);
                                b = b.attributes || {};
                                for (l in b) b.hasOwnProperty(l) && (a.attributes[l] = b[l]);
                                a.visible = this._checkFeatureTimeIntersects(a);
                                e && a.attributes[g] ? h.push(a.attributes[g]) : c._repaint(a, null, !0)
                            }
                        }, this);
                        h.length && e.refreshTracks(h)
                    },
                    _redrawAllTracks: function () {
                        var a = this.featureLayer._trackManager,
                            c;
                        if (a && (c = a.trimTracks()) && 0 < c.length) this._removeFeatures(c), a.refreshTracks()
                    },
                    _flushDrawBuffer: function () {
                        clearTimeout(this._timeoutId);
                        var a = this._drawBuffer,
                            c = a.adds.splice(0, a.adds.length),
                            e = a.updates.splice(0, a.updates.length),
                            a = this.featureLayer;
                        if (!a) return !1;
                        a.updating || a._fireUpdateStart();
                        this._addFeatures(c);
                        this._updateFeatures(e);
                        if ((c = this._getExpiredFeatures()) && c.length) this._removeFeatures(c), a._trackManager && a._trackManager.removeFeatures(c);
                        a._purge();
                        a._fireUpdateEnd();
                        this._timeoutId =
                            null
                    },
                    _clearDrawBuffer: function () {
                        var a = this._timeoutId,
                            c = this._drawBuffer,
                            e = c.adds,
                            c = c.updates;
                        a && clearTimeout(a);
                        e.splice(0, e.length);
                        c.splice(0, c.length);
                        this._timeoutId = null
                    },
                    _clearTimeBin: function () {
                        this._featuresByTime = {};
                        this._lastEndTimeCheck = 1E3 * Math.ceil(Date.now() / 1E3)
                    },
                    _clearFeatureMap: function () {
                        this._featureMap = {}
                    },
                    _setRefreshRate: function (a) {
                        a = a || 0 === a ? a : 200;
                        0 > a && (a = 200);
                        this._refreshRate = a
                    },
                    _checkFeatureTimeIntersects: function (a) {
                        var c = this.featureLayer,
                            e = c.getMap(),
                            e = e ? e.timeExtent :
                            null;
                        return !e || !c.timeInfo || !c.timeInfo.startTimeField && !c.timeInfo.endTimeField ? !0 : 0 < c._filterByTime([a], e.startTime, e.endTime).match.length
                    },
                    _getRequestId: function (a) {
                        return ("_" + a.name + a.layerId + a._ulid).replace(/[^a-zA-Z0-9\_]+/g, "_")
                    },
                    _fetchArchive: function (a) {
                        function c(a) {
                            w++;
                            q.execute(n).then(function (b) {
                                a(null, b)
                            }, function (b) {
                                a(b)
                            })
                        }

                        function g(a, b) {
                            if (a) w >= C || !p._relatedUrl ? x._queryErrorHandler(Error("Could not get features from related feature service")) : (v = {
                                    relatedFeatureWarning: "Querying related feature service using the current filter failed. All related features are displayed, and the filter is applied to the stream service only"
                                },
                                n.where = "1\x3d1", c(g));
                            else {
                                var f = x._fixFieldNameCasing(p, b);
                                b.features = f;
                                x._drawFeatures(b, v)
                            }
                        }
                        var p = this.featureLayer,
                            q, n, f, r, u;
                        p._fireUpdateStart();
                        if (a && this.map) {
                            q = new l(a);
                            n = new k;
                            a = this.map;
                            f = p.getFilter() || {};
                            r = f.where || "1\x3d1";
                            u = f.geometry ? e.fromJson(f.geometry) : null;
                            f = f.outFields ? f.outFields.split(",") : ["*"];
                            n.geometry = u;
                            n.where = r;
                            n.outFields = f;
                            n.returnGeometry = !0;
                            n.outSpatialReference = new h(a.spatialReference.toJson());
                            p._usePatch && (a = this._getRequestId(p), this._cancelPendingRequest(null,
                                a));
                            var w = 0,
                                C = 2,
                                x = this,
                                v = null;
                            c(g)
                        } else return this._fireUpdateEnd({
                            error: "Archive data cannot be fetched if no feature service url is provided or if the layer is not added to a map"
                        }), !1
                    },
                    _queryErrorHandler: function (a) {
                        this._purgeRequests();
                        var c = this.featureLayer;
                        c._errorHandler(a);
                        c._fireUpdateEnd(a)
                    },
                    _fixFieldNameCasing: function (a, c) {
                        var e = c.features || [],
                            g = c.fields;
                        if (!g || !e.length) return e;
                        for (var g = this._mapFieldNameDifferences(a.fields, g), h = [], n, f, l = 0, k = c.features.length; l < k; l++) n = e[l], f = this._swizzleResponseAttributes(n.attributes,
                            g), h.push({
                            geometry: n.geometry,
                            attributes: f
                        });
                        return h
                    },
                    _mapFieldNameDifferences: function (a, c) {
                        var e = [],
                            g = {},
                            h, n;
                        h = 0;
                        for (n = c.length; h < n; h++) e.push(c[h].name);
                        h = 0;
                        for (n = a.length; h < n; h++) {
                            var f = a[h].name,
                                l = this._checkForStreamFieldName(f, e);
                            l && (g[l] = f)
                        }
                        return g
                    },
                    _checkForStreamFieldName: function (a, c) {
                        for (var e = a.toLowerCase(), g, h = 0, n = c.length; h < n; h++)
                            if (c[h].toLowerCase() === e) {
                                g = c[h];
                                break
                            }
                        return g
                    },
                    _swizzleResponseAttributes: function (a, c) {
                        var e = {},
                            g;
                        for (g in a)
                            if (a.hasOwnProperty(g)) {
                                var h = a[g];
                                c.hasOwnProperty(g) ?
                                    e[c[g]] = h : e[g] = h
                            }
                        return e
                    },
                    _getExpiredFeatures: function () {
                        var b, c, e, g = [],
                            h = [];
                        if (!this.featureLayer._endTimeField && !this._maxFeatureAge) return h;
                        b = 1E3 * Math.floor(this._lastEndTimeCheck / 1E3);
                        this._lastEndTimeCheck = c = 1E3 * Math.ceil(Date.now() / 1E3);
                        if (b && b !== c)
                            for (e = this._featuresByTime; b <= c; b += 1E3) e[b] && (g = g.concat(e[b]), delete e[b]);
                        a.forEach(g, function (a) {
                            (a = this._getFeature(a)) && h.push(a)
                        }, this);
                        return h
                    }
                });
                g("extend-esri") && p.setObject("layers._StreamMode", r, q);
                return r
            })
        },
        "esri/layers/TrackManager": function () {
            define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../graphic ../geometry/Polyline ./GraphicsLayer".split(" "),
                function (r, p, a, g, q, h, k, l) {
                    r = r(null, {
                        declaredClass: "esri.layers._TrackManager",
                        constructor: function (a) {
                            this.layer = a;
                            this.trackMap = {};
                            this.trackLineMap = {}
                        },
                        initialize: function (a) {
                            this.map = a;
                            var c = this.layer,
                                b = c._getRenderer(),
                                b = b && b.trackRenderer;
                            if ("esriGeometryPoint" === c.geometryType) {
                                var d = this.container = new l._GraphicsLayer({
                                    id: c.id + "_tracks",
                                    _child: !0,
                                    visible: c.visible,
                                    minScale: c.minScale,
                                    maxScale: c.maxScale
                                });
                                d.loaded = !0;
                                d.onLoad(d);
                                d._setMap(a, c._div);
                                d.setRenderer(b);
                                c.on("visibility-change",
                                    p.hitch(this, function (a) {
                                        this.container.setVisibility(a.visible);
                                        this.container.evaluateSuspension()
                                    }));
                                c.on("scale-range-change", p.hitch(this, function () {
                                    this.container.setScaleRange(this.layer.minScale, this.layer.maxScale)
                                }))
                            }
                        },
                        addFeatures: function (e) {
                            var c = this.trackMap,
                                b = this.layer,
                                d = b._trackIdField,
                                g = [];
                            a.forEach(e, function (b) {
                                var e = b.attributes[d];
                                (c[e] = c[e] || []).push(b); - 1 === a.indexOf(g, e) && g.push(e)
                            });
                            var h = b._startTimeField,
                                l = b.objectIdField,
                                n = function (a, b) {
                                    var c = a.attributes[h],
                                        d = b.attributes[h];
                                    return c === d ? a.attributes[l] < b.attributes[l] ? -1 : 1 : c < d ? -1 : 1
                                };
                            a.forEach(g, function (a) {
                                c[a].sort(n)
                            })
                        },
                        trimTracks: function (e) {
                            function c(a) {
                                for (a = b[a] || []; a.length > d;) g.push(a.shift())
                            }
                            var b = this.trackMap,
                                d = this.layer.maximumTrackPoints || 0,
                                g = [],
                                h;
                            if (!d) return g;
                            if (e) a.forEach(e, function (a) {
                                c(a)
                            });
                            else
                                for (h in b) b.hasOwnProperty(h) && c(h);
                            return g
                        },
                        drawTracks: function (e) {
                            function c(a) {
                                var c = g[a],
                                    e, n, q;
                                n = b.trackLineMap[a];
                                d.remove(n);
                                delete b.trackLineMap[a];
                                if (!c || 2 > c.length) return !1;
                                n = [];
                                for (e = c.length -
                                    1; 0 <= e; e--)(q = c[e].geometry) && n.push([q.x, q.y]);
                                c = {};
                                c[p] = a;
                                1 < n.length && (n = new h(new k({
                                    paths: [n],
                                    spatialReference: l
                                }), null, c), d.add(n), b.trackLineMap[a] = n)
                            }
                            var b = this,
                                d = this.container,
                                g, l, p, n;
                            if (d)
                                if (g = this.trackMap, l = this.map.spatialReference, p = this.layer._trackIdField, e) a.forEach(e, function (a) {
                                    c(a)
                                });
                                else
                                    for (n in g) g.hasOwnProperty(n) && c(n)
                        },
                        refreshTracks: function (e) {
                            function c(a) {
                                var c, e;
                                b.drawTracks([a]);
                                if (h && h.latestObservationRenderer) {
                                    a = d[a] || [];
                                    c = a.length;
                                    for (e = 0; e < c; e++) g._repaint(a[e],
                                        null, !0)
                                }
                            }
                            var b = this,
                                d = this.trackMap,
                                g = this.layer,
                                h = g._getRenderer(),
                                l;
                            if (e) a.forEach(e, function (a) {
                                c(a)
                            });
                            else
                                for (l in d) d.hasOwnProperty(l) && c(l);
                            this.moveLatestToFront()
                        },
                        moveLatestToFront: function (e) {
                            a.forEach(this.getLatestObservations(e), function (a) {
                                var b = a._shape;
                                b && b._moveToFront();
                                this._repaint(a, null, !0)
                            }, this.layer)
                        },
                        getLatestObservations: function (e) {
                            function c(a) {
                                a = g[a];
                                return a[a.length - 1]
                            }
                            var b = [],
                                d = this.layer._getRenderer(),
                                g = this.trackMap,
                                h;
                            if (!d.latestObservationRenderer) return b;
                            if (e) a.forEach(e, function (a) {
                                b.push(c(a))
                            });
                            else
                                for (h in g) g.hasOwnProperty(h) && b.push(c(h));
                            return b
                        },
                        clearTracks: function (e) {
                            var c = this.getLatestObservations(e),
                                b = this.container,
                                d;
                            e ? a.forEach(e, function (a) {
                                delete this.trackMap[a];
                                b && (d = this.trackLineMap[a], b.remove(d), delete this.trackLineMap[a])
                            }, this) : (this.trackMap = {}, this.trackLineMap = {}, b && b.clear());
                            a.forEach(c, function (a) {
                                this._repaint(a, null, !0)
                            }, this.layer)
                        },
                        isLatestObservation: function (a) {
                            var c = this.trackMap[a.attributes[this.layer._trackIdField]];
                            return c ? c[c.length - 1] === a : !1
                        },
                        destroy: function () {
                            var a = this.container;
                            a && (a.clear(), a._unsetMap(this.map, this.layer._div));
                            this.map = this.layer = this.trackMap = this.container = null
                        }
                    });
                    g("extend-esri") && p.setObject("layers._TrackManager", r, q);
                    return r
                })
        },
        "esri/layers/HeatmapManager": function () {
            define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/_base/array require ../kernel ../sniff ../geometry/Point ../geometry/webMercatorUtils ./MapImage ../renderers/HeatmapRenderer ../tasks/query dojo/_base/fx".split(" "),
                function (r, p, a, g, q, h, k, l, e, c, b, d, m) {
                    function t() {}

                    function s(a) {
                        var b = a.layer;
                        return {
                            geometry: a.geometry,
                            attributes: a.attributes,
                            getLayer: function () {
                                return b
                            }
                        }
                    }
                    r = r(null, {
                        declaredClass: "esri.layers.HeatmapManager",
                        heatmapRenderer: null,
                        sourceLayer: null,
                        imageLayer: null,
                        useTiles: !0,
                        useWorker: !1,
                        map: null,
                        constructor: function (a) {
                            this.sourceLayer = a;
                            this._hndls = []
                        },
                        initialize: function (a) {
                            this.map = a;
                            var c = this.sourceLayer,
                                d = c.renderer;
                            c.setDrawMode(!1);
                            this.imageLayer = a._getMapImageLyr();
                            var e = this;
                            this.heatmapRenderer =
                                d instanceof b ? d : (d.getRendererInfoByZoom(a.getZoom()) || d.getRendererInfoByScale(a.getScale())).renderer;
                            this._setupDraw = this._setupDraw.bind(this);
                            this.recalculateHeatmap = this.recalculateHeatmap.bind(this);
                            this._removeRenderer = this._removeRenderer.bind(this);
                            this._handleRendererChange = this._handleRendererChange.bind(this);
                            this._rendererChangeHandle = this.sourceLayer.on("renderer-change", this._handleRendererChange);
                            this._handleOpacityChange = this._handleOpacityChange.bind(this);
                            this._reprojectFeature =
                                this._reprojectFeature.bind(this);
                            q(["../workers/heatmapCalculator"], function (a) {
                                e._calculator = new a(p.mixin({
                                    width: e.map.width,
                                    height: e.map.height
                                }, e._getOptions()));
                                e._setupRenderer();
                                e.heatmapRenderer.getStats = a.calculateStats;
                                e.heatmapRenderer.getHistogramData = a.getHistogramData
                            })
                        },
                        destroy: function () {
                            this._removeHandlers();
                            this._rendererChangeHandle && this._rendererChangeHandle.remove();
                            this._rendererChangeHandle = this.sourceLayer = this.imageLayer = this.map = this.heatmapRenderer = this._hndls = null
                        },
                        _handleRendererChange: function (a) {
                            var c = a.renderer,
                                d = c instanceof b;
                            this.heatmapRenderer ? d ? this.heatmapRenderer = c : this._removeRenderer(a) : d && (this.heatmapRenderer = c, this.sourceLayer && this.map && this._setupRenderer())
                        },
                        _handleOpacityChange: function (a) {
                            a = a.opacity;
                            var b = this._getImageBySourceId(this.sourceLayer.id);
                            b && b.setOpacity(a)
                        },
                        _setupRenderer: function () {
                            var b = this._hndls,
                                c = this.sourceLayer,
                                d = this.map,
                                e = this;
                            c._originalDraw = c._draw;
                            c._draw = t;
                            c._div.clear();
                            clearTimeout(this._resetTimer);
                            this._resetTimer =
                                setTimeout(this._resetGraphics.bind(this), 250);
                            b.push(c.on("update-end", this._setupDraw));
                            b.push(c.on("suspend", function (a) {
                                (a = e._getImageBySourceId(e.sourceLayer.id)) && a.hide()
                            }));
                            b.push(c.on("resume", function (a) {
                                (a = e._getImageBySourceId(e.sourceLayer.id)) && a.show()
                            }));
                            b.push(a.after(c, "redraw", this._setupDraw));
                            b.push(d.on("layer-remove", function (a) {
                                a.layer == c && ((a = e._getImageBySourceId(e.sourceLayer.id)) && e.imageLayer.removeImage(a), e._removeRenderer({
                                    target: c
                                }))
                            }));
                            c._collection && b.push(c.on("graphic-add",
                                function (a) {
                                    e._reprojectFeature(a.graphic);
                                    e._setupDraw()
                                }));
                            1 !== c.mode && (b.push(d.on("resize, pan-end", this._setupDraw)), b.push(d.on("zoom-end", this._setupDraw)));
                            b.push(c.on("opacity-change", this._handleOpacityChange));
                            this.imageLayer.suspended && this.imageLayer.resume();
                            c.graphics && c.graphics.length && (c.graphics[0].geometry && !d.spatialReference.equals(c.graphics[0].geometry.spatialReference) && g.forEach(c.graphics, function (a) {
                                this._reprojectFeature(a)
                            }.bind(this)), this._setupDraw())
                        },
                        _setupDraw: function () {
                            if (!this._drawTimer) {
                                var a =
                                    this;
                                this._drawTimer = setTimeout(function () {
                                    clearTimeout(a._drawTimer);
                                    a._drawTimer = null;
                                    a.sourceLayer._getRenderer().isInstanceOf(b) && a.recalculateHeatmap()
                                }, 16)
                            }
                        },
                        _removeRenderer: function (a) {
                            var b = a.target;
                            b._draw = b._originalDraw;
                            delete b._originalDraw;
                            b.setDrawMode(!0);
                            this._removeHandlers();
                            this._hndls = [];
                            var c = this._getImageBySourceId(this.sourceLayer.id);
                            c && this.imageLayer.removeImage(c);
                            clearTimeout(this._drawTimer);
                            clearTimeout(this._resetTimer);
                            this._drawTimer = this._resetTimer = null;
                            b.renderer !=
                                a.renderer && b.renderer.getRendererInfo ? this.heatmapRenderer = null : (b.redraw(), this.destroy())
                        },
                        recalculateHeatmap: function () {
                            this._calculator ? this._doMainCalculation() : this._calculatorClient && this._doWorkerCalculation()
                        },
                        _reprojectFeature: function (a) {
                            if (a && a.geometry) {
                                var b = a.geometry,
                                    c = this.map.spatialReference;
                                c.equals(b.spatialReference) || (b = e.project(b, c), null == b ? console.log("Unable to reproject features to map's spatial reference. Please convert feature geometry before adding to layer") : a.geometry =
                                    b)
                            }
                        },
                        _doWorkerCalculation: function () {},
                        _doMainCalculation: function () {
                            var a = this.sourceLayer,
                                b = this.map,
                                e = this.heatmapRenderer,
                                g = this.map.extent,
                                h = this.map.width,
                                l = this.map.height,
                                k = this._calculator,
                                q = this,
                                m = function (d) {
                                    d = q._getScreenPoints(d.features, b, a);
                                    d = k.calculateImageData(p.mixin({
                                        screenPoints: d,
                                        mapinfo: {
                                            extent: [g.xmin, g.ymin, g.xmax, g.ymax],
                                            resolution: b.getResolution()
                                        },
                                        width: h,
                                        height: l
                                    }, q._getOptions()));
                                    d = e.getSymbol(s({
                                        geometry: b.extent,
                                        attributes: {
                                            size: [h, l],
                                            imageData: d
                                        },
                                        layer: a
                                    }));
                                    d = new c({
                                        extent: b.extent,
                                        href: d.url,
                                        opacity: 0,
                                        sourceId: a.id
                                    });
                                    q._swapMapImages(d, q._getImageBySourceId(a.id));
                                    a.suspended && d.hide()
                                },
                                r = {
                                    geometry: b.extent,
                                    timeExtent: a.useMapTime ? b.timeExtent : void 0,
                                    spatialRelationship: d.SPATIAL_REL_INTERSECTS
                                };
                            null != a._canDoClientSideQuery(r) ? a.queryFeatures(r, m) : m({
                                features: a.graphics
                            })
                        },
                        _getScreenPoints: function (a, b, c) {
                            var d = [],
                                e = a.length,
                                h = 0,
                                k = 0,
                                p, q = new l(b.extent.xmin, b.extent.ymax, b.spatialReference),
                                m = b.toScreen(q),
                                r = m.x,
                                m = m.y,
                                s = b.getResolution(),
                                t;
                            for ((k = b.extent.getCacheValue("_parts")) &&
                                (t = g.map(k, function (a) {
                                    return c._intersects(b, a.extent)[0]
                                })); e--;) k = a[e], k.geometry && (p = {
                                x: Math.ceil((k.geometry.x - q.x) / s + r),
                                y: Math.floor((q.y - k.geometry.y) / s - m),
                                attributes: k.attributes
                            }, t && (k = 1 < t.length && p.x < -t[0] ? t[1] : t[0], p.x += k), d[h++] = p);
                            return d
                        },
                        _getImageBySourceId: function (a) {
                            var b = this.imageLayer.getImages(),
                                b = g.filter(b, function (b) {
                                    return b.sourceId == a
                                });
                            if (b.length) return b[b.length - 1]
                        },
                        _swapMapImages: function (a, b) {
                            function c() {
                                d.removeImage(b)
                            }
                            var d = this.imageLayer,
                                e = this.sourceLayer.opacity ||
                                1;
                            d.addImage(a);
                            m.anim(a._node, {
                                opacity: e
                            }, null, null, function () {
                                a.opacity = e
                            });
                            null != b && m.anim(b._node, {
                                opacity: 0
                            }, null, null, c)
                        },
                        _removeHandlers: function () {
                            if (null != this._hndls)
                                for (var a = this._hndls.length; a--;) this._hndls[a].remove()
                        },
                        _getOptions: function () {
                            var a = this.heatmapRenderer;
                            return {
                                blurRadius: a.blurRadius,
                                gradient: a.gradient,
                                maxPixelIntensity: a.maxPixelIntensity,
                                minPixelIntensity: a.minPixelIntensity,
                                field: a.field,
                                fieldOffset: a.fieldOffset
                            }
                        },
                        _resetGraphics: function () {
                            clearTimeout(this._resetTimer);
                            this._resetTimer = null;
                            for (var a = this.sourceLayer.graphics, b = a.length, c; b--;) c = a[b], c._shape = c._offsets = void 0
                        }
                    });
                    k("extend-esri") && p.setObject("layers.HeatmapManager", r, h);
                    return r
                })
        },
        "esri/dijit/PopupTemplate": function () {
            define("dojo/_base/declare dojo/_base/lang dojo/has dojo/dom-construct ../kernel ../InfoTemplate ../PopupInfo ./PopupRenderer".split(" "), function (r, p, a, g, q, h, k, l) {
                r = r([h, k], {
                    declaredClass: "esri.dijit.PopupTemplate",
                    "-chains-": {
                        constructor: "manual"
                    },
                    chartTheme: null,
                    constructor: function (a,
                        c) {
                        p.mixin(this, c);
                        this.initialize(a, c)
                    },
                    getTitle: function (a) {
                        var c;
                        this.info && (c = this.titleHasRelatedFields ? "" : this._getPopupValues(a, !0).title);
                        return c || ""
                    },
                    getContent: function (a) {
                        return this.info ? (new l({
                            template: this,
                            graphic: a,
                            chartTheme: this.chartTheme
                        }, g.create("div"))).domNode : ""
                    }
                });
                a("extend-esri") && p.setObject("dijit.PopupTemplate", r, q);
                return r
            })
        },
        "esri/PopupInfo": function () {
            define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/i18n dojo/has dojo/Deferred dojo/sniff dojo/promise/all ./lang ./kernel ./request ./tasks/query ./tasks/QueryTask ./tasks/StatisticDefinition dojo/i18n!dojo/cldr/nls/number".split(" "),
                function (r, p, a, g, q, h, k, l, e, c, b, d, m, t, s, n) {
                    r = r(null, {
                        declaredClass: "esri.PopupInfo",
                        initialize: function (b, c) {
                            if (b) {
                                p.mixin(this, c);
                                this.info = b;
                                this.title = this.getTitle;
                                this.content = this.getContent;
                                var d = this._fieldLabels = {},
                                    e = this._fieldsMap = {};
                                b.fieldInfos && a.forEach(b.fieldInfos, function (a) {
                                    var b = a.fieldName.toLowerCase();
                                    d[b] = a.label;
                                    e[b] = a
                                });
                                this._relatedFieldPrefix = "relationships/";
                                this.titleHasRelatedFields = !!(b.title && -1 !== b.title.indexOf("{" + this._relatedFieldPrefix))
                            }
                        },
                        toJson: function () {
                            return g.fromJson(g.toJson(this.info))
                        },
                        getTitle: function () {},
                        getContent: function () {},
                        getFieldInfo: function (b) {
                            var c;
                            a.some(this.info && this.info.fieldInfos, function (a) {
                                a.fieldName === b && (c = a);
                                return !!c
                            });
                            return c
                        },
                        getComponents: function (b) {
                            var c = this.info,
                                d = new k,
                                e, g;
                            c.fieldInfos && (g = a.filter(c.fieldInfos, function (a) {
                                return -1 !== a.fieldName.indexOf(this._relatedFieldPrefix)
                            }, this));
                            g && 0 < g.length && (e = this._getRelatedRecords({
                                graphic: b,
                                fieldsInfo: g
                            }));
                            e ? e.always(p.hitch(this, function () {
                                d.resolve(this._getPopupValues(b))
                            })) : d.resolve(this._getPopupValues(b));
                            return d.promise
                        },
                        getAttachments: function (a) {
                            var b = a.getLayer();
                            a = a.attributes;
                            if (this.info.showAttachments && (b && b.hasAttachments && b.objectIdField) && (a = a && a[b.objectIdField])) return b.queryAttachmentInfos(a)
                        },
                        _getPopupValues: function (b, d) {
                            var e = this.info,
                                g = b.getLayer(),
                                h = p.clone(b.attributes) || {},
                                n = p.clone(h),
                                l = e.fieldInfos,
                                k = "",
                                q = "",
                                m, r, s, t, Q, R = g && g._getDateOpts && g._getDateOpts().properties,
                                R = R && R.slice(0),
                                G = {
                                    dateFormat: {
                                        properties: R,
                                        formatter: "DateFormat" + this._insertOffset(this._dateFormats.shortDateShortTime)
                                    }
                                };
                            if (this._relatedInfo)
                                for (t in this._relatedInfo)
                                    if (this._relatedInfo.hasOwnProperty(t)) {
                                        var I = this._relatedInfo[t],
                                            P = this._relatedLayersInfo[t];
                                        I && (a.forEach(I.relatedFeatures, function (a) {
                                            for (Q in a.attributes)
                                                if (a.attributes.hasOwnProperty(Q) && "esriRelCardinalityOneToOne" === P.relation.cardinality) {
                                                    var b = this._toRelatedFieldName([P.relation.id, Q]);
                                                    h[b] = n[b] = a.attributes[Q]
                                                }
                                        }, this), a.forEach(I.relatedStatsFeatures, function (a) {
                                            for (Q in a.attributes)
                                                if (a.attributes.hasOwnProperty(Q)) {
                                                    var b = this._toRelatedFieldName([P.relation.id,
Q]);
                                                    h[b] = n[b] = a.attributes[Q]
                                                }
                                        }, this))
                                    }
                            l && a.forEach(l, function (b) {
                                r = b.fieldName;
                                var c = this._getLayerFieldInfo(g, r);
                                c && (r = b.fieldName = c.name);
                                n[r] = this._formatValue(n[r], r, G);
                                R && (b.format && b.format.dateFormat) && (b = a.indexOf(R, r), -1 < b && R.splice(b, 1))
                            }, this);
                            if (g) {
                                t = g.types;
                                var K = (I = g.typeIdField) && h[I];
                                for (r in h)
                                    if (h.hasOwnProperty(r) && -1 === r.indexOf(this._relatedFieldPrefix) && (s = h[r], c.isDefined(s))) {
                                        var J = this._getDomainName(g, b, t, K, r, s);
                                        c.isDefined(J) ? n[r] = J : r === I && (J = this._getTypeName(g, b, s), c.isDefined(J) &&
                                            (n[r] = J))
                                    }
                            }
                            e.title && (k = this._processFieldsInLinks(this._fixTokens(e.title, g), h), k = p.trim(c.substitute(n, k, G) || ""));
                            if (d) return {
                                title: k
                            };
                            e.description && (q = this._processFieldsInLinks(this._fixTokens(e.description, g), h), q = p.trim(c.substitute(n, q, G) || ""));
                            l && (m = [], a.forEach(l, function (a) {
                                (r = a.fieldName) && a.visible && m.push([a.label || r, c.substitute(n, "${" + r + "}", G) || ""])
                            }));
                            var O, W;
                            e.mediaInfos && (O = [], a.forEach(e.mediaInfos, function (b) {
                                W = 0;
                                s = b.value;
                                switch (b.type) {
                                case "image":
                                    var d = s.sourceURL,
                                        d = d && p.trim(c.substitute(h,
                                            this._fixTokens(d, g)));
                                    W = !!d;
                                    break;
                                case "piechart":
                                case "linechart":
                                case "columnchart":
                                case "barchart":
                                    var e, d = s.normalizeField;
                                    s.fields = a.map(s.fields, function (a) {
                                        return (e = this._getLayerFieldInfo(g, a)) ? e.name : a
                                    }, this);
                                    d && (e = this._getLayerFieldInfo(g, d), s.normalizeField = e ? e.name : d);
                                    W = a.some(s.fields, function (a) {
                                        return c.isDefined(h[a]) || -1 !== a.indexOf(this._relatedFieldPrefix) && this._relatedInfo
                                    }, this);
                                    break;
                                default:
                                    return
                                }
                                if (W) {
                                    b = p.clone(b);
                                    s = b.value;
                                    var d = b.title ? this._processFieldsInLinks(this._fixTokens(b.title,
                                            g), h) : "",
                                        f = b.caption ? this._processFieldsInLinks(this._fixTokens(b.caption, g), h) : "";
                                    b.title = d ? p.trim(c.substitute(n, d, G) || "") : "";
                                    b.caption = f ? p.trim(c.substitute(n, f, G) || "") : "";
                                    if ("image" === b.type) s.sourceURL = c.substitute(h, this._fixTokens(s.sourceURL, g)), s.linkURL && (s.linkURL = p.trim(c.substitute(h, this._fixTokens(s.linkURL, g)) || ""));
                                    else {
                                        var l, k;
                                        a.forEach(s.fields, function (a, b) {
                                            if (-1 !== a.indexOf(this._relatedFieldPrefix)) k = this._getRelatedChartInfos(a, s, h, G), k instanceof Array ? s.fields = k : s.fields[b] =
                                                k;
                                            else {
                                                var c = h[a],
                                                    c = void 0 === c ? null : c;
                                                l = h[s.normalizeField] || 0;
                                                c && l && (c /= l);
                                                s.fields[b] = {
                                                    y: c,
                                                    tooltip: (this._fieldLabels[a.toLowerCase()] || a) + ":\x3cbr/\x3e" + this._formatValue(c, a, G, !!l)
                                                }
                                            }
                                        }, this)
                                    }
                                    O.push(b)
                                }
                            }, this));
                            return {
                                title: k,
                                description: q,
                                hasDescription: !!e.description,
                                fields: m && m.length ? m : null,
                                mediaInfos: O && O.length ? O : null,
                                formatted: n,
                                editSummary: g && g.getEditSummary ? g.getEditSummary(b) : ""
                            }
                        },
                        _getRelatedChartInfos: function (b, c, d, e) {
                            var g, h, n, l, k, p;
                            g = [];
                            p = this._fromRelatedFieldName(b);
                            k = p[0];
                            h = this._relatedInfo[k];
                            k = this._relatedLayersInfo[k];
                            h && a.forEach(h.relatedFeatures, function (a) {
                                a = a.attributes;
                                var h, k;
                                for (k in a)
                                    if (a.hasOwnProperty(k) && k === p[1]) {
                                        h = {};
                                        l = a[k];
                                        c.normalizeField && (n = -1 !== c.normalizeField.indexOf(this._relatedFieldPrefix) ? a[this._fromRelatedFieldName(c.normalizeField)[1]] : d[c.normalizeField]);
                                        l && n && (l /= n);
                                        if (c.tooltipField)
                                            if (-1 !== c.tooltipField.indexOf(this._relatedFieldPrefix)) {
                                                var q = this._fromRelatedFieldName(c.tooltipField)[1];
                                                h.tooltip = a[q] && "string" === typeof a[q] ? a[q] + ":\x3cbr/\x3e" +
                                                    this._formatValue(l, a[q], e, !!n) : q + ":\x3cbr/\x3e" + this._formatValue(l, q, e, !!n)
                                            } else h.tooltip = (this._fieldLabels[b.toLowerCase()] || b) + ":\x3cbr/\x3e" + this._formatValue(l, c.tooltipField, e, !!n);
                                        else h.tooltip = l;
                                        h.y = l;
                                        g.push(h)
                                    }
                            }, this);
                            return "esriRelCardinalityOneToMany" === k.relation.cardinality || "esriRelCardinalityManyToMany" === k.relation.cardinality ? g : g[0]
                        },
                        _dateFormats: {
                            shortDate: "(datePattern: 'M/d/y', selector: 'date')",
                            shortDateLE: "(datePattern: 'd/M/y', selector: 'date')",
                            longMonthDayYear: "(datePattern: 'MMMM d, y', selector: 'date')",
                            dayShortMonthYear: "(datePattern: 'd MMM y', selector: 'date')",
                            longDate: "(datePattern: 'EEEE, MMMM d, y', selector: 'date')",
                            shortDateShortTime: "(datePattern: 'M/d/y', timePattern: 'h:mm a', selector: 'date and time')",
                            shortDateLEShortTime: "(datePattern: 'd/M/y', timePattern: 'h:mm a', selector: 'date and time')",
                            shortDateShortTime24: "(datePattern: 'M/d/y', timePattern: 'H:mm', selector: 'date and time')",
                            shortDateLEShortTime24: "(datePattern: 'd/M/y', timePattern: 'H:mm', selector: 'date and time')",
                            shortDateLongTime: "(datePattern: 'M/d/y', timePattern: 'h:mm:ss a', selector: 'date and time')",
                            shortDateLELongTime: "(datePattern: 'd/M/y', timePattern: 'h:mm:ss a', selector: 'date and time')",
                            shortDateLongTime24: "(datePattern: 'M/d/y', timePattern: 'H:mm:ss', selector: 'date and time')",
                            shortDateLELongTime24: "(datePattern: 'd/M/y', timePattern: 'H:mm:ss', selector: 'date and time')",
                            longMonthYear: "(datePattern: 'MMMM y', selector: 'date')",
                            shortMonthYear: "(datePattern: 'MMM y', selector: 'date')",
                            year: "(datePattern: 'y', selector: 'date')"
                        },
                        _reHref: /href\s*=\s*\"([^\"]+)\"/ig,
                        _reHrefApos: /href\s*=\s*\'([^\']+)\'/ig,
                        _fixTokens: function (a, b) {
                            var c = this;
                            return a.replace(/(\{([^\{\r\n]+)\})/g, function (a, d, e) {
                                a = c._getLayerFieldInfo(b, e);
                                return "$" + (a ? "{" + a.name + "}" : d)
                            })
                        },
                        _encodeAttributes: function (a) {
                            a = p.clone(a) || {};
                            var b, c;
                            for (b in a)
                                if ((c = a[b]) && "string" === typeof c) c = encodeURIComponent(c).replace(/\'/g, "\x26apos;"), a[b] = c;
                            return a
                        },
                        _processFieldsInLinks: function (a, b) {
                            var c = this._encodeAttributes(b),
                                d = this;
                            a && (a = a.replace(this._reHref, function (a, e) {
                                return d._addValuesToHref(a, e, b, c)
                            }).replace(this._reHrefApos, function (a, e) {
                                return d._addValuesToHref(a, e, b, c)
                            }));
                            return a
                        },
                        _addValuesToHref: function (a, b, d, e) {
                            b = b && p.trim(b);
                            return c.substitute(b && 0 === b.indexOf("${") ? d : e, a)
                        },
                        _getLayerFieldInfo: function (a, b) {
                            return a && a.getField ? a.getField(b) : null
                        },
                        _formatValue: function (b, d, e, g) {
                            var h = this._fieldsMap[d.toLowerCase()],
                                l = h && h.format;
                            d = -1 !== a.indexOf(e.dateFormat.properties, d);
                            var k = "number" === typeof b &&
                                !d && (!l || !l.dateFormat);
                            if (!c.isDefined(b) || !h || !c.isDefined(l)) return k ? this._forceLTR(b) : b;
                            var q = "",
                                h = [],
                                m = l.hasOwnProperty("places") || l.hasOwnProperty("digitSeparator"),
                                r = l.hasOwnProperty("digitSeparator") ? l.digitSeparator : !0;
                            if (m && !d) q = "NumberFormat", h.push("places: " + (c.isDefined(l.places) && (!g || 0 < l.places) ? Number(l.places) : "Infinity")), h.length && (q += "(" + h.join(",") + ")");
                            else if (l.dateFormat) q = "DateFormat" + this._insertOffset(this._dateFormats[l.dateFormat] || this._dateFormats.shortDateShortTime);
                            else return k ? this._forceLTR(b) : b;
                            var s = this._applyFormatting(b, q, e);
                            m && -1 < b.constructor.toString().indexOf("Array") && (s = "", a.forEach(b, p.hitch(this, function (a, b) {
                                b && (s += " ");
                                s += this._applyFormatting(a, q, e)
                            })));
                            m && !r && n.group && (s = s.replace(RegExp("\\" + n.group, "g"), ""));
                            d && (s = '\x3cspan class\x3d"esriDateValue"\x3e' + s + "\x3c/span\x3e");
                            return k ? this._forceLTR(s) : s
                        },
                        _applyFormatting: function (a, b, d) {
                            return c.substitute({
                                myKey: a
                            }, "${myKey:" + b + "}", d) || ""
                        },
                        _forceLTR: function (a) {
                            var b = l("ie");
                            return b && 10 >=
                                b ? a : "\x3cspan class\x3d'esriNumericValue'\x3e" + a + "\x3c/span\x3e"
                        },
                        _insertOffset: function (a) {
                            a && (a = c.isDefined(this.utcOffset) ? a.replace(/\)\s*$/, ", utcOffset:" + this.utcOffset + ")") : a);
                            return a
                        },
                        _getDomainName: function (a, b, c, d, e, g) {
                            return (a = a.getDomain && a.getDomain(e, {
                                feature: b
                            })) && a.codedValues ? a.getName(g) : null
                        },
                        _getTypeName: function (a, b, c) {
                            return (a = a.getType && a.getType(b)) && a.name
                        },
                        _getRelatedRecords: function (a) {
                            var b = a.graphic,
                                c = new k,
                                d;
                            this._relatedLayersInfo ? this._queryRelatedLayers(b).then(p.hitch(this,
                                function (a) {
                                    this._setRelatedRecords(b, a);
                                    c.resolve(a)
                                }), p.hitch(this, this._handlerErrorResponse, c)) : this._getRelatedLayersInfo(a).then(p.hitch(this, function (a) {
                                for (d in a) a.hasOwnProperty(d) && a[d] && (this._relatedLayersInfo[d].relatedLayerInfo = a[d]);
                                this._queryRelatedLayers(b).then(p.hitch(this, function (a) {
                                    this._setRelatedRecords(b, a);
                                    c.resolve(a)
                                }), p.hitch(this, this._handlerErrorResponse, c))
                            }), p.hitch(this, this._handlerErrorResponse, c));
                            return c.promise
                        },
                        _getRelatedLayersInfo: function (b) {
                            var c = b.fieldsInfo,
                                g, h, l = {};
                            g = b.graphic.getLayer();
                            this._relatedLayersInfo || (this._relatedLayersInfo = {});
                            a.forEach(c, function (b) {
                                var c, d, e, f;
                                c = this._fromRelatedFieldName(b.fieldName);
                                d = c[0];
                                c = c[1];
                                d && (this._relatedLayersInfo[d] || (a.some(g.relationships, function (a) {
                                    if (a.id == d) return f = a, !0
                                }), f && (this._relatedLayersInfo[d] = {
                                    relation: f,
                                    relatedFields: [],
                                    outStatistics: []
                                })), this._relatedLayersInfo[d] && (this._relatedLayersInfo[d].relatedFields.push(c), b.statisticType && (e = new s, e.statisticType = b.statisticType, e.onStatisticField =
                                    c, e.outStatisticFieldName = c, this._relatedLayersInfo[d].outStatistics.push(e))))
                            }, this);
                            for (h in this._relatedLayersInfo) this._relatedLayersInfo.hasOwnProperty(h) && this._relatedLayersInfo[h] && (b = this._relatedLayersInfo[h].relation, b = g.url.replace(/[0-9]+$/, b.relatedTableId), this._relatedLayersInfo[h].relatedLayerUrl = b, l[h] = d({
                                url: b,
                                content: {
                                    f: "json"
                                },
                                callbackParamName: "callback"
                            }));
                            return e(l)
                        },
                        _queryRelatedLayers: function (a) {
                            var b = {},
                                c;
                            for (c in this._relatedLayersInfo) this._relatedLayersInfo.hasOwnProperty(c) &&
                                (b[c] = this._queryRelatedLayer({
                                    graphic: a,
                                    relatedInfo: this._relatedLayersInfo[c]
                                }));
                            return e(b)
                        },
                        _queryRelatedLayer: function (b) {
                            var c, d, g, h, l, n, k, p, q, r;
                            c = b.graphic;
                            d = c.getLayer().url.match(/[0-9]+$/g)[0];
                            p = b.relatedInfo;
                            k = p.relatedLayerInfo;
                            q = p.relatedLayerUrl;
                            r = p.relation;
                            a.some(k.relationships, function (a) {
                                if (a.relatedTableId === parseInt(d, 10)) return g = a, !0
                            }, this);
                            g && (b = new m, a.some(k.fields, function (b) {
                                if (b.name === g.keyField) return l = -1 !== a.indexOf(["esriFieldTypeSmallInteger", "esriFieldTypeInteger",
"esriFieldTypeSingle", "esriFieldTypeDouble"], b.type) ? "number" : "string", !0
                            }), h = "string" === l ? g.keyField + "\x3d'" + c.attributes[r.keyField] + "'" : g.keyField + "\x3d" + c.attributes[r.keyField], b.where = h, b.outFields = p.relatedFields, p.outStatistics && (0 < p.outStatistics.length && k.supportsStatistics) && (n = new m, n.where = b.where, n.outFields = b.outFields, n.outStatistics = p.outStatistics), c = new t(q), h = [], h.push(c.execute(b)), n && h.push(c.execute(n)));
                            return e(h)
                        },
                        _setRelatedRecords: function (a, b) {
                            this._relatedInfo = [];
                            for (var d in b)
                                if (b.hasOwnProperty(d) &&
                                    b[d]) {
                                    var e = b[d];
                                    this._relatedInfo[d] = {};
                                    this._relatedInfo[d].relatedFeatures = e[0].features;
                                    c.isDefined(e[1]) && (this._relatedInfo[d].relatedStatsFeatures = e[1].features)
                                }
                        },
                        _handlerErrorResponse: function (a, b) {
                            a.reject(b)
                        },
                        _fromRelatedFieldName: function (a) {
                            var b = []; - 1 !== a.indexOf(this._relatedFieldPrefix) && (a = a.split("/"), b = a.slice(1));
                            return b
                        },
                        _toRelatedFieldName: function (a) {
                            var b = "";
                            a && 0 < a.length && (b = this._relatedFieldPrefix + a[0] + "/" + a[1]);
                            return b
                        }
                    });
                    h("extend-esri") && (b.PopupInfo = b.PopupInfoTemplate =
                        r);
                    return r
                })
        },
        "esri/dijit/PopupRenderer": function () {
            define("require dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/kernel dojo/sniff dojo/query dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style dojox/html/entities dijit/_Widget dijit/_Templated ../kernel ../urlUtils ./_EventedWidget dojo/i18n!../nls/jsapi dojo/NodeList-dom".split(" "), function (r, p, a, g, q, h, k, l, e, c, b, d, m, t, s, n, f, y, u, w) {
                var C = 0;
                p = p([u, s, n], {
                    declaredClass: "esri.dijit._PopupRenderer",
                    constructor: function () {
                        this._nls = g.mixin({}, w.widgets.popup)
                    },
                    templateString: "\x3cdiv class\x3d'esriViewPopup'\x3e\x3cdiv class\x3d'mainSection'\x3e\x3cdiv class\x3d'header' dojoAttachPoint\x3d'_title'\x3e\x3c/div\x3e\x3cdiv class\x3d'hzLine'\x3e\x3c/div\x3e\x3cdiv dojoAttachPoint\x3d'_description'\x3e\x3c/div\x3e\x3cdiv class\x3d'break'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'attachmentsSection hidden'\x3e\x3cdiv\x3e${_nls.NLS_attach}:\x3c/div\x3e\x3cul dojoAttachPoint\x3d'_attachmentsList'\x3e\x3c/ul\x3e\x3cdiv class\x3d'break'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'mediaSection hidden'\x3e\x3cdiv class\x3d'header' dojoAttachPoint\x3d'_mediaTitle'\x3e\x3c/div\x3e\x3cdiv class\x3d'hzLine'\x3e\x3c/div\x3e\x3cdiv class\x3d'caption' dojoAttachPoint\x3d'_mediaCaption'\x3e\x3c/div\x3e\x3cdiv class\x3d'gallery' dojoAttachPoint\x3d'_gallery'\x3e\x3cdiv class\x3d'mediaHandle prev' dojoAttachPoint\x3d'_prevMedia' dojoAttachEvent\x3d'onclick: _goToPrevMedia'\x3e\x3c/div\x3e\x3cdiv class\x3d'mediaHandle next' dojoAttachPoint\x3d'_nextMedia' dojoAttachEvent\x3d'onclick: _goToNextMedia'\x3e\x3c/div\x3e\x3cul class\x3d'summary'\x3e\x3cli class\x3d'image mediaCount hidden' dojoAttachPoint\x3d'_imageCount'\x3e0\x3c/li\x3e\x3cli class\x3d'image mediaIcon hidden'\x3e\x3c/li\x3e\x3cli class\x3d'chart mediaCount hidden' dojoAttachPoint\x3d'_chartCount'\x3e0\x3c/li\x3e\x3cli class\x3d'chart mediaIcon hidden'\x3e\x3c/li\x3e\x3c/ul\x3e\x3cdiv class\x3d'frame' dojoAttachPoint\x3d'_mediaFrame'\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'editSummarySection hidden' dojoAttachPoint\x3d'_editSummarySection'\x3e\x3cdiv class\x3d'break'\x3e\x3c/div\x3e\x3cdiv class\x3d'break hidden' dojoAttachPoint\x3d'_mediaBreak'\x3e\x3c/div\x3e\x3cdiv class\x3d'editSummary' dojoAttachPoint\x3d'_editSummary'\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e",
                    showTitle: !0,
                    startup: function () {
                        this.inherited(arguments);
                        this.template.getComponents(this.graphic).then(g.hitch(this, this._handleComponentsSuccess), g.hitch(this, this._handleComponentsError))
                    },
                    destroy: function () {
                        this._dfd && this._dfd.cancel();
                        this._destroyFrame();
                        this.template = this.graphic = this._nls = this._mediaInfos = this._mediaPtr = this._dfd = null;
                        this.inherited(arguments)
                    },
                    _goToPrevMedia: function () {
                        0 > this._mediaPtr - 1 || (this._mediaPtr--, this._updateUI(), this._displayMedia())
                    },
                    _goToNextMedia: function () {
                        this._mediaPtr +
                            1 !== this._mediaInfos.length && (this._mediaPtr++, this._updateUI(), this._displayMedia())
                    },
                    _updateUI: function () {
                        var a = this._mediaInfos,
                            d = a.length,
                            e = this.domNode,
                            f = this._prevMedia,
                            g = this._nextMedia;
                        if (1 < d) {
                            var l = 0,
                                n = 0;
                            q.forEach(a, function (a) {
                                "image" === a.type ? l++ : -1 !== a.type.indexOf("chart") && n++
                            });
                            l && (c.set(this._imageCount, "innerHTML", l), h.query(".summary .image", e).removeClass("hidden"));
                            n && (c.set(this._chartCount, "innerHTML", n), h.query(".summary .chart", e).removeClass("hidden"))
                        } else h.query(".summary",
                            e).addClass("hidden"), b.add(f, "hidden"), b.add(g, "hidden");
                        a = this._mediaPtr;
                        0 === a ? b.add(f, "hidden") : b.remove(f, "hidden");
                        a === d - 1 ? b.add(g, "hidden") : b.remove(g, "hidden");
                        this._destroyFrame()
                    },
                    _displayMedia: function () {
                        var a = this._mediaInfos[this._mediaPtr],
                            d = a.title,
                            e = a.caption,
                            f = h.query(".mediaSection .hzLine", this.domNode)[0];
                        c.set(this._mediaTitle, "innerHTML", d);
                        b[d ? "remove" : "add"](this._mediaTitle, "hidden");
                        c.set(this._mediaCaption, "innerHTML", e);
                        b[e ? "remove" : "add"](this._mediaCaption, "hidden");
                        b[d &&
                            e ? "remove" : "add"](f, "hidden");
                        this._rid = null;
                        if ("image" === a.type) this._showImage(a.value);
                        else {
                            var l = this,
                                d = ["dojox/charting/Chart2D", "dojox/charting/action2d/Tooltip"],
                                e = a.value.theme || this.chartTheme;
                            g.isString(e) && (e = e.replace(/\./gi, "/"), -1 === e.indexOf("/") && (e = "dojox/charting/themes/" + e));
                            e || (e = "./Rainbow");
                            d.push(e);
                            try {
                                var n = this._rid = C++;
                                r(d, function (b, c, d) {
                                    n === l._rid && (l._rid = null, l._showChart(a.type, a.value, b, c, d))
                                })
                            } catch (k) {
                                console.log("PopupRenderer: error loading modules")
                            }
                        }
                    },
                    _preventNewTab: function (a) {
                        return (a =
                            a && g.trim(a).toLowerCase()) && (0 === a.indexOf("mailto:") || 0 === a.indexOf("tel:"))
                    },
                    _showImage: function (c) {
                        b.add(this._mediaFrame, "image");
                        var e = m.get(this._gallery, "height"),
                            f;
                        c.linkURL && (f = d.create("a", {
                            href: c.linkURL,
                            target: this._preventNewTab(c.linkURL) ? "" : "_blank"
                        }, this._mediaFrame));
                        d.create("img", {
                            className: "esriPopupMediaImage",
                            src: c.sourceURL
                        }, f || this._mediaFrame);
                        var g = h.query(".esriPopupMediaImage", this._mediaFrame)[0],
                            l = this,
                            n;
                        n = a.connect(g, "onload", function () {
                            a.disconnect(n);
                            n = null;
                            l._imageLoaded(g,
                                e)
                        })
                    },
                    _showChart: function (a, c, e, f, g) {
                        b.remove(this._mediaFrame, "image");
                        e = this._chart = new e(d.create("div", {
                            "class": "chart"
                        }, this._mediaFrame), {
                            margins: {
                                l: 4,
                                t: 4,
                                r: 4,
                                b: 4
                            }
                        });
                        g && e.setTheme(g);
                        switch (a) {
                        case "piechart":
                            e.addPlot("default", {
                                type: "Pie",
                                labels: !1
                            });
                            e.addSeries("Series A", c.fields);
                            break;
                        case "linechart":
                            e.addPlot("default", {
                                type: "Markers"
                            });
                            e.addAxis("x", {
                                min: 0,
                                majorTicks: !1,
                                minorTicks: !1,
                                majorLabels: !1,
                                minorLabels: !1
                            });
                            e.addAxis("y", {
                                includeZero: !0,
                                vertical: !0,
                                fixUpper: "minor"
                            });
                            q.forEach(c.fields,
                                function (a, b) {
                                    a.x = b + 1
                                });
                            e.addSeries("Series A", c.fields);
                            break;
                        case "columnchart":
                            e.addPlot("default", {
                                type: "Columns",
                                gap: 3
                            });
                            e.addAxis("y", {
                                includeZero: !0,
                                vertical: !0,
                                fixUpper: "minor"
                            });
                            e.addSeries("Series A", c.fields);
                            break;
                        case "barchart":
                            e.addPlot("default", {
                                type: "Bars",
                                gap: 3
                            }), e.addAxis("x", {
                                includeZero: !0,
                                fixUpper: "minor",
                                minorLabels: !1
                            }), e.addAxis("y", {
                                vertical: !0,
                                majorTicks: !1,
                                minorTicks: !1,
                                majorLabels: !1,
                                minorLabels: !1
                            }), e.addSeries("Series A", c.fields)
                        }
                        this._action = new f(e);
                        e.render()
                    },
                    _destroyFrame: function () {
                        this._rid = null;
                        this._chart && (this._chart.destroy(), this._chart = null);
                        this._action && (this._action.destroy(), this._action = null);
                        c.set(this._mediaFrame, "innerHTML", "")
                    },
                    _imageLoaded: function (a, b) {
                        var c = a.height;
                        c < b && (c = Math.round((b - c) / 2), m.set(a, "marginTop", c + "px"))
                    },
                    _attListHandler: function (a, b) {
                        if (a === this._dfd) {
                            this._dfd = null;
                            var d = "";
                            !(b instanceof Error) && (b && b.length) && q.forEach(b, function (a) {
                                d += "\x3cli\x3e";
                                d += "\x3ca href\x3d'" + y.addProxy(a.url) + "' target\x3d'_blank'\x3e" +
                                    (a.name || "[No name]") + "\x3c/a\x3e";
                                d += "\x3c/li\x3e"
                            });
                            c.set(this._attachmentsList, "innerHTML", d || "\x3cli\x3e" + this._nls.NLS_noAttach + "\x3c/li\x3e")
                        }
                    },
                    _handleComponentsSuccess: function (a) {
                        if (a) {
                            var d = this.showTitle ? a.title : "",
                                f = a.description,
                                l = a.fields,
                                n = a.mediaInfos,
                                k = this.domNode,
                                p = this._nls,
                                m = this,
                                r = this.template,
                                s = this.graphic;
                            this._prevMedia.title = p.NLS_prevMedia;
                            this._nextMedia.title = p.NLS_nextMedia;
                            c.set(this._title, "innerHTML", d);
                            d || b.add(this._title, "hidden");
                            !a.hasDescription && l && (f = "", q.forEach(l,
                                function (a) {
                                    f += "\x3ctr valign\x3d'top'\x3e";
                                    f += "\x3ctd class\x3d'attrName'\x3e" + t.encode(a[0]) + "\x3c/td\x3e";
                                    f += "\x3ctd class\x3d'attrValue'\x3e" + a[1].replace(/^\s*(https?:\/\/[^\s]+)\s*$/i, "\x3ca target\x3d'_blank' href\x3d'$1' title\x3d'$1'\x3e" + p.NLS_moreInfo + "\x3c/a\x3e") + "\x3c/td\x3e";
                                    f += "\x3c/tr\x3e"
                                }), f && (f = "\x3ctable class\x3d'attrTable' cellpadding\x3d'0px' cellspacing\x3d'0px'\x3e" + f + "\x3c/table\x3e"));
                            c.set(this._description, "innerHTML", f);
                            f || b.add(this._description, "hidden");
                            h.query("a",
                                this._description).forEach(function (a) {
                                m._preventNewTab(a.href) ? "_blank" === a.target && c.remove(a, "target") : c.set(a, "target", "_blank")
                            });
                            d && f ? h.query(".mainSection .hzLine", k).removeClass("hidden") : d || f ? h.query(".mainSection .hzLine", k).addClass("hidden") : h.query(".mainSection", k).addClass("hidden");
                            if (d = this._dfd = r.getAttachments(s)) d.addBoth(g.hitch(this, this._attListHandler, d)), c.set(this._attachmentsList, "innerHTML", "\x3cli\x3e" + p.NLS_searching + "...\x3c/li\x3e"), h.query(".attachmentsSection", k).removeClass("hidden");
                            n && n.length && (h.query(".mediaSection", k).removeClass("hidden"), e.setSelectable(this._mediaFrame, !1), this._mediaInfos = n, this._mediaPtr = 0, this._updateUI(), this._displayMedia());
                            a.editSummary && (c.set(this._editSummary, "innerHTML", a.editSummary), n && n.length && b.remove(this._mediaBreak, "hidden"), b.remove(this._editSummarySection, "hidden"))
                        }
                    },
                    _handleComponentsError: function (a) {
                        console.log("PopupRenderer: error loading template", a)
                    }
                });
                k("extend-esri") && g.setObject("dijit._PopupRenderer", p, f);
                return p
            })
        },
        "dojox/html/entities": function () {
            define(["dojo/_base/lang"], function (r) {
                var p = r.getObject("dojox.html.entities", !0),
                    a = function (a, g) {
                        var k, l;
                        if (g._encCache && g._encCache.regexp && g._encCache.mapper && g.length == g._encCache.length) k = g._encCache.mapper, l = g._encCache.regexp;
                        else {
                            k = {};
                            l = ["["];
                            var e;
                            for (e = 0; e < g.length; e++) k[g[e][0]] = "\x26" + g[e][1] + ";", l.push(g[e][0]);
                            l.push("]");
                            l = RegExp(l.join(""), "g");
                            g._encCache = {
                                mapper: k,
                                regexp: l,
                                length: g.length
                            }
                        }
                        return a = a.replace(l, function (a) {
                            return k[a]
                        })
                    },
                    g = function (a,
                        g) {
                        var k, l;
                        if (g._decCache && g._decCache.regexp && g._decCache.mapper && g.length == g._decCache.length) k = g._decCache.mapper, l = g._decCache.regexp;
                        else {
                            k = {};
                            l = ["("];
                            var e;
                            for (e = 0; e < g.length; e++) {
                                var c = "\x26" + g[e][1] + ";";
                                e && l.push("|");
                                k[c] = g[e][0];
                                l.push(c)
                            }
                            l.push(")");
                            l = RegExp(l.join(""), "g");
                            g._decCache = {
                                mapper: k,
                                regexp: l,
                                length: g.length
                            }
                        }
                        return a = a.replace(l, function (a) {
                            return k[a]
                        })
                    };
                p.html = [["\x26", "amp"], ['"', "quot"], ["\x3c", "lt"], ["\x3e", "gt"], ["\u00a0", "nbsp"]];
                p.latin = [["\u00a1", "iexcl"], ["\u00a2",
"cent"], ["\u00a3", "pound"], ["\u20ac", "euro"], ["\u00a4", "curren"], ["\u00a5", "yen"], ["\u00a6", "brvbar"], ["\u00a7", "sect"], ["\u00a8", "uml"], ["\u00a9", "copy"], ["\u00aa", "ordf"], ["\u00ab", "laquo"], ["\u00ac", "not"], ["\u00ad", "shy"], ["\u00ae", "reg"], ["\u00af", "macr"], ["\u00b0", "deg"], ["\u00b1", "plusmn"], ["\u00b2", "sup2"], ["\u00b3", "sup3"], ["\u00b4", "acute"], ["\u00b5", "micro"], ["\u00b6", "para"], ["\u00b7", "middot"], ["\u00b8", "cedil"], ["\u00b9", "sup1"], ["\u00ba", "ordm"], ["\u00bb", "raquo"], ["\u00bc", "frac14"],
["\u00bd", "frac12"], ["\u00be", "frac34"], ["\u00bf", "iquest"], ["\u00c0", "Agrave"], ["\u00c1", "Aacute"], ["\u00c2", "Acirc"], ["\u00c3", "Atilde"], ["\u00c4", "Auml"], ["\u00c5", "Aring"], ["\u00c6", "AElig"], ["\u00c7", "Ccedil"], ["\u00c8", "Egrave"], ["\u00c9", "Eacute"], ["\u00ca", "Ecirc"], ["\u00cb", "Euml"], ["\u00cc", "Igrave"], ["\u00cd", "Iacute"], ["\u00ce", "Icirc"], ["\u00cf", "Iuml"], ["\u00d0", "ETH"], ["\u00d1", "Ntilde"], ["\u00d2", "Ograve"], ["\u00d3", "Oacute"], ["\u00d4", "Ocirc"], ["\u00d5", "Otilde"], ["\u00d6", "Ouml"],
["\u00d7", "times"], ["\u00d8", "Oslash"], ["\u00d9", "Ugrave"], ["\u00da", "Uacute"], ["\u00db", "Ucirc"], ["\u00dc", "Uuml"], ["\u00dd", "Yacute"], ["\u00de", "THORN"], ["\u00df", "szlig"], ["\u00e0", "agrave"], ["\u00e1", "aacute"], ["\u00e2", "acirc"], ["\u00e3", "atilde"], ["\u00e4", "auml"], ["\u00e5", "aring"], ["\u00e6", "aelig"], ["\u00e7", "ccedil"], ["\u00e8", "egrave"], ["\u00e9", "eacute"], ["\u00ea", "ecirc"], ["\u00eb", "euml"], ["\u00ec", "igrave"], ["\u00ed", "iacute"], ["\u00ee", "icirc"], ["\u00ef", "iuml"], ["\u00f0", "eth"], ["\u00f1",
"ntilde"], ["\u00f2", "ograve"], ["\u00f3", "oacute"], ["\u00f4", "ocirc"], ["\u00f5", "otilde"], ["\u00f6", "ouml"], ["\u00f7", "divide"], ["\u00f8", "oslash"], ["\u00f9", "ugrave"], ["\u00fa", "uacute"], ["\u00fb", "ucirc"], ["\u00fc", "uuml"], ["\u00fd", "yacute"], ["\u00fe", "thorn"], ["\u00ff", "yuml"], ["\u0192", "fnof"], ["\u0391", "Alpha"], ["\u0392", "Beta"], ["\u0393", "Gamma"], ["\u0394", "Delta"], ["\u0395", "Epsilon"], ["\u0396", "Zeta"], ["\u0397", "Eta"], ["\u0398", "Theta"], ["\u0399", "Iota"], ["\u039a", "Kappa"], ["\u039b", "Lambda"],
["\u039c", "Mu"], ["\u039d", "Nu"], ["\u039e", "Xi"], ["\u039f", "Omicron"], ["\u03a0", "Pi"], ["\u03a1", "Rho"], ["\u03a3", "Sigma"], ["\u03a4", "Tau"], ["\u03a5", "Upsilon"], ["\u03a6", "Phi"], ["\u03a7", "Chi"], ["\u03a8", "Psi"], ["\u03a9", "Omega"], ["\u03b1", "alpha"], ["\u03b2", "beta"], ["\u03b3", "gamma"], ["\u03b4", "delta"], ["\u03b5", "epsilon"], ["\u03b6", "zeta"], ["\u03b7", "eta"], ["\u03b8", "theta"], ["\u03b9", "iota"], ["\u03ba", "kappa"], ["\u03bb", "lambda"], ["\u03bc", "mu"], ["\u03bd", "nu"], ["\u03be", "xi"], ["\u03bf", "omicron"],
["\u03c0", "pi"], ["\u03c1", "rho"], ["\u03c2", "sigmaf"], ["\u03c3", "sigma"], ["\u03c4", "tau"], ["\u03c5", "upsilon"], ["\u03c6", "phi"], ["\u03c7", "chi"], ["\u03c8", "psi"], ["\u03c9", "omega"], ["\u03d1", "thetasym"], ["\u03d2", "upsih"], ["\u03d6", "piv"], ["\u2022", "bull"], ["\u2026", "hellip"], ["\u2032", "prime"], ["\u2033", "Prime"], ["\u203e", "oline"], ["\u2044", "frasl"], ["\u2118", "weierp"], ["\u2111", "image"], ["\u211c", "real"], ["\u2122", "trade"], ["\u2135", "alefsym"], ["\u2190", "larr"], ["\u2191", "uarr"], ["\u2192", "rarr"],
["\u2193", "darr"], ["\u2194", "harr"], ["\u21b5", "crarr"], ["\u21d0", "lArr"], ["\u21d1", "uArr"], ["\u21d2", "rArr"], ["\u21d3", "dArr"], ["\u21d4", "hArr"], ["\u2200", "forall"], ["\u2202", "part"], ["\u2203", "exist"], ["\u2205", "empty"], ["\u2207", "nabla"], ["\u2208", "isin"], ["\u2209", "notin"], ["\u220b", "ni"], ["\u220f", "prod"], ["\u2211", "sum"], ["\u2212", "minus"], ["\u2217", "lowast"], ["\u221a", "radic"], ["\u221d", "prop"], ["\u221e", "infin"], ["\u2220", "ang"], ["\u2227", "and"], ["\u2228", "or"], ["\u2229", "cap"], ["\u222a", "cup"],
["\u222b", "int"], ["\u2234", "there4"], ["\u223c", "sim"], ["\u2245", "cong"], ["\u2248", "asymp"], ["\u2260", "ne"], ["\u2261", "equiv"], ["\u2264", "le"], ["\u2265", "ge"], ["\u2282", "sub"], ["\u2283", "sup"], ["\u2284", "nsub"], ["\u2286", "sube"], ["\u2287", "supe"], ["\u2295", "oplus"], ["\u2297", "otimes"], ["\u22a5", "perp"], ["\u22c5", "sdot"], ["\u2308", "lceil"], ["\u2309", "rceil"], ["\u230a", "lfloor"], ["\u230b", "rfloor"], ["\u2329", "lang"], ["\u232a", "rang"], ["\u25ca", "loz"], ["\u2660", "spades"], ["\u2663", "clubs"], ["\u2665",
"hearts"], ["\u2666", "diams"], ["\u0152", "OElig"], ["\u0153", "oelig"], ["\u0160", "Scaron"], ["\u0161", "scaron"], ["\u0178", "Yuml"], ["\u02c6", "circ"], ["\u02dc", "tilde"], ["\u2002", "ensp"], ["\u2003", "emsp"], ["\u2009", "thinsp"], ["\u200c", "zwnj"], ["\u200d", "zwj"], ["\u200e", "lrm"], ["\u200f", "rlm"], ["\u2013", "ndash"], ["\u2014", "mdash"], ["\u2018", "lsquo"], ["\u2019", "rsquo"], ["\u201a", "sbquo"], ["\u201c", "ldquo"], ["\u201d", "rdquo"], ["\u201e", "bdquo"], ["\u2020", "dagger"], ["\u2021", "Dagger"], ["\u2030", "permil"], ["\u2039",
"lsaquo"], ["\u203a", "rsaquo"]];
                p.encode = function (g, h) {
                    g && (h ? g = a(g, h) : (g = a(g, p.html), g = a(g, p.latin)));
                    return g
                };
                p.decode = function (a, h) {
                    a && (h ? a = g(a, h) : (a = g(a, p.html), a = g(a, p.latin)));
                    return a
                };
                return p
            })
        },
        "dijit/_Templated": function () {
            define("./_WidgetBase ./_TemplatedMixin ./_WidgetsInTemplateMixin dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/_base/kernel".split(" "), function (r, p, a, g, q, h, k) {
                h.extend(r, {
                    waiRole: "",
                    waiState: ""
                });
                return q("dijit._Templated", [p, a], {
                    constructor: function () {
                        k.deprecated(this.declaredClass +
                            ": dijit._Templated deprecated, use dijit._TemplatedMixin and if necessary dijit._WidgetsInTemplateMixin", "", "2.0")
                    },
                    _processNode: function (a, e) {
                        var c = this.inherited(arguments),
                            b = e(a, "waiRole");
                        b && a.setAttribute("role", b);
                        (b = e(a, "waiState")) && g.forEach(b.split(/\s*,\s*/), function (b) {
                            -1 != b.indexOf("-") && (b = b.split("-"), a.setAttribute("aria-" + b[0], b[1]))
                        });
                        return c
                    }
                })
            })
        },
        "dijit/_WidgetsInTemplateMixin": function () {
            define(["dojo/_base/array", "dojo/aspect", "dojo/_base/declare", "dojo/_base/lang", "dojo/parser"],
                function (r, p, a, g, q) {
                    return a("dijit._WidgetsInTemplateMixin", null, {
                        _earlyTemplatedStartup: !1,
                        contextRequire: null,
                        _beforeFillContent: function () {
                            if (/dojoType|data-dojo-type/i.test(this.domNode.innerHTML)) {
                                var a = this.domNode;
                                this.containerNode && !this.searchContainerNode && (this.containerNode.stopParser = !0);
                                q.parse(a, {
                                    noStart: !this._earlyTemplatedStartup,
                                    template: !0,
                                    inherited: {
                                        dir: this.dir,
                                        lang: this.lang,
                                        textDir: this.textDir
                                    },
                                    propsThis: this,
                                    contextRequire: this.contextRequire,
                                    scope: "dojo"
                                }).then(g.hitch(this,
                                    function (a) {
                                        this._startupWidgets = a;
                                        for (var g = 0; g < a.length; g++) this._processTemplateNode(a[g], function (a, c) {
                                            return a[c]
                                        }, function (a, c, b) {
                                            return c in a ? a.connect(a, c, b) : a.on(c, b, !0)
                                        });
                                        this.containerNode && this.containerNode.stopParser && delete this.containerNode.stopParser
                                    }));
                                if (!this._startupWidgets) throw Error(this.declaredClass + ": parser returned unfilled promise (probably waiting for module auto-load), unsupported by _WidgetsInTemplateMixin.   Must pre-load all supporting widgets before instantiation.");
                            }
                        },
                        _processTemplateNode: function (a, g, l) {
                            return g(a, "dojoType") || g(a, "data-dojo-type") ? !0 : this.inherited(arguments)
                        },
                        startup: function () {
                            r.forEach(this._startupWidgets, function (a) {
                                a && (!a._started && a.startup) && a.startup()
                            });
                            this._startupWidgets = null;
                            this.inherited(arguments)
                        }
                    })
                })
        },
        "esri/dijit/_EventedWidget": function () {
            define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/on ../Evented dijit/_WidgetBase".split(" "), function (r, p, a, g, q, h) {
                return r([h, q], {
                    _onMap: function (a) {
                        var g = this.constructor._onMap,
                            e;
                        if (!g || !g.FINAL) delete this.constructor._onMap, g = this.registerConnectEvents(), g.FINAL = !0;
                        a = a.toLowerCase();
                        g[a] ? e = this[g[a].method] : (a = this._onCamelCase(a), this[a] && (e = a));
                        return e
                    },
                    on: function (a, h) {
                        var e = this._onMap(a),
                            c = a.replace(/\-/g, ""),
                            b = "on" + c in this.domNode;
                        return e || !b ? this.inherited(arguments) : this.own(g(this.domNode, c, h))[0]
                    },
                    emit: function (a, g, e) {
                        var c, b, d, h = a.toLowerCase(),
                            q = this.constructor._onMap || this.registerConnectEvents();
                        b = this[this._onMap(h)];
                        g = g || {};
                        g.target || (g.target = this);
                        b && (q && q[h]) && (this._onObj2Arr(function () {
                            c = Array.prototype.slice.call(arguments)
                        }, q[h].argKeys)(g), d = p.mixin({}, arguments), d[2] = c, d[0] = q[h].name.replace(/^on/, ""));
                        return this.inherited(d || arguments)
                    }
                })
            })
        },
        "esri/dijit/Attribution": function () {
            define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/kernel dojo/has dojo/query dojo/dom dojo/dom-attr dojo/dom-construct dojo/dom-style dojo/dom-class dojo/dom-geometry ../kernel ../lang ../SpatialReference ../geometry/webMercatorUtils ../geometry/Extent".split(" "),
                function (r, p, a, g, q, h, k, l, e, c, b, d, m, t, s, n, f, y) {
                    r = r(null, {
                        declaredClass: "esri.dijit.Attribution",
                        itemDelimiter: " | ",
                        listClass: "esriAttributionList",
                        itemClass: "esriAttributionItem",
                        lastItemClass: "esriAttributionLastItem",
                        delimiterClass: "esriAttributionDelim",
                        constructor: function (a, b) {
                            try {
                                p.mixin(this, a);
                                this._attributions = {};
                                this._pendingDfds = {};
                                this._activeLayers = [];
                                this._sharedLayers = [];
                                var c = this.domNode = l.byId(b),
                                    d = this.map,
                                    f = "\x3cspan class\x3d'" + this.listClass + "'\x3e\x3c/span\x3e";
                                c && (e.set(c,
                                    "innerHTML", f), this.listNode = q.query(".esriAttributionList", c)[0], this.itemNodes = {});
                                this._eventConnections = [g.connect(d, "onLayerAdd", this, this._onLayerAdd), g.connect(d, "onLayerRemove", this, this._onLayerRemove), g.connect(d, "onLayerSuspend", this, this._onLayerSuspend), g.connect(d, "onLayerResume", this, this._onLayerResume), g.connect(d, "onResize", this, this._adjustFocus), g.connect(d, "onExtentChange", this, this._onExtentChange)];
                                if (d.loaded) {
                                    var h = d.layerIds.concat(d.graphicsLayerIds),
                                        n, k, m = h.length;
                                    for (k =
                                        0; k < m; k++) n = d.getLayer(h[k]), n.loaded && this._onLayerAdd(n)
                                }
                            } catch (r) {}
                        },
                        startup: function () {},
                        destroy: function () {
                            a.forEach(this._eventConnections, g.disconnect);
                            c.destroy(this.listNode);
                            this.map = this.domNode = this._eventConnections = this.listNode = this._attributions = this._pendingDfds = this.itemNodes = this._activeLayers = this._lastItem = this._sharedLayers = null
                        },
                        _onLayerAdd: function (a) {
                            try {
                                var b = this._attributions,
                                    c = a.id;
                                if (!s.isDefined(b[c]) && a.showAttribution)
                                    if (a.hasAttributionData) {
                                        var d = a.getAttributionData();
                                        this._pendingDfds[c] = 1;
                                        b[c] = d;
                                        d.addBoth(p.partial(this._onAttributionLoad, this, a))
                                    } else b[c] = a.copyright || a.copyrightText || "", b[c] ? (a.suspended || this._activeLayers.push(c), this._createNode(c)) : this._onLayerRemove(a)
                            } catch (e) {}
                        },
                        _onAttributionLoad: function (a, b, c) {
                            var d = a._attributions,
                                e = a._pendingDfds,
                                f = b.id;
                            if (e && e[f]) {
                                delete e[f];
                                if (!c || c instanceof Error) c = "";
                                d[f] = c ? a._createIndexByLevel(c, -1 !== b.declaredClass.toLowerCase().indexOf("vetiledlayer")) : b.copyright || b.copyrightText || "";
                                d[f] ? (b.suspended ||
                                    a._activeLayers.push(f), a._createNode(f)) : a._onLayerRemove(b)
                            }
                        },
                        _onLayerRemove: function (b) {
                            try {
                                var d = b.id,
                                    e = this.itemNodes,
                                    f, g = -1;
                                this._onLayerSuspend(b);
                                delete this._attributions[d];
                                delete this._pendingDfds[d];
                                f = this._getGroupIndex(d); - 1 !== f && (g = a.indexOf(this._sharedLayers[f], d), -1 !== g && (this._sharedLayers[f].splice(g, 1), 1 >= this._sharedLayers[f].length && this._sharedLayers.splice(f, 1)));
                                e[d] && -1 === g && c.destroy(e[d]);
                                delete e[d];
                                this._updateLastItem()
                            } catch (h) {}
                        },
                        _onLayerSuspend: function (b) {
                            try {
                                var c =
                                    b.id;
                                if (this._attributions[c]) {
                                    var d = a.indexOf(this._activeLayers, c),
                                        e = this.itemNodes[c]; - 1 !== d && this._activeLayers.splice(d, 1);
                                    e && this._toggleItem(e, !1, this._getGroupIndex(c))
                                }
                            } catch (f) {}
                        },
                        _adjustFocus: function () {
                            var a = this.domNode.scrollWidth > this.domNode.clientWidth,
                                b = d.contains(this.domNode, "esriAttributionOpen");
                            e.set(this.domNode, "tabIndex", a || b ? "0" : "")
                        },
                        _onLayerResume: function (b) {
                            try {
                                var c = b.id,
                                    d = this._attributions[c],
                                    f = this.itemNodes[c];
                                if (d && (-1 === a.indexOf(this._activeLayers, c) && this._activeLayers.push(c),
                                        f)) {
                                    var g = p.isString(d) ? d : this._getContributorsList(d, this.map.extent, this.map.getLevel());
                                    p.isString(d) || e.set(f, "innerHTML", g ? g + this._getDelimiter() : "");
                                    g && this._toggleItem(f, !0, this._getGroupIndex(c))
                                }
                            } catch (h) {}
                        },
                        _onExtentChange: function (a, b, c, d) {
                            try {
                                var f = this._activeLayers,
                                    g = this._attributions,
                                    h = this.itemNodes,
                                    n, l, k, q, m = f.length || 0;
                                for (q = 0; q < m; q++)
                                    if (l = f[q], k = g[l], (n = h[l]) && !p.isString(k)) {
                                        var r = this._getContributorsList(k, a, d ? d.level : -1);
                                        e.set(n, "innerHTML", r ? r + this._getDelimiter() : "");
                                        this._toggleItem(n, !!r, -1)
                                    }
                            } catch (s) {}
                            this._adjustCursorStyle()
                        },
                        _createNode: function (a) {
                            if (this.domNode) {
                                var b = this._checkShareInfo(a),
                                    d = b && b.sharedWith,
                                    d = d && this.itemNodes[d],
                                    e = this.map,
                                    f = this._attributions[a],
                                    f = p.isString(f) ? f : this._getContributorsList(f, e.extent, e.getLevel()),
                                    e = !!f && !e.getLayer(a).suspended;
                                d ? (this.itemNodes[a] = d, this._toggleItem(d, e, b.index)) : (a = this.itemNodes[a] = c.create("span", {
                                    "class": this.itemClass,
                                    innerHTML: f ? f + this._getDelimiter() : "",
                                    style: {
                                        display: e ? "inline" : "none"
                                    }
                                }, this.listNode), e && this._setLastItem(a));
                                this._adjustCursorStyle()
                            }
                        },
                        _checkShareInfo: function (b) {
                            var c = this._attributions,
                                d, e, f = -1,
                                g = c[b],
                                h;
                            if (g && p.isString(g)) {
                                for (e in c)
                                    if (d = c[e], e !== b && d && p.isString(d) && d.length === g.length && d.toLowerCase() === g.toLowerCase()) {
                                        h = e;
                                        break
                                    }
                                c = this._sharedLayers;
                                d = c.length;
                                if (h) {
                                    for (e = 0; e < d; e++)
                                        if (g = c[e], -1 !== a.indexOf(g, h)) {
                                            f = e;
                                            g.push(b);
                                            break
                                        } - 1 === f && (f = c.push([h, b]) - 1)
                                }
                            }
                            return -1 < f ? {
                                index: f,
                                sharedWith: h
                            } : null
                        },
                        _getGroupIndex: function (b) {
                            var c = this._sharedLayers,
                                d, e = c.length,
                                f = -1;
                            for (d = 0; d < e; d++)
                                if (-1 !== a.indexOf(c[d],
                                        b)) {
                                    f = d;
                                    break
                                }
                            return f
                        },
                        _getDelimiter: function () {
                            var a = this.itemDelimiter;
                            return a ? "\x3cspan class\x3d'" + this.delimiterClass + "'\x3e" + a + "\x3c/span\x3e" : ""
                        },
                        _toggleItem: function (c, d, e) {
                            if (-1 < e && !d) {
                                e = this._sharedLayers[e];
                                var f, g = e.length,
                                    h = this._activeLayers;
                                for (f = 0; f < g; f++)
                                    if (-1 !== a.indexOf(h, e[f])) return
                            }
                            b.set(c, "display", d ? "inline" : "none");
                            this._updateLastItem()
                        },
                        _updateLastItem: function () {
                            var a = this.listNode.childNodes,
                                c;
                            c = a.length;
                            var d;
                            if (c)
                                for (c -= 1; 0 <= c; c--)
                                    if (d = a[c], "none" !== b.get(d, "display")) {
                                        this._setLastItem(d);
                                        break
                                    }
                            this._adjustCursorStyle()
                        },
                        _setLastItem: function (a) {
                            var b = this.itemClass,
                                c = this.lastItemClass;
                            this._lastItem && d.replace(this._lastItem, b, c);
                            a && (d.replace(a, c, b), this._lastItem = a)
                        },
                        _createIndexByLevel: function (a, b) {
                            var c = a.contributors,
                                d, e, g, h, l = c ? c.length : 0,
                                k, p, q = new n(4326),
                                m = {},
                                r;
                            for (h = 0; h < l; h++) {
                                d = c[h];
                                p = (e = d.coverageAreas) ? e.length : 0;
                                for (k = 0; k < p; k++) {
                                    g = e[k];
                                    r = g.bbox;
                                    r = {
                                        extent: f.geographicToWebMercator(new y(r[1], r[0], r[3], r[2], q)),
                                        attribution: d.attribution || "",
                                        zoomMin: g.zoomMin - (b && g.zoomMin ?
                                            1 : 0),
                                        zoomMax: g.zoomMax - (b && g.zoomMax ? 1 : 0),
                                        score: s.isDefined(g.score) ? g.score : 100,
                                        objectId: h
                                    };
                                    for (g = r.zoomMin; g <= r.zoomMax; g++) m[g] = m[g] || [], m[g].push(r)
                                }
                            }
                            return m
                        },
                        _getContributorsList: function (a, b, c) {
                            var d = "";
                            if (b && s.isDefined(c) && -1 < c) {
                                a = a[c];
                                c = b.getCenter().normalize();
                                for (var e = a ? a.length : 0, f = [], g = {}, d = 0; d < e; d++) b = a[d], !g[b.objectId] && b.extent.contains(c) && (g[b.objectId] = 1, f.push(b));
                                f.sort(function (a, b) {
                                    return b.score - a.score || a.objectId - b.objectId
                                });
                                e = f.length;
                                for (d = 0; d < e; d++) f[d] = f[d].attribution;
                                d = f.join(", ")
                            }
                            return d
                        },
                        _adjustCursorStyle: function () {
                            var a = m.position(this.listNode.parentNode, !0).h;
                            d.contains(this.listNode.parentNode, "esriAttributionOpen") ? (d.remove(this.listNode.parentNode, "esriAttributionOpen"), a > m.position(this.listNode.parentNode, !0).h ? (b.set(this.listNode.parentNode, "cursor", "pointer"), d.add(this.listNode.parentNode, "esriAttributionOpen")) : b.set(this.listNode.parentNode, "cursor", "default")) : (d.add(this.listNode.parentNode, "esriAttributionOpen"), a < m.position(this.listNode.parentNode, !0).h ? b.set(this.listNode.parentNode, "cursor", "pointer") : b.set(this.listNode.parentNode, "cursor", "default"), d.remove(this.listNode.parentNode, "esriAttributionOpen"));
                            this._adjustFocus()
                        }
                    });
                    h("extend-esri") && p.setObject("dijit.Attribution", r, t);
                    return r
                })
        },
        "esri/arcgis/utils": function () {
            define("require dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/Deferred dojo/_base/json dojo/_base/url dojo/on dojo/DeferredList dojo/dom-construct dojo/sniff ../kernel ../config ../lang ../request ../SpatialReference ../map ../urlUtils ../geometry/ScreenPoint ../geometry/Extent ../geometry/webMercatorUtils ../symbols/jsonUtils ../renderers/jsonUtils ../dijit/PopupTemplate ../dijit/Popup ../tasks/query ../tasks/GeometryService ../layers/ArcGISTiledMapServiceLayer ../layers/FeatureLayer dojo/i18n!../nls/jsapi".split(" "),
                function (r, p, a, g, q, h, k, l, e, c, b, d, m, t, s, n, f, y, u, w, C, x, v, A, z, H, D, F, E, Q) {
                    function R(a) {
                        return s({
                            url: sa.arcgisUrl + "/" + a.itemId + "/data",
                            content: {
                                f: "json"
                            },
                            callbackParamName: "callback"
                        }, {
                            disableIdentityLookup: !0,
                            _preLookup: !0
                        })
                    }

                    function G(a, b) {
                        var c = {
                            f: "json"
                        };
                        b && (c.token = b);
                        return s({
                            url: a,
                            content: c,
                            callbackParamName: "callback"
                        }, {
                            disableIdentityLookup: !0
                        })
                    }

                    function I(a) {
                        if (a.layerDefinition && (!a.layerDefinition.drawingInfo || !a.layerDefinition.drawingInfo.labelingInfo)) a.showLabels = !1;
                        a.itemProperties.layerDefinition &&
                            (a.layerDefinition ? (a.layerDefinition.drawingInfo || (a.layerDefinition.drawingInfo = a.itemProperties.layerDefinition.drawingInfo), t.isDefined(a.layerDefinition.definitionExpression) || (a.layerDefinition.definitionExpression = a.itemProperties.layerDefinition.definitionExpression), t.isDefined(a.layerDefinition.minScale) || (a.layerDefinition.minScale = a.itemProperties.layerDefinition.minScale), t.isDefined(a.layerDefinition.maxScale) || (a.layerDefinition.maxScale = a.itemProperties.layerDefinition.maxScale)) :
                                a.layerDefinition = a.itemProperties.layerDefinition);
                        a.itemProperties.popupInfo && (!a.popupInfo && !a.disablePopup) && (a.popupInfo = a.itemProperties.popupInfo);
                        t.isDefined(a.itemProperties.showLabels) && !t.isDefined(a.showLabels) && (a.showLabels = a.itemProperties.showLabels);
                        t.isDefined(a.itemProperties.showLegend) && !t.isDefined(a.showLegend) && (a.showLegend = a.itemProperties.showLegend);
                        t.isDefined(a.itemProperties.refreshInterval) && !t.isDefined(a.refreshInterval) && (a.refreshInterval = a.itemProperties.refreshInterval)
                    }

                    function P(a) {
                        I(a);
                        a.itemProperties.layerDefinition && a.layerDefinition && (!t.isDefined(a.layerDefinition.maximumTrackPoints) && t.isDefined(a.itemProperties.layerDefinition.maximumTrackPoints) && (a.layerDefinition.maximumTrackPoints = a.itemProperties.layerDefinition.maximumTrackPoints), !a.layerDefinition.definitionGeometry && a.itemProperties.layerDefinition.definitionGeometry && (a.layerDefinition.definitionGeometry = a.itemProperties.layerDefinition.definitionGeometry));
                        a.itemProperties.purgeOptions && !a.purgeOptions &&
                            (a.purgeOptions = a.itemProperties.purgeOptions)
                    }

                    function K(b, c) {
                        var d = new q,
                            f = b.itemData,
                            g = [],
                            h = [];
                        a.forEach(f.operationalLayers, function (a) {
                            if (a.itemId && !a.type) {
                                var b = a.url.toLowerCase(); - 1 < b.indexOf("/featureserver") || -1 < b.indexOf("/mapserver/") ? (h.push(a), g.push(R(a))) : -1 < b.indexOf("/mapserver") && -1 === b.indexOf("/mapserver/") && (!a.layers || !t.isDefined(a.minScale) && !t.isDefined(a.maxScale)) ? (h.push(a), g.push(R(a))) : -1 < b.indexOf("/imageserver") && !t.isDefined(a.minScale) && !t.isDefined(a.maxScale) ?
                                    (h.push(a), g.push(R(a))) : -1 < b.indexOf("/streamserver") && (h.push(a), g.push(R(a)))
                            }
                        });
                        f.baseMap && f.baseMap.baseMapLayers && a.forEach(f.baseMap.baseMapLayers, function (a) {
                            a.itemId && "VectorTileLayer" !== a.layerType && (h.push(a), g.push(R(a)))
                        });
                        if (0 < g.length) {
                            var n = {};
                            (new e(g)).addCallback(function (c) {
                                a.forEach(h, function (b, d) {
                                    var e = c[d][1];
                                    if (e && !(e instanceof Error) && (n[b.itemId] = e, !b.type)) {
                                        var f = b.url.toLowerCase();
                                        if ((-1 < f.indexOf("/featureserver") || -1 < f.indexOf("/mapserver/")) && e.layers) a.forEach(e.layers,
                                            function (a) {
                                                if (f.match("/featureserver/" + a.id + "$") == "/featureserver/" + a.id || f.match("/mapserver/" + a.id + "$") == "/mapserver/" + a.id) b.itemProperties = a, I(b)
                                            });
                                        else if (-1 < f.indexOf("/streamserver")) b.itemProperties = e, P(b);
                                        else if (-1 < f.indexOf("/mapserver")) e.layers && !b.layers && (b.layers = e.layers), t.isDefined(e.minScale) && !t.isDefined(b.minScale) && (b.minScale = e.minScale), t.isDefined(e.maxScale) && !t.isDefined(b.maxScale) && (b.maxScale = e.maxScale), t.isDefined(e.refreshInterval) && !t.isDefined(b.refreshInterval) &&
                                            (b.refreshInterval = e.refreshInterval), e.visibleLayers && !b.visibleLayers && (b.visibleLayers = e.visibleLayers);
                                        else if (-1 < f.indexOf("/imageserver") && (t.isDefined(e.minScale) && !t.isDefined(b.minScale) && (b.minScale = e.minScale), t.isDefined(e.maxScale) && !t.isDefined(b.maxScale) && (b.maxScale = e.maxScale), t.isDefined(e.refreshInterval) && !t.isDefined(b.refreshInterval) && (b.refreshInterval = e.refreshInterval), e.popupInfo && (!b.popupInfo && !b.disablePopup) && (b.popupInfo = e.popupInfo), e.renderingRule && !b.renderingRule &&
                                                (b.renderingRule = e.renderingRule, e.renderingRule.functionName && (b.renderingRule.rasterFunction = e.renderingRule.functionName)), e.bandIds && !b.bandIds && (b.bandIds = e.bandIds), e.mosaicRule && !b.mosaicRule && (b.mosaicRule = e.mosaicRule), e.format && !b.format && (b.format = e.format), t.isDefined(e.compressionQuality) && !t.isDefined(b.compressionQuality) && (b.compressionQuality = e.compressionQuality), e.layerDefinition && e.layerDefinition.definitionExpression && (!t.isDefined(b.layerDefinition) || !t.isDefined(b.layerDefinition.definitionExpression)))) b.layerDefinition =
                                            b.layerDefinition || {}, b.layerDefinition.definitionExpression = e.layerDefinition.definitionExpression
                                    }
                                });
                                b.relatedItemsData = n;
                                d.callback(b)
                            })
                        } else d.callback(b);
                        return d
                    }

                    function J(a, b) {
                        var c = new q,
                            e = a.itemData,
                            f = e.baseMap.baseMapLayers[0];
                        if ("BingMapsAerial" === f.type || "BingMapsRoad" === f.type || "BingMapsHybrid" === f.type)
                            if (f.portalUrl && d.id) delete b.bingMapsKey, d.id.checkSignInStatus(y.urlToObject(sa.arcgisUrl).path).then(p.hitch(null, function (a, b, c, d, e) {
                                G(f.portalUrl, e.token).then(p.hitch(null, W, a,
                                    b, c, d), p.hitch(null, T, a, b, c, d))
                            }, a, b, e, c), p.hitch(null, function (a, b, c, d, e) {
                                G(f.portalUrl).then(p.hitch(null, W, a, b, c, d), p.hitch(null, T, a, b, c, d))
                            }, a, b, e, c));
                            else if (b.bingMapsKey) {
                            var h = new Ua({
                                bingMapsKey: b.bingMapsKey,
                                mapStyle: Ua.MAP_STYLE_AERIAL
                            });
                            g.connect(h, "onLoad", p.hitch(this, function () {
                                c.callback([a, b])
                            }));
                            g.connect(h, "onError", function (d) {
                                delete b.bingMapsKey;
                                a.itemData = N(e);
                                f = a.itemData.baseMap.baseMapLayers[0];
                                f.errors = [];
                                f.errors.push({
                                    message: "The owner of the application has not provided a valid Bing Key for the Bing Map it includes. Switching to Esri layers."
                                });
                                c.callback([a, b])
                            })
                        } else a.itemData = N(e), f = a.itemData.baseMap.baseMapLayers[0], f.errors = [], f.errors.push({
                            message: "The owner of the application has not provided a Bing Key for the Bing Map it includes. Switching to Esri layers."
                        }), c.callback([a, b]);
                        else c.callback([a, b]);
                        return c
                    }

                    function O(a) {
                        var b = new q,
                            c, d;
                        a = a.itemData;
                        var e = a.baseMap && a.baseMap.baseMapLayers;
                        if (Na && !Na.supported())
                            for (a = 0; a < e.length; a++) {
                                var f = e[a];
                                if (!f.isReference) {
                                    "VectorTileLayer" === f.layerType && (c = f.itemId, d = a);
                                    break
                                }
                            }
                        c ?
                            ca(c, !1).addBoth(function (a) {
                                var c = /^https?:\/\/basemaps(dev)?\.arcgis\.com\/arcgis\/rest\/services\/World_Basemap\/VectorTileServer/i;
                                a && (a.item && c.test(a.item.url)) && (e[d] = {
                                    id: "FB_" + f.id,
                                    layerType: "ArcGISTiledMapServiceLayer",
                                    opacity: "opacity" in f ? f.opacity : 1,
                                    visibility: "visibility" in f ? f.visibility : !0,
                                    url: "http://services.arcgisonline.com/arcgis/rest/services/World_Street_Map/MapServer"
                                });
                                b.resolve()
                            }) : b.resolve();
                        return b
                    }

                    function W(a, b, c, d, e) {
                        e.bingKey ? (b.bingMapsKey = e.bingKey, e = new Ua({
                            bingMapsKey: b.bingMapsKey,
                            mapStyle: Ua.MAP_STYLE_AERIAL
                        }), g.connect(e, "onLoad", p.hitch(this, function () {
                            d.callback([a, b])
                        })), g.connect(e, "onError", function (e) {
                            delete b.bingMapsKey;
                            a.itemData = N(c);
                            e = a.itemData.baseMap.baseMapLayers[0];
                            e.errors = [];
                            e.errors.push({
                                message: "The owner of the map has not provided a valid Bing Key for the Bing Map it includes. Switching to Esri layers."
                            });
                            d.callback([a, b])
                        })) : T(a, b, c, d)
                    }

                    function T(a, b, c, d) {
                        delete b.bingMapsKey;
                        a.itemData = N(c);
                        c = a.itemData.baseMap.baseMapLayers[0];
                        c.errors = [];
                        c.errors.push({
                            message: "The owner of the map has not provided a Bing Key for the Bing Map it includes. Switching to Esri layers."
                        });
                        d.callback([a, b])
                    }

                    function N(a) {
                        a.baseMap = "BingMapsAerial" === a.baseMap.baseMapLayers[0].type ? {
                            title: "Imagery",
                            baseMapLayers: [{
                                id: "World_Imagery_2017",
                                visibility: !0,
                                opacity: 1,
                                url: "http://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"
                            }]
                        } : "BingMapsRoad" === a.baseMap.baseMapLayers[0].type ? {
                            title: "Streets",
                            baseMapLayers: [{
                                id: "World_Street_Map_8421",
                                opacity: 1,
                                visibility: !0,
                                url: "http://services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer"
                            }]
                        } : {
                            title: "Imagery with Labels",
                            baseMapLayers: [{
                                id: "World_Imagery_6611",
                                opacity: 1,
                                visibility: !0,
                                url: "http://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"
                            }, {
                                id: "World_Boundaries_and_Places_1145",
                                isReference: !0,
                                opacity: 1,
                                visibility: !0,
                                url: "http://services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer"
                            }]
                        };
                        return a
                    }

                    function Y(b, c, d, e) {
                        var f = b.dynamicLayerInfos || b.layerInfos,
                            g = c.layers;
                        if (g && f)
                            if (e.usePopupManager) {
                                var h;
                                a.forEach(f, function (a) {
                                    var b = a.id;
                                    if (!a.subLayerIds)
                                        for (a =
                                            0; a < g.length; a++) {
                                            var c = g[a];
                                            if (c.id === b && c.popupInfo) {
                                                h || (h = {});
                                                h[b] = {
                                                    infoTemplate: new d(c.popupInfo),
                                                    layerUrl: c.layerUrl
                                                };
                                                break
                                            }
                                        }
                                });
                                h && b.setInfoTemplates(h)
                            } else {
                                var n = [],
                                    l = [],
                                    k = [],
                                    p = [],
                                    q = [],
                                    m = [];
                                a.forEach(f, function (c) {
                                    var d = c.id;
                                    if (!c.subLayerIds && -1 !== a.indexOf(b.visibleLayers, d))
                                        for (c = 0; c < g.length; c++) {
                                            var e = g[c];
                                            if (e.id === d) {
                                                l.push(d);
                                                n.push(e.popupInfo);
                                                k.push(e.layerUrl || "");
                                                e.layerDefinition && e.layerDefinition.definitionExpression ? p.push(e.layerDefinition.definitionExpression) : p.push("");
                                                q.push(t.isDefined(e.minScale) ? e.minScale : null);
                                                m.push(t.isDefined(e.maxScale) ? e.maxScale : null);
                                                break
                                            }
                                        }
                                });
                                n.length && (b.__popups = n, b.__popupIds = l, b.__popupUrls = k, b.__popupWhereClauses = p, b.__popupMinScales = q, b.__popupMaxScales = m, b.__resourceInfo = c.resourceInfo)
                            }
                    }

                    function Z(a) {
                        if (!a) return !1;
                        var b = (new k(sa.arcgisUrl)).authority;
                        return -1 !== a.indexOf(".arcgis.com/") || -1 !== a.indexOf(b)
                    }

                    function ga(a) {
                        return !a ? !1 : -1 !== a.indexOf("/services.arcgisonline.com/") || -1 !== a.indexOf("/server.arcgisonline.com/")
                    }

                    function aa(a) {
                        if ("https:" === location.protocol && (Z(a) || ga(a))) a = a.replace("http:", "https:");
                        return a
                    }

                    function ea(b, c, d) {
                        var e = [],
                            f;
                        b.displayLevels || (e = a.map(b.resourceInfo.tileInfo.lods, function (a) {
                            return a.level
                        }));
                        b.exclusionAreas && (f = p.clone(b.exclusionAreas), f = a.map(f, function (a) {
                            a.geometry = new w(a.geometry);
                            return a
                        }));
                        e = new F(aa(b.url), {
                            resourceInfo: b.resourceInfo,
                            opacity: b.opacity,
                            visible: b.visibility,
                            displayLevels: b.displayLevels || e,
                            id: b.id,
                            minScale: b.minScale,
                            maxScale: b.maxScale,
                            refreshInterval: b.refreshInterval,
                            exclusionAreas: f
                        });
                        d.ignorePopups || Y(e, b, c, d);
                        return e
                    }

                    function ua(a, b) {
                        if (!a || !b || 0 === b.length) return [];
                        var c = "," + b + ",",
                            d = [],
                            e, f = ",";
                        for (e = 0; e < a.length; e++)
                            if (null !== a[e].subLayerIds) {
                                if (-1 === c.indexOf("," + a[e].id + ",") || -1 < f.indexOf("," + a[e].id + ",")) f += a[e].subLayerIds.toString() + ","
                            } else -1 < c.indexOf("," + a[e].id + ",") && -1 === f.indexOf("," + a[e].id + ",") && d.push(a[e].id);
                        return d
                    }

                    function xa(b, c, d) {
                        var e = new X;
                        e.format = "png24";
                        b.resourceInfo && (b.resourceInfo.supportedImageFormatTypes && -1 < b.resourceInfo.supportedImageFormatTypes.indexOf("PNG32")) &&
                            (e.format = "png32");
                        var e = new S(aa(b.url), {
                                resourceInfo: b.resourceInfo,
                                opacity: b.opacity,
                                visible: b.visibility,
                                id: b.id,
                                imageParameters: e,
                                minScale: b.minScale,
                                maxScale: b.maxScale,
                                refreshInterval: b.refreshInterval
                            }),
                            f = b.visibleLayers;
                        if (!b.visibleLayers) {
                            var g = "";
                            a.forEach(e.layerInfos, function (a) {
                                a.defaultVisibility && (g += (0 < g.length ? "," : "") + a.id)
                            });
                            f = g
                        }
                        if (b.layers && 0 < b.layers.length) {
                            var h = [],
                                n = [],
                                l, k = [],
                                q, m;
                            a.forEach(b.layers, function (c) {
                                c.layerDefinition && c.layerDefinition.definitionExpression && (h[c.id] =
                                    c.layerDefinition.definitionExpression);
                                if (c.layerDefinition && c.layerDefinition.source) {
                                    l = null;
                                    m = c.layerDefinition.source;
                                    if ("mapLayer" === m.type) {
                                        var d = a.filter(b.resourceInfo.layers, function (a) {
                                            return a.id === m.mapLayerId
                                        });
                                        d.length && (l = p.mixin(d[0], c))
                                    } else l = p.mixin({}, c);
                                    l && (l.source = m, delete l.popupInfo, l = new ka(l), b.visibleLayers && (d = "string" == typeof b.visibleLayers ? b.visibleLayers.split(",") : b.visibleLayers, -1 < a.indexOf(d, c.id) ? l.defaultVisibility = !0 : l.defaultVisibility = !1), n.push(l))
                                }
                                c.layerDefinition &&
                                    (c.layerDefinition.source && c.layerDefinition.drawingInfo) && (q = new Hb(c.layerDefinition.drawingInfo), k[c.id] = q)
                            }, this);
                            0 < h.length && e.setLayerDefinitions(h);
                            0 < n.length ? (e.setDynamicLayerInfos(n, !0), 0 < k.length && e.setLayerDrawingOptions(k, !0)) : (f = ua(e.layerInfos, f), e.setVisibleLayers(f))
                        } else f = ua(e.layerInfos, f), e.setVisibleLayers(f);
                        d.ignorePopups || Y(e, b, c, d);
                        return e
                    }

                    function ha(a, b, c) {
                        var d = new M;
                        d.bandIds = a.bandIds;
                        null != a.format && (d.format = a.format, null != a.compressionQuality && (d.compressionQuality =
                            a.compressionQuality));
                        if (a.renderingRule && a.renderingRule.rasterFunction) {
                            var e = new yb(a.renderingRule);
                            d.renderingRule = e
                        }
                        a.mosaicRule && (e = new pb(a.mosaicRule), d.mosaicRule = e);
                        t.isDefined(a.noData) && (d.noData = a.noData);
                        t.isDefined(a.noDataInterpretation) && (d.noDataInterpretation = a.noDataInterpretation);
                        t.isDefined(a.interpolation) && (d.interpolation = a.interpolation);
                        e = a.layerType ? "ArcGISImageServiceVectorLayer" === a.layerType : !1;
                        t.isDefined(a.layerType) || (e = a.resourceInfo.hasMultidimensions && ("esriImageServiceDataTypeVector-UV" ===
                            a.resourceInfo.serviceDataType || "esriImageServiceDataTypeVector-MagDir" === a.resourceInfo.serviceDataType));
                        d = {
                            resourceInfo: a.resourceInfo,
                            opacity: a.opacity,
                            visible: a.visibility,
                            id: a.id,
                            imageServiceParameters: d,
                            minScale: a.minScale,
                            maxScale: a.maxScale,
                            refreshInterval: a.refreshInterval
                        };
                        d = e ? new B(aa(a.url), d) : new fa(aa(a.url), d);
                        a.layerDefinition && (a.layerDefinition.drawingInfo && a.layerDefinition.drawingInfo.renderer && (e = v.fromJson(a.layerDefinition.drawingInfo.renderer), d.setRenderer(e)), a.layerDefinition.definitionExpression &&
                            d.setDefinitionExpression(a.layerDefinition.definitionExpression, !0));
                        !c.ignorePopups && a.popupInfo && d.setInfoTemplate(new b(a.popupInfo));
                        return d
                    }

                    function pa(b, c, d) {
                        var e = [102113, 102100, 3857],
                            f = d || new n(c[0].layerObject.fullExtent.spatialReference),
                            g = new n(b.resourceInfo.fullExtent.spatialReference);
                        return f.wkt == g.wkt && (f.wkid == g.wkid || t.isDefined(f.latestWkid) && f.latestWkid == g.wkid || t.isDefined(g.latestWkid) && f.wkid == g.latestWkid || t.isDefined(f.latestWkid) && f.latestWkid == g.latestWkid) || f.wkid &&
                            g.wkid && a.some(e, function (a) {
                                return a === g.wkid
                            }) && a.some(e, function (a) {
                                return a === f.wkid
                            }) ? !0 : !1
                    }

                    function oa(a, b, c) {
                        if (!b[0].layerObject.tileInfo) return !1;
                        a = a.resourceInfo.tileInfo;
                        b = b[0].layerObject.tileInfo;
                        c = c.width > c.height ? c.width : c.height;
                        for (var d = !1, e = !1, f = 0; f < a.lods.length; f++) {
                            for (var g = a.lods[f].scale / a.dpi, h = 0; h < b.lods.length; h++) {
                                var n = b.lods[h].scale / b.dpi;
                                if (Math.abs(n - g) / n < 1 / c)
                                    if (d) {
                                        e = !0;
                                        break
                                    } else d = !0
                            }
                            if (e) break
                        }
                        return e || d && (1 === a.lods.length || 1 === b.lods.length) ? !0 : !1
                    }

                    function na(b,
                        c, e, f, k, q) {
                        var m, r, s = e._clazz;
                        if ("OpenStreetMap" === b.type) m = new Ib({
                            id: b.id,
                            opacity: b.opacity,
                            visible: null !== b.visibility && void 0 !== b.visibility ? b.visibility : !0
                        });
                        else if ("WFS" === b.type) f = {
                            customParameters: b.wfsInfo.customParameters,
                            geometryType: b.layerDefinition.geometryType,
                            id: b.id,
                            labelingInfo: b.layerDefinition.drawingInfo.labelingInfo,
                            maxFeatures: b.wfsInfo.maxFeatures,
                            mode: b.mode,
                            name: b.wfsInfo.name,
                            showLabels: !0,
                            swapXY: b.wfsInfo.swapXY,
                            title: b.title,
                            url: b.url,
                            version: b.wfsInfo.version,
                            visible: b.visibility,
                            wkid: b.layerDefinition.spatialReference.wkid
                        }, m = new Kb, m.fromJson(f, function () {
                            t.isDefined(b.opacity) && m.setOpacity(b.opacity);
                            t.isDefined(b.visibility) && m.setVisibility(b.visibility);
                            (b.minScale || b.maxScale) && m.setScaleRange(b.minScale, b.maxScale);
                            m.renderer = v.fromJson(b.layerDefinition.drawingInfo.renderer);
                            !e.ignorePopups && b.popupInfo && m.setInfoTemplate(new s(b.popupInfo));
                            m.emit("fromJsonComplete")
                        });
                        else if ("WMS" === b.type) {
                            var u = [],
                                C = [];
                            a.forEach(b.layers, function (a) {
                                C.push(new zb({
                                    name: a.name,
                                    title: a.title,
                                    legendURL: a.legendURL,
                                    queryable: a.queryable,
                                    showPopup: a.showPopup
                                }));
                                u.push(a.name)
                            }, this);
                            b.visibleLayers && (u = b.visibleLayers);
                            f = new w(b.extent[0][0], b.extent[0][1], b.extent[1][0], b.extent[1][1], new n({
                                wkid: 4326
                            }));
                            f = {
                                customLayerParameters: b.customLayerParameters,
                                customParameters: b.customParameters,
                                extent: f,
                                layerInfos: C,
                                version: b.version,
                                maxWidth: b.maxWidth,
                                maxHeight: b.maxHeight,
                                featureInfoFormat: b.featureInfoFormat,
                                getFeatureInfoURL: b.featureInfoUrl,
                                getMapURL: b.mapUrl,
                                spatialReferences: b.spatialReferences,
                                title: b.title,
                                copyright: b.copyright,
                                minScale: b.minScale || 0,
                                maxScale: b.maxScale || 0,
                                format: b.format
                            };
                            m = new Lb(b.url, {
                                id: b.id,
                                visibleLayers: u,
                                format: "png",
                                transparent: b.firstLayer ? !1 : !0,
                                opacity: b.opacity,
                                visible: null !== b.visibility ? b.visibility : !0,
                                resourceInfo: f,
                                refreshInterval: b.refreshInterval
                            });
                            m.spatialReference.wkid = f.spatialReferences[0]
                        } else if ("KML" === b.type) {
                            r = b.url;
                            if (d.id) {
                                var z = d.id.findCredential(y.urlToObject(sa.arcgisUrl).path);
                                z && (c = sa.arcgisUrl.substring(sa.arcgisUrl.indexOf("//") + 2,
                                    sa.arcgisUrl.indexOf("/", sa.arcgisUrl.indexOf("//") + 3)), k = c.split("."), k = k[k.length - 2] + "." + k[k.length - 1], q = r.indexOf(k), -1 < q && (r = "https://" + c + r.substring(q + k.length), r += "?token\x3d" + z.token))
                            }
                            m = new Gb(r, {
                                id: b.id,
                                visible: null !== b.visibility ? b.visibility : !0,
                                outSR: f,
                                refreshInterval: b.refreshInterval
                            });
                            g.connect(m, "onLoad", function () {
                                (b.opacity || 0 === b.opacity) && m.setOpacity(b.opacity);
                                t.isDefined(b.minScale) && t.isDefined(b.maxScale) && m.setScaleRange(b.minScale, b.maxScale);
                                b.visibleFolders && a.forEach(m.folders,
                                    function (c) {
                                        -1 < a.indexOf(b.visibleFolders, c.id) ? m.setFolderVisibility(c, !0) : m.setFolderVisibility(c, !1)
                                    }, this)
                            })
                        } else "WebTiledLayer" === b.type ? (m = new tb(b.templateUrl, {
                            id: b.id,
                            visible: null !== b.visibility ? b.visibility : !0,
                            opacity: b.opacity,
                            copyright: b.copyright,
                            fullExtent: b.fullExtent && new w(b.fullExtent),
                            initialExtent: b.fullExtent && new w(b.fullExtent),
                            subDomains: b.subDomains,
                            tileInfo: b.tileInfo ? new Ta(b.tileInfo) : null,
                            refreshInterval: b.refreshInterval,
                            wmtsInfo: b.wmtsInfo
                        }), g.connect(m, "onLoad", function () {
                            (t.isDefined(b.minScale) ||
                                t.isDefined(b.maxScale)) && m.setScaleRange(b.minScale, b.maxScale)
                        })) : "GeoRSS" === b.type ? (m = new V(b.url, {
                            id: b.id,
                            opacity: b.opacity,
                            outSpatialReference: f,
                            refreshInterval: b.refreshInterval
                        }), g.connect(m, "onLoad", function () {
                            !1 === b.visibility && m.hide();
                            t.isDefined(b.minScale) && t.isDefined(b.maxScale) && m.setScaleRange(b.minScale, b.maxScale);
                            var c = m.getFeatureLayers();
                            a.forEach(c, function (a) {
                                b.pointSymbol && "esriGeometryPoint" === a.geometryType ? (a.renderer.symbol = x.fromJson(b.pointSymbol), 1 === c.length && (m.pointSymbol =
                                    x.fromJson(b.pointSymbol))) : b.lineSymbol && "esriGeometryPolyline" === a.geometryType ? (a.renderer.symbol = x.fromJson(b.lineSymbol), 1 === c.length && (m.polylineSymbol = x.fromJson(b.lineSymbol))) : b.polygonSymbol && "esriGeometryPolygon" === a.geometryType && (a.renderer.symbol = x.fromJson(b.polygonSymbol), 1 === c.length && (m.polygonSymbol = x.fromJson(b.polygonSymbol)))
                            })
                        })) : "CSV" == b.type && b.url ? (f = {
                            layerDefinition: b.layerDefinition,
                            columnDelimiter: b.columnDelimiter,
                            id: b.id ? b.id : null,
                            visible: null !== b.visibility ? b.visibility :
                                !0,
                            opacity: b.opacity,
                            refreshInterval: b.refreshInterval
                        }, b.locationInfo && (f.latitudeFieldName = b.locationInfo.latitudeFieldName, f.longitudeFieldName = b.locationInfo.longitudeFieldName), e.ignorePopups || (f.infoTemplate = new A(b.popupInfo ? b.popupInfo : ba.generateDefaultPopupInfo(b))), m = new da(b.url, f)) : "VectorTileLayer" === b.layerType && b.styleUrl ? m = new Na(b.styleUrl, {
                            id: b.id,
                            minScale: b.minScale,
                            maxScale: b.maxScale,
                            opacity: b.opacity,
                            visible: b.visibility
                        }) : b.layerDefinition && !b.url ? (f = h.fromJson(h.toJson(b)),
                            delete f.id, delete f.opacity, delete f.visibility, m = new E(f, {
                                id: b.id,
                                opacity: b.opacity,
                                visible: b.visibility,
                                outFields: ["*"],
                                autoGeneralize: !0
                            }), !e.ignorePopups && f.popupInfo && m.setInfoTemplate(new s(f.popupInfo)), va(m)) : "BingMapsAerial" === b.type || "BingMapsRoad" === b.type || "BingMapsHybrid" === b.type ? e.bingMapsKey ? (f = Ua.MAP_STYLE_AERIAL_WITH_LABELS, "BingMapsAerial" === b.type ? f = Ua.MAP_STYLE_AERIAL : "BingMapsRoad" === b.type && (f = Ua.MAP_STYLE_ROAD), m = new Ua({
                            bingMapsKey: e.bingMapsKey,
                            mapStyle: f,
                            opacity: b.opacity,
                            id: b.id
                        }), g.connect(m, "onError", p.hitch(this, function (a) {
                            a.errors = a.errors || [];
                            a.errors.push({
                                message: "This application does not have a valid Bing Key for the Bing layer that is included in this map. [type:" + a.type + "]"
                            })
                        }, b))) : (b.errors = b.errors || [], b.errors.push({
                            message: "This application does not provide a Bing Key for the Bing layer that is included in this map. [type:" + b.type + "]"
                        })) : b.resourceInfo && b.resourceInfo.mapName ? m = !0 === b.resourceInfo.singleFusedMapCache && (b.baseMapLayer || pa(b, c, f) && oa(b,
                            k, q)) ? ea(b, s, e) : xa(b, s, e) : b.resourceInfo && b.resourceInfo.pixelSizeX ? m = !0 === b.resourceInfo.singleFusedMapCache && (b.baseMapLayer || pa(b, c, f) && oa(b, k, q)) ? ea(b, s, e) : ha(b, s, e) : b.resourceInfo && "Feature Layer" === b.resourceInfo.type ? (b.capabilities && (b.resourceInfo.capabilities = b.capabilities), m = new E(aa(b.url), {
                            resourceInfo: b.resourceInfo,
                            opacity: b.opacity,
                            visible: b.visibility,
                            id: b.id,
                            mode: b.mode === E.MODE_SELECTION ? E.MODE_SELECTION : E.MODE_AUTO,
                            editable: !1 === e.editable ? !1 : void 0,
                            outFields: ["*"],
                            autoGeneralize: !0,
                            refreshInterval: b.refreshInterval
                        }), !e.ignorePopups && b.popupInfo && m.setInfoTemplate(new s(b.popupInfo)), b.layerDefinition && (b.layerDefinition.drawingInfo && b.layerDefinition.drawingInfo.renderer && (f = v.fromJson(b.layerDefinition.drawingInfo.renderer), f.isMaxInclusive = !0, m.setRenderer(f)), b.layerDefinition.drawingInfo && b.layerDefinition.drawingInfo.labelingInfo && (f = a.map(b.layerDefinition.drawingInfo.labelingInfo, function (a) {
                                return new Mb(a)
                            }), m.setLabelingInfo(f)), b.layerDefinition.definitionExpression &&
                            m.setDefinitionExpression(b.layerDefinition.definitionExpression), t.isDefined(b.layerDefinition.minScale) && m.setMinScale(b.layerDefinition.minScale), t.isDefined(b.layerDefinition.maxScale) && m.setMaxScale(b.layerDefinition.maxScale)), va(m)) : b.resourceInfo && b.resourceInfo.streamUrls && (f = {
                            resourceInfo: b.resourceInfo,
                            opacity: b.opacity,
                            visible: b.visibility,
                            id: b.id
                        }, b.layerDefinition && (z = b.layerDefinition.drawingInfo, b.layerDefinition.definitionGeometry && (r = r || {}, r.geometry = b.layerDefinition.definitionGeometry),
                            t.isDefined(b.layerDefinition.definitionExpression) && (r = r || {}, r.where = b.layerDefinition.definitionExpression), t.isDefined(b.layerDefinition.maximumTrackPoints) && (f.maximumTrackPoints = b.layerDefinition.maximumTrackPoints)), r && (f.filter = r), b.purgeOptions && (f.purgeOptions = b.purgeOptions), m = new Jb(aa(b.url), f), z && z.renderer && (f = z.renderer, m.setRenderer(v.fromJson(f))), !e.ignorePopups && b.popupInfo && m.setInfoTemplate(new s(b.popupInfo)), b.layerDefinition && (t.isDefined(b.layerDefinition.minScale) && m.setMinScale(b.layerDefinition.minScale),
                            t.isDefined(b.layerDefinition.maxScale) && m.setMaxScale(b.layerDefinition.maxScale)), l.once(m, "error", function (a) {
                            b.errors.push({
                                message: "Error loading stream layer. Check websocket url"
                            })
                        }));
                        m && (m.arcgisProps = {
                            title: b.title
                        }, b.baseMapLayer && (b.isReference ? (m.attr("data-reference", !0), m._basemapGalleryLayerType = "reference") : m._basemapGalleryLayerType = "basemap"));
                        return m
                    }

                    function ia(b, c, d, e, f) {
                        a.forEach(b, function (a) {
                            a.layerObject = na(a, b, c, d, e, f)
                        });
                        var g = a.filter(b, function (a) {
                                return !a.isReference
                            }),
                            h = a.filter(b, function (a) {
                                return !!a.isReference
                            });
                        return b = g.concat(h)
                    }

                    function ma(a) {
                        var b = null;
                        a = a[0];
                        a.url && !a.type ? a.resourceInfo.spatialReference && (b = new n, a.resourceInfo.spatialReference.wkid && (b.wkid = a.resourceInfo.spatialReference.wkid), a.resourceInfo.spatialReference.wkt && (b.wkt = a.resourceInfo.spatialReference.wkt)) : a.type && (-1 < a.type.indexOf("BingMaps") || "OpenStreetMap" == a.type ? b = new n({
                            wkid: 102100
                        }) : "WMS" == a.type && (b = new n({
                            wkid: a.spatialReferences[0]
                        })));
                        return b
                    }

                    function ya(b, c, d, e, f,
                        g, h, n) {
                        a.forEach(c, function (a) {
                            a.url && !a.type && (a.resourceInfo = b[a.deferredsPos][1], delete a.deferredsPos)
                        });
                        g = g || ma(c);
                        c = ia(c, d, g, h, n);
                        f.callback(c);
                        return f
                    }

                    function va(a) {
                        !window.CanvasRenderingContext2D && (a.renderer && "esri.renderer.HeatmapRenderer" === a.renderer.declaredClass) && a.setRenderer(v.fromJson({
                            type: "simple",
                            symbol: {
                                color: [77, 77, 77, 255],
                                size: 6,
                                angle: 0,
                                xoffset: 0,
                                yoffset: 0,
                                type: "esriSMS",
                                style: "esriSMSCircle",
                                outline: {
                                    color: [255, 255, 255, 255],
                                    width: 0.75,
                                    type: "esriSLS",
                                    style: "esriSLSSolid"
                                }
                            }
                        }))
                    }

                    function Ba(a, b) {
                        var c = aa(a);
                        return s({
                            url: c,
                            content: {
                                f: "json"
                            },
                            callbackParamName: "callback",
                            error: function (a, d) {
                                a.message = a.message ? a.message + (" [url:" + c + "]") : "[url:" + c + "]";
                                b.push(a);
                                m.defaults.io.errorHandler(a, d)
                            }
                        })
                    }

                    function Ja(a) {
                        var b = sa.arcgisUrl + "/" + a.itemId + "/data";
                        return s({
                            url: b,
                            content: {
                                f: "json"
                            },
                            callbackParamName: "callback",
                            error: function (c, d) {
                                c.message = c.message ? c.message + (" [url:" + b + "]") : "[url:" + b + "]";
                                a.errors = a.errors || [];
                                a.errors.push(c);
                                m.defaults.io.errorHandler(c, d)
                            }
                        })
                    }

                    function qa(b,
                        c, d) {
                        var e = new q;
                        if ((!d.featureCollection || !d.featureCollection.layers) && !d.layers) return console.log("Invalid Feature Collection item data [item id: " + b.itemId + "]: ", d), b.errors = b.errors || [], b.errors.push({
                            message: "Invalid Feature Collection item data. [item id: " + b.itemId + "]"
                        }), e.errback(), e;
                        d.layers && (d.featureCollection = {
                            layers: d.layers
                        }, delete d.layers, t.isDefined(d.showLegend) && (d.featureCollection.showLegend = d.showLegend, delete d.showLegend));
                        wa(b, d.featureCollection, c).then(function (c) {
                            d.featureCollection =
                                c;
                            b.featureCollection && b.featureCollection.layers ? a.forEach(d.featureCollection.layers, function (a, c) {
                                var d = b.featureCollection.layers[c];
                                if (!d.popupInfo && !d.layerDefinition) d.popupInfo = a.popupInfo, d.layerDefinition = a.layerDefinition;
                                else if (d.layerDefinition) {
                                    if (t.isDefined(d.layerDefinition.minScale) && t.isDefined(d.layerDefinition.maxScale) && (d.layerDefinition.minScale !== a.layerDefinition.minScale || d.layerDefinition.maxScale !== a.layerDefinition.maxScale)) delete a.layerDefinition.minScale, delete a.layerDefinition.maxScale;
                                    d.layerDefinition.drawingInfo && h.toJson(d.layerDefinition.drawingInfo) !== h.toJson(a.layerDefinition.drawingInfo) && delete a.layerDefinition.drawingInfo;
                                    d.layerDefinition.showLegend !== a.layerDefinition.showLegend && delete a.layerDefinition.showLegend;
                                    d.layerDefinition = p.mixin(d.layerDefinition, a.layerDefinition)
                                } else d.layerDefinition = a.layerDefinition;
                                d.featureSet = a.featureSet;
                                d.nextObjectId = a.nextObjectId
                            }) : (b.featureCollection = b.featureCollection || {}, b.featureCollection = p.mixin(b.featureCollection,
                                d.featureCollection));
                            e.callback(b)
                        });
                        return e
                    }

                    function wa(b, c, d) {
                        var f = new q;
                        r(["./csv"], function (g) {
                            var h = [];
                            a.forEach(c.layers, function (a) {
                                a.featureSet && (a.featureSet.features && a.featureSet.features.length && a.featureSet.features[0].geometry && a.featureSet.features[0].geometry.spatialReference) && (a.deferredsPos = h.length, h.push(g.projectFeatureCollection(a, d, a.featureSet.features[0].geometry.spatialReference)))
                            });
                            (new e(h)).addCallback(function () {
                                a.forEach(c.layers, function (a) {
                                    t.isDefined(a.deferredsPos) &&
                                        (h[a.deferredsPos].results && h[a.deferredsPos].results.length ? a = h[a.deferredsPos].results[0] : (console.log("Errors projecting feature collection. [" + b.title + " - " + a.layerDefinition.name + "]"), a.errors = a.errors || [], a.errors.push({
                                            message: "Errors projecting feature collection. [" + b.title + " - " + a.layerDefinition.name + "]"
                                        })), delete a.deferredsPos)
                                });
                                f.callback(c)
                            })
                        });
                        return f
                    }

                    function ja(b, c, d, f, g) {
                        var h = new q,
                            n = new q,
                            k = [],
                            m;
                        a.forEach(b.operationalLayers, function (a) {
                            a.itemId && "Feature Collection" == a.type &&
                                k.push(Ja(a).then(p.hitch(null, qa, a, d)))
                        });
                        0 === k.length ? Ca(b, c, d, f, n, g) : (m = new e(k), m.addCallback(function (a) {
                            Ca(b, c, d, f, n, g)
                        }));
                        n.then(function (b) {
                            k = [];
                            a.forEach(b, function (a) {
                                var b;
                                a = a.layerObject;
                                a instanceof E && !a.loaded && !a.loadError ? (b = new q, l.once(a, "load, error", function () {
                                    b.callback(a)
                                }), k.push(b)) : a && ("esri.layers.WFSLayer" === a.declaredClass && !a.loadError) && (b = new q, l.once(a, "fromJsonComplete, error", function (c) {
                                    b.callback(a)
                                }), k.push(b))
                            });
                            if (k.length) {
                                var c = new q;
                                m = new e(k);
                                m.addCallback(function () {
                                    c.callback(b)
                                });
                                return c.promise
                            }
                            return b
                        }).then(function (b) {
                            var c = [];
                            a.forEach(b, function (a) {
                                var b = a.layerObject;
                                b instanceof E ? b.loaded && (b.labelingInfo && (a.showLabels || b._collection)) && c.push(b) : b && "esri.layers.WFSLayer" === b.declaredClass && b.loaded && b.labelingInfo && c.push(b)
                            });
                            c.length ? r(["../layers/LabelLayer"], function (d) {
                                var e = new d;
                                a.forEach(c, function (a) {
                                    e.addFeatureLayer(a)
                                });
                                b.push({
                                    layerObject: e
                                });
                                h.callback(b)
                            }) : h.callback(b)
                        });
                        return h
                    }

                    function Ca(b, c, d, f, g, h) {
                        var n = [],
                            l = [],
                            k = [];
                        a.forEach(b.operationalLayers,
                            function (b, c) {
                                if (b.featureCollection && b.featureCollection.layers) {
                                    var d = b.featureCollection.layers.length;
                                    a.forEach(b.featureCollection.layers, function (e, f) {
                                        var g = !0;
                                        b.visibleLayers && -1 == a.indexOf(b.visibleLayers, f) && (g = !1);
                                        e.visibility = b.visibility && g;
                                        e.opacity = b.opacity;
                                        e.id = (b.id || "operational" + c) + "_" + f;
                                        b.title && (e.title = 1 === d || !e.layerDefinition.name || b.title === e.layerDefinition.name ? b.title : b.title + " - " + e.layerDefinition.name);
                                        k.push(e)
                                    }, this)
                                } else k.push(b)
                            });
                        a.forEach(b.baseMap.baseMapLayers,
                            function (a, b) {
                                a.baseMapLayer = !0;
                                a.id = a.id || "base" + b;
                                n.push(a)
                            });
                        a.forEach(k, function (a, b) {
                            a.id = a.id || "operational" + b;
                            n.push(a)
                        });
                        a.forEach(n, function (a) {
                            a.url && !a.type && (a.deferredsPos = l.length, a.errors = a.errors || [], l.push(Ba(a.url, a.errors)))
                        });
                        0 === l.length ? (d = d || ma(n), n = ia(n, c, d, f, h), g.callback(n)) : (new e(l)).addCallback(function (a) {
                            ya(a, n, c, l, g, d, f, h)
                        });
                        return g
                    }

                    function Ma(b, c, d, e) {
                        var f = b.minScale,
                            g = b.maxScale;
                        if (10.1 >= d.version && c)
                            for (b = c.length - 1; 0 <= b; b--) {
                                if (c[b].id == e)
                                    if (0 == f && 0 < c[b].minScale ?
                                        f = c[b].minScale : 0 < f && 0 == c[b].minScale ? f = d.minScale : 0 < f && 0 < c[b].minScale && (f = Math.min(f, c[b].minScale)), g = Math.max(d.maxScale || 0, c[b].maxScale || 0), d.setScaleRange(f, g), -1 < c[b].parentLayerId) e = c[b].parentLayerId;
                                    else break
                            } else 10.1 < d.version && (a.forEach(b.layerInfos, function (a) {
                                a.id == e && (0 == f && 0 < a.minScale ? f = a.minScale : 0 < f && 0 == a.minScale || 0 < f && 0 < a.minScale && (f = Math.min(f, a.minScale)), g = Math.max(g || 0, a.maxScale || 0))
                            }), d.setScaleRange(f, g))
                    }

                    function Pa(b, c, d, e) {
                        var f = b.url,
                            h = b.__popupIds,
                            n = b.__popupUrls,
                            l = b.__popupWhereClauses,
                            k = b.__popupMinScales,
                            m = b.__popupMaxScales,
                            q = b.__resourceInfo,
                            r = [];
                        a.forEach(b.__popups, function (e, p) {
                            if (e) {
                                var s, u = [];
                                a.forEach(e.fieldInfos, function (a) {
                                    "shape" !== a.fieldName.toLowerCase() && u.push(a.fieldName)
                                });
                                if (b.dynamicLayerInfos && 0 < b.dynamicLayerInfos.length) {
                                    var v = a.filter(b.dynamicLayerInfos, function (a) {
                                        return h[p] == a.id
                                    })[0].source;
                                    s = new E(f + "/dynamicLayer", {
                                        id: b.id + "_" + h[p],
                                        source: v,
                                        outFields: u,
                                        mode: E.MODE_SELECTION,
                                        infoTemplate: e && new d(e),
                                        drawMode: !1,
                                        visible: b.visible,
                                        autoGeneralize: !0
                                    });
                                    var w = function (a, d) {
                                        0 < l[a].length && d.setDefinitionExpression(l[a]);
                                        if (!t.isDefined(k[a]) && !t.isDefined(m[a])) Ma(b, c || q.layers, d, h[a]);
                                        else if (t.isDefined(b.minScale) || t.isDefined(b.maxScale)) {
                                            var e = b.minScale,
                                                f = b.maxScale;
                                            0 == e && 0 < k[a] ? e = k[a] : 0 < e && 0 == k[a] || 0 < e && 0 < k[a] && (e = Math.min(e, k[a]));
                                            f = Math.max(f || 0, m[a] || 0);
                                            d.setScaleRange(e, f)
                                        } else d.setScaleRange(k[a], m[a])
                                    };
                                    s.loaded ? w(p, s) : g.connect(s, "onLoad", function (a) {
                                        w(p, s)
                                    })
                                } else {
                                    var x = null,
                                        y = f + "/" + h[p];
                                    if (n[p].length) y = n[p];
                                    else if (c)
                                        for (v =
                                            0; v < c.length; v++)
                                            if (c[v].id === h[p]) {
                                                x = c[v];
                                                break
                                            }
                                    s = new E(aa(y), {
                                        id: b.id + "_" + h[p],
                                        outFields: u,
                                        mode: E.MODE_SELECTION,
                                        infoTemplate: e && new d(e),
                                        drawMode: !1,
                                        visible: b.visible,
                                        resourceInfo: x,
                                        autoGeneralize: !0
                                    });
                                    s.loaded ? (0 < l[p].length && s.setDefinitionExpression(l[p]), Ma(b, c || q.layers, s, h[p])) : g.connect(s, "onLoad", function (a) {
                                        0 < l[p].length && s.setDefinitionExpression(l[p]);
                                        Ma(b, c || q.layers, a, h[p])
                                    })
                                }
                                r.push(s)
                            }
                        });
                        0 < r.length && (g.connect(b, "onVisibilityChange", p.hitch(this, function (b, c) {
                            a.forEach(b, function (a) {
                                c ?
                                    a.show() : a.hide()
                            })
                        }, r)), g.connect(e, "onLayerRemove", p.hitch(this, function (b, c, d) {
                            b.id === d.id && a.forEach(c, function (a) {
                                e.removeLayer(a)
                            })
                        }, b, r)));
                        delete b.__popups;
                        delete b.__popupIds;
                        delete b.__popupUrls;
                        delete b.__popupWhereClauses;
                        delete b.__popupMinScales;
                        delete b.__popupMaxScales;
                        delete b.__resourceInfo;
                        return r
                    }

                    function Ha(a) {
                        return s({
                            url: aa(a.url + "/layers"),
                            content: {
                                f: "json"
                            },
                            callbackParamName: "callback",
                            error: function () {}
                        })
                    }

                    function Oa(b, c, d) {
                        var f = [];
                        a.forEach(b, function (a) {
                            var b = a.__popups;
                            b && (1 < b.length && 10 <= a.version) && (a.__deferredsPos = f.length, f.push(Ha(a)))
                        });
                        var g = [];
                        0 < f.length ? (new e(f)).addCallback(function (e) {
                            a.forEach(b, function (a) {
                                a.__popups && 0 < a.__popups.length && (a.__deferredsPos || 0 === a.__deferredsPos ? (g = g.concat(Pa(a, e[a.__deferredsPos][1].layers, d, c)), delete a.__deferredsPos) : g = g.concat(Pa(a, null, d, c)))
                            });
                            c.addLayers(g)
                        }) : (a.forEach(b, function (a) {
                            a.__popups && 0 < a.__popups.length && (g = g.concat(Pa(a, null, d, c)))
                        }), c.addLayers(g))
                    }

                    function Va(b) {
                        a.forEach(b, function (b) {
                            var c =
                                b.layer;
                            c.toJson && (b = c.toJson(), b.featureSet && (c.name && -1 < c.name.indexOf("Text")) && a.forEach(b.featureSet.features, function (a, b) {
                                if (a.attributes.TEXT) {
                                    var d = c.graphics[b];
                                    d.symbol.setText(a.attributes.TEXT);
                                    a.symbol.horizontalAlignment && (d.symbol.align = a.symbol.horizontalAlignment);
                                    d.setSymbol(d.symbol);
                                    d.setAttributes(a.attributes)
                                }
                            }, this))
                        })
                    }

                    function jb(b) {
                        var c = 6;
                        a.forEach(b, function (b) {
                            if (b = b.renderer) "esri.renderer.SimpleRenderer" === b.declaredClass ? ((b = b.symbol) && b.xoffset && (c = Math.max(c, Math.abs(b.xoffset))),
                                b && b.yoffset && (c = Math.max(c, Math.abs(b.yoffset)))) : ("esri.renderer.UniqueValueRenderer" === b.declaredClass || "esri.renderer.ClassBreaksRenderer" === b.declaredClass) && a.forEach(b.infos, function (a) {
                                (a = a.symbol) && a.xoffset && (c = Math.max(c, Math.abs(a.xoffset)));
                                a && a.yoffset && (c = Math.max(c, Math.abs(a.yoffset)))
                            })
                        });
                        return c
                    }

                    function Ya(b) {
                        var c = this,
                            d = c.infoWindow,
                            e = b.graphic;
                        if (c.loaded) {
                            d.hide();
                            d.clearFeatures();
                            var f = [];
                            a.forEach(c.graphicsLayerIds, function (a) {
                                if ((a = c.getLayer(a)) && a instanceof E && a.loaded &&
                                    a.visible) a.clearSelection(), a.infoTemplate && !a.suspended && f.push(a)
                            });
                            a.forEach(c.layerIds, function (a) {
                                (a = c.getLayer(a)) && (-1 !== a.declaredClass.indexOf("ArcGISImageServiceLayer") && a.loaded && a.visible && a.infoTemplate) && f.push(a)
                            });
                            e = e && e.getInfoTemplate() ? e : null;
                            if (f.length || e) {
                                var g = jb(f),
                                    h = b.screenPoint,
                                    n = c.toMap(new u(h.x - g, h.y + g)),
                                    g = c.toMap(new u(h.x + g, h.y - g)),
                                    n = new w(n.x, n.y, g.x, g.y, c.spatialReference),
                                    l = new H;
                                l.geometry = n;
                                l.timeExtent = c.timeExtent;
                                var k = !0,
                                    n = a.map(f, function (a) {
                                        var c; - 1 !== a.declaredClass.indexOf("ArcGISImageServiceLayer") ?
                                            (l.geometry = b.mapPoint, k = !1, c = a.queryVisibleRasters(l, {
                                                rasterAttributeTableFieldPrefix: "Raster.",
                                                returnDomainValues: !0
                                            }), c.addCallback(function () {
                                                return a.getVisibleRasters()
                                            })) : (c = a.selectFeatures(l), c.addCallback(function () {
                                                return a.getSelectedFeatures()
                                            }));
                                        return c
                                    });
                                e && (g = new q, g.callback([e]), n.splice(0, 0, g));
                                if (!a.some(n, function (a) {
                                        return -1 === a.fired
                                    })) {
                                    var p = e ? 1 : 0;
                                    a.forEach(f, function (a) {
                                        p = -1 !== a.declaredClass.indexOf("ArcGISImageServiceLayer") ? p + a.getVisibleRasters().length : p + a.getSelectedFeatures().length
                                    });
                                    if (!p) return
                                }
                                d.setFeatures(n);
                                d.show(b.mapPoint, {
                                    closestFirst: k
                                })
                            }
                        }
                    }

                    function Za(a, b) {
                        var d = b.mapOptions || {},
                            e;
                        d.infoWindow || (e = new z({
                            visibleWhenEmpty: !1
                        }, c.create("div")), d.infoWindow = e);
                        !t.isDefined(d.showInfoWindowOnClick) && !b.usePopupManager && (d.showInfoWindowOnClick = !1);
                        d = new f(a, d);
                        g.connect(d, "onLayersAddResult", Va);
                        return d
                    }

                    function Ia(b, c, d, e, f, h) {
                        var n, l, k, p;
                        e.map ? (n = e.map, l = e.clickEventHandle, k = e.clickEventListener, p = e.errors) : (n = Za(e, f), !f.ignorePopups && (!f.disableClickBehavior && !f.usePopupManager) &&
                            (l = g.connect(n, "onClick", Ya), k = Ya));
                        n.addLayers(b);
                        !f.ignorePopups && !f.usePopupManager && Oa(b, n, f._clazz);
                        var m = p || [];
                        a.forEach(c, function (a) {
                            a.errors && (m = m.concat(a.errors))
                        }, this);
                        n.loaded ? h.callback({
                            map: n,
                            itemInfo: d,
                            errors: m,
                            clickEventHandle: l,
                            clickEventListener: k
                        }) : g.connect(n, "onLoad", function () {
                            h.callback({
                                map: n,
                                itemInfo: d,
                                errors: m,
                                clickEventHandle: l,
                                clickEventListener: k
                            })
                        })
                    }

                    function L(b, c, d, e, f) {
                        var g = [];
                        a.forEach(f, function (b) {
                            p.isArray(b.layerObject) ? a.forEach(b.layerObject, function (a) {
                                    g.push(a)
                                }) :
                                g.push(b.layerObject)
                        });
                        if ("BingMapsAerial" === f[0].type || "BingMapsRoad" === f[0].type || "BingMapsHybrid" === f[0].type) var h = setInterval(function () {
                            if (f[0].layerObject && f[0].layerObject.loaded) clearInterval(h), Fa(b, c, d, e, f, g);
                            else if (f[0].errors) {
                                clearInterval(h);
                                var a = "";
                                f[0].errors && f[0].errors.length && (a = " (" + f[0].errors[0].message + ")");
                                e.errback(Error(Q.arcgis.utils.baseLayerError + a))
                            }
                        }, 10);
                        else if (!g[0] && f[0].baseMapLayer) {
                            var n = "";
                            f[0].errors && f[0].errors.length && (n = " (" + f[0].errors[0].message + ")");
                            e.errback(Error(Q.arcgis.utils.baseLayerError + n))
                        } else Fa(b, c, d, e, f, g)
                    }

                    function Fa(b, c, d, e, f, g) {
                        try {
                            var h = d.mapOptions || {};
                            d.mapOptions = h;
                            var l = b.item;
                            g = a.filter(g, t.isDefined);
                            if (l)
                                if (l.extent && l.extent.length)
                                    if (h.extent) Ia(g, f, b, c, d, e);
                                    else {
                                        var k = new w(l.extent[0][0], l.extent[0][1], l.extent[1][0], l.extent[1][1], new n({
                                                wkid: 4326
                                            })),
                                            p = g[0].spatialReference;
                                        4326 === p.wkid ? (h.extent = k, Ia(g, f, b, c, d, e)) : 102100 === p.wkid || 102113 === p.wkid || 3857 === p.wkid ? (k.xmin = Math.max(k.xmin, -180), k.xmax = Math.min(k.xmax,
                                            180), k.ymin = Math.max(k.ymin, -89.99), k.ymax = Math.min(k.ymax, 89.99), h.extent = C.geographicToWebMercator(k), Ia(g, f, b, c, d, e)) : d.geometryServiceURL || m.defaults.geometryService ? (d.geometryServiceURL ? new D(d.geometryServiceURL) : m.defaults.geometryService).project([k], p, function (a) {
                                            a = a[0];
                                            h.extent = h.extent || a;
                                            Ia(g, f, b, c, d, e)
                                        }, function () {
                                            Ia(g, f, b, c, d, e)
                                        }) : e.errback(Error(Q.arcgis.utils.geometryServiceError))
                                    } else Ia(g, f, b, c, d, e);
                            else Ia(g, f, b, c, d, e)
                        } catch (q) {
                            e.errback(q)
                        }
                    }

                    function $a(b) {
                        var c = [];
                        a.forEach(b.operationalLayers,
                            function (a) {
                                a.featureCollection ? c.push({
                                    featureCollection: a.featureCollection,
                                    visibility: a.visibility,
                                    title: a.title
                                }) : a.layerObject && c.push({
                                    layer: a.layerObject,
                                    visibility: a.visibility,
                                    title: a.title
                                })
                            });
                        return c
                    }

                    function $(b) {
                        var c = [];
                        b = b.baseMap.baseMapLayers.concat(b.operationalLayers);
                        a.forEach(b, function (b) {
                            var d = {};
                            if (b.featureCollection && "CSV" !== b.type) !0 === b.featureCollection.showLegend && a.forEach(b.featureCollection.layers, function (a) {
                                if (!1 !== a.showLegend) {
                                    var e = a.layerObject.renderer;
                                    d = {
                                        layer: a.layerObject,
                                        title: b.title,
                                        defaultSymbol: e && e.defaultSymbol && e.defaultLabel ? !0 : !1
                                    };
                                    1 < b.featureCollection.layers.length && (d.title += " - " + a.layerDefinition.name);
                                    c.push(d)
                                }
                            });
                            else if (b.baseMapLayer && !0 === b.showLegend && b.layerObject || !b.baseMapLayer && !1 !== b.showLegend && b.layerObject && !(b.layerObject instanceof E && b.layerObject.mode === E.MODE_SELECTION)) {
                                var e = b.layerObject.renderer,
                                    f = b.layerObject.declaredClass,
                                    e = !e || e && e.defaultSymbol && e.defaultLabel ? !0 : !1;
                                if (10.1 > b.layerObject.version && ("esri.layers.ArcGISDynamicMapServiceLayer" ===
                                        f || "esri.layers.ArcGISTiledMapServiceLayer" === f) || "esri.layers.ArcGISImageServiceLayer" === f) e = !0;
                                d = {
                                    layer: b.layerObject,
                                    title: b.title,
                                    defaultSymbol: e
                                };
                                b.layers && (f = a.map(a.filter(b.layers, function (a) {
                                    return !1 === a.showLegend
                                }), function (a) {
                                    return a.id
                                }), f.length && (d.hideLayers = f));
                                c.push(d)
                            }
                        });
                        return c
                    }

                    function Ka(b, c) {
                        function d(b, c) {
                            a.forEach(b, function (a, b) {
                                switch (a) {
                                case kb:
                                    S = c[b];
                                    break;
                                case qb:
                                    fa = c[b];
                                    break;
                                case ub:
                                    B = c[b];
                                    break;
                                case ab:
                                    ba = c[b];
                                    break;
                                case za:
                                    da = c[b];
                                    break;
                                case Ab:
                                    ka = c[b];
                                    break;
                                case bb:
                                    V = c[b];
                                    break;
                                case rb:
                                    X = c[b];
                                    break;
                                case Qa:
                                    M = c[b];
                                    break;
                                case vb:
                                    Gb = c[b];
                                    break;
                                case Ga:
                                    Mb = c[b];
                                    break;
                                case Bb:
                                    Hb = c[b];
                                    break;
                                case lb:
                                    pb = c[b];
                                    break;
                                case eb:
                                    Ib = c[b];
                                    break;
                                case ra:
                                    yb = c[b];
                                    break;
                                case wb:
                                    Jb = c[b];
                                    break;
                                case Cb:
                                    Ta = c[b];
                                    break;
                                case fb:
                                    Na = c[b];
                                    break;
                                case mb:
                                    Ua = c[b];
                                    break;
                                case gb:
                                    tb = c[b];
                                    break;
                                case Db:
                                    Kb = c[b];
                                    break;
                                case hb:
                                    Lb = c[b];
                                    break;
                                case Eb:
                                    zb = c[b]
                                }
                            })
                        }
                        var e = new q,
                            f = b.itemData,
                            g = [];
                        f.baseMap && f.baseMap.baseMapLayers && (g = g.concat(f.baseMap.baseMapLayers));
                        f.operationalLayers && (g = g.concat(f.operationalLayers));
                        for (var f = a.map(g, function (a) {
                                return a && a.layerType
                            }), h = [], n = [], g = !1, l = 0; l < f.length; l++) {
                            switch (f[l]) {
                            case "ArcGISFeatureLayer":
                                -1 === a.indexOf(h, Ga) && h.push(Ga);
                                break;
                            case "ArcGISImageServiceLayer":
                            case "ArcGISTiledImageServiceLayer":
                                -1 === a.indexOf(h, qb) && (h.push(qb), n.push(Qa), n.push(lb), n.push(ra));
                                break;
                            case "ArcGISImageServiceVectorLayer":
                                -1 === a.indexOf(h, ub) && (h.push(ub), n.push(Qa), n.push(lb), n.push(ra));
                                break;
                            case "ArcGISMapServiceLayer":
                            case "ArcGISTiledMapServiceLayer":
                                -1 === a.indexOf(h, kb) &&
                                    (h.push(kb), n.push(Ab), n.push(rb), n.push(Bb));
                                break;
                            case "ArcGISStreamLayer":
                                -1 === a.indexOf(h, wb) && h.push(wb);
                                break;
                            case "BingMapsAerial":
                            case "BingMapsHybrid":
                            case "BingMapsRoad":
                                -1 === a.indexOf(h, mb) && h.push(mb);
                                break;
                            case "CSV":
                                -1 === a.indexOf(h, za) && (h.push(za), n.push(ab));
                                break;
                            case "GeoRSS":
                                -1 === a.indexOf(h, bb) && h.push(bb);
                                break;
                            case "KML":
                                -1 === a.indexOf(h, vb) && h.push(vb);
                                break;
                            case "OpenStreetMap":
                                -1 === a.indexOf(h, eb) && h.push(eb);
                                break;
                            case "VectorTileLayer":
                                -1 === a.indexOf(h, fb) && h.push(fb);
                                break;
                            case "WebTiledLayer":
                                -1 === a.indexOf(h, gb) && (h.push(gb), n.push(Cb));
                                break;
                            case "WFS":
                                -1 === a.indexOf(h, Db) && h.push(Db);
                                break;
                            case "WMS":
                                -1 === a.indexOf(h, hb) && (h.push(hb), n.push(Eb));
                                break;
                            default:
                                g = !0
                            }
                            if (g) break
                        }
                        g && (h = Fb, n = xb);
                        h.length ? r(h, function () {
                            d(h, arguments);
                            n.length ? r(n, function () {
                                d(n, arguments);
                                e.resolve()
                            }) : e.resolve()
                        }) : e.resolve();
                        return e
                    }

                    function La(b, c, d, e) {
                        var f = e.itemData;
                        f.baseMap && (f.baseMap.baseMapLayers && f.baseMap.baseMapLayers.length) && (f.baseMap.baseMapLayers[0].firstLayer = !0);
                        var g = c.layerMixins,
                            h = g && g.length;
                        if (h) {
                            var n = function (a) {
                                for (var b = 0; b < h; b++) {
                                    var c = g[b];
                                    if (c.mixin)
                                        if (c.hasOwnProperty("id")) {
                                            if (a.id === c.id) {
                                                p.mixin(a, c.mixin);
                                                break
                                            }
                                        } else if (a.url === c.url) {
                                        p.mixin(a, c.mixin);
                                        break
                                    }
                                }
                            };
                            a.forEach(f.baseMap && f.baseMap.baseMapLayers, n);
                            a.forEach(f.operationalLayers, n)
                        }
                        Ka(e, c).then(function () {
                            return O(e, c)
                        }).then(function () {
                            return J(e, c)
                        }).then(function (c) {
                            var e = c[0],
                                f = c[1];
                            if (!e.itemData.operationalLayers || 0 === e.itemData.operationalLayers.length) K(e, f).addCallback(function (a) {
                                ja(a.itemData,
                                    f).addCallback(p.hitch(null, L, a, b, f, d))
                            });
                            else {
                                var g = new q,
                                    h = e.itemData.baseMap.baseMapLayers.slice(),
                                    n = a.filter(e.itemData.baseMap.baseMapLayers, function (a) {
                                        return !a.isReference
                                    });
                                c = {
                                    item: e.item,
                                    itemData: {
                                        baseMap: {
                                            baseMapLayers: n
                                        }
                                    }
                                };
                                e.itemData.baseMap.baseMapLayers = a.filter(e.itemData.baseMap.baseMapLayers, function (a) {
                                    return a.isReference
                                });
                                K(c, f).addCallback(function (a) {
                                    ja(a.itemData, f).addCallback(p.hitch(null, L, a, b, f, g))
                                });
                                g.then(function (a) {
                                    K(e, f).addCallback(function (b) {
                                        ja(b.itemData, f, a.map.spatialReference,
                                            n, a.map).addCallback(function (c) {
                                            b.itemData.baseMap.baseMapLayers = h;
                                            L(b, a, f, d, c)
                                        })
                                    })
                                }, p.hitch(d, d.errback))
                            }
                        })
                    }

                    function ca(a, b) {
                        "undefined" === typeof b && (b = !0);
                        sa._arcgisUrl && 0 < sa._arcgisUrl.length && (sa.arcgisUrl = sa._arcgisUrl);
                        var c = sa.arcgisUrl + "/" + a,
                            d = {},
                            e = new q;
                        s({
                            url: c,
                            content: {
                                f: "json"
                            },
                            callbackParamName: "callback",
                            load: function (a) {
                                d.item = a;
                                b ? s({
                                    url: c + "/data",
                                    content: {
                                        f: "json"
                                    },
                                    callbackParamName: "callback",
                                    load: function (a) {
                                        d.itemData = a;
                                        e.callback(d)
                                    },
                                    error: function (a) {
                                        e.errback(a)
                                    }
                                }) : e.callback(d)
                            },
                            error: function (a) {
                                e.errback(a)
                            }
                        });
                        return e
                    }
                    var sa, S, fa, B, ba, da, ka, V, X, M, Gb, Mb, Hb, pb, Ib, yb, Jb, Ta, Na, Ua, tb, Kb, Lb, zb, kb = "../layers/ArcGISDynamicMapServiceLayer",
                        qb = "../layers/ArcGISImageServiceLayer",
                        ub = "../layers/ArcGISImageServiceVectorLayer",
                        ab = "./csv",
                        za = "../layers/CSVLayer",
                        Ab = "../layers/DynamicLayerInfo",
                        bb = "../layers/GeoRSSLayer",
                        rb = "../layers/ImageParameters",
                        Qa = "../layers/ImageServiceParameters",
                        vb = "../layers/KMLLayer",
                        Ga = "../layers/LabelClass",
                        Bb = "../layers/LayerDrawingOptions",
                        lb = "../layers/MosaicRule",
                        eb = "../layers/OpenStreetMapLayer",
                        ra = "../layers/RasterFunction",
                        wb = "../layers/StreamLayer",
                        Cb = "../layers/TileInfo",
                        fb = "../layers/VectorTileLayer",
                        mb = "../virtualearth/VETiledLayer",
                        gb = "../layers/WebTiledLayer",
                        Db = "../layers/WFSLayer",
                        hb = "../layers/WMSLayer",
                        Eb = "../layers/WMSLayerInfo",
                        Fb = [kb, qb, ub, za, bb, vb, Ga, eb, wb, fb, mb, gb, Db, hb],
                        xb = [ab, Ab, rb, Qa, Bb, lb, ra, Cb, Eb];
                    sa = {
                        arcgisUrl: y.getProtocolForWebResource() + "//www.arcgis.com/sharing/rest/content/items",
                        getItem: ca,
                        createMap: function (a, b, c) {
                            var d = new q;
                            c = c || {};
                            var e = c.infoTemplateClass;
                            c._clazz = e && (p.isObject(e) ? e : p.getObject(e)) || A;
                            p.isString(a) ? ca(a).addCallback(p.hitch(null, La, b, c, d)).addErrback(p.hitch(d, d.errback)) : La(b, c, d, a);
                            return d
                        },
                        getLayerList: function (a) {
                            return a && a.itemInfo && a.itemInfo.itemData ? $a(a.itemInfo.itemData) : []
                        },
                        getLegendLayers: function (a) {
                            return a && a.itemInfo && a.itemInfo.itemData ? $(a.itemInfo.itemData) : []
                        },
                        _arcgisUrl: null,
                        _getItemProps: K,
                        _getItemData: R,
                        _getBingKey: G,
                        _portalUrlResponse: W,
                        _portalUrlFailure: T,
                        _processFSItemProperties: I,
                        _processSSItemProperties: P,
                        _getLayers: ja,
                        _preBuildLayerObjects: ya,
                        _buildLayerObjects: ia,
                        _preCreateMap: L,
                        _getMapSR: ma,
                        _createMap: Ia,
                        _addSelectionLayers: Oa,
                        _createSelectionFeatureLayers: Pa,
                        _getServiceInfo: Ba,
                        _getFeatureCollectionItem: Ja,
                        _mergeFeatureCollectionItem: qa,
                        _projectFeatureCollection: wa,
                        _getLayersInfo: Ha,
                        _initLayer: na,
                        _loadAsCached: ea,
                        _loadAsDynamic: xa,
                        _processPopups: Y,
                        _onLayersAddResult: Va,
                        _sameSpatialReferenceAsBasemap: pa,
                        _sameTilingSchemeAsBasemap: oa,
                        _showPopup: Ya,
                        _calculateClickTolerance: jb,
                        _getVisibleFeatureLayers: ua,
                        _updateLayerScaleInfo: Ma,
                        _checkUrl: aa,
                        _isHostedService: Z,
                        _isAgolService: ga,
                        _getLegendLayers: $
                    };
                    p.setObject("arcgis.utils", sa, d);
                    return sa
                })
        },
        "dojo/DeferredList": function () {
            define(["./_base/kernel", "./_base/Deferred", "./_base/array"], function (r, p, a) {
                r.DeferredList = function (g, q, h, k, l) {
                    var e = [];
                    p.call(this);
                    var c = this;
                    0 === g.length && !q && this.resolve([0, []]);
                    var b = 0;
                    a.forEach(g, function (a, l) {
                        function p(a, d) {
                            e[l] = [a, d];
                            b++;
                            b === g.length && c.resolve(e)
                        }
                        a.then(function (a) {
                            q ? c.resolve([l,
a]) : p(!0, a)
                        }, function (a) {
                            h ? c.reject(a) : p(!1, a);
                            if (k) return null;
                            throw a;
                        })
                    })
                };
                r.DeferredList.prototype = new p;
                r.DeferredList.prototype.gatherResults = function (g) {
                    g = new r.DeferredList(g, !1, !0, !1);
                    g.addCallback(function (g) {
                        var h = [];
                        a.forEach(g, function (a) {
                            h.push(a[1])
                        });
                        return h
                    });
                    return g
                };
                return r.DeferredList
            })
        },
        "esri/tasks/GeometryService": function () {
            define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/_base/Deferred dojo/has ../kernel ../request ../deferredUtils ./Task ../geometry/Extent ../geometry/Polyline ../geometry/Polygon ../geometry/Multipoint ../geometry/jsonUtils".split(" "),
                function (r, p, a, g, q, h, k, l, e, c, b, d, m, t, s) {
                    r = r(c, {
                        declaredClass: "esri.tasks.GeometryService",
                        _eventMap: {
                            "areas-and-lengths-complete": ["result"],
                            "auto-complete-complete": ["geometries"],
                            "buffer-complete": ["geometries"],
                            "convex-hull-complete": ["geometry"],
                            "cut-complete": ["result"],
                            "densify-complete": ["geometries"],
                            "difference-complete": ["geometries"],
                            "distance-complete": ["distance"],
                            "generalize-complete": ["geometries"],
                            "intersect-complete": ["geometries"],
                            "label-points-complete": ["geometries"],
                            "lengths-complete": ["result"],
                            "offset-complete": ["geometries"],
                            "project-complete": ["geometries"],
                            "relation-complete": ["relations"],
                            "reshape-complete": ["geometry"],
                            "simplify-complete": ["geometries"],
                            "trim-extend-complete": ["geometries"],
                            "union-complete": ["geometry"]
                        },
                        constructor: function (a) {
                            a = p.hitch;
                            this._projectHandler = a(this, this._projectHandler);
                            this._simplifyHandler = a(this, this._simplifyHandler);
                            this._bufferHandler = a(this, this._bufferHandler);
                            this._areasAndLengthsHandler = a(this, this._areasAndLengthsHandler);
                            this._lengthsHandler =
                                a(this, this._lengthsHandler);
                            this._labelPointsHandler = a(this, this._labelPointsHandler);
                            this._relationHandler = a(this, this._relationHandler);
                            this._convexHullHandler = a(this, this._convexHullHandler);
                            this._unionHandler = a(this, this._unionHandler);
                            this._autoCompleteHandler = a(this, this._autoCompleteHandler);
                            this._reshapeHandler = a(this, this._reshapeHandler);
                            this._cutHandler = a(this, this._cutHandler);
                            this._intersectHandler = a(this, this._intersectHandler);
                            this._differenceHandler = a(this, this._differenceHandler);
                            this._trimExtendHandler = a(this, this._trimExtendHandler);
                            this._densifyHandler = a(this, this._densifyHandler);
                            this._generalizeHandler = a(this, this._densifyHandler);
                            this._offsetHandler = a(this, this._offsetHandler);
                            this._distanceHandler = a(this, this._distanceHandler);
                            this._toGeoCoordinateHandler = a(this, this._toGeoCoordinateHandler);
                            this._fromGeoCoordinateHandler = a(this, this._fromGeoCoordinateHandler);
                            this.registerConnectEvents()
                        },
                        _encodeGeometries: function (a) {
                            var b = [],
                                c, d = a.length;
                            for (c = 0; c < d; c++) b.push(a[c].toJson());
                            return {
                                geometryType: s.getJsonType(a[0]),
                                geometries: b
                            }
                        },
                        _decodeGeometries: function (b, c, d) {
                            var e = s.getGeometryType(c);
                            b = b.geometries;
                            var g = [],
                                h = {
                                    spatialReference: d.toJson()
                                },
                                l = p.mixin;
                            a.forEach(b, function (a, b) {
                                g[b] = new e(l(a, h))
                            });
                            return g
                        },
                        _toProjectGeometry: function (a) {
                            var c = a.spatialReference.toJson();
                            return a instanceof b ? new m({
                                rings: [[[a.xmin, a.ymin], [a.xmin, a.ymax], [a.xmax, a.ymax], [a.xmax, a.ymin], [a.xmin, a.ymin]]],
                                spatialReference: c
                            }) : new d({
                                paths: [[].concat(a.points)],
                                spatialReference: c
                            })
                        },
                        _fromProjectedGeometry: function (a, c, d) {
                            return "esriGeometryEnvelope" === c ? (a = a.rings[0], new b(a[0][0], a[0][1], a[2][0], a[2][1], d)) : new t({
                                points: a.paths[0],
                                spatialReference: d.toJson()
                            })
                        },
                        project: function (a, b, c, d) {
                            var h = p.mixin({}, this._url.query, {
                                    f: "json"
                                }),
                                k;
                            a.geometries ? (d = c, c = b, b = a.outSR, k = a.geometries[0], h = p.mixin(h, a.toJson())) : (k = a[0], h = p.mixin(h, {
                                outSR: b.wkid || g.toJson(b.toJson()),
                                inSR: k.spatialReference.wkid || g.toJson(k.spatialReference.toJson()),
                                geometries: g.toJson(this._encodeGeometries(a))
                            }));
                            var m = s.getJsonType(k),
                                r = this._projectHandler,
                                t = this._errorHandler,
                                z = new q(e._dfdCanceller);
                            z._pendingDfd = l({
                                url: this._url.path + "/project",
                                content: h,
                                callbackParamName: "callback",
                                load: function (a, e) {
                                    r(a, e, m, b, c, d, z)
                                },
                                error: function (a) {
                                    t(a, d, z)
                                }
                            });
                            return z
                        },
                        _projectHandler: function (a, b, c, d, e, g, h) {
                            try {
                                var l = this._decodeGeometries(a, c, d);
                                this._successHandler([l], "onProjectComplete", e, h)
                            } catch (k) {
                                this._errorHandler(k, g, h)
                            }
                        },
                        onProjectComplete: function () {},
                        simplify: function (a, b, c) {
                            var d = a[0].spatialReference,
                                h = p.mixin({}, this._url.query, {
                                    f: "json",
                                    sr: d.wkid ? d.wkid : g.toJson(d.toJson()),
                                    geometries: g.toJson(this._encodeGeometries(a))
                                }),
                                k = s.getJsonType(a[0]),
                                m = this._simplifyHandler,
                                r = this._errorHandler,
                                t = new q(e._dfdCanceller);
                            t._pendingDfd = l({
                                url: this._url.path + "/simplify",
                                content: h,
                                callbackParamName: "callback",
                                load: function (a, e) {
                                    m(a, e, k, d, b, c, t)
                                },
                                error: function (a) {
                                    r(a, c, t)
                                }
                            });
                            return t
                        },
                        _simplifyHandler: function (a, b, c, d, e, g, h) {
                            try {
                                var l = this._decodeGeometries(a, c, d);
                                this._successHandler([l], "onSimplifyComplete",
                                    e, h)
                            } catch (k) {
                                this._errorHandler(k, g, h)
                            }
                        },
                        onSimplifyComplete: function () {},
                        convexHull: function (a, b, c) {
                            var d = a[0].spatialReference;
                            a = p.mixin({}, this._url.query, {
                                f: "json",
                                sr: g.toJson(d.toJson()),
                                geometries: g.toJson(this._encodeGeometries(a))
                            });
                            var h = this._convexHullHandler,
                                k = this._errorHandler,
                                m = new q(e._dfdCanceller);
                            m._pendingDfd = l({
                                url: this._url.path + "/convexHull",
                                content: a,
                                callbackParamName: "callback",
                                load: function (a, e) {
                                    h(a, e, d, b, c, m)
                                },
                                error: function (a) {
                                    k(a, c, m)
                                }
                            });
                            return m
                        },
                        _convexHullHandler: function (a,
                            b, c, d, e, g) {
                            try {
                                var h = s.fromJson(a.geometry).setSpatialReference(c);
                                this._successHandler([h], "onConvexHullComplete", d, g)
                            } catch (l) {
                                this._errorHandler(l, e, g)
                            }
                        },
                        onConvexHullComplete: function () {},
                        union: function (a, b, c) {
                            var d = a[0].spatialReference;
                            a = p.mixin({}, this._url.query, {
                                f: "json",
                                sr: g.toJson(d.toJson()),
                                geometries: g.toJson(this._encodeGeometries(a))
                            });
                            var h = this._unionHandler,
                                k = this._errorHandler,
                                m = new q(e._dfdCanceller);
                            m._pendingDfd = l({
                                url: this._url.path + "/union",
                                content: a,
                                callbackParamName: "callback",
                                load: function (a, e) {
                                    h(a, e, d, b, c, m)
                                },
                                error: function (a) {
                                    k(a, c, m)
                                }
                            });
                            return m
                        },
                        _unionHandler: function (a, b, c, d, e, g) {
                            try {
                                var h = s.fromJson(a.geometry).setSpatialReference(c);
                                this._successHandler([h], "onUnionComplete", d, g)
                            } catch (l) {
                                this._errorHandler(l, e, g)
                            }
                        },
                        onUnionComplete: function () {},
                        autoComplete: function (a, b, c, d) {
                            var h = a[0].spatialReference;
                            a = p.mixin({}, this._url.query, {
                                f: "json",
                                sr: g.toJson(h.toJson()),
                                polygons: g.toJson(this._encodeGeometries(a).geometries),
                                polylines: g.toJson(this._encodeGeometries(b).geometries)
                            });
                            var k = this._autoCompleteHandler,
                                m = this._errorHandler,
                                r = new q(e._dfdCanceller);
                            r._pendingDfd = l({
                                url: this._url.path + "/autoComplete",
                                content: a,
                                callbackParamName: "callback",
                                load: function (a, b) {
                                    k(a, b, h, c, d, r)
                                },
                                error: function (a) {
                                    m(a, d, r)
                                }
                            });
                            return r
                        },
                        _autoCompleteHandler: function (a, b, c, d, e, g) {
                            try {
                                var h = a.geometries;
                                a = [];
                                var l, k = h.length;
                                for (l = 0; l < k; l++) a[l] = new m({
                                    spatialReference: c,
                                    rings: h[l].rings
                                });
                                this._successHandler([a], "onAutoCompleteComplete", d, g)
                            } catch (p) {
                                this._errorHandler(p, e, g)
                            }
                        },
                        onAutoCompleteComplete: function () {},
                        reshape: function (a, b, c, d) {
                            var h = a.spatialReference;
                            a = p.mixin({}, this._url.query, {
                                f: "json",
                                sr: g.toJson(h.toJson()),
                                target: g.toJson({
                                    geometryType: s.getJsonType(a),
                                    geometry: a.toJson()
                                }),
                                reshaper: g.toJson(b.toJson())
                            });
                            var k = this._reshapeHandler,
                                m = this._errorHandler,
                                r = new q(e._dfdCanceller);
                            r._pendingDfd = l({
                                url: this._url.path + "/reshape",
                                content: a,
                                callbackParamName: "callback",
                                load: function (a, b) {
                                    k(a, b, h, c, d, r)
                                },
                                error: function (a) {
                                    m(a, d, r)
                                }
                            });
                            return r
                        },
                        _reshapeHandler: function (a, b, c, d, e, g) {
                            try {
                                var h = s.fromJson(a.geometry).setSpatialReference(c);
                                this._successHandler([h], "onReshapeComplete", d, g)
                            } catch (l) {
                                this._errorHandler(l, e, g)
                            }
                        },
                        onReshapeComplete: function () {},
                        cut: function (b, c, d, h) {
                            var k = b[0].spatialReference,
                                m = a.map(b, function (a) {
                                    return a.toJson()
                                });
                            b = p.mixin({}, this._url.query, {
                                f: "json",
                                sr: g.toJson(k.toJson()),
                                target: g.toJson({
                                    geometryType: s.getJsonType(b[0]),
                                    geometries: m
                                }),
                                cutter: g.toJson(c.toJson())
                            });
                            var r = this._cutHandler,
                                t = this._errorHandler,
                                A = new q(e._dfdCanceller);
                            A._pendingDfd = l({
                                url: this._url.path + "/cut",
                                content: b,
                                callbackParamName: "callback",
                                load: function (a, b) {
                                    r(a, b, k, d, h, A)
                                },
                                error: function (a) {
                                    t(a, h, A)
                                }
                            });
                            return A
                        },
                        _cutHandler: function (b, c, d, e, g, h) {
                            try {
                                var l = b.geometries,
                                    k = {};
                                k.cutIndexes = b.cutIndexes;
                                k.geometries = [];
                                a.forEach(l, function (a) {
                                    k.geometries.push(s.fromJson(a).setSpatialReference(d))
                                });
                                this._successHandler([k], "onCutComplete", e, h)
                            } catch (p) {
                                this._errorHandler(p, g, h)
                            }
                        },
                        onCutComplete: function () {},
                        intersect: function (a, b, c, d) {
                            var h = a[0].spatialReference;
                            a = p.mixin({}, this._url.query, {
                                f: "json",
                                sr: g.toJson(h.toJson()),
                                geometries: g.toJson(this._encodeGeometries(a)),
                                geometry: g.toJson({
                                    geometryType: s.getJsonType(b),
                                    geometry: b.toJson()
                                })
                            });
                            var k = this._intersectHandler,
                                m = this._errorHandler,
                                r = new q(e._dfdCanceller);
                            r._pendingDfd = l({
                                url: this._url.path + "/intersect",
                                content: a,
                                callbackParamName: "callback",
                                load: function (a, b) {
                                    k(a, b, h, c, d, r)
                                },
                                error: function (a) {
                                    m(a, d, r)
                                }
                            });
                            return r
                        },
                        _intersectHandler: function (b, c, d, e, g, h) {
                            try {
                                var l = [];
                                a.forEach(b.geometries, function (a) {
                                    l.push(s.fromJson(a).setSpatialReference(d))
                                });
                                this._successHandler([l], "onIntersectComplete", e, h)
                            } catch (k) {
                                this._errorHandler(k,
                                    g, h)
                            }
                        },
                        onIntersectComplete: function () {},
                        difference: function (a, b, c, d) {
                            var h = a[0].spatialReference;
                            a = p.mixin({}, this._url.query, {
                                f: "json",
                                sr: g.toJson(h.toJson()),
                                geometries: g.toJson(this._encodeGeometries(a)),
                                geometry: g.toJson({
                                    geometryType: s.getJsonType(b),
                                    geometry: b.toJson()
                                })
                            });
                            var k = this._differenceHandler,
                                m = this._errorHandler,
                                r = new q(e._dfdCanceller);
                            r._pendingDfd = l({
                                url: this._url.path + "/difference",
                                content: a,
                                callbackParamName: "callback",
                                load: function (a, b) {
                                    k(a, b, h, c, d, r)
                                },
                                error: function (a) {
                                    m(a,
                                        d, r)
                                }
                            });
                            return r
                        },
                        _differenceHandler: function (b, c, d, e, g, h) {
                            try {
                                var l = [];
                                a.forEach(b.geometries, function (a) {
                                    l.push(s.fromJson(a).setSpatialReference(d))
                                });
                                this._successHandler([l], "onDifferenceComplete", e, h)
                            } catch (k) {
                                this._errorHandler(k, g, h)
                            }
                        },
                        onDifferenceComplete: function () {},
                        buffer: function (a, b, c) {
                            var d = p.mixin({}, this._url.query, {
                                    f: "json"
                                }, a.toJson()),
                                g = a.outSpatialReference || a.geometries[0].spatialReference,
                                h = this._bufferHandler,
                                k = this._errorHandler,
                                m = new q(e._dfdCanceller);
                            m._pendingDfd = l({
                                url: this._url.path +
                                    "/buffer",
                                content: d,
                                callbackParamName: "callback",
                                load: function (a, d) {
                                    h(a, d, g, b, c, m)
                                },
                                error: function (a) {
                                    k(a, c, m)
                                }
                            });
                            return m
                        },
                        _bufferHandler: function (a, b, c, d, e, g) {
                            try {
                                var h = a.geometries;
                                a = [];
                                var l, k = h.length;
                                for (l = 0; l < k; l++) a[l] = new m({
                                    spatialReference: c,
                                    rings: h[l].rings
                                });
                                this._successHandler([a], "onBufferComplete", d, g)
                            } catch (p) {
                                this._errorHandler(p, e, g)
                            }
                        },
                        onBufferComplete: function () {},
                        areasAndLengths: function (a, b, c) {
                            a = p.mixin({}, this._url.query, {
                                f: "json"
                            }, a.toJson());
                            var d = this._areasAndLengthsHandler,
                                g = this._errorHandler,
                                h = new q(e._dfdCanceller);
                            h._pendingDfd = l({
                                url: this._url.path + "/areasAndLengths",
                                content: a,
                                callbackParamName: "callback",
                                load: function (a, e) {
                                    d(a, e, b, c, h)
                                },
                                error: function (a) {
                                    g(a, c, h)
                                }
                            });
                            return h
                        },
                        _areasAndLengthsHandler: function (a, b, c, d, e) {
                            try {
                                this._successHandler([a], "onAreasAndLengthsComplete", c, e)
                            } catch (g) {
                                this._errorHandler(g, d, e)
                            }
                        },
                        onAreasAndLengthsComplete: function () {},
                        lengths: function (a, b, c) {
                            a = p.mixin({}, this._url.query, {
                                f: "json"
                            }, a.toJson());
                            var d = this._lengthsHandler,
                                g = this._errorHandler,
                                h = new q(e._dfdCanceller);
                            h._pendingDfd = l({
                                url: this._url.path + "/lengths",
                                content: a,
                                callbackParamName: "callback",
                                load: function (a, e) {
                                    d(a, e, b, c, h)
                                },
                                error: function (a) {
                                    g(a, c, h)
                                }
                            });
                            return h
                        },
                        _lengthsHandler: function (a, b, c, d, e) {
                            try {
                                this._successHandler([a], "onLengthsComplete", c, e)
                            } catch (g) {
                                this._errorHandler(g, d, e)
                            }
                        },
                        onLengthsComplete: function () {},
                        labelPoints: function (b, c, d) {
                            var h = a.map(b, function (a) {
                                    return a.toJson()
                                }),
                                k = b[0].spatialReference,
                                h = p.mixin({}, this._url.query, {
                                    f: "json",
                                    sr: k.wkid ? k.wkid : g.toJson(k.toJson()),
                                    polygons: g.toJson(h)
                                }),
                                m = this._labelPointsHandler,
                                r = this._errorHandler,
                                s = new q(e._dfdCanceller);
                            s._pendingDfd = l({
                                url: this._url.path + "/labelPoints",
                                content: h,
                                callbackParamName: "callback",
                                load: function (a, e) {
                                    m(a, e, b, k, c, d, s)
                                },
                                error: function (a) {
                                    r(a, d, s)
                                }
                            });
                            return s
                        },
                        _labelPointsHandler: function (b, c, d, e, g, h, l) {
                            try {
                                var k = [];
                                a.forEach(b.labelPoints, function (a) {
                                    k.push(s.fromJson(a).setSpatialReference(e))
                                });
                                this._successHandler([k], "onLabelPointsComplete", g, l)
                            } catch (m) {
                                this._errorHandler(m, h, l)
                            }
                        },
                        onLabelPointsComplete: function () {},
                        relation: function (a, b, c) {
                            a = p.mixin({}, this._url.query, {
                                f: "json"
                            }, a.toJson());
                            var d = this._relationHandler,
                                g = this._errorHandler,
                                h = new q(e._dfdCanceller);
                            h._pendingDfd = l({
                                url: this._url.path + "/relation",
                                content: a,
                                callbackParamName: "callback",
                                load: function (a, e) {
                                    d(a, e, b, c, h)
                                },
                                error: function (a) {
                                    g(a, c, h)
                                }
                            });
                            return h
                        },
                        _relationHandler: function (a, b, c, d, e) {
                            try {
                                this._successHandler([a.relations], "onRelationComplete", c, e)
                            } catch (g) {
                                this._errorHandler(g, d, e)
                            }
                        },
                        onRelationComplete: function () {},
                        trimExtend: function (a,
                            b, c) {
                            var d = p.mixin({}, this._url.query, {
                                    f: "json"
                                }, a.toJson()),
                                g = a.sr,
                                h = this._trimExtendHandler,
                                k = this._errorHandler,
                                m = new q(e._dfdCanceller);
                            m._pendingDfd = l({
                                url: this._url.path + "/trimExtend",
                                content: d,
                                callbackParamName: "callback",
                                load: function (a, d) {
                                    h(a, d, g, b, c, m)
                                },
                                error: function (a) {
                                    k(a, c, m)
                                }
                            });
                            return m
                        },
                        _trimExtendHandler: function (a, b, c, e, g, h) {
                            try {
                                var k = a.geometries;
                                a = [];
                                var l, m = k.length;
                                for (l = 0; l < m; l++) a[l] = new d({
                                    spatialReference: c,
                                    paths: k[l].paths
                                });
                                this._successHandler([a], "onTrimExtendComplete",
                                    e, h)
                            } catch (p) {
                                this._errorHandler(p, g, h)
                            }
                        },
                        onTrimExtendComplete: function () {},
                        densify: function (a, b, c) {
                            var d = p.mixin({}, this._url.query, {
                                    f: "json"
                                }, a.toJson()),
                                g = a.geometries[0].spatialReference,
                                h = this._densifyHandler,
                                k = this._errorHandler,
                                m = new q(e._dfdCanceller);
                            m._pendingDfd = l({
                                url: this._url.path + "/densify",
                                content: d,
                                callbackParamName: "callback",
                                load: function (a, d) {
                                    h(a, d, g, b, c, m)
                                },
                                error: function (a) {
                                    k(a, c, m)
                                }
                            });
                            return m
                        },
                        _densifyHandler: function (b, c, d, e, g, h) {
                            try {
                                var k = [];
                                a.forEach(b.geometries, function (a) {
                                    k.push(s.fromJson(a).setSpatialReference(d))
                                });
                                this._successHandler([k], "onDensifyComplete", e, h)
                            } catch (l) {
                                this._errorHandler(l, g, h)
                            }
                        },
                        onDensifyComplete: function () {},
                        generalize: function (a, b, c) {
                            var d = p.mixin({}, this._url.query, {
                                    f: "json"
                                }, a.toJson()),
                                g = a.geometries[0].spatialReference,
                                h = this._generalizeHandler,
                                k = this._errorHandler,
                                m = new q(e._dfdCanceller);
                            m._pendingDfd = l({
                                url: this._url.path + "/generalize",
                                content: d,
                                callbackParamName: "callback",
                                load: function (a, d) {
                                    h(a, d, g, b, c, m)
                                },
                                error: function (a) {
                                    k(a, c, m)
                                }
                            });
                            return m
                        },
                        _generalizeHandler: function (b,
                            c, d, e, g, h) {
                            try {
                                var k = [];
                                a.forEach(b.geometries, function (a) {
                                    k.push(s.fromJson(a).setSpatialReference(d))
                                });
                                this._successHandler([k], "onGeneralizeComplete", e, h)
                            } catch (l) {
                                this._errorHandler(l, g, h)
                            }
                        },
                        onGeneralizeComplete: function () {},
                        offset: function (a, b, c) {
                            var d = p.mixin({}, this._url.query, {
                                    f: "json"
                                }, a.toJson()),
                                g = a.geometries[0].spatialReference,
                                h = this._offsetHandler,
                                k = this._errorHandler,
                                m = new q(e._dfdCanceller);
                            m._pendingDfd = l({
                                url: this._url.path + "/offset",
                                content: d,
                                callbackParamName: "callback",
                                load: function (a,
                                    d) {
                                    h(a, d, g, b, c, m)
                                },
                                error: function (a) {
                                    k(a, c, m)
                                }
                            });
                            return m
                        },
                        _offsetHandler: function (b, c, d, e, g, h) {
                            try {
                                var k = [];
                                a.forEach(b.geometries, function (a) {
                                    k.push(s.fromJson(a).setSpatialReference(d))
                                });
                                this._successHandler([k], "onOffsetComplete", e, h)
                            } catch (l) {
                                this._errorHandler(l, g, h)
                            }
                        },
                        onOffsetComplete: function () {},
                        distance: function (a, b, c) {
                            var d = p.mixin({}, this._url.query, {
                                    f: "json"
                                }, a.toJson()),
                                g = a.geometry1.spatialReference,
                                h = this._distanceHandler,
                                k = this._errorHandler,
                                m = new q(e._dfdCanceller);
                            m._pendingDfd =
                                l({
                                    url: this._url.path + "/distance",
                                    content: d,
                                    callbackParamName: "callback",
                                    load: function (a, d) {
                                        h(a, d, g, b, c, m)
                                    },
                                    error: function (a) {
                                        k(a, c, m)
                                    }
                                });
                            return m
                        },
                        _distanceHandler: function (a, b, c, d, e, g) {
                            try {
                                a = a && a.distance, this._successHandler([a], "onDistanceComplete", d, g)
                            } catch (h) {
                                this._errorHandler(h, e, g)
                            }
                        },
                        onDistanceComplete: function () {},
                        toGeoCoordinateString: function (a, b, c) {
                            var d = {};
                            p.isObject(a.sr) ? d.sr = a.sr.wkid || g.toJson(a.sr.toJson()) : d.sr = a.sr;
                            d.coordinates = g.toJson(a.coordinates);
                            d.conversionType = a.conversionType ||
                                "MGRS";
                            d.conversionMode = a.conversionMode;
                            d.numOfDigits = a.numOfDigits;
                            d.rounding = a.rounding;
                            d.addSpaces = a.addSpaces;
                            a = p.mixin({}, this._url.query, {
                                f: "json"
                            }, d);
                            var h = this._toGeoCoordinateHandler,
                                k = this._errorHandler,
                                m = new q(e._dfdCanceller);
                            m._pendingDfd = l({
                                url: this._url.path + "/toGeoCoordinateString",
                                content: a,
                                callbackParamName: "callback",
                                load: function (a, d) {
                                    h(a, d, b, c, m)
                                },
                                error: function (a) {
                                    k(a, c, m)
                                }
                            });
                            return m
                        },
                        _toGeoCoordinateHandler: function (a, b, c, d, e) {
                            try {
                                this._successHandler([a.strings], "onToGeoCoordinateStringComplete",
                                    c, e)
                            } catch (g) {
                                this._errorHandler(g, d, e)
                            }
                        },
                        onToGeoCoordinateStringComplete: function () {},
                        fromGeoCoordinateString: function (a, b, c) {
                            var d = {};
                            p.isObject(a.sr) ? d.sr = a.sr.wkid || g.toJson(a.sr.toJson()) : d.sr = a.sr;
                            d.strings = g.toJson(a.strings);
                            d.conversionType = a.conversionType || "MGRS";
                            d.conversionMode = a.conversionMode;
                            a = p.mixin({}, this._url.query, {
                                f: "json"
                            }, d);
                            var h = this._fromGeoCoordinateHandler,
                                k = this._errorHandler,
                                m = new q(e._dfdCanceller);
                            m._pendingDfd = l({
                                url: this._url.path + "/fromGeoCoordinateString",
                                content: a,
                                callbackParamName: "callback",
                                load: function (a, d) {
                                    h(a, d, b, c, m)
                                },
                                error: function (a) {
                                    k(a, c, m)
                                }
                            });
                            return m
                        },
                        _fromGeoCoordinateHandler: function (a, b, c, d, e) {
                            try {
                                this._successHandler([a.coordinates], "onToGeoCoordinateStringComplete", c, e)
                            } catch (g) {
                                this._errorHandler(g, d, e)
                            }
                        },
                        onFromGeoCoordinateStringComplete: function () {}
                    });
                    p.mixin(r, {
                        UNIT_METER: 9001,
                        UNIT_GERMAN_METER: 9031,
                        UNIT_FOOT: 9002,
                        UNIT_SURVEY_FOOT: 9003,
                        UNIT_CLARKE_FOOT: 9005,
                        UNIT_FATHOM: 9014,
                        UNIT_NAUTICAL_MILE: 9030,
                        UNIT_SURVEY_CHAIN: 9033,
                        UNIT_SURVEY_LINK: 9034,
                        UNIT_SURVEY_MILE: 9035,
                        UNIT_KILOMETER: 9036,
                        UNIT_CLARKE_YARD: 9037,
                        UNIT_CLARKE_CHAIN: 9038,
                        UNIT_CLARKE_LINK: 9039,
                        UNIT_SEARS_YARD: 9040,
                        UNIT_SEARS_FOOT: 9041,
                        UNIT_SEARS_CHAIN: 9042,
                        UNIT_SEARS_LINK: 9043,
                        UNIT_BENOIT_1895A_YARD: 9050,
                        UNIT_BENOIT_1895A_FOOT: 9051,
                        UNIT_BENOIT_1895A_CHAIN: 9052,
                        UNIT_BENOIT_1895A_LINK: 9053,
                        UNIT_BENOIT_1895B_YARD: 9060,
                        UNIT_BENOIT_1895B_FOOT: 9061,
                        UNIT_BENOIT_1895B_CHAIN: 9062,
                        UNIT_BENOIT_1895B_LINK: 9063,
                        UNIT_INDIAN_FOOT: 9080,
                        UNIT_INDIAN_1937_FOOT: 9081,
                        UNIT_INDIAN_1962_FOOT: 9082,
                        UNIT_INDIAN_1975_FOOT: 9083,
                        UNIT_INDIAN_YARD: 9084,
                        UNIT_INDIAN_1937_YARD: 9085,
                        UNIT_INDIAN_1962_YARD: 9086,
                        UNIT_INDIAN_1975_YARD: 9087,
                        UNIT_FOOT_1865: 9070,
                        UNIT_RADIAN: 9101,
                        UNIT_DEGREE: 9102,
                        UNIT_ARCMINUTE: 9103,
                        UNIT_ARCSECOND: 9104,
                        UNIT_GRAD: 9105,
                        UNIT_GON: 9106,
                        UNIT_MICRORADIAN: 9109,
                        UNIT_ARCMINUTE_CENTESIMAL: 9112,
                        UNIT_ARCSECOND_CENTESIMAL: 9113,
                        UNIT_MIL6400: 9114,
                        UNIT_BRITISH_1936_FOOT: 9095,
                        UNIT_GOLDCOAST_FOOT: 9094,
                        UNIT_INTERNATIONAL_CHAIN: 109003,
                        UNIT_INTERNATIONAL_LINK: 109004,
                        UNIT_INTERNATIONAL_YARD: 109001,
                        UNIT_STATUTE_MILE: 9093,
                        UNIT_SURVEY_YARD: 109002,
                        UNIT_50KILOMETER_LENGTH: 109030,
                        UNIT_150KILOMETER_LENGTH: 109031,
                        UNIT_DECIMETER: 109005,
                        UNIT_CENTIMETER: 109006,
                        UNIT_MILLIMETER: 109007,
                        UNIT_INTERNATIONAL_INCH: 109008,
                        UNIT_US_SURVEY_INCH: 109009,
                        UNIT_INTERNATIONAL_ROD: 109010,
                        UNIT_US_SURVEY_ROD: 109011,
                        UNIT_US_NAUTICAL_MILE: 109012,
                        UNIT_UK_NAUTICAL_MILE: 109013,
                        UNIT_SQUARE_INCHES: "esriSquareInches",
                        UNIT_SQUARE_FEET: "esriSquareFeet",
                        UNIT_SQUARE_YARDS: "esriSquareYards",
                        UNIT_ACRES: "esriAcres",
                        UNIT_SQUARE_MILES: "esriSquareMiles",
                        UNIT_SQUARE_MILLIMETERS: "esriSquareMillimeters",
                        UNIT_SQUARE_CENTIMETERS: "esriSquareCentimeters",
                        UNIT_SQUARE_DECIMETERS: "esriSquareDecimeters",
                        UNIT_SQUARE_METERS: "esriSquareMeters",
                        UNIT_ARES: "esriAres",
                        UNIT_HECTARES: "esriHectares",
                        UNIT_SQUARE_KILOMETERS: "esriSquareKilometers"
                    });
                    h("extend-esri") && p.setObject("tasks.GeometryService", r, k);
                    return r
                })
        },
        "esri/tasks/RelationshipQuery": function () {
            define(["dojo/_base/declare", "dojo/_base/lang", "dojo/_base/json", "dojo/has", "../kernel"], function (r, p, a, g, q) {
                r = r(null, {
                    declaredClass: "esri.tasks.RelationshipQuery",
                    definitionExpression: "",
                    relationshipId: null,
                    returnGeometry: !1,
                    objectIds: null,
                    outSpatialReference: null,
                    outFields: null,
                    toJson: function () {
                        var g = {
                                definitionExpression: this.definitionExpression,
                                relationshipId: this.relationshipId,
                                returnGeometry: this.returnGeometry,
                                maxAllowableOffset: this.maxAllowableOffset,
                                geometryPrecision: this.geometryPrecision
                            },
                            k = this.objectIds,
                            l = this.outFields,
                            e = this.outSpatialReference;
                        k && (g.objectIds = k.join(","));
                        l && (g.outFields = l.join(","));
                        e && (g.outSR = e.wkid || a.toJson(e.toJson()));
                        g._ts = this._ts;
                        return g
                    }
                });
                g("extend-esri") && p.setObject("tasks.RelationshipQuery", r, q);
                return r
            })
        },
        "url:dijit/form/templates/Button.html": '\x3cspan class\x3d"dijit dijitReset dijitInline" role\x3d"presentation"\r\n\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitButtonNode"\r\n\t\tdata-dojo-attach-event\x3d"ondijitclick:__onClick" role\x3d"presentation"\r\n\t\t\x3e\x3cspan class\x3d"dijitReset dijitStretch dijitButtonContents"\r\n\t\t\tdata-dojo-attach-point\x3d"titleNode,focusNode"\r\n\t\t\trole\x3d"button" aria-labelledby\x3d"${id}_label"\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitToggleButtonIconChar"\x3e\x26#x25CF;\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitButtonText"\r\n\t\t\t\tid\x3d"${id}_label"\r\n\t\t\t\tdata-dojo-attach-point\x3d"containerNode"\r\n\t\t\t\x3e\x3c/span\r\n\t\t\x3e\x3c/span\r\n\t\x3e\x3c/span\r\n\t\x3e\x3cinput ${!nameAttrSetting} type\x3d"${type}" value\x3d"${value}" class\x3d"dijitOffScreen"\r\n\t\tdata-dojo-attach-event\x3d"onclick:_onClick"\r\n\t\ttabIndex\x3d"-1" aria-hidden\x3d"true" data-dojo-attach-point\x3d"valueNode"\r\n/\x3e\x3c/span\x3e\r\n',
        "url:dijit/form/templates/DropDownButton.html": '\x3cspan class\x3d"dijit dijitReset dijitInline"\r\n\t\x3e\x3cspan class\x3d\'dijitReset dijitInline dijitButtonNode\'\r\n\t\tdata-dojo-attach-event\x3d"ondijitclick:__onClick" data-dojo-attach-point\x3d"_buttonNode"\r\n\t\t\x3e\x3cspan class\x3d"dijitReset dijitStretch dijitButtonContents"\r\n\t\t\tdata-dojo-attach-point\x3d"focusNode,titleNode,_arrowWrapperNode,_popupStateNode"\r\n\t\t\trole\x3d"button" aria-haspopup\x3d"true" aria-labelledby\x3d"${id}_label"\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitIcon"\r\n\t\t\t\tdata-dojo-attach-point\x3d"iconNode"\r\n\t\t\t\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitButtonText"\r\n\t\t\t\tdata-dojo-attach-point\x3d"containerNode"\r\n\t\t\t\tid\x3d"${id}_label"\r\n\t\t\t\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitArrowButtonInner"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitArrowButtonChar"\x3e\x26#9660;\x3c/span\r\n\t\t\x3e\x3c/span\r\n\t\x3e\x3c/span\r\n\t\x3e\x3cinput ${!nameAttrSetting} type\x3d"${type}" value\x3d"${value}" class\x3d"dijitOffScreen" tabIndex\x3d"-1"\r\n\t\tdata-dojo-attach-event\x3d"onclick:_onClick" data-dojo-attach-point\x3d"valueNode" aria-hidden\x3d"true"\r\n/\x3e\x3c/span\x3e\r\n',
        "url:dijit/form/templates/ComboButton.html": '\x3ctable class\x3d"dijit dijitReset dijitInline dijitLeft"\r\n\tcellspacing\x3d\'0\' cellpadding\x3d\'0\' role\x3d"presentation"\r\n\t\x3e\x3ctbody role\x3d"presentation"\x3e\x3ctr role\x3d"presentation"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitStretch dijitButtonNode" data-dojo-attach-point\x3d"buttonNode" data-dojo-attach-event\x3d"ondijitclick:__onClick,onkeydown:_onButtonKeyDown"\r\n\t\t\x3e\x3cdiv id\x3d"${id}_button" class\x3d"dijitReset dijitButtonContents"\r\n\t\t\tdata-dojo-attach-point\x3d"titleNode"\r\n\t\t\trole\x3d"button" aria-labelledby\x3d"${id}_label"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitInline dijitIcon" data-dojo-attach-point\x3d"iconNode" role\x3d"presentation"\x3e\x3c/div\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitInline dijitButtonText" id\x3d"${id}_label" data-dojo-attach-point\x3d"containerNode" role\x3d"presentation"\x3e\x3c/div\r\n\t\t\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd id\x3d"${id}_arrow" class\x3d\'dijitReset dijitRight dijitButtonNode dijitArrowButton\'\r\n\t\t\tdata-dojo-attach-point\x3d"_popupStateNode,focusNode,_buttonNode"\r\n\t\t\tdata-dojo-attach-event\x3d"onkeydown:_onArrowKeyDown"\r\n\t\t\ttitle\x3d"${optionsTitle}"\r\n\t\t\trole\x3d"button" aria-haspopup\x3d"true"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitArrowButtonInner" role\x3d"presentation"\x3e\x3c/div\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitArrowButtonChar" role\x3d"presentation"\x3e\x26#9660;\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd style\x3d"display:none !important;"\r\n\t\t\t\x3e\x3cinput ${!nameAttrSetting} type\x3d"${type}" value\x3d"${value}" data-dojo-attach-point\x3d"valueNode"\r\n\t\t\t\tclass\x3d"dijitOffScreen" aria-hidden\x3d"true" data-dojo-attach-event\x3d"onclick:_onClick"\r\n\t\t/\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/tbody\r\n\x3e\x3c/table\x3e\r\n',
        "url:dijit/templates/TooltipDialog.html": '\x3cdiv role\x3d"alertdialog" tabIndex\x3d"-1"\x3e\r\n\t\x3cdiv class\x3d"dijitTooltipContainer" role\x3d"presentation"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"contentsNode" class\x3d"dijitTooltipContents dijitTooltipFocusNode"\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"containerNode"\x3e\x3c/div\x3e\r\n\t\t\t${!actionBarTemplate}\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"dijitTooltipConnector" role\x3d"presentation" data-dojo-attach-point\x3d"connectorNode"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
        "url:dijit/templates/Dialog.html": '\x3cdiv class\x3d"dijitDialog" role\x3d"dialog" aria-labelledby\x3d"${id}_title"\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"titleBar" class\x3d"dijitDialogTitleBar"\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitDialogTitle" id\x3d"${id}_title"\r\n\t\t\t\trole\x3d"heading" level\x3d"1"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"closeButtonNode" class\x3d"dijitDialogCloseIcon" data-dojo-attach-event\x3d"ondijitclick: onCancel" title\x3d"${buttonCancel}" role\x3d"button" tabindex\x3d"-1"\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"closeText" class\x3d"closeText" title\x3d"${buttonCancel}"\x3ex\x3c/span\x3e\r\n\t\t\x3c/span\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent"\x3e\x3c/div\x3e\r\n\t${!actionBarTemplate}\r\n\x3c/div\x3e\r\n\r\n',
        "url:dijit/form/templates/TextBox.html": '\x3cdiv class\x3d"dijit dijitReset dijitInline dijitLeft" id\x3d"widget_${id}" role\x3d"presentation"\r\n\t\x3e\x3cdiv class\x3d"dijitReset dijitInputField dijitInputContainer"\r\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputInner" data-dojo-attach-point\x3d\'textbox,focusNode\' autocomplete\x3d"off"\r\n\t\t\t${!nameAttrSetting} type\x3d\'${type}\'\r\n\t/\x3e\x3c/div\r\n\x3e\x3c/div\x3e\r\n',
        "url:dijit/templates/Tooltip.html": '\x3cdiv class\x3d"dijitTooltip dijitTooltipLeft" id\x3d"dojoTooltip" data-dojo-attach-event\x3d"mouseenter:onMouseEnter,mouseleave:onMouseLeave"\r\n\t\x3e\x3cdiv class\x3d"dijitTooltipConnector" data-dojo-attach-point\x3d"connectorNode"\x3e\x3c/div\r\n\t\x3e\x3cdiv class\x3d"dijitTooltipContainer dijitTooltipContents" data-dojo-attach-point\x3d"containerNode" role\x3d\'alert\'\x3e\x3c/div\r\n\x3e\x3c/div\x3e\r\n',
        "url:dijit/form/templates/ValidationTextBox.html": '\x3cdiv class\x3d"dijit dijitReset dijitInline dijitLeft"\r\n\tid\x3d"widget_${id}" role\x3d"presentation"\r\n\t\x3e\x3cdiv class\x3d\'dijitReset dijitValidationContainer\'\r\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value\x3d"\x26#935; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\r\n\t/\x3e\x3c/div\r\n\t\x3e\x3cdiv class\x3d"dijitReset dijitInputField dijitInputContainer"\r\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputInner" data-dojo-attach-point\x3d\'textbox,focusNode\' autocomplete\x3d"off"\r\n\t\t\t${!nameAttrSetting} type\x3d\'${type}\'\r\n\t/\x3e\x3c/div\r\n\x3e\x3c/div\x3e\r\n',
        "*now": function (r) {
            r(['dojo/i18n!*preload*esri/nls/jsapi*["ar","az","ca","cs","da","de-de","el","en-gb","en-us","es-es","fi-fi","fr-fr","he-il","hu","it-it","ja-jp","ko-kr","nl-nl","nb","pl","pt-br","pt-pt","ro","ru","sk","sl","sv","th","tr","zh-tw","zh-cn","ROOT"]'])
        },
        "*noref": 1
    }
});
define("esri/jsapi", "dojo/fx/Toggler dojo/_base/html dijit/_base dijit/form/DropDownButton dijit/form/ComboButton dijit/form/ToggleButton dijit/_base/manager dijit/TooltipDialog ./main ./map ./geometry ./symbol ./renderer ./utils ./IdentityManager ./layers/graphics ./layers/agstiled ./layers/agsdynamic ./layers/FeatureLayer ./dijit/PopupTemplate ./dijit/PopupRenderer ./dijit/Attribution ./arcgis/utils ./tasks/query ./tasks/QueryTask ./tasks/RelationshipQuery ./tasks/StatisticDefinition".split(" "), function () {
    return {}
});